(function(e,t){typeof module=="object"&&typeof module.exports=="object"?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)})(typeof window!="undefined"?window:this,function(window,noGlobal){function isArraylike(e){var t="length"in e&&e.length,n=jQuery.type(e);return n==="function"||jQuery.isWindow(e)?!1:e.nodeType===1&&t?!0:n==="array"||t===0||typeof t=="number"&&t>0&&t-1 in e}function winnow(e,t,n){if(jQuery.isFunction(t))return jQuery.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return jQuery.grep(e,function(e){return e===t!==n});if(typeof t=="string"){if(risSimple.test(t))return jQuery.filter(t,e,n);t=jQuery.filter(t,e)}return jQuery.grep(e,function(e){return indexOf.call(t,e)>=0!==n})}function sibling(e,t){while((e=e[t])&&e.nodeType!==1);return e}function createOptions(e){var t=optionsCache[e]={};return jQuery.each(e.match(rnotwhite)||[],function(e,n){t[n]=!0}),t}function completed(){document.removeEventListener("DOMContentLoaded",completed,!1),window.removeEventListener("load",completed,!1),jQuery.ready()}function Data(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=jQuery.expando+Data.uid++}function dataAttr(e,t,n){var r;if(n===undefined&&e.nodeType===1){r="data-"+t.replace(rmultiDash,"-$1").toLowerCase(),n=e.getAttribute(r);if(typeof n=="string"){try{n=n==="true"?!0:n==="false"?!1:n==="null"?null:+n+""===n?+n:rbrace.test(n)?jQuery.parseJSON(n):n}catch(i){}data_user.set(e,t,n)}else n=undefined}return n}function returnTrue(){return!0}function returnFalse(){return!1}function safeActiveElement(){try{return document.activeElement}catch(e){}}function manipulationTarget(e,t){return jQuery.nodeName(e,"table")&&jQuery.nodeName(t.nodeType!==11?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function disableScript(e){return e.type=(e.getAttribute("type")!==null)+"/"+e.type,e}function restoreScript(e){var t=rscriptTypeMasked.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function setGlobalEval(e,t){var n=0,r=e.length;for(;n<r;n++)data_priv.set(e[n],"globalEval",!t||data_priv.get(t[n],"globalEval"))}function cloneCopyEvent(e,t){var n,r,i,s,o,u,a,f;if(t.nodeType!==1)return;if(data_priv.hasData(e)){s=data_priv.access(e),o=data_priv.set(t,s),f=s.events;if(f){delete o.handle,o.events={};for(i in f)for(n=0,r=f[i].length;n<r;n++)jQuery.event.add(t,i,f[i][n])}}data_user.hasData(e)&&(u=data_user.access(e),a=jQuery.extend({},u),data_user.set(t,a))}function getAll(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return t===undefined||t&&jQuery.nodeName(e,t)?jQuery.merge([e],n):n}function fixInput(e,t){var n=t.nodeName.toLowerCase();if(n==="input"&&rcheckableType.test(e.type))t.checked=e.checked;else if(n==="input"||n==="textarea")t.defaultValue=e.defaultValue}function actualDisplay(e,t){var n,r=jQuery(t.createElement(e)).appendTo(t.body),i=window.getDefaultComputedStyle&&(n=window.getDefaultComputedStyle(r[0]))?n.display:jQuery.css(r[0],"display");return r.detach(),i}function defaultDisplay(e){var t=document,n=elemdisplay[e];if(!n){n=actualDisplay(e,t);if(n==="none"||!n)iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=iframe[0].contentDocument,t.write(),t.close(),n=actualDisplay(e,t),iframe.detach();elemdisplay[e]=n}return n}function curCSS(e,t,n){var r,i,s,o,u=e.style;return n=n||getStyles(e),n&&(o=n.getPropertyValue(t)||n[t]),n&&(o===""&&!jQuery.contains(e.ownerDocument,e)&&(o=jQuery.style(e,t)),rnumnonpx.test(o)&&rmargin.test(t)&&(r=u.width,i=u.minWidth,s=u.maxWidth,u.minWidth=u.maxWidth=u.width=o,o=n.width,u.width=r,u.minWidth=i,u.maxWidth=s)),o!==undefined?o+"":o}function addGetHookIf(e,t){return{get:function(){if(e()){delete this.get;return}return(this.get=t).apply(this,arguments)}}}function vendorPropName(e,t){if(t in e)return t;var n=t[0].toUpperCase()+t.slice(1),r=t,i=cssPrefixes.length;while(i--){t=cssPrefixes[i]+n;if(t in e)return t}return r}function setPositiveNumber(e,t,n){var r=rnumsplit.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function augmentWidthOrHeight(e,t,n,r,i){var s=n===(r?"border":"content")?4:t==="width"?1:0,o=0;for(;s<4;s+=2)n==="margin"&&(o+=jQuery.css(e,n+cssExpand[s],!0,i)),r?(n==="content"&&(o-=jQuery.css(e,"padding"+cssExpand[s],!0,i)),n!=="margin"&&(o-=jQuery.css(e,"border"+cssExpand[s]+"Width",!0,i))):(o+=jQuery.css(e,"padding"+cssExpand[s],!0,i),n!=="padding"&&(o+=jQuery.css(e,"border"+cssExpand[s]+"Width",!0,i)));return o}function getWidthOrHeight(e,t,n){var r=!0,i=t==="width"?e.offsetWidth:e.offsetHeight,s=getStyles(e),o=jQuery.css(e,"boxSizing",!1,s)==="border-box";if(i<=0||i==null){i=curCSS(e,t,s);if(i<0||i==null)i=e.style[t];if(rnumnonpx.test(i))return i;r=o&&(support.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+augmentWidthOrHeight(e,t,n||(o?"border":"content"),r,s)+"px"}function showHide(e,t){var n,r,i,s=[],o=0,u=e.length;for(;o<u;o++){r=e[o];if(!r.style)continue;s[o]=data_priv.get(r,"olddisplay"),n=r.style.display,t?(!s[o]&&n==="none"&&(r.style.display=""),r.style.display===""&&isHidden(r)&&(s[o]=data_priv.access(r,"olddisplay",defaultDisplay(r.nodeName)))):(i=isHidden(r),(n!=="none"||!i)&&data_priv.set(r,"olddisplay",i?n:jQuery.css(r,"display")))}for(o=0;o<u;o++){r=e[o];if(!r.style)continue;if(!t||r.style.display==="none"||r.style.display==="")r.style.display=t?s[o]||"":"none"}return e}function Tween(e,t,n,r,i){return new Tween.prototype.init(e,t,n,r,i)}function createFxNow(){return setTimeout(function(){fxNow=undefined}),fxNow=jQuery.now()}function genFx(e,t){var n,r=0,i={height:e};t=t?1:0;for(;r<4;r+=2-t)n=cssExpand[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function createTween(e,t,n){var r,i=(tweeners[t]||[]).concat(tweeners["*"]),s=0,o=i.length;for(;s<o;s++)if(r=i[s].call(n,t,e))return r}function defaultPrefilter(e,t,n){var r,i,s,o,u,a,f,l,c=this,h={},p=e.style,d=e.nodeType&&isHidden(e),v=data_priv.get(e,"fxshow");n.queue||(u=jQuery._queueHooks(e,"fx"),u.unqueued==null&&(u.unqueued=0,a=u.empty.fire,u.empty.fire=function(){u.unqueued||a()}),u.unqueued++,c.always(function(){c.always(function(){u.unqueued--,jQuery.queue(e,"fx").length||u.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],f=jQuery.css(e,"display"),l=f==="none"?data_priv.get(e,"olddisplay")||defaultDisplay(e.nodeName):f,l==="inline"&&jQuery.css(e,"float")==="none"&&(p.display="inline-block")),n.overflow&&(p.overflow="hidden",c.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t){i=t[r];if(rfxtypes.exec(i)){delete t[r],s=s||i==="toggle";if(i===(d?"hide":"show")){if(i!=="show"||!v||v[r]===undefined)continue;d=!0}h[r]=v&&v[r]||jQuery.style(e,r)}else f=undefined}if(!jQuery.isEmptyObject(h)){v?"hidden"in v&&(d=v.hidden):v=data_priv.access(e,"fxshow",{}),s&&(v.hidden=!d),d?jQuery(e).show():c.done(function(){jQuery(e).hide()}),c.done(function(){var t;data_priv.remove(e,"fxshow");for(t in h)jQuery.style(e,t,h[t])});for(r in h)o=createTween(d?v[r]:0,r,c),r in v||(v[r]=o.start,d&&(o.end=o.start,o.start=r==="width"||r==="height"?1:0))}else(f==="none"?defaultDisplay(e.nodeName):f)==="inline"&&(p.display=f)}function propFilter(e,t){var n,r,i,s,o;for(n in e){r=jQuery.camelCase(n),i=t[r],s=e[n],jQuery.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=jQuery.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function Animation(e,t,n){var r,i,s=0,o=animationPrefilters.length,u=jQuery.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;var t=fxNow||createFxNow(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;for(;o<a;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),s<1&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:jQuery.extend({},t),opts:jQuery.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:fxNow||createFxNow(),duration:n.duration,tweens:[],createTween:function(t,n){var r=jQuery.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;i=!0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;propFilter(l,f.opts.specialEasing);for(;s<o;s++){r=animationPrefilters[s].call(f,e,l,f.opts);if(r)return r}return jQuery.map(l,createTween,f),jQuery.isFunction(f.opts.start)&&f.opts.start.call(e,f),jQuery.fx.timer(jQuery.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function addToPrefiltersOrTransports(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(rnotwhite)||[];if(jQuery.isFunction(n))while(r=s[i++])r[0]==="+"?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function inspectPrefiltersOrTransports(e,t,n,r){function o(u){var a;return i[u]=!0,jQuery.each(e[u]||[],function(e,u){var f=u(t,n,r);if(typeof f=="string"&&!s&&!i[f])return t.dataTypes.unshift(f),o(f),!1;if(s)return!(a=f)}),a}var i={},s=e===transports;return o(t.dataTypes[0])||!i["*"]&&o("*")}function ajaxExtend(e,t){var n,r,i=jQuery.ajaxSettings.flatOptions||{};for(n in t)t[n]!==undefined&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&jQuery.extend(!0,e,r),e}function ajaxHandleResponses(e,t,n){var r,i,s,o,u=e.contents,a=e.dataTypes;while(a[0]==="*")a.shift(),r===undefined&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in u)if(u[i]&&u[i].test(r)){a.unshift(i);break}if(a[0]in n)s=a[0];else{for(i in n){if(!a[0]||e.converters[i+" "+a[0]]){s=i;break}o||(o=i)}s=s||o}if(s)return s!==a[0]&&a.unshift(s),n[s]}function ajaxConvert(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s){e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift();if(s)if(s==="*")s=a;else if(a!=="*"&&a!==s){o=f[a+" "+s]||f["* "+s];if(!o)for(i in f){u=i.split(" ");if(u[1]===s){o=f[a+" "+u[0]]||f["* "+u[0]];if(o){o===!0?o=f[i]:f[i]!==!0&&(s=u[0],l.unshift(u[1]));break}}}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}}return{state:"success",data:t}}function buildParams(e,t,n,r){var i;if(jQuery.isArray(t))jQuery.each(t,function(t,i){n||rbracket.test(e)?r(e,i):buildParams(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&jQuery.type(t)==="object")for(i in t)buildParams(e+"["+i+"]",t[i],n,r);else r(e,t)}function getWindow(e){return jQuery.isWindow(e)?e:e.nodeType===9&&e.defaultView}var arr=[],slice=arr.slice,concat=arr.concat,push=arr.push,indexOf=arr.indexOf,class2type={},toString=class2type.toString,hasOwn=class2type.hasOwnProperty,support={},document=window.document,version="2.1.4",jQuery=function(e,t){return new jQuery.fn.init(e,t)},rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(e,t){return t.toUpperCase()};jQuery.fn=jQuery.prototype={jquery:version,constructor:jQuery,selector:"",length:0,toArray:function(){return slice.call(this)},get:function(e){return e!=null?e<0?this[e+this.length]:this[e]:slice.call(this)},pushStack:function(e){var t=jQuery.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return jQuery.each(this,e,t)},map:function(e){return this.pushStack(jQuery.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:push,sort:arr.sort,splice:arr.splice},jQuery.extend=jQuery.fn.extend=function(){var e,t,n,r,i,s,o=arguments[0]||{},u=1,a=arguments.length,f=!1;typeof o=="boolean"&&(f=o,o=arguments[u]||{},u++),typeof o!="object"&&!jQuery.isFunction(o)&&(o={}),u===a&&(o=this,u--);for(;u<a;u++)if((e=arguments[u])!=null)for(t in e){n=o[t],r=e[t];if(o===r)continue;f&&r&&(jQuery.isPlainObject(r)||(i=jQuery.isArray(r)))?(i?(i=!1,s=n&&jQuery.isArray(n)?n:[]):s=n&&jQuery.isPlainObject(n)?n:{},o[t]=jQuery.extend(f,s,r)):r!==undefined&&(o[t]=r)}return o},jQuery.extend({expando:"jQuery"+(version+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return jQuery.type(e)==="function"},isArray:Array.isArray,isWindow:function(e){return e!=null&&e===e.window},isNumeric:function(e){return!jQuery.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){return jQuery.type(e)!=="object"||e.nodeType||jQuery.isWindow(e)?!1:e.constructor&&!hasOwn.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return e==null?e+"":typeof e=="object"||typeof e=="function"?class2type[toString.call(e)]||"object":typeof e},globalEval:function(code){var script,indirect=eval;code=jQuery.trim(code),code&&(code.indexOf("use strict")===1?(script=document.createElement("script"),script.text=code,document.head.appendChild(script).parentNode.removeChild(script)):indirect(code))},camelCase:function(e){return e.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,s=e.length,o=isArraylike(e);if(n)if(o)for(;i<s;i++){r=t.apply(e[i],n);if(r===!1)break}else for(i in e){r=t.apply(e[i],n);if(r===!1)break}else if(o)for(;i<s;i++){r=t.call(e[i],i,e[i]);if(r===!1)break}else for(i in e){r=t.call(e[i],i,e[i]);if(r===!1)break}return e},trim:function(e){return e==null?"":(e+"").replace(rtrim,"")},makeArray:function(e,t){var n=t||[];return e!=null&&(isArraylike(Object(e))?jQuery.merge(n,typeof e=="string"?[e]:e):push.call(n,e)),n},inArray:function(e,t,n){return t==null?-1:indexOf.call(t,e,n)},merge:function(e,t){var n=+t.length,r=0,i=e.length;for(;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length,u=!n;for(;s<o;s++)r=!t(e[s],s),r!==u&&i.push(e[s]);return i},map:function(e,t,n){var r,i=0,s=e.length,o=isArraylike(e),u=[];if(o)for(;i<s;i++)r=t(e[i],i,n),r!=null&&u.push(r);else for(i in e)r=t(e[i],i,n),r!=null&&u.push(r);return concat.apply([],u)},guid:1,proxy:function(e,t){var n,r,i;return typeof t=="string"&&(n=e[t],t=e,e=n),jQuery.isFunction(e)?(r=slice.call(arguments,2),i=function(){return e.apply(t||this,r.concat(slice.call(arguments)))},i.guid=e.guid=e.guid||jQuery.guid++,i):undefined},now:Date.now,support:support}),jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){class2type["[object "+t+"]"]=t.toLowerCase()});var Sizzle=function(e){function ot(e,t,r,i){var s,u,f,l,c,d,g,y,S,x;(t?t.ownerDocument||t:E)!==p&&h(t),t=t||p,r=r||[],l=t.nodeType;if(typeof e!="string"||!e||l!==1&&l!==9&&l!==11)return r;if(!i&&v){if(l!==11&&(s=Z.exec(e)))if(f=s[1]){if(l===9){u=t.getElementById(f);if(!u||!u.parentNode)return r;if(u.id===f)return r.push(u),r}else if(t.ownerDocument&&(u=t.ownerDocument.getElementById(f))&&b(t,u)&&u.id===f)return r.push(u),r}else{if(s[2])return D.apply(r,t.getElementsByTagName(e)),r;if((f=s[3])&&n.getElementsByClassName)return D.apply(r,t.getElementsByClassName(f)),r}if(n.qsa&&(!m||!m.test(e))){y=g=w,S=t,x=l!==1&&e;if(l===1&&t.nodeName.toLowerCase()!=="object"){d=o(e),(g=t.getAttribute("id"))?y=g.replace(tt,"\\$&"):t.setAttribute("id",y),y="[id='"+y+"'] ",c=d.length;while(c--)d[c]=y+gt(d[c]);S=et.test(e)&&vt(t.parentNode)||t,x=d.join(",")}if(x)try{return D.apply(r,S.querySelectorAll(x)),r}catch(T){}finally{g||t.removeAttribute("id")}}}return a(e.replace(z,"$1"),t,r,i)}function ut(){function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function at(e){return e[w]=!0,e}function ft(e){var t=p.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function lt(e,t){var n=e.split("|"),i=e.length;while(i--)r.attrHandle[n[i]]=t}function ct(e,t){var n=t&&e,r=n&&e.nodeType===1&&t.nodeType===1&&(~t.sourceIndex||L)-(~e.sourceIndex||L);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ht(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function pt(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function dt(e){return at(function(t){return t=+t,at(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function vt(e){return e&&typeof e.getElementsByTagName!="undefined"&&e}function mt(){}function gt(e){var t=0,n=e.length,r="";for(;t<n;t++)r+=e[t].value;return r}function yt(e,t,n){var r=t.dir,i=n&&r==="parentNode",s=x++;return t.first?function(t,n,s){while(t=t[r])if(t.nodeType===1||i)return e(t,n,s)}:function(t,n,o){var u,a,f=[S,s];if(o){while(t=t[r])if(t.nodeType===1||i)if(e(t,n,o))return!0}else while(t=t[r])if(t.nodeType===1||i){a=t[w]||(t[w]={});if((u=a[r])&&u[0]===S&&u[1]===s)return f[2]=u[2];a[r]=f;if(f[2]=e(t,n,o))return!0}}}function bt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function wt(e,t,n){var r=0,i=t.length;for(;r<i;r++)ot(e,t[r],n);return n}function Et(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function St(e,t,n,r,i,s){return r&&!r[w]&&(r=St(r)),i&&!i[w]&&(i=St(i,s)),at(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||wt(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?Et(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=Et(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?H(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=Et(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):D.apply(o,g)})}function xt(e){var t,n,i,s=e.length,o=r.relative[e[0].type],u=o||r.relative[" "],a=o?1:0,l=yt(function(e){return e===t},u,!0),c=yt(function(e){return H(t,e)>-1},u,!0),h=[function(e,n,r){var i=!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r));return t=null,i}];for(;a<s;a++)if(n=r.relative[e[a].type])h=[yt(bt(h),n)];else{n=r.filter[e[a].type].apply(null,e[a].matches);if(n[w]){i=++a;for(;i<s;i++)if(r.relative[e[i].type])break;return St(a>1&&bt(h),a>1&&gt(e.slice(0,a-1).concat({value:e[a-2].type===" "?"*":""})).replace(z,"$1"),n,a<i&&xt(e.slice(a,i)),i<s&&xt(e=e.slice(i)),i<s&&gt(e))}h.push(n)}return bt(h)}function Tt(e,t){var n=t.length>0,i=e.length>0,s=function(s,o,u,a,l){var c,h,d,v=0,m="0",g=s&&[],y=[],b=f,w=s||i&&r.find.TAG("*",l),E=S+=b==null?1:Math.random()||.1,x=w.length;l&&(f=o!==p&&o);for(;m!==x&&(c=w[m])!=null;m++){if(i&&c){h=0;while(d=e[h++])if(d(c,o,u)){a.push(c);break}l&&(S=E)}n&&((c=!d&&c)&&v--,s&&g.push(c))}v+=m;if(n&&m!==v){h=0;while(d=t[h++])d(g,y,o,u);if(s){if(v>0)while(m--)!g[m]&&!y[m]&&(y[m]=M.call(a));y=Et(y)}D.apply(a,y),l&&!s&&y.length>0&&v+t.length>1&&ot.uniqueSort(a)}return l&&(S=E,f=b),g};return n?at(s):s}var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w="sizzle"+1*new Date,E=e.document,S=0,x=0,T=ut(),N=ut(),C=ut(),k=function(e,t){return e===t&&(c=!0),0},L=1<<31,A={}.hasOwnProperty,O=[],M=O.pop,_=O.push,D=O.push,P=O.slice,H=function(e,t){var n=0,r=e.length;for(;n<r;n++)if(e[n]===t)return n;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",j="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",I=F.replace("w","w#"),q="\\["+j+"*("+F+")(?:"+j+"*([*^$|!~]?=)"+j+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+j+"*\\]",R=":("+F+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+q+")*)|"+".*"+")\\)|)",U=new RegExp(j+"+","g"),z=new RegExp("^"+j+"+|((?:^|[^\\\\])(?:\\\\.)*)"+j+"+$","g"),W=new RegExp("^"+j+"*,"+j+"*"),X=new RegExp("^"+j+"*([>+~]|"+j+")"+j+"*"),V=new RegExp("="+j+"*([^\\]'\"]*?)"+j+"*\\]","g"),$=new RegExp(R),J=new RegExp("^"+I+"$"),K={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F.replace("w","w*")+")"),ATTR:new RegExp("^"+q),PSEUDO:new RegExp("^"+R),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+j+"*(even|odd|(([+-]|)(\\d*)n|)"+j+"*(?:([+-]|)"+j+"*(\\d+)|))"+j+"*\\)|)","i"),bool:new RegExp("^(?:"+B+")$","i"),needsContext:new RegExp("^"+j+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+j+"*((?:-\\d)?\\d*)"+j+"*\\)|)(?=[^-]|$)","i")},Q=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,et=/[+~]/,tt=/'|\\/g,nt=new RegExp("\\\\([\\da-f]{1,6}"+j+"?|("+j+")|.)","ig"),rt=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,r&1023|56320)},it=function(){h()};try{D.apply(O=P.call(E.childNodes),E.childNodes),O[E.childNodes.length].nodeType}catch(st){D={apply:O.length?function(e,t){_.apply(e,P.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}n=ot.support={},s=ot.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},h=ot.setDocument=function(e){var t,i,o=e?e.ownerDocument||e:E;if(o===p||o.nodeType!==9||!o.documentElement)return p;p=o,d=o.documentElement,i=o.defaultView,i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",it,!1):i.attachEvent&&i.attachEvent("onunload",it)),v=!s(o),n.attributes=ft(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ft(function(e){return e.appendChild(o.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Y.test(o.getElementsByClassName),n.getById=ft(function(e){return d.appendChild(e).id=w,!o.getElementsByName||!o.getElementsByName(w).length}),n.getById?(r.find.ID=function(e,t){if(typeof t.getElementById!="undefined"&&v){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},r.filter.ID=function(e){var t=e.replace(nt,rt);return function(e){return e.getAttribute("id")===t}}):(delete r.find.ID,r.filter.ID=function(e){var t=e.replace(nt,rt);return function(e){var n=typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id");return n&&n.value===t}}),r.find.TAG=n.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!="undefined")return t.getElementsByTagName(e);if(n.qsa)return t.querySelectorAll(e)}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if(e==="*"){while(n=s[i++])n.nodeType===1&&r.push(n);return r}return s},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(v)return t.getElementsByClassName(e)},g=[],m=[];if(n.qsa=Y.test(o.querySelectorAll))ft(function(e){d.appendChild(e).innerHTML="<a id='"+w+"'></a>"+"<select id='"+w+"-\f]' msallowcapture=''>"+"<option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+j+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+j+"*(?:value|"+B+")"),e.querySelectorAll("[id~="+w+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||m.push(".#.+[+~]")}),ft(function(e){var t=o.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+j+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")});return(n.matchesSelector=Y.test(y=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&ft(function(e){n.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!='']:x"),g.push("!=",R)}),m=m.length&&new RegExp(m.join("|")),g=g.length&&new RegExp(g.join("|")),t=Y.test(d.compareDocumentPosition),b=t||Y.test(d.contains)?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&r.nodeType===1&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&e.compareDocumentPosition(r)&16)}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},k=t?function(e,t){if(e===t)return c=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,r&1||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===o||e.ownerDocument===E&&b(E,e)?-1:t===o||t.ownerDocument===E&&b(E,t)?1:l?H(l,e)-H(l,t):0:r&4?-1:1)}:function(e,t){if(e===t)return c=!0,0;var n,r=0,i=e.parentNode,s=t.parentNode,u=[e],a=[t];if(!i||!s)return e===o?-1:t===o?1:i?-1:s?1:l?H(l,e)-H(l,t):0;if(i===s)return ct(e,t);n=e;while(n=n.parentNode)u.unshift(n);n=t;while(n=n.parentNode)a.unshift(n);while(u[r]===a[r])r++;return r?ct(u[r],a[r]):u[r]===E?-1:a[r]===E?1:0},o},ot.matches=function(e,t){return ot(e,null,null,t)},ot.matchesSelector=function(e,t){(e.ownerDocument||e)!==p&&h(e),t=t.replace(V,"='$1']");if(n.matchesSelector&&v&&(!g||!g.test(t))&&(!m||!m.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&e.document.nodeType!==11)return r}catch(i){}return ot(t,p,null,[e]).length>0},ot.contains=function(e,t){return(e.ownerDocument||e)!==p&&h(e),b(e,t)},ot.attr=function(e,t){(e.ownerDocument||e)!==p&&h(e);var i=r.attrHandle[t.toLowerCase()],s=i&&A.call(r.attrHandle,t.toLowerCase())?i(e,t,!v):undefined;return s!==undefined?s:n.attributes||!v?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},ot.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ot.uniqueSort=function(e){var t,r=[],i=0,s=0;c=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(k);if(c){while(t=e[s++])t===e[s]&&(i=r.push(s));while(i--)e.splice(r[i],1)}return l=null,e},i=ot.getText=function(e){var t,n="",r=0,s=e.nodeType;if(!s)while(t=e[r++])n+=i(t);else if(s===1||s===9||s===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(s===3||s===4)return e.nodeValue;return n},r=ot.selectors={cacheLength:50,createPseudo:at,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(nt,rt),e[3]=(e[3]||e[4]||e[5]||"").replace(nt,rt),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1].slice(0,3)==="nth"?(e[3]||ot.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd")),e[5]=+(e[7]+e[8]||e[3]==="odd")):e[3]&&ot.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return K.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&$.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(nt,rt).toLowerCase();return e==="*"?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+j+")"+e+"("+j+"|$)"))&&T(e,function(e){return t.test(typeof e.className=="string"&&e.className||typeof e.getAttribute!="undefined"&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ot.attr(r,e);return i==null?t==="!=":t?(i+="",t==="="?i===n:t==="!="?i!==n:t==="^="?n&&i.indexOf(n)===0:t==="*="?n&&i.indexOf(n)>-1:t==="$="?n&&i.slice(-n.length)===n:t==="~="?(" "+i.replace(U," ")+" ").indexOf(n)>-1:t==="|="?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s=e.slice(0,3)!=="nth",o=e.slice(-4)!=="last",u=t==="of-type";return r===1&&i===0?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:c.nodeType===1)return!1;d=v=e==="only"&&!d&&"nextSibling"}return!0}d=[o?m.firstChild:m.lastChild];if(o&&y){l=m[w]||(m[w]={}),f=l[e]||[],p=f[0]===S&&f[1],h=f[0]===S&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(c.nodeType===1&&++h&&c===t){l[e]=[S,p,h];break}}else if(y&&(f=(t[w]||(t[w]={}))[e])&&f[0]===S)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:c.nodeType===1)&&++h){y&&((c[w]||(c[w]={}))[e]=[S,h]);if(c===t)break}return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||ot.error("unsupported pseudo: "+e);return i[w]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?at(function(e,n){var r,s=i(e,t),o=s.length;while(o--)r=H(e,s[o]),e[r]=!(n[r]=s[o])}):function(e){return i(e,0,n)}):i}},pseudos:{not:at(function(e){var t=[],n=[],r=u(e.replace(z,"$1"));return r[w]?at(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),t[0]=null,!n.pop()}}),has:at(function(e){return function(t){return ot(e,t).length>0}}),contains:at(function(e){return e=e.replace(nt,rt),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:at(function(e){return J.test(e||"")||ot.error("unsupported lang: "+e),e=e.replace(nt,rt).toLowerCase(),function(t){var n;do if(n=v?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||n.indexOf(e+"-")===0;while((t=t.parentNode)&&t.nodeType===1);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()==="text")},first:dt(function(){return[0]}),last:dt(function(e,t){return[t-1]}),eq:dt(function(e,t,n){return[n<0?n+t:n]}),even:dt(function(e,t){var n=0;for(;n<t;n+=2)e.push(n);return e}),odd:dt(function(e,t){var n=1;for(;n<t;n+=2)e.push(n);return e}),lt:dt(function(e,t,n){var r=n<0?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:dt(function(e,t,n){var r=n<0?n+t:n;for(;++r<t;)e.push(r);return e})}},r.pseudos.nth=r.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=ht(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=pt(t);return mt.prototype=r.filters=r.pseudos,r.setFilters=new mt,o=ot.tokenize=function(e,t){var n,i,s,o,u,a,f,l=N[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=r.preFilter;while(u){if(!n||(i=W.exec(u)))i&&(u=u.slice(i[0].length)||u),a.push(s=[]);n=!1;if(i=X.exec(u))n=i.shift(),s.push({value:n,type:i[0].replace(z," ")}),u=u.slice(n.length);for(o in r.filter)(i=K[o].exec(u))&&(!f[o]||(i=f[o](i)))&&(n=i.shift(),s.push({value:n,type:o,matches:i}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ot.error(e):N(e,a).slice(0)},u=ot.compile=function(e,t){var n,r=[],i=[],s=C[e+" "];if(!s){t||(t=o(e)),n=t.length;while(n--)s=xt(t[n]),s[w]?r.push(s):i.push(s);s=C(e,Tt(i,r)),s.selector=e}return s},a=ot.select=function(e,t,i,s){var a,f,l,c,h,p=typeof e=="function"&&e,d=!s&&o(e=p.selector||e);i=i||[];if(d.length===1){f=d[0]=d[0].slice(0);if(f.length>2&&(l=f[0]).type==="ID"&&n.getById&&t.nodeType===9&&v&&r.relative[f[1].type]){t=(r.find.ID(l.matches[0].replace(nt,rt),t)||[])[0];if(!t)return i;p&&(t=t.parentNode),e=e.slice(f.shift().value.length)}a=K.needsContext.test(e)?0:f.length;while(a--){l=f[a];if(r.relative[c=l.type])break;if(h=r.find[c])if(s=h(l.matches[0].replace(nt,rt),et.test(f[0].type)&&vt(t.parentNode)||t)){f.splice(a,1),e=s.length&&gt(f);if(!e)return D.apply(i,s),i;break}}}
return(p||u(e,d))(s,t,!v,i,et.test(e)&&vt(t.parentNode)||t),i},n.sortStable=w.split("").sort(k).join("")===w,n.detectDuplicates=!!c,h(),n.sortDetached=ft(function(e){return e.compareDocumentPosition(p.createElement("div"))&1}),ft(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild.getAttribute("href")==="#"})||lt("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,t.toLowerCase()==="type"?1:2)}),(!n.attributes||!ft(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),e.firstChild.getAttribute("value")===""}))&&lt("value",function(e,t,n){if(!n&&e.nodeName.toLowerCase()==="input")return e.defaultValue}),ft(function(e){return e.getAttribute("disabled")==null})||lt(B,function(e,t,n){var r;if(!n)return e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),ot}(window);jQuery.find=Sizzle,jQuery.expr=Sizzle.selectors,jQuery.expr[":"]=jQuery.expr.pseudos,jQuery.unique=Sizzle.uniqueSort,jQuery.text=Sizzle.getText,jQuery.isXMLDoc=Sizzle.isXML,jQuery.contains=Sizzle.contains;var rneedsContext=jQuery.expr.match.needsContext,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,risSimple=/^.[^:#\[\.,]*$/;jQuery.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),t.length===1&&r.nodeType===1?jQuery.find.matchesSelector(r,e)?[r]:[]:jQuery.find.matches(e,jQuery.grep(t,function(e){return e.nodeType===1}))},jQuery.fn.extend({find:function(e){var t,n=this.length,r=[],i=this;if(typeof e!="string")return this.pushStack(jQuery(e).filter(function(){for(t=0;t<n;t++)if(jQuery.contains(i[t],this))return!0}));for(t=0;t<n;t++)jQuery.find(e,i[t],r);return r=this.pushStack(n>1?jQuery.unique(r):r),r.selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(winnow(this,e||[],!1))},not:function(e){return this.pushStack(winnow(this,e||[],!0))},is:function(e){return!!winnow(this,typeof e=="string"&&rneedsContext.test(e)?jQuery(e):e||[],!1).length}});var rootjQuery,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,init=jQuery.fn.init=function(e,t){var n,r;if(!e)return this;if(typeof e=="string"){e[0]==="<"&&e[e.length-1]===">"&&e.length>=3?n=[null,e,null]:n=rquickExpr.exec(e);if(n&&(n[1]||!t)){if(n[1]){t=t instanceof jQuery?t[0]:t,jQuery.merge(this,jQuery.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:document,!0));if(rsingleTag.test(n[1])&&jQuery.isPlainObject(t))for(n in t)jQuery.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return r=document.getElementById(n[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=document,this.selector=e,this}return!t||t.jquery?(t||rootjQuery).find(e):this.constructor(t).find(e)}return e.nodeType?(this.context=this[0]=e,this.length=1,this):jQuery.isFunction(e)?typeof rootjQuery.ready!="undefined"?rootjQuery.ready(e):e(jQuery):(e.selector!==undefined&&(this.selector=e.selector,this.context=e.context),jQuery.makeArray(e,this))};init.prototype=jQuery.fn,rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};jQuery.extend({dir:function(e,t,n){var r=[],i=n!==undefined;while((e=e[t])&&e.nodeType!==9)if(e.nodeType===1){if(i&&jQuery(e).is(n))break;r.push(e)}return r},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}}),jQuery.fn.extend({has:function(e){var t=jQuery(e,this),n=t.length;return this.filter(function(){var e=0;for(;e<n;e++)if(jQuery.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,s=[],o=rneedsContext.test(e)||typeof e!="string"?jQuery(e,t||this.context):0;for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:n.nodeType===1&&jQuery.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(s.length>1?jQuery.unique(s):s)},index:function(e){return e?typeof e=="string"?indexOf.call(jQuery(e),this[0]):indexOf.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(jQuery.unique(jQuery.merge(this.get(),jQuery(e,t))))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),jQuery.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return jQuery.dir(e,"parentNode")},parentsUntil:function(e,t,n){return jQuery.dir(e,"parentNode",n)},next:function(e){return sibling(e,"nextSibling")},prev:function(e){return sibling(e,"previousSibling")},nextAll:function(e){return jQuery.dir(e,"nextSibling")},prevAll:function(e){return jQuery.dir(e,"previousSibling")},nextUntil:function(e,t,n){return jQuery.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return jQuery.dir(e,"previousSibling",n)},siblings:function(e){return jQuery.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return jQuery.sibling(e.firstChild)},contents:function(e){return e.contentDocument||jQuery.merge([],e.childNodes)}},function(e,t){jQuery.fn[e]=function(n,r){var i=jQuery.map(this,t,n);return e.slice(-5)!=="Until"&&(r=n),r&&typeof r=="string"&&(i=jQuery.filter(r,i)),this.length>1&&(guaranteedUnique[e]||jQuery.unique(i),rparentsprev.test(e)&&i.reverse()),this.pushStack(i)}});var rnotwhite=/\S+/g,optionsCache={};jQuery.Callbacks=function(e){e=typeof e=="string"?optionsCache[e]||createOptions(e):jQuery.extend({},e);var t,n,r,i,s,o,u=[],a=!e.once&&[],f=function(c){t=e.memory&&c,n=!0,o=i||0,i=0,s=u.length,r=!0;for(;u&&o<s;o++)if(u[o].apply(c[0],c[1])===!1&&e.stopOnFalse){t=!1;break}r=!1,u&&(a?a.length&&f(a.shift()):t?u=[]:l.disable())},l={add:function(){if(u){var n=u.length;(function o(t){jQuery.each(t,function(t,n){var r=jQuery.type(n);r==="function"?(!e.unique||!l.has(n))&&u.push(n):n&&n.length&&r!=="string"&&o(n)})})(arguments),r?s=u.length:t&&(i=n,f(t))}return this},remove:function(){return u&&jQuery.each(arguments,function(e,t){var n;while((n=jQuery.inArray(t,u,n))>-1)u.splice(n,1),r&&(n<=s&&s--,n<=o&&o--)}),this},has:function(e){return e?jQuery.inArray(e,u)>-1:!!u&&!!u.length},empty:function(){return u=[],s=0,this},disable:function(){return u=a=t=undefined,this},disabled:function(){return!u},lock:function(){return a=undefined,t||l.disable(),this},locked:function(){return!a},fireWith:function(e,t){return u&&(!n||a)&&(t=t||[],t=[e,t.slice?t.slice():t],r?a.push(t):f(t)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!n}};return l},jQuery.extend({Deferred:function(e){var t=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return jQuery.Deferred(function(n){jQuery.each(t,function(t,s){var o=jQuery.isFunction(e[t])&&e[t];i[s[1]](function(){var e=o&&o.apply(this,arguments);e&&jQuery.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s[0]+"With"](this===r?n.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(e){return e!=null?jQuery.extend(e,r):r}},i={};return r.pipe=r.then,jQuery.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=slice.call(arguments),r=n.length,i=r!==1||e&&jQuery.isFunction(e.promise)?r:0,s=i===1?e:jQuery.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?slice.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&jQuery.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}});var readyList;jQuery.fn.ready=function(e){return jQuery.ready.promise().done(e),this},jQuery.extend({isReady:!1,readyWait:1,holdReady:function(e){e?jQuery.readyWait++:jQuery.ready(!0)},ready:function(e){if(e===!0?--jQuery.readyWait:jQuery.isReady)return;jQuery.isReady=!0;if(e!==!0&&--jQuery.readyWait>0)return;readyList.resolveWith(document,[jQuery]),jQuery.fn.triggerHandler&&(jQuery(document).triggerHandler("ready"),jQuery(document).off("ready"))}}),jQuery.ready.promise=function(e){return readyList||(readyList=jQuery.Deferred(),document.readyState==="complete"?setTimeout(jQuery.ready):(document.addEventListener("DOMContentLoaded",completed,!1),window.addEventListener("load",completed,!1))),readyList.promise(e)},jQuery.ready.promise();var access=jQuery.access=function(e,t,n,r,i,s,o){var u=0,a=e.length,f=n==null;if(jQuery.type(n)==="object"){i=!0;for(u in n)jQuery.access(e,t,u,n[u],!0,s,o)}else if(r!==undefined){i=!0,jQuery.isFunction(r)||(o=!0),f&&(o?(t.call(e,r),t=null):(f=t,t=function(e,t,n){return f.call(jQuery(e),n)}));if(t)for(;u<a;u++)t(e[u],n,o?r:r.call(e[u],u,t(e[u],n)))}return i?e:f?t.call(e):a?t(e[0],n):s};jQuery.acceptData=function(e){return e.nodeType===1||e.nodeType===9||!+e.nodeType},Data.uid=1,Data.accepts=jQuery.acceptData,Data.prototype={key:function(e){if(!Data.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=Data.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(r){t[this.expando]=n,jQuery.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var r,i=this.key(e),s=this.cache[i];if(typeof t=="string")s[t]=n;else if(jQuery.isEmptyObject(s))jQuery.extend(this.cache[i],t);else for(r in t)s[r]=t[r];return s},get:function(e,t){var n=this.cache[this.key(e)];return t===undefined?n:n[t]},access:function(e,t,n){var r;return t===undefined||t&&typeof t=="string"&&n===undefined?(r=this.get(e,t),r!==undefined?r:this.get(e,jQuery.camelCase(t))):(this.set(e,t,n),n!==undefined?n:t)},remove:function(e,t){var n,r,i,s=this.key(e),o=this.cache[s];if(t===undefined)this.cache[s]={};else{jQuery.isArray(t)?r=t.concat(t.map(jQuery.camelCase)):(i=jQuery.camelCase(t),t in o?r=[t,i]:(r=i,r=r in o?[r]:r.match(rnotwhite)||[])),n=r.length;while(n--)delete o[r[n]]}},hasData:function(e){return!jQuery.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var data_priv=new Data,data_user=new Data,rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/([A-Z])/g;jQuery.extend({hasData:function(e){return data_user.hasData(e)||data_priv.hasData(e)},data:function(e,t,n){return data_user.access(e,t,n)},removeData:function(e,t){data_user.remove(e,t)},_data:function(e,t,n){return data_priv.access(e,t,n)},_removeData:function(e,t){data_priv.remove(e,t)}}),jQuery.fn.extend({data:function(e,t){var n,r,i,s=this[0],o=s&&s.attributes;if(e===undefined){if(this.length){i=data_user.get(s);if(s.nodeType===1&&!data_priv.get(s,"hasDataAttrs")){n=o.length;while(n--)o[n]&&(r=o[n].name,r.indexOf("data-")===0&&(r=jQuery.camelCase(r.slice(5)),dataAttr(s,r,i[r])));data_priv.set(s,"hasDataAttrs",!0)}}return i}return typeof e=="object"?this.each(function(){data_user.set(this,e)}):access(this,function(t){var n,r=jQuery.camelCase(e);if(s&&t===undefined){n=data_user.get(s,e);if(n!==undefined)return n;n=data_user.get(s,r);if(n!==undefined)return n;n=dataAttr(s,r,undefined);if(n!==undefined)return n;return}this.each(function(){var n=data_user.get(this,r);data_user.set(this,r,t),e.indexOf("-")!==-1&&n!==undefined&&data_user.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){data_user.remove(this,e)})}}),jQuery.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=data_priv.get(e,t),n&&(!r||jQuery.isArray(n)?r=data_priv.access(e,t,jQuery.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=jQuery.queue(e,t),r=n.length,i=n.shift(),s=jQuery._queueHooks(e,t),o=function(){jQuery.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return data_priv.get(e,n)||data_priv.access(e,n,{empty:jQuery.Callbacks("once memory").add(function(){data_priv.remove(e,[t+"queue",n])})})}}),jQuery.fn.extend({queue:function(e,t){var n=2;return typeof e!="string"&&(t=e,e="fx",n--),arguments.length<n?jQuery.queue(this[0],e):t===undefined?this:this.each(function(){var n=jQuery.queue(this,e,t);jQuery._queueHooks(this,e),e==="fx"&&n[0]!=="inprogress"&&jQuery.dequeue(this,e)})},dequeue:function(e){return this.each(function(){jQuery.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=jQuery.Deferred(),s=this,o=this.length,u=function(){--r||i.resolveWith(s,[s])};typeof e!="string"&&(t=e,e=undefined),e=e||"fx";while(o--)n=data_priv.get(s[o],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(u));return u(),i.promise(t)}});var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,cssExpand=["Top","Right","Bottom","Left"],isHidden=function(e,t){return e=t||e,jQuery.css(e,"display")==="none"||!jQuery.contains(e.ownerDocument,e)},rcheckableType=/^(?:checkbox|radio)$/i;(function(){var e=document.createDocumentFragment(),t=e.appendChild(document.createElement("div")),n=document.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),support.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",support.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue})();var strundefined=typeof undefined;support.focusinBubbles="onfocusin"in window;var rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|pointer|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;jQuery.event={global:{},add:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=data_priv.get(e);if(!m)return;n.handler&&(s=n,n=s.handler,i=s.selector),n.guid||(n.guid=jQuery.guid++),(a=m.events)||(a=m.events={}),(o=m.handle)||(o=m.handle=function(t){return typeof jQuery!==strundefined&&jQuery.event.triggered!==t.type?jQuery.event.dispatch.apply(e,arguments):undefined}),t=(t||"").match(rnotwhite)||[""],f=t.length;while(f--){u=rtypenamespace.exec(t[f])||[],p=v=u[1],d=(u[2]||"").split(".").sort();if(!p)continue;c=jQuery.event.special[p]||{},p=(i?c.delegateType:c.bindType)||p,c=jQuery.event.special[p]||{},l=jQuery.extend({type:p,origType:v,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&jQuery.expr.match.needsContext.test(i),namespace:d.join(".")},s),(h=a[p])||(h=a[p]=[],h.delegateCount=0,(!c.setup||c.setup.call(e,r,d,o)===!1)&&e.addEventListener&&e.addEventListener(p,o,!1)),c.add&&(c.add.call(e,l),l.handler.guid||(l.handler.guid=n.guid)),i?h.splice(h.delegateCount++,0,l):h.push(l),jQuery.event.global[p]=!0}},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=data_priv.hasData(e)&&data_priv.get(e);if(!m||!(a=m.events))return;t=(t||"").match(rnotwhite)||[""],f=t.length;while(f--){u=rtypenamespace.exec(t[f])||[],p=v=u[1],d=(u[2]||"").split(".").sort();if(!p){for(p in a)jQuery.event.remove(e,p+t[f],n,r,!0);continue}c=jQuery.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,h=a[p]||[],u=u[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=h.length;while(s--)l=h[s],(i||v===l.origType)&&(!n||n.guid===l.guid)&&(!u||u.test(l.namespace))&&(!r||r===l.selector||r==="**"&&l.selector)&&(h.splice(s,1),l.selector&&h.delegateCount--,c.remove&&c.remove.call(e,l));o&&!h.length&&((!c.teardown||c.teardown.call(e,d,m.handle)===!1)&&jQuery.removeEvent(e,p,m.handle),delete a[p])}jQuery.isEmptyObject(a)&&(delete m.handle,data_priv.remove(e,"events"))},trigger:function(e,t,n,r){var i,s,o,u,a,f,l,c=[n||document],h=hasOwn.call(e,"type")?e.type:e,p=hasOwn.call(e,"namespace")?e.namespace.split("."):[];s=o=n=n||document;if(n.nodeType===3||n.nodeType===8)return;if(rfocusMorph.test(h+jQuery.event.triggered))return;h.indexOf(".")>=0&&(p=h.split("."),h=p.shift(),p.sort()),a=h.indexOf(":")<0&&"on"+h,e=e[jQuery.expando]?e:new jQuery.Event(h,typeof e=="object"&&e),e.isTrigger=r?2:3,e.namespace=p.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=undefined,e.target||(e.target=n),t=t==null?[e]:jQuery.makeArray(t,[e]),l=jQuery.event.special[h]||{};if(!r&&l.trigger&&l.trigger.apply(n,t)===!1)return;if(!r&&!l.noBubble&&!jQuery.isWindow(n)){u=l.delegateType||h,rfocusMorph.test(u+h)||(s=s.parentNode);for(;s;s=s.parentNode)c.push(s),o=s;o===(n.ownerDocument||document)&&c.push(o.defaultView||o.parentWindow||window)}i=0;while((s=c[i++])&&!e.isPropagationStopped())e.type=i>1?u:l.bindType||h,f=(data_priv.get(s,"events")||{})[e.type]&&data_priv.get(s,"handle"),f&&f.apply(s,t),f=a&&s[a],f&&f.apply&&jQuery.acceptData(s)&&(e.result=f.apply(s,t),e.result===!1&&e.preventDefault());return e.type=h,!r&&!e.isDefaultPrevented()&&(!l._default||l._default.apply(c.pop(),t)===!1)&&jQuery.acceptData(n)&&a&&jQuery.isFunction(n[h])&&!jQuery.isWindow(n)&&(o=n[a],o&&(n[a]=null),jQuery.event.triggered=h,n[h](),jQuery.event.triggered=undefined,o&&(n[a]=o)),e.result},dispatch:function(e){e=jQuery.event.fix(e);var t,n,r,i,s,o=[],u=slice.call(arguments),a=(data_priv.get(this,"events")||{})[e.type]||[],f=jQuery.event.special[e.type]||{};u[0]=e,e.delegateTarget=this;if(f.preDispatch&&f.preDispatch.call(this,e)===!1)return;o=jQuery.event.handlers.call(this,e,a),t=0;while((i=o[t++])&&!e.isPropagationStopped()){e.currentTarget=i.elem,n=0;while((s=i.handlers[n++])&&!e.isImmediatePropagationStopped())if(!e.namespace_re||e.namespace_re.test(s.namespace))e.handleObj=s,e.data=s.data,r=((jQuery.event.special[s.origType]||{}).handle||s.handler).apply(i.elem,u),r!==undefined&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation())}return f.postDispatch&&f.postDispatch.call(this,e),e.result},handlers:function(e,t){var n,r,i,s,o=[],u=t.delegateCount,a=e.target;if(u&&a.nodeType&&(!e.button||e.type!=="click"))for(;a!==this;a=a.parentNode||this)if(a.disabled!==!0||e.type!=="click"){r=[];for(n=0;n<u;n++)s=t[n],i=s.selector+" ",r[i]===undefined&&(r[i]=s.needsContext?jQuery(i,this).index(a)>=0:jQuery.find(i,this,null,[a]).length),r[i]&&r.push(s);r.length&&o.push({elem:a,handlers:r})}return u<t.length&&o.push({elem:this,handlers:t.slice(u)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,s=t.button;return e.pageX==null&&t.clientX!=null&&(n=e.target.ownerDocument||document,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),!e.which&&s!==undefined&&(e.which=s&1?1:s&2?3:s&4?2:0),e}},fix:function(e){if(e[jQuery.expando])return e;var t,n,r,i=e.type,s=e,o=this.fixHooks[i];o||(this.fixHooks[i]=o=rmouseEvent.test(i)?this.mouseHooks:rkeyEvent.test(i)?this.keyHooks:{}),r=o.props?this.props.concat(o.props):this.props,e=new jQuery.Event(s),t=r.length;while(t--)n=r[t],e[n]=s[n];return e.target||(e.target=document),e.target.nodeType===3&&(e.target=e.target.parentNode),o.filter?o.filter(e,s):e},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&jQuery.nodeName(this,"input"))return this.click(),!1},_default:function(e){return jQuery.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==undefined&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=jQuery.extend(new jQuery.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?jQuery.event.trigger(i,null,t):jQuery.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},jQuery.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},jQuery.Event=function(e,t){if(!(this instanceof jQuery.Event))return new jQuery.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===undefined&&e.returnValue===!1?returnTrue:returnFalse):this.type=e,t&&jQuery.extend(this,t),this.timeStamp=e&&e.timeStamp||jQuery.now(),this[jQuery.expando]=!0},jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=returnTrue,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){jQuery.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;if(!i||i!==r&&!jQuery.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),support.focusinBubbles||jQuery.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){jQuery.event.simulate(t,e.target,jQuery.event.fix(e),!0)};jQuery.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=data_priv.access(r,t);i||r.addEventListener(e,n,!0),data_priv.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=data_priv.access(r,t)-1;i?data_priv.access(r,t,i):(r.removeEventListener(e,n,!0),data_priv.remove(r,t))}}}),jQuery.fn.extend({on:function(e,t,n,r,i){var s,o;if(typeof e=="object"){typeof t!="string"&&(n=n||t,t=undefined);for(o in e)this.on(o,t,n,e[o],i);return this}n==null&&r==null?(r=t,n=t=undefined):r==null&&(typeof t=="string"?(r=n,n=undefined):(r=n,n=t,t=undefined));if(r===!1)r=returnFalse;else if(!r)return this;return i===1&&(s=r,r=function(e){return jQuery().off(e),s.apply(this,arguments)},r.guid=s.guid||(s.guid=jQuery.guid++)),this.each(function(){jQuery.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,jQuery(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if(typeof e=="object"){for(i in e)this.off(i,t,e[i]);return this}if(t===!1||typeof t=="function")n=t,t=undefined;return n===!1&&(n=returnFalse),this.each(function(){jQuery.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){jQuery.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return jQuery.event.trigger(e,t,n,!0)}});var rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td,jQuery.extend({clone:function(e,t,n){var r,i,s,o,u=e.cloneNode(!0),a=jQuery.contains(e.ownerDocument,e);if(!support.noCloneChecked&&(e.nodeType===1||e.nodeType===11)&&!jQuery.isXMLDoc(e)){o=getAll(u),s=getAll(e);for(r=0,i=s.length;r<i;r++)fixInput(s[r],o[r])}if(t)if(n){s=s||getAll(e),o=o||getAll(u);for(r=0,i=s.length;r<i;r++)cloneCopyEvent(s[r],o[r])}else cloneCopyEvent(e,u);return o=getAll(u,"script"),o.length>0&&setGlobalEval(o,!a&&getAll(e,"script")),u},buildFragment:function(e,t,n,r){var i,s,o,u,a,f,l=t.createDocumentFragment(),c=[],h=0,p=e.length;for(;h<p;h++){i=e[h];if(i||i===0)if(jQuery.type(i)==="object")jQuery.merge(c,i.nodeType?[i]:i);else if(!rhtml.test(i))c.push(t.createTextNode(i));else{s=s||l.appendChild(t.createElement("div")),o=(rtagName.exec(i)||["",""])[1].toLowerCase(),u=wrapMap[o]||wrapMap._default,s.innerHTML=u[1]+i.replace(rxhtmlTag,"<$1></$2>")+u[2],f=u[0];while(f--)s=s.lastChild;jQuery.merge(c,s.childNodes),s=l.firstChild,s.textContent=""}}l.textContent="",h=0;while(i=c[h++]){if(r&&jQuery.inArray(i,r)!==-1)continue;a=jQuery.contains(i.ownerDocument,i),s=getAll(l.appendChild(i),"script"),a&&setGlobalEval(s);if(n){f=0;while(i=s[f++])rscriptType.test(i.type||"")&&n.push(i)}}return l},cleanData:function(e){var t,n,r,i,s=jQuery.event.special,o=0;for(;(n=e[o])!==undefined;o++){if(jQuery.acceptData(n)){i=n[data_priv.expando];if(i&&(t=data_priv.cache[i])){if(t.events)for(r in t.events)s[r]?jQuery.event.remove(n,r):jQuery.removeEvent(n,r,t.handle);data_priv.cache[i]&&delete data_priv.cache[i]}}delete data_user.cache[n[data_user.expando]]}}}),jQuery.fn.extend({text:function(e){return access(this,function(e){return e===undefined?jQuery.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9)this.textContent=e})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=manipulationTarget(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=manipulationTarget(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=e?jQuery.filter(e,this):this,i=0;for(;(n=r[i])!=null;i++)!t&&n.nodeType===1&&jQuery.cleanData(getAll(n)),n.parentNode&&(t&&jQuery.contains(n.ownerDocument,n)&&setGlobalEval(getAll(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++)e.nodeType===1&&(jQuery.cleanData(getAll(e,!1)),e.textContent="");return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return jQuery.clone(this,e,t)})},html:function(e){return access(this,function(e){var t=this[0]||{},n=0,r=this.length;if(e===undefined&&t.nodeType===1)return t.innerHTML;if(typeof e=="string"&&!rnoInnerhtml.test(e)&&!wrapMap[(rtagName.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(rxhtmlTag,"<$1></$2>");try{for(;n<r;n++)t=this[n]||{},t.nodeType===1&&(jQuery.cleanData(getAll(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,jQuery.cleanData(getAll(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=concat.apply([],e);var n,r,i,s,o,u,a=0,f=this.length,l=this,c=f-1,h=e[0],p=jQuery.isFunction(h);if(p||f>1&&typeof h=="string"&&!support.checkClone&&rchecked.test(h))return this.each(function(n){var r=l.eq(n);p&&(e[0]=h.call(this,n,r.html())),r.domManip(e,t)});if(f){n=jQuery.buildFragment(e,this[0].ownerDocument,!1,this),r=n.firstChild,n.childNodes.length===1&&(n=r);if(r){i=jQuery.map(getAll(n,"script"),disableScript),s=i.length;for(;a<f;a++)o=n,a!==c&&(o=jQuery.clone(o,!0,!0),s&&jQuery.merge(i,getAll(o,"script"))),t.call(this[a],o,a);if(s){u=i[i.length-1].ownerDocument,jQuery.map(i,restoreScript);for(a=0;a<s;a++)o=i[a],rscriptType.test(o.type||"")&&!data_priv.access(o,"globalEval")&&jQuery.contains(u,o)&&(o.src?jQuery._evalUrl&&jQuery._evalUrl(o.src):jQuery.globalEval(o.textContent.replace(rcleanScript,"")))}}}return this}}),jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){jQuery.fn[e]=function(e){var n,r=[],i=jQuery(e),s=i.length-1,o=0;for(;o<=s;o++)n=o===s?this:this.clone(!0),jQuery(i[o])[t](n),push.apply(r,n.get());return this.pushStack(r)}});var iframe,elemdisplay={},rmargin=/^margin/,rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i"),getStyles=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):window.getComputedStyle(e,null)};(function(){function s(){i.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",i.innerHTML="",n.appendChild(r);var s=window.getComputedStyle(i,null);e=s.top!=="1%",t=s.width==="4px",n.removeChild(r)}var e,t,n=document.documentElement,r=document.createElement("div"),i=document.createElement("div");if(!i.style)return;i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",support.clearCloneStyle=i.style.backgroundClip==="content-box",r.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",r.appendChild(i),window.getComputedStyle&&jQuery.extend(support,{pixelPosition:function(){return s(),e},boxSizingReliable:function(){return t==null&&s(),t},reliableMarginRight:function(){var e,t=i.appendChild(document.createElement("div"));return t.style.cssText=i.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",i.style.width="1px",n.appendChild(r),e=!parseFloat(window.getComputedStyle(t,null).marginRight),n.removeChild(r),i.removeChild(t),e}})})(),jQuery.swap=function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i};var rdisplayswap=/^(none|table(?!-c[ea]).+)/,rnumsplit=new RegExp("^("+pnum+")(.*)$","i"),rrelNum=new RegExp("^([+-])=("+pnum+")","i"),cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"},cssPrefixes=["Webkit","O","Moz","ms"];jQuery.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=curCSS(e,"opacity");return n===""?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,r){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var i,s,o,u=jQuery.camelCase(t),a=e.style;t=jQuery.cssProps[u]||(jQuery.cssProps[u]=vendorPropName(a,u)),o=jQuery.cssHooks[t]||jQuery.cssHooks[u];if(n===undefined)return o&&"get"in o&&(i=o.get(e,!1,r))!==undefined?i:a[t];s=typeof n,s==="string"&&(i=rrelNum.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(jQuery.css(e,t)),s="number");if(n==null||n!==n)return;s==="number"&&!jQuery.cssNumber[u]&&(n+="px"),!support.clearCloneStyle&&n===""&&t.indexOf("background")===0&&(a[t]="inherit");if(!o||!("set"in o)||(n=o.set(e,n,r))!==undefined)a[t]=n},css:function(e,t,n,r){var i,s,o,u=jQuery.camelCase(t);return t=jQuery.cssProps[u]||(jQuery.cssProps[u]=vendorPropName(e.style,u)),o=jQuery.cssHooks[t]||jQuery.cssHooks[u],o&&"get"in o&&(i=o.get(e,!0,n)),i===undefined&&(i=curCSS(e,t,r)),i==="normal"&&t in cssNormalTransform&&(i=cssNormalTransform[t]),n===""||n?(s=parseFloat(i),n===!0||jQuery.isNumeric(s)?s||0:i):i}}),jQuery.each(["height","width"],function(e,t){jQuery.cssHooks[t]={get:function(e,n,r){if(n)return rdisplayswap.test(jQuery.css(e,"display"))&&e.offsetWidth===0?jQuery.swap(e,cssShow,function(){return getWidthOrHeight(e,t,r)}):getWidthOrHeight(e,t,r)},set:function(e,n,r){var i=r&&getStyles(e);return setPositiveNumber(e,n,r?augmentWidthOrHeight(e,t,r,jQuery.css(e,"boxSizing",!1,i)==="border-box",i):0)}}}),jQuery.cssHooks.marginRight=addGetHookIf(support.reliableMarginRight,function(e,t){if(t)return jQuery.swap(e,{display:"inline-block"},curCSS,[e,"marginRight"])}),jQuery.each({margin:"",padding:"",border:"Width"},function(e,t){jQuery.cssHooks[e+t]={expand:function(n){var r=0,i={},s=typeof n=="string"?
n.split(" "):[n];for(;r<4;r++)i[e+cssExpand[r]+t]=s[r]||s[r-2]||s[0];return i}},rmargin.test(e)||(jQuery.cssHooks[e+t].set=setPositiveNumber)}),jQuery.fn.extend({css:function(e,t){return access(this,function(e,t,n){var r,i,s={},o=0;if(jQuery.isArray(t)){r=getStyles(e),i=t.length;for(;o<i;o++)s[t[o]]=jQuery.css(e,t[o],!1,r);return s}return n!==undefined?jQuery.style(e,t,n):jQuery.css(e,t)},e,t,arguments.length>1)},show:function(){return showHide(this,!0)},hide:function(){return showHide(this)},toggle:function(e){return typeof e=="boolean"?e?this.show():this.hide():this.each(function(){isHidden(this)?jQuery(this).show():jQuery(this).hide()})}}),jQuery.Tween=Tween,Tween.prototype={constructor:Tween,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(jQuery.cssNumber[n]?"":"px")},cur:function(){var e=Tween.propHooks[this.prop];return e&&e.get?e.get(this):Tween.propHooks._default.get(this)},run:function(e){var t,n=Tween.propHooks[this.prop];return this.options.duration?this.pos=t=jQuery.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Tween.propHooks._default.set(this),this}},Tween.prototype.init.prototype=Tween.prototype,Tween.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=jQuery.css(e.elem,e.prop,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){jQuery.fx.step[e.prop]?jQuery.fx.step[e.prop](e):e.elem.style&&(e.elem.style[jQuery.cssProps[e.prop]]!=null||jQuery.cssHooks[e.prop])?jQuery.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},jQuery.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},jQuery.fx=Tween.prototype.init,jQuery.fx.step={};var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=rfxnum.exec(t),s=i&&i[3]||(jQuery.cssNumber[e]?"":"px"),o=(jQuery.cssNumber[e]||s!=="px"&&+r)&&rfxnum.exec(jQuery.css(n.elem,e)),u=1,a=20;if(o&&o[3]!==s){s=s||o[3],i=i||[],o=+r||1;do u=u||".5",o/=u,jQuery.style(n.elem,e,o+s);while(u!==(u=n.cur()/r)&&u!==1&&--a)}return i&&(o=n.start=+o||+r||0,n.unit=s,n.end=i[1]?o+(i[1]+1)*i[2]:+i[2]),n}]};jQuery.Animation=jQuery.extend(Animation,{tweener:function(e,t){jQuery.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],tweeners[n]=tweeners[n]||[],tweeners[n].unshift(t)},prefilter:function(e,t){t?animationPrefilters.unshift(e):animationPrefilters.push(e)}}),jQuery.speed=function(e,t,n){var r=e&&typeof e=="object"?jQuery.extend({},e):{complete:n||!n&&t||jQuery.isFunction(e)&&e,duration:e,easing:n&&t||t&&!jQuery.isFunction(t)&&t};r.duration=jQuery.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in jQuery.fx.speeds?jQuery.fx.speeds[r.duration]:jQuery.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){jQuery.isFunction(r.old)&&r.old.call(this),r.queue&&jQuery.dequeue(this,r.queue)},r},jQuery.fn.extend({fadeTo:function(e,t,n,r){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=jQuery.isEmptyObject(e),s=jQuery.speed(t,n,r),o=function(){var t=Animation(this,jQuery.extend({},e),s);(i||data_priv.get(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return typeof e!="string"&&(n=t,t=e,e=undefined),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=e!=null&&e+"queueHooks",s=jQuery.timers,o=data_priv.get(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&rrun.test(i)&&r(o[i]);for(i=s.length;i--;)s[i].elem===this&&(e==null||s[i].queue===e)&&(s[i].anim.stop(n),t=!1,s.splice(i,1));(t||!n)&&jQuery.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=data_priv.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=jQuery.timers,o=r?r.length:0;n.finish=!0,jQuery.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0);for(t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),jQuery.each(["toggle","show","hide"],function(e,t){var n=jQuery.fn[t];jQuery.fn[t]=function(e,r,i){return e==null||typeof e=="boolean"?n.apply(this,arguments):this.animate(genFx(t,!0),e,r,i)}}),jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){jQuery.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),jQuery.timers=[],jQuery.fx.tick=function(){var e,t=0,n=jQuery.timers;fxNow=jQuery.now();for(;t<n.length;t++)e=n[t],!e()&&n[t]===e&&n.splice(t--,1);n.length||jQuery.fx.stop(),fxNow=undefined},jQuery.fx.timer=function(e){jQuery.timers.push(e),e()?jQuery.fx.start():jQuery.timers.pop()},jQuery.fx.interval=13,jQuery.fx.start=function(){timerId||(timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval))},jQuery.fx.stop=function(){clearInterval(timerId),timerId=null},jQuery.fx.speeds={slow:600,fast:200,_default:400},jQuery.fn.delay=function(e,t){return e=jQuery.fx?jQuery.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e=document.createElement("input"),t=document.createElement("select"),n=t.appendChild(document.createElement("option"));e.type="checkbox",support.checkOn=e.value!=="",support.optSelected=n.selected,t.disabled=!0,support.optDisabled=!n.disabled,e=document.createElement("input"),e.value="t",e.type="radio",support.radioValue=e.value==="t"}();var nodeHook,boolHook,attrHandle=jQuery.expr.attrHandle;jQuery.fn.extend({attr:function(e,t){return access(this,jQuery.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){jQuery.removeAttr(this,e)})}}),jQuery.extend({attr:function(e,t,n){var r,i,s=e.nodeType;if(!e||s===3||s===8||s===2)return;if(typeof e.getAttribute===strundefined)return jQuery.prop(e,t,n);if(s!==1||!jQuery.isXMLDoc(e))t=t.toLowerCase(),r=jQuery.attrHooks[t]||(jQuery.expr.match.bool.test(t)?boolHook:nodeHook);if(n===undefined)return r&&"get"in r&&(i=r.get(e,t))!==null?i:(i=jQuery.find.attr(e,t),i==null?undefined:i);if(n!==null)return r&&"set"in r&&(i=r.set(e,n,t))!==undefined?i:(e.setAttribute(t,n+""),n);jQuery.removeAttr(e,t)},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(rnotwhite);if(s&&e.nodeType===1)while(n=s[i++])r=jQuery.propFix[n]||n,jQuery.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!support.radioValue&&t==="radio"&&jQuery.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),boolHook={set:function(e,t,n){return t===!1?jQuery.removeAttr(e,n):e.setAttribute(n,n),n}},jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(e,t){var n=attrHandle[t]||jQuery.find.attr;attrHandle[t]=function(e,t,r){var i,s;return r||(s=attrHandle[t],attrHandle[t]=i,i=n(e,t,r)!=null?t.toLowerCase():null,attrHandle[t]=s),i}});var rfocusable=/^(?:input|select|textarea|button)$/i;jQuery.fn.extend({prop:function(e,t){return access(this,jQuery.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[jQuery.propFix[e]||e]})}}),jQuery.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,i,s,o=e.nodeType;if(!e||o===3||o===8||o===2)return;return s=o!==1||!jQuery.isXMLDoc(e),s&&(t=jQuery.propFix[t]||t,i=jQuery.propHooks[t]),n!==undefined?i&&"set"in i&&(r=i.set(e,n,t))!==undefined?r:e[t]=n:i&&"get"in i&&(r=i.get(e,t))!==null?r:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||rfocusable.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),support.optSelected||(jQuery.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this});var rclass=/[\t\r\n\f]/g;jQuery.fn.extend({addClass:function(e){var t,n,r,i,s,o,u=typeof e=="string"&&e,a=0,f=this.length;if(jQuery.isFunction(e))return this.each(function(t){jQuery(this).addClass(e.call(this,t,this.className))});if(u){t=(e||"").match(rnotwhite)||[];for(;a<f;a++){n=this[a],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(rclass," "):" ");if(r){s=0;while(i=t[s++])r.indexOf(" "+i+" ")<0&&(r+=i+" ");o=jQuery.trim(r),n.className!==o&&(n.className=o)}}}return this},removeClass:function(e){var t,n,r,i,s,o,u=arguments.length===0||typeof e=="string"&&e,a=0,f=this.length;if(jQuery.isFunction(e))return this.each(function(t){jQuery(this).removeClass(e.call(this,t,this.className))});if(u){t=(e||"").match(rnotwhite)||[];for(;a<f;a++){n=this[a],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(rclass," "):"");if(r){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");o=e?jQuery.trim(r):"",n.className!==o&&(n.className=o)}}}return this},toggleClass:function(e,t){var n=typeof e;return typeof t=="boolean"&&n==="string"?t?this.addClass(e):this.removeClass(e):jQuery.isFunction(e)?this.each(function(n){jQuery(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var t,r=0,i=jQuery(this),s=e.match(rnotwhite)||[];while(t=s[r++])i.hasClass(t)?i.removeClass(t):i.addClass(t)}else if(n===strundefined||n==="boolean")this.className&&data_priv.set(this,"__className__",this.className),this.className=this.className||e===!1?"":data_priv.get(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(rclass," ").indexOf(t)>=0)return!0;return!1}});var rreturn=/\r/g;jQuery.fn.extend({val:function(e){var t,n,r,i=this[0];if(!arguments.length){if(i)return t=jQuery.valHooks[i.type]||jQuery.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&(n=t.get(i,"value"))!==undefined?n:(n=i.value,typeof n=="string"?n.replace(rreturn,""):n==null?"":n);return}return r=jQuery.isFunction(e),this.each(function(n){var i;if(this.nodeType!==1)return;r?i=e.call(this,n,jQuery(this).val()):i=e,i==null?i="":typeof i=="number"?i+="":jQuery.isArray(i)&&(i=jQuery.map(i,function(e){return e==null?"":e+""})),t=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!t||!("set"in t)||t.set(this,i,"value")===undefined)this.value=i})}}),jQuery.extend({valHooks:{option:{get:function(e){var t=jQuery.find.attr(e,"value");return t!=null?t:jQuery.trim(jQuery.text(e))}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s=e.type==="select-one"||i<0,o=s?null:[],u=s?i+1:r.length,a=i<0?u:s?i:0;for(;a<u;a++){n=r[a];if((n.selected||a===i)&&(support.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!jQuery.nodeName(n.parentNode,"optgroup"))){t=jQuery(n).val();if(s)return t;o.push(t)}}return o},set:function(e,t){var n,r,i=e.options,s=jQuery.makeArray(t),o=i.length;while(o--){r=i[o];if(r.selected=jQuery.inArray(r.value,s)>=0)n=!0}return n||(e.selectedIndex=-1),s}}}}),jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(e,t){if(jQuery.isArray(t))return e.checked=jQuery.inArray(jQuery(e).val(),t)>=0}},support.checkOn||(jQuery.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value})}),jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){jQuery.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),jQuery.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)}});var nonce=jQuery.now(),rquery=/\?/;jQuery.parseJSON=function(e){return JSON.parse(e+"")},jQuery.parseXML=function(e){var t,n;if(!e||typeof e!="string")return null;try{n=new DOMParser,t=n.parseFromString(e,"text/xml")}catch(r){t=undefined}return(!t||t.getElementsByTagName("parsererror").length)&&jQuery.error("Invalid XML: "+e),t};var rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/mg,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,prefilters={},transports={},allTypes="*/".concat("*"),ajaxLocation=window.location.href,ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[];jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?ajaxExtend(ajaxExtend(e,jQuery.ajaxSettings),t):ajaxExtend(jQuery.ajaxSettings,e)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(e,t){function S(e,t,s,u){var f,m,g,b,E,S=t;if(y===2)return;y=2,o&&clearTimeout(o),n=undefined,i=u||"",w.readyState=e>0?4:0,f=e>=200&&e<300||e===304,s&&(b=ajaxHandleResponses(l,w,s)),b=ajaxConvert(l,b,w,f);if(f)l.ifModified&&(E=w.getResponseHeader("Last-Modified"),E&&(jQuery.lastModified[r]=E),E=w.getResponseHeader("etag"),E&&(jQuery.etag[r]=E)),e===204||l.type==="HEAD"?S="nocontent":e===304?S="notmodified":(S=b.state,m=b.data,g=b.error,f=!g);else{g=S;if(e||!S)S="error",e<0&&(e=0)}w.status=e,w.statusText=(t||S)+"",f?p.resolveWith(c,[m,S,w]):p.rejectWith(c,[w,S,g]),w.statusCode(v),v=undefined,a&&h.trigger(f?"ajaxSuccess":"ajaxError",[w,l,f?m:g]),d.fireWith(c,[w,S]),a&&(h.trigger("ajaxComplete",[w,l]),--jQuery.active||jQuery.event.trigger("ajaxStop"))}typeof e=="object"&&(t=e,e=undefined),t=t||{};var n,r,i,s,o,u,a,f,l=jQuery.ajaxSetup({},t),c=l.context||l,h=l.context&&(c.nodeType||c.jquery)?jQuery(c):jQuery.event,p=jQuery.Deferred(),d=jQuery.Callbacks("once memory"),v=l.statusCode||{},m={},g={},y=0,b="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(y===2){if(!s){s={};while(t=rheaders.exec(i))s[t[1].toLowerCase()]=t[2]}t=s[e.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return y===2?i:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return y||(e=g[n]=g[n]||e,m[e]=t),this},overrideMimeType:function(e){return y||(l.mimeType=e),this},statusCode:function(e){var t;if(e)if(y<2)for(t in e)v[t]=[v[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||b;return n&&n.abort(t),S(0,t),this}};p.promise(w).complete=d.add,w.success=w.done,w.error=w.fail,l.url=((e||l.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//"),l.type=t.method||t.type||l.method||l.type,l.dataTypes=jQuery.trim(l.dataType||"*").toLowerCase().match(rnotwhite)||[""],l.crossDomain==null&&(u=rurl.exec(l.url.toLowerCase()),l.crossDomain=!(!u||u[1]===ajaxLocParts[1]&&u[2]===ajaxLocParts[2]&&(u[3]||(u[1]==="http:"?"80":"443"))===(ajaxLocParts[3]||(ajaxLocParts[1]==="http:"?"80":"443")))),l.data&&l.processData&&typeof l.data!="string"&&(l.data=jQuery.param(l.data,l.traditional)),inspectPrefiltersOrTransports(prefilters,l,t,w);if(y===2)return w;a=jQuery.event&&l.global,a&&jQuery.active++===0&&jQuery.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!rnoContent.test(l.type),r=l.url,l.hasContent||(l.data&&(r=l.url+=(rquery.test(r)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=rts.test(r)?r.replace(rts,"$1_="+nonce++):r+(rquery.test(r)?"&":"?")+"_="+nonce++)),l.ifModified&&(jQuery.lastModified[r]&&w.setRequestHeader("If-Modified-Since",jQuery.lastModified[r]),jQuery.etag[r]&&w.setRequestHeader("If-None-Match",jQuery.etag[r])),(l.data&&l.hasContent&&l.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",l.contentType),w.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+(l.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):l.accepts["*"]);for(f in l.headers)w.setRequestHeader(f,l.headers[f]);if(!l.beforeSend||l.beforeSend.call(c,w,l)!==!1&&y!==2){b="abort";for(f in{success:1,error:1,complete:1})w[f](l[f]);n=inspectPrefiltersOrTransports(transports,l,t,w);if(!n)S(-1,"No Transport");else{w.readyState=1,a&&h.trigger("ajaxSend",[w,l]),l.async&&l.timeout>0&&(o=setTimeout(function(){w.abort("timeout")},l.timeout));try{y=1,n.send(m,S)}catch(E){if(!(y<2))throw E;S(-1,E)}}return w}return w.abort()},getJSON:function(e,t,n){return jQuery.get(e,t,n,"json")},getScript:function(e,t){return jQuery.get(e,undefined,t,"script")}}),jQuery.each(["get","post"],function(e,t){jQuery[t]=function(e,n,r,i){return jQuery.isFunction(n)&&(i=i||r,r=n,n=undefined),jQuery.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),jQuery._evalUrl=function(e){return jQuery.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},jQuery.fn.extend({wrapAll:function(e){var t;return jQuery.isFunction(e)?this.each(function(t){jQuery(this).wrapAll(e.call(this,t))}):(this[0]&&(t=jQuery(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return jQuery.isFunction(e)?this.each(function(t){jQuery(this).wrapInner(e.call(this,t))}):this.each(function(){var t=jQuery(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=jQuery.isFunction(e);return this.each(function(n){jQuery(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){jQuery.nodeName(this,"body")||jQuery(this).replaceWith(this.childNodes)}).end()}}),jQuery.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},jQuery.expr.filters.visible=function(e){return!jQuery.expr.filters.hidden(e)};var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;jQuery.param=function(e,t){var n,r=[],i=function(e,t){t=jQuery.isFunction(t)?t():t==null?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};t===undefined&&(t=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional);if(jQuery.isArray(e)||e.jquery&&!jQuery.isPlainObject(e))jQuery.each(e,function(){i(this.name,this.value)});else for(n in e)buildParams(n,e[n],t,i);return r.join("&").replace(r20,"+")},jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=jQuery.prop(this,"elements");return e?jQuery.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(e)&&(this.checked||!rcheckableType.test(e))}).map(function(e,t){var n=jQuery(this).val();return n==null?null:jQuery.isArray(n)?jQuery.map(n,function(e){return{name:t.name,value:e.replace(rCRLF,"\r\n")}}):{name:t.name,value:n.replace(rCRLF,"\r\n")}}).get()}}),jQuery.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var xhrId=0,xhrCallbacks={},xhrSuccessStatus={0:200,1223:204},xhrSupported=jQuery.ajaxSettings.xhr();window.attachEvent&&window.attachEvent("onunload",function(){for(var e in xhrCallbacks)xhrCallbacks[e]()}),support.cors=!!xhrSupported&&"withCredentials"in xhrSupported,support.ajax=xhrSupported=!!xhrSupported,jQuery.ajaxTransport(function(e){var t;if(support.cors||xhrSupported&&!e.crossDomain)return{send:function(n,r){var i,s=e.xhr(),o=++xhrId;s.open(e.type,e.url,e.async,e.username,e.password);if(e.xhrFields)for(i in e.xhrFields)s[i]=e.xhrFields[i];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),!e.crossDomain&&!n["X-Requested-With"]&&(n["X-Requested-With"]="XMLHttpRequest");for(i in n)s.setRequestHeader(i,n[i]);t=function(e){return function(){t&&(delete xhrCallbacks[o],t=s.onload=s.onerror=null,e==="abort"?s.abort():e==="error"?r(s.status,s.statusText):r(xhrSuccessStatus[s.status]||s.status,s.statusText,typeof s.responseText=="string"?{text:s.responseText}:undefined,s.getAllResponseHeaders()))}},s.onload=t(),s.onerror=t("error"),t=xhrCallbacks[o]=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(u){if(t)throw u}},abort:function(){t&&t()}}}),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return jQuery.globalEval(e),e}}}),jQuery.ajaxPrefilter("script",function(e){e.cache===undefined&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),jQuery.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=jQuery("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i(e.type==="error"?404:200,e.type)}),document.head.appendChild(t[0])},abort:function(){n&&n()}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;return this[e]=!0,e}}),jQuery.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,s,o=e.jsonp!==!1&&(rjsonp.test(e.url)?"url":typeof e.data=="string"&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(e.data)&&"data");if(o||e.dataTypes[0]==="jsonp")return r=e.jsonpCallback=jQuery.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,o?e[o]=e[o].replace(rjsonp,"$1"+r):e.jsonp!==!1&&(e.url+=(rquery.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return s||jQuery.error(r+" was not called"),s[0]},e.dataTypes[0]="json",i=window[r],window[r]=function(){s=arguments},n.always(function(){window[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,oldCallbacks.push(r)),s&&jQuery.isFunction(i)&&i(s[0]),s=i=undefined}),"script"}),jQuery.parseHTML=function(e,t,n){if(!e||typeof e!="string")return null;typeof t=="boolean"&&(n=t,t=!1),t=t||document;var r=rsingleTag.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=jQuery.buildFragment([e],t,i),i&&i.length&&jQuery(i).remove(),jQuery.merge([],r.childNodes))};var _load=jQuery.fn.load;jQuery.fn.load=function(e,t,n){if(typeof e!="string"&&_load)return _load.apply(this,arguments);var r,i,s,o=this,u=e.indexOf(" ");return u>=0&&(r=jQuery.trim(e.slice(u)),e=e.slice(0,u)),jQuery.isFunction(t)?(n=t,t=undefined):t&&typeof t=="object"&&(i="POST"),o.length>0&&jQuery.ajax({url:e,type:i,dataType:"html",data:t}).done(function(e){s=arguments,o.html(r?jQuery("<div>").append(jQuery.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){o.each(n,s||[e.responseText,t,e])}),this},jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){jQuery.fn[t]=function(e){return this.on(t,e)}}),jQuery.expr.filters.animated=function(e){return jQuery.grep(jQuery.timers,function(t){return e===t.elem}).length};var docElem=window.document.documentElement;jQuery.offset={setOffset:function(e,t,n){var r,i,s,o,u,a,f,l=jQuery.css(e,"position"),c=jQuery(e),h={};l==="static"&&(e.style.position="relative"),u=c.offset(),s=jQuery.css(e,"top"),a=jQuery.css(e,"left"),f=(l==="absolute"||l==="fixed")&&(s+a).indexOf("auto")>-1,f?(r=c.position(),o=r.top,i=r.left):(o=parseFloat(s)||0,i=parseFloat(a)||0),jQuery.isFunction(t)&&(t=t.call(e,n,u)),t.top!=null&&(h.top=t.top-u.top+o),t.left!=null&&(h.left=t.left-u.left+i),"using"in t?t.using.call(e,h):c.css(h)}},jQuery.fn.extend({offset:function(e){if(arguments.length)return e===undefined?this:this.each(function(t){jQuery.offset.setOffset(this,e,t)});var t,n,r=this[0],i={top:0,left:0},s=r&&r.ownerDocument;if(!s)return;return t=s.documentElement,jQuery.contains(t,r)?(typeof r.getBoundingClientRect!==strundefined&&(i=r.getBoundingClientRect()),n=getWindow(s),{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}):i},position:function(){if(!this[0])return;var e,t,n=this[0],r={top:0,left:0};return jQuery.css(n,"position")==="fixed"?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),jQuery.nodeName(e[0],"html")||(r=e.offset()),r.top+=jQuery.css(e[0],"borderTopWidth",!0),r.left+=jQuery.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-jQuery.css(n,"marginTop",!0),left:t.left-r.left-jQuery.css(n,"marginLeft",!0)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||docElem;while(e&&!jQuery.nodeName(e,"html")&&jQuery.css(e,"position")==="static")e=e.offsetParent;return e||docElem})}}),jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;jQuery.fn[e]=function(r){return access(this,function(e,r,i){var s=getWindow(e);if(i===undefined)return s?s[t]:e[r];s?s.scrollTo(n?window.pageXOffset:i,n?i:window.pageYOffset):e[r]=i},e,r,arguments.length,null)}}),jQuery.each(["top","left"],function(e,t){jQuery.cssHooks[t]=addGetHookIf(support.pixelPosition,function(e,n){if(n)return n=curCSS(e,t),rnumnonpx.test(n)?jQuery(e).position()[t]+"px":n})}),jQuery.each({Height:"height",Width:"width"},function(e,t){jQuery.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){jQuery.fn[r]=function(r,i){var s=arguments.length&&(n||typeof r!="boolean"),o=n||(r===!0||i===!0?"margin":"border");return access(this,function(t,n,r){var i;return jQuery.isWindow(t)?t.document.documentElement["client"+e]:t.nodeType===9?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):r===undefined?jQuery.css(t,n,o):jQuery.style(t,n,r,o)},t,s?r:undefined,s,null)}})}),jQuery.fn.size=function(){return this.length},jQuery.fn.andSelf=jQuery.fn.addBack,typeof define=="function"&&define.amd&&define("jquery",[],function(){return jQuery});var _jQuery=window.jQuery,_$=window.$;return jQuery.noConflict=function(e){return window.$===jQuery&&(window.$=_$),e&&window.jQuery===jQuery&&(window.jQuery=_jQuery),jQuery},typeof noGlobal===strundefined&&(window.jQuery=window.$=jQuery),jQuery}),function(){function x(e){function t(t,n,r,i,s,o){for(;s>=0&&s<o;s+=e){var u=i?i[s]:s;r=n(r,t[u],u,t)}return r}return function(n,r,i,s){r=v(r,s,4);var o=!S(n)&&d.keys(n),u=(o||n).length,a=e>0?0:u-1;return arguments.length<3&&(i=n[o?o[a]:a],a+=e),t(n,r,i,o,a,u)}}function C(e){return function(t,n,r){n=m(n,r);var i=E(t),s=e>0?0:i-1;for(;s>=0&&s<i;s+=e)if(n(t[s],s,t))return s;return-1}}function k(e,t,n){return function(r,i,s){var u=0,a=E(r);if(typeof s=="number")e>0?u=s>=0?s:Math.max(s+a,u):a=s>=0?Math.min(s+1,a):s+a+1;else if(n&&s&&a)return s=n(r,i),r[s]===i?s:-1;if(i!==i)return s=t(o.call(r,u,a),d.isNaN),s>=0?s+u:-1;for(s=e>0?u:a-1;s>=0&&s<a;s+=e)if(r[s]===i)return s;return-1}}function M(e,t){var n=O.length,i=e.constructor,s=d.isFunction(i)&&i.prototype||r,o="constructor";d.has(e,o)&&!d.contains(t,o)&&t.push(o);while(n--)o=O[n],o in e&&e[o]!==s[o]&&!d.contains(t,o)&&t.push(o)}var e=this,t=e._,n=Array.prototype,r=Object.prototype,i=Function.prototype,s=n.push,o=n.slice,u=r.toString,a=r.hasOwnProperty,f=Array.isArray,l=Object.keys,c=i.bind,h=Object.create,p=function(){},d=function(e){if(e instanceof d)return e;if(!(this instanceof d))return new d(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=d),exports._=d):e._=d,d.VERSION="1.8.3";var v=function(e,t,n){if(t===void 0)return e;switch(n==null?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,s){return e.call(t,n,r,i,s)}}return function(){return e.apply(t,arguments)}},m=function(e,t,n){return e==null?d.identity:d.isFunction(e)?v(e,t,n):d.isObject(e)?d.matcher(e):d.property(e)};d.iteratee=function(e,t){return m(e,t,Infinity)};var g=function(e,t){return function(n){var r=arguments.length;if(r<2||n==null)return n;for(var i=1;i<r;i++){var s=arguments[i],o=e(s),u=o.length;for(var a=0;a<u;a++){var f=o[a];if(!t||n[f]===void 0)n[f]=s[f]}}return n}},y=function(e){if(!d.isObject(e))return{};if(h)return h(e);p.prototype=e;var t=new p;return p.prototype=null,t},b=function(e){return function(t){return t==null?void 0:t[e]}},w=Math.pow(2,53)-1,E=b("length"),S=function(e){var t=E(e);return typeof t=="number"&&t>=0&&t<=w};d.each=d.forEach=function(e,t,n){t=v(t,n);var r,i;if(S(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var s=d.keys(e);for(r=0,i=s.length;r<i;r++)t(e[s[r]],s[r],e)}return e},d.map=d.collect=function(e,t,n){t=m(t,n);var r=!S(e)&&d.keys(e),i=(r||e).length,s=Array(i);for(var o=0;o<i;o++){var u=r?r[o]:o;s[o]=t(e[u],u,e)}return s},d.reduce=d.foldl=d.inject=x(1),d.reduceRight=d.foldr=x(-1),d.find=d.detect=function(e,t,n){var r;S(e)?r=d.findIndex(e,t,n):r=d.findKey(e,t,n);if(r!==void 0&&r!==-1)return e[r]},d.filter=d.select=function(e,t,n){var r=[];return t=m(t,n),d.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r},d.reject=function(e,t,n){return d.filter(e,d.negate(m(t)),n)},d.every=d.all=function(e,t,n){t=m(t,n);var r=!S(e)&&d.keys(e),i=(r||e).length;for(var s=0;s<i;s++){var o=r?r[s]:s;if(!t(e[o],o,e))return!1}return!0},d.some=d.any=function(e,t,n){t=m(t,n);var r=!S(e)&&d.keys(e),i=(r||e).length;for(var s=0;s<i;s++){var o=r?r[s]:s;if(t(e[o],o,e))return!0}return!1},d.contains=d.includes=d.include=function(e,t,n,r){S(e)||(e=d.values(e));if(typeof n!="number"||r)n=0;return d.indexOf(e,t,n)>=0},d.invoke=function(e,t){var n=o.call(arguments,2),r=d.isFunction(t);return d.map(e,function(e){var i=r?t:e[t];return i==null?i:i.apply(e,n)})},d.pluck=function(e,t){return d.map(e,d.property(t))},d.where=function(e,t){return d.filter(e,d.matcher(t))},d.findWhere=function(e,t){return d.find(e,d.matcher(t))},d.max=function(e,t,n){var r=-Infinity,i=-Infinity,s,o;if(t==null&&e!=null){e=S(e)?e:d.values(e);for(var u=0,a=e.length;u<a;u++)s=e[u],s>r&&(r=s)}else t=m(t,n),d.each(e,function(e,n,s){o=t(e,n,s);if(o>i||o===-Infinity&&r===-Infinity)r=e,i=o});return r},d.min=function(e,t,n){var r=Infinity,i=Infinity,s,o;if(t==null&&e!=null){e=S(e)?e:d.values(e);for(var u=0,a=e.length;u<a;u++)s=e[u],s<r&&(r=s)}else t=m(t,n),d.each(e,function(e,n,s){o=t(e,n,s);if(o<i||o===Infinity&&r===Infinity)r=e,i=o});return r},d.shuffle=function(e){var t=S(e)?e:d.values(e),n=t.length,r=Array(n);for(var i=0,s;i<n;i++)s=d.random(0,i),s!==i&&(r[i]=r[s]),r[s]=t[i];return r},d.sample=function(e,t,n){return t==null||n?(S(e)||(e=d.values(e)),e[d.random(e.length-1)]):d.shuffle(e).slice(0,Math.max(0,t))},d.sortBy=function(e,t,n){return t=m(t,n),d.pluck(d.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index-t.index}),"value")};var T=function(e){return function(t,n,r){var i={};return n=m(n,r),d.each(t,function(r,s){var o=n(r,s,t);e(i,r,o)}),i}};d.groupBy=T(function(e,t,n){d.has(e,n)?e[n].push(t):e[n]=[t]}),d.indexBy=T(function(e,t,n){e[n]=t}),d.countBy=T(function(e,t,n){d.has(e,n)?e[n]++:e[n]=1}),d.toArray=function(e){return e?d.isArray(e)?o.call(e):S(e)?d.map(e,d.identity):d.values(e):[]},d.size=function(e){return e==null?0:S(e)?e.length:d.keys(e).length},d.partition=function(e,t,n){t=m(t,n);var r=[],i=[];return d.each(e,function(e,n,s){(t(e,n,s)?r:i).push(e)}),[r,i]},d.first=d.head=d.take=function(e,t,n){return e==null?void 0:t==null||n?e[0]:d.initial(e,e.length-t)},d.initial=function(e,t,n){return o.call(e,0,Math.max(0,e.length-(t==null||n?1:t)))},d.last=function(e,t,n){return e==
null?void 0:t==null||n?e[e.length-1]:d.rest(e,Math.max(0,e.length-t))},d.rest=d.tail=d.drop=function(e,t,n){return o.call(e,t==null||n?1:t)},d.compact=function(e){return d.filter(e,d.identity)};var N=function(e,t,n,r){var i=[],s=0;for(var o=r||0,u=E(e);o<u;o++){var a=e[o];if(S(a)&&(d.isArray(a)||d.isArguments(a))){t||(a=N(a,t,n));var f=0,l=a.length;i.length+=l;while(f<l)i[s++]=a[f++]}else n||(i[s++]=a)}return i};d.flatten=function(e,t){return N(e,t,!1)},d.without=function(e){return d.difference(e,o.call(arguments,1))},d.uniq=d.unique=function(e,t,n,r){d.isBoolean(t)||(r=n,n=t,t=!1),n!=null&&(n=m(n,r));var i=[],s=[];for(var o=0,u=E(e);o<u;o++){var a=e[o],f=n?n(a,o,e):a;t?((!o||s!==f)&&i.push(a),s=f):n?d.contains(s,f)||(s.push(f),i.push(a)):d.contains(i,a)||i.push(a)}return i},d.union=function(){return d.uniq(N(arguments,!0,!0))},d.intersection=function(e){var t=[],n=arguments.length;for(var r=0,i=E(e);r<i;r++){var s=e[r];if(d.contains(t,s))continue;for(var o=1;o<n;o++)if(!d.contains(arguments[o],s))break;o===n&&t.push(s)}return t},d.difference=function(e){var t=N(arguments,!0,!0,1);return d.filter(e,function(e){return!d.contains(t,e)})},d.zip=function(){return d.unzip(arguments)},d.unzip=function(e){var t=e&&d.max(e,E).length||0,n=Array(t);for(var r=0;r<t;r++)n[r]=d.pluck(e,r);return n},d.object=function(e,t){var n={};for(var r=0,i=E(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},d.findIndex=C(1),d.findLastIndex=C(-1),d.sortedIndex=function(e,t,n,r){n=m(n,r,1);var i=n(t),s=0,o=E(e);while(s<o){var u=Math.floor((s+o)/2);n(e[u])<i?s=u+1:o=u}return s},d.indexOf=k(1,d.findIndex,d.sortedIndex),d.lastIndexOf=k(-1,d.findLastIndex),d.range=function(e,t,n){t==null&&(t=e||0,e=0),n=n||1;var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r);for(var s=0;s<r;s++,e+=n)i[s]=e;return i};var L=function(e,t,n,r,i){if(r instanceof t){var s=y(e.prototype),o=e.apply(s,i);return d.isObject(o)?o:s}return e.apply(n,i)};d.bind=function(e,t){if(c&&e.bind===c)return c.apply(e,o.call(arguments,1));if(!d.isFunction(e))throw new TypeError("Bind must be called on a function");var n=o.call(arguments,2),r=function(){return L(e,r,t,this,n.concat(o.call(arguments)))};return r},d.partial=function(e){var t=o.call(arguments,1),n=function(){var r=0,i=t.length,s=Array(i);for(var o=0;o<i;o++)s[o]=t[o]===d?arguments[r++]:t[o];while(r<arguments.length)s.push(arguments[r++]);return L(e,n,this,this,s)};return n},d.bindAll=function(e){var t,n=arguments.length,r;if(n<=1)throw new Error("bindAll must be passed function names");for(t=1;t<n;t++)r=arguments[t],e[r]=d.bind(e[r],e);return e},d.memoize=function(e,t){var n=function(r){var i=n.cache,s=""+(t?t.apply(this,arguments):r);return d.has(i,s)||(i[s]=e.apply(this,arguments)),i[s]};return n.cache={},n},d.delay=function(e,t){var n=o.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},d.defer=d.partial(d.delay,d,1),d.throttle=function(e,t,n){var r,i,s,o=null,u=0;n||(n={});var a=function(){u=n.leading===!1?0:d.now(),o=null,s=e.apply(r,i),o||(r=i=null)};return function(){var f=d.now();!u&&n.leading===!1&&(u=f);var l=t-(f-u);return r=this,i=arguments,l<=0||l>t?(o&&(clearTimeout(o),o=null),u=f,s=e.apply(r,i),o||(r=i=null)):!o&&n.trailing!==!1&&(o=setTimeout(a,l)),s}},d.debounce=function(e,t,n){var r,i,s,o,u,a=function(){var f=d.now()-o;f<t&&f>=0?r=setTimeout(a,t-f):(r=null,n||(u=e.apply(s,i),r||(s=i=null)))};return function(){s=this,i=arguments,o=d.now();var f=n&&!r;return r||(r=setTimeout(a,t)),f&&(u=e.apply(s,i),s=i=null),u}},d.wrap=function(e,t){return d.partial(t,e)},d.negate=function(e){return function(){return!e.apply(this,arguments)}},d.compose=function(){var e=arguments,t=e.length-1;return function(){var n=t,r=e[t].apply(this,arguments);while(n--)r=e[n].call(this,r);return r}},d.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},d.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},d.once=d.partial(d.before,2);var A=!{toString:null}.propertyIsEnumerable("toString"),O=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];d.keys=function(e){if(!d.isObject(e))return[];if(l)return l(e);var t=[];for(var n in e)d.has(e,n)&&t.push(n);return A&&M(e,t),t},d.allKeys=function(e){if(!d.isObject(e))return[];var t=[];for(var n in e)t.push(n);return A&&M(e,t),t},d.values=function(e){var t=d.keys(e),n=t.length,r=Array(n);for(var i=0;i<n;i++)r[i]=e[t[i]];return r},d.mapObject=function(e,t,n){t=m(t,n);var r=d.keys(e),i=r.length,s={},o;for(var u=0;u<i;u++)o=r[u],s[o]=t(e[o],o,e);return s},d.pairs=function(e){var t=d.keys(e),n=t.length,r=Array(n);for(var i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},d.invert=function(e){var t={},n=d.keys(e);for(var r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},d.functions=d.methods=function(e){var t=[];for(var n in e)d.isFunction(e[n])&&t.push(n);return t.sort()},d.extend=g(d.allKeys),d.extendOwn=d.assign=g(d.keys),d.findKey=function(e,t,n){t=m(t,n);var r=d.keys(e),i;for(var s=0,o=r.length;s<o;s++){i=r[s];if(t(e[i],i,e))return i}},d.pick=function(e,t,n){var r={},i=e,s,o;if(i==null)return r;d.isFunction(t)?(o=d.allKeys(i),s=v(t,n)):(o=N(arguments,!1,!1,1),s=function(e,t,n){return t in n},i=Object(i));for(var u=0,a=o.length;u<a;u++){var f=o[u],l=i[f];s(l,f,i)&&(r[f]=l)}return r},d.omit=function(e,t,n){if(d.isFunction(t))t=d.negate(t);else{var r=d.map(N(arguments,!1,!1,1),String);t=function(e,t){return!d.contains(r,t)}}return d.pick(e,t,n)},d.defaults=g(d.allKeys,!0),d.create=function(e,t){var n=y(e);return t&&d.extendOwn(n,t),n},d.clone=function(e){return d.isObject(e)?d.isArray(e)?e.slice():d.extend({},e):e},d.tap=function(e,t){return t(e),e},d.isMatch=function(e,t){var n=d.keys(t),r=n.length;if(e==null)return!r;var i=Object(e);for(var s=0;s<r;s++){var o=n[s];if(t[o]!==i[o]||!(o in i))return!1}return!0};var _=function(e,t,n,r){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return e===t;e instanceof d&&(e=e._wrapped),t instanceof d&&(t=t._wrapped);var i=u.call(e);if(i!==u.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":if(+e!==+e)return+t!==+t;return+e===0?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var s=i==="[object Array]";if(!s){if(typeof e!="object"||typeof t!="object")return!1;var o=e.constructor,a=t.constructor;if(o!==a&&!(d.isFunction(o)&&o instanceof o&&d.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];var f=n.length;while(f--)if(n[f]===e)return r[f]===t;n.push(e),r.push(t);if(s){f=e.length;if(f!==t.length)return!1;while(f--)if(!_(e[f],t[f],n,r))return!1}else{var l=d.keys(e),c;f=l.length;if(d.keys(t).length!==f)return!1;while(f--){c=l[f];if(!d.has(t,c)||!_(e[c],t[c],n,r))return!1}}return n.pop(),r.pop(),!0};d.isEqual=function(e,t){return _(e,t)},d.isEmpty=function(e){return e==null?!0:S(e)&&(d.isArray(e)||d.isString(e)||d.isArguments(e))?e.length===0:d.keys(e).length===0},d.isElement=function(e){return!!e&&e.nodeType===1},d.isArray=f||function(e){return u.call(e)==="[object Array]"},d.isObject=function(e){var t=typeof e;return t==="function"||t==="object"&&!!e},d.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){d["is"+e]=function(t){return u.call(t)==="[object "+e+"]"}}),d.isArguments(arguments)||(d.isArguments=function(e){return d.has(e,"callee")}),typeof /./!="function"&&typeof Int8Array!="object"&&(d.isFunction=function(e){return typeof e=="function"||!1}),d.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},d.isNaN=function(e){return d.isNumber(e)&&e!==+e},d.isBoolean=function(e){return e===!0||e===!1||u.call(e)==="[object Boolean]"},d.isNull=function(e){return e===null},d.isUndefined=function(e){return e===void 0},d.has=function(e,t){return e!=null&&a.call(e,t)},d.noConflict=function(){return e._=t,this},d.identity=function(e){return e},d.constant=function(e){return function(){return e}},d.noop=function(){},d.property=b,d.propertyOf=function(e){return e==null?function(){}:function(t){return e[t]}},d.matcher=d.matches=function(e){return e=d.extendOwn({},e),function(t){return d.isMatch(t,e)}},d.times=function(e,t,n){var r=Array(Math.max(0,e));t=v(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r},d.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},d.now=Date.now||function(){return(new Date).getTime()};var D={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},P=d.invert(D),H=function(e){var t=function(t){return e[t]},n="(?:"+d.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=e==null?"":""+e,r.test(e)?e.replace(i,t):e}};d.escape=H(D),d.unescape=H(P),d.result=function(e,t,n){var r=e==null?void 0:e[t];return r===void 0&&(r=n),d.isFunction(r)?r.call(e):r};var B=0;d.uniqueId=function(e){var t=++B+"";return e?e+t:t},d.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var j=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},I=/\\|'|\r|\n|\u2028|\u2029/g,q=function(e){return"\\"+F[e]};d.template=function(e,t,n){!t&&n&&(t=n),t=d.defaults({},t,d.templateSettings);var r=RegExp([(t.escape||j).source,(t.interpolate||j).source,(t.evaluate||j).source].join("|")+"|$","g"),i=0,s="__p+='";e.replace(r,function(t,n,r,o,u){return s+=e.slice(i,u).replace(I,q),i=u+t.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?s+="'+\n((__t=("+r+"))==null?'':__t)+\n'":o&&(s+="';\n"+o+"\n__p+='"),t}),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var o=new Function(t.variable||"obj","_",s)}catch(u){throw u.source=s,u}var a=function(e){return o.call(this,e,d)},f=t.variable||"obj";return a.source="function("+f+"){\n"+s+"}",a},d.chain=function(e){var t=d(e);return t._chain=!0,t};var R=function(e,t){return e._chain?d(t).chain():t};d.mixin=function(e){d.each(d.functions(e),function(t){var n=d[t]=e[t];d.prototype[t]=function(){var e=[this._wrapped];return s.apply(e,arguments),R(this,n.apply(d,e))}})},d.mixin(d),d.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=n[e];d.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e==="shift"||e==="splice")&&n.length===0&&delete n[0],R(this,n)}}),d.each(["concat","join","slice"],function(e){var t=n[e];d.prototype[e]=function(){return R(this,t.apply(this._wrapped,arguments))}}),d.prototype.value=function(){return this._wrapped},d.prototype.valueOf=d.prototype.toJSON=d.prototype.value,d.prototype.toString=function(){return""+this._wrapped},typeof define=="function"&&define.amd&&define("underscore",[],function(){return d})}.call(this),function(e){var t=typeof self=="object"&&self.self==self&&self||typeof global=="object"&&global.global==global&&global;if(typeof define=="function"&&define.amd)define(["underscore","jquery","exports"],function(n,r,i){t.Backbone=e(t,i,n,r)});else if(typeof exports!="undefined"){var n=require("underscore"),r;try{r=require("jquery")}catch(i){}e(t,exports,n,r)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(function(e,t,n,r){var i=e.Backbone,s=[].slice;t.VERSION="1.2.1",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var o=function(e,t,r){switch(e){case 1:return function(){return n[t](this[r])};case 2:return function(e){return n[t](this[r],e)};case 3:return function(e,i){return n[t](this[r],e,i)};case 4:return function(e,i,s){return n[t](this[r],e,i,s)};default:return function(){var e=s.call(arguments);return e.unshift(this[r]),n[t].apply(n,e)}}},u=function(e,t,r){n.each(t,function(t,i){n[i]&&(e.prototype[i]=o(t,i,r))})},a=t.Events={},f=/\s+/,l=function(e,t,r,i,s){var o=0,u;if(r&&typeof r=="object"){i!==void 0&&"context"in s&&s.context===void 0&&(s.context=i);for(u=n.keys(r);o<u.length;o++)t=e(t,u[o],r[u[o]],s)}else if(r&&f.test(r))for(u=r.split(f);o<u.length;o++)t=e(t,u[o],i,s);else t=e(t,r,i,s);return t};a.on=function(e,t,n){return c(this,e,t,n)};var c=function(e,t,n,r,i){e._events=l(h,e._events||{},t,n,{context:r,ctx:e,listening:i});if(i){var s=e._listeners||(e._listeners={});s[i.id]=i}return e};a.listenTo=function(e,t,r){if(!e)return this;var i=e._listenId||(e._listenId=n.uniqueId("l")),s=this._listeningTo||(this._listeningTo={}),o=s[i];if(!o){var u=this._listenId||(this._listenId=n.uniqueId("l"));o=s[i]={obj:e,objId:i,id:u,listeningTo:s,count:0}}return c(e,t,r,this,o),this};var h=function(e,t,n,r){if(n){var i=e[t]||(e[t]=[]),s=r.context,o=r.ctx,u=r.listening;u&&u.count++,i.push({callback:n,context:s,ctx:s||o,listening:u})}return e};a.off=function(e,t,n){return this._events?(this._events=l(p,this._events,e,t,{context:n,listeners:this._listeners}),this):this},a.stopListening=function(e,t,r){var i=this._listeningTo;if(!i)return this;var s=e?[e._listenId]:n.keys(i);for(var o=0;o<s.length;o++){var u=i[s[o]];if(!u)break;u.obj.off(t,r,this)}return n.isEmpty(i)&&(this._listeningTo=void 0),this};var p=function(e,t,r,i){if(!e)return;var s=0,o,u=i.context,a=i.listeners;if(!t&&!r&&!u){var f=n.keys(a);for(;s<f.length;s++)o=a[f[s]],delete a[o.id],delete o.listeningTo[o.objId];return}var l=t?[t]:n.keys(e);for(;s<l.length;s++){t=l[s];var c=e[t];if(!c)break;var h=[];for(var p=0;p<c.length;p++){var d=c[p];r&&r!==d.callback&&r!==d.callback._callback||u&&u!==d.context?h.push(d):(o=d.listening,o&&--o.count===0&&(delete a[o.id],delete o.listeningTo[o.objId]))}h.length?e[t]=h:delete e[t]}if(n.size(e))return e};a.once=function(e,t,r){var i=l(d,{},e,t,n.bind(this.off,this));return this.on(i,void 0,r)},a.listenToOnce=function(e,t,r){var i=l(d,{},t,r,n.bind(this.stopListening,this,e));return this.listenTo(e,i)};var d=function(e,t,r,i){if(r){var s=e[t]=n.once(function(){i(t,s),r.apply(this,arguments)});s._callback=r}return e};a.trigger=function(e){if(!this._events)return this;var t=Math.max(0,arguments.length-1),n=Array(t);for(var r=0;r<t;r++)n[r]=arguments[r+1];return l(v,this._events,e,void 0,n),this};var v=function(e,t,n,r){if(e){var i=e[t],s=e.all;i&&s&&(s=s.slice()),i&&m(i,r),s&&m(s,[t].concat(r))}return e},m=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t);return}};a.bind=a.on,a.unbind=a.off,n.extend(t,a);var g=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(g.prototype,a,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return this.get(e)!=null},matches:function(e){return!!n.iteratee(e,this)(this.attributes)},set:function(e,t,r){if(e==null)return this;var i;typeof e=="object"?(i=e,r=t):(i={})[e]=t,r||(r={});if(!this._validate(i,r))return!1;var s=r.unset,o=r.silent,u=[],a=this._changing;this._changing=!0,a||(this._previousAttributes=n.clone(this.attributes),this.changed={});var f=this.attributes,l=this.changed,c=this._previousAttributes;this.idAttribute in i&&(this.id=i[this.idAttribute]);for(var h in i)t=i[h],n.isEqual(f[h],t)||u.push(h),n.isEqual(c[h],t)?delete l[h]:l[h]=t,s?delete f[h]:f[h]=t;if(!o){u.length&&(this._pending=r);for(var p=0;p<u.length;p++)this.trigger("change:"+u[p],this,f[u[p]],r)}if(a)return this;if(!o)while(this._pending)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t=this._changing?this._previousAttributes:this.attributes,r={};for(var i in e){var s=e[i];if(n.isEqual(t[i],s))continue;r[i]=s}return n.size(r)?r:!1},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=n.extend({parse:!0},e);var t=this,r=e.success;return e.success=function(n){var i=e.parse?t.parse(n,e):n;if(!t.set(i,e))return!1;r&&r.call(e.context,t,n,e),t.trigger("sync",t,n,e)},I(this,e),this.sync("read",this,e)},save:function(e,t,r){var i;e==null||typeof e=="object"?(i=e,r=t):(i={})[e]=t,r=n.extend({validate:!0,parse:!0},r);var s=r.wait;if(i&&!s){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;var o=this,u=r.success,a=this.attributes;r.success=function(e){o.attributes=a;var t=r.parse?o.parse(e,r):e;s&&(t=n.extend({},i,t));if(t&&!o.set(t,r))return!1;u&&u.call(r.context,o,e,r),o.trigger("sync",o,e,r)},I(this,r),i&&s&&(this.attributes=n.extend({},a,i));var f=this.isNew()?"create":r.patch?"patch":"update";f==="patch"&&!r.attrs&&(r.attrs=i);var l=this.sync(f,this,r);return this.attributes=a,l},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=e.wait,s=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(n){i&&s(),r&&r.call(e.context,t,n,e),t.isNew()||t.trigger("sync",t,n,e)};var o=!1;return this.isNew()?n.defer(e.success):(I(this,e),o=this.sync("delete",this,e)),i||s(),o},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||F();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.defaults({validate:!0},e))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return r?(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1):!0}});var y={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};u(g,y,"attributes");var b=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},w={add:!0,remove:!0,merge:!0},E={add:!0,remove:!1};n.extend(b.prototype,a,{model:g,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,E))},remove:function(e,t){t=n.extend({},t);var r=!n.isArray(e);e=r?[e]:n.clone(e);var i=this._removeModels(e,t);return!t.silent&&i&&this.trigger("update",this,t),r?i[0]:i},set:function(e,t){t=n.defaults({},t,w),t.parse&&!this._isModel(e)&&(e=this.parse(e,t));var r=!n.isArray(e);e=r?e?[e]:[]:e.slice();var i,s,o,u,a,f=t.at;f!=null&&(f=+f),f<0&&(f+=this.length+1);var l=this.comparator&&f==null&&t.sort!==!1,c=n.isString(this.comparator)?this.comparator:null,h=[],p=[],d={},v=t.add,m=t.merge,g=t.remove,y=!l&&v&&g?[]:!1,b=!1;for(var E=0;E<e.length;E++){o=e[E];if(u=this.get(o))g&&(d[u.cid]=!0),m&&o!==u&&(o=this._isModel(o)?o.attributes:o,t.parse&&(o=u.parse(o,t)),u.set(o,t),l&&!a&&u.hasChanged(c)&&(a=!0)),e[E]=u;else if(v){s=e[E]=this._prepareModel(o,t);if(!s)continue;h.push(s),this._addReference(s,t)}s=u||s;if(!s)continue;i=this.modelId(s.attributes),y&&(s.isNew()||!d[i])&&(y.push(s),b=b||!this.models[E]||s.cid!==this.models[E].cid),d[i]=!0}if(g){for(var E=0;E<this.length;E++)d[(s=this.models[E]).cid]||p.push(s);p.length&&this._removeModels(p,t)}if(h.length||b){l&&(a=!0),this.length+=h.length;if(f!=null)for(var E=0;E<h.length;E++)this.models.splice(f+E,0,h[E]);else{y&&(this.models.length=0);var S=y||h;for(var E=0;E<S.length;E++)this.models.push(S[E])}}a&&this.sort({silent:!0});if(!t.silent){var x=f!=null?n.clone(t):t;for(var E=0;E<h.length;E++)f!=null&&(x.index=f+E),(s=h[E]).trigger("add",s,this,x);(a||b)&&this.trigger("sort",this,t),(h.length||p.length)&&this.trigger("update",this,t)}return r?e[0]:e},reset:function(e,t){t=t?n.clone(t):{};for(var r=0;r<this.models.length;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return s.apply(this.models,arguments)},get:function(e){if(e==null)return void 0;var t=this.modelId(this._isModel(e)?e.attributes:e);return this._byId[e]||this._byId[t]||this._byId[e.cid]},at:function(e){return e<0&&(e+=this.length),this.models[e]},where:function(e,t){var r=n.matches(e);return this[t?"find":"filter"](function(e){return r(e.attributes)})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=n.extend({parse:!0},e);var t=e.success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t.call(e.context,r,n,e),r.trigger("sync",r,n,e)},I(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};var r=t.wait;e=this._prepareModel(e,t);if(!e)return!1;r||this.add(e,t);var i=this,s=t.success;return t.success=function(e,t,n){r&&i.add(e,n),s&&s.call(n.context,e,t,n)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;t=t?n.clone(t):{},t.collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_removeModels:function(e,t){var n=[];for(var r=0;r<e.length;r++){var i=this.get(e[r]);if(!i)continue;var s=this.indexOf(i);this.models.splice(s,1),this.length--,t.silent||(t.index=s,i.trigger("remove",i,this,t)),n.push(i),this._removeReference(i,t)}return n.length?n:!1},_isModel:function(e){return e instanceof g},_addReference:function(e,t){this._byId[e.cid]=e;var n=this.modelId(e.attributes);n!=null&&(this._byId[n]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var n=this.modelId(e.attributes);n!=null&&delete this._byId[n],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r);if(e==="change"){var i=this.modelId(t.previousAttributes()),s=this.modelId(t.attributes);i!==s&&(i!=null&&delete this._byId[i],s!=null&&(this._byId[s]=t))}this.trigger.apply(this,arguments)}});var S={forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:2,contains:2,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3};u(b,S,"models");var x=["groupBy","countBy","sortBy","indexBy"];n.each(x,function(e){if(!n[e])return;b.prototype[e]=function(t,r){var i=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,i,r)}});var T=t.View=function(e){this.cid=n.uniqueId("view"),n.extend(this,n.pick(e,C)),this._ensureElement(),this.initialize.apply(this,arguments)},N=/^(\S+)\s*(.*)$/,C=["model","collection","el","id","attributes","className","tagName","events"];n.extend(T.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){e||(e=n.result(this,"events"));if(!e)return this;this.undelegateEvents();for(var t in e){var r=e[t];n.isFunction(r)||(r=this[r]);if(!r)continue;var i=t.match(N);this.delegate(i[1],i[2],n.bind(r,this))}return this},delegate:function(e,t,n){return this.$el.on(e+".delegateEvents"+this.cid,t,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,n){return this.$el.off(e+".delegateEvents"+this.cid,t,n),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(!this.el){var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(e)}else this.setElement(n.result(this,"el"))},_setAttributes:function(e){this.$el.attr(e)}}),t.sync=function(e,r,i){var s=k[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:s,dataType:"json"};i.url||(o.url=n.result(r,"url")||F()),i.data==null&&r&&(e==="create"||e==="update"||e==="patch")&&(o.contentType="application/json",o.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{});if(i.emulateHTTP&&(s==="PUT"||s==="DELETE"||s==="PATCH")){o.type="POST",i.emulateJSON&&(o.data._method=s);var u=i.beforeSend;i.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",s);if(u)return u.apply(this,arguments)}}o.type!=="GET"&&!i.emulateJSON&&(o.processData=!1);var a=i.error;i.error=function(e,t,n){i.textStatus=t,i.errorThrown=n,a&&a.call(i.context,e,t,n)};var f=i.xhr=t.ajax(n.extend(o,i));return r.trigger("request",r,f,i),f};var k={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var L=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},A=/\((.*?)\)/g,O=/(\(\?)?:\w+/g,M=/\*\w+/g,_=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(L.prototype,a,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var s=this;return t.history.route(e,function(n){var o=s._extractParameters(e,n);s.execute(i,o,r)!==!1&&(s.trigger.apply(s,["route:"+r].concat(o)),s.trigger("route",r,o),t.history.trigger("route",s,r,o))}),this},execute:function(e,t,n){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(!this.routes)return;this.routes=n.result(this,"routes");var e,t=n.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(_,"\\$&").replace(A,"(?:$1)?").replace(O,function(e,t){return t?e:"([^/?]+)"}).replace(M,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var D=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},P=/^[#\/]|\s+$/g,H=/^\/+|\/+$/g,B=/#.*$/;D.started=!1,n.extend(D.prototype,a,{interval:50,atRoot:function(){var e=this.location.pathname.replace(/[^\/]$/,"$&/");return e===this.root&&!this.getSearch()},matchRoot:function(){var e=this.decodeFragment(this.location.pathname),t=e.slice(0,this.root.length-1)+"/";return t===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return e.charAt(0)==="/"?e.slice(1):e},getFragment:function(e){return e==null&&(this._usePushState||!this._wantsHashChange?e=this.getPath():e=this.getHash()),e.replace(P,"")},start:function(e){if(D.started)throw new Error("Backbone.history has already been started");D.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window,this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!this.history&&!!this.history.pushState,this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(H,"/");if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var r=document.body,i=r.insertBefore(this.iframe,r.firstChild).contentWindow;i.document.open(),i.document.close(),i.location.hash="#"+this.fragment}var s=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};this._usePushState?s("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?s("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));if(!this.options.silent)return this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),D.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return this.matchRoot()?(e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})):!1},navigate:function(e,t){if(!D.started)return!1;if(!t||t===!0)t={trigger:!!t};e=this.getFragment(e||"");var n=this.root;if(e===""||e.charAt(0)==="?")n=n.slice(0,-1)||"/";var r=n+e;e=this.decodeFragment(e.replace(B,""));if(this.fragment===e)return;this.fragment=e;if(this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,r);else{if(!this._wantsHashChange)return this.location.assign(r);this._updateHash(this.location,e,t.replace);if(this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var i=this.iframe.contentWindow;t.replace||(i.document.open(),i.document.close()),this._updateHash(i.location,e,t.replace)}}if(t.trigger)return this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new D;var j=function(e,t){var r=this,i;e&&n.has(e,"constructor")?i=e.constructor:i=function(){return r.apply(this,arguments)},n.extend(i,r,t);var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,e&&n.extend(i.prototype,e),i.__super__=r.prototype,i};g.extend=b.extend=L.extend=T.extend=D.
extend=j;var F=function(){throw new Error('A "url" property or function must be specified')},I=function(e,t){var n=t.error;t.error=function(r){n&&n.call(t.context,e,r,t),e.trigger("error",e,r,t)}};return t}),window.Modernizr=function(e,t,n){function A(e){f.cssText=e}function O(e,t){return A(p.join(e+";")+(t||""))}function M(e,t){return typeof e===t}function _(e,t){return!!~(""+e).indexOf(t)}function D(e,t){for(var r in e){var i=e[r];if(!_(i,"-")&&f[i]!==n)return t=="pfx"?i:!0}return!1}function P(e,t,r){for(var i in e){var s=t[e[i]];if(s!==n)return r===!1?e[i]:M(s,"function")?s.bind(r||t):s}return!1}function H(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),i=(e+" "+v.join(r+" ")+r).split(" ");return M(t,"string")||M(t,"undefined")?D(i,t):(i=(e+" "+m.join(r+" ")+r).split(" "),P(i,t,n))}function B(){i.input=function(n){for(var r=0,i=n.length;r<i;r++)w[n[r]]=n[r]in l;return w.list&&(w.list=!!t.createElement("datalist")&&!!e.HTMLDataListElement),w}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),i.inputtypes=function(e){for(var r=0,i,s,u,a=e.length;r<a;r++)l.setAttribute("type",s=e[r]),i=l.type!=="text",i&&(l.value=c,l.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(s)&&l.style.WebkitAppearance!==n?(o.appendChild(l),u=t.defaultView,i=u.getComputedStyle&&u.getComputedStyle(l,null).WebkitAppearance!=="textfield"&&l.offsetHeight!==0,o.removeChild(l)):/^(search|tel)$/.test(s)||(/^(url|email)$/.test(s)?i=l.checkValidity&&l.checkValidity()===!1:i=l.value!=c)),b[e[r]]=!!i;return b}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var r="2.8.3",i={},s=!0,o=t.documentElement,u="modernizr",a=t.createElement(u),f=a.style,l=t.createElement("input"),c=":)",h={}.toString,p=" -webkit- -moz- -o- -ms- ".split(" "),d="Webkit Moz O ms",v=d.split(" "),m=d.toLowerCase().split(" "),g={svg:"http://www.w3.org/2000/svg"},y={},b={},w={},E=[],S=E.slice,x,T=function(e,n,r,i){var s,a,f,l,c=t.createElement("div"),h=t.body,p=h||t.createElement("body");if(parseInt(r,10))while(r--)f=t.createElement("div"),f.id=i?i[r]:u+(r+1),c.appendChild(f);return s=["&#173;",'<style id="s',u,'">',e,"</style>"].join(""),c.id=u,(h?c:p).innerHTML+=s,p.appendChild(c),h||(p.style.background="",p.style.overflow="hidden",l=o.style.overflow,o.style.overflow="hidden",o.appendChild(p)),a=n(c,e),h?c.parentNode.removeChild(c):(p.parentNode.removeChild(p),o.style.overflow=l),!!a},N=function(t){var n=e.matchMedia||e.msMatchMedia;if(n)return n(t)&&n(t).matches||!1;var r;return T("@media "+t+" { #"+u+" { position: absolute; } }",function(t){r=(e.getComputedStyle?getComputedStyle(t,null):t.currentStyle)["position"]=="absolute"}),r},C=function(){function r(r,i){i=i||t.createElement(e[r]||"div"),r="on"+r;var s=r in i;return s||(i.setAttribute||(i=t.createElement("div")),i.setAttribute&&i.removeAttribute&&(i.setAttribute(r,""),s=M(i[r],"function"),M(i[r],"undefined")||(i[r]=n),i.removeAttribute(r))),i=null,s}var e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return r}(),k={}.hasOwnProperty,L;!M(k,"undefined")&&!M(k.call,"undefined")?L=function(e,t){return k.call(e,t)}:L=function(e,t){return t in e&&M(e.constructor.prototype[t],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(t){var n=this;if(typeof n!="function")throw new TypeError;var r=S.call(arguments,1),i=function(){if(this instanceof i){var e=function(){};e.prototype=n.prototype;var s=new e,o=n.apply(s,r.concat(S.call(arguments)));return Object(o)===o?o:s}return n.apply(t,r.concat(S.call(arguments)))};return i}),y.flexbox=function(){return H("flexWrap")},y.flexboxlegacy=function(){return H("boxDirection")},y.canvas=function(){var e=t.createElement("canvas");return!!e.getContext&&!!e.getContext("2d")},y.canvastext=function(){return!!i.canvas&&!!M(t.createElement("canvas").getContext("2d").fillText,"function")},y.webgl=function(){return!!e.WebGLRenderingContext},y.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:T(["@media (",p.join("touch-enabled),("),u,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=e.offsetTop===9}),n},y.geolocation=function(){return"geolocation"in navigator},y.postmessage=function(){return!!e.postMessage},y.websqldatabase=function(){return!!e.openDatabase},y.indexedDB=function(){return!!H("indexedDB",e)},y.hashchange=function(){return C("hashchange",e)&&(t.documentMode===n||t.documentMode>7)},y.history=function(){return!!e.history&&!!history.pushState},y.draganddrop=function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},y.websockets=function(){return"WebSocket"in e||"MozWebSocket"in e},y.rgba=function(){return A("background-color:rgba(150,255,150,.5)"),_(f.backgroundColor,"rgba")},y.hsla=function(){return A("background-color:hsla(120,40%,100%,.5)"),_(f.backgroundColor,"rgba")||_(f.backgroundColor,"hsla")},y.multiplebgs=function(){return A("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(f.background)},y.backgroundsize=function(){return H("backgroundSize")},y.borderimage=function(){return H("borderImage")},y.borderradius=function(){return H("borderRadius")},y.boxshadow=function(){return H("boxShadow")},y.textshadow=function(){return t.createElement("div").style.textShadow===""},y.opacity=function(){return O("opacity:.55"),/^0.55$/.test(f.opacity)},y.cssanimations=function(){return H("animationName")},y.csscolumns=function(){return H("columnCount")},y.cssgradients=function(){var e="background-image:",t="gradient(linear,left top,right bottom,from(#9f9),to(white));",n="linear-gradient(left top,#9f9, white);";return A((e+"-webkit- ".split(" ").join(t+e)+p.join(n+e)).slice(0,-e.length)),_(f.backgroundImage,"gradient")},y.cssreflections=function(){return H("boxReflect")},y.csstransforms=function(){return!!H("transform")},y.csstransforms3d=function(){var e=!!H("perspective");return e&&"webkitPerspective"in o.style&&T("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t,n){e=t.offsetLeft===9&&t.offsetHeight===3}),e},y.csstransitions=function(){return H("transition")},y.fontface=function(){var e;return T('@font-face {font-family:"font";src:url("https://")}',function(n,r){var i=t.getElementById("smodernizr"),s=i.sheet||i.styleSheet,o=s?s.cssRules&&s.cssRules[0]?s.cssRules[0].cssText:s.cssText||"":"";e=/src/i.test(o)&&o.indexOf(r.split(" ")[0])===0}),e},y.generatedcontent=function(){var e;return T(["#",u,"{font:0/0 a}#",u,':after{content:"',c,'";visibility:hidden;font:3px/1 a}'].join(""),function(t){e=t.offsetHeight>=3}),e},y.video=function(){var e=t.createElement("video"),n=!1;try{if(n=!!e.canPlayType)n=new Boolean(n),n.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),n.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),n.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")}catch(r){}return n},y.audio=function(){var e=t.createElement("audio"),n=!1;try{if(n=!!e.canPlayType)n=new Boolean(n),n.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),n.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),n.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,"")}catch(r){}return n},y.localstorage=function(){try{return localStorage.setItem(u,u),localStorage.removeItem(u),!0}catch(e){return!1}},y.sessionstorage=function(){try{return sessionStorage.setItem(u,u),sessionStorage.removeItem(u),!0}catch(e){return!1}},y.webworkers=function(){return!!e.Worker},y.applicationcache=function(){return!!e.applicationCache},y.svg=function(){return!!t.createElementNS&&!!t.createElementNS(g.svg,"svg").createSVGRect},y.inlinesvg=function(){var e=t.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==g.svg},y.smil=function(){return!!t.createElementNS&&/SVGAnimate/.test(h.call(t.createElementNS(g.svg,"animate")))},y.svgclippaths=function(){return!!t.createElementNS&&/SVGClipPath/.test(h.call(t.createElementNS(g.svg,"clipPath")))};for(var j in y)L(y,j)&&(x=j.toLowerCase(),i[x]=y[j](),E.push((i[x]?"":"no-")+x));return i.input||B(),i.addTest=function(e,t){if(typeof e=="object")for(var r in e)L(e,r)&&i.addTest(r,e[r]);else{e=e.toLowerCase();if(i[e]!==n)return i;t=typeof t=="function"?t():t,typeof s!="undefined"&&s&&(o.className+=" "+(t?"":"no-")+e),i[e]=t}return i},A(""),a=l=null,function(e,t){function c(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function h(){var e=y.elements;return typeof e=="string"?e.split(" "):e}function p(e){var t=f[e[u]];return t||(t={},a++,e[u]=a,f[a]=t),t}function d(e,n,r){n||(n=t);if(l)return n.createElement(e);r||(r=p(n));var o;return r.cache[e]?o=r.cache[e].cloneNode():s.test(e)?o=(r.cache[e]=r.createElem(e)).cloneNode():o=r.createElem(e),o.canHaveChildren&&!i.test(e)&&!o.tagUrn?r.frag.appendChild(o):o}function v(e,n){e||(e=t);if(l)return e.createDocumentFragment();n=n||p(e);var r=n.frag.cloneNode(),i=0,s=h(),o=s.length;for(;i<o;i++)r.createElement(s[i]);return r}function m(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return y.shivMethods?d(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+h().join().replace(/[\w\-]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(y,t.frag)}function g(e){e||(e=t);var n=p(e);return y.shivCSS&&!o&&!n.hasCSS&&(n.hasCSS=!!c(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),l||m(e,n),e}var n="3.7.0",r=e.html5||{},i=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,s=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,o,u="_html5shiv",a=0,f={},l;(function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",o="hidden"in e,l=e.childNodes.length==1||function(){t.createElement("a");var e=t.createDocumentFragment();return typeof e.cloneNode=="undefined"||typeof e.createDocumentFragment=="undefined"||typeof e.createElement=="undefined"}()}catch(n){o=!0,l=!0}})();var y={elements:r.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:n,shivCSS:r.shivCSS!==!1,supportsUnknownElements:l,shivMethods:r.shivMethods!==!1,type:"default",shivDocument:g,createElement:d,createDocumentFragment:v};e.html5=y,g(t)}(this,t),i._version=r,i._prefixes=p,i._domPrefixes=m,i._cssomPrefixes=v,i.mq=N,i.hasEvent=C,i.testProp=function(e){return D([e])},i.testAllProps=H,i.testStyles=T,i.prefixed=function(e,t,n){return t?H(e,t,n):H(e,"pfx")},o.className=o.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(s?" js "+E.join(" "):""),i}(this,this.document),window.Detectizr=function(e,t,n,r){function p(e,t){var n,r,i;if(arguments.length>2)for(n=1,r=arguments.length;n<r;n+=1)p(e,arguments[n]);else for(i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function d(e){return i.browser.userAgent.indexOf(e)>-1}function v(e){return e.test(i.browser.userAgent)}function m(e){return e.exec(i.browser.userAgent)}function g(e){return e.replace(/^\s+|\s+$/g,"")}function y(e){return e===null||e===r?"":String(e).replace(/((\s|\-|\.)+[a-z0-9])/g,function(e){return e.toUpperCase().replace(/(\s|\-|\.)/g,"")})}function b(e,t){var n=t||"",r=e.nodeType===1&&(e.className?(" "+e.className+" ").replace(f," "):"");if(r){while(r.indexOf(" "+n+" ")>=0)r=r.replace(" "+n+" "," ");e.className=t?g(r):""}}function w(e,t,n){!e||(e=y(e),!t||(t=y(t),E(e+t,!0),!n||E(e+t+"_"+n,!0)))}function E(e,t){!!e&&!!s&&(u.addAllFeaturesAsClass?s.addTest(e,t):(t=typeof t=="function"?t():t,t?s.addTest(e,!0):(delete s[e],b(l,e))))}function S(e,t){e.version=t;var n=t.split(".");n.length>0?(n=n.reverse(),e.major=n.pop(),n.length>0?(e.minor=n.pop(),n.length>0?(n=n.reverse(),e.patch=n.join(".")):e.patch="0"):e.minor="0"):e.major="0"}function x(){e.clearTimeout(c),c=e.setTimeout(function(){h=i.device.orientation,e.innerHeight>e.innerWidth?i.device.orientation="portrait":i.device.orientation="landscape",E(i.device.orientation,!0),h!==i.device.orientation&&E(h,!1)},10)}function T(e){var n=t.plugins,r,i,s,o,u;for(o=n.length-1;o>=0;o--){r=n[o],i=r.name+r.description,s=0;for(u=e.length;u>=0;u--)i.indexOf(e[u])!==-1&&(s+=1);if(s===e.length)return!0}return!1}function N(e){var t;for(t=e.length-1;t>=0;t--)try{new ActiveXObject(e[t])}catch(n){}return!1}function C(r){var f,l,c,h,g,b,C;u=p({},u,r||{});if(u.detectDevice){i.device={type:"",model:"",orientation:""},c=i.device,v(/googletv|smarttv|smart-tv|internet.tv|netcast|nettv|appletv|boxee|kylo|roku|dlnadoc|roku|pov_tv|hbbtv|ce\-html/)?(c.type=o[0],c.model="smartTv"):v(/xbox|playstation.3|wii/)?(c.type=o[0],c.model="gameConsole"):v(/ip(a|ro)d/)?(c.type=o[1],c.model="ipad"):v(/tablet/)&&!v(/rx-34/)||v(/folio/)?(c.type=o[1],c.model=String(m(/playbook/)||"")):v(/linux/)&&v(/android/)&&!v(/fennec|mobi|htc.magic|htcX06ht|nexus.one|sc-02b|fone.945/)?(c.type=o[1],c.model="android"):v(/kindle/)||v(/mac.os/)&&v(/silk/)?(c.type=o[1],c.model="kindle"):v(/gt-p10|sc-01c|shw-m180s|sgh-t849|sch-i800|shw-m180l|sph-p100|sgh-i987|zt180|htc(.flyer|\_flyer)|sprint.atp51|viewpad7|pandigital(sprnova|nova)|ideos.s7|dell.streak.7|advent.vega|a101it|a70bht|mid7015|next2|nook/)||v(/mb511/)&&v(/rutem/)?(c.type=o[1],c.model="android"):v(/bb10/)?(c.type=o[1],c.model="blackberry"):(c.model=m(/iphone|ipod|android|blackberry|opera mini|opera mobi|skyfire|maemo|windows phone|palm|iemobile|symbian|symbianos|fennec|j2me/),c.model!==null?(c.type=o[2],c.model=String(c.model)):(c.model="",v(/bolt|fennec|iris|maemo|minimo|mobi|mowser|netfront|novarra|prism|rx-34|skyfire|tear|xv6875|xv6975|google.wireless.transcoder/)?c.type=o[2]:v(/opera/)&&v(/windows.nt.5/)&&v(/htc|xda|mini|vario|samsung\-gt\-i8000|samsung\-sgh\-i9/)?c.type=o[2]:v(/windows.(nt|xp|me|9)/)&&!v(/phone/)||v(/win(9|.9|nt)/)||v(/\(windows 8\)/)?c.type=o[3]:v(/macintosh|powerpc/)&&!v(/silk/)?(c.type=o[3],c.model="mac"):v(/linux/)&&v(/x11/)?c.type=o[3]:v(/solaris|sunos|bsd/)?c.type=o[3]:v(/cros/)?c.type=o[3]:v(/bot|crawler|spider|yahoo|ia_archiver|covario-ids|findlinks|dataparksearch|larbin|mediapartners-google|ng-search|snappy|teoma|jeeves|tineye/)&&!v(/mobile/)?(c.type=o[3],c.model="crawler"):c.type=o[2]));for(f=0,l=o.length;f<l;f+=1)E(o[f],c.type===o[f]);u.detectDeviceModel&&E(y(c.model),!0)}u.detectScreen&&(c.screen={},!!s&&!!s.mq&&(s.mq("only screen and (max-width: 240px)")?(c.screen.size="veryVerySmall",E("veryVerySmallScreen",!0)):s.mq("only screen and (max-width: 320px)")?(c.screen.size="verySmall",E("verySmallScreen",!0)):s.mq("only screen and (max-width: 480px)")&&(c.screen.size="small",E("smallScreen",!0)),(c.type===o[1]||c.type===o[2])&&s.mq("only screen and (-moz-min-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen  and (min-device-pixel-ratio: 1.3), only screen and (min-resolution: 1.3dppx)")&&(c.screen.resolution="high",E("highresolution",!0))),c.type===o[1]||c.type===o[2]?(e.onresize=function(e){x(e)},x()):(c.orientation="landscape",E(c.orientation,!0))),u.detectOS&&(i.os={},h=i.os,c.model!==""&&(c.model==="ipad"||c.model==="iphone"||c.model==="ipod"?(h.name="ios",S(h,(v(/os\s([\d_]+)/)?RegExp.$1:"").replace(/_/g,"."))):c.model==="android"?(h.name="android",S(h,v(/android\s([\d\.]+)/)?RegExp.$1:"")):c.model==="blackberry"?(h.name="blackberry",S(h,v(/version\/([^\s]+)/)?RegExp.$1:"")):c.model==="playbook"&&(h.name="blackberry",S(h,v(/os ([^\s]+)/)?RegExp.$1.replace(";",""):""))),h.name||(d("win")||d("16bit")?(h.name="windows",d("windows nt 6.3")?S(h,"8.1"):d("windows nt 6.2")||v(/\(windows 8\)/)?S(h,"8"):d("windows nt 6.1")?S(h,"7"):d("windows nt 6.0")?S(h,"vista"):d("windows nt 5.2")||d("windows nt 5.1")||d("windows xp")?S(h,"xp"):d("windows nt 5.0")||d("windows 2000")?S(h,"2k"):d("winnt")||d("windows nt")?S(h,"nt"):d("win98")||d("windows 98")?S(h,"98"):(d("win95")||d("windows 95"))&&S(h,"95")):d("mac")||d("darwin")?(h.name="mac os",d("68k")||d("68000")?S(h,"68k"):d("ppc")||d("powerpc")?S(h,"ppc"):d("os x")&&S(h,(v(/os\sx\s([\d_]+)/)?RegExp.$1:"os x").replace(/_/g,"."))):d("webtv")?h.name="webtv":d("x11")||d("inux")?h.name="linux":d("sunos")?h.name="sun":d("irix")?h.name="irix":d("freebsd")?h.name="freebsd":d("bsd")&&(h.name="bsd")),!h.name||(E(h.name,!0),!h.major||(w(h.name,h.major),!h.minor||w(h.name,h.major,h.minor))),v(/\sx64|\sx86|\swin64|\swow64|\samd64/)?h.addressRegisterSize="64bit":h.addressRegisterSize="32bit",E(h.addressRegisterSize,!0)),u.detectBrowser&&(g=i.browser,!v(/opera|webtv/)&&(v(/msie\s([\d\w\.]+)/)||d("trident"))?(g.engine="trident",g.name="ie",!e.addEventListener&&n.documentMode&&n.documentMode===7?S(g,"8.compat"):v(/trident.*rv[ :](\d+)\./)?S(g,RegExp.$1):S(g,v(/trident\/4\.0/)?"8":RegExp.$1)):d("firefox")?(g.engine="gecko",g.name="firefox",S(g,v(/firefox\/([\d\w\.]+)/)?RegExp.$1:"")):d("gecko/")?g.engine="gecko":d("opera")?(g.name="opera",g.engine="presto",S(g,v(/version\/([\d\.]+)/)?RegExp.$1:v(/opera(\s|\/)([\d\.]+)/)?RegExp.$2:"")):d("konqueror")?g.name="konqueror":d("chrome")?(g.engine="webkit",g.name="chrome",S(g,v(/chrome\/([\d\.]+)/)?RegExp.$1:"")):d("iron")?(g.engine="webkit",g.name="iron"):d("crios")?(g.name="chrome",g.engine="webkit",S(g,v(/crios\/([\d\.]+)/)?RegExp.$1:"")):d("applewebkit/")?(g.name="safari",g.engine="webkit",S(g,v(/version\/([\d\.]+)/)?RegExp.$1:"")):d("mozilla/")&&(g.engine="gecko"),!g.name||(E(g.name,!0),!g.major||(w(g.name,g.major),!g.minor||w(g.name,g.major,g.minor))),E(g.engine,!0),g.language=t.userLanguage||t.language,E(g.language,!0));if(u.detectPlugins){g.plugins=[];for(f=a.length-1;f>=0;f--)b=a[f],C=!1,e.ActiveXObject?C=N(b.progIds):t.plugins&&(C=T(b.substrs)),C&&(g.plugins.push(b.name),E(b.name,!0));t.javaEnabled()&&(g.plugins.push("java"),E("java",!0))}}var i={},s=e.Modernizr,o=["tv","tablet","mobile","desktop"],u={addAllFeaturesAsClass:!1,detectDevice:!0,detectDeviceModel:!0,detectScreen:!0,detectOS:!0,detectBrowser:!0,detectPlugins:!0},a=[{name:"adobereader",substrs:["Adobe","Acrobat"],progIds:["AcroPDF.PDF","PDF.PDFCtrl.5"]},{name:"flash",substrs:["Shockwave Flash"],progIds:["ShockwaveFlash.ShockwaveFlash.1"]},{name:"wmplayer",substrs:["Windows Media"],progIds:["wmplayer.ocx"]},{name:"silverlight",substrs:["Silverlight"],progIds:["AgControl.AgControl"]},{name:"quicktime",substrs:["QuickTime"],progIds:["QuickTime.QuickTime"]}],f=/[\t\r\n]/g,l=n.documentElement,c,h;return i.detect=function(e){return C(e)},i.init=function(){i!==r&&(i.browser={userAgent:(t.userAgent||t.vendor||e.opera).toLowerCase()},i.detect())},i.init(),i}(this,this.navigator,this.document),typeof JSON!="object"&&(JSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}function this_value(){return this.valueOf()}function quote(e){return rx_escapable.lastIndex=0,rx_escapable.test(e)?'"'+e.replace(rx_escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value);var gap,indent,meta,rep;typeof JSON.stringify!="function"&&(meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),window.url=function(){function e(){}function t(e){return decodeURIComponent(e.replace(/\+/g," "))}function n(e,t){var n=e.charAt(0),r=t.split(n);return n===e?r:(e=parseInt(e.substring(1),10),r[0>e?r.length+e:e-1])}function r(e,n){for(var r=e.charAt(0),i=n.split("&"),s=[],o={},u=[],a=e.substring(1),f=0,l=i.length;l>f;f++)if(s=i[f].match(/(.*?)=(.*)/),s||(s=[i[f],i[f],""]),""!==s[1].replace(/\s/g,"")){if(s[2]=t(s[2]||""),a===s[1])return s[2];u=s[1].match(/(.*)\[([0-9]+)\]/),u?(o[u[1]]=o[u[1]]||[],o[u[1]][u[2]]=s[2]):o[s[1]]=s[2]}return r===e?o:o[a]}return function(t,i){var s,o={};if("tld?"===t)return e();if(i=i||window.location.toString(),!t)return i;if(t=t.toString(),s=i.match(/^mailto:([^\/].+)/))o.protocol="mailto",o.email=s[1];else{if((s=i.match(/(.*?)\/#\!(.*)/))&&(i=s[1]+s[2]),(s=i.match(/(.*?)#(.*)/))&&(o.hash=s[2],i=s[1]),o.hash&&t.match(/^#/))return r(t,o.hash);if((s=i.match(/(.*?)\?(.*)/))&&(o.query=s[2],i=s[1]),o.query&&t.match(/^\?/))return r(t,o.query);if((s=i.match(/(.*?)\:?\/\/(.*)/))&&(o.protocol=s[1].toLowerCase(),i=s[2]),(s=i.match(/(.*?)(\/.*)/))&&(o.path=s[2],i=s[1]),o.path=(o.path||"").replace(/^([^\/])/,"/$1").replace(/\/$/,""),t.match(/^[\-0-9]+$/)&&(t=t.replace(/^([^\/])/,"/$1")),t.match(/^\//))return n(t,o.path.substring(1));if(s=n("/-1",o.path.substring(1)),s&&(s=s.match(/(.*?)\.(.*)/))&&(o.file=s[0],o.filename=s[1],o.fileext=s[2]),(s=i.match(/(.*)\:([0-9]+)$/))&&(o.port=s[2],i=s[1]),(s=i.match(/(.*?)@(.*)/))&&(o.auth=s[1],i=s[2]),o.auth&&(s=o.auth.match(/(.*)\:(.*)/),o.user=s?s[1]:o.auth,o.pass=s?s[2]:void 0),o.hostname=i.toLowerCase(),"."===t.charAt(0))return n(t,o.hostname);e()&&(s=o.hostname.match(e()),s&&(o.tld=s[3],o.domain=s[2]?s[2]+"."+s[3]:void 0,o.sub=s[1]||void 0)),o.port=o.port||("https"===o.protocol?"443":"80"),o.protocol=o.protocol||("443"===o.port?"https":"http")}return t in o?o[t]:"{}"===t?o:void 0}}(),"undefined"!=typeof jQuery&&jQuery.extend({url:function(e,t){return window.url(e,t)}}),function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q,G,Y,Z,et,tt,nt=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},rt=function(e,t){function r(){this.constructor=e}for(var n in t)it.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},it={}.hasOwnProperty,st=[].slice,ot=function(e,t){return function(){return e.apply(t,arguments)}};D={},h=10,G=!1,F=null,y=null,M=null,R=null,tt=null,r={BEFORE_CHANGE:"page:before-change",FETCH:"page:fetch",RECEIVE:"page:receive",CHANGE:"page:change",UPDATE:"page:update",LOAD:"page:load",RESTORE:"page:restore",BEFORE_UNLOAD:"page:before-unload",EXPIRE:"page:expire"},x=function(e){var t;return e=new n(e),V(),c(),F!=null&&F.start(),G&&(t=Y(e.absolute))?(T(t),N(e,null,!1)):N(e,K)},Y=function(e){var t;t=D[e];if(t&&!t.transitionCacheDisabled)return t},w=function(e){return e==null&&(e=!0),G=e},b=function(e){e==null&&(e=!0);if(!f)return;return e?F!=null?F:F=new s("html"):(F!=null&&F.uninstall(),F=null)},N=function(e,t,n){return n==null&&(n=!0),Z(r.FETCH,{url:e.absolute}),tt!=null&&tt.abort(),tt=new XMLHttpRequest,tt.open("GET",e.withoutHashForIE10compatibility(),!0),tt.setRequestHeader("Accept","text/html, application/xhtml+xml, application/xml"),tt.setRequestHeader("X-XHR-Referer",R),tt.onload=function(){var n;return Z(r.RECEIVE,{url:e.absolute}),(n=j())?(U(e),z(),p.apply(null,S(n)),_(),typeof t=="function"&&t(),Z(r.LOAD)):document.location.href=g()||e.absolute},F&&n&&(tt.onprogress=function(e){return function(e){var t;return t=e.lengthComputable?e.loaded/e.total*100:F.value+(100-F.value)/10,F.advanceTo(t)}}(this)),tt.onloadend=function(){return tt=null},tt.onerror=function(){return document.location.href=e.absolute},tt.send()},T=function(e){return tt!=null&&tt.abort(),p(e.title,e.body),I(e),Z(r.RESTORE)},c=function(){var e;return e=new n(y.url),D[e.absolute]={url:e.relative,body:document.body,title:document.title,positionY:window.pageYOffset,positionX:window.pageXOffset,cachedAt:(new Date).getTime(),transitionCacheDisabled:document.querySelector("[data-no-transition-cache]")!=null},v(h)},H=function(e){e==null&&(e=h);if(/^[\d]+$/.test(e))return h=parseInt(e)},v=function(e){var t,n,i,s,o,u;o=Object.keys(D),t=o.map(function(e){return D[e].cachedAt}).sort(function(e,t){return t-e}),u=[];for(n=0,s=o.length;n<s;n++){i=o[n];if(!(D[i].cachedAt<=t[e]))continue;Z(r.EXPIRE,D[i]),u.push(delete D[i])}return u},p=function(t,n,i,s){return Z(r.BEFORE_UNLOAD),document.title=t,document.documentElement.replaceChild(n,document.body),i!=null&&e.update(i),Q(),s&&E(),y=window.history.state,F!=null&&F.done(),Z(r.CHANGE),Z(r.UPDATE)},E=function(){var e,t,n,r,i,s,o,u,a,f,l,c;c=Array.prototype.slice.call(document.body.querySelectorAll('script:not([data-turbolinks-eval="false"])'));for(n=0,i=c.length;n<i;n++){l=c[n];if((a=l.type)!==""&&a!=="text/javascript")continue;t=document.createElement("script"),f=l.attributes;for(r=0,s=f.length;r<s;r++)e=f[r],t.setAttribute(e.name,e.value);l.hasAttribute("async")||(t.async=!1),t.appendChild(document.createTextNode(l.innerHTML)),u=l.parentNode,o=l.nextSibling,u.removeChild(l),u.insertBefore(t,o)}},$=function(e){return e.innerHTML=e.innerHTML.replace(/<noscript[\S\s]*?<\/noscript>/ig,""),e},Q=function(){var e,t;e=(t=document.querySelectorAll("input[autofocus], textarea[autofocus]"))[t.length-1];if(e&&document.activeElement!==e)return e.focus()},U=function(e){if((e=new n(e)).absolute!==R)return window.history.pushState({turbolinks:!0,url:e.absolute},"",e.absolute)},z=function(){var e,t;if(e=tt.getResponseHeader("X-XHR-Redirected-To"))return e=new n(e),t=e.hasNoHash()?document.location.hash:"",window.history.replaceState(window.history.state,"",e.href+t)},g=function(){var e;if((e=tt.getResponseHeader("Location"))!=null&&(new n(e)).crossOrigin())return e},V=function(){return R=document.location.href},X=function(){return window.history.replaceState({turbolinks:!0,url:document.location.href},"",document.location.href)},W=function(){return y=window.history.state},_=function(){var e;if(navigator.userAgent.match(/Firefox/)&&!(e=new n).hasNoHash())return window.history.replaceState(y,"",e.withoutHash()),document.location.hash=e.hash},I=function(e){return window.scrollTo(e.positionX,e.positionY)},K=function(){return document.location.hash?document.location.href=document.location.href:window.scrollTo(0,0)},d=function(e){var t,n,r;if(e==null||typeof e!="object")return e;t=new e.constructor;for(n in e)r=e[n],t[n]=d(r);return t},B=function(e){var t,n;return n=((t=document.cookie.match(new RegExp(e+"=(\\w+)")))!=null?t[1].toUpperCase():void 0)||"",document.cookie=e+"=; expires=Thu, 01-Jan-70 00:00:01 GMT; path=/",n},Z=function(e,t){var n;return typeof Prototype!="undefined"&&Event.fire(document,e,t,!0),n=document.createEvent("Events"),t&&(n.data=t),n.initEvent(e,!0,!0),document.dispatchEvent(n)},P=function(e){return!Z(r.BEFORE_CHANGE,{url:e})},j=function(){var e,t,n,r,i,s;t=function(){var e;return 400<=(e=tt.status)&&e<600},s=function(){var e;return(e=tt.getResponseHeader("Content-Type"))!=null&&e.match(/^(?:text\/html|application\/xhtml\+xml|application\/xml)(?:;|$)/)},r=function(e){var t,n,r,i,s;i=e.querySelector("head").childNodes,s=[];for(t=0,n=i.length;t<n;t++)r=i[t],(typeof r.getAttribute==="function"?r.getAttribute("data-turbolinks-track"):void 0)!=null&&s.push(r.getAttribute("src")||r.getAttribute("href"));return s},e=function(e){var t;return M||(M=r(document)),t=r(e),t.length!==M.length||i(t,M).length!==M.length},i=function(e,t){var n,r,i,s,o;e.length>t.length&&(i=[t,e],e=i[0],t=i[1]),s=[];for(n=0,r=e.length;n<r;n++)o=e[n],nt.call(t,o)>=0&&s.push(o);return s};if(!t()&&s()){n=m(tt.responseText);if(n&&!e(n))return n}},S=function(t){var n;return n=t.querySelector("title"),[n!=null?n.textContent:void 0,$(t.querySelector("body")),e.get(t).token,"runScripts"]},e={get:function(e){var t;return e==null&&(e=document),{node:t=e.querySelector('meta[name="csrf-token"]'),token:t!=null?typeof t.getAttribute=="function"?t.getAttribute("content"):void 0:void 0}},update:function(e){var t;t=this.get();if(t.token!=null&&e!=null&&t.token!==e)return t.node.setAttribute("content",e)}},m=function(e){var t;return t=document.documentElement.cloneNode(),t.innerHTML=e,t.head=t.querySelector("head"),t.body=t.querySelector("body"),t},n=function(){function e(t){this.original=t!=null?t:document.location.href;if(this.original.constructor===e)return this.original;this._parse()}return e.prototype.withoutHash=function(){return this.href.replace(this.hash,"").replace("#","")},e.prototype.withoutHashForIE10compatibility=function(){return this.withoutHash()},e.prototype.hasNoHash=function(){return this.hash.length===0},e.prototype.crossOrigin=function(){return this.origin!==(new e).origin},e.prototype._parse=function(){var e;return(this.link!=null?this.link:this.link=document.createElement("a")).href=this.original,e=this.link,this.href=e.href,this.protocol=e.protocol,this.host=e.host,this.hostname=e.hostname,this.port=e.port,this.pathname=e.pathname,this.search=e.search,this.hash=e.hash,this.origin=[this.protocol,"//",this.hostname].join(""),this.port.length!==0&&(this.origin+=":"+this.port),this.relative=[this.pathname,this.search,this.hash].join(""),this.absolute=this.href},e}(),i=function(e){function t(e){this.link=e;if(this.link.constructor===t)return this.link;this.original=this.link.href,this.originalElement=this.link,this.link=this.link.cloneNode(!1),t.__super__.constructor.apply(this,arguments)}return rt(t,e),t.HTML_EXTENSIONS=["html"],t.allowExtensions=function(){var e,n,r,i;n=1<=arguments.length?st.call(arguments,0):[];for(r=0,i=n.length;r<i;r++)e=n[r],t.HTML_EXTENSIONS.push(e);return t.HTML_EXTENSIONS},t.prototype.shouldIgnore=function(){return this.crossOrigin()||this._anchored()||this._nonHtml()||this._optOut()||this._target()},t.prototype._anchored=function(){return(this.hash.length>0||this.href.charAt(this.href.length-1)==="#")&&this.withoutHash()===(new n).withoutHash()},t.prototype._nonHtml=function(){return this.pathname.match(/\.[a-z]+$/g)&&!this.pathname.match(new RegExp("\\.(?:"+t.HTML_EXTENSIONS.join("|")+")?$","g"))},t.prototype._optOut=function(){var e,t;t=this.originalElement;while(!e&&t!==document)e=t.getAttribute("data-no-turbolink")!=null,t=t.parentNode;return e},t.prototype._target=function(){
return this.link.target.length!==0},t}(n),t=function(){function e(e){this.event=e;if(this.event.defaultPrevented)return;this._extractLink(),this._validForTurbolinks()&&(P(this.link.absolute)||et(this.link.href),this.event.preventDefault())}return e.installHandlerLast=function(t){if(!t.defaultPrevented)return document.removeEventListener("click",e.handle,!1),document.addEventListener("click",e.handle,!1)},e.handle=function(t){return new e(t)},e.prototype._extractLink=function(){var e;e=this.event.target;while(!!e.parentNode&&e.nodeName!=="A")e=e.parentNode;if(e.nodeName==="A"&&e.href.length!==0)return this.link=new i(e)},e.prototype._validForTurbolinks=function(){return this.link!=null&&!this.link.shouldIgnore()&&!this._nonStandardClick()},e.prototype._nonStandardClick=function(){return this.event.which>1||this.event.metaKey||this.event.ctrlKey||this.event.shiftKey||this.event.altKey},e}(),s=function(){function t(e){this.elementSelector=e,this._trickle=ot(this._trickle,this),this.value=0,this.content="",this.speed=300,this.opacity=.99,this.install()}var e;return e="turbolinks-progress-bar",t.prototype.install=function(){return this.element=document.querySelector(this.elementSelector),this.element.classList.add(e),this.styleElement=document.createElement("style"),document.head.appendChild(this.styleElement),this._updateStyle()},t.prototype.uninstall=function(){return this.element.classList.remove(e),document.head.removeChild(this.styleElement)},t.prototype.start=function(){return this.advanceTo(5)},t.prototype.advanceTo=function(e){var t;if(e>(t=this.value)&&t<=100){this.value=e,this._updateStyle();if(this.value===100)return this._stopTrickle();if(this.value>0)return this._startTrickle()}},t.prototype.done=function(){if(this.value>0)return this.advanceTo(100),this._reset()},t.prototype._reset=function(){var e;return e=this.opacity,setTimeout(function(e){return function(){return e.opacity=0,e._updateStyle()}}(this),this.speed/2),setTimeout(function(t){return function(){return t.value=0,t.opacity=e,t._withSpeed(0,function(){return t._updateStyle(!0)})}}(this),this.speed)},t.prototype._startTrickle=function(){if(this.trickling)return;return this.trickling=!0,setTimeout(this._trickle,this.speed)},t.prototype._stopTrickle=function(){return delete this.trickling},t.prototype._trickle=function(){if(!this.trickling)return;return this.advanceTo(this.value+Math.random()/2),setTimeout(this._trickle,this.speed)},t.prototype._withSpeed=function(e,t){var n,r;return n=this.speed,this.speed=e,r=t(),this.speed=n,r},t.prototype._updateStyle=function(e){return e==null&&(e=!1),e&&this._changeContentToForceRepaint(),this.styleElement.textContent=this._createCSSRule()},t.prototype._changeContentToForceRepaint=function(){return this.content=this.content===""?" ":""},t.prototype._createCSSRule=function(){return this.elementSelector+"."+e+"::before {\n  content: '"+this.content+"';\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 2000;\n  background-color: #0076ff;\n  height: 3px;\n  opacity: "+this.opacity+";\n  width: "+this.value+"%;\n  transition: width "+this.speed+"ms ease-out, opacity "+this.speed/2+"ms ease-in;\n  transform: translate3d(0,0,0);\n}"},t}(),l=function(e){return setTimeout(e,500)},L=function(){return document.addEventListener("DOMContentLoaded",function(){return Z(r.CHANGE),Z(r.UPDATE)},!0)},O=function(){if(typeof jQuery!="undefined")return jQuery(document).on("ajaxSuccess",function(e,t,n){if(!jQuery.trim(t.responseText))return;return Z(r.UPDATE)})},A=function(e){var t,r;if((r=e.state)!=null?r.turbolinks:void 0)return(t=D[(new n(e.state.url)).absolute])?(c(),T(t)):et(e.target.location.href)},k=function(){return X(),W(),document.addEventListener("click",t.installHandlerLast,!0),window.addEventListener("hashchange",function(e){return X(),W()},!1),l(function(){return window.addEventListener("popstate",A,!1)})},C=window.history.state!==void 0||navigator.userAgent.match(/Firefox\/2[6|7]/),a=window.history&&window.history.pushState&&window.history.replaceState&&C,o=!navigator.userAgent.match(/CriOS\//),J=(q=B("request_method"))==="GET"||q==="",f=a&&o&&J,u=document.addEventListener&&document.createEvent,u&&(L(),O()),f?(et=x,k()):et=function(e){return document.location.href=e},this.Turbolinks={visit:et,pagesCached:H,enableTransitionCache:w,enableProgressBar:b,allowLinkExtensions:i.allowExtensions,supported:f,EVENTS:d(r)}}.call(this),function(e){typeof define=="function"&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function t(t,r){var i,s,o,u=t.nodeName.toLowerCase();return"area"===u?(i=t.parentNode,s=i.name,!t.href||!s||i.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap='#"+s+"']")[0],!!o&&n(o))):(/^(input|select|textarea|button|object)$/.test(u)?!t.disabled:"a"===u?t.href||r:r)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return e.css(this,"visibility")==="hidden"}).length}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var n=this.css("position"),r=n==="absolute",i=t?/(auto|scroll|hidden)/:/(auto|scroll)/,s=this.parents().filter(function(){var t=e(this);return r&&t.css("position")==="static"?!1:i.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return n==="fixed"||!s.length?e(this[0].ownerDocument||document):s},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(n){return t(n,!isNaN(e.attr(n,"tabindex")))},tabbable:function(n){var r=e.attr(n,"tabindex"),i=isNaN(r);return(i||r>=0)&&t(n,!i)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,n){function o(t,n,i,s){return e.each(r,function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var r=n==="Width"?["Left","Right"]:["Top","Bottom"],i=n.toLowerCase(),s={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(t){return t===undefined?s["inner"+n].call(this):this.each(function(){e(this).css(i,o(this,t)+"px")})},e.fn["outer"+n]=function(t,r){return typeof t!="number"?s["outer"+n].call(this,t):this.each(function(){e(this).css(i,o(this,t,!0,r)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(n,r){return typeof n=="number"?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),r&&r.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(t!==undefined)return this.css("zIndex",t);if(this.length){var n=e(this[0]),r,i;while(n.length&&n[0]!==document){r=n.css("position");if(r==="absolute"||r==="relative"||r==="fixed"){i=parseInt(n.css("zIndex"),10);if(!isNaN(i)&&i!==0)return i}n=n.parent()}}return 0}}),e.ui.plugin={add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n,r){var i,s=e.plugins[t];if(!s)return;if(!r&&(!e.element[0].parentNode||e.element[0].parentNode.nodeType===11))return;for(i=0;i<s.length;i++)e.options[s[i][0]]&&s[i][1].apply(e.element,n)}}}),function(e){typeof define=="function"&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){var t=0,n=Array.prototype.slice;return e.cleanData=function(t){return function(n){var r,i,s;for(s=0;(i=n[s])!=null;s++)try{r=e._data(i,"events"),r&&r.remove&&e(i).triggerHandler("remove")}catch(o){}t(n)}}(e.cleanData),e.widget=function(t,n,r){var i,s,o,u,a={},f=t.split(".")[0];return t=t.split(".")[1],i=f+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[f]=e[f]||{},s=e[f][t],o=e[f][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,r){if(!e.isFunction(r)){a[t]=r;return}a[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},i=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=i,s=r.apply(this,arguments),this._super=t,this._superApply=n,s}}()}),o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix||t:t},a,{constructor:o,namespace:f,widgetName:t,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){var r=n.call(arguments,1),i=0,s=r.length,o,u;for(;i<s;i++)for(o in r[i])u=r[i][o],r[i].hasOwnProperty(o)&&u!==undefined&&(e.isPlainObject(u)?t[o]=e.isPlainObject(t[o])?e.widget.extend({},t[o],u):e.widget.extend({},u):t[o]=u);return t},e.widget.bridge=function(t,r){var i=r.prototype.widgetFullName||t;e.fn[t]=function(s){var o=typeof s=="string",u=n.call(arguments,1),a=this;return o?this.each(function(){var n,r=e.data(this,i);if(s==="instance")return a=r,!1;if(!r)return e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+s+"'");if(!e.isFunction(r[s])||s.charAt(0)==="_")return e.error("no such method '"+s+"' for "+t+" widget instance");n=r[s].apply(r,u);if(n!==r&&n!==undefined)return a=n&&n.jquery?a.pushStack(n.get()):n,!1}):(u.length&&(s=e.widget.extend.apply(null,[s].concat(u))),this.each(function(){var t=e.data(this,i);t?(t.option(s||{}),t._init&&t._init()):e.data(this,i,new r(s,this))})),a}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(n,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),n),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var r=t,i,s,o;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof t=="string"){r={},i=t.split("."),t=i.shift();if(i.length){s=r[t]=e.widget.extend({},this.options[t]);for(o=0;o<i.length-1;o++)s[i[o]]=s[i[o]]||{},s=s[i[o]];t=i.pop();if(arguments.length===1)return s[t]===undefined?null:s[t];s[t]=n}else{if(arguments.length===1)return this.options[t]===undefined?null:this.options[t];r[t]=n}}return this._setOptions(r),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,n,r){var i,s=this;typeof t!="boolean"&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){if(!t&&(s.options.disabled===!0||e(this).hasClass("ui-state-disabled")))return;return(typeof o=="string"?s[o]:o).apply(s,arguments)}typeof o!="string"&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^([\w:-]*)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.delegate(l,f,u):n.bind(f,u)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(n).undelegate(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&e.effects.effect[u]?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}}),e.widget}),function(e){typeof define=="function"&&define.amd?define(["jquery","./widget"],e):e(jQuery)}(function(e){var t=!1;return e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(t)return;this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var r=this,i=n.which===1,s=typeof this.options.cancel=="string"&&n.target.nodeName?e(n.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(n))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(n)&&this._mouseDelayMet(n)){this._mouseStarted=this._mouseStart(n)!==!1;if(!this._mouseStarted)return n.preventDefault(),!0}return!0===e.data(n.target,this.widgetName+".preventClickEvent")&&e.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),t=!0,!0},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}if(t.which||t.button)this._mouseMoved=!0;return this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(n){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,n.target===this._mouseDownEvent.target&&e.data(n.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(n)),t=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}),function(e){typeof define=="function"&&define.amd?define(["jquery","./core","./mouse","./widget"],e):e(jQuery)}(function(e){return e.widget("ui.sortable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,n){return e>=t&&e<t+n},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),e==="handle"&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,n){var r=null,i=!1,s=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type==="static")return!1;this._refreshItems(t),e(t.target).parents().each(function(){if(e.data(this,s.widgetName+"-item")===s)return r=e(this),!1}),e.data(t.target,s.widgetName+"-item")===s&&(r=e(t.target));if(!r)return!1;if(this.options.handle&&!n){e(this.options.handle,r).find("*").addBack().each(function(){this===t.target&&(i=!0)});if(!i)return!1}return this.currentItem=r,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,r){var i,s,o=this.options;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&o.cursor!=="auto"&&(s=this.document.find("body"),this.storedCursor=s.css("cursor"),s.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(s)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!r)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,r,i,s,o=this.options,u=!1;this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-this.document.scrollTop()<o.scrollSensitivity?u=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<o.scrollSensitivity&&(u=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),t.pageX-this.document.scrollLeft()<o.scrollSensitivity?u=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(u=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),u!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!=="x")this.helper[0].style.top=this.position.top+"px";for(n=this.items.length-1;n>=0;n--){r=this.items[n],i=r.item[0],s=this._intersectsWithPointer(r);if(!s)continue;if(r.instance!==this.currentContainer)continue;if(i!==this.currentItem[0]&&this.placeholder[s===1?"next":"prev"]()[0]!==i&&!e.contains(this.placeholder[0],i)&&(this.options.type==="semi-dynamic"?!e.contains(this.element[0],i):!0)){this.direction=s===1?"down":"up";if(this.options.tolerance!=="pointer"&&!this._intersectsWithSides(r))break;this._rearrange(t,r),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(!t)return;e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t);if(this.options.revert){var r=this,i=this.placeholder.offset(),s=this.options.axis,o={};if(!s||s==="x")o.left=i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft);if(!s||s==="y")o.top=i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop);this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1},cancel:function(){if(this.dragging){this._mouseUp({target:null}),this.options.helper==="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=this.options.axis==="x"||r+f>u&&r+f<a,h=this.options.axis==="y"||t+l>s&&t+l<o,p=c&&h;return this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:s<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&u<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<a},_intersectsWithPointer:function(e){var t=this.options.axis==="x"||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),n=this.options.axis==="y"||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),r=t&&n,i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return r?this.floating?s&&s==="right"||i==="down"?2:1:i&&(i==="down"?2:1):!1},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),r=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();return this.floating&&i?i==="right"&&n||i==="left"&&!n:r&&(r==="down"&&t||r==="up"&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!==0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!==0&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function f(){o.push(this)}var n,r,i,s,o=[],u=[],a=this._connectWith();if(a&&t)for(n=a.length-1;n>=0;n--){i=e(a[n],this.document[0]);for(r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&u.push([e.isFunction(s.options.items)?s.options.items.call(s.element):e(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s])}u.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(n=u.length-1;n>=0;n--)u[n][0].each(f);return e(o)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,r,i,s,o,u,a,f,l=this.items,c=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(n=h.length-1;n>=0;n--){i=e(h[n],this.document[0]);for(r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&(c.push([e.isFunction(s.options.items)?s.options.items.call(s.element[0],t,{item:this.currentItem}):e(s.options.items,s.element),s]),this.containers.push(s))}for(n=c.length-1;n>=0;n--){o=c[n][1],u=c[n][0];for(r=0,f=u.length;r<f;r++)a=e(u[r]),a.data(this.widgetName+"-item",o),l.push({item:a,instance:o,width:0,height:0,left:0,top:0})}},refreshPositions:function(t){this.floating=this.items.length?this.options.axis==="x"||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,r,i,s;for(n=this.items.length-1;n>=0;n--){r=this.items[n];if(r.instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0])continue;i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item,t||(r.width=i.outerWidth(),r.height=i.outerHeight()),s=i.offset(),r.left=s.left,r.top=s.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)s=this.containers[n].element.offset(),this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,r=t.options;if(!r.placeholder||r.placeholder.constructor===String)n=r.placeholder,r.placeholder={element:function(){var r=t.currentItem[0].nodeName.toLowerCase(),i=e("<"+r+">",t.document[0]).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return r==="tbody"?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(i)):r==="tr"?t._createTrPlaceholder(t.currentItem,i):r==="img"&&i.attr("src",t.currentItem.attr("src")),n||i.css("visibility","hidden"),i},update:function(e,i){if(n&&!r.forcePlaceholderSize)return;i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10))}};t.placeholder=e(r.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),r.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,n){var r=this;t.children().each(function(){e("<td>&#160;</td>",r.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(n)})},_contactContainers:function(t){var n,r,i,s,o,u,a,f,l,c,h=null,p=null;for(n=this.containers.length-1;n>=0;n--){if(e.contains(this.currentItem[0],this.containers[n].element[0]))continue;if(this._intersectsWith(this.containers[n].containerCache)){if(h&&e.contains(this.containers[n].element[0],h.element[0]))continue;h=this.containers[n],p=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",t,this._uiHash
(this)),this.containers[n].containerCache.over=0)}if(!h)return;if(this.containers.length===1)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1);else{i=1e4,s=null,l=h.floating||this._isFloating(this.currentItem),o=l?"left":"top",u=l?"width":"height",c=l?"clientX":"clientY";for(r=this.items.length-1;r>=0;r--){if(!e.contains(this.containers[p].element[0],this.items[r].item[0]))continue;if(this.items[r].item[0]===this.currentItem[0])continue;a=this.items[r].item.offset()[o],f=!1,t[c]-a>this.items[r][u]/2&&(f=!0),Math.abs(t[c]-a)<i&&(i=Math.abs(t[c]-a),s=this.items[r],this.direction=f?"up":"down")}if(!s&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p]){this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1);return}s?this._rearrange(t,s,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):n.helper==="clone"?this.currentItem.clone():this.currentItem;return r.parents("body").length||e(n.appendTo!=="parent"?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!r[0].style.width||n.forceHelperSize)&&r.width(this.currentItem.width()),(!r[0].style.height||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition==="absolute"&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;i.containment==="parent"&&(i.containment=this.helper[0].parentNode);if(i.containment==="document"||i.containment==="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,i.containment==="document"?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,(i.containment==="document"?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];/^(document|window|parent)$/.test(i.containment)||(t=e(i.containment)[0],n=e(i.containment).offset(),r=e(t).css("overflow")!=="hidden",this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(r?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(r?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var r=t==="absolute"?1:-1,i=this.cssPosition!=="absolute"||this.scrollParent[0]!==this.document[0]&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():s?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():s?0:i.scrollLeft())*r}},_generatePosition:function(t){var n,r,i=this.options,s=t.pageX,o=t.pageY,u=this.cssPosition!=="absolute"||this.scrollParent[0]!==this.document[0]&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(u[0].tagName);return this.cssPosition==="relative"&&(this.scrollParent[0]===this.document[0]||this.scrollParent[0]===this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid&&(n=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1],o=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-i.grid[1]:n+i.grid[1]:n,r=this.originalPageX+Math.round((s-this.originalPageX)/i.grid[0])*i.grid[0],s=this.containment?r-this.offset.click.left>=this.containment[0]&&r-this.offset.click.left<=this.containment[2]?r:r-this.offset.click.left>=this.containment[0]?r-i.grid[0]:r+i.grid[0]:r)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():a?0:u.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():a?0:u.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i===this.counter&&this.refreshPositions(!r)})},_clear:function(e,t){function i(e,t,n){return function(r){n._trigger(e,r,t._uiHash(t))}}this.reverting=!1;var n,r=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)if(this._storedCSS[n]==="auto"||this._storedCSS[n]==="static")this._storedCSS[n]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!t&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!t&&r.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(r.push(function(e){this._trigger("remove",e,this._uiHash())}),r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))));for(n=this.containers.length-1;n>=0;n--)t||r.push(i("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(r.push(i("out",this,this.containers[n])),this.containers[n].containerCache.over=0);this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null);if(!t){for(n=0;n<r.length;n++)r[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}),function(e){typeof define=="function"&&define.amd?define(["jquery","./core","./mouse","./widget"],e):e(jQuery)}(function(e){return e.widget("ui.draggable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){this.options.helper==="original"&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),e==="handle"&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging")){this.destroyOnClear=!0;return}this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this._blurActiveElement(t),this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(this._blockFrames(n.iframeFix===!0?"iframe":n.iframeFix),!0):!1)},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var n=this.document[0];if(!this.handleElement.is(t.target))return;try{n.activeElement&&n.activeElement.nodeName.toLowerCase()!=="body"&&e(n.activeElement).blur()}catch(r){}},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return e(this).css("position")==="fixed"}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._normalizeRightBottom(),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,n){this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=this,r=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(r=e.ui.ddmanager.drop(this,t)),this.dropped&&(r=this.dropped,this.dropped=!1),this.options.revert==="invalid"&&!r||this.options.revert==="valid"&&r||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,r)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",t)!==!1&&n._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.focus(),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper),i=r?e(n.helper.apply(this.element[0],[t])):n.helper==="clone"?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo(n.appendTo==="parent"?this.element[0].parentNode:n.appendTo),r&&i[0]===this.element[0]&&this._setPositionRelative(),i[0]!==this.element[0]&&!/(fixed|absolute)/.test(i.css("position"))&&i.css("position","absolute"),i},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),n=this.document[0];return this.cssPosition==="absolute"&&this.scrollParent[0]!==n&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition!=="relative")return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options,s=this.document[0];this.relativeContainer=null;if(!i.containment){this.containment=null;return}if(i.containment==="window"){this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(i.containment==="document"){this.containment=[0,0,e(s).width()-this.helperProportions.width-this.margins.left,(e(s).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(i.containment.constructor===Array){this.containment=i.containment;return}i.containment==="parent"&&(i.containment=this.helper[0].parentNode),n=e(i.containment),r=n[0];if(!r)return;t=/(scroll|auto)/.test(n.css("overflow")),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(t?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=n},_convertPositionTo:function(e,t){t||(t=this.position);var n=e==="absolute"?1:-1,r=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*n+this.offset.parent.top*n-(this.cssPosition==="fixed"?-this.offset.scroll.top:r?0:this.offset.scroll.top)*n,left:t.left+this.offset.relative.left*n+this.offset.parent.left*n-(this.cssPosition==="fixed"?-this.offset.scroll.left:r?0:this.offset.scroll.left)*n}},_generatePosition:function(e,t){var n,r,i,s,o=this.options,u=this._isRootNode(this.scrollParent[0]),a=e.pageX,f=e.pageY;if(!u||!this.offset.scroll)this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()};return t&&(this.containment&&(this.relativeContainer?(r=this.relativeContainer.offset(),n=[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(a=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(f=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(a=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(f=n[3]+this.offset.click.top)),o.grid&&(i=o.grid[1]?this.originalPageY+Math.round((f-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,f=n?i-this.offset.click.top>=n[1]||i-this.offset.click.top>n[3]?i:i-this.offset.click.top>=n[1]?i-o.grid[1]:i+o.grid[1]:i,s=o.grid[0]?this.originalPageX+Math.round((a-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,a=n?s-this.offset.click.left>=n[0]||s-this.offset.click.left>n[2]?s:s-this.offset.click.left>=n[0]?s-o.grid[0]:s+o.grid[0]:s),o.axis==="y"&&(a=this.originalPageX),o.axis==="x"&&(f=this.originalPageY)),{top:f-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.offset.scroll.top:u?0:this.offset.scroll.top),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.offset.scroll.left:u?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){this.options.axis!=="y"&&this.helper.css("right")!=="auto"&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),this.options.axis!=="x"&&this.helper.css("bottom")!=="auto"&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),r.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n,r){var i=e.extend({},n,{item:r.element});r.sortables=[],e(r.options.connectToSortable).each(function(){var n=e(this).sortable("instance");n&&!n.options.disabled&&(r.sortables.push(n),n.refreshPositions(),n._trigger("activate",t,i))})},stop:function(t,n,r){var i=e.extend({},n,{item:r.element});r.cancelHelperRemoval=!1,e.each(r.sortables,function(){var e=this;e.isOver?(e.isOver=0,r.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,i))})},drag:function(t,n,r){e.each(r.sortables,function(){var i=!1,s=this;s.positionAbs=r.positionAbs,s.helperProportions=r.helperProportions,s.offset.click=r.offset.click,s._intersectsWith(s.containerCache)&&(i=!0,e.each(r.sortables,function(){return this.positionAbs=r.positionAbs,this.helperProportions=r.helperProportions,this.offset.click=r.offset.click,this!==s&&this._intersectsWith(this.containerCache)&&e.contains(s.element[0],this.element[0])&&(i=!1),i})),i?(s.isOver||(s.isOver=1,r._parent=n.helper.parent(),s.currentItem=n.helper.appendTo(s.element).data("ui-sortable-item",!0),s.options._helper=s.options.helper,s.options.helper=function(){return n.helper[0]},t.target=s.currentItem[0],s._mouseCapture(t,!0),s._mouseStart(t,!0,!0),s.offset.click.top=r.offset.click.top,s.offset.click.left=r.offset.click.left,s.offset.parent.left-=r.offset.parent.left-s.offset.parent.left,s.offset.parent.top-=r.offset.parent.top-s.offset.parent.top,r._trigger("toSortable",t),r.dropped=s.element,e.each(r.sortables,function(){this.refreshPositions()}),r.currentItem=r.element,s.fromOutside=r),s.currentItem&&(s._mouseDrag(t),n.position=s.position)):s.isOver&&(s.isOver=0,s.cancelHelperRemoval=!0,s.options._revert=s.options.revert,s.options.revert=!1,s._trigger("out",t,s._uiHash(s)),s._mouseStop(t,!0),s.options.revert=s.options._revert,s.options.helper=s.options._helper,s.placeholder&&s.placeholder.remove(),n.helper.appendTo(r._parent),r._refreshOffsets(t),n.position=r._generatePosition(t,!0),r._trigger("fromSortable",t),r.dropped=!1,e.each(r.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n,r){var i=e("body"),s=r.options;i.css("cursor")&&(s._cursor=i.css("cursor")),i.css("cursor",s.cursor)},stop:function(t,n,r){var i=r.options;i._cursor&&e("body").css("cursor",i._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n,r){var i=e(n.helper),s=r.options;i.css("opacity")&&(s._opacity=i.css("opacity")),i.css("opacity",s.opacity)},stop:function(t,n,r){var i=r.options;i._opacity&&e(n.helper).css("opacity",i._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&n.scrollParentNotHidden[0].tagName!=="HTML"&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(t,n,r){var i=r.options,s=!1,o=r.scrollParentNotHidden[0],u=r.document[0];if(o!==u&&o.tagName!=="HTML"){if(!i.axis||i.axis!=="x")r.overflowOffset.top+o.offsetHeight-t.pageY<i.scrollSensitivity?o.scrollTop=s=o.scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(o.scrollTop=s=o.scrollTop-i.scrollSpeed);if(!i.axis||i.axis!=="y")r.overflowOffset.left+o.offsetWidth-t.pageX<i.scrollSensitivity?o.scrollLeft=s=o.scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(o.scrollLeft=s=o.scrollLeft-i.scrollSpeed)}else{if(!i.axis||i.axis!=="x")t.pageY-e(u).scrollTop()<i.scrollSensitivity?s=e(u).scrollTop(e(u).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(u).scrollTop())<i.scrollSensitivity&&(s=e(u).scrollTop(e(u).scrollTop()+i.scrollSpeed));if(!i.axis||i.axis!=="y")t.pageX-e(u).scrollLeft()<i.scrollSensitivity?s=e(u).scrollLeft(e(u).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(u).scrollLeft())<i.scrollSensitivity&&(s=e(u).scrollLeft(e(u).scrollLeft()+i.scrollSpeed))}s!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(r,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n,r){var i=r.options;r.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var t=e(this),n=t.offset();this!==r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n,r){var i,s,o,u,a,f,l,c,h,p,d=r.options,v=d.snapTolerance,m=n.offset.left,g=m+r.helperProportions.width,y=n.offset.top,b=y+r.helperProportions.height;for(h=r.snapElements.length-1;h>=0;h--){a=r.snapElements[h].left-r.margins.left,f=a+r.snapElements[h].width,l=r.snapElements[h].top-r.margins.top,c=l+r.snapElements[h].height;if(g<a-v||m>f+v||b<l-v||y>c+v||!e.contains(r.snapElements[h].item.ownerDocument,r.snapElements[h].item)){r.snapElements[h].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[h].item})),r.snapElements[h].snapping=!1;continue}d.snapMode!=="inner"&&(i=Math.abs(l-b)<=v,s=Math.abs(c-y)<=v,o=Math.abs(a-g)<=v,u=Math.abs(f-m)<=v,i&&(n.position.top=r._convertPositionTo("relative",{top:l-r.helperProportions.height,left:0}).top),s&&(n.position.top=r._convertPositionTo("relative",{top:c,left:0}).top),o&&(n.position.left=r._convertPositionTo("relative",{top:0,left:a-r.helperProportions.width}).left),u&&(n.position.left=r._convertPositionTo("relative",{top:0,left:f}).left)),p=i||s||o||u,d.snapMode!=="outer"&&(i=Math.abs(l-y)<=v,s=Math.abs(c-b)<=v,o=Math.abs(a-m)<=v,u=Math.abs(f-g)<=v,i&&(n.position.top=r._convertPositionTo("relative",{top:l,left:0}).top),s&&(n.position.top=r._convertPositionTo("relative",{top:c-r.helperProportions.height,left:0}).top),o&&(n.position.left=r._convertPositionTo("relative",{top:0,left:a}).left),u&&(n.position.left=r._convertPositionTo("relative",{top:0,left:f-r.helperProportions.width}).left)),!r.snapElements[h].snapping&&(i||s||o||u||p)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[h].item})),r.snapElements[h].snapping=i||s||o||u||p}}}),e.ui.plugin.add("draggable","stack",{start:function(t,n,r){var i,s=r.options,o=e.makeArray(e(s.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!o.length)return;i=parseInt(e(o[0]).css("zIndex"),10)||0,e(o).each(function(t){e(this).css("zIndex",i+t)}),this.css("zIndex",i+o.length)}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n,r){var i=e(n.helper),s=r.options;i.css("zIndex")&&(s._zIndex=i.css("zIndex")),i.css("zIndex",s.zIndex)},stop:function(t,n,r){var i=r.options;i._zIndex&&e(n.helper).css("zIndex",i._zIndex)}}),e.ui.draggable}),function(e){typeof define=="function"&&define.amd?define(["jquery","./core","./widget","./mouse","./draggable"],e):e(jQuery)}(function(e){return e.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,n=this.options,r=n.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(r)?r:function(e){return e.is(r)},this.proportions=function(){if(!arguments.length)return t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};t=arguments[0]},this._addToManager(n.scope),n.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){var t=0;for(;t<e.length;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){if(t==="accept")this.accept=e.isFunction(n)?n:function(e){return e.is(n)};else if(t==="scope"){var r=e.ui.ddmanager.droppables[this.options.scope];this._splice(r),this._addToManager(n)}this._super(t,n)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]===this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]===this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current,i=!1;return!r||(r.currentItem||r.element)[0]===this.element[0]?!1:(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var n=e(this).droppable("instance");if(n.options.greedy&&!n.options.disabled&&n.options.scope===r.options.scope&&n.accept.call(n.element[0],r.currentItem||r.element)&&e.ui.intersect(r,e.extend(n,{offset:n.element.offset()}),n.options.tolerance,t))return i=!0,!1}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1)},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(){function e(e,t,n){return e>=t&&e<t+n}return function(t,n,r,i){if(!n.offset)return!1;var s=(t.positionAbs||t.position.absolute).left+t.margins.left,o=(t.positionAbs||t.position.absolute).top+t.margins.top,u=s+t.helperProportions.width,a=o+t.helperProportions.height,f=n.offset.left,l=n.offset.top,c=f+n.proportions().width,h=l+n.proportions().height;switch(r){case"fit":return f<=s&&u<=c&&l<=o&&a<=h;case"intersect":return f<s+t.helperProportions.width/2&&u-t.helperProportions.width/2<c&&l<o+t.helperProportions.height/2&&a-t.helperProportions.height/2<h;case"pointer":return e(i.pageY,l,n.proportions().height)&&e(i.pageX,f,n.proportions().width);case"touch":return(o>=l&&o<=h||a>=l&&a<=h||o<l&&a>h)&&(s>=f&&s<=c||u>=f&&u<=c||s<f&&u>c);default:return!1}}}(),e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r,i,s=e.ui.ddmanager.droppables[t.options.scope]||[],o=n?n.type:null,u=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(
r=0;r<s.length;r++){if(s[r].options.disabled||t&&!s[r].accept.call(s[r].element[0],t.currentItem||t.element))continue;for(i=0;i<u.length;i++)if(u[i]===s[r].element[0]){s[r].proportions().height=0;continue e}s[r].visible=s[r].element.css("display")!=="none";if(!s[r].visible)continue;o==="mousedown"&&s[r]._activate.call(s[r],n),s[r].offset=s[r].element.offset(),s[r].proportions({width:s[r].element[0].offsetWidth,height:s[r].element[0].offsetHeight})}},drop:function(t,n){var r=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){if(!this.options)return;!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance,n)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n))}),r},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var r,i,s,o=e.ui.intersect(t,this,this.options.tolerance,n),u=!o&&this.isover?"isout":o&&!this.isover?"isover":null;if(!u)return;this.options.greedy&&(i=this.options.scope,s=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===i}),s.length&&(r=e(s[0]).droppable("instance"),r.greedyChild=u==="isover")),r&&u==="isover"&&(r.isover=!1,r.isout=!0,r._out.call(r,n)),this[u]=!0,this[u==="isout"?"isover":"isout"]=!1,this[u==="isover"?"_over":"_out"].call(this,n),r&&u==="isout"&&(r.isout=!1,r.isover=!0,r._over.call(r,n))})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}},e.ui.droppable}),function(e){typeof define=="function"&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){var t="ui-effects-",n=e;return e.effects={effect:{}},function(e,t){function h(e,t,n){var r=u[t.type]||{};return e==null?n||!t.def?null:t.def:(e=r.floor?~~e:parseFloat(e),isNaN(e)?t.def:r.mod?(e+r.mod)%r.mod:0>e?0:r.max<e?r.max:e)}function p(t){var n=s(),r=n._rgba=[];return t=t.toLowerCase(),c(i,function(e,i){var s,u=i.re.exec(t),a=u&&i.parse(u),f=i.space||"rgba";if(a)return s=n[f](a),n[o[f].cache]=s[o[f].cache],r=n._rgba=s._rgba,!1}),r.length?(r.join()==="0,0,0,0"&&e.extend(r,l.transparent),n):l[t]}function d(e,t,n){return n=(n+1)%1,n*6<1?e+(t-e)*n*6:n*2<1?t:n*3<2?e+(t-e)*(2/3-n)*6:e}var n="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,i=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1]*2.55,e[2]*2.55,e[3]*2.55,e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],s=e.Color=function(t,n,r,i){return new e.Color.fn.parse(t,n,r,i)},o={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},a=s.support={},f=e("<p>")[0],l,c=e.each;f.style.cssText="background-color:rgba(1,1,1,.5)",a.rgba=f.style.backgroundColor.indexOf("rgba")>-1,c(o,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),s.fn=e.extend(s.prototype,{parse:function(n,r,i,u){if(n===t)return this._rgba=[null,null,null,null],this;if(n.jquery||n.nodeType)n=e(n).css(r),r=t;var a=this,f=e.type(n),d=this._rgba=[];r!==t&&(n=[n,r,i,u],f="array");if(f==="string")return this.parse(p(n)||l._default);if(f==="array")return c(o.rgba.props,function(e,t){d[t.idx]=h(n[t.idx],t)}),this;if(f==="object")return n instanceof s?c(o,function(e,t){n[t.cache]&&(a[t.cache]=n[t.cache].slice())}):c(o,function(t,r){var i=r.cache;c(r.props,function(e,t){if(!a[i]&&r.to){if(e==="alpha"||n[e]==null)return;a[i]=r.to(a._rgba)}a[i][t.idx]=h(n[e],t,!0)}),a[i]&&e.inArray(null,a[i].slice(0,3))<0&&(a[i][3]=1,r.from&&(a._rgba=r.from(a[i])))}),this},is:function(e){var t=s(e),n=!0,r=this;return c(o,function(e,i){var s,o=t[i.cache];return o&&(s=r[i.cache]||i.to&&i.to(r._rgba)||[],c(i.props,function(e,t){if(o[t.idx]!=null)return n=o[t.idx]===s[t.idx],n})),n}),n},_space:function(){var e=[],t=this;return c(o,function(n,r){t[r.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var n=s(e),r=n._space(),i=o[r],a=this.alpha()===0?s("transparent"):this,f=a[i.cache]||i.to(a._rgba),l=f.slice();return n=n[i.cache],c(i.props,function(e,r){var i=r.idx,s=f[i],o=n[i],a=u[r.type]||{};if(o===null)return;s===null?l[i]=o:(a.mod&&(o-s>a.mod/2?s+=a.mod:s-o>a.mod/2&&(s-=a.mod)),l[i]=h((o-s)*t+s,r))}),this[r](l)},blend:function(t){if(this._rgba[3]===1)return this;var n=this._rgba.slice(),r=n.pop(),i=s(t)._rgba;return s(e.map(n,function(e,t){return(1-r)*i[t]+r*e}))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,function(e,t){return e==null?t>2?1:0:e});return n[3]===1&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),function(e,t){return e==null&&(e=t>2?1:0),t&&t<3&&(e=Math.round(e*100)+"%"),e});return n[3]===1&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),r=n.pop();return t&&n.push(~~(r*255)),"#"+e.map(n,function(e){return e=(e||0).toString(16),e.length===1?"0"+e:e}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}}),s.fn.parse.prototype=s.fn,o.hsla.to=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=e[3],s=Math.max(t,n,r),o=Math.min(t,n,r),u=s-o,a=s+o,f=a*.5,l,c;return o===s?l=0:t===s?l=60*(n-r)/u+360:n===s?l=60*(r-t)/u+120:l=60*(t-n)/u+240,u===0?c=0:f<=.5?c=u/a:c=u/(2-a),[Math.round(l)%360,c,f,i==null?1:i]},o.hsla.from=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/360,n=e[1],r=e[2],i=e[3],s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s;return[Math.round(d(o,s,t+1/3)*255),Math.round(d(o,s,t)*255),Math.round(d(o,s,t-1/3)*255),i]},c(o,function(n,i){var o=i.props,u=i.cache,a=i.to,f=i.from;s.fn[n]=function(n){a&&!this[u]&&(this[u]=a(this._rgba));if(n===t)return this[u].slice();var r,i=e.type(n),l=i==="array"||i==="object"?n:arguments,p=this[u].slice();return c(o,function(e,t){var n=l[i==="object"?e:t.idx];n==null&&(n=p[t.idx]),p[t.idx]=h(n,t)}),f?(r=s(f(p)),r[u]=p,r):s(p)},c(o,function(t,i){if(s.fn[t])return;s.fn[t]=function(s){var o=e.type(s),u=t==="alpha"?this._hsla?"hsla":"rgba":n,a=this[u](),f=a[i.idx],l;return o==="undefined"?f:(o==="function"&&(s=s.call(this,f),o=e.type(s)),s==null&&i.empty?this:(o==="string"&&(l=r.exec(s),l&&(s=f+parseFloat(l[2])*(l[1]==="+"?1:-1))),a[i.idx]=s,this[u](a)))}})}),s.hook=function(t){var n=t.split(" ");c(n,function(t,n){e.cssHooks[n]={set:function(t,r){var i,o,u="";if(r!=="transparent"&&(e.type(r)!=="string"||(i=p(r)))){r=s(i||r);if(!a.rgba&&r._rgba[3]!==1){o=n==="backgroundColor"?t.parentNode:t;while((u===""||u==="transparent")&&o&&o.style)try{u=e.css(o,"backgroundColor"),o=o.parentNode}catch(f){}r=r.blend(u&&u!=="transparent"?u:"_default")}r=r.toRgbaString()}try{t.style[n]=r}catch(f){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=s(t.elem,n),t.end=s(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}})},s.hook(n),e.cssHooks.borderColor={expand:function(e){var t={};return c(["Top","Right","Bottom","Left"],function(n,r){t["border"+r+"Color"]=e}),t}},l=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(n),function(){function i(t){var n,r,i=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,s={};if(i&&i.length&&i[0]&&i[i[0]]){r=i.length;while(r--)n=i[r],typeof i[n]=="string"&&(s[e.camelCase(n)]=i[n])}else for(n in i)typeof i[n]=="string"&&(s[n]=i[n]);return s}function s(t,n){var i={},s,o;for(s in n)o=n[s],t[s]!==o&&!r[s]&&(e.fx.step[s]||!isNaN(parseFloat(o)))&&(i[s]=o);return i}var t=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,r){e.fx.step[r]=function(e){if(e.end!=="none"&&!e.setAttr||e.pos===1&&!e.setAttr)n.style(e.elem,r,e.end),e.setAttr=!0}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(n,r,o,u){var a=e.speed(r,o,u);return this.queue(function(){var r=e(this),o=r.attr("class")||"",u,f=a.children?r.find("*").addBack():r;f=f.map(function(){var t=e(this);return{el:t,start:i(this)}}),u=function(){e.each(t,function(e,t){n[t]&&r[t+"Class"](n[t])})},u(),f=f.map(function(){return this.end=i(this.el[0]),this.diff=s(this.start,this.end),this}),r.attr("class",o),f=f.map(function(){var t=this,n=e.Deferred(),r=e.extend({},a,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,r),n.promise()}),e.when.apply(e,f.get()).done(function(){u(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),a.complete.call(r[0])})})},e.fn.extend({addClass:function(t){return function(n,r,i,s){return r?e.effects.animateClass.call(this,{add:n},r,i,s):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(n,r,i,s){return arguments.length>1?e.effects.animateClass.call(this,{remove:n},r,i,s):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(n,r,i,s,o){return typeof r=="boolean"||r===undefined?i?e.effects.animateClass.call(this,r?{add:n}:{remove:n},i,s,o):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:n},r,i,s)}}(e.fn.toggleClass),switchClass:function(t,n,r,i,s){return e.effects.animateClass.call(this,{add:n,remove:t},r,i,s)}})}(),function(){function n(t,n,r,i){e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},n==null&&(n={}),e.isFunction(n)&&(i=n,r=null,n={});if(typeof n=="number"||e.fx.speeds[n])i=r,r=n,n={};return e.isFunction(r)&&(i=r,r=null),n&&e.extend(t,n),r=r||n.duration,t.duration=e.fx.off?0:typeof r=="number"?r:r in e.fx.speeds?e.fx.speeds[r]:e.fx.speeds._default,t.complete=i||n.complete,t}function r(t){return!t||typeof t=="number"||e.fx.speeds[t]?!0:typeof t=="string"&&!e.effects.effect[t]?!0:e.isFunction(t)?!0:typeof t=="object"&&!t.effect?!0:!1}e.extend(e.effects,{version:"1.11.4",save:function(e,n){for(var r=0;r<n.length;r++)n[r]!==null&&e.data(t+n[r],e[0].style[n[r]])},restore:function(e,n){var r,i;for(i=0;i<n.length;i++)n[i]!==null&&(r=e.data(t+n[i]),r===undefined&&(r=""),e.css(n[i],r))},setMode:function(e,t){return t==="toggle"&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,r;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=e[1]/t.width}return{x:r,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},r=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i={width:t.width(),height:t.height()},s=document.activeElement;try{s.id}catch(o){s=document.body}return t.wrap(r),(t[0]===s||e.contains(t[0],s))&&e(s).focus(),r=t.parent(),t.css("position")==="static"?(r.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,r){n[r]=t.css(r),isNaN(parseInt(n[r],10))&&(n[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(i),r.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,r,i){return i=i||{},e.each(n,function(e,n){var s=t.cssUnit(n);s[0]>0&&(i[n]=s[0]*r+s[1])}),i}}),e.fn.extend({effect:function(){function o(n){function u(){e.isFunction(i)&&i.call(r[0]),e.isFunction(n)&&n()}var r=e(this),i=t.complete,o=t.mode;(r.is(":hidden")?o==="hide":o==="show")?(r[o](),u()):s.call(r[0],t,u)}var t=n.apply(this,arguments),r=t.mode,i=t.queue,s=e.effects.effect[t.effect];return e.fx.off||!s?r?this[r](t.duration,t.complete):this.each(function(){t.complete&&t.complete.call(this)}):i===!1?this.each(o):this.queue(i||"fx",o)},show:function(e){return function(t){if(r(t))return e.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(e.fn.show),hide:function(e){return function(t){if(r(t))return e.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(e.fn.hide),toggle:function(e){return function(t){if(r(t)||typeof t=="boolean")return e.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(e.fn.toggle),cssUnit:function(t){var n=this.css(t),r=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(r=[parseFloat(n),t])}),r}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return e===0||e===1?e:-Math.pow(2,8*(e-1))*Math.sin(((e-1)*80-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){var t,n=4;while(e<((t=Math.pow(2,--n))-1)/11);return 1/Math.pow(4,3-n)-7.5625*Math.pow((t*3-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?n(e*2)/2:1-n(e*-2+2)/2}})}(),e.effects}),function(e){typeof define=="function"&&define.amd?define(["jquery","./effect"],e):e(jQuery)}(function(e){return e.effects.effect.blind=function(t,n){var r=e(this),i=/up|down|vertical/,s=/up|left|vertical|horizontal/,o=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(r,t.mode||"hide"),a=t.direction||"up",f=i.test(a),l=f?"height":"width",c=f?"top":"left",h=s.test(a),p={},d=u==="show",v,m,g;r.parent().is(".ui-effects-wrapper")?e.effects.save(r.parent(),o):e.effects.save(r,o),r.show(),v=e.effects.createWrapper(r).css({overflow:"hidden"}),m=v[l](),g=parseFloat(v.css(c))||0,p[l]=d?m:0,h||(r.css(f?"bottom":"right",0).css(f?"top":"left","auto").css({position:"absolute"}),p[c]=d?g:m+g),d&&(v.css(l,0),h||v.css(c,g+m)),v.animate(p,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){u==="hide"&&r.hide(),e.effects.restore(r,o),e.effects.removeWrapper(r),n()}})}}),function(e){typeof define=="function"&&define.amd?define(["jquery","./effect"],e):e(jQuery)}(function(e){return e.effects.effect.bounce=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"effect"),o=s==="hide",u=s==="show",a=t.direction||"up",f=t.distance,l=t.times||5,c=l*2+(u||o?1:0),h=t.duration/c,p=t.easing,d=a==="up"||a==="down"?"top":"left",v=a==="up"||a==="left",m,g,y,b=r.queue(),w=b.length;(u||o)&&i.push("opacity"),e.effects.save(r,i),r.show(),e.effects.createWrapper(r),f||(f=r[d==="top"?"outerHeight":"outerWidth"]()/3),u&&(y={opacity:1},y[d]=0,r.css("opacity",0).css(d,v?-f*2:f*2).animate(y,h,p)),o&&(f/=Math.pow(2,l-1)),y={},y[d]=0;for(m=0;m<l;m++)g={},g[d]=(v?"-=":"+=")+f,r.animate(g,h,p).animate(y,h,p),f=o?f*2:f/2;o&&(g={opacity:0},g[d]=(v?"-=":"+=")+f,r.animate(g,h,p)),r.queue(function(){o&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}),w>1&&b.splice.apply(b,[1,0].concat(b.splice(w,c+1))),r.dequeue()}}),function(e){typeof define=="function"&&define.amd?define(["jquery","./effect"],e):e(jQuery)}(function(e){return e.effects.effect.clip=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=t.direction||"vertical",a=u==="vertical",f=a?"height":"width",l=a?"top":"left",c={},h,p,d;e.effects.save(r,i),r.show(),h=e.effects.createWrapper(r).css({overflow:"hidden"}),p=r[0].tagName==="IMG"?h:r,d=p[f](),o&&(p.css(f,0),p.css(l,d/2)),c[f]=o?d:0,c[l]=o?0:d/2,p.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){o||r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}}),function(e){typeof define=="function"&&define.amd?define(["jquery","./effect"],e):e(jQuery)}(function(e){return e.effects.effect.drop=function(t,n){var r=e(this),i=["position","top","bottom","left","right","opacity","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=t.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left"?"pos":"neg",l={opacity:o?1:0},c;e.effects.save(r,i),r.show(),e.effects.createWrapper(r),c=t.distance||r[a==="top"?"outerHeight":"outerWidth"](!0)/2,o&&r.css("opacity",0).css(a,f==="pos"?-c:c),l[a]=(o?f==="pos"?"+=":"-=":f==="pos"?"-=":"+=")+c,r.animate(l,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}}),function(e){typeof define=="function"&&define.amd?define(["jquery","./effect"],e):e(jQuery)}(function(e){return e.effects.effect.explode=function(t,n){function y(){c.push(this),c.length===r*i&&b()}function b(){s.css({visibility:"visible"}),e(c).remove(),u||s.hide(),n()}var r=t.pieces?Math.round(Math.sqrt(t.pieces)):3,i=r,s=e(this),o=e.effects.setMode(s,t.mode||"hide"),u=o==="show",a=s.show().css("visibility","hidden").offset(),f=Math.ceil(s.outerWidth()/i),l=Math.ceil(s.outerHeight()/r),c=[],h,p,d,v,m,g;for(h=0;h<r;h++){v=a.top+h*l,g=h-(r-1)/2;for(p=0;p<i;p++)d=a.left+p*f,m=p-(i-1)/2,s.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-p*f,top:-h*l}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:f,height:l,left:d+(u?m*f:0),top:v+(u?g*l:0),opacity:u?0:1}).animate({left:d+(u?0:m*f),top:v+(u?0:g*l),opacity:u?1:0},t.duration||500,t.easing,y)}}}),function(e){typeof define=="function"&&define.amd?define(["jquery","./effect"],e):e(jQuery)}(function(e){return e.effects.effect.fade=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"toggle");r.animate({opacity:i},{queue:!1,duration:t.duration,easing:t.easing,complete:n})}}),function(e){typeof define=="function"&&define.amd?define(["jquery","./effect"],e):e(jQuery)}(function(e){return e.effects.effect.fold=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=s==="hide",a=t.size||15,f=/([0-9]+)%/.exec(a),l=!!t.horizFirst,c=o!==l,h=c?["width","height"]:["height","width"],p=t.duration/2,d,v,m={},g={};e.effects.save(r,i),r.show(),d=e.effects.createWrapper(r).css({overflow:"hidden"}),v=c?[d.width(),d.height()]:[d.height(),d.width()],f&&(a=parseInt(f[1],10)/100*v[u?0:1]),o&&d.css(l?{height:0,width:a}:{height:a,width:0}),m[h[0]]=o?v[0]:a,g[h[1]]=o?v[1]:0,d.animate(m,p,t.easing).animate(g,p,t.easing,function(){u&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()})}}),function(e){typeof define=="function"&&define.amd?define(["jquery","./effect"],e):e(jQuery)}(function(e){return e.effects.effect.highlight=function(t,n){var r=e(this),i=["backgroundImage","backgroundColor","opacity"],s=e.effects.setMode(r,t.mode||"show"),o={backgroundColor:r.css("backgroundColor")};s==="hide"&&(o.opacity=0),e.effects.save(r,i),r.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),n()}})}}),function(e){typeof define=="function"&&define.amd?define(["jquery","./effect"],e):e(jQuery)}(function(e){return e.effects.effect.pulsate=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"show"),s=i==="show",o=i==="hide",u=s||i==="hide",a=(t.times||5)*2+(u?1:0),f=t.duration/a,l=0,c=r.queue(),h=c.length,p;if(s||!r.is(":visible"))r.css("opacity",0).show(),l=1;for(p=1;p<a;p++)r.animate({opacity:l},f,t.easing),l=1-l;r.animate({opacity:l},f,t.easing),r.queue(function(){o&&r.hide(),n()}),h>1&&c.splice.apply(c,[1,0].concat(c.splice(h,a+1))),r.dequeue()}}),function(e){typeof define=="function"&&define.amd?define(["jquery","./effect","./effect-size"],e):e(jQuery)}(function(e){return e.effects.effect.scale=function(t,n){var r=e(this),i=e.extend(!0,{},t),s=e.effects.setMode(r,t.mode||"effect"),o=parseInt(t.percent,10)||(parseInt(t.percent,10)===0?0:s==="hide"?0:100),u=t.direction||"both",a=t.origin,f={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()},l={y:u!=="horizontal"?o/100:1,x:u!=="vertical"?o/100:1};i.effect="size",i.queue=!1,i.complete=n,s!=="effect"&&(i.origin=a||["middle","center"],i.restore=!0),i.from=t.from||(s==="show"?{height:0,width:0,outerHeight:0,outerWidth:0}:f),i.to={height:f.height*l.y,width:f.width*l.x,outerHeight:f.outerHeight*l.y,outerWidth:f.outerWidth*l.x},i.fade&&(s==="show"&&(i.from.opacity=0,i.to.opacity=1),s==="hide"&&(i.from.opacity=1,i.to.opacity=0)),r.effect(i)}}),function(e){typeof define=="function"&&define.amd?define(["jquery","./effect"],e):e(jQuery)}(function(e){return e.effects.effect.shake=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"effect"),o=t.direction||"left",u=t.distance||20,a=t.times||3,f=a*2+1,l=Math.round(t.duration/f),c=o==="up"||o==="down"?"top":"left",h=o==="up"||o==="left",p={},d={},v={},m,g=r.queue(),y=g.length;e.effects.save(r,i),r.show(),e.effects.createWrapper(r),p[c]=(h?"-=":"+=")+u,d[c]=(h?"+=":"-=")+u*2,v[c]=(h?"-=":"+=")+u*2,r.animate(p,l,t.easing);for(m=1;m<a;m++)r.animate(d,l,t.easing).animate(v,l,t.easing);r.animate(d,l,t.easing).animate(p,l/2,t.easing).queue(function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}),y>1&&g.splice.apply(g,[1,0].concat(g.splice(y,f+1))),r.dequeue()}}),function(e){typeof define=="function"&&define.amd?define(["jquery","./effect"],e):e(jQuery)}(function(e){return e.effects.effect.slide=function(t,n){var r=e(this),i=["position","top","bottom","left","right","width","height"],s=e.effects.setMode(r,t.mode||"show"),o=s==="show",u=t.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left",l,c={};e.effects.save(r,i),r.show(),l=t.distance||r[a==="top"?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(r).css({overflow:"hidden"}),o&&r.css(a,f?isNaN(l)?"-"+l:-l:l),c[a]=(o?f?"+=":"-=":f?"-=":"+=")+l,r.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}}),function(e){typeof define=="function"&&define.amd?define(["jquery","./effect"],e):e(jQuery)}(function(e){return e.effects.effect.transfer=function(t,n){var r=e(this),i=e(t.to),s=i.css("position")==="fixed",o=e("body"),u=s?o.scrollTop():0,a=s?o.scrollLeft():0,f=i.offset(),l={top:f.top-u,left:f.left-a,height:i.innerHeight(),width:i.innerWidth()},c=r.offset(),h=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:c.top-u,left:c.left-a,height:r.innerHeight(),width:r.innerWidth(),position:s?"fixed":"absolute"}).animate(l,t.duration,t.easing,function(){h.remove(),n()})}}),function(){}.call(this),function(e,t){"use strict";e.rails!==t&&e.error("jquery-ujs has already been loaded!");var n,r=e(document);e.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",csrfToken:function(){return e("meta[name=csrf-token]").attr("content")},csrfParam:function(){return e("meta[name=csrf-param]").attr("content")},CSRFProtection:function(e){var t=n.csrfToken();t&&e.setRequestHeader("X-CSRF-Token",t)},refreshCSRFTokens:function(){e('form input[name="'+n.csrfParam()+'"]').val(n.csrfToken())},fire:function(t,n,r){var i=e.Event(n);return t.trigger(i,r),i.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e[0].href},isRemote:function(e){return e.data("remote")!==t&&e.data("remote")!==!1},handleRemote:function(r){var i,s,o,u,a,f;if(n.fire(r,"ajax:before")){u=r.data("with-credentials")||null,a=r.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType;if(r.is("form")){i=r.attr("method"),s=r.attr("action"),o=r.serializeArray();var l=r.data("ujs:submit-button");l&&(o.push(l),r.data("ujs:submit-button",null))}else r.is(n.inputChangeSelector)?(i=r.data("method"),s=r.data("url"),o=r.serialize(),r.data("params")&&(o=o+"&"+r.data("params"))):r.is(n.buttonClickSelector)?(i=r.data("method")||"get",s=r.data("url"),o=r.serialize(),r.data("params")&&(o=o+"&"+r.data("params"))):(i=r.data("method"),s=n.href(r),o=r.data("params")||null);return f={type:i||"GET",data:o,dataType:a,beforeSend:function(e,i){i.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+i.accepts.script);if(!n.fire(r,"ajax:beforeSend",[e,i]))return!1;r.trigger("ajax:send",e)},success:function(e,t,n){r.trigger("ajax:success",[e,t,n])},complete:function(e,t){r.trigger("ajax:complete",[e,t])},error:function(e,t,n){r.trigger("ajax:error",[e,t,n])},crossDomain:n.isCrossDomain(s)},u&&(f.xhrFields={withCredentials:u}),s&&(f.url=s),n.ajax(f)}return!1},isCrossDomain:function(e){var t=document.createElement("a");t.href=location.href;var n=document.createElement("a");try{return n.href=e,n.href=n.href,!n.protocol||!n.host||t.protocol+"//"+t.host!=n.protocol+"//"+n.host}catch(r){return!0}},handleMethod:function(r){var i=n.href(r),s=r.data("method"),o=r.attr("target"),u=n.csrfToken(),a=n.csrfParam(),f=e('<form method="post" action="'+i+'"></form>'),l='<input name="_method" value="'+s+'" type="hidden" />';a!==t&&u!==t&&!n.isCrossDomain(i)&&(l+='<input name="'+a+'" value="'+u+'" type="hidden" />'),o&&f.attr("target",o),f.hide().append(l).appendTo("body"),f.submit()},formElements:function(t,n){return t.is("form")?e(t[0].elements).filter(n):t.find(n)},disableFormElements:function(t){n.formElements(t,n.disableSelector).each(function(){n.disableFormElement(e(this))})},disableFormElement:function(e){var n,r;n=e.is("button")?"html":"val",r=e.data("disable-with"),e.data("ujs:enable-with",e[n]()),r!==t&&e[n](r),e.prop("disabled",!0)},enableFormElements:function(t){n.formElements(t,n.enableSelector).each(function(){n.enableFormElement(e(this))})},enableFormElement:function(e){var t=e.is("button")?"html":"val";e.data("ujs:enable-with")&&e[t](e.data("ujs:enable-with")),e.prop("disabled",!1)},allowAction:function(e){var t=e.data("confirm"),r=!1,i;if(!t)return!0;if(n.fire(e,"confirm")){try{r=n.confirm(t)}catch(s){(console.error||console.log).call(console,s.stack||s)}i=n.fire(e,"confirm:complete",[r])}return r&&i},blankInputs:function(t,n,r){var i=e(),s,o,u=n||"input,textarea",a=t.find(u);return a.each(function(){s=e(this),o=s.is("input[type=checkbox],input[type=radio]")?s.is(":checked"):!!s.val();if(o===r){if(s.is("input[type=radio]")&&a.filter('input[type=radio]:checked[name="'+s.attr("name")+'"]').length)return!0;i=i.add(s)}}),i.length?i:!1},nonBlankInputs:function(e,t){return n.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(e){var r=e.data("disable-with");e.data("ujs:enable-with",e.html()),r!==t&&e.html(r),e.bind("click.railsDisable",function(e){return n.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable")}},n.fire(r,"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,r){e.crossDomain||n.CSRFProtection(r)}),e(window).on("pageshow.rails",function(){e(e.rails.enableSelector).each(function(){var t=e(this);t.data("ujs:enable-with")&&e.rails.enableFormElement(t)}),e(e.rails.linkDisableSelector).each(function(){var t=e(this);t.data("ujs:enable-with")&&e.rails.enableElement(t)})}),r.delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(e(this))}),r.delegate(n.buttonDisableSelector,"ajax:complete",function(){n.enableFormElement(e(this))}),r.delegate(n.linkClickSelector,"click.rails",function(t){var r=e(this),i=r.data("method"),s=r.data("params"),o=t.metaKey||t.ctrlKey;if(!n.allowAction(r))return n.stopEverything(t);!o&&r.is(n.linkDisableSelector)&&n.disableElement(r);if(n.isRemote(r)){if(o&&(!i||i==="GET")&&!s)return!0;var u=n.handleRemote(r);return u===!1?n.enableElement(r):u.fail(function(){n.enableElement(r)}),!1}if(i)return n.handleMethod(r),!1}),r.delegate(n.buttonClickSelector,"click.rails",function(t){var r=e(this);if(!n.allowAction(r)||!n.isRemote(r))return n.stopEverything(t);r.is(n.buttonDisableSelector)&&n.disableFormElement(r);var i=n.handleRemote(r);return i===!1?n.enableFormElement(r):i.fail(function(){n.enableFormElement(r)}),!1}),r.delegate(n.inputChangeSelector,"change.rails",function(t){var r=e(this);return!n.allowAction(r)||!n.isRemote(r)?n.stopEverything(t):(n.handleRemote(r),!1)}),r.delegate(n.formSubmitSelector,"submit.rails",function(r){var i=e(this),s=n.isRemote(i),o,u;if(!n.allowAction(i))return n.stopEverything(r);if(i.attr("novalidate")===t){o=n.blankInputs(i,n.requiredInputSelector,!1);if(o&&n.fire(i,"ajax:aborted:required",[o]))return n.stopEverything(r)}if(s){u=n.nonBlankInputs(i,n.fileInputSelector);if(u){setTimeout(function(){n.disableFormElements(i)},13);var a=n.fire(i,"ajax:aborted:file",[u]);return a||setTimeout(function(){n.enableFormElements(i)},13),a}return n.handleRemote(i),!1}setTimeout(function(){n.disableFormElements(i)},13)}),r.delegate(n.formInputClickSelector,"click.rails",function(t){var r=e(this);if(!n.allowAction(r))return n.stopEverything(t);var i=r.attr("name"),s=i?{name:i,value:r.val()}:null;r.closest("form").data("ujs:submit-button",s)}),r.delegate(n.formSubmitSelector,"ajax:send.rails",function(t){this===t.target&&n.disableFormElements(e(this))}),r.delegate(n.formSubmitSelector,"ajax:complete.rails",function(t){this===t.target&&n.enableFormElements(e(this))}),e(function(){n.refreshCSRFTokens()}))}(jQuery),function(e){"use strict";typeof define=="function"&&define.amd?define(["jquery"],e):typeof exports=="object"?e(require("jquery")):e(window.jQuery)}(function(e){"use strict";var t=0;e.ajaxTransport("iframe",function(
n){if(n.async){var r=n.initialIframeSrc||"javascript:false;",i,s,o;return{send:function(u,a){i=e('<form style="display:none;"></form>'),i.attr("accept-charset",n.formAcceptCharset),o=/\?/.test(n.url)?"&":"?",n.type==="DELETE"?(n.url=n.url+o+"_method=DELETE",n.type="POST"):n.type==="PUT"?(n.url=n.url+o+"_method=PUT",n.type="POST"):n.type==="PATCH"&&(n.url=n.url+o+"_method=PATCH",n.type="POST"),t+=1,s=e('<iframe src="'+r+'" name="iframe-transport-'+t+'"></iframe>').bind("load",function(){var t,o=e.isArray(n.paramName)?n.paramName:[n.paramName];s.unbind("load").bind("load",function(){var t;try{t=s.contents();if(!t.length||!t[0].firstChild)throw new Error}catch(n){t=undefined}a(200,"success",{iframe:t}),e('<iframe src="'+r+'"></iframe>').appendTo(i),window.setTimeout(function(){i.remove()},0)}),i.prop("target",s.prop("name")).prop("action",n.url).prop("method",n.type),n.formData&&e.each(n.formData,function(t,n){e('<input type="hidden"/>').prop("name",n.name).val(n.value).appendTo(i)}),n.fileInput&&n.fileInput.length&&n.type==="POST"&&(t=n.fileInput.clone(),n.fileInput.after(function(e){return t[e]}),n.paramName&&n.fileInput.each(function(t){e(this).prop("name",o[t]||n.paramName)}),i.append(n.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),n.fileInput.removeAttr("form")),i.submit(),t&&t.length&&n.fileInput.each(function(n,r){var i=e(t[n]);e(r).prop("name",i.prop("name")).attr("form",i.attr("form")),i.replaceWith(r)})}),i.append(s).appendTo(document.body)},abort:function(){s&&s.unbind("load").prop("src",r),i&&i.remove()}}}}),e.ajaxSetup({converters:{"iframe text":function(t){return t&&e(t[0].body).text()},"iframe json":function(t){return t&&e.parseJSON(e(t[0].body).text())},"iframe html":function(t){return t&&e(t[0].body).html()},"iframe xml":function(t){var n=t&&t[0];return n&&e.isXMLDoc(n)?n:e.parseXML(n.XMLDocument&&n.XMLDocument.xml||e(n.body).html())},"iframe script":function(t){return t&&e.globalEval(e(t[0].body).text())}}})}),function(e){"use strict";typeof define=="function"&&define.amd?define(["jquery","jquery.ui.widget"],e):typeof exports=="object"?e(require("jquery"),require("./vendor/jquery.ui.widget")):e(window.jQuery)}(function(e){"use strict";function t(t){var n=t==="dragover";return function(r){r.dataTransfer=r.originalEvent&&r.originalEvent.dataTransfer;var i=r.dataTransfer;i&&e.inArray("Files",i.types)!==-1&&this._trigger(t,e.Event(t,{delegatedEvent:r}))!==!1&&(r.preventDefault(),n&&(i.dropEffect="copy"))}}e.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))")).test(window.navigator.userAgent)&&!e('<input type="file">').prop("disabled"),e.support.xhrFileUpload=!!window.ProgressEvent&&!!window.FileReader,e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:undefined,fileInput:undefined,replaceFileInput:!0,paramName:undefined,singleFileUploads:!0,limitMultiFileUploads:undefined,limitMultiFileUploadSize:undefined,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:undefined,forceIframeTransport:!1,redirect:undefined,redirectParamName:undefined,postMessage:undefined,multipart:!0,maxChunkSize:undefined,uploadedBytes:undefined,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,n){return t=this.messages[t]||t.toString(),n&&e.each(n,function(e,n){t=t.replace("{"+e+"}",n)}),t},formData:function(e){return e.serializeArray()},add:function(t,n){if(t.isDefaultPrevented())return!1;(n.autoUpload||n.autoUpload!==!1&&e(this).fileupload("option","autoUpload"))&&n.process().done(function(){n.submit()})},processData:!1,contentType:!1,cache:!1,timeout:0},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,n){var r=e-this.timestamp;if(!this.bitrate||!n||r>n)this.bitrate=(t-this.loaded)*(1e3/r)*8,this.loaded=t,this.timestamp=e;return this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var n;return e.type(t.formData)==="function"?t.formData(t.form):e.isArray(t.formData)?t.formData:e.type(t.formData)==="object"?(n=[],e.each(t.formData,function(e,t){n.push({name:e,value:t})}),n):[]},_getTotal:function(t){var n=0;return e.each(t,function(e,t){n+=t.size||1}),n},_initProgressObject:function(t){var n={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,n):t._progress=n},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t];else e._response={}},_onProgress:function(t,n){if(t.lengthComputable){var r=Date.now?Date.now():(new Date).getTime(),i;if(n._time&&n.progressInterval&&r-n._time<n.progressInterval&&t.loaded!==t.total)return;n._time=r,i=Math.floor(t.loaded/t.total*(n.chunkSize||n._progress.total))+(n.uploadedBytes||0),this._progress.loaded+=i-n._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(r,this._progress.loaded,n.bitrateInterval),n._progress.loaded=n.loaded=i,n._progress.bitrate=n.bitrate=n._bitrateTimer.getBitrate(r,i,n.bitrateInterval),this._trigger("progress",e.Event("progress",{delegatedEvent:t}),n),this._trigger("progressall",e.Event("progressall",{delegatedEvent:t}),this._progress)}},_initProgressListener:function(t){var n=this,r=t.xhr?t.xhr():e.ajaxSettings.xhr();r.upload&&(e(r.upload).bind("progress",function(e){var r=e.originalEvent;e.lengthComputable=r.lengthComputable,e.loaded=r.loaded,e.total=r.total,n._onProgress(e,t)}),t.xhr=function(){return r})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(t){var n=this,r,i=t.files[0],s=t.multipart||!e.support.xhrFileUpload,o=e.type(t.paramName)==="array"?t.paramName[0]:t.paramName;t.headers=e.extend({},t.headers),t.contentRange&&(t.headers["Content-Range"]=t.contentRange);if(!s||t.blob||!this._isInstanceOf("File",i))t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(i.name)+'"';s?e.support.xhrFormDataFileUpload&&(t.postMessage?(r=this._getFormData(t),t.blob?r.push({name:o,value:t.blob}):e.each(t.files,function(n,i){r.push({name:e.type(t.paramName)==="array"&&t.paramName[n]||o,value:i})})):(n._isInstanceOf("FormData",t.formData)?r=t.formData:(r=new FormData,e.each(this._getFormData(t),function(e,t){r.append(t.name,t.value)})),t.blob?r.append(o,t.blob,i.name):e.each(t.files,function(i,s){(n._isInstanceOf("File",s)||n._isInstanceOf("Blob",s))&&r.append(e.type(t.paramName)==="array"&&t.paramName[i]||o,s,s.uploadName||s.name)})),t.data=r):(t.contentType=i.type||"application/octet-stream",t.data=t.blob||i),t.blob=null},_initIframeSettings:function(t){var n=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&n&&n!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var n=e(t.fileInput),r=t.paramName;return r?e.isArray(r)||(r=[r]):(r=[],n.each(function(){var t=e(this),n=t.prop("name")||"files[]",i=(t.prop("files")||[1]).length;while(i)r.push(n),i-=1}),r.length||(r=[n.prop("name")||"files[]"])),r},_initFormSettings:function(t){if(!t.form||!t.form.length)t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")));t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||e.type(t.form.prop("method"))==="string"&&t.form.prop("method")||"").toUpperCase(),t.type!=="POST"&&t.type!=="PUT"&&t.type!=="PATCH"&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var n=e.extend({},this.options,t);return this._initFormSettings(n),this._initDataSettings(n),n},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,n,r){var i=e.Deferred(),s=i.promise();return n=n||this.options.context||s,t===!0?i.resolveWith(n,r):t===!1&&i.rejectWith(n,r),s.abort=i.promise,this._enhancePromise(s)},_addConvenienceMethods:function(t,n){var r=this,i=function(t){return e.Deferred().resolveWith(r,t).promise()};n.process=function(t,s){if(t||s)n._processQueue=this._processQueue=(this._processQueue||i([this])).pipe(function(){return n.errorThrown?e.Deferred().rejectWith(r,[n]).promise():i(arguments)}).pipe(t,s);return this._processQueue||i([this])},n.submit=function(){return this.state()!=="pending"&&(n.jqXHR=this.jqXHR=r._trigger("submit",e.Event("submit",{delegatedEvent:t}),this)!==!1&&r._onSend(t,this)),this.jqXHR||r._getXHRPromise()},n.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",r._trigger("fail",null,this),r._getXHRPromise(!1))},n.state=function(){if(this.jqXHR)return r._getDeferredState(this.jqXHR);if(this._processQueue)return r._getDeferredState(this._processQueue)},n.processing=function(){return!this.jqXHR&&this._processQueue&&r._getDeferredState(this._processQueue)==="pending"},n.progress=function(){return this._progress},n.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),n=t&&t.split("-"),r=n&&n.length>1&&parseInt(n[1],10);return r&&r+1},_chunkedUpload:function(t,n){t.uploadedBytes=t.uploadedBytes||0;var r=this,i=t.files[0],s=i.size,o=t.uploadedBytes,u=t.maxChunkSize||s,a=this._blobSlice,f=e.Deferred(),l=f.promise(),c,h;return!(this._isXHRUpload(t)&&a&&(o||u<s))||t.data?!1:n?!0:o>=s?(i.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",i.error])):(h=function(){var n=e.extend({},t),l=n._progress.loaded;n.blob=a.call(i,o,o+u,i.type),n.chunkSize=n.blob.size,n.contentRange="bytes "+o+"-"+(o+n.chunkSize-1)+"/"+s,r._initXHRData(n),r._initProgressListener(n),c=(r._trigger("chunksend",null,n)!==!1&&e.ajax(n)||r._getXHRPromise(!1,n.context)).done(function(i,u,a){o=r._getUploadedBytes(a)||o+n.chunkSize,l+n.chunkSize-n._progress.loaded&&r._onProgress(e.Event("progress",{lengthComputable:!0,loaded:o-n.uploadedBytes,total:o-n.uploadedBytes}),n),t.uploadedBytes=n.uploadedBytes=o,n.result=i,n.textStatus=u,n.jqXHR=a,r._trigger("chunkdone",null,n),r._trigger("chunkalways",null,n),o<s?h():f.resolveWith(n.context,[i,u,a])}).fail(function(e,t,i){n.jqXHR=e,n.textStatus=t,n.errorThrown=i,r._trigger("chunkfail",null,n),r._trigger("chunkalways",null,n),f.rejectWith(n.context,[e,t,i])})},this._enhancePromise(l),l.abort=function(){return c.abort()},h(),l)},_beforeSend:function(e,t){this._active===0&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,n,r,i){var s=i._progress.total,o=i._response;i._progress.loaded<s&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:s,total:s}),i),o.result=i.result=t,o.textStatus=i.textStatus=n,o.jqXHR=i.jqXHR=r,this._trigger("done",null,i)},_onFail:function(e,t,n,r){var i=r._response;r.recalculateProgress&&(this._progress.loaded-=r._progress.loaded,this._progress.total-=r._progress.total),i.jqXHR=r.jqXHR=e,i.textStatus=r.textStatus=t,i.errorThrown=r.errorThrown=n,this._trigger("fail",null,r)},_onAlways:function(e,t,n,r){this._trigger("always",null,r)},_onSend:function(t,n){n.submit||this._addConvenienceMethods(t,n);var r=this,i,s,o,u,a=r._getAJAXSettings(n),f=function(){return r._sending+=1,a._bitrateTimer=new r._BitrateTimer,i=i||((s||r._trigger("send",e.Event("send",{delegatedEvent:t}),a)===!1)&&r._getXHRPromise(!1,a.context,s)||r._chunkedUpload(a)||e.ajax(a)).done(function(e,t,n){r._onDone(e,t,n,a)}).fail(function(e,t,n){r._onFail(e,t,n,a)}).always(function(e,t,n){r._onAlways(e,t,n,a),r._sending-=1,r._active-=1;if(a.limitConcurrentUploads&&a.limitConcurrentUploads>r._sending){var i=r._slots.shift();while(i){if(r._getDeferredState(i)==="pending"){i.resolve();break}i=r._slots.shift()}}r._active===0&&r._trigger("stop")}),i};return this._beforeSend(t,a),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(o=e.Deferred(),this._slots.push(o),u=o.pipe(f)):(this._sequence=this._sequence.pipe(f,f),u=this._sequence),u.abort=function(){return s=[undefined,"abort","abort"],i?i.abort():(o&&o.rejectWith(a.context,s),f())},this._enhancePromise(u)):f()},_onAdd:function(t,n){var r=this,i=!0,s=e.extend({},this.options,n),o=n.files,u=o.length,a=s.limitMultiFileUploads,f=s.limitMultiFileUploadSize,l=s.limitMultiFileUploadSizeOverhead,c=0,h=this._getParamName(s),p,d,v,m,g=0;if(!u)return!1;f&&o[0].size===undefined&&(f=undefined);if(!(s.singleFileUploads||a||f)||!this._isXHRUpload(s))v=[o],p=[h];else if(!s.singleFileUploads&&!f&&a){v=[],p=[];for(m=0;m<u;m+=a)v.push(o.slice(m,m+a)),d=h.slice(m,m+a),d.length||(d=h),p.push(d)}else if(!s.singleFileUploads&&f){v=[],p=[];for(m=0;m<u;m+=1){c+=o[m].size+l;if(m+1===u||c+o[m+1].size+l>f||a&&m+1-g>=a)v.push(o.slice(g,m+1)),d=h.slice(g,m+1),d.length||(d=h),p.push(d),g=m+1,c=0}}else p=h;return n.originalFiles=o,e.each(v||o,function(s,o){var u=e.extend({},n);return u.files=v?o:[o],u.paramName=p[s],r._initResponseObject(u),r._initProgressObject(u),r._addConvenienceMethods(t,u),i=r._trigger("add",e.Event("add",{delegatedEvent:t}),u),i}),i},_replaceFileInput:function(t){var n=t.fileInput,r=n.clone(!0);t.fileInputClone=r,e("<form></form>").append(r)[0].reset(),n.after(r).detach(),e.cleanData(n.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,t){return t===n[0]?r[0]:t}),n[0]===this.element[0]&&(this.element=r)},_handleFileTreeEntry:function(t,n){var r=this,i=e.Deferred(),s=function(e){e&&!e.entry&&(e.entry=t),i.resolve([e])},o=function(e){r._handleFileTreeEntries(e,n+t.name+"/").done(function(e){i.resolve(e)}).fail(s)},u=function(){a.readEntries(function(e){e.length?(f=f.concat(e),u()):o(f)},s)},a,f=[];return n=n||"",t.isFile?t._file?(t._file.relativePath=n,i.resolve(t._file)):t.file(function(e){e.relativePath=n,i.resolve(e)},s):t.isDirectory?(a=t.createReader(),u()):i.resolve([]),i.promise()},_handleFileTreeEntries:function(t,n){var r=this;return e.when.apply(e,e.map(t,function(e){return r._handleFileTreeEntry(e,n)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var n=t.items;return n&&n.length&&(n[0].webkitGetAsEntry||n[0].getAsEntry)?this._handleFileTreeEntries(e.map(n,function(e){var t;return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t);var n=t.prop("webkitEntries")||t.prop("entries"),r,i;if(n&&n.length)return this._handleFileTreeEntries(n);r=e.makeArray(t.prop("files"));if(!r.length){i=t.prop("value");if(!i)return e.Deferred().resolve([]).promise();r=[{name:i.replace(/^.*\\/,"")}]}else r[0].name===undefined&&r[0].fileName&&e.each(r,function(e,t){t.name=t.fileName,t.size=t.fileSize});return e.Deferred().resolve(r).promise()},_getFileInputFiles:function(t){return t instanceof e&&t.length!==1?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var n=this,r={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(r.fileInput).always(function(i){r.files=i,n.options.replaceFileInput&&n._replaceFileInput(r),n._trigger("change",e.Event("change",{delegatedEvent:t}),r)!==!1&&n._onAdd(t,r)})},_onPaste:function(t){var n=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,r={files:[]};n&&n.length&&(e.each(n,function(e,t){var n=t.getAsFile&&t.getAsFile();n&&r.files.push(n)}),this._trigger("paste",e.Event("paste",{delegatedEvent:t}),r)!==!1&&this._onAdd(t,r))},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var n=this,r=t.dataTransfer,i={};r&&r.files&&r.files.length&&(t.preventDefault(),this._getDroppedFiles(r).always(function(r){i.files=r,n._trigger("drop",e.Event("drop",{delegatedEvent:t}),i)!==!1&&n._onAdd(t,i)}))},_onDragOver:t("dragover"),_onDragEnter:t("dragenter"),_onDragLeave:t("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,n){var r=e.inArray(t,this._specialOptions)!==-1;r&&this._destroyEventHandlers(),this._super(t,n),r&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;t.fileInput===undefined?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),n=t.pop();return t.shift(),new RegExp(t.join("/"),n)},_isRegExpOption:function(t,n){return t!=="url"&&e.type(n)==="string"&&/^\/.*\/[igm]{0,3}$/.test(n)},_initDataAttributes:function(){var t=this,n=this.options,r=this.element.data();e.each(this.element[0].attributes,function(e,i){var s=i.name.toLowerCase(),o;/^data-/.test(s)&&(s=s.slice(5).replace(/-[a-z]/g,function(e){return e.charAt(1).toUpperCase()}),o=r[s],t._isRegExpOption(s,o)&&(o=t._getRegExp(o)),n[s]=o)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var n=this;if(!t||this.options.disabled)return;t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,n._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var n=this,r=e.Deferred(),i=r.promise(),s,o;return i.abort=function(){return o=!0,s?s.abort():(r.reject(null,"abort","abort"),i)},this._getFileInputFiles(t.fileInput).always(function(e){if(o)return;if(!e.length){r.reject();return}t.files=e,s=n._onSend(null,t),s.then(function(e,t,n){r.resolve(e,t,n)},function(e,t,n){r.reject(e,t,n)})}),this._enhancePromise(i)}t.files=e.makeArray(t.files);if(t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})}),function(e){typeof define=="function"&&define.amd?define(["jquery"],e):typeof exports=="object"?e(require("jquery")):e(jQuery)}(function(e){function n(e){return u.raw?e:encodeURIComponent(e)}function r(e){return u.raw?e:decodeURIComponent(e)}function i(e){return n(u.json?JSON.stringify(e):String(e))}function s(e){e.indexOf('"')===0&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(t," ")),u.json?JSON.parse(e):e}catch(n){}}function o(t,n){var r=u.raw?t:s(t);return e.isFunction(n)?n(r):r}var t=/\+/g,u=e.cookie=function(t,s,a){if(s!==undefined&&!e.isFunction(s)){a=e.extend({},u.defaults,a);if(typeof a.expires=="number"){var f=a.expires,l=a.expires=new Date;l.setTime(+l+f*864e5)}return document.cookie=[n(t),"=",i(s),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}var c=t?undefined:{},h=document.cookie?document.cookie.split("; "):[];for(var p=0,d=h.length;p<d;p++){var v=h[p].split("="),m=r(v.shift()),g=v.join("=");if(t&&t===m){c=o(g,s);break}!t&&(g=o(g))!==undefined&&(c[m]=g)}return c};u.defaults={},e.removeCookie=function(t,n){return e.cookie(t)===undefined?!1:(e.cookie(t,"",e.extend({},n,{expires:-1})),!e.cookie(t))}}),function(e,t,n){function o(t,n){var i=this.element=t,o=this.options=e.extend({maxChars:e(i).attr("maxlength")?e(i).attr("maxlength"):e(i).data(r.toLowerCase()+"-limit"),onCharsFull:function(){},onCharsEmpty:function(){},onCharsValid:function(){}},s,n);if(!o.maxChars)return;this._defaults=s,this._name=r,this.init(i,o)}var r="charLimiter",i=t.document,s={counterClass:"counter",generateCounter:!1,insert:"after",forceLimit:!0,textFormat:"{r}"};o.prototype.init=function(t,n){var r=n.maxChars;if(n.generateCounter===!0){var i=e("<span>",{"class":n.counterClass,text:r});e(t).data("sp",i)[n.insert](i)}else e(t).each(function(){e("."+n.counterClass+'[data-counter-rel="'+e(this).data("counter-rel")+'"]').html(r)});e(t).on("keypress keyup keydown change input",function(){var t,i=e(this).val().length,s=r-i;s<=0?n.onCharsFull(this):(i===0&&n.onCharsEmpty(this),n.onCharsValid(this));if(n.forceLimit&&i>r){var o=e(this).val();e(this).val(o.substr(0,r)),s=0}t=n.textFormat.replace(/{r}/g,s).replace(/{rs}/g,s===1||s===-1?"":"s").replace(/{c}/g,i).replace(/{cs}/g,i===1||s===-1?"":"s").replace(/{m}/g,r),n.generateCounter===!0?e(this).data("sp").html(t):e("."+n.counterClass+'[data-counter-rel="'+e(this).data("counter-rel")+'"]').html(t)}).change()},e.fn[r]=function(t){return this.each(function(){e.data(this,"plugin_"+r)||e.data(this,"plugin_"+r,new o(this,t))})}}(jQuery,window),function(e){"use strict";var t=function(n,r){var i=navigator.userAgent.toLowerCase();this.opt=e.extend({},t.defaults,r||{}),this.container=e(n),this.opt.is_msie=/msie/.test(i),this.opt.is_ie_lt9=/msie [1-8]\./.test(i),this.container.addClass(this.opt.css_container),this.ui={},this.state=null,this.ui.multi=[],this.ui.selection=null,this.filter={},this.init(),this.setOptions(r),this.applySizeConstraints(),this.container.trigger("cropinit",this),this.opt.is_ie_lt9&&(this.opt.dragEventTarget=document.body)};e.extend(t,{component:{},filter:{},stage:{},registerComponent:function(e,n){t.component[e]=n},registerFilter:function(e,n){t.filter[e]=n},registerStageType:function(e,n){t.stage[e]=n},attach:function(t,n){var r=new e.Jcrop(t,n);return r},imgCopy:function(e){var t=new Image;return t.src=e.src,t},imageClone:function(n){return e.Jcrop.supportsCanvas?t.canvasClone(n):t.imgCopy(n)},canvasClone:function(t){var n=document.createElement("canvas"),r=n.getContext("2d");return e(n).width(t.width).height(t.height),n.width=t.naturalWidth,n.height=t.naturalHeight,r.drawImage(t,0,0,t.naturalWidth,t.naturalHeight),n},propagate:function(e,t,n){for(var r=0,i=e.length;r<i;r++)t.hasOwnProperty(e[r])&&(n[e[r]]=t[e[r]])},getLargestBox:function(e,t,n){return t/n>e?[n*e,n]:[t,t/e]},stageConstructor:function(n,r,i){var s=[];e.each(t.stage,function(e,t){s.push(t)}),s.sort(function(e,t){return e.priority-t.priority});for(var o=0,u=s.length;o<u;o++)if(s[o].isSupported(n,r)){s[o].create(n,r,function(e,t){typeof i=="function"&&i(e,t)});break}},supportsColorFade:function(){return e.fx.step.hasOwnProperty("backgroundColor")},wrapFromXywh:function(e){var t={x:e[0],y:e[1],w:e[2],h:e[3]};return t.x2=t.x+t.w,t.y2=t.y+t.h,t}});var r=function(){};e.extend(r,{isSupported:function(e,t){return!0},priority:100,create:function(e,t,n){var i=new r;i.element=e,n.call(this,i,t)},prototype:{attach:function(e){this.init(e),e.ui.stage=this},triggerEvent:function(t){return e(this.element).trigger(t),this},getElement:function(){return this.element}}}),t.registerStageType("Block",r);var i=function(){};i.prototype=new r,e.extend(i,{isSupported:function(e,t){if(e.tagName=="IMG")return!0},priority:90,create:function(t,n,r){e.Jcrop.component.ImageLoader.attach(t,function(s,o){var u=new i;u.element=e(t).wrap("<div />").parent(),u.element.width(s).height(o),u.imgsrc=t,typeof r=="function"&&r.call(this,u,n)})}}),t.registerStageType("Image",i);var s=function(){this.angle=0,this.scale=1,this.scaleMin=.2,this.scaleMax=1.25,this.offset=[0,0]};s.prototype=new i,e.extend(s,{isSupported:function(t,n){if(e.Jcrop.supportsCanvas&&t.tagName=="IMG")return!0},priority:60,create:function(t,n,r){var i=e(t),o=e.extend({},n);e.Jcrop.component.ImageLoader.attach(t,function(e,n){var u=new s;i.hide(),u.createCanvas(t,e,n),i.before(u.element),u.imgsrc=t,o.imgsrc=t,typeof r=="function"&&(r(u,o),u.redraw())})}}),e.extend(s.prototype,{init:function(e){this.core=e},setOffset:function(e,t){return this.offset=[e,t],this},setAngle:function(e){return this.angle=e,this},setScale:function(e){return this.scale=this.boundScale(e),this},boundScale:function(e){return e<this.scaleMin?e=this.scaleMin:e>this.scaleMax&&(e=this.scaleMax),e},createCanvas:function(t,n,r){this.width=n,this.height=r,this.canvas=document.createElement("canvas"),this.canvas.width=n,this.canvas.height=r,this.$canvas=e(this.canvas).width(n).height(r),this.context=this.canvas.getContext("2d"),this.fillstyle="rgb(0,0,0)",this.element=this.$canvas.wrap("<div />").parent().width(n).height(r)},triggerEvent:function(e){return this.$canvas.trigger(e),this},clear:function(){return this.context.fillStyle=this.fillstyle,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this},redraw:function(){return this.context.save(),this.clear(),this.context.translate(parseInt(this.width*.5),parseInt(this.height*.5)),this.context.translate(this.offset[0]/this.core.opt.xscale,this.offset[1]/this.core.opt.yscale),this.context.rotate(this.angle*(Math.PI/180)),this.context.scale(this.scale,this.scale),this.context.translate(-parseInt(this.width*.5),-parseInt(this.height*.5)),this.context.drawImage(this.imgsrc,0,0,this.width,this.height),this.context.restore(),this.$canvas.trigger("cropredraw"),this},setFillStyle:function(e){return this.fillstyle=e,this}}),t.registerStageType("Canvas",s);var o=function(){this.minw=40,this.minh=40,this.maxw=0,this.maxh=0,this.core=null};e.extend(o.prototype,{tag:"backoff",priority:22,filter:function(e){var t=this.bound;return e.x<t.minx&&(e.x=t.minx,e.x2=e.w+e.x),e.y<t.miny&&(e.y=t.miny,e.y2=e.h+e.y),e.x2>t.maxx&&(e.x2=t.maxx,e.x=e.x2-e.w),e.y2>t.maxy&&(e.y2=t.maxy,e.y=e.y2-e.h),e},refresh:function(e){this.elw=e.core.container.width(),this.elh=e.core.container.height(),this.bound={minx:0+e.edge.w,miny:0+e.edge.n,maxx:this.elw+e.edge.e,maxy:this.elh+e.edge.s}}}),t.registerFilter("backoff",o);var u=function(){this.core=null};e.extend(u.prototype,{tag:"constrain",priority:5,filter:function(e,t){return t=="move"?(e.x<this.minx&&(e.x=this.minx,e.x2=e.w+e.x),e.y<this.miny&&(e.y=this.miny,e.y2=e.h+e.y),e.x2>this.maxx&&(e.x2=this.maxx,e.x=e.x2-e.w),e.y2>this.maxy&&(e.y2=this.maxy,e.y=e.y2-e.h)):(e.x<this.minx&&(e.x=this.minx),e.y<this.miny&&(e.y=this.miny),e.x2>this.maxx&&(e.x2=this.maxx),e.y2>this.maxy&&(e.y2=this.maxy)),e.w=e.x2-e.x,e.h=e.y2-e.y,e},refresh:function(e){this.elw=e.core.container.width(),this.elh=e.core.container.height(),this.minx=0+e.edge.w,this.miny=0+e.edge.n,this.maxx=this.elw+e.edge.e,this.maxy=this.elh+e.edge.s}}),t.registerFilter("constrain",u);var a=function(){this.core=null};e.extend(a.prototype,{tag:"extent",priority:12,offsetFromCorner:function(e,t,n){var r=t[0],i=t[1];switch(e){case"bl":return[n.x2-r,n.y,r,i];case"tl":return[n.x2-r,n.y2-i,r,i];case"br":return[n.x,n.y,r,i];case"tr":return[n.x,n.y2-i,r,i]}},getQuadrant:function(e){var t=e.opposite[0]-e.offsetx,n=e.opposite[1]-e.offsety;return t<0&&n<0?"br":t>=0&&n>=0?"tl":t<0&&n>=0?"tr":"bl"},filter:function(e,n,r){if(n=="move")return e;var i=e.w,s=e.h,o=r.state,u=this.limits,a=o?this.getQuadrant(o):"br";return u.minw&&i<u.minw&&(i=u.minw),u.minh&&s<u.minh&&(s=u.minh),u.maxw&&i>u.maxw&&(i=u.maxw),u.maxh&&s>u.maxh&&(s=u.maxh),i==e.w&&s==e.h?e:t.wrapFromXywh(this.offsetFromCorner(a,[i,s],e))},refresh:function(e){this.elw=e.core.container.width(),this.elh=e.core.container.height(),this.limits={minw:e.minSize[0],minh:e.minSize[1],maxw:e.maxSize[0],maxh:e.maxSize[1]}}}),t.registerFilter("extent",a);var f=function(){this.stepx=1,this.stepy=1,this.core=null};e.extend(f.prototype,{tag:"grid",priority:19,filter:function(e){var t={x:Math.round(e.x/this.stepx)*this.stepx,y:Math.round(e.y/this.stepy)*this.stepy,x2:Math.round(e.x2/this.stepx)*this.stepx,y2:Math.round(e.y2/this.stepy)*this.stepy};return t.w=t.x2-t.x,t.h=t.y2-t.y,t}}),t.registerFilter("grid",f);var l=function(){this.ratio=0,this.core=null};e.extend(l.prototype,{tag:"ratio",priority:15,offsetFromCorner:function(e,t,n){var r=t[0],i=t[1];switch(e){case"bl":return[n.x2-r,n.y,r,i];case"tl":return[n.x2-r,n.y2-i,r,i];case"br":return[n.x,n.y,r,i];case"tr":return[n.x,n.y2-i,r,i]}},getBoundRatio:function(e,n){var r=t.getLargestBox(this.ratio,e.w,e.h);return t.wrapFromXywh(this.offsetFromCorner(n,r,e))},getQuadrant:function(e){var t=e.opposite[0]-e.offsetx,n=e.opposite[1]-e.offsety;return t<0&&n<0?"br":t>=0&&n>=0?"tl":t<0&&n>=0?"tr":"bl"},filter:function(e,t,n){if(!this.ratio)return e;var r=e.w/e.h,i=n.state,s=i?this.getQuadrant(i):"br";t=t||"se";if(t=="move")return e;switch(t){case"n":e.x2=this.elw,e.w=e.x2-e.x,s="tr";break;case"s":e.x2=this.elw,e.w=e.x2-e.x,s="br";break;case"e":e.y2=this.elh,e.h=e.y2-e.y,s="br";break;case"w":e.y2=this.elh,e.h=e.y2-e.y,s="bl"}return this.getBoundRatio(e,s)},refresh:function(e){this.ratio=e.aspectRatio,this.elw=e.core.container.width(),this.elh=e.core.container.height()}}),t.registerFilter("ratio",l);var c=function(){this.core=null};e.extend(c.prototype,{tag:"round",priority:90,filter:function(e){var t={x:Math.round(e.x),y:Math.round(e.y),x2:Math.round(e.x2),y2:Math.round(e.y2)};return t.w=t.x2-t.x,t.h=t.y2-t.y,t}}),t.registerFilter("round",c);var h=function(e,t){this.color=t||"black",this.opacity=e||.5,this.core=null,this.shades={}};e.extend(h.prototype,{tag:"shader",fade:!0,fadeEasing:"swing",fadeSpeed:320,priority:95,init:function(){var t=this;t.attached||(t.visible=!1,t.container=e("<div />").addClass(t.core.opt.css_shades).prependTo(this.core.container).hide(),t.elh=this.core.container.height(),t.elw=this.core.container.width(),t.shades={top:t.createShade(),right:t.createShade(),left:t.createShade(),bottom:t.createShade()},t.attached=!0)},destroy:function(){this.container.remove()},setColor:function(n,r){var i=this;if(n==i.color)return i;this.color=n;var s=t.supportsColorFade();return e.each(i.shades,function(e,t){!i.fade||r||!s?t.css("backgroundColor",n):t.animate({backgroundColor:n},{queue:!1,duration:i.fadeSpeed,easing:i.fadeEasing})}),i},setOpacity:function(t,n){var r=this;return t==r.opacity?r:(r.opacity=t,e.each(r.shades,function(e,i){!r.fade||n?i.css({opacity:t}):i.animate({opacity:t},{queue:!1,duration:r.fadeSpeed,easing:r.fadeEasing})}),r)},createShade:function(){return e("<div />").css({position:"absolute",backgroundColor:this.color,opacity:this.opacity}).appendTo(this.container)},refresh:function(e){var t=this.core,n=this.shades;this.setColor(e.bgColor?e.bgColor:this.core.opt.bgColor),this.setOpacity(e.bgOpacity?e.bgOpacity:this.core.opt.bgOpacity),this.elh=t.container.height(),this.elw=t.container.width(),n.right.css("height",this.elh+"px"),n.left.css("height",this.elh+"px")},filter:function(e,t,n){if(!n.active)return e;var r=this,i=r.shades;return i.top.css({left:Math.round(e.x)+"px",width:Math.round(e.w)+"px",height:Math.round(e.y)+"px"}),i.bottom.css({top:Math.round(e.y2)+"px",left:Math.round(e.x)+"px",width:Math.round(e.w)+"px",height:r.elh-Math.round(e.y2)+"px"}),i.right.css({left:Math.round(e.x2)+"px",width:r.elw-Math.round(e.x2)+"px"}),i.left.css({width:Math.round(e.x)+"px"}),r.visible||(r.container.show(),r.
visible=!0),e}}),t.registerFilter("shader",h);var p=function(e){this.stage=e,this.core=e.core,this.cloneStagePosition()};p.prototype={cloneStagePosition:function(){var e=this.stage;this.angle=e.angle,this.scale=e.scale,this.offset=e.offset},getElement:function(){var t=this.stage;return e("<div />").css({position:"absolute",top:t.offset[0]+"px",left:t.offset[1]+"px",width:t.angle+"px",height:t.scale+"px"})},animate:function(e){var t=this;this.scale=this.stage.boundScale(this.scale),t.stage.triggerEvent("croprotstart"),t.getElement().animate({top:t.offset[0]+"px",left:t.offset[1]+"px",width:t.angle+"px",height:t.scale+"px"},{easing:t.core.opt.animEasing,duration:t.core.opt.animDuration,complete:function(){t.stage.triggerEvent("croprotend"),typeof e=="function"&&e.call(this)},progress:function(e){var n={},r,i=e.tweens;for(r=0;r<i.length;r++)n[i[r].prop]=i[r].now;t.stage.setAngle(n.width).setScale(n.height).setOffset(n.top,n.left).redraw()}})}},t.stage.Canvas.prototype.getAnimator=function(){return new p(this)},t.registerComponent("CanvasAnimator",p);var d=function(e){this.selection=e,this.core=e.core};d.prototype={getElement:function(){var t=this.selection.get();return e("<div />").css({position:"absolute",top:t.y+"px",left:t.x+"px",width:t.w+"px",height:t.h+"px"})},animate:function(e,t,n,r,i){var s=this;s.selection.allowResize(!1),s.getElement().animate({top:t+"px",left:e+"px",width:n+"px",height:r+"px"},{easing:s.core.opt.animEasing,duration:s.core.opt.animDuration,complete:function(){s.selection.allowResize(!0),i&&i.call(this)},progress:function(e){var t={},n,r=e.tweens;for(n=0;n<r.length;n++)t[r[n].prop]=r[n].now;var i={x:parseInt(t.left),y:parseInt(t.top),w:parseInt(t.width),h:parseInt(t.height)};i.x2=i.x+i.w,i.y2=i.y+i.h,s.selection.updateRaw(i,"se")}})}},t.registerComponent("Animator",d);var v=function(e,t,n){var r=this;r.x=e.pageX,r.y=e.pageY,r.selection=t,r.eventTarget=t.core.opt.dragEventTarget,r.orig=t.get(),t.callFilterFunction("refresh");var i=t.core.container.position();r.elx=i.left,r.ely=i.top,r.offsetx=0,r.offsety=0,r.ord=n,r.opposite=r.getOppositeCornerOffset(),r.initEvents(e)};v.prototype={getOppositeCornerOffset:function(){var e=this.orig,t=this.x-this.elx-e.x,n=this.y-this.ely-e.y;switch(this.ord){case"nw":case"w":return[e.w-t,e.h-n];case"sw":return[e.w-t,-n];case"se":case"s":case"e":return[-t,-n];case"ne":case"n":return[-t,e.h-n]}return[null,null]},initEvents:function(t){e(this.eventTarget).on("mousemove.jcrop",this.createDragHandler()).on("mouseup.jcrop",this.createStopHandler())},dragEvent:function(e){this.offsetx=e.pageX-this.x,this.offsety=e.pageY-this.y,this.selection.updateRaw(this.getBox(),this.ord)},endDragEvent:function(e){var t=this.selection;t.core.container.removeClass("jcrop-dragging"),t.element.trigger("cropend",[t,t.core.unscale(t.get())]),t.focus()},createStopHandler:function(){var t=this;return function(n){return e(t.eventTarget).off(".jcrop"),t.endDragEvent(n),!1}},createDragHandler:function(){var e=this;return function(t){return e.dragEvent(t),!1}},update:function(e,t){var n=this;n.offsetx=e-n.x,n.offsety=t-n.y},resultWrap:function(e){var t={x:Math.min(e[0],e[2]),y:Math.min(e[1],e[3]),x2:Math.max(e[0],e[2]),y2:Math.max(e[1],e[3])};return t.w=t.x2-t.x,t.h=t.y2-t.y,t},getBox:function(){var e=this,t=e.orig,n={x2:t.x+t.w,y2:t.y+t.h};switch(e.ord){case"n":return e.resultWrap([t.x,e.offsety+t.y,n.x2,n.y2]);case"s":return e.resultWrap([t.x,t.y,n.x2,e.offsety+n.y2]);case"e":return e.resultWrap([t.x,t.y,e.offsetx+n.x2,n.y2]);case"w":return e.resultWrap([t.x+e.offsetx,t.y,n.x2,n.y2]);case"sw":return e.resultWrap([e.offsetx+t.x,t.y,n.x2,e.offsety+n.y2]);case"se":return e.resultWrap([t.x,t.y,e.offsetx+n.x2,e.offsety+n.y2]);case"ne":return e.resultWrap([t.x,e.offsety+t.y,e.offsetx+n.x2,n.y2]);case"nw":return e.resultWrap([e.offsetx+t.x,e.offsety+t.y,n.x2,n.y2]);case"move":return n.nx=t.x+e.offsetx,n.ny=t.y+e.offsety,e.resultWrap([n.nx,n.ny,n.nx+t.w,n.ny+t.h])}}},t.registerComponent("DragState",v);var m=function(e){this.core=e};m.prototype={on:function(t,n){e(this).on(t,n)},off:function(t){e(this).off(t)},trigger:function(t){e(this).trigger(t)}},t.registerComponent("EventManager",m);var g=function(e,t,n){this.src=e,t||(t=new Image),this.element=t,this.callback=n,this.load()};e.extend(g,{attach:function(e,t){return new g(e.src,e,t)},prototype:{getDimensions:function(){var e=this.element;return e.naturalWidth?[e.naturalWidth,e.naturalHeight]:e.width?[e.width,e.height]:null},fireCallback:function(){this.element.onload=null,typeof this.callback=="function"&&this.callback.apply(this,this.getDimensions())},isLoaded:function(){return this.element.complete},load:function(){var e=this,t=e.element;t.src=e.src,e.isLoaded()?e.fireCallback():e.element.onload=function(t){e.fireCallback()}}}}),t.registerComponent("ImageLoader",g);var y=function(e){this.core=e,this.init()};e.extend(y,{support:function(){if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)return!0},prototype:{init:function(){var t=this,n=e.Jcrop.component.DragState.prototype;n.touch||(t.initEvents(),t.shimDragState(),t.shimStageDrag(),n.touch=!0)},shimDragState:function(){var t=this;e.Jcrop.component.DragState.prototype.initEvents=function(n){n.type.substr(0,5)=="touch"?e(this.eventTarget).on("touchmove.jcrop.jcrop-touch",t.dragWrap(this.createDragHandler())).on("touchend.jcrop.jcrop-touch",this.createStopHandler()):e(this.eventTarget).on("mousemove.jcrop",this.createDragHandler()).on("mouseup.jcrop",this.createStopHandler())}},shimStageDrag:function(){this.core.container.addClass("jcrop-touch").on("touchstart.jcrop.jcrop-stage",this.dragWrap(this.core.ui.manager.startDragHandler()))},dragWrap:function(e){return function(t){return t.preventDefault(),t.stopPropagation(),t.type.substr(0,5)=="touch"?(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,e(t)):!1}},initEvents:function(){var e=this,t=e.core;t.container.on("touchstart.jcrop.jcrop-touch","."+t.opt.css_drag,e.dragWrap(t.startDrag()))}}}),t.registerComponent("Touch",y);var b=function(e){this.core=e,this.init()};e.extend(b,{defaults:{eventName:"keydown.jcrop",passthru:[9],debug:!1},prototype:{init:function(){e.extend(this,b.defaults),this.enable()},disable:function(){this.core.container.off(this.eventName)},enable:function(){var t=this,n=t.core;n.container.on(t.eventName,function(r){var i=r.shiftKey?16:2;if(e.inArray(r.keyCode,t.passthru)>=0)return!0;switch(r.keyCode){case 37:n.nudge(-i,0);break;case 38:n.nudge(0,-i);break;case 39:n.nudge(i,0);break;case 40:n.nudge(0,i);break;case 46:case 8:return n.requestDelete(),!1;default:t.debug&&console.log("keycode: "+r.keyCode)}!r.metaKey&&!r.ctrlKey&&r.preventDefault()})}}}),t.registerComponent("Keyboard",b);var w=function(){};e.extend(w,{defaults:{minSize:[8,8],maxSize:[0,0],aspectRatio:0,edge:{n:0,s:0,e:0,w:0},bgColor:null,bgOpacity:null,last:null,state:null,active:!0,linked:!0,canDelete:!0,canDrag:!0,canResize:!0,canSelect:!0},prototype:{init:function(e){this.core=e,this.startup(),this.linked=this.core.opt.linked,this.attach(),this.setOptions(this.core.opt),e.container.trigger("cropcreate",[this])},attach:function(){},startup:function(){var t=this,n=t.core.opt;e.extend(t,w.defaults),t.filter=t.core.getDefaultFilters(),t.element=e("<div />").addClass(n.css_selection).data({selection:t}),t.frame=e("<button />").addClass(n.css_button).data("ord","move"),t.element.append(t.frame).appendTo(t.core.container),t.core.opt.is_msie&&t.frame.css({opacity:0,backgroundColor:"white"}),t.insertElements(),t.frame.on("focus.jcrop",function(e){t.core.setSelection(t),t.element.trigger("cropfocus",t),t.element.addClass("jcrop-focus")}).on("blur.jcrop",function(e){t.element.removeClass("jcrop-focus"),t.element.trigger("cropblur",t)})},propagate:["canDelete","canDrag","canResize","canSelect","minSize","maxSize","aspectRatio","edge"],setOptions:function(e){return t.propagate(this.propagate,e,this),this.refresh(),this},refresh:function(){this.allowResize(),this.allowDrag(),this.allowSelect(),this.callFilterFunction("refresh"),this.updateRaw(this.get(),"se")},callFilterFunction:function(e,t){for(var n=0;n<this.filter.length;n++)this.filter[n][e]&&this.filter[n][e](this);return this},addFilter:function(e){e.core=this.core,this.hasFilter(e)||(this.filter.push(e),this.sortFilters(),e.init&&e.init(),this.refresh())},hasFilter:function(e){var t,n=this.filter,r=[];for(t=0;t<n.length;t++)if(n[t]===e)return!0},sortFilters:function(){this.filter.sort(function(e,t){return e.priority-t.priority})},clearFilters:function(){var e,t=this.filter;for(var e=0;e<t.length;e++)t[e].destroy&&t[e].destroy();this.filter=[]},removeFilter:function(e){var t,n=this.filter,r=[];for(var t=0;t<n.length;t++)n[t].tag&&n[t].tag==e||e===n[t]?n[t].destroy&&n[t].destroy():r.push(n[t]);this.filter=r},runFilters:function(e,t){for(var n=0;n<this.filter.length;n++)e=this.filter[n].filter(e,t,this);return e},endDrag:function(){this.state&&(e(document.body).off(".jcrop"),this.focus(),this.state=null)},startDrag:function(n,r){var i=this,s=i.core;return r=r||e(n.target).data("ord"),this.focus(),r=="move"&&i.element.hasClass(i.core.opt.css_nodrag)?!1:(this.state=new t.component.DragState(n,this,r),!1)},allowSelect:function(e){return e===undefined&&(e=this.canSelect),e&&this.canSelect?this.frame.attr("disabled",!1):this.frame.attr("disabled","disabled"),this},allowDrag:function(e){var t=this,n=t.core.opt;return e==undefined&&(e=t.canDrag),e&&t.canDrag?t.element.removeClass(n.css_nodrag):t.element.addClass(n.css_nodrag),this},allowResize:function(e){var t=this,n=t.core.opt;return e==undefined&&(e=t.canResize),e&&t.canResize?t.element.removeClass(n.css_noresize):t.element.addClass(n.css_noresize),this},remove:function(){this.element.trigger("cropremove",this),this.element.remove()},toBack:function(){this.active=!1,this.element.removeClass("jcrop-current jcrop-focus")},toFront:function(){this.active=!0,this.element.addClass("jcrop-current"),this.callFilterFunction("refresh"),this.refresh()},redraw:function(e){return this.moveTo(e.x,e.y),this.resize(e.w,e.h),this.last=e,this},update:function(e,t){return this.updateRaw(this.core.scale(e),t)},updateRaw:function(e,t){return e=this.runFilters(e,t),this.redraw(e),this.element.trigger("cropmove",[this,this.core.unscale(e)]),this},animateTo:function(e,n){var r=new t.component.Animator(this),i=this.core.scale(t.wrapFromXywh(e));r.animate(i.x,i.y,i.w,i.h,n)},center:function(e){var t=this.get(),n=this.core,r=n.container.width(),i=n.container.height(),s=[(r-t.w)/2,(i-t.h)/2,t.w,t.h];return this[e?"setSelect":"animateTo"](s)},createElement:function(t,n){return e("<div />").addClass(t+" ord-"+n).data("ord",n)},moveTo:function(e,t){this.element.css({top:t+"px",left:e+"px"})},blur:function(){return this.element.blur(),this},focus:function(){return this.core.setSelection(this),this.frame.focus(),this},resize:function(e,t){this.element.css({width:e+"px",height:t+"px"})},get:function(){var e=this.element,t=e.position(),n=e.width(),r=e.height(),i={x:t.left,y:t.top};return i.x2=i.x+n,i.y2=i.y+r,i.w=n,i.h=r,i},insertElements:function(){var e=this,t,n=e.core,r=e.element,i=e.core.opt,s=i.borders,o=i.handles,u=i.dragbars;for(t=0;t<u.length;t++)r.append(e.createElement(i.css_dragbars,u[t]));for(t=0;t<o.length;t++)r.append(e.createElement(i.css_handles,o[t]));for(t=0;t<s.length;t++)r.append(e.createElement(i.css_borders,s[t]))}}}),t.registerComponent("Selection",w);var E=function(t,n){e.extend(this,E.defaults,n||{}),this.manager=t,this.core=t.core};E.defaults={offset:[-8,-8],active:!0,minsize:[20,20]},e.extend(E.prototype,{start:function(n){var r=this.core;if(!r.opt.allowSelect)return;if(r.opt.multi&&r.opt.multiMax&&r.ui.multi.length>=r.opt.multiMax)return!1;var i=e(n.currentTarget).offset(),s=n.pageX-i.left+this.offset[0],o=n.pageY-i.top+this.offset[1],u=r.ui.multi;if(!r.opt.multi)if(r.opt.multiCleanup){for(var a=0;a<u.length;a++)u[a].remove();r.ui.multi=[]}else r.removeSelection(r.ui.selection);r.container.addClass("jcrop-dragging");var f=r.newSelection().updateRaw(t.wrapFromXywh([s,o,1,1]));return f.element.trigger("cropstart",[f,this.core.unscale(f.get())]),f.startDrag(n,"se")},end:function(e,t){this.drag(e,t);var n=this.sel.get();this.core.container.removeClass("jcrop-dragging"),n.w<this.minsize[0]||n.h<this.minsize[1]?this.core.requestDelete():this.sel.focus()}}),t.registerComponent("StageDrag",E);var S=function(e){this.core=e,this.ui=e.ui,this.init()};e.extend(S.prototype,{init:function(){this.setupEvents(),this.dragger=new E(this)},tellConfigUpdate:function(e){for(var t=0,n=this.ui.multi,r=n.length;t<r;t++)n[t].setOptions&&(n[t].linked||this.core.opt.linkCurrent&&n[t]==this.ui.selection)&&n[t].setOptions(e)},startDragHandler:function(){var e=this;return function(t){if(!t.button||e.core.opt.is_ie_lt9)return e.dragger.start(t)}},removeEvents:function(){this.core.event.off(".jcrop-stage"),this.core.container.off(".jcrop-stage")},shimLegacyHandlers:function(t){var n={},r=this.core,i;e.each(r.opt.legacyHandlers,function(e,n){e in t&&(i=t[e],r.container.off(".jcrop-"+e).on(n+".jcrop.jcrop-"+e,function(e,t,n){i.call(r,n)}),delete t[e])})},setupEvents:function(){var e=this,t=e.core;t.event.on("configupdate.jcrop-stage",function(n){e.shimLegacyHandlers(t.opt),e.tellConfigUpdate(t.opt),t.container.trigger("cropconfig",[t,t.opt])}),this.core.container.on("mousedown.jcrop.jcrop-stage",this.startDragHandler())}}),t.registerComponent("StageManager",S);var x=function(){};e.extend(x,{defaults:{selection:null,fading:!0,fadeDelay:1e3,fadeDuration:1e3,autoHide:!1,width:80,height:80,_hiding:null},prototype:{recopyCanvas:function(){var e=this.core.ui.stage,t=e.context;this.context.putImageData(t.getImageData(0,0,e.canvas.width,e.canvas.height),0,0)},init:function(t,n){var r=this;this.core=t,e.extend(this,x.defaults,n),r.initEvents(),r.refresh(),r.insertElements(),r.selection?(r.renderSelection(r.selection),r.selectionTarget=r.selection.element[0]):r.core.ui.selection&&r.renderSelection(r.core.ui.selection),r.core.ui.stage.canvas&&(r.context=r.preview[0].getContext("2d"),r.core.container.on("cropredraw",function(e){r.recopyCanvas(),r.refresh()}))},updateImage:function(t){return this.preview.remove(),this.preview=e(e.Jcrop.imageClone(t)),this.element.append(this.preview),this.refresh(),this},insertElements:function(){this.preview=e(e.Jcrop.imageClone(this.core.ui.stage.imgsrc)),this.element=e("<div />").addClass("jcrop-thumb").width(this.width).height(this.height).append(this.preview).appendTo(this.core.container)},resize:function(e,t){this.width=e,this.height=t,this.element.width(e).height(t),this.renderCoords(this.last)},refresh:function(){this.cw=this.core.opt.xscale*this.core.container.width(),this.ch=this.core.opt.yscale*this.core.container.height(),this.last&&this.renderCoords(this.last)},renderCoords:function(e){var t=this.width/e.w,n=this.height/e.h;return this.preview.css({width:Math.round(t*this.cw)+"px",height:Math.round(n*this.ch)+"px",marginLeft:"-"+Math.round(t*e.x)+"px",marginTop:"-"+Math.round(n*e.y)+"px"}),this.last=e,this},renderSelection:function(e){return this.renderCoords(e.core.unscale(e.get()))},selectionStart:function(e){this.renderSelection(e)},show:function(){this._hiding&&clearTimeout(this._hiding),this.fading?this.element.stop().animate({opacity:1},{duration:80,queue:!1}):this.element.stop().css({opacity:1})},hide:function(){var e=this;e.fading?e._hiding=setTimeout(function(){e._hiding=null,e.element.stop().animate({opacity:0},{duration:e.fadeDuration,queue:!1})},e.fadeDelay):e.element.hide()},initEvents:function(){var e=this;e.core.container.on("croprotstart croprotend cropimage cropstart cropmove cropend",function(t,n,r){if(e.selectionTarget&&e.selectionTarget!==t.target)return!1;switch(t.type){case"cropimage":e.updateImage(r);break;case"cropstart":e.selectionStart(n);case"croprotstart":e.show();break;case"cropend":e.renderCoords(r);case"croprotend":e.autoHide&&e.hide();break;case"cropmove":e.renderCoords(r)}})}}}),t.registerComponent("Thumbnailer",x);var T=function(){};T.prototype={init:function(t,n,r){var i=this;n||(n=t.container),this.$btn=e(n),this.$targ=e(n),this.core=t,this.$btn.addClass("dialdrag").on("mousedown.dialdrag",this.mousedown()).data("dialdrag",this),e.isFunction(r)||(r=function(){}),this.callback=r,this.ondone=r},remove:function(){return this.$btn.removeClass("dialdrag").off(".dialdrag").data("dialdrag",null),this},setTarget:function(t){return this.$targ=e(t),this},getOffset:function(){var e=this.$targ,t=e.offset();return[t.left+e.width()/2,t.top+e.height()/2]},relMouse:function(e){var t=e.pageX-this.offset[0],n=e.pageY-this.offset[1],r=Math.atan2(n,t)*(180/Math.PI),i=Math.sqrt(Math.pow(t,2)+Math.pow(n,2));return[t,n,r,i]},mousedown:function(){function n(n){e(window).off(".dialdrag"),t.ondone.call(t,t.relMouse(n)),t.core.container.trigger("croprotend")}function r(e){t.callback.call(t,t.relMouse(e))}var t=this;return function(i){t.offset=t.getOffset();var s=t.relMouse(i);return t.angleOffset=-t.core.ui.stage.angle+s[2],t.distOffset=s[3],t.dragOffset=[s[0],s[1]],t.core.container.trigger("croprotstart"),e(window).on("mousemove.dialdrag",r).on("mouseup.dialdrag",n),t.callback.call(t,t.relMouse(i)),!1}}},t.registerComponent("DialDrag",T),t.defaults={edge:{n:0,s:0,e:0,w:0},setSelect:null,linked:!0,linkCurrent:!0,canDelete:!0,canSelect:!0,canDrag:!0,canResize:!0,eventManagerComponent:t.component.EventManager,keyboardComponent:t.component.Keyboard,dragstateComponent:t.component.DragState,stagemanagerComponent:t.component.StageManager,animatorComponent:t.component.Animator,selectionComponent:t.component.Selection,stageConstructor:t.stageConstructor,allowSelect:!0,multi:!1,multiMax:!1,multiCleanup:!0,animation:!0,animEasing:"swing",animDuration:400,fading:!0,fadeDuration:300,fadeEasing:"swing",bgColor:"black",bgOpacity:.5,applyFilters:["constrain","extent","backoff","ratio","shader","round"],borders:["e","w","s","n"],handles:["n","s","e","w","sw","ne","nw","se"],dragbars:["n","e","w","s"],dragEventTarget:window,xscale:1,yscale:1,boxWidth:null,boxHeight:null,css_nodrag:"jcrop-nodrag",css_drag:"jcrop-drag",css_container:"jcrop-active",css_shades:"jcrop-shades",css_selection:"jcrop-selection",css_borders:"jcrop-border",css_handles:"jcrop-handle jcrop-drag",css_button:"jcrop-box jcrop-drag",css_noresize:"jcrop-noresize",css_dragbars:"jcrop-dragbar jcrop-drag",legacyHandlers:{onChange:"cropmove",onSelect:"cropend"}},e.extend(t.prototype,{init:function(){this.event=new this.opt.eventManagerComponent(this),this.ui.keyboard=new this.opt.keyboardComponent(this),this.ui.manager=new this.opt.stagemanagerComponent(this),this.applyFilters(),e.Jcrop.supportsTouch&&new e.Jcrop.component.Touch(this),this.initEvents()},applySizeConstraints:function(){var n=this.opt,r=this.opt.imgsrc;if(r){var i=r.naturalWidth||r.width,s=r.naturalHeight||r.height,o=n.boxWidth||i,u=n.boxHeight||s;if(r&&(i>o||s>u)){var a=t.getLargestBox(i/s,o,u);e(r).width(a[0]).height(a[1]),this.resizeContainer(a[0],a[1]),this.opt.xscale=i/a[0],this.opt.yscale=s/a[1]}}if(this.opt.trueSize){var f=this.opt.trueSize[0],l=this.opt.trueSize[1],c=this.getContainerSize();this.opt.xscale=f/c[0],this.opt.yscale=l/c[1]}},initComponent:function(e){if(t.component[e]){var n=Array.prototype.slice.call(arguments),r=new t.component[e];return n.shift(),n.unshift(this),r.init.apply(r,n),r}},setOptions:function(n,r){return e.isPlainObject(n)||(n={}),e.extend(this.opt,n),this.opt.setSelect&&(this.ui.multi.length||this.newSelection(),this.ui.multi[0].update(t.wrapFromXywh(this.opt.setSelect)),this.opt.setSelect=null),this.event.trigger("configupdate"),this},destroy:function(){this.opt.imgsrc?(this.container.before(this.opt.imgsrc),this.container.remove(),e(this.opt.imgsrc).removeData("Jcrop")):this.container.remove()},applyFilters:function(){var t;for(var n=0,r=this.opt.applyFilters,i=r.length;n<i;n++)e.Jcrop.filter[r[n]]&&(t=new e.Jcrop.filter[r[n]]),t.core=this,t.init&&t.init(),this.filter[r[n]]=t},getDefaultFilters:function(){var e=[];for(var t=0,n=this.opt.applyFilters,r=n.length;t<r;t++)this.filter.hasOwnProperty(n[t])&&e.push(this.filter[n[t]]);return e.sort(function(e,t){return e.priority-t.priority}),e},setSelection:function(e){var t=this.ui.multi,n=[];for(var r=0;r<t.length;r++)t[r]!==e&&n.push(t[r]),t[r].toBack();return n.unshift(e),this.ui.multi=n,this.ui.selection=e,e.toFront(),e},getSelection:function(e){var t=this.ui.selection.get();return t},newSelection:function(e){return e||(e=new this.opt.selectionComponent),e.init(this),this.setSelection(e),e},hasSelection:function(e){for(var t=0;t<this.ui.multi;t++)if(e===this.ui.multi[t])return!0},removeSelection:function(e){var t,n=[],r=this.ui.multi;for(var t=0;t<r.length;t++)e!==r[t]?n.push(r[t]):r[t].remove();return this.ui.multi=n},addFilter:function(e){for(var t=0,n=this.ui.multi,r=n.length;t<r;t++)n[t].addFilter(e);return this},removeFilter:function(e){for(var t=0,n=this.ui.multi,r=n.length;t<r;t++)n[t].removeFilter(e);return this},blur:function(){return this.ui.selection.blur(),this},focus:function(){return this.ui.selection.focus(),this},initEvents:function(){var e=this;e.container.on("selectstart",function(e){return!1}).on("mousedown","."+e.opt.css_drag,e.startDrag())},maxSelect:function(){this.setSelect([0,0,this.elw,this.elh])},nudge:function(e,t){var n=this.ui.selection,r=n.get();r.x+=e,r.x2+=e,r.y+=t,r.y2+=t,r.x<0?(r.x2=r.w,r.x=0):r.x2>this.elw&&(r.x2=this.elw,r.x=r.x2-r.w),r.y<0?(r.y2=r.h,r.y=0):r.y2>this.elh&&(r.y2=this.elh,r.y=r.y2-r.h),n.element.trigger("cropstart",[n,this.unscale(r)]),n.updateRaw(r,"move"),n.element.trigger("cropend",[n,this.unscale(r)])},refresh:function(){for(var e=0,t=this.ui.multi,n=t.length;e<n;e++)t[e].refresh()},blurAll:function(){var e=this.ui.multi;for(var t=0;t<e.length;t++)e[t]!==sel&&n.push(e[t]),e[t].toBack()},scale:function(e){var t=this.opt.xscale,n=this.opt.yscale;return{x:e.x/t,y:e.y/n,x2:e.x2/t,y2:e.y2/n,w:e.w/t,h:e.h/n}},unscale:function(e){var t=this.opt.xscale,n=this.opt.yscale;return{x:e.x*t,y:e.y*n,x2:e.x2*t,y2:e.y2*n,w:e.w*t,h:e.h*n}},requestDelete:function(){if(this.ui.multi.length>1&&this.ui.selection.canDelete)return this.deleteSelection()},deleteSelection:function(){this.ui.selection&&(this.removeSelection(this.ui.selection),this.ui.multi[0].focus(),this.ui.selection.refresh())},animateTo:function(e){return this.ui.selection&&this.ui.selection.animateTo(e),this},setSelect:function(e){return this.ui.selection&&this.ui.selection.update(t.wrapFromXywh(e)),this},startDrag:function(){var t=this;return function(n){var r=e(n.target),i=r.closest("."+t.opt.css_selection).data("selection"),s=r.data("ord");return t.container.trigger("cropstart",[i,t.unscale(i.get())]),i.startDrag(n,s),!1}},getContainerSize:function(){return[this.container.width(),this.container.height()]},resizeContainer:function(e,t){this.container.width(e).height(t),this.refresh()},setImage:function(t,n){var r=this,i=r.opt.imgsrc;if(!i)return!1;new e.Jcrop.component.ImageLoader(t,null,function(s,o){r.resizeContainer(s,o),i.src=t,e(i).width(s).height(o),r.applySizeConstraints(),r.refresh(),r.container.trigger("cropimage",[r,i]),typeof n=="function"&&n.call(r,s,o)})},update:function(e){this.ui.selection&&this.ui.selection.update(e)}}),e.fn.Jcrop=function(t,n){var r=this.eq(0).data("Jcrop"),i=Array.prototype.slice.call(arguments);if(t=="api")return r;if(r&&typeof t=="string")return r[t]?(i.shift(),r[t].apply(r,i),r):!1;this.each(function(){var r=this,i=e(this),s=i.data("Jcrop"),o;return s?s.setOptions(t):(t.stageConstructor||(t.stageConstructor=e.Jcrop.stageConstructor),t.stageConstructor(this,t,function(t,r){var s=e.Jcrop.attach(t.element,r);typeof t.attach=="function"&&t.attach(s),i.data("Jcrop",s),typeof n=="function"&&n.call(s)})),this})};var N=function(e,t,n){function C(e){a.cssText=e}function k(e,t){return C(c.join(e+";")+(t||""))}function L(e,t){return typeof e===t}function A(e,t){return!!~(""+e).indexOf(t)}function O(e,t){for(var r in e){var i=e[r];if(!A(i,"-")&&a[i]!==n)return t=="pfx"?i:!0}return!1}function M(e,t,r){for(var i in e){var s=t[e[i]];if(s!==n)return r===!1?e[i]:L(s,"function")?s.bind(r||t):s}return!1}function _(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),i=(e+" "+p.join(r+" ")+r).split(" ");return L(t,"string")||L(t,"undefined")?O(i,t):(i=(e+" "+d.join(r+" ")+r).split(" "),M(i,t,n))}var r="2.7.1",i={},s=t.documentElement,o="modernizr",u=t.createElement(o),a=u.style,f,l={}.toString,c=" -webkit- -moz- -o- -ms- ".split(" "),h="Webkit Moz O ms",p=h.split(" "),d=h.toLowerCase().split(" "),v={svg:"http://www.w3.org/2000/svg"},m={},g={},y={},b=[],w=b.slice,E,S=function(e,n,r,i){var u,a,f,l,c=t.createElement("div"),h=t.body,p=h||t.createElement("body");if(parseInt(r,10))while(r--)f=t.createElement("div"),f.id=i?i[r]:o+(r+1),c.appendChild(f);return u=["&#173;",'<style id="s',o,'">',e,"</style>"].join(""),c.id=o,(h?c:p).innerHTML+=u,p.appendChild(c),h||(p.style.background="",p.style.overflow="hidden",l=s.style.overflow,s.style.overflow="hidden",s.appendChild(p)),a=n(c,e),h?c.parentNode.removeChild(c):(p.parentNode.removeChild(p),s.style.overflow=l),!!a},x=function(){function r(r,i){i=i||t.createElement(e[r]||"div"),r="on"+r;var s=r in i;return s||(i.setAttribute||(i=t.createElement("div")),i.setAttribute&&i.removeAttribute&&(i.setAttribute(r,""),s=L(i[r],"function"),L(i[r],"undefined")||(i[r]=n),i.removeAttribute(r))),i=null,s}var e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return r}(),T={}.hasOwnProperty,N;!L(T,"undefined")&&!L(T.call,"undefined")?N=function(e,t){return T.call(e,t)}:N=function(e,t){return t in e&&L(e.constructor.prototype[t],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(t){var n=this;if(typeof n!="function")throw new TypeError;var r=w.call(arguments,1),i=function(){if(this instanceof i){var e=function(){};e.prototype=n.prototype;var s=new e,o=n.apply(s,r.concat(w.call(arguments)));return Object(o)===o?o:s}return n.apply(t,r.concat(w.call(arguments)))};return i}),m.canvas=function(){var e=t.createElement("canvas");return!!e.getContext&&!!e.getContext("2d")},m.canvastext=function(){return!!i.canvas&&!!L(t.createElement("canvas").getContext("2d").fillText,"function")},m.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:S(["@media (",c.join("touch-enabled),("),o,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=e.offsetTop===9}),n},m.draganddrop=function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},m.csstransforms=function(){return!!_("transform")},m.svg=function(){return!!t.createElementNS&&!!t.createElementNS(v.svg,"svg").createSVGRect},m.inlinesvg=function(){var e=t.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==v.svg},m.svgclippaths=function(){return!!t.createElementNS&&/SVGClipPath/.test(l.call(t.createElementNS(v.svg,"clipPath")))};for(var D in m)N(m,D)&&(E=D.toLowerCase(),i[E]=m[D](),b.push((i[E]?"":"no-")+E));return i.addTest=function(e,t){if(typeof e=="object")for(var r in e)N(e,r)&&i.addTest(r,e[r]);else{e=e.toLowerCase();if(i[e]!==n)return i;t=typeof t=="function"?t():t,typeof enableClasses!="undefined"&&enableClasses&&(s.className+=" "+(t?"":"no-")+e),i[e]=t}return i},C(""),u=f=null,i._version=r,i._prefixes=c,i._domPrefixes=d,i._cssomPrefixes=p,i.hasEvent=x,i.testProp=function(e){return O([e])},i.testAllProps=_,i.testStyles=S,i}(window,window.document);(function(){var e=new Image;e.onerror=function(){N.addTest("datauri",function(){return!1})},e.onload=function(){N.addTest("datauri",function(){return e.width==1&&e.height==1})},e.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="})(),e.Jcrop=t,e.Jcrop.supportsCanvas=N.canvas,e.Jcrop.supportsCanvasText=N.canvastext,e.Jcrop.supportsDragAndDrop=N.draganddrop,e.Jcrop.supportsDataURI=N.datauri,e.Jcrop.supportsSVG=N.svg,e.Jcrop.supportsInlineSVG=N.inlinesvg,e.Jcrop.supportsSVGClipPaths=N.svgclippaths,e.Jcrop.supportsCSSTransforms=N.csstransforms,e.Jcrop.supportsTouch=N.touch}(jQuery),function(e){typeof define=="function"&&define.amd?define(["jquery"],e):typeof exports=="object"?e(require("jquery")):e(jQuery)}(function(e,t){function n(e,t,n,r){return e.selector==t.selector&&e.context==t.context&&(!n||n.$lqguid==t.fn.$lqguid)&&(!r||r.$lqguid==t.fn2.$lqguid)}e.extend(e.fn,{livequery:function(t,i){var s=this,o;return e.each(r.queries,function(e,r){if(n(s,r,t,i))return(o=r)&&!1}),o=o||new r(s.selector,s.context,t,i),o.stopped=!1,o.run(),s},expire:function(t,i){var s=this;return e.each(r.queries,function(e,o){n(s,o,t,i)&&!s.stopped&&r.stop(o.id)}),s}});var r=e.livequery=function(t,n,i,s){var o=this;return o.selector=t,o.context=n,o.fn=i,o.fn2=s,o.elements=e([]),o.stopped=!1,o.id=r.queries.push(o)-1,i.$lqguid=i.$lqguid||r.guid++,s&&(s.$lqguid=s.$lqguid||r.guid++),o};r.prototype={stop:function(){var t=this;if(t.stopped)return;t.fn2&&t.elements.each(t.fn2),t.elements=e([]),t.stopped=!0},run:function(){var t=this;if(t.stopped)return;var n=t.elements,r=e(t.selector,t.context),i=r.not(n),s=n.not(r);t.elements=r,i.each(t.fn),t.fn2&&s.each(t.fn2)}},e.extend(r,{guid:0,queries:[],queue:[],running:!1,timeout:null,registered:[],checkQueue:function(){if(r.running&&r.queue.length){var e=r.queue.length;while(e--)r.queries[r.queue.shift()].run()}},pause:function(){r.running=!1},play:function(){r.running=!0,r.run()},registerPlugin:function(){e.each(arguments,function(t,n){if(!e.fn[n]||e.inArray(n,r.registered)>0)return;var i=e.fn[n];e.fn[n]=function(){var e=i.apply(this,arguments);return r.run(),e},r.registered.push(n)})},run:function(n){n!==t?e.inArray(n,r.queue)<0&&r.queue.push(n):e.each(r.queries,function(t){e.inArray(t,r.queue)<0&&r.queue.push(t)}),r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout(r.checkQueue,20)},stop:function(n){n!==t?r.queries[n].stop():e.each(r.queries,r.prototype.stop)}}),r.registerPlugin("append","prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass","empty","remove","html","prop","removeProp"),e(function(){r.play()})}),function(e,t){var n=/[<>&\r\n"']/gm,r={"<":"lt;",">":"gt;","&":"amp;","\r":"#13;","\n":"#10;",'"':"quot;","'":"#39;"};e.extend({fileDownload:function(i,s){function E(){var t=o.cookieValue;typeof t=="string"&&(t=t.toLowerCase());var n=o.cookieName.toLowerCase()+"="+t;if(document.cookie.toLowerCase().indexOf(n)>-1){d.onSuccess(i);var r=o.cookieName+"=; path="+o.cookiePath+"; expires="+(new Date(0)).toUTCString()+";";o.cookieDomain&&(r+=" domain="+o.cookieDomain+";"),document.cookie=r,x(!1);return}if(m||v)try{var s=m?m.document:S(v);if(s&&s.body!==null&&s.body.innerHTML.length){var u=!0;if(y&&y.length){var a=e(s.body).contents().first();try{a.length&&a[0]===y[0]&&(u=!1)}catch(f){if(!f||f.number!=-2146828218)throw f;u=!0}}if(u){setTimeout(function(){d.onFail(s.body.innerHTML,i),x(!0)},100);return}}}catch(l){d.onFail("",i,l),x(!0);return}setTimeout(E,o.checkInterval)}function S(e){var t=e[0].contentWindow||e[0].contentDocument;return t.document&&(t=t.document),t}function x(e){setTimeout(function(){m&&(l&&m.close(),f&&m.focus&&(m.focus(),e&&m.close()))},0)}function T(e){return e.replace(n,function(e){return"&"+r[e]})}var o=e.extend({preparingMessageHtml:null,failMessageHtml:null,androidPostUnsupportedMessageHtml:"Unfortunately your Android browser doesn't support this type of file download. Please try again with a different browser.",dialogOptions:{modal:!0},prepareCallback:function(e){},successCallback:function(e){},failCallback:function(e,t,n){},httpMethod:"GET",data:null,checkInterval:100,cookieName:"fileDownload",cookieValue:"true",cookiePath:"/",cookieDomain:null,popupWindowTitle:"Initiating file download...",encodeHTMLEntities:!0},s),u=new e.Deferred,a=(navigator.userAgent||navigator.vendor||t.opera).toLowerCase(),f,l,c;/ip(ad|hone|od)/.test(a)?f=!0:a.indexOf("android")!==-1?l=!0:c=/avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|playbook|silk|iemobile|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i
.test(a.substr(0,4));var h=o.httpMethod.toUpperCase();if(l&&h!=="GET"&&o.androidPostUnsupportedMessageHtml)return e().dialog?e("<div>").html(o.androidPostUnsupportedMessageHtml).dialog(o.dialogOptions):alert(o.androidPostUnsupportedMessageHtml),u.reject();var p=null,d={onPrepare:function(t){o.preparingMessageHtml?p=e("<div>").html(o.preparingMessageHtml).dialog(o.dialogOptions):o.prepareCallback&&o.prepareCallback(t)},onSuccess:function(e){p&&p.dialog("close"),o.successCallback(e),u.resolve(e)},onFail:function(t,n,r){p&&p.dialog("close"),o.failMessageHtml&&e("<div>").html(o.failMessageHtml).dialog(o.dialogOptions),o.failCallback(t,n,r),u.reject(t,n)}};d.onPrepare(i),o.data!==null&&typeof o.data!="string"&&(o.data=e.param(o.data));var v,m,g,y;if(h==="GET"){if(o.data!==null){var b=i.indexOf("?");b!==-1?i.substring(i.length-1)!=="&"&&(i+="&"):i+="?",i+=o.data}f||l?(m=t.open(i),m.document.title=o.popupWindowTitle,t.focus()):c?t.location(i):v=e("<iframe>").hide().prop("src",i).appendTo("body")}else{var w="";o.data!==null&&e.each(o.data.replace(/\+/g," ").split("&"),function(){var e=this.split("="),t=e[0];e.shift();var n=e.join("=");e=[t,n];var r=o.encodeHTMLEntities?T(decodeURIComponent(e[0])):decodeURIComponent(e[0]);if(r){var i=o.encodeHTMLEntities?T(decodeURIComponent(e[1])):decodeURIComponent(e[1]);w+='<input type="hidden" name="'+r+'" value="'+i+'" />'}}),c?(y=e("<form>").appendTo("body"),y.hide().prop("method",o.httpMethod).prop("action",i).html(w)):(f?(m=t.open("about:blank"),m.document.title=o.popupWindowTitle,g=m.document,t.focus()):(v=e("<iframe style='display: none' src='about:blank'></iframe>").appendTo("body"),g=S(v)),g.write("<html><head></head><body><form method='"+o.httpMethod+"' action='"+i+"'>"+w+"</form>"+o.popupWindowTitle+"</body></html>"),y=e(g).find("form")),y.submit()}setTimeout(E,o.checkInterval);var N=u.promise();return N.abort=function(){x(),v.remove()},N}})}(jQuery,this),function(e){typeof define=="function"&&define.amd?define(["jquery"],e):typeof module=="object"&&module.exports?e(require("jquery")):e(jQuery)}(function(e){function f(t){var n={},r=/^jQuery\d+$/;return e.each(t.attributes,function(e,t){t.specified&&!r.test(t.name)&&(n[t.name]=t.value)}),n}function l(t,n){var r=this,i=e(r);if(r.value==i.attr("placeholder")&&i.hasClass(a.customClass))if(i.data("placeholder-password")){i=i.hide().nextAll('input[type="password"]:first').show().attr("id",i.removeAttr("id").data("placeholder-id"));if(t===!0)return i[0].value=n;i.focus()}else r.value="",i.removeClass(a.customClass),r==h()&&r.select()}function c(){var t,n=this,r=e(n),i=this.id;if(n.value===""){if(n.type==="password"){if(!r.data("placeholder-textinput")){try{t=r.clone().prop({type:"text"})}catch(s){t=e("<input>").attr(e.extend(f(this),{type:"text"}))}t.removeAttr("name").data({"placeholder-password":r,"placeholder-id":i}).bind("focus.placeholder",l),r.data({"placeholder-textinput":t,"placeholder-id":i}).before(t)}r=r.removeAttr("id").hide().prevAll('input[type="text"]:first').attr("id",i).show()}r.addClass(a.customClass),r[0].value=r.attr("placeholder")}else r.removeClass(a.customClass)}function h(){try{return document.activeElement}catch(e){}}var t=Object.prototype.toString.call(window.operamini)=="[object OperaMini]",n="placeholder"in document.createElement("input")&&!t,r="placeholder"in document.createElement("textarea")&&!t,i=e.valHooks,s=e.propHooks,o,u;if(n&&r)u=e.fn.placeholder=function(){return this},u.input=u.textarea=!0;else{var a={};u=e.fn.placeholder=function(t){var r={customClass:"placeholder"};a=e.extend({},r,t);var i=this;return i.filter((n?"textarea":":input")+"[placeholder]").not("."+a.customClass).bind({"focus.placeholder":l,"blur.placeholder":c}).data("placeholder-enabled",!0).trigger("blur.placeholder"),i},u.input=n,u.textarea=r,o={get:function(t){var n=e(t),r=n.data("placeholder-password");return r?r[0].value:n.data("placeholder-enabled")&&n.hasClass(a.customClass)?"":t.value},set:function(t,n){var r=e(t),i=r.data("placeholder-password");return i?i[0].value=n:r.data("placeholder-enabled")?(n===""?(t.value=n,t!=h()&&c.call(t)):r.hasClass(a.customClass)?l.call(t,!0,n)||(t.value=n):t.value=n,r):t.value=n}},n||(i.input=o,s.value=o),r||(i.textarea=o,s.value=o),e(function(){e(document).delegate("form","submit.placeholder",function(){var t=e("."+a.customClass,this).each(l);setTimeout(function(){t.each(c)},10)})}),e(window).bind("beforeunload.placeholder",function(){e("."+a.customClass).each(function(){this.value=""})})}}),jQuery.fn.extend({insertAtCursor:function(e){return this.each(function(t){if(document.selection)this.focus(),sel=document.selection.createRange(),sel.text=e,this.focus();else if(this.selectionStart||this.selectionStart=="0"){var n=this.selectionStart,r=this.selectionEnd,i=this.scrollTop;this.value=this.value.substring(0,n)+e+this.value.substring(r,this.value.length),this.focus(),this.selectionStart=n+e.length,this.selectionEnd=n+e.length,this.scrollTop=i}else this.value+=e,this.focus()})},insertAroundCursor:function(e,t){return this.each(function(n){if(document.selection)this.focus(),sel=document.selection.createRange(),sel.text=e+sel.text+t,this.focus();else if(this.selectionStart||this.selectionStart=="0"){var r=this.selectionStart,i=this.selectionEnd,s=this.scrollTop;this.value=this.value.substring(0,r)+e+this.value.substring(r,i)+t+this.value.substring(i,this.value.length),this.focus(),this.selectionStart=r+e.length,this.selectionEnd=i+e.length,this.scrollTop=s}else this.value+=e+t,this.focus()})},selectRange:function(e,t){return this.each(function(n){if(this.setSelectionRange)this.focus(),this.setSelectionRange(e,t);else if(this.createTextRange){var r=this.createTextRange();r.collapse(!0),r.moveEnd("character",t),r.moveStart("character",e),r.select()}})}}),function(e){typeof define=="function"&&define.amd?define(["jquery"],e):e(typeof jQuery!="undefined"?jQuery:window.Zepto)}(function(e){"use strict";function r(t){var n=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(t.target).ajaxSubmit(n))}function i(t){var n=t.target,r=e(n);if(!r.is("[type=submit],[type=image]")){var i=r.closest("[type=submit]");if(i.length===0)return;n=i[0]}var s=this;s.clk=n;if(n.type=="image")if(t.offsetX!==undefined)s.clk_x=t.offsetX,s.clk_y=t.offsetY;else if(typeof e.fn.offset=="function"){var o=r.offset();s.clk_x=t.pageX-o.left,s.clk_y=t.pageY-o.top}else s.clk_x=t.pageX-n.offsetLeft,s.clk_y=t.pageY-n.offsetTop;setTimeout(function(){s.clk=s.clk_x=s.clk_y=null},100)}function s(){if(!e.fn.ajaxSubmit.debug)return;var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}var t={};t.fileapi=e("<input type='file'/>").get(0).files!==undefined,t.formdata=window.FormData!==undefined;var n=!!e.fn.prop;e.fn.attr2=function(){if(!n)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||typeof e=="string"?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(r){function k(t){var n=e.param(t,r.traditional).split("&"),i=n.length,s=[],o,u;for(o=0;o<i;o++)n[o]=n[o].replace(/\+/g," "),u=n[o].split("="),s.push([decodeURIComponent(u[0]),decodeURIComponent(u[1])]);return s}function L(t){var n=new FormData;for(var s=0;s<t.length;s++)n.append(t[s].name,t[s].value);if(r.extraData){var o=k(r.extraData);for(s=0;s<o.length;s++)o[s]&&n.append(o[s][0],o[s][1])}r.data=null;var u=e.extend(!0,{},e.ajaxSettings,r,{contentType:!1,processData:!1,cache:!1,type:i||"POST"});r.uploadProgress&&(u.xhr=function(){var t=e.ajaxSettings.xhr();return t.upload&&t.upload.addEventListener("progress",function(e){var t=0,n=e.loaded||e.position,i=e.total;e.lengthComputable&&(t=Math.ceil(n/i*100)),r.uploadProgress(e,n,i,t)},!1),t}),u.data=null;var a=u.beforeSend;return u.beforeSend=function(e,t){r.formData?t.data=r.formData:t.data=n,a&&a.call(this,e,t)},e.ajax(u)}function A(t){function T(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(n){s("cannot get iframe.contentWindow document: "+n)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(n){s("cannot get iframe.contentDocument: "+n),t=e.document}return t}function k(){function r(){try{var e=T(v).readyState;s("state = "+e),e&&e.toLowerCase()=="uninitialized"&&setTimeout(r,50)}catch(t){s("Server abort: ",t," (",t.name,")"),_(x),w&&clearTimeout(w),w=undefined}}var t=a.attr2("target"),n=a.attr2("action");o.setAttribute("target",p),(!i||/post/i.test(i))&&o.setAttribute("method","POST"),n!=l.url&&o.setAttribute("action",l.url),!l.skipEncodingOverride&&(!i||/post/i.test(i))&&a.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),l.timeout&&(w=setTimeout(function(){b=!0,_(S)},l.timeout));var u=[];try{if(l.extraData)for(var f in l.extraData)l.extraData.hasOwnProperty(f)&&(e.isPlainObject(l.extraData[f])&&l.extraData[f].hasOwnProperty("name")&&l.extraData[f].hasOwnProperty("value")?u.push(e('<input type="hidden" name="'+l.extraData[f].name+'">').val(l.extraData[f].value).appendTo(o)[0]):u.push(e('<input type="hidden" name="'+f+'">').val(l.extraData[f]).appendTo(o)[0]));l.iframeTarget||d.appendTo("body"),v.attachEvent?v.attachEvent("onload",_):v.addEventListener("load",_,!1),setTimeout(r,15);try{o.submit()}catch(c){var h=document.createElement("form").submit;h.apply(o)}}finally{o.setAttribute("action",n),t?o.setAttribute("target",t):a.removeAttr("target"),e(u).remove()}}function _(t){if(m.aborted||M)return;A=T(v),A||(s("cannot access response document"),t=x);if(t===S&&m){m.abort("timeout"),E.reject(m,"timeout");return}if(t==x&&m){m.abort("server abort"),E.reject(m,"error","server abort");return}if(!A||A.location.href==l.iframeSrc)if(!b)return;v.detachEvent?v.detachEvent("onload",_):v.removeEventListener("load",_,!1);var n="success",r;try{if(b)throw"timeout";var i=l.dataType=="xml"||A.XMLDocument||e.isXMLDoc(A);s("isXml="+i);if(!i&&window.opera&&(A.body===null||!A.body.innerHTML)&&--O){s("requeing onLoad callback, DOM not available"),setTimeout(_,250);return}var o=A.body?A.body:A.documentElement;m.responseText=o?o.innerHTML:null,m.responseXML=A.XMLDocument?A.XMLDocument:A,i&&(l.dataType="xml"),m.getResponseHeader=function(e){var t={"content-type":l.dataType};return t[e.toLowerCase()]},o&&(m.status=Number(o.getAttribute("status"))||m.status,m.statusText=o.getAttribute("statusText")||m.statusText);var u=(l.dataType||"").toLowerCase(),a=/(json|script|text)/.test(u);if(a||l.textarea){var f=A.getElementsByTagName("textarea")[0];if(f)m.responseText=f.value,m.status=Number(f.getAttribute("status"))||m.status,m.statusText=f.getAttribute("statusText")||m.statusText;else if(a){var c=A.getElementsByTagName("pre")[0],p=A.getElementsByTagName("body")[0];c?m.responseText=c.textContent?c.textContent:c.innerText:p&&(m.responseText=p.textContent?p.textContent:p.innerText)}}else u=="xml"&&!m.responseXML&&m.responseText&&(m.responseXML=D(m.responseText));try{L=H(m,u,l)}catch(g){n="parsererror",m.error=r=g||n}}catch(g){s("error caught: ",g),n="error",m.error=r=g||n}m.aborted&&(s("upload aborted"),n=null),m.status&&(n=m.status>=200&&m.status<300||m.status===304?"success":"error"),n==="success"?(l.success&&l.success.call(l.context,L,"success",m),E.resolve(m.responseText,"success",m),h&&e.event.trigger("ajaxSuccess",[m,l])):n&&(r===undefined&&(r=m.statusText),l.error&&l.error.call(l.context,m,n,r),E.reject(m,"error",r),h&&e.event.trigger("ajaxError",[m,l,r])),h&&e.event.trigger("ajaxComplete",[m,l]),h&&!--e.active&&e.event.trigger("ajaxStop"),l.complete&&l.complete.call(l.context,m,n),M=!0,l.timeout&&clearTimeout(w),setTimeout(function(){l.iframeTarget?d.attr("src",l.iframeSrc):d.remove(),m.responseXML=null},100)}var o=a[0],u,f,l,h,p,d,v,m,g,y,b,w,E=e.Deferred();E.abort=function(e){m.abort(e)};if(t)for(f=0;f<c.length;f++)u=e(c[f]),n?u.prop("disabled",!1):u.removeAttr("disabled");l=e.extend(!0,{},e.ajaxSettings,r),l.context=l.context||l,p="jqFormIO"+(new Date).getTime(),l.iframeTarget?(d=e(l.iframeTarget),y=d.attr2("name"),y?p=y:d.attr2("name",p)):(d=e('<iframe name="'+p+'" src="'+l.iframeSrc+'" />'),d.css({position:"absolute",top:"-1000px",left:"-1000px"})),v=d[0],m={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var n=t==="timeout"?"timeout":"aborted";s("aborting upload... "+n),this.aborted=1;try{v.contentWindow.document.execCommand&&v.contentWindow.document.execCommand("Stop")}catch(r){}d.attr("src",l.iframeSrc),m.error=n,l.error&&l.error.call(l.context,m,n,t),h&&e.event.trigger("ajaxError",[m,l,n]),l.complete&&l.complete.call(l.context,m,n)}},h=l.global,h&&0===e.active++&&e.event.trigger("ajaxStart"),h&&e.event.trigger("ajaxSend",[m,l]);if(l.beforeSend&&l.beforeSend.call(l.context,m,l)===!1)return l.global&&e.active--,E.reject(),E;if(m.aborted)return E.reject(),E;g=o.clk,g&&(y=g.name,y&&!g.disabled&&(l.extraData=l.extraData||{},l.extraData[y]=g.value,g.type=="image"&&(l.extraData[y+".x"]=o.clk_x,l.extraData[y+".y"]=o.clk_y)));var S=1,x=2,N=e("meta[name=csrf-token]").attr("content"),C=e("meta[name=csrf-param]").attr("content");C&&N&&(l.extraData=l.extraData||{},l.extraData[C]=N),l.forceSync?k():setTimeout(k,10);var L,A,O=50,M,D=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&t.documentElement.nodeName!="parsererror"?t:null},P=e.parseJSON||function(e){return window.eval("("+e+")")},H=function(t,n,r){var i=t.getResponseHeader("content-type")||"",s=n==="xml"||!n&&i.indexOf("xml")>=0,o=s?t.responseXML:t.responseText;return s&&o.documentElement.nodeName==="parsererror"&&e.error&&e.error("parsererror"),r&&r.dataFilter&&(o=r.dataFilter(o,n)),typeof o=="string"&&(n==="json"||!n&&i.indexOf("json")>=0?o=P(o):(n==="script"||!n&&i.indexOf("javascript")>=0)&&e.globalEval(o)),o};return E}if(!this.length)return s("ajaxSubmit: skipping submit process - no element selected"),this;var i,o,u,a=this;typeof r=="function"?r={success:r}:r===undefined&&(r={}),i=r.type||this.attr2("method"),o=r.url||this.attr2("action"),u=typeof o=="string"?e.trim(o):"",u=u||window.location.href||"",u&&(u=(u.match(/^([^#]+)/)||[])[1]),r=e.extend(!0,{url:u,success:e.ajaxSettings.success,type:i||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},r);var f={};this.trigger("form-pre-serialize",[this,r,f]);if(f.veto)return s("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(r.beforeSerialize&&r.beforeSerialize(this,r)===!1)return s("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var l=r.traditional;l===undefined&&(l=e.ajaxSettings.traditional);var c=[],h,p=this.formToArray(r.semantic,c);r.data&&(r.extraData=r.data,h=e.param(r.data,l));if(r.beforeSubmit&&r.beforeSubmit(p,this,r)===!1)return s("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[p,this,r,f]);if(f.veto)return s("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var d=e.param(p,l);h&&(d=d?d+"&"+h:h),r.type.toUpperCase()=="GET"?(r.url+=(r.url.indexOf("?")>=0?"&":"?")+d,r.data=null):r.data=d;var v=[];r.resetForm&&v.push(function(){a.resetForm()}),r.clearForm&&v.push(function(){a.clearForm(r.includeHidden)});if(!r.dataType&&r.target){var m=r.success||function(){};v.push(function(t){var n=r.replaceTarget?"replaceWith":"html";e(r.target)[n](t).each(m,arguments)})}else r.success&&v.push(r.success);r.success=function(e,t,n){var i=r.context||this;for(var s=0,o=v.length;s<o;s++)v[s].apply(i,[e,t,n||a,a])};if(r.error){var g=r.error;r.error=function(e,t,n){var i=r.context||this;g.apply(i,[e,t,n,a])}}if(r.complete){var y=r.complete;r.complete=function(e,t){var n=r.context||this;y.apply(n,[e,t,a])}}var b=e("input[type=file]:enabled",this).filter(function(){return e(this).val()!==""}),w=b.length>0,E="multipart/form-data",S=a.attr("enctype")==E||a.attr("encoding")==E,x=t.fileapi&&t.formdata;s("fileAPI :"+x);var T=(w||S)&&!x,N;r.iframe!==!1&&(r.iframe||T)?r.closeKeepAlive?e.get(r.closeKeepAlive,function(){N=A(p)}):N=A(p):(w||S)&&x?N=L(p):N=e.ajax(r),a.removeData("jqxhr").data("jqxhr",N);for(var C=0;C<c.length;C++)c[C]=null;return this.trigger("form-submit-notify",[this,r]),this},e.fn.ajaxForm=function(t){t=t||{},t.delegation=t.delegation&&e.isFunction(e.fn.on);if(!t.delegation&&this.length===0){var n={s:this.selector,c:this.context};return!e.isReady&&n.s?(s("DOM not ready, queuing ajaxForm"),e(function(){e(n.s,n.c).ajaxForm(t)}),this):(s("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return t.delegation?(e(document).off("submit.form-plugin",this.selector,r).off("click.form-plugin",this.selector,i).on("submit.form-plugin",this.selector,t,r).on("click.form-plugin",this.selector,t,i),this):this.ajaxFormUnbind().bind("submit.form-plugin",t,r).bind("click.form-plugin",t,i)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(n,r){var i=[];if(this.length===0)return i;var s=this[0],o=n?s.getElementsByTagName("*"):s.elements;if(!o)return i;var u,a,f,l,c,h,p;for(u=0,h=o.length;u<h;u++){c=o[u],f=c.name;if(!f||c.disabled)continue;if(n&&s.clk&&c.type=="image"){s.clk==c&&(i.push({name:f,value:e(c).val(),type:c.type}),i.push({name:f+".x",value:s.clk_x},{name:f+".y",value:s.clk_y}));continue}l=e.fieldValue(c,!0);if(l&&l.constructor==Array){r&&r.push(c);for(a=0,p=l.length;a<p;a++)i.push({name:f,value:l[a]})}else if(t.fileapi&&c.type=="file"){r&&r.push(c);var d=c.files;if(d.length)for(a=0;a<d.length;a++)i.push({name:f,value:d[a],type:c.type});else i.push({name:f,value:"",type:c.type})}else l!==null&&typeof l!="undefined"&&(r&&r.push(c),i.push({name:f,value:l,type:c.type,required:c.required}))}if(!n&&s.clk){var v=e(s.clk),m=v[0];f=m.name,f&&!m.disabled&&m.type=="image"&&(i.push({name:f,value:v.val()}),i.push({name:f+".x",value:s.clk_x},{name:f+".y",value:s.clk_y}))}return i},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var n=[];return this.each(function(){var r=this.name;if(!r)return;var i=e.fieldValue(this,t);if(i&&i.constructor==Array)for(var s=0,o=i.length;s<o;s++)n.push({name:r,value:i[s]});else i!==null&&typeof i!="undefined"&&n.push({name:this.name,value:i})}),e.param(n)},e.fn.fieldValue=function(t){for(var n=[],r=0,i=this.length;r<i;r++){var s=this[r],o=e.fieldValue(s,t);if(o===null||typeof o=="undefined"||o.constructor==Array&&!o.length)continue;o.constructor==Array?e.merge(n,o):n.push(o)}return n},e.fieldValue=function(t,n){var r=t.name,i=t.type,s=t.tagName.toLowerCase();n===undefined&&(n=!0);if(n&&(!r||t.disabled||i=="reset"||i=="button"||(i=="checkbox"||i=="radio")&&!t.checked||(i=="submit"||i=="image")&&t.form&&t.form.clk!=t||s=="select"&&t.selectedIndex==-1))return null;if(s=="select"){var o=t.selectedIndex;if(o<0)return null;var u=[],a=t.options,f=i=="select-one",l=f?o+1:a.length;for(var c=f?o:0;c<l;c++){var h=a[c];if(h.selected){var p=h.value;p||(p=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value);if(f)return p;u.push(p)}}return u}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var r=this.type,i=this.tagName.toLowerCase();n.test(r)||i=="textarea"?this.value="":r=="checkbox"||r=="radio"?this.checked=!1:i=="select"?this.selectedIndex=-1:r=="file"?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(t===!0&&/hidden/.test(r)||typeof t=="string"&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return e===undefined&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return t===undefined&&(t=!0),this.each(function(){var n=this.type;if(n=="checkbox"||n=="radio")this.checked=t;else if(this.tagName.toLowerCase()=="option"){var r=e(this).parent("select");t&&r[0]&&r[0].type=="select-one"&&r.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1}),function(e){"use strict";function n(t,n,r,i){function a(e,t){return e-=i,t-=i,e<0||e>=o||t<0||t>=o?!1:s.isDark(e,t)}var s=e(r,n);s.addData(t),s.make(),i=i||0;var o=s.getModuleCount(),u=s.getModuleCount()+2*i,f=function(e,t,n,r){var i=this.isDark,s=1/u;this.isDark=function(o,u){var a=u*s,f=o*s,l=a+s,c=f+s;return i(o,u)&&(e>l||a>n||t>c||f>r)}};this.text=t,this.level=n,this.version=r,this.moduleCount=u,this.isDark=a,this.addBlank=f}function s(e,t,r,i,s){r=Math.max(1,r||1),i=Math.min(40,i||40);for(var o=r;o<=i;o+=1)try{return new n(e,t,o,s)}catch(u){}}function o(e,n,r){var i=r.size,s="bold "+r.mSize*i+"px "+r.fontname,o=t("<canvas/>")[0].getContext("2d");o.font=s;var u=o.measureText(r.label).width,a=r.mSize,f=u/i,l=(1-f)*r.mPosX,c=(1-a)*r.mPosY,h=l+f,p=c+a,d=.01;r.mode===1?e.addBlank(0,c-d,i,p+d):e.addBlank(l-d,c-d,h+d,p+d),n.fillStyle=r.fontcolor,n.font=s,n.fillText(r.label,l*i,c*i+.75*r.mSize*i)}function u(e,t,n){var r=n.size,i=n.image.naturalWidth||1,s=n.image.naturalHeight||1,o=n.mSize,u=o*i/s,a=(1-u)*n.mPosX,f=(1-o)*n.mPosY,l=a+u,c=f+o,h=.01;n.mode===3?e.addBlank(0,f-h,r,c+h):e.addBlank(a-h,f-h,l+h,c+h),t.drawImage(n.image,a*r,f*r,u*r,o*r)}function a(e,n,r){t(r.background).is("img")?n.drawImage(r.background,0,0,r.size,r.size):r.background&&(n.fillStyle=r.background,n.fillRect(r.left,r.top,r.size,r.size));var i=r.mode;i===1||i===2?o(e,n,r):(i===3||i===4)&&u(e,n,r)}function f(e,t,n,r,i,s,o,u){e.isDark(o,u)&&t.rect(r,i,s,s)}function l(e,t,n,r,i,s,o,u,a,f){o?e.moveTo(t+s,n):e.moveTo(t,n),u?(e.lineTo(r-s,n),e.arcTo(r,n,r,i,s)):e.lineTo(r,n),a?(e.lineTo(r,i-s),e.arcTo(r,i,t,i,s)):e.lineTo(r,i),f?(e.lineTo(t+s,i),e.arcTo(t,i,t,n,s)):e.lineTo(t,i),o?(e.lineTo(t,n+s),e.arcTo(t,n,r,n,s)):e.lineTo(t,n)}function c(e,t,n,r,i,s,o,u,a,f){o&&(e.moveTo(t+s,n),e.lineTo(t,n),e.lineTo(t,n+s),e.arcTo(t,n,t+s,n,s)),u&&(e.moveTo(r-s,n),e.lineTo(r,n),e.lineTo(r,n+s),e.arcTo(r,n,r-s,n,s)),a&&(e.moveTo(r-s,i),e.lineTo(r,i),e.lineTo(r,i-s),e.arcTo(r,i,r-s,i,s)),f&&(e.moveTo(t+s,i),e.lineTo(t,i),e.lineTo(t,i-s),e.arcTo(t,i,t+s,i,s))}function h(e,t,n,r,i,s,o,u){var a=e.isDark,f=r+s,h=i+s,p=n.radius*s,d=o-1,v=o+1,m=u-1,g=u+1,y=a(o,u),b=a(d,m),w=a(d,u),E=a(d,g),S=a(o,g),x=a(v,g),T=a(v,u),N=a(v,m),C=a(o,m);y?l(t,r,i,f,h,p,!w&&!C,!w&&!S,!T&&!S,!T&&!C):c(t,r,i,f,h,p,w&&C&&b,w&&S&&E,T&&S&&x,T&&C&&N)}function p(e,n,r){var s=e.moduleCount,o=r.size/s,u=f,a,l;i&&r.radius>0&&r.radius<=.5&&(u=h),n.beginPath();for(a=0;a<s;a+=1)for(l=0;l<s;l+=1){var c=r.left+l*o,p=r.top+a*o,d=o;u(e,n,r,c,p,d,a,l)}if(t(r.fill).is("img")){n.strokeStyle="rgba(0,0,0,0.5)",n.lineWidth=2,n.stroke();var v=n.globalCompositeOperation;n.globalCompositeOperation="destination-out",n.fill(),n.globalCompositeOperation=v,n.clip(),n.drawImage(r.fill,0,0,r.size,r.size),n.restore()}else n.fillStyle=r.fill,n.fill()}function d(e,n){var r=s(n.text,n.ecLevel,n.minVersion,n.maxVersion,n.quiet);if(!r)return null;var i=t(e).data("qrcode",r),o=i[0].getContext("2d");return a(r,o,n),p(r,o,n),i}function v(e){var n=t("<canvas/>").attr("width",e.size).attr("height",e.size);return d(n,e)}function m(e){return t("<img/>").attr("src",v(e)[0].toDataURL("image/png"))}function g(e){var n=s(e.text,e.ecLevel,e.minVersion,e.maxVersion,e.quiet);if(!n)return null;var r=e.size,i=e.background,o=Math.floor,u=n.moduleCount,a=o(r/u),f=o(.5*(r-a*u)),l,c,h={position:"relative",left:0,top:0,padding:0,margin:0,width:r,height:r},p={position:"absolute",padding:0,margin:0,width:a,height:a,"background-color":e.fill},d=t("<div/>").data("qrcode",n).css(h);i&&d.css("background-color",i);for(l=0;l<u;l+=1)for(c=0;c<u;c+=1)n.isDark(l,c)&&t("<div/>").css(p).css({left:f+c*a,top:f+l*a}).appendTo(d);return d}function y(e){return r&&e.render==="canvas"?v(e):r&&e.render==="image"?m(e):g(e)}var t=jQuery,r=function(){var e=document.createElement("canvas");return Boolean(e.getContext&&e.getContext("2d"))}(),i=Object.prototype.toString.call(window.opera)!=="[object Opera]",b={render:"canvas",minVersion:1,maxVersion:40,ecLevel:"L",left:0,top:0,size:200,fill:"#000",background:null,text:"no text",radius:0,quiet:0,mode:0,mSize:.1,mPosX:.5,mPosY:.5,label:"no label",fontname:"sans",fontcolor:"#000",image:null};t.fn.qrcode=function(e){var n=t.extend({},b,e);return this.each(function(){this.nodeName.toLowerCase()==="canvas"?d(this,n):t(this).append(y(n))})}}(function(){var e=function(){function o(e,t){if(typeof e.length=="undefined")throw new Error(e.length+"/"+t);var n=function(){var n=0;while(n<e.length&&e[n]==0)n+=1;var r=new Array(e.length-n+t);for(var i=0;i<e.length-n;i+=1)r[i]=e[i+n];return r}(),r={};return r.getAt=function(e){return n[e]},r.getLength=function(){return n.length},r.multiply=function(e){var t=new Array(r.getLength()+e.getLength()-1);for(var n=0;n<r.getLength();n+=1)for(var i=0;i<e.getLength();i+=1)t[n+i]^=s.gexp(s.glog(r.getAt(n))+s.glog(e.getAt(i)));return o(t,0)},r.mod=function(e){if(r.getLength()-e.getLength()<0)return r;var t=s.glog(r.getAt(0))-s.glog(e.getAt(0)),n=new Array(r.getLength());for(var i=0;i<r.getLength();i+=1)n[i]=r.getAt(i);for(var i=0;i<e.getLength();i+=1)n[i]^=s.gexp(s.glog(e.getAt(i))+t);return o(n,0).mod(e)},r}var e=function(e,t){var r=236,s=17,l=e,c=n[t],h=null,p=0,v=null,m=new Array,g={},y=function(e,t){p=l*4+17,h=function(e){var t=new Array(e);for(var n=0;n<e;n+=1){t[n]=new Array(e);for(var r=0;r<e;r+=1)t[n][r]=null}return t}(p),b(0,0),b(p-7,0),b(0,p-7),S(),E(),T(e,t),l>=7&&x(e),v==null&&(v=k(l,c,m)),N(v,t)},b=function(e,t){for(var n=-1;n<=7;n+=1){if(e+n<=-1||p<=e+n)continue;for(var r=-1;r<=7;r+=1){if(t+r<=-1||p<=t+r)continue;0<=n&&n<=6&&(r==0||r==6)||0<=r&&r<=6&&(n==0||n==6)||2<=n&&n<=4&&2<=r&&r<=4?h[e+n][t+r]=!0:h[e+n][t+r]=!1}}},w=function(){var e=0,t=0;for(var n=0;n<8;n+=1){y(!0,n);var r=i.getLostPoint(g);if(n==0||e>r)e=r,t=n}return t},E=function(){for(var e=8;e<p-8;e+=1){if(h[e][6]!=null)continue;h[e][6]=e%2==0}for(var t=8;t<p-8;t+=1){if(h[6][t]!=null)continue;h[6][t]=t%2==0}},S=function(){var e=i.getPatternPosition(l);for(var t=0;t<e.length;t+=1)for(var n=0;n<e.length;n+=1){var r=e[t],s=e[n];if(h[r][s]!=null)continue;for(var o=-2;o<=2;o+=1)for(var u=-2;u<=2;u+=1)o==-2||o==2||u==-2||u==2||o==0&&u==0?h[r+o][s+u]=!0:h[r+o][s+u]=!1}},x=function(e){var t=i.getBCHTypeNumber(l);for(var n=0;n<18;n+=1){var r=!e&&(t>>n&1)==1;h[Math.floor(n/3)][n%3+p-8-3]=r}for(var n=0;n<18;n+=1){var r=!e&&(t>>n&1)==1;h[n%3+p-8-3][Math.floor(n/3)]=r}},T=function(e,t){var n=c<<3|t,r=i.getBCHTypeInfo(n);for(var s=0;s<15;s+=1){var o=!e&&(r>>s&1)==1;s<6?h[s][8]=o:s<8?h[s+1][8]=o:h[p-15+s][8]=o}for(var s=0;s<15;s+=1){var o=!e&&(r>>s&1)==1;s<8?h[8][p-s-1]=o:s<9?h[8][15-s-1+1]=o:h[8][15-s-1]=o}h[p-8][8]=!e},N=function(e,t){var n=-1,r=p-1,s=7,o=0,u=i.getMaskFunction(t);for(var a=p-1;a>0;a-=2){a==6&&(a-=1);for(;;){for(var f=0;f<2;f+=1)if(h[r][a-f]==null){var l=!1;o<e.length&&(l=(e[o]>>>s&1)==1);var c=u(r,a-f);c&&(l=!l),h[r][a-f]=l,s-=1,s==-1&&(o+=1,s=7)}r+=n;if(r<0||p<=r){r-=n,n=-n;break}}}},C=function(e,t){var n=0,r=0,s=0,u=new Array(t.length),a=new Array(t.length);for(var f=0;f<t.length;f+=1){var l=t[f].dataCount,c=t[f].totalCount-l;r=Math.max(r,l),s=Math.max(s,c),u[f]=new Array(l);for(var h=0;h<u[f].length;h+=1)u[f][h]=255&e.getBuffer()[h+n];n+=l;var p=i.getErrorCorrectPolynomial(c),d=o(u[f],p.getLength()-1),v=d.mod(p);a[f]=new Array(p.getLength()-1);for(var h=0;h<a[f].length;h+=1){var m=h+v.getLength()-a[f].length;a[f][h]=m>=0?v.getAt(m):0}}var g=0;for(var h=0;h<t.length;h+=1)g+=t[h].totalCount;var y=new Array(g),b=0;for(var h=0;h<r;h+=1)for(var f=0;f<t.length;f+=1)h<u[f].length&&(y[b]=u[f][h],b+=1);for(var h=0;h<s;h+=1)for(var f=0;f<t.length;f+=1)h<a[f].length&&(y[b]=a[f][h],b+=1);return y},k=function(e,t,n){var o=u.getRSBlocks(e,t),f=a();for(var l=0;l<n.length;l+=1){var c=n[l];f.put(c.getMode(),4),f.put(c.getLength(),i.getLengthInBits(c.getMode(),e)),c.write(f)}var h=0;for(var l=0;l<o.length;l+=1)h+=o[l].dataCount;if(f.getLengthInBits()>h*8)throw new Error("code length overflow. ("+f.getLengthInBits()+">"+h*8+")");f.getLengthInBits()+4<=h*8&&f.put(0,4);while(f.getLengthInBits()%8!=0)f.putBit(!1);for(;;){if(f.getLengthInBits()>=h*8)break;f.put(r,8);if(f.getLengthInBits()>=h*8)break;f.put(s,8)}return C(f,o)};return g.addData=function(e){var t=f(e);m.push(t),v=null},g.isDark=function(e,t){if(e<0||p<=e||t<0||p<=t)throw new Error(e+","+t);return h[e][t]},g.getModuleCount=function(){return p},g.make=function(){y(!1,w())},g.createTableTag=function(e,t){e=e||2,t=typeof t=="undefined"?e*4:t;var n="";n+='<table style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: "+t+"px;",n+='">',n+="<tbody>";for(var r=0;r<g.getModuleCount();r+=1){n+="<tr>";for(var i=0;i<g.getModuleCount();i+=1)n+='<td style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: 0px;",n+=" width: "+e+"px;",n+=" height: "+e+"px;",n+=" background-color: ",n+=g.isDark(r,i)?"#000000":"#ffffff",n+=";",n+='"/>';n+="</tr>"}return n+="</tbody>",n+="</table>",n},g.createImgTag=function(e,t){e=e||2,t=typeof t=="undefined"?e*4:t;var n=g.getModuleCount()*e+t*2,r=t,i=n-t;return d(n,n,function(t,n){if(r<=t&&t<i&&r<=n&&n<i){var s=Math.floor((t-r)/e),o=Math.floor((n-r)/e);return g.isDark(o,s)?0:1}return 1})},g};e.stringToBytes=function(e){var t=new Array;for(var n=0;n<e.length;n+=1){var r=e.charCodeAt(n);t.push(r&255)}return t},e.createStringToBytes=function(e,t){var n=function(){var n=h(e),r=function(){var e=n.read();if(e==-1)throw new Error;return e},i=0,s={};for(;;){var o=n.read();if(o==-1)break;var u=r(),a=r(),f=r(),l=String.fromCharCode(o<<8|u),c=a<<8|f;s[l]=c,i+=1}if(i!=t)throw new Error(i+" != "+t);return s}(),r="?".charCodeAt(0);return function(e){var t=new Array;for(var i=0;i<e.length;i+=1){var s=e.charCodeAt(i);if(s<128)t.push(s);else{var o=n[e.charAt(i)];typeof o=="number"?(o&255)==o?t.push(o):(t.push(o>>>8),t.push(o&255)):t.push(r)}}return t}};var t={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},n={L:1,M:0,Q:3,H:2},r={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},i=function(){var e=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],n=1335,i=7973,u=21522,a={},f=function(e){var t=0;while(e!=0)t+=1,e>>>=1;return t};return a.getBCHTypeInfo=function(e){var t=e<<10;while(f(t)-f(n)>=0)t^=n<<f(t)-f(n);return(e<<10|t)^u},a.getBCHTypeNumber=function(e){var t=e<<12;while(f(t)-f(i)>=0)t^=i<<f(t)-f(i);return e<<12|t},a.getPatternPosition=function(t){return e[t-1]},a.getMaskFunction=function(e){switch(e){case r.PATTERN000:return function(e,t){return(e+t)%2==0};case r.PATTERN001:return function(e,t){return e%2==0};case r.PATTERN010:return function(e,t){return t%3==0};case r.PATTERN011:return function(e,t){return(e+t)%3==0};case r.PATTERN100:return function(e,t){return(Math.floor(e/2)+Math.floor(t/3))%2==0};case r.PATTERN101:return function(e,t){return e*t%2+e*t%3==0};case r.PATTERN110:return function(e,t){return(e*t%2+e*t%3)%2==0};case r.PATTERN111:return function(e,t){return(e*t%3+(e+t)%2)%2==0};default:throw new Error("bad maskPattern:"+e)}},a.getErrorCorrectPolynomial=function(e){var t=o([1],0);for(var n=0;n<e;n+=1)t=t.multiply(o([1,s.gexp(n)],0));return t},a.getLengthInBits=function(e,n){if(1<=n&&n<10)switch(e){case t.MODE_NUMBER:return 10;case t.MODE_ALPHA_NUM:return 9;case t.MODE_8BIT_BYTE:return 8;case t.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(n<27)switch(e){case t.MODE_NUMBER:return 12;case t.MODE_ALPHA_NUM:return 11;case t.MODE_8BIT_BYTE:return 16;case t.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(n<41))throw new Error("type:"+n);switch(e){case t.MODE_NUMBER:return 14;case t.MODE_ALPHA_NUM:return 13;case t
.MODE_8BIT_BYTE:return 16;case t.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},a.getLostPoint=function(e){var t=e.getModuleCount(),n=0;for(var r=0;r<t;r+=1)for(var i=0;i<t;i+=1){var s=0,o=e.isDark(r,i);for(var u=-1;u<=1;u+=1){if(r+u<0||t<=r+u)continue;for(var a=-1;a<=1;a+=1){if(i+a<0||t<=i+a)continue;if(u==0&&a==0)continue;o==e.isDark(r+u,i+a)&&(s+=1)}}s>5&&(n+=3+s-5)}for(var r=0;r<t-1;r+=1)for(var i=0;i<t-1;i+=1){var f=0;e.isDark(r,i)&&(f+=1),e.isDark(r+1,i)&&(f+=1),e.isDark(r,i+1)&&(f+=1),e.isDark(r+1,i+1)&&(f+=1);if(f==0||f==4)n+=3}for(var r=0;r<t;r+=1)for(var i=0;i<t-6;i+=1)e.isDark(r,i)&&!e.isDark(r,i+1)&&e.isDark(r,i+2)&&e.isDark(r,i+3)&&e.isDark(r,i+4)&&!e.isDark(r,i+5)&&e.isDark(r,i+6)&&(n+=40);for(var i=0;i<t;i+=1)for(var r=0;r<t-6;r+=1)e.isDark(r,i)&&!e.isDark(r+1,i)&&e.isDark(r+2,i)&&e.isDark(r+3,i)&&e.isDark(r+4,i)&&!e.isDark(r+5,i)&&e.isDark(r+6,i)&&(n+=40);var l=0;for(var i=0;i<t;i+=1)for(var r=0;r<t;r+=1)e.isDark(r,i)&&(l+=1);var c=Math.abs(100*l/t/t-50)/5;return n+=c*10,n},a}(),s=function(){var e=new Array(256),t=new Array(256);for(var n=0;n<8;n+=1)e[n]=1<<n;for(var n=8;n<256;n+=1)e[n]=e[n-4]^e[n-5]^e[n-6]^e[n-8];for(var n=0;n<255;n+=1)t[e[n]]=n;var r={};return r.glog=function(e){if(e<1)throw new Error("glog("+e+")");return t[e]},r.gexp=function(t){while(t<0)t+=255;while(t>=256)t-=255;return e[t]},r}(),u=function(){var e=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],t=function(e,t){var n={};return n.totalCount=e,n.dataCount=t,n},r={},i=function(t,r){switch(r){case n.L:return e[(t-1)*4+0];case n.M:return e[(t-1)*4+1];case n.Q:return e[(t-1)*4+2];case n.H:return e[(t-1)*4+3];default:return undefined}};return r.getRSBlocks=function(e,n){var r=i(e,n);if(typeof r=="undefined")throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+n);var s=r.length/3,o=new Array;for(var u=0;u<s;u+=1){var a=r[u*3+0],f=r[u*3+1],l=r[u*3+2];for(var c=0;c<a;c+=1)o.push(t(f,l))}return o},r}(),a=function(){var e=new Array,t=0,n={};return n.getBuffer=function(){return e},n.getAt=function(t){var n=Math.floor(t/8);return(e[n]>>>7-t%8&1)==1},n.put=function(e,t){for(var r=0;r<t;r+=1)n.putBit((e>>>t-r-1&1)==1)},n.getLengthInBits=function(){return t},n.putBit=function(n){var r=Math.floor(t/8);e.length<=r&&e.push(0),n&&(e[r]|=128>>>t%8),t+=1},n},f=function(n){var r=t.MODE_8BIT_BYTE,i=n,s=e.stringToBytes(n),o={};return o.getMode=function(){return r},o.getLength=function(e){return s.length},o.write=function(e){for(var t=0;t<s.length;t+=1)e.put(s[t],8)},o},l=function(){var e=new Array,t={};return t.writeByte=function(t){e.push(t&255)},t.writeShort=function(e){t.writeByte(e),t.writeByte(e>>>8)},t.writeBytes=function(e,n,r){n=n||0,r=r||e.length;for(var i=0;i<r;i+=1)t.writeByte(e[i+n])},t.writeString=function(e){for(var n=0;n<e.length;n+=1)t.writeByte(e.charCodeAt(n))},t.toByteArray=function(){return e},t.toString=function(){var t="";t+="[";for(var n=0;n<e.length;n+=1)n>0&&(t+=","),t+=e[n];return t+="]",t},t},c=function(){var e=0,t=0,n=0,r="",i={},s=function(e){r+=String.fromCharCode(o(e&63))},o=function(e){if(!(e<0)){if(e<26)return 65+e;if(e<52)return 97+(e-26);if(e<62)return 48+(e-52);if(e==62)return 43;if(e==63)return 47}throw new Error("n:"+e)};return i.writeByte=function(r){e=e<<8|r&255,t+=8,n+=1;while(t>=6)s(e>>>t-6),t-=6},i.flush=function(){t>0&&(s(e<<6-t),e=0,t=0);if(n%3!=0){var i=3-n%3;for(var o=0;o<i;o+=1)r+="="}},i.toString=function(){return r},i},h=function(e){var t=e,n=0,r=0,i=0,s={};s.read=function(){while(i<8){if(n>=t.length){if(i==0)return-1;throw new Error("unexpected end of file./"+i)}var e=t.charAt(n);n+=1;if(e=="=")return i=0,-1;if(e.match(/^\s$/))continue;r=r<<6|o(e.charCodeAt(0)),i+=6}var s=r>>>i-8&255;return i-=8,s};var o=function(e){if(65<=e&&e<=90)return e-65;if(97<=e&&e<=122)return e-97+26;if(48<=e&&e<=57)return e-48+52;if(e==43)return 62;if(e==47)return 63;throw new Error("c:"+e)};return s},p=function(e,t){var n=e,r=t,i=new Array(e*t),s={};s.setPixel=function(e,t,r){i[t*n+e]=r},s.write=function(e){e.writeString("GIF87a"),e.writeShort(n),e.writeShort(r),e.writeByte(128),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(255),e.writeByte(255),e.writeByte(255),e.writeString(","),e.writeShort(0),e.writeShort(0),e.writeShort(n),e.writeShort(r),e.writeByte(0);var t=2,i=u(t);e.writeByte(t);var s=0;while(i.length-s>255)e.writeByte(255),e.writeBytes(i,s,255),s+=255;e.writeByte(i.length-s),e.writeBytes(i,s,i.length-s),e.writeByte(0),e.writeString(";")};var o=function(e){var t=e,n=0,r=0,i={};return i.write=function(e,i){if(e>>>i!=0)throw new Error("length over");while(n+i>=8)t.writeByte(255&(e<<n|r)),i-=8-n,e>>>=8-n,r=0,n=0;r=e<<n|r,n+=i},i.flush=function(){n>0&&t.writeByte(r)},i},u=function(e){var t=1<<e,n=(1<<e)+1,r=e+1,s=a();for(var u=0;u<t;u+=1)s.add(String.fromCharCode(u));s.add(String.fromCharCode(t)),s.add(String.fromCharCode(n));var f=l(),c=o(f);c.write(t,r);var h=0,p=String.fromCharCode(i[h]);h+=1;while(h<i.length){var d=String.fromCharCode(i[h]);h+=1,s.contains(p+d)?p+=d:(c.write(s.indexOf(p),r),s.size()<4095&&(s.size()==1<<r&&(r+=1),s.add(p+d)),p=d)}return c.write(s.indexOf(p),r),c.write(n,r),c.flush(),f.toByteArray()},a=function(){var e={},t=0,n={};return n.add=function(r){if(n.contains(r))throw new Error("dup key:"+r);e[r]=t,t+=1},n.size=function(){return t},n.indexOf=function(t){return e[t]},n.contains=function(t){return typeof e[t]!="undefined"},n};return s},d=function(e,t,n,r){var i=p(e,t);for(var s=0;s<t;s+=1)for(var o=0;o<e;o+=1)i.setPixel(o,s,n(o,s));var u=l();i.write(u);var a=c(),f=u.toByteArray();for(var h=0;h<f.length;h+=1)a.writeByte(f[h]);a.flush();var d="";return d+="<img",d+=' src="',d+="data:image/gif;base64,",d+=a,d+='"',d+=' width="',d+=e,d+='"',d+=' height="',d+=t,d+='"',r&&(d+=' alt="',d+=r,d+='"'),d+="/>",d};return e}();return function(e){typeof define=="function"&&define.amd?define([],e):typeof exports=="object"&&(module.exports=e())}(function(){return e}),!function(e){e.stringToBytes=function(e){function t(e){var t=[];for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t.push(r):r<2048?t.push(192|r>>6,128|r&63):r<55296||r>=57344?t.push(224|r>>12,128|r>>6&63,128|r&63):(n++,r=65536+((r&1023)<<10|e.charCodeAt(n)&1023),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63))}return t}return t(e)}}(e),e}()),function(e,t){typeof define=="function"&&define.amd?define(["jquery"],t):typeof exports=="object"?module.exports=t(require("jquery")):t(e.jQuery)}(this,function(e){function r(e){if(e in t.style)return e;var n=["Moz","Webkit","O","ms"],r=e.charAt(0).toUpperCase()+e.substr(1);for(var i=0;i<n.length;++i){var s=n[i]+r;if(s in t.style)return s}}function i(){return t.style[n.transform]="",t.style[n.transform]="rotateY(90deg)",t.style[n.transform]!==""}function f(e){return typeof e=="string"&&this.parse(e),this}function l(e,t,n){t===!0?e.queue(n):t?e.queue(t,n):e.each(function(){n.call(this)})}function c(t){var r=[];return e.each(t,function(t){t=e.camelCase(t),t=e.transit.propertyMap[t]||e.cssProps[t]||t,t=d(t),n[t]&&(t=d(n[t])),e.inArray(t,r)===-1&&r.push(t)}),r}function h(t,n,r,i){var s=c(t);e.cssEase[r]&&(r=e.cssEase[r]);var o=""+m(n)+" "+r;parseInt(i,10)>0&&(o+=" "+m(i));var u=[];return e.each(s,function(e,t){u.push(t+" "+o)}),u.join(", ")}function p(t,r){r||(e.cssNumber[t]=!0),e.transit.propertyMap[t]=n.transform,e.cssHooks[t]={get:function(n){var r=e(n).css("transit:transform");return r.get(t)},set:function(n,r){var i=e(n).css("transit:transform");i.setFromString(t,r),e(n).css({"transit:transform":i})}}}function d(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function v(e,t){return typeof e=="string"&&!e.match(/^[\-0-9\.]+$/)?e:""+e+t}function m(t){var n=t;return typeof n=="string"&&!n.match(/^[\-0-9\.]+/)&&(n=e.fx.speeds[n]||e.fx.speeds._default),v(n,"ms")}e.transit={version:"0.9.12",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:!0,useTransitionEnd:!1};var t=document.createElement("div"),n={},s=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;n.transition=r("transition"),n.transitionDelay=r("transitionDelay"),n.transform=r("transform"),n.transformOrigin=r("transformOrigin"),n.filter=r("Filter"),n.transform3d=i();var o={transition:"transitionend",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"},u=n.transitionEnd=o[n.transition]||null;for(var a in n)n.hasOwnProperty(a)&&typeof e.support[a]=="undefined"&&(e.support[a]=n[a]);return t=null,e.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeInCubic:"cubic-bezier(.550,.055,.675,.190)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},e.cssHooks["transit:transform"]={get:function(t){return e(t).data("transform")||new f},set:function(t,r){var i=r;i instanceof f||(i=new f(i)),n.transform==="WebkitTransform"&&!s?t.style[n.transform]=i.toString(!0):t.style[n.transform]=i.toString(),e(t).data("transform",i)}},e.cssHooks.transform={set:e.cssHooks["transit:transform"].set},e.cssHooks.filter={get:function(e){return e.style[n.filter]},set:function(e,t){e.style[n.filter]=t}},e.fn.jquery<"1.8"&&(e.cssHooks.transformOrigin={get:function(e){return e.style[n.transformOrigin]},set:function(e,t){e.style[n.transformOrigin]=t}},e.cssHooks.transition={get:function(e){return e.style[n.transition]},set:function(e,t){e.style[n.transition]=t}}),p("scale"),p("scaleX"),p("scaleY"),p("translate"),p("rotate"),p("rotateX"),p("rotateY"),p("rotate3d"),p("perspective"),p("skewX"),p("skewY"),p("x",!0),p("y",!0),f.prototype={setFromString:function(e,t){var n=typeof t=="string"?t.split(","):t.constructor===Array?t:[t];n.unshift(e),f.prototype.set.apply(this,n)},set:function(e){var t=Array.prototype.slice.apply(arguments,[1]);this.setter[e]?this.setter[e].apply(this,t):this[e]=t.join(",")},get:function(e){return this.getter[e]?this.getter[e].apply(this):this[e]||0},setter:{rotate:function(e){this.rotate=v(e,"deg")},rotateX:function(e){this.rotateX=v(e,"deg")},rotateY:function(e){this.rotateY=v(e,"deg")},scale:function(e,t){t===undefined&&(t=e),this.scale=e+","+t},skewX:function(e){this.skewX=v(e,"deg")},skewY:function(e){this.skewY=v(e,"deg")},perspective:function(e){this.perspective=v(e,"px")},x:function(e){this.set("translate",e,null)},y:function(e){this.set("translate",null,e)},translate:function(e,t){this._translateX===undefined&&(this._translateX=0),this._translateY===undefined&&(this._translateY=0),e!==null&&e!==undefined&&(this._translateX=v(e,"px")),t!==null&&t!==undefined&&(this._translateY=v(t,"px")),this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var e=(this.scale||"1,1").split(",");return e[0]&&(e[0]=parseFloat(e[0])),e[1]&&(e[1]=parseFloat(e[1])),e[0]===e[1]?e[0]:e},rotate3d:function(){var e=(this.rotate3d||"0,0,0,0deg").split(",");for(var t=0;t<=3;++t)e[t]&&(e[t]=parseFloat(e[t]));return e[3]&&(e[3]=v(e[3],"deg")),e}},parse:function(e){var t=this;e.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(e,n,r){t.setFromString(n,r)})},toString:function(e){var t=[];for(var r in this)if(this.hasOwnProperty(r)){if(!n.transform3d&&(r==="rotateX"||r==="rotateY"||r==="perspective"||r==="transformOrigin"))continue;r[0]!=="_"&&(e&&r==="scale"?t.push(r+"3d("+this[r]+",1)"):e&&r==="translate"?t.push(r+"3d("+this[r]+",0)"):t.push(r+"("+this[r]+")"))}return t.join(" ")}},e.fn.transition=e.fn.transit=function(t,r,i,s){var o=this,a=0,f=!0,c=e.extend(!0,{},t);typeof r=="function"&&(s=r,r=undefined),typeof r=="object"&&(i=r.easing,a=r.delay||0,f=typeof r.queue=="undefined"?!0:r.queue,s=r.complete,r=r.duration),typeof i=="function"&&(s=i,i=undefined),typeof c.easing!="undefined"&&(i=c.easing,delete c.easing),typeof c.duration!="undefined"&&(r=c.duration,delete c.duration),typeof c.complete!="undefined"&&(s=c.complete,delete c.complete),typeof c.queue!="undefined"&&(f=c.queue,delete c.queue),typeof c.delay!="undefined"&&(a=c.delay,delete c.delay),typeof r=="undefined"&&(r=e.fx.speeds._default),typeof i=="undefined"&&(i=e.cssEase._default),r=m(r);var p=h(c,r,i,a),d=e.transit.enabled&&n.transition,v=d?parseInt(r,10)+parseInt(a,10):0;if(v===0){var g=function(e){o.css(c),s&&s.apply(o),e&&e()};return l(o,f,g),o}var y={},b=function(t){var r=!1,i=function(){r&&o.unbind(u,i),v>0&&o.each(function(){this.style[n.transition]=y[this]||null}),typeof s=="function"&&s.apply(o),typeof t=="function"&&t()};v>0&&u&&e.transit.useTransitionEnd?(r=!0,o.bind(u,i)):window.setTimeout(i,v),o.each(function(){v>0&&(this.style[n.transition]=p),e(this).css(c)})},w=function(e){this.offsetWidth,b(e)};return l(o,f,w),this},e.transit.getTransitionValue=h,e}),function(e){"use strict";typeof define=="function"&&define.amd?define(["jquery"],e):typeof module!="undefined"&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){"use strict";function n(t){return!t.nodeName||e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])!==-1}function r(t){return e.isFunction(t)||e.isPlainObject(t)?t:{top:t,left:t}}var t=e.scrollTo=function(t,n,r){return e(window).scrollTo(t,n,r)};return t.defaults={axis:"xy",duration:0,limit:!0},e.fn.scrollTo=function(i,s,o){typeof s=="object"&&(o=s,s=0),typeof o=="function"&&(o={onAfter:o}),i==="max"&&(i=9e9),o=e.extend({},t.defaults,o),s=s||o.duration;var u=o.queue&&o.axis.length>1;return u&&(s/=2),o.offset=r(o.offset),o.over=r(o.over),this.each(function(){function v(t){var n=e.extend({},o,{queue:!0,duration:s,complete:t&&function(){t.call(f,c,o)}});l.animate(h,n)}if(i===null)return;var a=n(this),f=a?this.contentWindow||window:this,l=e(f),c=i,h={},p;switch(typeof c){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(c)){c=r(c);break}c=a?e(c):e(c,f);if(!c.length)return;case"object":if(c.is||c.style)p=(c=e(c)).offset()}var d=e.isFunction(o.offset)&&o.offset(f,c)||o.offset;e.each(o.axis.split(""),function(e,n){var r=n==="x"?"Left":"Top",i=r.toLowerCase(),s="scroll"+r,m=l[s](),g=t.max(f,n);if(p)h[s]=p[i]+(a?0:m-l.offset()[i]),o.margin&&(h[s]-=parseInt(c.css("margin"+r),10)||0,h[s]-=parseInt(c.css("border"+r+"Width"),10)||0),h[s]+=d[i]||0,o.over[i]&&(h[s]+=c[n==="x"?"width":"height"]()*o.over[i]);else{var y=c[i];h[s]=y.slice&&y.slice(-1)==="%"?parseFloat(y)/100*g:y}o.limit&&/^\d+$/.test(h[s])&&(h[s]=h[s]<=0?0:Math.min(h[s],g)),!e&&o.axis.length>1&&(m===h[s]?h={}:u&&(v(o.onAfterFirst),h={}))}),v(o.onAfter)})},t.max=function(t,r){var i=r==="x"?"Width":"Height",s="scroll"+i;if(!n(t))return t[s]-e(t)[i.toLowerCase()]();var o="client"+i,u=t.ownerDocument||t.document,a=u.documentElement,f=u.body;return Math.max(a[s],f[s])-Math.min(a[o],f[o])},e.Tween.propHooks.scrollLeft=e.Tween.propHooks.scrollTop={get:function(t){return e(t.elem)[t.prop]()},set:function(t){var n=this.get(t);if(t.options.interrupt&&t._last&&t._last!==n)return e(t.elem).stop();var r=Math.round(t.now);n!==r&&(e(t.elem)[t.prop](r),t._last=this.get(t))}},t}),function(e,t,n){function s(t,n){this.bodyOverflowX,this.callbacks={hide:[],show:[]},this.checkInterval=null,this.Content,this.$el=e(t),this.$elProxy,this.elProxyPosition,this.enabled=!0,this.options=e.extend({},i,n),this.mouseIsOverProxy=!1,this.namespace="tooltipster-"+Math.round(Math.random()*1e5),this.Status="hidden",this.timerHide=null,this.timerShow=null,this.$tooltip,this.options.iconTheme=this.options.iconTheme.replace(".",""),this.options.theme=this.options.theme.replace(".",""),this._init()}function o(t,n){var r=!0;return e.each(t,function(e,i){if(typeof n[e]=="undefined"||t[e]!==n[e])return r=!1,!1}),r}function f(){return!a&&u}function l(){var e=n.body||n.documentElement,t=e.style,r="transition";if(typeof t[r]=="string")return!0;v=["Moz","Webkit","Khtml","O","ms"],r=r.charAt(0).toUpperCase()+r.substr(1);for(var i=0;i<v.length;i++)if(typeof t[v[i]+r]=="string")return!0;return!1}var r="tooltipster",i={animation:"fade",arrow:!0,arrowColor:"",autoClose:!0,content:null,contentAsHTML:!1,contentCloning:!0,debug:!0,delay:200,minWidth:0,maxWidth:null,functionInit:function(e,t){},functionBefore:function(e,t){t()},functionReady:function(e,t){},functionAfter:function(e){},hideOnClick:!1,icon:"(?)",iconCloning:!0,iconDesktop:!1,iconTouch:!1,iconTheme:"tooltipster-icon",interactive:!1,interactiveTolerance:350,multiple:!1,offsetX:0,offsetY:0,onlyOne:!1,position:"top",positionTracker:!1,positionTrackerCallback:function(e){this.option("trigger")=="hover"&&this.option("autoClose")&&this.hide()},restoration:"current",speed:350,timer:0,theme:"tooltipster-default",touchDevices:!0,trigger:"hover",updateAnimation:!0};s.prototype={_init:function(){var t=this;if(n.querySelector){var r=null;t.$el.data("tooltipster-initialTitle")===undefined&&(r=t.$el.attr("title"),r===undefined&&(r=null),t.$el.data("tooltipster-initialTitle",r)),t.options.content!==null?t._content_set(t.options.content):t._content_set(r);var i=t.options.functionInit.call(t.$el,t.$el,t.Content);typeof i!="undefined"&&t._content_set(i),t.$el.removeAttr("title").addClass("tooltipstered"),!u&&t.options.iconDesktop||u&&t.options.iconTouch?(typeof t.options.icon=="string"?(t.$elProxy=e('<span class="'+t.options.iconTheme+'"></span>'),t.$elProxy.text(t.options.icon)):t.options.iconCloning?t.$elProxy=t.options.icon.clone(!0):t.$elProxy=t.options.icon,t.$elProxy.insertAfter(t.$el)):t.$elProxy=t.$el,t.options.trigger=="hover"?(t.$elProxy.on("mouseenter."+t.namespace,function(){if(!f()||t.options.touchDevices)t.mouseIsOverProxy=!0,t._show()}).on("mouseleave."+t.namespace,function(){if(!f()||t.options.touchDevices)t.mouseIsOverProxy=!1}),u&&t.options.touchDevices&&t.$elProxy.on("touchstart."+t.namespace,function(){t._showNow()})):t.options.trigger=="click"&&t.$elProxy.on("click."+t.namespace,function(){(!f()||t.options.touchDevices)&&t._show()})}},_show:function(){var e=this;e.Status!="shown"&&e.Status!="appearing"&&(e.options.delay?e.timerShow=setTimeout(function(){(e.options.trigger=="click"||e.options.trigger=="hover"&&e.mouseIsOverProxy)&&e._showNow()},e.options.delay):e._showNow())},_showNow:function(n){var r=this;r.options.functionBefore.call(r.$el,r.$el,function(){if(r.enabled&&r.Content!==null){n&&r.callbacks.show.push(n),r.callbacks.hide=[],clearTimeout(r.timerShow),r.timerShow=null,clearTimeout(r.timerHide),r.timerHide=null,r.options.onlyOne&&e(".tooltipstered").not(r.$el).each(function(t,n){var r=e(n),i=r.data("tooltipster-ns");e.each(i,function(e,t){var n=r.data(t),i=n.status(),s=n.option("autoClose");i!=="hidden"&&i!=="disappearing"&&s&&n.hide()})});var i=function(){r.Status="shown",e.each(r.callbacks.show,function(e,t){t.call(r.$el)}),r.callbacks.show=[]};if(r.Status!=="hidden"){var s=0;r.Status==="disappearing"?(r.Status="appearing",l()?(r.$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-"+r.options.animation+"-show"),r.options.speed>0&&r.$tooltip.delay(r.options.speed),r.$tooltip.queue(i)):r.$tooltip.stop().fadeIn(i)):r.Status==="shown"&&i()}else{r.Status="appearing";var s=r.options.speed;r.bodyOverflowX=e("body").css("overflow-x"),e("body").css("overflow-x","hidden");var o="tooltipster-"+r.options.animation,a="-webkit-transition-duration: "+r.options.speed+"ms; -webkit-animation-duration: "+r.options.speed+"ms; -moz-transition-duration: "+r.options.speed+"ms; -moz-animation-duration: "+r.options.speed+"ms; -o-transition-duration: "+r.options.speed+"ms; -o-animation-duration: "+r.options.speed+"ms; -ms-transition-duration: "+r.options.speed+"ms; -ms-animation-duration: "+r.options.speed+"ms; transition-duration: "+r.options.speed+"ms; animation-duration: "+r.options.speed+"ms;",f=r.options.minWidth?"min-width:"+Math.round(r.options.minWidth)+"px;":"",c=r.options.maxWidth?"max-width:"+Math.round(r.options.maxWidth)+"px;":"",h=r.options.interactive?"pointer-events: auto;":"";r.$tooltip=e('<div class="tooltipster-base '+r.options.theme+'" style="'+f+" "+c+" "+h+" "+a+'"><div class="tooltipster-content"></div></div>'),l()&&r.$tooltip.addClass(o),r._content_insert(),r.$tooltip.appendTo("body"),r.reposition(),r.options.functionReady.call(r.$el,r.$el,r.$tooltip),l()?(r.$tooltip.addClass(o+"-show"),r.options.speed>0&&r.$tooltip.delay(r.options.speed),r.$tooltip.queue(i)):r.$tooltip.css("display","none").fadeIn(r.options.speed,i),r._interval_set(),e(t).on("scroll."+r.namespace+" resize."+r.namespace,function(){r.reposition()});if(r.options.autoClose){e("body").off("."+r.namespace);if(r.options.trigger=="hover"){u&&setTimeout(function(){e("body").on("touchstart."+r.namespace,function(){r.hide()})},0);if(r.options.interactive){u&&r.$tooltip.on("touchstart."+r.namespace,function(e){e.stopPropagation()});var p=null;r.$elProxy.add(r.$tooltip).on("mouseleave."+r.namespace+"-autoClose",function(){clearTimeout(p),p=setTimeout(function(){r.hide()},r.options.interactiveTolerance)}).on("mouseenter."+r.namespace+"-autoClose",function(){clearTimeout(p)})}else r.$elProxy.on("mouseleave."+r.namespace+"-autoClose",function(){r.hide()});r.options.hideOnClick&&r.$elProxy.on("click."+r.namespace+"-autoClose",function(){r.hide()})}else r.options.trigger=="click"&&(setTimeout(function(){e("body").on("click."+r.namespace+" touchstart."+r.namespace,function(){r.hide()})},0),r.options.interactive&&r.$tooltip.on("click."+r.namespace+" touchstart."+r.namespace,function(e){e.stopPropagation()}))}}r.options.timer>0&&(r.timerHide=setTimeout(function(){r.timerHide=null,r.hide()},r.options.timer+s))}})},_interval_set:function(){var t=this;t.checkInterval=setInterval(function(){if(e("body").find(t.$el).length===0||e("body").find(t.$elProxy).length===0||t.Status=="hidden"||e("body").find(t.$tooltip).length===0)(t.Status=="shown"||t.Status=="appearing")&&t.hide(),t._interval_cancel();else if(t.options.positionTracker){var n=t._repositionInfo(t.$elProxy),r=!1;o(n.dimension,t.elProxyPosition.dimension)&&(t.$elProxy.css("position")==="fixed"?o(n.position,t.elProxyPosition.position)&&(r=!0):o(n.offset,t.elProxyPosition.offset)&&(r=!0)),r||(t.reposition(),t.options.positionTrackerCallback.call(t,t.$el))}},200)},_interval_cancel:function(){clearInterval(this.checkInterval),this.checkInterval=null},_content_set:function(e){typeof e=="object"&&e!==null&&this.options.contentCloning&&(e=e.clone(!0)),this.Content=e},_content_insert:function(){var e=this,t=this.$tooltip.find(".tooltipster-content");typeof e.Content=="string"&&!e.options.contentAsHTML?t.text(e.Content):t.empty().append(e.Content)},_update:function(e){var t=this;t._content_set(e),t.Content!==null?t.Status!=="hidden"&&(t._content_insert(),t.reposition(),t.options.updateAnimation&&(l()?(t.$tooltip.css({width:"","-webkit-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-moz-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-o-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-ms-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",transition:"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms"}).addClass("tooltipster-content-changing"),setTimeout(function(){t.Status!="hidden"&&(t.$tooltip.removeClass("tooltipster-content-changing"),setTimeout(function(){t.Status!=="hidden"&&t.$tooltip.css({"-webkit-transition":t.options.speed+"ms","-moz-transition":t.options.speed+"ms","-o-transition":t.options.speed+"ms","-ms-transition":t.options.speed+"ms",transition:t.options.speed+"ms"})},t.options.speed))},t.options.speed)):t.$tooltip.fadeTo(t.options.speed,.5,function(){t.Status!="hidden"&&t.$tooltip.fadeTo(t.options.speed,1)}))):t.hide()},_repositionInfo:function(e){return{dimension:{height:e.outerHeight(!1),width:e.outerWidth(!1)},offset:e.offset(),position:{left:parseInt(e.css("left")),top:parseInt(e.css("top"))}}},hide:function(n){var r=this;n&&r.callbacks.hide.push(n),r.callbacks.show=[],clearTimeout(r.timerShow),r.timerShow=null,clearTimeout(r.timerHide),r.timerHide=null;var i=function(){e.each(r.callbacks.hide,function(e,t){t.call(r.$el)}),r.callbacks.hide=[]};if(r.Status=="shown"||r.Status=="appearing"){r.Status="disappearing";var s=function(){r.Status="hidden",typeof r.Content=="object"&&r.Content!==null&&r.Content.detach(),r.$tooltip.remove(),r.$tooltip=null,e(t).off("."+r.namespace),e("body").off("."+r.namespace).css("overflow-x",r.bodyOverflowX),e("body").off("."+r.namespace),r.$elProxy.off("."+r.namespace+"-autoClose"),r.options.functionAfter.call(r.$el,r.$el),i()};l()?(r.$tooltip.clearQueue().removeClass("tooltipster-"+r.options.animation+"-show").addClass("tooltipster-dying"),r.options.speed>0&&r.$tooltip.delay(r.options.speed),r.$tooltip.queue(s)):r.$tooltip.stop().fadeOut(r.options.speed,s)}else r.Status=="hidden"&&i();return r},show:function(e){return this._showNow(e),this},update:function(e){return this.content(e)},content:function(e){return typeof e=="undefined"?this.Content:(this._update(e),this)},reposition:function(){var n=this;if(e("body").find(n.$tooltip).length!==0){n.$tooltip.css("width",""),n.elProxyPosition=n._repositionInfo(n.$elProxy);var r=null,i=e(t).width(),s=n.elProxyPosition,o=n.$tooltip.outerWidth(!1),u=n.$tooltip.innerWidth()+1,a=n.$tooltip.outerHeight(!1);if(n.$elProxy.is("area")){var f=n.$elProxy.attr("shape"),l=n.$elProxy.parent().attr("name"),c=e('img[usemap="#'+l+'"]'),h=c.offset().left,p=c.offset().top,d=n.$elProxy.attr("coords")!==undefined?n.$elProxy.attr("coords").split(","):undefined;if(f=="circle"){var v=parseInt(d[0]),m=parseInt(d[1]),g=parseInt(d[2]);s.dimension.height=g*2,s.dimension.width=g*2,s.offset.top=p+m-g,s.offset.left=h+v-g}else if(f=="rect"){var v=parseInt(d[0]),m=parseInt(d[1]),y=parseInt(d[2]),b=parseInt(d[3]);s.dimension.height=b-m,s.dimension.width=y-v,s.offset.top=p+m,s.offset.left=h+v}else if(f=="poly"){var w=[],E=[],S=0,x=0,T=0,N=0,C="even";for(var k=0;k<d.length;k++){var L=parseInt(d[k]);C=="even"?(L>T&&(T=L,k===0&&(S=T)),L<S&&(S=L),C="odd"):(L>N&&(N=L,k==1&&(x=N)),L<x&&(x=L),C="even")}s.dimension.height=N-x,s.dimension.width=T-S,s.offset.top=p+x,s.offset.left=h+S}else s.dimension.height=c.outerHeight(!1),s.dimension.width=c.outerWidth(!1),s.offset.top=p,s.offset.left=h}var A=0,O=0,M=0,_=parseInt(n.options.offsetY),D=parseInt(n.options.offsetX),P=n.options.position;function H(){var n=e(t).scrollLeft();A-n<0&&(r=A-n,A=n),A+o-n>i&&(r=A-(i+n-o),A=i+n-o)}function B(n,r){s.offset.top-e(t).scrollTop()-a-_-12<0&&r.indexOf("top")>-1&&(P=n),s.offset.top+s.dimension.height+a+12+_>e(t).scrollTop()+e(t).height()&&r.indexOf("bottom")>-1&&(P=n,M=s.offset.top-a-_-12)}if(P=="top"){var j=s.offset.left+o-(s.offset.left+s.dimension.width);A=s.offset.left+D-j/2,M=s.offset.top-a-_-12,H(),B("bottom","top")}P=="top-left"&&(A=s.offset.left+D,M=s.offset.top-a-_-12,H(),B("bottom-left","top-left")),P=="top-right"&&(A=s.offset.left+s.dimension.width+D-o,M=s.offset.top-a-_-12,H(),B("bottom-right","top-right"));if(P=="bottom"){var j=s.offset.left+o-(s.offset.left+s.dimension.width);A=s.offset.left-j/2+D,M=s.offset.top+s.dimension.height+_+12,H(),B("top","bottom")}P=="bottom-left"&&(A=s.offset.left+D,M=s.offset.top+s.dimension.height+_+12,H(),B("top-left","bottom-left")),P=="bottom-right"&&(A=s.offset.left+s.dimension.width+D-o,M=s.offset.top+s.dimension.height+_+12,H(),B("top-right","bottom-right"));if(P=="left"){A=s.offset.left-D-o-12,O=s.offset.left+D+s.dimension.width+12;var F=s.offset.top+a-(s.offset.top+s.dimension.height);M=s.offset.top-F/2-_;if(A<0&&O+o>i){var I=parseFloat(n.$tooltip.css("border-width"))*2,q=o+A-I;n.$tooltip.css("width",q+"px"),a=n.$tooltip.outerHeight(!1),A=s.offset.left-D-q-12-I,F=s.offset.top+a-(s.offset.top+s.dimension.height),M=s.offset.top-F/2-_}else A<0&&(A=s.offset.left+D+s.dimension.width+12,r="left")}if(P=="right"){A=s.offset.left+D+s.dimension.width+12,O=s.offset.left-D-o-12;var F=s.offset.top+a-(s.offset.top+s.dimension.height);M=s.offset.top-F/2-_;if(A+o>i&&O<0){var I=parseFloat(n.$tooltip.css("border-width"))*2,q=i-A-I;n.$tooltip.css("width",q+"px"),a=n.$tooltip.outerHeight(!1),F=s.offset.top+a-(s.offset.top+s.dimension.height),M=s.offset.top-F/2-_}else A+o>i&&(A=s.offset.left-D-o-12,r="right")}if(n.options.arrow){var R="tooltipster-arrow-"+P;if(n.options.arrowColor.length<1)var U=n.$tooltip.css("background-color");else var U=n.options.arrowColor;r?r=="left"?(R="tooltipster-arrow-right",r=""):r=="right"?(R="tooltipster-arrow-left",r=""):r="left:"+Math.round(r)+"px;":r="";if(P=="top"||P=="top-left"||P=="top-right")var z=parseFloat(n.$tooltip.css("border-bottom-width")),W=n.$tooltip.css("border-bottom-color");else if(P=="bottom"||P=="bottom-left"||P=="bottom-right")var z=parseFloat(n.$tooltip.css("border-top-width")),W=n.$tooltip.css("border-top-color");else if(P=="left")var z=parseFloat(n.$tooltip.css("border-right-width")),W=n.$tooltip.css("border-right-color");else if(
P=="right")var z=parseFloat(n.$tooltip.css("border-left-width")),W=n.$tooltip.css("border-left-color");else var z=parseFloat(n.$tooltip.css("border-bottom-width")),W=n.$tooltip.css("border-bottom-color");z>1&&z++;var X="";if(z!==0){var V="",J="border-color: "+W+";";R.indexOf("bottom")!==-1?V="margin-top: -"+Math.round(z)+"px;":R.indexOf("top")!==-1?V="margin-bottom: -"+Math.round(z)+"px;":R.indexOf("left")!==-1?V="margin-right: -"+Math.round(z)+"px;":R.indexOf("right")!==-1&&(V="margin-left: -"+Math.round(z)+"px;"),X='<span class="tooltipster-arrow-border" style="'+V+" "+J+';"></span>'}n.$tooltip.find(".tooltipster-arrow").remove();var K='<div class="'+R+' tooltipster-arrow" style="'+r+'">'+X+'<span style="border-color:'+U+';"></span></div>';n.$tooltip.append(K)}n.$tooltip.css({top:Math.round(M)+"px",left:Math.round(A)+"px"})}return n},enable:function(){return this.enabled=!0,this},disable:function(){return this.hide(),this.enabled=!1,this},destroy:function(){var t=this;t.hide(),t.$el[0]!==t.$elProxy[0]&&t.$elProxy.remove(),t.$el.removeData(t.namespace).off("."+t.namespace);var n=t.$el.data("tooltipster-ns");if(n.length===1){var r=null;t.options.restoration==="previous"?r=t.$el.data("tooltipster-initialTitle"):t.options.restoration==="current"&&(r=typeof t.Content=="string"?t.Content:e("<div></div>").append(t.Content).html()),r&&t.$el.attr("title",r),t.$el.removeClass("tooltipstered").removeData("tooltipster-ns").removeData("tooltipster-initialTitle")}else n=e.grep(n,function(e,n){return e!==t.namespace}),t.$el.data("tooltipster-ns",n);return t},elementIcon:function(){return this.$el[0]!==this.$elProxy[0]?this.$elProxy[0]:undefined},elementTooltip:function(){return this.$tooltip?this.$tooltip[0]:undefined},option:function(e,t){return typeof t=="undefined"?this.options[e]:(this.options[e]=t,this)},status:function(){return this.Status}},e.fn[r]=function(){var t=arguments;if(this.length===0){if(typeof t[0]=="string"){var n=!0;switch(t[0]){case"setDefaults":e.extend(i,t[1]);break;default:n=!1}return n?!0:this}return this}if(typeof t[0]=="string"){var r="#*$~&";return this.each(function(){var n=e(this).data("tooltipster-ns"),i=n?e(this).data(n[0]):null;if(!i)throw new Error("You called Tooltipster's \""+t[0]+'" method on an uninitialized element');if(typeof i[t[0]]!="function")throw new Error('Unknown method .tooltipster("'+t[0]+'")');var s=i[t[0]](t[1],t[2]);if(s!==i)return r=s,!1}),r!=="#*$~&"?r:this}var o=[],u=t[0]&&typeof t[0].multiple!="undefined",a=u&&t[0].multiple||!u&&i.multiple,f=t[0]&&typeof t[0].debug!="undefined",l=f&&t[0].debug||!f&&i.debug;return this.each(function(){var n=!1,r=e(this).data("tooltipster-ns"),i=null;r?a?n=!0:l&&console.log('Tooltipster: one or more tooltips are already attached to this element: ignoring. Use the "multiple" option to attach more tooltips.'):n=!0,n&&(i=new s(this,t[0]),r||(r=[]),r.push(i.namespace),e(this).data("tooltipster-ns",r),e(this).data(i.namespace,i)),o.push(i)}),a?o:this};var u="ontouchstart"in t,a=!1;e("body").one("mousemove",function(){a=!0})}(jQuery,window,document),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var o=t||window.event,u=a.call(arguments,1),f=0,h=0,p=0,v=0,m=0,g=0;if(t=e.event.fix(o),t.type="mousewheel","detail"in o&&(p=-1*o.detail),"wheelDelta"in o&&(p=o.wheelDelta),"wheelDeltaY"in o&&(p=o.wheelDeltaY),"wheelDeltaX"in o&&(h=-1*o.wheelDeltaX),"axis"in o&&o.axis===o.HORIZONTAL_AXIS&&(h=-1*p,p=0),f=0===p?h:p,"deltaY"in o&&(p=-1*o.deltaY,f=p),"deltaX"in o&&(h=o.deltaX,0===p&&(f=-1*h)),0!==p||0!==h){if(1===o.deltaMode){var y=e.data(this,"mousewheel-line-height");f*=y,p*=y,h*=y}else if(2===o.deltaMode){var b=e.data(this,"mousewheel-page-height");f*=b,p*=b,h*=b}if(v=Math.max(Math.abs(p),Math.abs(h)),(!s||s>v)&&(s=v,r(o,v)&&(s/=40)),r(o,v)&&(f/=40,h/=40,p/=40),f=Math[f>=1?"floor":"ceil"](f/s),h=Math[h>=1?"floor":"ceil"](h/s),p=Math[p>=1?"floor":"ceil"](p/s),l.settings.normalizeOffset&&this.getBoundingClientRect){var w=this.getBoundingClientRect();m=t.clientX-w.left,g=t.clientY-w.top}return t.deltaX=h,t.deltaY=p,t.deltaFactor=s,t.offsetX=m,t.offsetY=g,t.deltaMode=0,u.unshift(t,f,h,p),i&&clearTimeout(i),i=setTimeout(n,200),(e.event.dispatch||e.event.handle).apply(this,u)}}function n(){s=null}function r(e,t){return l.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var i,s,o=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],u="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],a=Array.prototype.slice;if(e.event.fixHooks)for(var f=o.length;f;)e.event.fixHooks[o[--f]]=e.event.mouseHooks;var l=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=u.length;n;)this.addEventListener(u[--n],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",l.getLineHeight(this)),e.data(this,"mousewheel-page-height",l.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=u.length;n;)this.removeEventListener(u[--n],t,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var n=e(t),r=n["offsetParent"in e.fn?"offsetParent":"parent"]();return r.length||(r=e("body")),parseInt(r.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){e.extend(e.fn,{validate:function(t){if(!this.length)return void (t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var n=e.data(this[0],"validator");return n?n:(this.attr("novalidate","novalidate"),n=new e.validator(t,this[0]),e.data(this[0],"validator",n),n.settings.onsubmit&&(this.on("click.validate",":submit",function(t){n.settings.submitHandler&&(n.submitButton=t.target),e(this).hasClass("cancel")&&(n.cancelSubmit=!0),void 0!==e(this).attr("formnovalidate")&&(n.cancelSubmit=!0)}),this.on("submit.validate",function(t){function r(){var r,i;return n.settings.submitHandler?(n.submitButton&&(r=e("<input type='hidden'/>").attr("name",n.submitButton.name).val(e(n.submitButton).val()).appendTo(n.currentForm)),i=n.settings.submitHandler.call(n,n.currentForm,t),n.submitButton&&r.remove(),void 0!==i?i:!1):!0}return n.settings.debug&&t.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,r()):n.form()?n.pendingRequest?(n.formSubmitted=!0,!1):r():(n.focusInvalid(),!1)})),n)},valid:function(){var t,n,r;return e(this[0]).is("form")?t=this.validate().form():(r=[],t=!0,n=e(this[0].form).validate(),this.each(function(){t=n.element(this)&&t,t||(r=r.concat(n.errorList))}),n.errorList=r),t},rules:function(t,n){if(this.length){var r,i,s,o,u,f,l=this[0];if(t)switch(r=e.data(l.form,"validator").settings,i=r.rules,s=e.validator.staticRules(l),t){case"add":e.extend(s,e.validator.normalizeRule(n)),delete s.messages,i[l.name]=s,n.messages&&(r.messages[l.name]=e.extend(r.messages[l.name],n.messages));break;case"remove":return n?(f={},e.each(n.split(/\s/),function(t,n){f[n]=s[n],delete s[n],"required"===n&&e(l).removeAttr("aria-required")}),f):(delete i[l.name],s)}return o=e.validator.normalizeRules(e.extend({},e.validator.classRules(l),e.validator.attributeRules(l),e.validator.dataRules(l),e.validator.staticRules(l)),l),o.required&&(u=o.required,delete o.required,o=e.extend({required:u},o),e(l).attr("aria-required","true")),o.remote&&(u=o.remote,delete o.remote,o=e.extend(o,{remote:u})),o}}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+e(t).val())},filled:function(t){var n=e(t).val();return null!==n&&!!e.trim(""+n)},unchecked:function(t){return!e(t).prop("checked")}}),e.validator=function(t,n){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=n,this.init()},e.validator.format=function(t,n){return 1===arguments.length?function(){var n=e.makeArray(arguments);return n.unshift(t),e.validator.format.apply(this,n)}:void 0===n?t:(arguments.length>2&&n.constructor!==Array&&(n=e.makeArray(arguments).slice(1)),n.constructor!==Array&&(n=[n]),e.each(n,function(e,n){t=t.replace(new RegExp("\\{"+e+"\\}","g"),function(){return n})}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(e)))},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(t,n){var r=[16,17,18,20,35,36,37,38,39,40,45,144,225];9===n.which&&""===this.elementValue(t)||-1!==e.inArray(n.keyCode,r)||(t.name in this.submitted||t.name in this.invalid)&&this.element(t)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,n,r){"radio"===t.type?this.findByName(t.name).addClass(n).removeClass(r):e(t).addClass(n).removeClass(r)},unhighlight:function(t,n,r){"radio"===t.type?this.findByName(t.name).removeClass(n).addClass(r):e(t).removeClass(n).addClass(r)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}."),step:e.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var n=e.data(this.form,"validator"),r="on"+t.type.replace(/^validate/,""),i=n.settings;i[r]&&!e(this).is(i.ignore)&&i[r].call(n,this,t)}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var n,r=this.groups={};e.each(this.settings.groups,function(t,n){"string"==typeof n&&(n=n.split(/\s/)),e.each(n,function(e,n){r[n]=t})}),n=this.settings.rules,e.each(n,function(t,r){n[t]=e.validator.normalizeRule(r)}),e(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable]",t).on("click.validate","select, option, [type='radio'], [type='checkbox']",t),this.settings.invalidHandler&&e(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler),e(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){var n,r,i=this.clean(t),s=this.validationTargetFor(i),o=this,u=!0;return void 0===s?delete this.invalid[i.name]:(this.prepareElement(s),this.currentElements=e(s),r=this.groups[s.name],r&&e.each(this.groups,function(e,t){t===r&&e!==s.name&&(i=o.validationTargetFor(o.clean(o.findByName(e))),i&&i.name in o.invalid&&(o.currentElements.push(i),u=u&&o.check(i)))}),n=this.check(s)!==!1,u=u&&n,n?this.invalid[s.name]=!1:this.invalid[s.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),e(t).attr("aria-invalid",!n)),u},showErrors:function(t){if(t){var n=this;e.extend(this.errorMap,t),this.errorList=e.map(this.errorMap,function(e,t){return{message:e,element:n.findByName(t)[0]}}),this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var t=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(t)},resetElements:function(e){var t;if(this.settings.unhighlight)for(t=0;e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,""),this.findByName(e[t].name).removeClass(this.settings.validClass);else e.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t,n=0;for(t in e)e[t]&&n++;return n},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(e){e.not(this.containers).text(""),this.addWrapper(e).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&1===e.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var t=this,n={};return e(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var r=this.name||e(this).attr("name");return!r&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.hasAttribute("contenteditable")&&(this.form=e(this).closest("form")[0]),r in n||!t.objectLength(e(this).rules())?!1:(n[r]=!0,!0)})},clean:function(t){return e(t)[0]},errors:function(){var t=this.settings.errorClass.split(" ").join(".");return e(this.settings.errorElement+"."+t,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([])},reset:function(){this.resetInternals(),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(t){var n,r,i=e(t),s=t.type;return"radio"===s||"checkbox"===s?this.findByName(t.name).filter(":checked").val():"number"===s&&"undefined"!=typeof t.validity?t.validity.badInput?"NaN":i.val():(n=t.hasAttribute("contenteditable")?i.text():i.val(),"file"===s?"C:\\fakepath\\"===n.substr(0,12)?n.substr(12):(r=n.lastIndexOf("/"),r>=0?n.substr(r+1):(r=n.lastIndexOf("\\"),r>=0?n.substr(r+1):n)):"string"==typeof n?n.replace(/\r/g,""):n)},check:function(t){t=this.validationTargetFor(this.clean(t));var n,r,i,s=e(t).rules(),o=e.map(s,function(e,t){return t}).length,u=!1,f=this.elementValue(t);if("function"==typeof s.normalizer){if(f=s.normalizer.call(t,f),"string"!=typeof f)throw new TypeError("The normalizer should return a string value.");delete s.normalizer}for(r in s){i={method:r,parameters:s[r]};try{if(n=e.validator.methods[r].call(this,f,t,i.parameters),"dependency-mismatch"===n&&1===o){u=!0;continue}if(u=!1,"pending"===n)return void (this.toHide=this.toHide.not(this.errorsFor(t)));if(!n)return this.formatAndAdd(t,i),!1}catch(l){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+i.method+"' method.",l),l instanceof TypeError&&(l.message+=".  Exception occurred when checking element "+t.id+", check the '"+i.method+"' method."),l}}if(!u)return this.objectLength(s)&&this.successList.push(t),!0},customDataMessage:function(t,n){return e(t).data("msg"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase())||e(t).data("msg")},customMessage:function(e,t){var n=this.settings.messages[e];return n&&(n.constructor===String?n:n[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(t,n){var r=this.findDefined(this.customMessage(t.name,n.method),this.customDataMessage(t,n.method),!this.settings.ignoreTitle&&t.title||void 0,e.validator.messages[n.method],"<strong>Warning: No message defined for "+t.name+"</strong>"),i=/\$?\{(\d+)\}/g;return"function"==typeof r?r=r.call(this,n.parameters,t):i.test(r)&&(r=e.validator.format(r.replace(i,"{$1}"),n.parameters)),r},formatAndAdd:function(e,t){var n=this.defaultMessage(e,t);this.errorList.push({message:n,element:e,method:t.method}),this.errorMap[e.name]=n,this.submitted[e.name]=n},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t,n;for(e=0;this.errorList[e];e++)n=this.errorList[e],this.settings.highlight&&this.settings.highlight.call(this,n.element,this.settings.errorClass,this.settings.validClass),this.showLabel(n.element,n.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,n){var r,i,s,o,u=this.errorsFor(t),f=this.idOrName(t),l=e(t).attr("aria-describedby");u.length?(u.removeClass(this.settings.validClass).addClass(this.settings.errorClass),u.html(n)):(u=e("<"+this.settings.errorElement+">").attr("id",f+"-error").addClass(this.settings.errorClass).html(n||""),r=u,this.settings.wrapper&&(r=u.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(r):this.settings.errorPlacement?this.settings.errorPlacement(r,e(t)):r.insertAfter(t),u.is("label")?u.attr("for",f):0===u.parents("label[for='"+this.escapeCssMeta(f)+"']").length&&(s=u.attr("id"),l?l.match(new RegExp("\\b"+this.escapeCssMeta(s)+"\\b"))||(l+=" "+s):l=s,e(t).attr("aria-describedby",l),i=this.groups[t.name],i&&(o=this,e.each(o.groups,function(t,n){n===i&&e("[name='"+o.escapeCssMeta(t)+"']",o.currentForm).attr("aria-describedby",u.attr("id"))})))),!n&&this.settings.success&&(u.text(""),"string"==typeof this.settings.success?u.addClass(this.settings.success):this.settings.success(u,t)),this.toShow=this.toShow.add(u)},errorsFor:function(t){var n=this.escapeCssMeta(this.idOrName(t)),r=e(t).attr("aria-describedby"),i="label[for='"+n+"'], label[for='"+n+"'] *";return r&&(i=i+", #"+this.escapeCssMeta(r).replace(/\s+/g,", #")),this.errors().filter(i)},escapeCssMeta:function(e){return e.replace(/([\\!"#$%&'()*+,./:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name)),e(t).not(this.settings.ignore)[0]},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){return e(this.currentForm).find("[name='"+this.escapeCssMeta(t)+"']")},getLength:function(t,n){switch(n.nodeName.toLowerCase()){case"select":return e("option:selected",n).length;case"input":if(this.checkable(n))return this.findByName(n.name).filter(":checked").length}return t.length},depend:function(e,t){return this.dependTypes[typeof e]?this.dependTypes[typeof e](e,t):!0},dependTypes:{"boolean":function(e){return e},string:function(t,n){return!!e(t,n.form).length},"function":function(e,t){return e(t)}},optional:function(t){var n=this.elementValue(t);return!e.validator.methods.required.call(this,n,t)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,e(t).addClass(this.settings.pendingClass),this.pending[t.name]=!0)},stopRequest:function(t,n){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],e(t).removeClass(this.settings.pendingClass),n&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!n&&0===this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t,n){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,{method:n})})},destroy:function(){this.resetForm(),e(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,n){t.constructor===String?this.classRuleSettings[t]=n:e.extend(this.classRuleSettings,t)},classRules:function(t){var n={},r=e(t).attr("class");return r&&e.each(r.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(n,e.validator.classRuleSettings[this])}),n},normalizeAttributeRule:function(e,t,n,r){/min|max|step/.test(n)&&(null===t||/number|range|text/.test(t))&&(r=Number(r),isNaN(r)&&(r=void 0)),r||0===r?e[n]=r:t===n&&"range"!==t&&(e[n]=!0)},attributeRules:function(t){var n,r,i={},s=e(t),o=t.getAttribute("type");for(n in e.validator.methods)"required"===n?(r=t.getAttribute(n),""===r&&(r=!0),r=!!r):r=s.attr(n),this.normalizeAttributeRule(i,o,n,r);return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},dataRules:function(t){var n,r,i={},s=e(t),o=t.getAttribute("type");for(n in e.validator.methods)r=s.data("rule"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase()),this.normalizeAttributeRule(i,o,n,r);return i},staticRules:function(t){var n={},r=e.data(t.form,"validator");return r.settings.rules&&(n=e.validator.normalizeRule(r.settings.rules[t.name])||{}),n},normalizeRules:function(t,n){return e.each(t,function(r,i){if(i===!1)return void delete t[r];if(i.param||i.depends){var s=!0;switch(typeof i.depends){case"string":s=!!e(i.depends,n.form).length;break;case"function":s=i.depends.call(n,n)}s?t[r]=void 0!==i.param?i.param:!0:(e.data(n.form,"validator").resetElements(e(n)),delete t[r])}}),e.each(t,function(r,i){t[r]=e.isFunction(i)&&"normalizer"!==r?i(n):i}),e.each(["minlength","maxlength"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){var n;t[this]&&(e.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:"string"==typeof t[this]&&(n=t[this].replace(/[\[\]]/g,"").split(/[\s,]+/),t[this]=[Number(n[0]),Number(n[1])]))}),e.validator.autoCreateRanges&&(null!=t.min&&null!=t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),null!=t.minlength&&null!=t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if("string"==typeof t){var n={};e.each(t.split(/\s/),function(){n[this]=!0}),t=n}return t},addMethod:function(t,n,r){e.validator.methods[t]=n,e.validator.messages[t]=void 0!==r?r:e.validator.messages[t],n.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,n,r){if(!this.depend(r,n))return"dependency-mismatch";if("select"===n.nodeName.toLowerCase()){var i=e(n).val();return i&&i.length>0}return this.checkable(n)?this.getLength(t,n)>0:t.length>0},email:function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},url:function(e,t){return this.optional(t)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test((new Date(e)).toString())},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:function(e,t){return this.optional(t)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},minlength:function(t,n,r){var i=e.isArray(t)?t.length:this.getLength(t,n);return this.optional(n)||i>=r},maxlength:function(t,n,r){var i=e.isArray(t)?t.length:this.getLength(t,n);return this.optional(n)||r>=i},rangelength:function(t,n,r){var i=e.isArray(t)?t.length:this.getLength(t,n);return this.optional(n)||i>=r[0]&&i<=r[1]},min:function(e,t,n){return this.optional(t)||e>=n},max:function(e,t,n){return this.optional(t)||n>=e},range:function(e,t,n){return this.optional(t)||e>=n[0]&&e<=n[1]},step:function(t,n,r){var i=e(n).attr("type"),s="Step attribute on input type "+i+" is not supported.",o=["text","number","range"],u=new RegExp("\\b"+i+"\\b"),f=i&&!u.test(o.join());if(f)throw new Error(s);return this.optional(n)||t%r===0},equalTo:function(t,n,r){var i=e(r);return this.settings.onfocusout&&i.not(".validate-equalTo-blur").length&&i.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){e(n).valid()}),t===i.val()},remote:function(t,n,r,i){if(this.optional(n))return"dependency-mismatch";i="string"==typeof i&&i||"remote";var s,o,u,f=this.previousValue(n,i);return this.settings.messages[n.name]||(this.settings.messages[n.name]={}),f.originalMessage=f.originalMessage||this.settings.messages[n.name][i],this.settings.messages[n.name][i]=f.message,r="string"==typeof r&&{url:r}||r,u=e.param(e.extend({data:t},r.data)),f.old===u?f.valid:(f.old=u,s=this,this.startRequest(n),o={},o[n.name]=t,e.ajax(e.extend(!0,{mode:"abort",port:"validate"+n.name,dataType:"json",data:o,context:s.currentForm,success:function(e){var r,o,u,a=e===!0||"true"===e;s.settings.messages[n.name][i]=f.originalMessage,a?(u=s.formSubmitted,s.resetInternals(),s.toHide=s.errorsFor(n),s.formSubmitted=u,s.successList.push(n),s.invalid[n.name]=!1,s.showErrors()):(r={},o=e||s.defaultMessage(n,{method:i,parameters:t}),r[n.name]=f.message=o,s.invalid[n.name]=!0,s.showErrors(r)),f.valid=a,s.stopRequest(n,a)}},r)),"pending")}}});var t,n={};e.ajaxPrefilter?e.ajaxPrefilter(function(e,t,r){var i=e.port;"abort"===e.mode&&(n[i]&&n[i].abort(),n[i]=r)}):(t=e.ajax,e.ajax=function(r){var i=("mode"in r?r:e.ajaxSettings).mode,s=("port"in r?r:e.ajaxSettings).port;return"abort"===i?(n[s]&&n[s].abort(),n[s]=t.apply(this,arguments),n[s]):t.apply(this,arguments)})}),+function(e){"use strict";function n(n){return this.each(function(){var r=e(this),i=r.data("bs.affix"),s=typeof n=="object"&&n;i||r.data("bs.affix",i=new t(this,s)),typeof n=="string"&&i[n]()})}var t=function(n,r){this.options=e.extend({},t.DEFAULTS,r),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(n),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};t.VERSION="3.3.6",t.RESET="affix affix-top affix-bottom",t.DEFAULTS={offset:0,target:window},t.prototype.getState=function(e,t,n,r){var i=this.$target.scrollTop(),s=this.$element.offset(),o=this.$target.height();if(n!=null&&this.affixed=="top")return i<n?"top":!1;if(this.affixed=="bottom")return n!=null?i+this.unpin<=s.top?!1:"bottom":i+o<=e-r?!1:"bottom";var u=this.affixed==null,a=u?i:s.top,f=u?o:t;return n!=null&&i<=n?"top":r!=null&&a+f>=e-r?"bottom":!1},t.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(t.RESET).addClass("affix");var e=this.$target.scrollTop(),n=this.$element.offset();return this.pinnedOffset=n.top-e},t.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},t.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var n=this.$element.height(),r=this.options.offset,i=r.top,s=r.bottom,o=Math.max(e(document).height(),e(document.body).height());typeof r!="object"&&(s=i=r),typeof i=="function"&&(i=r.top(this.$element)),typeof s=="function"&&(s=r.bottom(this.$element));var u=this.getState(o,n,i,s);if(this.affixed!=u){this.unpin!=null&&this.$element.css("top","");var a="affix"+(u?"-"+u:""),f=e.Event(a+".bs.affix");this.$element.trigger(f);if(f.isDefaultPrevented())return;this.affixed=u,this.unpin=u=="bottom"?this.getPinnedOffset():null,this.$element.removeClass(t.RESET).addClass(a).trigger(a.replace("affix","affixed")+".bs.affix")}u=="bottom"&&this.$element.offset({top:o-n-s})};var r=e.fn.affix;e.fn.affix=n,e.fn.affix.Constructor=t,e.fn.affix.noConflict=function(){return e.fn.affix=r,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),r=t.data();r.offset=r.offset||{},r.offsetBottom!=null&&(r.offset.bottom=r.offsetBottom),r.offsetTop!=null&&(r.offset.top=r.offsetTop),n.call(t,r)})})}(jQuery),+function(e){"use strict";function r(t){return this.each(function(){var r=e(this),i=r.data("bs.alert");i||r.data("bs.alert",i=new n(this)),typeof t=="string"&&i[t].call(r)})}var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.VERSION="3.3.6",n.TRANSITION_DURATION=150,n.prototype.close=function(t){function o(){s.detach().trigger("closed.bs.alert").remove()}var r=e(this),i=r.attr("data-target");i||(i=r.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,""));var s=e(i);t&&t.preventDefault(),s.length||(s=r.closest(".alert")),s.trigger(t=e.Event("close.bs.alert"));if(t.isDefaultPrevented())return;s.removeClass("in"),e.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",o).emulateTransitionEnd(n.TRANSITION_DURATION):o()};var i=e.fn.alert;e.fn.alert=r,e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=i,this},e(document).on("click.bs.alert.data-api",t,n.prototype.close)}(jQuery),+function(e){"use strict";function n(n){return this.each(function(){var r=e(this),i=r.data("bs.button"),s=typeof n=="object"&&n;i||r.data("bs.button",i=new t(this,s)),n=="toggle"?i.toggle():n&&i.setState(n)})}var t=function(n,r){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,r),this.isLoading=!1};t.VERSION="3.3.6",t.DEFAULTS={loadingText:"loading..."},t.prototype.setState=function(t){var n="disabled",r=this.$element,i=r.is("input")?"val":"html",s=r.data();t+="Text",s.resetText==null&&r.data("resetText",r[i]()),setTimeout(e.proxy(function(){r[i](s[t]==null?this.options[t]:s[t]),t=="loadingText"?(this.isLoading=!0,r.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,r.removeClass(n).removeAttr(n))},this),0)},t.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");n.prop("type")=="radio"?(n.prop("checked")&&(e=!1),t.find(".active").removeClass("active"),this.$element.addClass("active")):n.prop("type")=="checkbox"&&(n.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),e&&
n.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var r=e.fn.button;e.fn.button=n,e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=r,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){var r=e(t.target);r.hasClass("btn")||(r=r.closest(".btn")),n.call(r,"toggle"),!e(t.target).is('input[type="radio"]')&&!e(t.target).is('input[type="checkbox"]')&&t.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),+function(e){"use strict";function n(n){return this.each(function(){var r=e(this),i=r.data("bs.carousel"),s=e.extend({},t.DEFAULTS,r.data(),typeof n=="object"&&n),o=typeof n=="string"?n:s.slide;i||r.data("bs.carousel",i=new t(this,s)),typeof n=="number"?i.to(n):o?i[o]():s.interval&&i.pause().cycle()})}var t=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),this.options.pause=="hover"&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};t.VERSION="3.3.6",t.TRANSITION_DURATION=600,t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},t.prototype.keydown=function(e){if(/input|textarea/i.test(e.target.tagName))return;switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()},t.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},t.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},t.prototype.getItemForDirection=function(e,t){var n=this.getItemIndex(t),r=e=="prev"&&n===0||e=="next"&&n==this.$items.length-1;if(r&&!this.options.wrap)return t;var i=e=="prev"?-1:1,s=(n+i)%this.$items.length;return this.$items.eq(s)},t.prototype.to=function(e){var t=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(e>this.$items.length-1||e<0)return;return this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",this.$items.eq(e))},t.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},t.prototype.next=function(){if(this.sliding)return;return this.slide("next")},t.prototype.prev=function(){if(this.sliding)return;return this.slide("prev")},t.prototype.slide=function(n,r){var i=this.$element.find(".item.active"),s=r||this.getItemForDirection(n,i),o=this.interval,u=n=="next"?"left":"right",a=this;if(s.hasClass("active"))return this.sliding=!1;var f=s[0],l=e.Event("slide.bs.carousel",{relatedTarget:f,direction:u});this.$element.trigger(l);if(l.isDefaultPrevented())return;this.sliding=!0,o&&this.pause();if(this.$indicators.length){this.$indicators.find(".active").removeClass("active");var c=e(this.$indicators.children()[this.getItemIndex(s)]);c&&c.addClass("active")}var h=e.Event("slid.bs.carousel",{relatedTarget:f,direction:u});return e.support.transition&&this.$element.hasClass("slide")?(s.addClass(n),s[0].offsetWidth,i.addClass(u),s.addClass(u),i.one("bsTransitionEnd",function(){s.removeClass([n,u].join(" ")).addClass("active"),i.removeClass(["active",u].join(" ")),a.sliding=!1,setTimeout(function(){a.$element.trigger(h)},0)}).emulateTransitionEnd(t.TRANSITION_DURATION)):(i.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(h)),o&&this.cycle(),this};var r=e.fn.carousel;e.fn.carousel=n,e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=r,this};var i=function(t){var r,i=e(this),s=e(i.attr("data-target")||(r=i.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""));if(!s.hasClass("carousel"))return;var o=e.extend({},s.data(),i.data()),u=i.attr("data-slide-to");u&&(o.interval=!1),n.call(s,o),u&&s.data("bs.carousel").to(u),t.preventDefault()};e(document).on("click.bs.carousel.data-api","[data-slide]",i).on("click.bs.carousel.data-api","[data-slide-to]",i),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery),+function(e){"use strict";function n(t){var n,r=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(r)}function r(n){return this.each(function(){var r=e(this),i=r.data("bs.collapse"),s=e.extend({},t.DEFAULTS,r.data(),typeof n=="object"&&n);!i&&s.toggle&&/show|hide/.test(n)&&(s.toggle=!1),i||r.data("bs.collapse",i=new t(this,s)),typeof n=="string"&&i[n]()})}var t=function(n,r){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,r),this.$trigger=e('[data-toggle="collapse"][href="#'+n.id+'"],'+'[data-toggle="collapse"][data-target="#'+n.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};t.VERSION="3.3.6",t.TRANSITION_DURATION=350,t.DEFAULTS={toggle:!0},t.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},t.prototype.show=function(){if(this.transitioning||this.$element.hasClass("in"))return;var n,i=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(i&&i.length){n=i.data("bs.collapse");if(n&&n.transitioning)return}var s=e.Event("show.bs.collapse");this.$element.trigger(s);if(s.isDefaultPrevented())return;i&&i.length&&(r.call(i,"hide"),n||i.data("bs.collapse",null));var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var u=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return u.call(this);var a=e.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",e.proxy(u,this)).emulateTransitionEnd(t.TRANSITION_DURATION)[o](this.$element[0][a])},t.prototype.hide=function(){if(this.transitioning||!this.$element.hasClass("in"))return;var n=e.Event("hide.bs.collapse");this.$element.trigger(n);if(n.isDefaultPrevented())return;var r=this.dimension();this.$element[r](this.$element[r]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!e.support.transition)return i.call(this);this.$element[r](0).one("bsTransitionEnd",e.proxy(i,this)).emulateTransitionEnd(t.TRANSITION_DURATION)},t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},t.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(t,r){var i=e(r);this.addAriaAndCollapsedClass(n(i),i)},this)).end()},t.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var i=e.fn.collapse;e.fn.collapse=r,e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=i,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var i=e(this);i.attr("data-target")||t.preventDefault();var s=n(i),o=s.data("bs.collapse"),u=o?"toggle":i.data();r.call(s,u)})}(jQuery),+function(e){"use strict";function i(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&e(n);return r&&r.length?r:t.parent()}function s(r){if(r&&r.which===3)return;e(t).remove(),e(n).each(function(){var t=e(this),n=i(t),s={relatedTarget:this};if(!n.hasClass("open"))return;if(r&&r.type=="click"&&/input|textarea/i.test(r.target.tagName)&&e.contains(n[0],r.target))return;n.trigger(r=e.Event("hide.bs.dropdown",s));if(r.isDefaultPrevented())return;t.attr("aria-expanded","false"),n.removeClass("open").trigger(e.Event("hidden.bs.dropdown",s))})}function o(t){return this.each(function(){var n=e(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new r(this)),typeof t=="string"&&i[t].call(n)})}var t=".dropdown-backdrop",n='[data-toggle="dropdown"]',r=function(t){e(t).on("click.bs.dropdown",this.toggle)};r.VERSION="3.3.6",r.prototype.toggle=function(t){var n=e(this);if(n.is(".disabled, :disabled"))return;var r=i(n),o=r.hasClass("open");s();if(!o){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",s);var u={relatedTarget:this};r.trigger(t=e.Event("show.bs.dropdown",u));if(t.isDefaultPrevented())return;n.trigger("focus").attr("aria-expanded","true"),r.toggleClass("open").trigger(e.Event("shown.bs.dropdown",u))}return!1},r.prototype.keydown=function(t){if(!/(38|40|27|32)/.test(t.which)||/input|textarea/i.test(t.target.tagName))return;var r=e(this);t.preventDefault(),t.stopPropagation();if(r.is(".disabled, :disabled"))return;var s=i(r),o=s.hasClass("open");if(!o&&t.which!=27||o&&t.which==27)return t.which==27&&s.find(n).trigger("focus"),r.trigger("click");var u=" li:not(.disabled):visible a",a=s.find(".dropdown-menu"+u);if(!a.length)return;var f=a.index(t.target);t.which==38&&f>0&&f--,t.which==40&&f<a.length-1&&f++,~f||(f=0),a.eq(f).trigger("focus")};var u=e.fn.dropdown;e.fn.dropdown=o,e.fn.dropdown.Constructor=r,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=u,this},e(document).on("click.bs.dropdown.data-api",s).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",n,r.prototype.toggle).on("keydown.bs.dropdown.data-api",n,r.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",r.prototype.keydown)}(jQuery),+function(e){"use strict";function n(n,r){return this.each(function(){var i=e(this),s=i.data("bs.modal"),o=e.extend({},t.DEFAULTS,i.data(),typeof n=="object"&&n);s||i.data("bs.modal",s=new t(this,o)),typeof n=="string"?s[n](r):o.show&&s.show(r)})}var t=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};t.VERSION="3.3.6",t.TRANSITION_DURATION=300,t.BACKDROP_TRANSITION_DURATION=150,t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},t.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},t.prototype.show=function(n){var r=this,i=e.Event("show.bs.modal",{relatedTarget:n});this.$element.trigger(i);if(this.isShown||i.isDefaultPrevented())return;this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){r.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(r.$element)&&(r.ignoreBackdropClick=!0)})}),this.backdrop(function(){var i=e.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.adjustDialog(),i&&r.$element[0].offsetWidth,r.$element.addClass("in"),r.enforceFocus();var s=e.Event("shown.bs.modal",{relatedTarget:n});i?r.$dialog.one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(t.TRANSITION_DURATION):r.$element.trigger("focus").trigger(s)})},t.prototype.hide=function(n){n&&n.preventDefault(),n=e.Event("hide.bs.modal"),this.$element.trigger(n);if(!this.isShown||n.isDefaultPrevented())return;this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(t.TRANSITION_DURATION):this.hideModal()},t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]!==e.target&&!this.$element.has(e.target).length&&this.$element.trigger("focus")},this))},t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){e.which==27&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},t.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},t.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},t.prototype.backdrop=function(n){var r=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=e.support.transition&&i;this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+i).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){if(this.ignoreBackdropClick){this.ignoreBackdropClick=!1;return}if(e.target!==e.currentTarget)return;this.options.backdrop=="static"?this.$element[0].focus():this.hide()},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in");if(!n)return;s?this.$backdrop.one("bsTransitionEnd",n).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):n()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){r.removeBackdrop(),n&&n()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):o()}else n&&n()},t.prototype.handleUpdate=function(){this.adjustDialog()},t.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},t.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},t.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},t.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},t.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},t.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var r=e.fn.modal;e.fn.modal=n,e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=r,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var r=e(this),i=r.attr("href"),s=e(r.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),o=s.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},s.data(),r.data());r.is("a")&&t.preventDefault(),s.one("show.bs.modal",function(e){if(e.isDefaultPrevented())return;s.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})}),n.call(s,o,this)})}(jQuery),+function(e){"use strict";function t(n,r){this.$body=e(document.body),this.$scrollElement=e(n).is(document.body)?e(window):e(n),this.options=e.extend({},t.DEFAULTS,r),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var r=e(this),i=r.data("bs.scrollspy"),s=typeof n=="object"&&n;i||r.data("bs.scrollspy",i=new t(this,s)),typeof n=="string"&&i[n]()})}t.VERSION="3.3.6",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,n="offset",r=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(n="position",r=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),i=t.data("target")||t.attr("href"),s=/^#./.test(i)&&e(i);return s&&s.length&&s.is(":visible")&&[[s[n]().top+r,i]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e=this.$scrollElement.scrollTop()+this.options.offset,t=this.getScrollHeight(),n=this.options.offset+t-this.$scrollElement.height(),r=this.offsets,i=this.targets,s=this.activeTarget,o;this.scrollHeight!=t&&this.refresh();if(e>=n)return s!=(o=i[i.length-1])&&this.activate(o);if(s&&e<r[0])return this.activeTarget=null,this.clear();for(o=r.length;o--;)s!=i[o]&&e>=r[o]&&(r[o+1]===undefined||e<r[o+1])&&this.activate(i[o])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',r=e(n).parents("li").addClass("active");r.parent(".dropdown-menu").length&&(r=r.closest("li.dropdown").addClass("active")),r.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var r=e.fn.scrollspy;e.fn.scrollspy=n,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=r,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery),+function(e){"use strict";function n(n){return this.each(function(){var r=e(this),i=r.data("bs.tab");i||r.data("bs.tab",i=new t(this)),typeof n=="string"&&i[n]()})}var t=function(t){this.element=e(t)};t.VERSION="3.3.6",t.TRANSITION_DURATION=150,t.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.data("target");r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));if(t.parent("li").hasClass("active"))return;var i=n.find(".active:last a"),s=e.Event("hide.bs.tab",{relatedTarget:t[0]}),o=e.Event("show.bs.tab",{relatedTarget:i[0]});i.trigger(s),t.trigger(o);if(o.isDefaultPrevented()||s.isDefaultPrevented())return;var u=e(r);this.activate(t.closest("li"),n),this.activate(u,u.parent(),function(){i.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:i[0]})})},t.prototype.activate=function(n,r,i){function u(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),n.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),o?(n[0].offsetWidth,n.addClass("in")):n.removeClass("fade"),n.parent(".dropdown-menu").length&&n.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}var s=r.find("> .active"),o=i&&e.support.transition&&(s.length&&s.hasClass("fade")||!!r.find("> .fade").length);s.length&&o?s.one("bsTransitionEnd",u).emulateTransitionEnd(t.TRANSITION_DURATION):u(),s.removeClass("in")};var r=e.fn.tab;e.fn.tab=n,e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=r,this};var i=function(t){t.preventDefault(),n.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery),+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(e.style[n]!==undefined)return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,r=this;e(this).one("bsTransitionEnd",function(){n=!0});var i=function(){n||e(r).trigger(e.support.transition.end)};return setTimeout(i,t),this},e(function(){e.support.transition=t();if(!e.support.transition)return;e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}}})}(jQuery),+function(e){"use strict";function n(n){return this.each(function(){var r=e(this),i=r.data("bs.tooltip"),s=typeof n=="object"&&n;if(!i&&/destroy|hide/.test(n))return;i||r.data("bs.tooltip",i=new t(this,s)),typeof n=="string"&&i[n]()})}var t=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};t.VERSION="3.3.6",t.TRANSITION_DURATION=150,t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},t.prototype.init=function(t,n,r){this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1};if(this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");var i=this.options.trigger.split(" ");for(var s=i.length;s--;){var o=i[s];if(o=="click")this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if(o!="manual"){var u=o=="hover"?"mouseenter":"focusin",a=o=="hover"?"mouseleave":"focusout";this.$element.on(u+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(a+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t},t.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,r){n[e]!=r&&(t[e]=r)}),t},t.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState[t.type=="focusin"?"focus":"hover"]=!0);if(n.tip().hasClass("in")||n.hoverState=="in"){n.hoverState="in";return}clearTimeout(n.timeout),n.hoverState="in";if(!n.options.delay||!n.options.delay.show)return n.show();n.timeout=setTimeout(function(){n.hoverState=="in"&&n.show()},n.options.delay.show)},t.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},t.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState[t.type=="focusout"?"focus":"hover"]=!1);if(n.isInStateTrue())return;clearTimeout(n.timeout),n.hoverState="out";if(!n.options.delay||!n.options.delay.hide)return n.hide();n.timeout=setTimeout(function(){n.hoverState=="out"&&n.hide()},n.options.delay.hide)},t.prototype.show=function(){var n=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(n);var r=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(n.isDefaultPrevented()||!r)return;var i=this,s=this.tip(),o=this.getUID(this.type);this.setContent(),s.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&s.addClass("fade");var u=typeof this.options.placement=="function"?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,a=/\s?auto?\s?/i,f=a.test(u);f&&(u=u.replace(a,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(u).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var l=this.getPosition(),c=s[0].offsetWidth,h=s[0].offsetHeight;if(f){var p=u,d=this.getPosition(this.$viewport);u=u=="bottom"&&l.bottom+h>d.bottom?"top":u=="top"&&l.top-h<d.top?"bottom":u=="right"&&l.right+c>d.width?"left":u=="left"&&l.left-c<d.left?"right":u,s.removeClass(p).addClass(u)}var v=this.getCalculatedOffset(u,l,c,h);this.applyPlacement(v,u);var m=function(){var e=i.hoverState;i.$element.trigger("shown.bs."+i.type),i.hoverState=null,e=="out"&&i.leave(i)};e.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",m).emulateTransitionEnd(t.TRANSITION_DURATION):m()}},t.prototype.applyPlacement=function(t,n){var r=this.tip(),i=r[0].offsetWidth,s=r[0].offsetHeight,o=parseInt(r.css("margin-top"),10),u=parseInt(r.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(u)&&(u=0),t.top+=o,t.left+=u,e.offset.setOffset(r[0],e.extend({using:function(e){r.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),r.addClass("in");var a=r[0].offsetWidth,f=r[0].offsetHeight;n=="top"&&f!=s&&(t.top=t.top+s-f);var l=this.getViewportAdjustedDelta(n,t,a,f);l.left?t.left+=l.left:t.top+=l.top;var c=/top|bottom/.test(n),h=c?l.left*2-i+a:l.top*2-s+f,p=c?"offsetWidth":"offsetHeight";r.offset(t),this.replaceArrow(h,r[0][p],c)},t.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(n){function o(){r.hoverState!="in"&&i.detach(),r.$element.removeAttr("aria-describedby").trigger("hidden.bs."+r.type),n&&n()}var r=this,i=e(this.$tip),s=e.Event("hide.bs."+this.type);this.$element.trigger(s);if(s.isDefaultPrevented())return;return i.removeClass("in"),e.support.transition&&i.hasClass("fade")?i.one("bsTransitionEnd",o).emulateTransitionEnd(t.TRANSITION_DURATION):o(),this.hoverState=null,this},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||typeof e.attr("data-original-title")!="string")&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],r=n.tagName=="BODY",i=n.getBoundingClientRect();i.width==null&&(i=e.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var s=r?{top:0,left:0}:t.offset(),o={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},u=r?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},i,o,u,s)},t.prototype.getCalculatedOffset=function(e,t,n,r){return e=="bottom"?{top:t.top+t.height,left:t.left+t.width/2-n/2}:e=="top"?{top:t.top-r,left:t.left+t.width/2-n/2}:e=="left"?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},t.prototype.getViewportAdjustedDelta=function(e,t,n,r){var i={top:0,left:0};if(!this.$viewport)return i;var s=this.options.viewport&&this.options.viewport.padding||0,o=this.getPosition(this.$viewport);if(/right|left/.test(e)){var u=t.top-s-o.scroll,a=t.top+s-o.scroll+r;u<o.top?i.top=o.top-u:a>o.top+o.height&&(i.top=o.top+o.height-a)}else{var f=t.left-s,l=t.left+s+n;f<o.left?i.left=o.left-f:l>o.right&&(i.left=o.left+o.width-l)}return i},t.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||(typeof n.title=="function"?n.title.call(t[0]):n.title),e},t.prototype.getUID=function(e){do e+=~~(Math.random()*1e6);while(document.getElementById(e));return e},t.prototype.tip=function(){if(!this.$tip){this.$tip=e(this.options.template);if(this.$tip.length!=1)throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!")}return this.$tip},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(t){var n=this;t&&(n=e(t.currentTarget).data("bs."+this.type),n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),t?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},t.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null})};var r=e.fn.tooltip;e.fn.tooltip=n,e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=r,this}}(jQuery),+function(e){"use strict";function n(n){return this.each(function(){var r=e(this),i=r.data("bs.popover"),s=typeof n=="object"&&n;if(!i&&/destroy|hide/.test(n))return;i||r.data("bs.popover",i=new t(this,s)),typeof n=="string"&&i[n]()})}var t=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");t.VERSION="3.3.6",t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),t.prototype.constructor=t,t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?typeof n=="string"?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},t.prototype.hasContent=function(){return this.getTitle()||this.getContent()},t.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||(typeof t.content=="function"?t.content.call(e[0]):t.content)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var r=e.fn.popover;e.fn.popover=n,e.fn.popover.Constructor=t,e.fn.popover.noConflict=function(){return e.fn.popover=r,this}}(jQuery),function(e,t){function n(){return new Date(Date.UTC.apply(Date,arguments))}function r(){var e=new Date;return n(e.getFullYear(),e.getMonth(),e.getDate())}function i(e,t){return e.getUTCFullYear()===t.getUTCFullYear()&&e.getUTCMonth()===t.getUTCMonth()&&e.getUTCDate()===t.getUTCDate()}function s(e){return function(){return this[e].apply(this,arguments)}}function f(t,n){function u(e,t){return t.toLowerCase()}var r=e(t).data(),i={},s,o=new RegExp("^"+n.toLowerCase()+"([A-Z])");n=new RegExp("^"+n.toLowerCase());for(var a in r)n.test(a)&&(s=a.replace(o,u),i[s]=r[a]);return i}function l(t){var n={};if(!v[t]){t=t.split("-")[0];if(!v[t])return}var r=v[t];return e.each(d,function(e,t){t in r&&(n[t]=r[t])}),n}var o=function(
){var t={get:function(e){return this.slice(e)[0]},contains:function(e){var t=e&&e.valueOf();for(var n=0,r=this.length;n<r;n++)if(this[n].valueOf()===t)return n;return-1},remove:function(e){this.splice(e,1)},replace:function(t){if(!t)return;e.isArray(t)||(t=[t]),this.clear(),this.push.apply(this,t)},clear:function(){this.length=0},copy:function(){var e=new o;return e.replace(this),e}};return function(){var n=[];return n.push.apply(n,arguments),e.extend(n,t),n}}(),u=function(t,n){this._process_options(n),this.dates=new o,this.viewDate=this.o.defaultViewDate,this.focusDate=null,this.element=e(t),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.hasClass("date")?this.element.find(".add-on, .input-group-addon, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&this.component.length===0&&(this.component=!1),this.picker=e(m.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot .today, tfoot .clear").attr("colspan",function(e,t){return parseInt(t)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.setDatesDisabled(this.o.datesDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};u.prototype={constructor:u,_process_options:function(i){this._o=e.extend({},this._o,i);var s=this.o=e.extend({},this._o),o=s.language;v[o]||(o=o.split("-")[0],v[o]||(o=p.language)),s.language=o;switch(s.startView){case 2:case"decade":s.startView=2;break;case 1:case"year":s.startView=1;break;default:s.startView=0}switch(s.minViewMode){case 1:case"months":s.minViewMode=1;break;case 2:case"years":s.minViewMode=2;break;default:s.minViewMode=0}s.startView=Math.max(s.startView,s.minViewMode),s.multidate!==!0&&(s.multidate=Number(s.multidate)||!1,s.multidate!==!1&&(s.multidate=Math.max(0,s.multidate))),s.multidateSeparator=String(s.multidateSeparator),s.weekStart%=7,s.weekEnd=(s.weekStart+6)%7;var u=m.parseFormat(s.format);s.startDate!==-Infinity&&(s.startDate?s.startDate instanceof Date?s.startDate=this._local_to_utc(this._zero_time(s.startDate)):s.startDate=m.parseDate(s.startDate,u,s.language):s.startDate=-Infinity),s.endDate!==Infinity&&(s.endDate?s.endDate instanceof Date?s.endDate=this._local_to_utc(this._zero_time(s.endDate)):s.endDate=m.parseDate(s.endDate,u,s.language):s.endDate=Infinity),s.daysOfWeekDisabled=s.daysOfWeekDisabled||[],e.isArray(s.daysOfWeekDisabled)||(s.daysOfWeekDisabled=s.daysOfWeekDisabled.split(/[,\s]*/)),s.daysOfWeekDisabled=e.map(s.daysOfWeekDisabled,function(e){return parseInt(e,10)}),s.datesDisabled=s.datesDisabled||[];if(!e.isArray(s.datesDisabled)){var a=[];a.push(m.parseDate(s.datesDisabled,u,s.language)),s.datesDisabled=a}s.datesDisabled=e.map(s.datesDisabled,function(e){return m.parseDate(e,u,s.language)});var f=String(s.orientation).toLowerCase().split(/\s+/g),l=s.orientation.toLowerCase();f=e.grep(f,function(e){return/^auto|left|right|top|bottom$/.test(e)}),s.orientation={x:"auto",y:"auto"};if(!!l&&l!=="auto")if(f.length===1)switch(f[0]){case"top":case"bottom":s.orientation.y=f[0];break;case"left":case"right":s.orientation.x=f[0]}else l=e.grep(f,function(e){return/^left|right$/.test(e)}),s.orientation.x=l[0]||"auto",l=e.grep(f,function(e){return/^top|bottom$/.test(e)}),s.orientation.y=l[0]||"auto";if(s.defaultViewDate){var c=s.defaultViewDate.year||(new Date).getFullYear(),h=s.defaultViewDate.month||0,d=s.defaultViewDate.day||1;s.defaultViewDate=n(c,h,d)}else s.defaultViewDate=r();s.showOnFocus=s.showOnFocus!==t?s.showOnFocus:!0},_events:[],_secondaryEvents:[],_applyEvents:function(e){for(var n=0,r,i,s;n<e.length;n++)r=e[n][0],e[n].length===2?(i=t,s=e[n][1]):e[n].length===3&&(i=e[n][1],s=e[n][2]),r.on(s,i)},_unapplyEvents:function(e){for(var n=0,r,i,s;n<e.length;n++)r=e[n][0],e[n].length===2?(s=t,i=e[n][1]):e[n].length===3&&(s=e[n][1],i=e[n][2]),r.off(i,s)},_buildEvents:function(){var t={keyup:e.proxy(function(t){e.inArray(t.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:e.proxy(this.keydown,this)};this.o.showOnFocus===!0&&(t.focus=e.proxy(this.show,this)),this.isInput?this._events=[[this.element,t]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),t],[this.component,{click:e.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:e.proxy(this.show,this)}]],this._events.push([this.element,"*",{blur:e.proxy(function(e){this._focused_from=e.target},this)}],[this.element,{blur:e.proxy(function(e){this._focused_from=e.target},this)}]),this._secondaryEvents=[[this.picker,{click:e.proxy(this.click,this)}],[e(window),{resize:e.proxy(this.place,this)}],[e(document),{"mousedown touchstart":e.proxy(function(e){this.element.is(e.target)||this.element.find(e.target).length||this.picker.is(e.target)||this.picker.find(e.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,n){var r=n||this.dates.get(-1),i=this._utc_to_local(r);this.element.trigger({type:t,date:i,dates:e.map(this.dates,this._utc_to_local),format:e.proxy(function(e,t){arguments.length===0?(e=this.dates.length-1,t=this.o.format):typeof e=="string"&&(t=e,e=this.dates.length-1),t=t||this.o.format;var n=this.dates.get(e);return m.formatDate(n,t,this.o.language)},this)})},show:function(){if(this.element.attr("readonly")&&this.o.enableOnReadonly===!1)return;return this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&e(this.element).blur(),this},hide:function(){return this.isInline?this:this.picker.is(":visible")?(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"),this):this},remove:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},_utc_to_local:function(e){return e&&new Date(e.getTime()+e.getTimezoneOffset()*6e4)},_local_to_utc:function(e){return e&&new Date(e.getTime()-e.getTimezoneOffset()*6e4)},_zero_time:function(e){return e&&new Date(e.getFullYear(),e.getMonth(),e.getDate())},_zero_utc_time:function(e){return e&&new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()))},getDates:function(){return e.map(this.dates,this._utc_to_local)},getUTCDates:function(){return e.map(this.dates,function(e){return new Date(e)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var e=this.dates.get(-1);return typeof e!="undefined"?new Date(e):null},clearDates:function(){var e;this.isInput?e=this.element:this.component&&(e=this.element.find("input")),e&&e.val("").change(),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()},setDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,t),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,e.map(t,this._utc_to_local)),this._trigger("changeDate"),this.setValue(),this},setDate:s("setDates"),setUTCDate:s("setUTCDates"),setValue:function(){var e=this.getFormattedDate();return this.isInput?this.element.val(e).change():this.component&&this.element.find("input").val(e).change(),this},getFormattedDate:function(n){n===t&&(n=this.o.format);var r=this.o.language;return e.map(this.dates,function(e){return m.formatDate(e,n,r)}).join(this.o.multidateSeparator)},setStartDate:function(e){return this._process_options({startDate:e}),this.update(),this.updateNavArrows(),this},setEndDate:function(e){return this._process_options({endDate:e}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(e){return this._process_options({daysOfWeekDisabled:e}),this.update(),this.updateNavArrows(),this},setDatesDisabled:function(e){this._process_options({datesDisabled:e}),this.update(),this.updateNavArrows()},place:function(){if(this.isInline)return this;var t=this.picker.outerWidth(),n=this.picker.outerHeight(),r=10,i=e(this.o.container).width(),s=e(this.o.container).height(),o=e(this.o.container).scrollTop(),u=e(this.o.container).offset(),a=[];this.element.parents().each(function(){var t=e(this).css("z-index");t!=="auto"&&t!==0&&a.push(parseInt(t))});var f=Math.max.apply(Math,a)+10,l=this.component?this.component.parent().offset():this.element.offset(),c=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),h=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),p=l.left-u.left,d=l.top-u.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),this.o.orientation.x!=="auto"?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),this.o.orientation.x==="right"&&(p-=t-h)):l.left<0?(this.picker.addClass("datepicker-orient-left"),p-=l.left-r):p+t>i?(this.picker.addClass("datepicker-orient-right"),p=l.left+h-t):this.picker.addClass("datepicker-orient-left");var v=this.o.orientation.y,m,g;v==="auto"&&(m=-o+d-n,g=o+s-(d+c+n),Math.max(m,g)===g?v="top":v="bottom"),this.picker.addClass("datepicker-orient-"+v),v==="top"?d+=c:d-=n+parseInt(this.picker.css("padding-top"));if(this.o.rtl){var y=i-(p+h);this.picker.css({top:d,right:y,zIndex:f})}else this.picker.css({top:d,left:p,zIndex:f});return this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var t=this.dates.copy(),n=[],r=!1;return arguments.length?(e.each(arguments,e.proxy(function(e,t){t instanceof Date&&(t=this._local_to_utc(t)),n.push(t)},this)),r=!0):(n=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),n&&this.o.multidate?n=n.split(this.o.multidateSeparator):n=[n],delete this.element.data().date),n=e.map(n,e.proxy(function(e){return m.parseDate(e,this.o.format,this.o.language)},this)),n=e.grep(n,e.proxy(function(e){return e<this.o.startDate||e>this.o.endDate||!e},this),!0),this.dates.replace(n),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate)),r?this.setValue():n.length&&String(t)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&t.length&&this._trigger("clearDate"),this.fill(),this},fillDow:function(){var e=this.o.weekStart,t="<tr>";if(this.o.calendarWeeks){this.picker.find(".datepicker-days thead tr:first-child .datepicker-switch").attr("colspan",function(e,t){return parseInt(t)+1});var n='<th class="cw">&#160;</th>';t+=n}while(e<this.o.weekStart+7)t+='<th class="dow">'+v[this.o.language].daysMin[e++%7]+"</th>";t+="</tr>",this.picker.find(".datepicker-days thead").append(t)},fillMonths:function(){var e="",t=0;while(t<12)e+='<span class="month">'+v[this.o.language].monthsShort[t++]+"</span>";this.picker.find(".datepicker-months td").html(e)},setRange:function(t){!t||!t.length?delete this.range:this.range=e.map(t,function(e){return e.valueOf()}),this.fill()},getClassNames:function(t){var n=[],r=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth(),o=new Date;return t.getUTCFullYear()<r||t.getUTCFullYear()===r&&t.getUTCMonth()<s?n.push("old"):(t.getUTCFullYear()>r||t.getUTCFullYear()===r&&t.getUTCMonth()>s)&&n.push("new"),this.focusDate&&t.valueOf()===this.focusDate.valueOf()&&n.push("focused"),this.o.todayHighlight&&t.getUTCFullYear()===o.getFullYear()&&t.getUTCMonth()===o.getMonth()&&t.getUTCDate()===o.getDate()&&n.push("today"),this.dates.contains(t)!==-1&&n.push("active"),(t.valueOf()<this.o.startDate||t.valueOf()>this.o.endDate||e.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled)!==-1)&&n.push("disabled"),this.o.datesDisabled.length>0&&e.grep(this.o.datesDisabled,function(e){return i(t,e)}).length>0&&n.push("disabled","disabled-date"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&n.push("range"),e.inArray(t.valueOf(),this.range)!==-1&&n.push("selected")),n},fill:function(){var r=new Date(this.viewDate),i=r.getUTCFullYear(),s=r.getUTCMonth(),o=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,u=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,a=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,f=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,l=v[this.o.language].today||v.en.today||"",c=v[this.o.language].clear||v.en.clear||"",h;if(isNaN(i)||isNaN(s))return;this.picker.find(".datepicker-days thead .datepicker-switch").text(v[this.o.language].months[s]+" "+i),this.picker.find("tfoot .today").text(l).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot .clear").text(c).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var p=n(i,s-1,28),d=m.getDaysInMonth(p.getUTCFullYear(),p.getUTCMonth());p.setUTCDate(d),p.setUTCDate(d-(p.getUTCDay()-this.o.weekStart+7)%7);var g=new Date(p);g.setUTCDate(g.getUTCDate()+42),g=g.valueOf();var y=[],b;while(p.valueOf()<g){if(p.getUTCDay()===this.o.weekStart){y.push("<tr>");if(this.o.calendarWeeks){var w=new Date(+p+(this.o.weekStart-p.getUTCDay()-7)%7*864e5),E=new Date(Number(w)+(11-w.getUTCDay())%7*864e5),S=new Date(Number(S=n(E.getUTCFullYear(),0,1))+(11-S.getUTCDay())%7*864e5),x=(E-S)/864e5/7+1;y.push('<td class="cw">'+x+"</td>")}}b=this.getClassNames(p),b.push("day");if(this.o.beforeShowDay!==e.noop){var T=this.o.beforeShowDay(this._utc_to_local(p));T===t?T={}:typeof T=="boolean"?T={enabled:T}:typeof T=="string"&&(T={classes:T}),T.enabled===!1&&b.push("disabled"),T.classes&&(b=b.concat(T.classes.split(/\s+/))),T.tooltip&&(h=T.tooltip)}b=e.unique(b),y.push('<td class="'+b.join(" ")+'"'+(h?' title="'+h+'"':"")+">"+p.getUTCDate()+"</td>"),h=null,p.getUTCDay()===this.o.weekEnd&&y.push("</tr>"),p.setUTCDate(p.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(y.join(""));var N=this.picker.find(".datepicker-months").find("th:eq(1)").text(i).end().find("span").removeClass("active");e.each(this.dates,function(e,t){t.getUTCFullYear()===i&&N.eq(t.getUTCMonth()).addClass("active")}),(i<o||i>a)&&N.addClass("disabled"),i===o&&N.slice(0,u).addClass("disabled"),i===a&&N.slice(f+1).addClass("disabled");if(this.o.beforeShowMonth!==e.noop){var C=this;e.each(N,function(t,n){if(!e(n).hasClass("disabled")){var r=new Date(i,t,1),s=C.o.beforeShowMonth(r);s===!1&&e(n).addClass("disabled")}})}y="",i=parseInt(i/10,10)*10;var k=this.picker.find(".datepicker-years").find("th:eq(1)").text(i+"-"+(i+9)).end().find("td");i-=1;var L=e.map(this.dates,function(e){return e.getUTCFullYear()}),A;for(var O=-1;O<11;O++)A=["year"],O===-1?A.push("old"):O===10&&A.push("new"),e.inArray(i,L)!==-1&&A.push("active"),(i<o||i>a)&&A.push("disabled"),y+='<span class="'+A.join(" ")+'">'+i+"</span>",i+=1;k.html(y)},updateNavArrows:function(){if(!this._allow_update)return;var e=new Date(this.viewDate),t=e.getUTCFullYear(),n=e.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-Infinity&&t<=this.o.startDate.getUTCFullYear()&&n<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==Infinity&&t>=this.o.endDate.getUTCFullYear()&&n>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-Infinity&&t<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==Infinity&&t>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},click:function(t){t.preventDefault();var r=e(t.target).closest("span, td, th"),i,s,o;if(r.length===1)switch(r[0].nodeName.toLowerCase()){case"th":switch(r[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var u=m.modes[this.viewMode].navStep*(r[0].className==="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,u),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,u),this.viewMode===1&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var a=new Date;a=n(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0),this.showMode(-2);var f=this.o.todayBtn==="linked"?null:"view";this._setDate(a,f);break;case"clear":this.clearDates()}break;case"span":r.hasClass("disabled")||(this.viewDate.setUTCDate(1),r.hasClass("month")?(o=1,s=r.parent().find("span").index(r),i=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(s),this._trigger("changeMonth",this.viewDate),this.o.minViewMode===1&&this._setDate(n(i,s,o))):(o=1,s=0,i=parseInt(r.text(),10)||0,this.viewDate.setUTCFullYear(i),this._trigger("changeYear",this.viewDate),this.o.minViewMode===2&&this._setDate(n(i,s,o))),this.showMode(-1),this.fill());break;case"td":r.hasClass("day")&&!r.hasClass("disabled")&&(o=parseInt(r.text(),10)||1,i=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth(),r.hasClass("old")?s===0?(s=11,i-=1):s-=1:r.hasClass("new")&&(s===11?(s=0,i+=1):s+=1),this._setDate(n(i,s,o)))}this.picker.is(":visible")&&this._focused_from&&e(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(e){var t=this.dates.contains(e);e||this.dates.clear(),t!==-1?(this.o.multidate===!0||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(t):this.o.multidate===!1?(this.dates.clear(),this.dates.push(e)):this.dates.push(e);if(typeof this.o.multidate=="number")while(this.dates.length>this.o.multidate)this.dates.remove(0)},_setDate:function(e,t){(!t||t==="date")&&this._toggle_multidate(e&&new Date(e));if(!t||t==="view")this.viewDate=e&&new Date(e);this.fill(),this.setValue(),(!t||t!=="view")&&this._trigger("changeDate");var n;this.isInput?n=this.element:this.component&&(n=this.element.find("input")),n&&n.change(),this.o.autoclose&&(!t||t==="date")&&this.hide()},moveMonth:function(e,n){if(!e)return t;if(!n)return e;var r=new Date(e.valueOf()),i=r.getUTCDate(),s=r.getUTCMonth(),o=Math.abs(n),u,a;n=n>0?1:-1;if(o===1){a=n===-1?function(){return r.getUTCMonth()===s}:function(){return r.getUTCMonth()!==u},u=s+n,r.setUTCMonth(u);if(u<0||u>11)u=(u+12)%12}else{for(var f=0;f<o;f++)r=this.moveMonth(r,n);u=r.getUTCMonth(),r.setUTCDate(i),a=function(){return u!==r.getUTCMonth()}}while(a())r.setUTCDate(--i),r.setUTCMonth(u);return r},moveYear:function(e,t){return this.moveMonth(e,t*12)},dateWithinRange:function(e){return e>=this.o.startDate&&e<=this.o.endDate},keydown:function(e){if(!this.picker.is(":visible")){e.keyCode===27&&this.show();return}var t=!1,n,i,s,o=this.focusDate||this.viewDate;switch(e.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),e.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;n=e.keyCode===37?-1:1,e.ctrlKey?(i=this.moveYear(this.dates.get(-1)||r(),n),s=this.moveYear(o,n),this._trigger("changeYear",this.viewDate)):e.shiftKey?(i=this.moveMonth(this.dates.get(-1)||r(),n),s=this.moveMonth(o,n),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.dates.get(-1)||r()),i.setUTCDate(i.getUTCDate()+n),s=new Date(o),s.setUTCDate(o.getUTCDate()+n)),this.dateWithinRange(s)&&(this.focusDate=this.viewDate=s,this.setValue(),this.fill(),e.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;n=e.keyCode===38?-1:1,e.ctrlKey?(i=this.moveYear(this.dates.get(-1)||r(),n),s=this.moveYear(o,n),this._trigger("changeYear",this.viewDate)):e.shiftKey?(i=this.moveMonth(this.dates.get(-1)||r(),n),s=this.moveMonth(o,n),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.dates.get(-1)||r()),i.setUTCDate(i.getUTCDate()+n*7),s=new Date(o),s.setUTCDate(o.getUTCDate()+n*7)),this.dateWithinRange(s)&&(this.focusDate=this.viewDate=s,this.setValue(),this.fill(),e.preventDefault());break;case 32:break;case 13:o=this.focusDate||this.dates.get(-1)||this.viewDate,this.o.keyboardNavigation&&(this._toggle_multidate(o),t=!0),this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(e.preventDefault(),typeof e.stopPropagation=="function"?e.stopPropagation():e.cancelBubble=!0,this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}if(t){this.dates.length?this._trigger("changeDate"):this._trigger("clearDate");var u;this.isInput?u=this.element:this.component&&(u=this.element.find("input")),u&&u.change()}},showMode:function(e){e&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+e))),this.picker.children("div").hide().filter(".datepicker-"+m.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var a=function(t,n){this.element=e(t),this.inputs=e.map(n.inputs,function(e){return e.jquery?e[0]:e}),delete n.inputs,h.call(e(this.inputs),n).bind("changeDate",e.proxy(this.dateUpdated,this)),this.pickers=e.map(this.inputs,function(t){return e(t).data("datepicker")}),this.updateDates()};a.prototype={updateDates:function(){this.dates=e.map(this.pickers,function(e){return e.getUTCDate()}),this.updateRanges()},updateRanges:function(){var t=e.map(this.dates,function(e){return e.valueOf()});e.each(this.pickers,function(e,n){n.setRange(t)})},dateUpdated:function(t){if(this.updating)return;this.updating=!0;var n=e(t.target).data("datepicker"),r=n.getUTCDate(),i=e.inArray(t.target,this.inputs),s=i-1,o=i+1,u=this.inputs.length;if(i===-1)return;e.each(this.pickers,function(e,t){t.getUTCDate()||t.setUTCDate(r)});if(r<this.dates[s])while(s>=0&&r<this.dates[s])this.pickers[s--].setUTCDate(r);else if(r>this.dates[o])while(o<u&&r>this.dates[o])this.pickers[o++].setUTCDate(r);this.updateDates(),delete this.updating},remove:function(){e.map(this.pickers,function(e){e.remove()}),delete this.element.data().datepicker}};var c=e.fn.datepicker,h=function(n){var r=Array.apply(null,arguments);r.shift();var i;return this.each(function(){var s=e(this),o=s.data("datepicker"),c=typeof n=="object"&&n;if(!o){var h=f(this,"date"),d=e.extend({},p,h,c),v=l(d.language),m=e.extend({},p,v,h,c);if(s.hasClass("input-daterange")||m.inputs){var g={inputs:m.inputs||s.find("input").toArray()};s.data("datepicker",o=new a(this,e.extend(m,g)))}else s.data("datepicker",o=new u(this,m))}if(typeof n=="string"&&typeof o[n]=="function"){i=o[n].apply(o,r);if(i!==t)return!1}}),i!==t?i:this};e.fn.datepicker=h;var p=e.fn.datepicker.defaults={autoclose:!1,beforeShowDay:e.noop,beforeShowMonth:e.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],datesDisabled:[],endDate:Infinity,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-Infinity,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,container:"body"},d=e.fn.datepicker.locale_opts=["format","rtl","weekStart"];e.fn.datepicker.Constructor=u;var v=e.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},m={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,m.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(e){var t=e.replace(this.validParts,"\0").split("\0"),n=e.match(this.validParts);if(!t||!t.length||!n||n.length===0)throw new Error("Invalid date format.");return{separators:t,parts:n}},parseDate:function(r,i,s){function w(){var e=this.slice(0,a[c].length),t=a[c].slice(0,e.length);return e.toLowerCase()===t.toLowerCase()}if(!r)return t;if(r instanceof Date)return r;typeof i=="string"&&(i=m.parseFormat(i));var o=/([\-+]\d+)([dmwy])/,a=r.match(/([\-+]\d+)([dmwy])/g),f,l,c;if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(r)){r=new Date;for(c=0;c<a.length;c++){f=o.exec(a[c]),l=parseInt(f[1]);switch(f[2]){case"d":r.setUTCDate(r.getUTCDate()+l);break;case"m":r=u.prototype.moveMonth.call(u.prototype,r,l);break;case"w":r.setUTCDate(r.getUTCDate()+l*7);break;case"y":r=u.prototype.moveYear.call(u.prototype,r,l)}}return n(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),0,0,0)}a=r&&r.match(this.nonpunctuation)||[],r=new Date;var h={},p=["yyyy","yy","M","MM","m","mm","d","dd"],d={yyyy:function(e,t){return e.setUTCFullYear(t)},yy:function(e,t){return e.setUTCFullYear(2e3+t)},m:function(e,t){if(isNaN(e))return e;t-=1;while(t<0)t+=12;t%=12,e.setUTCMonth(t);while(e.getUTCMonth()!==t)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)}},g,y;d.M=d.MM=d.mm=d.m,d.dd=d.d,r=n(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0);var b=i.parts.slice();a.length!==b.length&&(b=e(b).filter(function(t,n){return e.inArray(n,p)!==-1}).toArray());if(a.length===b.length){var E;for(c=0,E=b.length;c<E;c++){g=parseInt(a[c],10),f=b[c];if(isNaN(g))switch(f){case"MM":y=e(v[s].months).filter(w),g=e.inArray(y[0],v[s].months)+1;break;case"M":y=e(v[s].monthsShort).filter(w),g=e.inArray(y[0],v[s].monthsShort)+1}h[f]=g}var S,x;for(c=0;c<p.length;c++)x=p[c],x in h&&!isNaN(h[x])&&(S=new Date(r),d[x](S,h[x]),isNaN(S)||(r=S))}return r},formatDate:function(t,n,r){if(!t)return"";typeof n=="string"&&(n=m.parseFormat(n));var i={d:t.getUTCDate(),D:v[r].daysShort[t.getUTCDay()],DD:v[r].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:v[r].monthsShort[t.getUTCMonth()],MM:v[r].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};i.dd=(i.d<10?"0":"")+i.d,i.mm=(i.m<10?"0":"")+i.m,t=[];var s=e.extend([],n.separators);for(var o=0,u=n.parts.length;o<=u;o++)s.length&&t.push(s.shift()),t.push(i[n.parts[o]]);return t.join("")},headTemplate:'<thead><tr><th class="prev">&#171;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&#187;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};m.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+m.headTemplate+"<tbody></tbody>"+m.footTemplate+"</table>"+"</div>"+'<div class="datepicker-months">'+'<table class="table-condensed">'+m.headTemplate+m.contTemplate+m.footTemplate+"</table>"+"</div>"+'<div class="datepicker-years">'+'<table class="table-condensed">'+m.headTemplate+m.contTemplate+m.footTemplate+"</table>"+"</div>"+"</div>",e.fn.datepicker.DPGlobal=m,e.fn.datepicker.noConflict=function(){return e.fn.datepicker=c,this},e.fn.datepicker.version="1.4.1",e(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var n=e(this);if(n.data("datepicker"))return;t.preventDefault(),h.call(n,"show")}),e(function(){h.call(e('[data-provide="datepicker-inline"]'))})}(window.jQuery),function(e){e.fn.datepicker.dates["zh-CN"]={days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],daysShort:["周日","周一","周二","周三","周四","周五","周六"],daysMin:["日","一","二","三","四","五","六"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],today:"今日",clear:"清除",format:"yyyy年mm月dd日",titleFormat:"yyyy年mm月",weekStart:1}}(jQuery),function(e){e.fn.datepicker.dates["zh-TW"]={days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],daysShort:["週日","週一","週二","週三","週四","週五","週六"],daysMin:["日","一","二","三","四","五","六"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],today:"今天",format:"yyyy年mm月dd日",weekStart:1,clear:"清除"}}(jQuery),function(e){"use strict";var t=function(n,r){this.$element=e(n),this.options=e.extend({},t.defaults,r)};t.defaults={transition_delay:300,refresh_speed:50,display_text:"none",use_percentage:!0,percent_format:function(e){return e+"%"},amount_format:function(e,t,n){return e+" / "+t},update:e.noop,done:e.noop,fail:e.noop},t.prototype.transition=function(){var n=this.$element,r=n.parent(),i=this.$back_text,s=this.$front_text,o=this.options,u=parseInt(n.attr("data-transitiongoal")),a=parseInt(n.attr("aria-valuemin"))||0,f=parseInt(n.attr("aria-valuemax"))||100,l=r.hasClass("vertical"),c=o.update&&typeof o.update=="function"?o.update:t.defaults.update,h=o.done&&typeof o.done=="function"?o.done:t.defaults.done,p=o.fail&&typeof o.fail=="function"?o.fail:t.defaults.fail;if(isNaN(u)){p("data-transitiongoal not set");return}var d=Math.round(100*(u-a)/(f-a));if(o.display_text==="center"&&!i&&!s){this.$back_text=i=e("<span>").addClass("progressbar-back-text").prependTo(r),this.$front_text=s=e("<span>").addClass("progressbar-front-text").prependTo(n);var v;l?(v=r.css("height"),i.css({height:v,"line-height":v}),s.css({height:v,"line-height":v}),e(window).resize(function(){v=r.css("height"),i.css({height:v,"line-height":v}),s.css({height:v,"line-height":v})})):(v=r.css("width"),s.css({width:v}),e(window).resize(function(){v=r.css("width"),s.css({width:v})}))}setTimeout(function(){var e,t,p,v,m;l?n.css("height",d+"%"):n.css("width",d+"%");var g=setInterval(function(){l?(p=n.height(),v=r.height()):(p=n.width(),v=r.width()),e=Math.round(100*p/v),t=Math.round(a+p/v*(f-a)),e>=d&&(e=d,t=u,h(n),clearInterval(g)),o.display_text!=="none"&&(m=o.use_percentage?o.percent_format(e):o.amount_format(t,f,a),o.display_text==="fill"?n.text(m):o.display_text==="center"&&(i.text(m),s.text(m))),n.attr("aria-valuenow",t),c(e,n)},o.refresh_speed)},o.transition_delay)};var n=e.fn.progressbar;e.fn.progressbar=function(n){return this.each(function(){var r=e(this),i=r.data("bs.progressbar"),s=typeof n=="object"&&n;i&&s&&e.extend(i.options,s),i||r.data("bs.progressbar",i=new t(this,s)),i.transition()})},e.fn.progressbar.Constructor=t,e.fn.progressbar.noConflict=function(){return e.fn.progressbar=n,this}}(window.jQuery),function(e){"use strict";function n(t,n){this.itemsArray=[],this.$element=e(t),this.$element.hide(),this.isSelect=t.tagName==="SELECT",this.multiple=this.isSelect&&t.hasAttribute("multiple"),this.objectItems=n&&n.itemValue,this.placeholderText=t.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.inputSize=Math.max(1,this.placeholderText.length),this.$container=e('<div class="bootstrap-tagsinput"></div>'),this.$input=e('<input type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$element.after(this.$container);var r=(this.inputSize<3?3:this.inputSize)+"em";this.$input.get(0).style.cssText="width: "+r+" !important;",this.build(n)}function r(e,t){if(typeof e[t]!="function"){var n=e[t];e[t]=function(e){return e[n]}}}function i(e,t){if(typeof e[t]!="function"){var n=e[t];e[t]=function(){return n}}}function o(e){return e?s.text(e).html():""}function u(e){var t=0;if(document.selection){e.focus();var n=document.selection.createRange();n.moveStart("character",-e.value.length),t=n.text.length}else if(e.selectionStart||e.selectionStart=="0")t=e.selectionStart;return t}function a(t,n){var r=!1;return e.each(n,function(e,n){if(typeof n=="number"&&t.which===n)return r=!0,!1
;if(t.which===n.which){var i=!n.hasOwnProperty("altKey")||t.altKey===n.altKey,s=!n.hasOwnProperty("shiftKey")||t.shiftKey===n.shiftKey,o=!n.hasOwnProperty("ctrlKey")||t.ctrlKey===n.ctrlKey;if(i&&s&&o)return r=!0,!1}}),r}var t={tagClass:function(e){return"label label-info"},itemValue:function(e){return e?e.toString():e},itemText:function(e){return this.itemValue(e)},freeInput:!0,addOnBlur:!0,maxTags:undefined,maxChars:undefined,confirmKeys:[13,44],onTagExists:function(e,t){t.hide().fadeIn()},trimValue:!1,allowDuplicates:!1};n.prototype={constructor:n,add:function(t,n){var r=this;if(r.options.maxTags&&r.itemsArray.length>=r.options.maxTags)return;if(t!==!1&&!t)return;typeof t=="string"&&r.options.trimValue&&(t=e.trim(t));if(typeof t=="object"&&!r.objectItems)throw"Can't add objects when itemValue option is not set";if(t.toString().match(/^\s*$/))return;r.isSelect&&!r.multiple&&r.itemsArray.length>0&&r.remove(r.itemsArray[0]);if(typeof t=="string"&&this.$element[0].tagName==="INPUT"){var i=t.split(",");if(i.length>1){for(var s=0;s<i.length;s++)this.add(i[s],!0);n||r.pushVal();return}}var u=r.options.itemValue(t),a=r.options.itemText(t),f=r.options.tagClass(t),l=e.grep(r.itemsArray,function(e){return r.options.itemValue(e)===u})[0];if(l&&!r.options.allowDuplicates){if(r.options.onTagExists){var c=e(".tag",r.$container).filter(function(){return e(this).data("item")===l});r.options.onTagExists(t,c)}return}if(r.items().toString().length+t.length+1>r.options.maxInputLength)return;var h=e.Event("beforeItemAdd",{item:t,cancel:!1});r.$element.trigger(h);if(h.cancel)return;r.itemsArray.push(t);var p=e('<span class="tag '+o(f)+'">'+o(a)+'<span data-role="remove"></span></span>');p.data("item",t),r.findInputWrapper().before(p),p.after(" ");if(r.isSelect&&!e('option[value="'+encodeURIComponent(u)+'"]',r.$element)[0]){var d=e("<option selected>"+o(a)+"</option>");d.data("item",t),d.attr("value",u),r.$element.append(d)}n||r.pushVal(),(r.options.maxTags===r.itemsArray.length||r.items().toString().length===r.options.maxInputLength)&&r.$container.addClass("bootstrap-tagsinput-max"),r.$element.trigger(e.Event("itemAdded",{item:t}))},remove:function(t,n){var r=this;r.objectItems&&(typeof t=="object"?t=e.grep(r.itemsArray,function(e){return r.options.itemValue(e)==r.options.itemValue(t)}):t=e.grep(r.itemsArray,function(e){return r.options.itemValue(e)==t}),t=t[t.length-1]);if(t){var i=e.Event("beforeItemRemove",{item:t,cancel:!1});r.$element.trigger(i);if(i.cancel)return;e(".tag",r.$container).filter(function(){return e(this).data("item")===t}).remove(),e("option",r.$element).filter(function(){return e(this).data("item")===t}).remove(),e.inArray(t,r.itemsArray)!==-1&&r.itemsArray.splice(e.inArray(t,r.itemsArray),1)}n||r.pushVal(),r.options.maxTags>r.itemsArray.length&&r.$container.removeClass("bootstrap-tagsinput-max"),r.$element.trigger(e.Event("itemRemoved",{item:t}))},removeAll:function(){var t=this;e(".tag",t.$container).remove(),e("option",t.$element).remove();while(t.itemsArray.length>0)t.itemsArray.pop();t.pushVal()},refresh:function(){var t=this;e(".tag",t.$container).each(function(){var n=e(this),r=n.data("item"),i=t.options.itemValue(r),s=t.options.itemText(r),u=t.options.tagClass(r);n.attr("class",null),n.addClass("tag "+o(u)),n.contents().filter(function(){return this.nodeType==3})[0].nodeValue=o(s);if(t.isSelect){var a=e("option",t.$element).filter(function(){return e(this).data("item")===r});a.attr("value",i)}})},items:function(){return this.itemsArray},pushVal:function(){var t=this,n=e.map(t.items(),function(e){return t.options.itemValue(e).toString()});t.$element.val(n,!0).trigger("change")},build:function(n){var s=this;s.options=e.extend({},t,n),s.objectItems&&(s.options.freeInput=!1),r(s.options,"itemValue"),r(s.options,"itemText"),i(s.options,"tagClass");if(s.options.typeahead){var o=s.options.typeahead||{};i(o,"source"),s.$input.typeahead(e.extend({},o,{source:function(t,n){function r(e){var t=[];for(var r=0;r<e.length;r++){var o=s.options.itemText(e[r]);i[o]=e[r],t.push(o)}n(t)}this.map={};var i=this.map,u=o.source(t);e.isFunction(u.success)?u.success(r):e.isFunction(u.then)?u.then(r):e.when(u).then(r)},updater:function(e){s.add(this.map[e])},matcher:function(e){return e.toLowerCase().indexOf(this.query.trim().toLowerCase())!==-1},sorter:function(e){return e.sort()},highlighter:function(e){var t=new RegExp("("+this.query+")","gi");return e.replace(t,"<strong>$1</strong>")}}))}if(s.options.typeaheadjs){var f=s.options.typeaheadjs||{};s.$input.typeahead(null,f).on("typeahead:selected",e.proxy(function(e,t){f.valueKey?s.add(t[f.valueKey]):s.add(t),s.$input.typeahead("val","")},s))}s.$container.on("click",e.proxy(function(e){s.$element.attr("disabled")||s.$input.removeAttr("disabled"),s.$input.focus()},s)),s.options.addOnBlur&&s.options.freeInput&&s.$input.on("focusout",e.proxy(function(t){e(".typeahead, .twitter-typeahead",s.$container).length===0&&(s.add(s.$input.val()),s.$input.val(""))},s)),s.$container.on("keydown","input",e.proxy(function(t){var n=e(t.target),r=s.findInputWrapper();if(s.$element.attr("disabled")){s.$input.attr("disabled","disabled");return}switch(t.which){case 8:if(u(n[0])===0){var i=r.prev();i&&s.remove(i.data("item"))}break;case 46:if(u(n[0])===0){var o=r.next();o&&s.remove(o.data("item"))}break;case 37:var a=r.prev();n.val().length===0&&a[0]&&(a.before(r),n.focus());break;case 39:var f=r.next();n.val().length===0&&f[0]&&(f.after(r),n.focus());break;default:}var l=n.val().length,c=Math.ceil(l/5),h=l+c+1;n.attr("size",Math.max(this.inputSize,n.val().length))},s)),s.$container.on("keypress","input",e.proxy(function(t){var n=e(t.target);if(s.$element.attr("disabled")){s.$input.attr("disabled","disabled");return}var r=n.val(),i=s.options.maxChars&&r.length>=s.options.maxChars;s.options.freeInput&&(a(t,s.options.confirmKeys)||i)&&(s.add(i?r.substr(0,s.options.maxChars):r),n.val(""),t.preventDefault());var o=n.val().length,u=Math.ceil(o/5),f=o+u+1;n.attr("size",Math.max(this.inputSize,n.val().length))},s)),s.$container.on("click","[data-role=remove]",e.proxy(function(t){if(s.$element.attr("disabled"))return;s.remove(e(t.target).closest(".tag").data("item"))},s)),s.options.itemValue===t.itemValue&&(s.$element[0].tagName==="INPUT"?s.add(s.$element.val()):e("option",s.$element).each(function(){s.add(e(this).attr("value"),!0)}))},destroy:function(){var e=this;e.$container.off("keypress","input"),e.$container.off("click","[role=remove]"),e.$container.remove(),e.$element.removeData("tagsinput"),e.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){var t=this.$input[0],n=this.$container[0];while(t&&t.parentNode!==n)t=t.parentNode;return e(t)}},e.fn.tagsinput=function(t,r){var i=[];return this.each(function(){var s=e(this).data("tagsinput");if(!s)s=new n(this,t),e(this).data("tagsinput",s),i.push(s),this.tagName==="SELECT"&&e("option",e(this)).attr("selected","selected"),e(this).val(e(this).val());else if(!t&&!r)i.push(s);else if(s[t]!==undefined){var o=s[t](r);o!==undefined&&i.push(o)}}),typeof t=="string"?i.length>1?i:i[0]:i},e.fn.tagsinput.Constructor=n;var s=e("<div />");e(function(){e("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})}(window.jQuery),!function(e){var t=function(t,n){this.$element=e(t),this.$note=e('<div class="alert"></div>'),this.options=e.extend(!0,e.fn.notify.defaults,n),this.options.transition?this.options.transition=="fade"?this.$note.addClass("in").addClass(this.options.transition):this.$note.addClass(this.options.transition):this.$note.addClass("fade").addClass("in"),this.options.type?this.$note.addClass("alert-"+this.options.type):this.$note.addClass("alert-success"),!this.options.message&&this.$element.data("message")!==""?this.$note.html(this.$element.data("message")):typeof this.options.message=="object"&&(this.options.message.html?this.$note.html(this.options.message.html):this.options.message.text?this.$note.text(this.options.message.text):this.$note.html(this.options.message));if(this.options.closable)var r=e('<a class="close pull-right" href="#">&times;</a>');return e(r).on("click",e.proxy(onClose,this)),this.$note.prepend(r),this};onClose=function(){this.options.onClose(),e(this.$note).remove(),this.options.onClosed()},t.prototype.show=function(){this.options.fadeOut.enabled&&this.$note.delay(this.options.fadeOut.delay||3e3).fadeOut("fast",e.proxy(onClose,this)),this.$element.append(this.$note),this.$note.alert()},t.prototype.hide=function(){this.options.fadeOut.enabled?this.$note.delay(this.options.fadeOut.delay||3e3).fadeOut("fast",e.proxy(onClose,this)):onClose.call(this)},e.fn.notify=function(e){return new t(this,e)},e.fn.notify.defaults={type:"success",closable:!0,transition:"fade",fadeOut:{enabled:!0,delay:3e3},message:null,onClose:function(){},onClosed:function(){}}}(window.jQuery),function(e){"use strict";var t=function(t,n){var r=this;this.$element=e(t),this.options=e.extend(!0,{},e.fn.dropselect.defaults,n,this.$element.data(),this.$element.data("options")),this.items=[],this.selecteItem={},this.selectedItems=[],this.selectedValue="",this.selectedValues=[],this.$_items=undefined,this.$_listContainer=undefined,this._init()};t.prototype={_setListener:function(){return this.$element.on("ds.select",e.proxy(this.options.onselect,this)).on("ds.unselect",e.proxy(this.options.onunselect,this)).on("ds.toggle",e.proxy(this.options.ontoggle,this)).on("ds.change",e.proxy(this.options.onchange,this)).on("ds.load",e.proxy(this.options.onload,this)).on("ds.clear",e.proxy(this.options.onclear,this)),this},_unSetListener:function(){return this.$element.off("ds.select").off("ds.unselect").off("ds.toggle").off("ds.change").off("ds.load").off("ds.clear"),this},_change:function(t){var n=this;return this.selecteItem={},this.selectedItems=[],this.selectedValue="",this.selectedValues=[],e.each(this.items,function(e,t){var r=t.$element;r.hasClass("dropselect-selected")&&(n.selectedItems.push(t),n.selectedValues.push(t.value))}),this.selectedValue=n.selectedValues[0],this.selectedItem=n.selectedItems[0],t===!0&&this.$element.trigger(e.extend({type:"ds.change"},this)),this},_init:function(){var t=this,n=this.$element,r=this.options,i=r.items;this._setListener(),n.addClass("dropselect").width(r.width),n.prepend('<li class="dropselect-loading-overlay"><i class="glyphicon glyphicon-time dropselect-loading-icon"></i></li>'),this.showLoading();if(typeof r.items!="function")return this.load(i);i=r.items(this);if(e.isArray(i))return this.load(i)},showLoading:function(){return this.$element.addClass("dropselect-loading"),this},hideLoading:function(){return this.$element.removeClass("dropselect-loading"),this},load:function(t){var n=this,r=this.$element,i=this.options,s=[],o,u,a,f,l,c,h,p;typeof i!="undefined"&&(typeof i.filter=="boolean"&&(i.filter=e.extend(!0,{},e.fn.dropselect.defaults.filter,{show:i.filter})),typeof i.clear=="boolean"&&(i.clear=e.extend(!0,{},e.fn.dropselect.defaults.clear,{show:i.clear})),typeof i.icons=="boolean"&&(i.icons=e.extend(!0,{},e.fn.dropselect.defaults.icons,{show:i.icons})));if(e.isArray(t)){for(var d in t)l=t[d],h=!1,c="#",p=i.icons.selected,typeof l=="object"?(a=l.text||"",f=l.value||e("<div/>").text(a).html(),h=l.selected||h,c=l.a||c,p=l.icon||p):(a=l,f=e("<div/>").text(a).html()),u=e("<li />"),a=="-"?u.addClass("divider").html(a):u.attr("data-value",f).attr("data-icon",p).html(e("<a />",typeof c=="object"?c:{href:c}).html(a)),h&&u.attr("data-selected",!0),s.push(u.get(0));o=e(s)}else o=r.children("li:has(a), li.divider");this.$_items=o.has("a:first"),this.$_listContainer=e('<ul class="dropselect-list"></div>'),o.appendTo(this.$_listContainer),this.$_listContainer.append('<li class="dropselect-no-results">'+i.filter.noresult+"</li>"),r.append(this.$_listContainer),this.$_items.each(function(t,r){var s=e(this),o=e.trim(s.text()),u=typeof s.data("value")!="undefined"?s.data("value"):o,a=s.find("a:first"),f=s.data("icon")||i.icons.selected;s.addClass("dropselect-item"),i.icons.show&&a.prepend(' <i class="'+f+' dropselect-item-icon"></i> '),a.on("click",function(r){e(this).attr("href")=="#"&&(r.preventDefault(),i.autohide||r.stopPropagation(),n.toggle(t))}),n.items.push({value:u,text:o,icon:f,$element:s}),(s.hasClass("dropselect-selected")||typeof s.data("selected")!="undefined"&&s.data("selected")||typeof s.attr("selected")!="undefined")&&n.select(t,!1)});if(i.filter.show){var v=e('					<li class="dropselect-filter">						<input type="text" class="form-control dropselect-filter-input" placeholder="'+i.filter.placeholder+'">					</li>'),m=v.children(".dropselect-filter-input");m.on("click",function(e){e.stopPropagation()}),m.on("keyup",function(t){var r=e(this).val();n.$_items.removeClass("hidden"),r!==""&&n.$_items.filter(function(){var t=e(this).find("a:first").text();return i.filter.casesensitive||(t=t.toLowerCase(),r=r.toLowerCase()),t.indexOf(r)==-1}).addClass("hidden"),n.$_items.not(".hidden").length<=0?n.$_listContainer.addClass("filter-empty"):n.$_listContainer.removeClass("filter-empty")}),this.$_listContainer.before(v)}if(i.clear.show){var g=e('					<li class="dropselect-clear">						<a href="#"><i class="'+i.icons.clear+' dropselect-item-icon"></i> '+i.clear.text+' </a>					</li>					<li class="divider"></li>');g.first(".dropselect-clear").on("click",function(e){e.preventDefault(),i.autohide||e.stopPropagation(),n.clear(!0)}),this.$_listContainer.before(g)}return this.$element.trigger(e.extend({type:"ds.load"},this)),this.hideLoading(),this},hide:function(){return this.hideLoading(),this.$element.dropdown("toggle"),this},clear:function(t){return this.$_items.removeClass("dropselect-selected"),this._change(t),t===!0&&this.$element.trigger(e.extend({type:"ds.clear"},this)),this},toggle:function(t){var n=this.item(t),r=this.$element,i=!1,s=this.options;if(typeof n=="object"){var o=n.$element;if(o.hasClass("dropselect-selected")){if(!s.toggle)return this;this.unselect(t)}else this.select(t,!0),i=!0;r.trigger(e.extend({type:"ds.toggle"},this),[n,i])}return this},unselect:function(t){var n=this.item(t),r=this.$element,i=this.options;if(typeof n=="object"){var s=n.$element;i.multiselect?s.removeClass("dropselect-selected"):this.$_items.removeClass("dropselect-selected"),this._change(!0),r.trigger(e.extend({type:"ds.unselect"},this),n)}return this},select:function(t,n){var r=this.item(t),i=this.$element,s=this.options;if(typeof r=="object"&&!e.isEmptyObject(r)){var o=r.$element;s.multiselect||this.$_items.removeClass("dropselect-selected"),o.addClass("dropselect-selected"),this._change(n),n===!0&&i.trigger(e.extend({type:"ds.select"},this),r)}return this},item:function(t,n){var r=this.items[t],i=this.$element;return e.extend(!0,r,n)},destroy:function(){this._unSetListener(),this.$element.removeClass("dropselect"),this.$element.find(".dropselect-list li").unwrap(),this.$element.find(".dropselect-clear").next(".divider").remove(),this.$element.find("li.dropselect-item").removeClass("dropselect-item dropselect-selected").find("> a").off("click").find(".dropselect-item-icon").remove(),this.$element.find('[class^="dropselect"]').each(function(){e(this).remove()}),this.$element.removeData("dropselect"),this.$element=null}};var n=e.fn.dropselect;e.fn.dropselect=function(n,r){return this.each(function(){var i=e(this),s=i.data("dropselect");typeof n=="string"?(s||i.data("dropselect",s=new t(this)),typeof s[n]!="undefined"&&s[n](r)):s||i.data("dropselect",s=new t(this,typeof n=="object"&&n))})},e.fn.dropselect.defaults={onselect:function(e,t){},onunselect:function(e,t){},ontoggle:function(e,t){},onchange:function(e){},onclear:function(e){},onload:function(e){},items:"markup",multiselect:!1,toggle:!0,autohide:!1,icons:{show:!0,selected:"glyphicon glyphicon-ok",clear:"glyphicon glyphicon-remove",dash:"glyphicon glyphicon-minus"},width:300,clear:{show:!0,text:"Clear selected"},filter:{show:!0,placeholder:"Search",casesensitive:!1,noresult:"No results found"}},e.fn.dropselect.Constructor=t,e.fn.dropselect.noConflict=function(){return e.fn.dropselect=n,this}}(jQuery),!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Vue=t()}(this,function(){"use strict";function e(t,r,i){if(n(t,r))return void (t[r]=i);if(t._isVue)return void e(t._data,r,i);var s=t.__ob__;if(!s)return void (t[r]=i);if(s.convert(r,i),s.dep.notify(),s.vms)for(var o=s.vms.length;o--;){var u=s.vms[o];u._proxy(r),u._digest()}return i}function t(e,t){if(n(e,t)){delete e[t];var r=e.__ob__;if(r&&(r.dep.notify(),r.vms))for(var i=r.vms.length;i--;){var s=r.vms[i];s._unproxy(t),s._digest()}}}function n(e,t){return gr.call(e,t)}function r(e){return yr.test(e)}function i(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function s(e){return null==e?"":e.toString()}function o(e){if("string"!=typeof e)return e;var t=Number(e);return isNaN(t)?e:t}function u(e){return"true"===e?!0:"false"===e?!1:e}function a(e){var t=e.charCodeAt(0),n=e.charCodeAt(e.length-1);return t!==n||34!==t&&39!==t?e:e.slice(1,-1)}function f(e){return e.replace(br,l)}function l(e,t){return t?t.toUpperCase():""}function c(e){return e.replace(wr,"$1-$2").toLowerCase()}function h(e){return e.replace(Er,l)}function p(e,t){return function(n){var r=arguments.length;return r?r>1?e.apply(t,arguments):e.call(t,n):e.call(t)}}function d(e,t){t=t||0;for(var n=e.length-t,r=new Array(n);n--;)r[n]=e[n+t];return r}function v(e,t){for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}function m(e){return null!==e&&"object"==typeof e}function g(e){return Sr.call(e)===xr}function y(e,t,n,r){Object.defineProperty(e,t,{value:n,enumerable:!!r,writable:!0,configurable:!0})}function b(e,t){var n,r,i,s,o,u=function a(){var u=Date.now()-s;t>u&&u>=0?n=setTimeout(a,t-u):(n=null,o=e.apply(i,r),n||(i=r=null))};return function(){return i=this,r=arguments,s=Date.now(),n||(n=setTimeout(u,t)),o}}function w(e,t){for(var n=e.length;n--;)if(e[n]===t)return n;return-1}function E(e){var t=function n(){return n.cancelled?void 0:e.apply(this,arguments)};return t.cancel=function(){t.cancelled=!0},t}function S(e,t){return e==t||(m(e)&&m(t)?JSON.stringify(e)===JSON.stringify(t):!1)}function x(e){this.size=0,this.limit=e,this.head=this.tail=void 0,this._keymap=Object.create(null)}function T(){var e,t=Fr.slice(Wr,Ur).trim();if(t){e={};var n=t.match(Gr);e.name=n[0],n.length>1&&(e.args=n.slice(1).map(N))}e&&(Ir.filters=Ir.filters||[]).push(e),Wr=Ur+1}function N(e){if(Yr.test(e))return{value:o(e),dynamic:!1};var t=a(e),n=t===e;return{value:n?e:t,dynamic:n}}function C(e){var t=Qr.get(e);if(t)return t;for(Fr=e,Xr=Vr=!1,$r=Jr=Kr=0,Wr=0,Ir={},Ur=0,zr=Fr.length;zr>Ur;Ur++)if(Rr=qr,qr=Fr.charCodeAt(Ur),Xr)39===qr&&92!==Rr&&(Xr=!Xr);else if(Vr)34===qr&&92!==Rr&&(Vr=!Vr);else if(124===qr&&124!==Fr.charCodeAt(Ur+1)&&124!==Fr.charCodeAt(Ur-1))null==Ir.expression?(Wr=Ur+1,Ir.expression=Fr.slice(0,Ur).trim()):T();else switch(qr){case 34:Vr=!0;break;case 39:Xr=!0;break;case 40:Kr++;break;case 41:Kr--;break;case 91:Jr++;break;case 93:Jr--;break;case 123:$r++;break;case 125:$r--}return null==Ir.expression?Ir.expression=Fr.slice(0,Ur).trim():0!==Wr&&T(),Qr.put(e,Ir),Ir}function k(e){return e.replace(ei,"\\$&")}function L(){var e=k(ai.delimiters[0]),t=k(ai.delimiters[1]),n=k(ai.unsafeDelimiters[0]),r=k(ai.unsafeDelimiters[1]);ni=new RegExp(n+"(.+?)"+r+"|"+e+"(.+?)"+t,"g"),ri=new RegExp("^"+n+".*"+r+"$"),ti=new x(1e3)}function A(e){ti||L();var t=ti.get(e);if(t)return t;if(e=e.replace(/\n/g,""),!ni.test(e))return null;for(var n,r,i,s,o,u,a=[],f=ni.lastIndex=0;n=ni.exec(e);)r=n.index,r>f&&a.push({value:e.slice(f,r)}),i=ri.test(n[0]),s=i?n[1]:n[2],o=s.charCodeAt(0),u=42===o,s=u?s.slice(1):s,a.push({tag:!0,value:s.trim(),html:i,oneTime:u}),f=r+n[0].length;return f<e.length&&a.push({value:e.slice(f)}),ti.put(e,a),a}function O(e,t){return e.length>1?e.map(function(e){return M(e,t)}).join("+"):M(e[0],t,!0)}function M(e,t,n){return e.tag?e.oneTime&&t?'"'+t.$eval(e.value)+'"':_(e.value,n):'"'+e.value+'"'}function _(e,t){if(ii.test(e)){var n=C(e);return n.filters?"this._applyFilters("+n.expression+",null,"+JSON.stringify(n.filters)+",false)":"("+e+")"}return t?e:"("+e+")"}function D(e,t,n,r){B(e,1,function(){t.appendChild(e)},n,r)}function P(e,t,n,r){B(e,1,function(){U(e,t)},n,r)}function H(e,t,n){B(e,-1,function(){W(e)},t,n)}function B(e,t,n,r,i){var s=e.__v_trans;if(!s||!s.hooks&&!Mr||!r._isCompiled||r.$parent&&!r.$parent._isCompiled)return n(),void (i&&i());var o=t>0?"enter":"leave";s[o](n,i)}function j(e){return"string"==typeof e&&(e=document.querySelector(e)),e}function F(e){var t=document.documentElement,n=e&&e.parentNode;return t===e||t===n||!!n&&1===n.nodeType&&!!t.contains(n)}function I(e,t){var n=e.getAttribute(t);return null!==n&&e.removeAttribute(t),n}function q(e,t){var n=I(e,":"+t);return null===n&&(n=I(e,"v-bind:"+t)),n}function R(e,t){return e.hasAttribute(t)||e.hasAttribute(":"+t)||e.hasAttribute("v-bind:"+t)}function U(e,t){t.parentNode.insertBefore(e,t)}function z(e,t){t.nextSibling?U(e,t.nextSibling):t.parentNode.appendChild(e)}function W(e){e.parentNode.removeChild(e)}function X(e,t){t.firstChild?U(e,t.firstChild):t.appendChild(e)}function V(e,t){var n=e.parentNode;n&&n.replaceChild(t,e)}function $(e,t,n,r){e.addEventListener(t,n,r)}function J(e,t,n){e.removeEventListener(t,n)}function K(e,t){!Lr||e instanceof SVGElement?e.setAttribute("class",t):e.className=t}function Q(e,t){if(e.classList)e.classList.add(t);else{var n=" "+(e.getAttribute("class")||"")+" ";n.indexOf(" "+t+" ")<0&&K(e,(n+t).trim())}}function G(e,t){if(e.classList)e.classList.remove(t);else{for(var n=" "+(e.getAttribute("class")||"")+" ",r=" "+t+" ";n.indexOf(r)>=0;)n=n.replace(r," ");K(e,n.trim())}e.className||e.removeAttribute("class")}function Y(e,t){var n,r;if(tt(e)&&e.content instanceof DocumentFragment&&(e=e.content),e.hasChildNodes())for(Z(e),r=t?document.createDocumentFragment():document.createElement("div");n=e.firstChild;)r.appendChild(n);return r}function Z(e){for(var t;t=e.firstChild,et(t);)e.removeChild(t);for(;t=e.lastChild,et(t);)e.removeChild(t)}function et(e){return e&&(3===e.nodeType&&!e.data.trim()||8===e.nodeType)}function tt(e){return e.tagName&&"template"===e.tagName.toLowerCase()}function nt(e,t){var n=ai.debug?document.createComment(e):document.createTextNode(t?" ":"");return n.__vue_anchor=!0,n}function rt(e){if(e.hasAttributes())for(var t=e.attributes,n=0,r=t.length;r>n;n++){var i=t[n].name;if(li.test(i))return f(i.replace(li,""))}}function it(e,t,n){for(var r;e!==t;)r=e.nextSibling,n(e),e=r;n(t)}function st(e,t,n,r,i){function s(){if(u++,o&&u>=a.length){for(var e=0;e<a.length;e++)r.appendChild(a[e]);i&&i()}}var o=!1,u=0,a=[];it(e,t,function(e){e===t&&(o=!0),a.push(e),H(e,n,s)})}function ot(e,t){var n=e.tagName.toLowerCase(),r=e.hasAttributes();if(ci.test(n)||hi.test(n)){if(r)return ut(e)}else{if(gt(t,"components",n))return{id:n};var i=r&&ut(e);if(i)return i}}function ut(e){var t=I(e,"is");return null!=t?{id:t}:(t=q(e,"is"),null!=t?{id:t,dynamic:!0}:void 0)}function at(e,t,n){var r=t.path;n=lt(t,n),e[r]=e._data[r]=ft(t,n)?n:void 0}function ft(e,t){if(null===e.raw&&!e.required)return!0;var n,r=e.options,i=r.type,s=!0;if(i&&(i===String?(n="string",s=typeof t===n):i===Number?(n="number",s="number"==typeof t):i===Boolean?(n="boolean",s="boolean"==typeof t):i===Function?(n="function",s="function"==typeof t):i===Object?(n="object",s=g(t)):i===Array?(n="array",s=Tr(t)):s=t instanceof i),!s)return!1;var o=r.validator;return o&&!o.call(null,t)?!1:!0}function lt(e,t){var n=e.options.coerce;return n?n(t):t}function ct(t,r){var i,s,o;for(i in r)s=t[i],o=r[i],n(t,i)?m(s)&&m(o)&&ct(s,o):e(t,i,o);return t}function ht(e,t){var n=Object.create(e);return t?v(n,vt(t)):n}function pt(e){if(e.components)for(var t,n=e.components=vt(e.components),r=Object.keys(n),i=0,s=r.length;s>i;i++){var o=r[i];ci.test(o)||hi.test(o)||(t=n[o],g(t)&&(n[o]=cr.extend(t)))}}function dt(e){var t,n,r=e.props;if(Tr(r))for(e.props={},t=r.length;t--;)n=r[t],"string"==typeof n?e.props[n]=null:n.name&&(e.props[n.name]=n);else if(g(r)){var i=Object.keys(r);for(t=i.length;t--;)n=r[i[t]],"function"==typeof n&&(r[i[t]]={type:n})}}function vt(e){if(Tr(e)){for(var t,n={},r=e.length;r--;){t=e[r];var i="function"==typeof t?t.options&&t.options.name||t.id:t.name||t.id;i&&(n[i]=t)}return n}return e}function mt(e,t,r){function i(n){var i=pi[n]||di;o[n]=i(e[n],t[n],r,n)}pt(t),dt(t);var s,o={};if(t.mixins)for(var u=0,a=t.mixins.length;a>u;u++)e=mt(e,t.mixins[u],r);for(s in e)i(s);for(s in t)n(e,s)||i(s);return o}function gt(e,t,n){if("string"==typeof n){var r,i=e[t];return i[n]||i[r=f(n)]||i[r.charAt(0).toUpperCase()+r.slice(1)]}}function yt(e,t,n){}function bt(){this.id=gi++,this.subs=[]}function wt(e){if(this.value=e,this.dep=new bt,y(e,"__ob__",this),Tr(e)){var t=Nr?Et:St;t(e,mi,yi),this.observeArray(e)}else this.walk(e)}function Et(e,t){e.__proto__=t}function St(e,t,n){for(var r=0,i=n.length;i>r;r++){var s=n[r];y(e,s,t[s])}}function xt(e,t){if(e&&"object"==typeof e){var r;return n(e,"__ob__")&&e.__ob__ instanceof wt?r=e.__ob__:(Tr(e)||g(e))&&Object.isExtensible(e)&&!e._isVue&&(r=new wt(e)),r&&t&&r.addVm(t),r}}function Tt(e,t,n){var r,i,s=new bt;if(ai.convertAllProperties){var o=Object.getOwnPropertyDescriptor(e,t);if(o&&o.configurable===!1)return;r=o&&o.get,i=o&&o.set}var u=xt(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=r?r.call(e):n;if(bt.target&&(s.depend(),u&&u.dep.depend(),Tr(t)))for(var i,o=0,a=t.length;a>o;o++)i=t[o],i&&i.__ob__&&i.__ob__.dep.depend();return t},set:function(t){var o=r?r.call(e):n;t!==o&&(i?i.call(e,t):n=t,u=xt(t),s.notify())}})}function Nt(e){e.prototype._init=function(e){e=e||{},this.$el=null,this.$parent=e.parent,this.$root=this.$parent?this.$parent.$root:this,this.$children=[],this.$refs={},this.$els={},this._watchers=[],this._directives=[],this._uid=wi++,this._isVue=!0,this._events={},this._eventsCount={},this._isFragment=!1,this._fragment=this._fragmentStart=this._fragmentEnd=null,this._isCompiled=this._isDestroyed=this._isReady=this._isAttached=this._isBeingDestroyed=this._vForRemoving=!1,this._unlinkFn=null,this._context=e._context||this.$parent,this._scope=e._scope,this._frag=e._frag,this._frag&&this._frag.children.push(this),this.$parent&&this.$parent.$children.push(this),e=this.$options=mt(this.constructor.options,e,this),this._updateRef(),this._data={},this._callHook("init"),this._initState(),this._initEvents(),this._callHook("created"),e.el&&this.$mount(e.el)}}function Ct(e){if(void 0===e)return"eof";var t=e.charCodeAt(0);switch(t){case 91:case 93:case 46:case 34:case 39:case 48:return e;case 95:case 36:return"ident";case 32:case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return t>=97&&122>=t||t>=65&&90>=t?"ident":t>=49&&57>=t?"number":"else"}function kt(e){var t=e.trim();return"0"===e.charAt(0)&&isNaN(e)?!1:r(t)?a(t):"*"+t}function Lt(e){function t(){var t=e[l+1];return c===Mi&&"'"===t||c===_i&&'"'===t?(l++,r="\\"+t,p[Si](),!0):void 0}var n,r,i,s,o,u,a,f=[],l=-1,c=Ci,h=0,p=[];for(p[xi]=function(){void 0!==i&&(f.push(i),i=void 0)},p[Si]=function(){void 0===i?i=r:i+=r},p[Ti]=function(){p[Si](),h++},p[Ni]=function(){if(h>0)h--,c=Oi,p[Si]();else{if(h=0,i=kt(i),i===!1)return!1;p[xi]()}};null!=c;)if(l++,n=e[l],"\\"!==n||!t()){if(s=Ct(n),a=Hi[c],o=a[s]||a["else"]||Pi,o===Pi)return;if(c=o[0],u=p[o[1]],u&&(r=o[2],r=void 0===r?n:r,u()===!1))return;if(c===Di)return f.raw=e,f}}function At(e){var t=Ei.get(e);return t||(t=Lt(e),t&&Ei.put(e,t)),t}function Ot(e,t){return Ft(t).get(e)}function Mt(t,n,r){var i=t;if("string"==typeof n&&(n=Lt(n)),!n||!m(t))return!1;for(var s,o,u=0,a=n.length;a>u;u++)s=t,o=n[u],"*"===o.charAt(0)&&(o=Ft(o.slice(1)).get.call(i,i)),a-1>u?(t=t[o],m(t)||(t={},e(s,o,t))):Tr(t)?t.$set(o,r):o in t?t[o]=r:e(t,o,r);return!0}function _t(e,t){var n=Ki.length;return Ki[n]=t?e.replace(zi,"\\n"):e,'"'+n+'"'}function Dt(e){var t=e.charAt(0),n=e.slice(1);return Ii.test(n)?e:(n=n.indexOf('"')>-1?n.replace(Xi,Pt):n,t+"scope."+n)}function Pt(e,t){return Ki[t]}function Ht(e){Ri.test(e),Ki.length=0;var t=e.replace(Wi,_t).replace(Ui,"");return t=(" "+t).replace($i,Dt).replace(Xi,Pt),Bt(t)}function Bt(e){try{return new Function("scope","return "+e+";")}catch(t){}}function jt(e){var t=At(e);return t?function(e,n){Mt(e,t,n)}:void 0}function Ft(e,t){e=e.trim();var n=ji.get(e);if(n)return t&&!n.set&&(n.set=jt(n.exp)),n;var r={exp:e};return r.get=It(e)&&e.indexOf("[")<0?Bt("scope."+e):Ht(e),t&&(r.set=jt(e)),ji.put(e,r),r}function It(e){return Vi.test(e)&&!Ji.test(e)&&"Math."!==e.slice(0,5)}function qt(){Gi=[],Yi=[],Zi={},es={},ts=ns=!1}function Rt(){Ut(Gi),ns=!0,Ut(Yi),kr&&kr.emit("flush"),qt()}function Ut(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.id;Zi[r]=null,n.run()}}function zt(e){var t=e.id;if(null==Zi[t]){if(ns&&!e.user)return void e.run();var n=e.user?Yi:Gi;Zi[t]=n.length,n.push(e),ts||(ts=!0,Br(Rt))}}function Wt(e,t,n,r){r&&v(this,r);var i="function"==typeof t;if(this.vm=e,e._watchers.push(this),this.expression=i?t.toString():t,this.cb=n,this.id=++rs,this.active=!0,this.dirty=this.lazy,this.deps=Object.create(null),this.newDeps=null,this.prevError=null,i)this.getter=t,this.setter=void 0;else{var s=Ft(t,this.twoWay);this.getter=s.get,this.setter=s.set}this.value=this.lazy?void 0:this.get(),this.queued=this.shallow=!1}function Xt(e){var t,n;if(Tr(e))for(t=e.length;t--;)Xt(e[t]);else if(m(e))for(n=Object.keys(e),t=n.length;t--;)Xt(e[n[t]])}function Vt(e){if(ws[e])return ws[e];var t=$t(e);return ws[e]=ws[t]=t,t}function $t(e){e=c(e);var t=f(e),n=t.charAt(0).toUpperCase()+t.slice(1);Es||(Es=document.createElement("div"));for(var r,i=gs.length;i--;)if(r=ys[i]+n,r in Es.style)return gs[i]+e;return t in Es.style?e:void 0}function Jt(e,t){var n=t.map(function(e){var t=e.charCodeAt(0);return t>47&&58>t?parseInt(e,10):1===e.length&&(t=e.toUpperCase().charCodeAt(0),t>64&&91>t)?t:As[e]});return n=[].concat.apply([],n),function(t){return n.indexOf(t.keyCode)>-1?e.call(this,t):void 0}}function Kt(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function Qt(e){return function(t){return t.preventDefault(),e.call(this,t)}}function Gt(e){return function(t){return t.target===t.currentTarget?e.call(this,t):void 0}}function Yt(e,t,n){for(var r,i,s,o=t?[]:null,u=0,a=e.options.length;a>u;u++)if(r=e.options[u],s=n?r.hasAttribute("selected"):r.selected){if(i=r.hasOwnProperty("_value")?r._value:r.value,!t)return i;o.push(i)}return o}function Zt(e,t){for(var n=e.length;n--;)if(S(e[n],t))return n;return-1}function en(e){return tt(e)&&e.content instanceof DocumentFragment}function tn(e,t){var n=t?e:e.trim(),r=Fs.get(n);if(r)return r;var i=document.createDocumentFragment(),s=e.match(Rs),o=Us.test(e);if(s||o){var u=s&&s[1],a=qs[u]||qs.efault,f=a[0],l=a[1],c=a[2],h=document.createElement("div");for(h.innerHTML=l+e+c;f--;)h=h.lastChild;for(var p;p=h.firstChild;)i.appendChild(p)}else i.appendChild(document.createTextNode(e));return t||Z(i),Fs.put(n,i),i}function nn(e){if(en(e))return Z(e.content),e.content;if("SCRIPT"===e.tagName)return tn(e.textContent);for(var t,n=rn(e),r=document.createDocumentFragment();t=n.firstChild;)r.appendChild(t);return Z(r),r}function rn(e){if(!e.querySelectorAll)return e.cloneNode();var t,n,r,i=e.cloneNode(!0);if(zs){var s=i;if(en(e)&&(e=e.content,s=i.content),n=e.querySelectorAll("template"),n.length)for(r=s.querySelectorAll("template"),t=r.length;t--;)r[t].parentNode.replaceChild(rn(n[t]),r[t])}if(Ws)if("TEXTAREA"===e.tagName)i.value=e.value;else if(n=e.querySelectorAll("textarea"),n.length)for(r=i.querySelectorAll("textarea"),t=r.length;t--;)r[t].value=n[t].value;return i}function sn(e,t,n){var r,i;return e instanceof DocumentFragment?(Z(e),t?rn(e):e):("string"==typeof e?n||"#"!==e.charAt(0)?i=tn(e,n):(i=Is.get(e),i||(r=document.getElementById(e.slice(1)),r&&(i=nn(r),Is.put(e,i)))):e.nodeType&&(i=nn(e)),i&&t?rn(i):i)}function on(e,t,n,r,i,s){this.children=[],this.childFrags=[],this.vm=t,this.scope=i,this.inserted=!1,this.parentFrag=s,s&&s.childFrags.push(this),this.unlink=e(t,n,r,i,this);var o=this.single=1===n.childNodes.length&&!n.childNodes[0].__vue_anchor;o?(this.node=n.childNodes[0],this.before=un,this.remove=an):(this.node=nt("fragment-start"),this.end=nt("fragment-end"),this.frag=n,X(this.node,n),n.appendChild(this.end),this.before=fn,this.remove=ln),this.node.__vfrag__=this}function un(e,t){this.inserted=!0;var n=t!==!1?P:U;n(this.node,e,this.vm),F(this.node)&&this.callHook(cn)}function an(){this.inserted=!1;var e=F(this.node),t=this;this.beforeRemove(),H(this.node,this.vm,function(){e&&t.callHook(hn),t.destroy()})}function fn(e,t){this.inserted=!0;var n=this.vm,r=t!==!1?P:U;it(this
.node,this.end,function(t){r(t,e,n)}),F(this.node)&&this.callHook(cn)}function ln(){this.inserted=!1;var e=this,t=F(this.node);this.beforeRemove(),st(this.node,this.end,this.vm,this.frag,function(){t&&e.callHook(hn),e.destroy()})}function cn(e){e._isAttached||e._callHook("attached")}function hn(e){e._isAttached&&e._callHook("detached")}function pn(e,t){this.vm=e;var n,r="string"==typeof t;r||tt(t)?n=sn(t,!0):(n=document.createDocumentFragment(),n.appendChild(t)),this.template=n;var i,s=e.constructor.cid;if(s>0){var o=s+(r?t:t.outerHTML);i=Vs.get(o),i||(i=Cn(n,e.$options,!0),Vs.put(o,i))}else i=Cn(n,e.$options,!0);this.linker=i}function dn(e,t,n){var r=e.node.previousSibling;if(r){for(e=r.__vfrag__;!(e&&e.forId===n&&e.inserted||r===t);){if(r=r.previousSibling,!r)return;e=r.__vfrag__}return e}}function vn(e){var t=e.node;if(e.end)for(;!t.__vue__&&t!==e.end&&t.nextSibling;)t=t.nextSibling;return t.__vue__}function mn(e){for(var t=-1,n=new Array(Math.floor(e));++t<e;)n[t]=t;return n}function gn(e){Zs.push(e),eo||(eo=!0,Br(yn))}function yn(){for(var e=document.documentElement.offsetHeight,t=0;t<Zs.length;t++)Zs[t]();return Zs=[],eo=!1,e}function bn(e,t,n,r){this.id=t,this.el=e,this.enterClass=n&&n.enterClass||t+"-enter",this.leaveClass=n&&n.leaveClass||t+"-leave",this.hooks=n,this.vm=r,this.pendingCssEvent=this.pendingCssCb=this.cancel=this.pendingJsCb=this.op=this.cb=null,this.justEntered=!1,this.entered=this.left=!1,this.typeCache={},this.type=n&&n.type;var i=this;["enterNextTick","enterDone","leaveNextTick","leaveDone"].forEach(function(e){i[e]=p(i[e],i)})}function wn(e){return!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}function En(e){for(var t={},n=e.trim().split(/\s+/),r=n.length;r--;)t[n[r]]=!0;return t}function Sn(e,t){return Tr(e)?e.indexOf(t)>-1:n(e,t)}function xn(e,t){for(var n,i,s,o,u,a,l,h=[],p=Object.keys(t),d=p.length;d--;)i=p[d],n=t[i]||po,u=f(i),vo.test(u)&&(l={name:i,path:u,options:n,mode:ho.ONE_WAY,raw:null},s=c(i),null===(o=q(e,s))&&(null!==(o=q(e,s+".sync"))?l.mode=ho.TWO_WAY:null!==(o=q(e,s+".once"))&&(l.mode=ho.ONE_TIME)),null!==o?(l.raw=o,a=C(o),o=a.expression,l.filters=a.filters,r(o)&&!a.filters?l.optimizedLiteral=!0:l.dynamic=!0,l.parentPath=o):null!==(o=I(e,s))?l.raw=o:n.required,h.push(l));return Tn(h)}function Tn(e){return function(t,n){t._props={};for(var r,i,s,f,l,c=e.length;c--;)if(r=e[c],l=r.raw,i=r.path,s=r.options,t._props[i]=r,null===l)at(t,r,Nn(t,s));else if(r.dynamic)t._context&&(r.mode===ho.ONE_TIME?(f=(n||t._context).$get(r.parentPath),at(t,r,f)):t._bindDir({name:"prop",def:ao,prop:r},null,null,n));else if(r.optimizedLiteral){var h=a(l);f=h===l?u(o(l)):h,at(t,r,f)}else f=s.type===Boolean&&""===l?!0:l,at(t,r,f)}}function Nn(e,t){if(!n(t,"default"))return t.type===Boolean?!1:void 0;var r=t["default"];return m(r),"function"==typeof r&&t.type!==Function?r.call(e):r}function Cn(e,t,n){var r=n||!t._asComponent?Dn(e,t):null,i=r&&r.terminal||"SCRIPT"===e.tagName||!e.hasChildNodes()?null:In(e.childNodes,t);return function(e,t,n,s,o){var u=d(t.childNodes),a=kn(function(){r&&r(e,t,n,s,o),i&&i(e,u,n,s,o)},e);return An(e,a)}}function kn(e,t){t._directives=[];var n=t._directives.length;e();var r=t._directives.slice(n);r.sort(Ln);for(var i=0,s=r.length;s>i;i++)r[i]._bind();return r}function Ln(e,t){return e=e.descriptor.def.priority||So,t=t.descriptor.def.priority||So,e>t?-1:e===t?0:1}function An(e,t,n,r){function i(i){On(e,t,i),n&&r&&On(n,r)}return i.dirs=t,i}function On(e,t,n){for(var r=t.length;r--;)t[r]._teardown()}function Mn(e,t,n,r){var i=xn(t,n),s=kn(function(){i(e,r)},e);return An(e,s)}function _n(e,t,n){var r,i,s=t._containerAttrs,o=t._replacerAttrs;return 11!==e.nodeType&&(t._asComponent?(s&&n&&(r=Vn(s,n)),o&&(i=Vn(o,t))):i=Vn(e.attributes,t)),t._containerAttrs=t._replacerAttrs=null,function(e,t,n){var s,o=e._context;o&&r&&(s=kn(function(){r(o,t,null,n)},o));var u=kn(function(){i&&i(e,t)},e);return An(e,u,o,s)}}function Dn(e,t){var n=e.nodeType;return 1===n&&"SCRIPT"!==e.tagName?Pn(e,t):3===n&&e.data.trim()?Hn(e,t):null}function Pn(e,t){if("TEXTAREA"===e.tagName){var n=A(e.value);n&&(e.setAttribute(":value",O(n)),e.value="")}var r,i=e.hasAttributes();return i&&(r=zn(e,t)),r||(r=Rn(e,t)),r||(r=Un(e,t)),!r&&i&&(r=Vn(e.attributes,t)),r}function Hn(e,t){if(e._skip)return Bn;var n=A(e.wholeText);if(!n)return null;for(var r=e.nextSibling;r&&3===r.nodeType;)r._skip=!0,r=r.nextSibling;for(var i,s,o=document.createDocumentFragment(),u=0,a=n.length;a>u;u++)s=n[u],i=s.tag?jn(s,t):document.createTextNode(s.value),o.appendChild(i);return Fn(n,o,t)}function Bn(e,t){W(t)}function jn(e,t){function n(t){if(!e.descriptor){var n=C(e.value);e.descriptor={name:t,def:Ys[t],expression:n.expression,filters:n.filters}}}var r;return e.oneTime?r=document.createTextNode(e.value):e.html?(r=document.createComment("v-html"),n("html")):(r=document.createTextNode(" "),n("text")),r}function Fn(e,t){return function(n,r,i,s){for(var o,u,a,f=t.cloneNode(!0),l=d(f.childNodes),c=0,h=e.length;h>c;c++)o=e[c],u=o.value,o.tag&&(a=l[c],o.oneTime?(u=(s||n).$eval(u),o.html?V(a,sn(u,!0)):a.data=u):n._bindDir(o.descriptor,a,i,s));V(r,f)}}function In(e,t){for(var n,r,i,s=[],o=0,u=e.length;u>o;o++)i=e[o],n=Dn(i,t),r=n&&n.terminal||"SCRIPT"===i.tagName||!i.hasChildNodes()?null:In(i.childNodes,t),s.push(n,r);return s.length?qn(s):null}function qn(e){return function(t,n,r,i,s){for(var o,u,a,f=0,l=0,c=e.length;c>f;l++){o=n[l],u=e[f++],a=e[f++];var h=d(o.childNodes);u&&u(t,o,r,i,s),a&&a(t,h,r,i,s)}}}function Rn(e,t){var n=e.tagName.toLowerCase();if(!ci.test(n)){"slot"===n&&R(e,"name")&&(n="_namedSlot");var r=gt(t,"elementDirectives",n);return r?Xn(e,n,"",t,r):void 0}}function Un(e,t){var n=ot(e,t);if(n){var r=rt(e),i={name:"component",ref:r,expression:n.id,def:co.component,modifiers:{literal:!n.dynamic}},s=function(e,t,n,s,o){r&&Tt((s||e).$refs,r,null),e._bindDir(i,t,n,s,o)};return s.terminal=!0,s}}function zn(e,t){if(null!==I(e,"v-pre"))return Wn;if(e.hasAttribute("v-else")){var n=e.previousElementSibling;if(n&&n.hasAttribute("v-if"))return Wn}for(var r,i,s=0,o=Eo.length;o>s;s++)if(i=Eo[s],r=e.getAttribute("v-"+i),null!=r)return Xn(e,i,r,t)}function Wn(){}function Xn(e,t,n,r,i){var s=C(n),o={name:t,expression:s.expression,filters:s.filters,raw:n,def:i||Ys[t]};("for"===t||"router-view"===t)&&(o.ref=rt(e));var u=function(e,t,n,r,i){o.ref&&Tt((r||e).$refs,o.ref,null),e._bindDir(o,t,n,r,i)};return u.terminal=!0,u}function Vn(e,t){function n(e,t,n){var r=n&&Kn(n),i=!r&&C(s);v.push({name:e,attr:o,raw:u,def:t,arg:f,modifiers:l,expression:i&&i.expression,filters:i&&i.filters,interp:n,hasOneTime:r})}for(var r,i,s,o,u,a,f,l,c,h,p,d=e.length,v=[];d--;)if(r=e[d],i=o=r.name,s=u=r.value,h=A(s),f=null,l=$n(i),i=i.replace(bo,""),h)s=O(h),f=i,n("bind",Ys.bind,h);else if(wo.test(i))l.literal=!mo.test(i),n("transition",co.transition);else if(go.test(i))f=i.replace(go,""),n("on",Ys.on);else if(mo.test(i))a=i.replace(mo,""),"style"===a||"class"===a?n(a,co[a]):(f=a,n("bind",Ys.bind));else if(p=i.match(yo)){if(a=p[1],f=p[2],"else"===a)continue;c=gt(t,"directives",a),c&&n(a,c)}return v.length?Jn(v):void 0}function $n(e){var t=Object.create(null),n=e.match(bo);if(n)for(var r=n.length;r--;)t[n[r].slice(1)]=!0;return t}function Jn(e){return function(t,n,r,i,s){for(var o=e.length;o--;)t._bindDir(e[o],n,r,i,s)}}function Kn(e){for(var t=e.length;t--;)if(e[t].oneTime)return!0}function Qn(e,t){return t&&(t._containerAttrs=Yn(e)),tt(e)&&(e=sn(e)),t&&(t._asComponent&&!t.template&&(t.template="<slot></slot>"),t.template&&(t._content=Y(e),e=Gn(e,t))),e instanceof DocumentFragment&&(X(nt("v-start",!0),e),e.appendChild(nt("v-end",!0))),e}function Gn(e,t){var n=t.template,r=sn(n,!0);if(r){var i=r.firstChild,s=i.tagName&&i.tagName.toLowerCase();return t.replace?(e===document.body,r.childNodes.length>1||1!==i.nodeType||"component"===s||gt(t,"components",s)||R(i,"is")||gt(t,"elementDirectives",s)||i.hasAttribute("v-for")||i.hasAttribute("v-if")?r:(t._replacerAttrs=Yn(i),Zn(e,i),i)):(e.appendChild(r),e)}}function Yn(e){return 1===e.nodeType&&e.hasAttributes()?d(e.attributes):void 0}function Zn(e,t){for(var n,r,i=e.attributes,s=i.length;s--;)n=i[s].name,r=i[s].value,t.hasAttribute(n)||xo.test(n)?"class"!==n||A(r)||r.split(/\s+/).forEach(function(e){Q(t,e)}):t.setAttribute(n,r)}function er(t){function r(){}function s(e,t){var n=new Wt(t,e,null,{lazy:!0});return function(){return n.dirty&&n.evaluate(),bt.target&&n.depend(),n.value}}Object.defineProperty(t.prototype,"$data",{get:function(){return this._data},set:function(e){e!==this._data&&this._setData(e)}}),t.prototype._initState=function(){this._initProps(),this._initMeta(),this._initMethods(),this._initData(),this._initComputed()},t.prototype._initProps=function(){var e=this.$options,t=e.el,n=e.props;t=e.el=j(t),this._propsUnlinkFn=t&&1===t.nodeType&&n?Mn(this,t,n,this._scope):null},t.prototype._initData=function(){var t=this._data,r=this.$options.data,i=r&&r();if(i){this._data=i;for(var s in t)null===this._props[s].raw&&n(i,s)||e(i,s,t[s])}var o,u,a=this._data,f=Object.keys(a);for(o=f.length;o--;)u=f[o],this._proxy(u);xt(a,this)},t.prototype._setData=function(e){e=e||{};var t=this._data;this._data=e;var r,i,s;for(r=Object.keys(t),s=r.length;s--;)i=r[s],i in e||this._unproxy(i);for(r=Object.keys(e),s=r.length;s--;)i=r[s],n(this,i)||this._proxy(i);t.__ob__.removeVm(this),xt(e,this),this._digest()},t.prototype._proxy=function(e){if(!i(e)){var t=this;Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return t._data[e]},set:function(n){t._data[e]=n}})}},t.prototype._unproxy=function(e){i(e)||delete this[e]},t.prototype._digest=function(){for(var e=0,t=this._watchers.length;t>e;e++)this._watchers[e].update(!0)},t.prototype._initComputed=function(){var e=this.$options.computed;if(e)for(var t in e){var n=e[t],i={enumerable:!0,configurable:!0};"function"==typeof n?(i.get=s(n,this),i.set=r):(i.get=n.get?n.cache!==!1?s(n.get,this):p(n.get,this):r,i.set=n.set?p(n.set,this):r),Object.defineProperty(this,t,i)}},t.prototype._initMethods=function(){var e=this.$options.methods;if(e)for(var t in e)this[t]=p(e[t],this)},t.prototype._initMeta=function(){var e=this.$options._meta;if(e)for(var t in e)Tt(this,t,e[t])}}function tr(e){function t(e,t){for(var n,r,i=t.attributes,s=0,o=i.length;o>s;s++)n=i[s].name,No.test(n)&&(n=n.replace(No,""),r=(e._scope||e._context).$eval(i[s].value,!0),r._fromParent=!0,e.$on(n.replace(No),r))}function n(e,t,n){if(n){var i,s,o,u;for(s in n)if(i=n[s],Tr(i))for(o=0,u=i.length;u>o;o++)r(e,t,s,i[o]);else r(e,t,s,i)}}function r(e,t,n,i,s){var o=typeof i;if("function"===o)e[t](n,i,s);else if("string"===o){var u=e.$options.methods,a=u&&u[i];a&&e[t](n,a,s)}else i&&"object"===o&&r(e,t,n,i.handler,i)}function i(){this._isAttached||(this._isAttached=!0,this.$children.forEach(s))}function s(e){!e._isAttached&&F(e.$el)&&e._callHook("attached")}function o(){this._isAttached&&(this._isAttached=!1,this.$children.forEach(u))}function u(e){e._isAttached&&!F(e.$el)&&e._callHook("detached")}e.prototype._initEvents=function(){var e=this.$options;e._asComponent&&t(this,e.el),n(this,"$on",e.events),n(this,"$watch",e.watch)},e.prototype._initDOMHooks=function(){this.$on("hook:attached",i),this.$on("hook:detached",o)},e.prototype._callHook=function(e){this.$emit("pre-hook:"+e);var t=this.$options[e];if(t)for(var n=0,r=t.length;r>n;n++)t[n].call(this);this.$emit("hook:"+e)}}function nr(){}function rr(e,t,n,r,i,s){this.vm=t,this.el=n,this.descriptor=e,this.name=e.name,this.expression=e.expression,this.arg=e.arg,this.modifiers=e.modifiers,this.filters=e.filters,this.literal=this.modifiers&&this.modifiers.literal,this._locked=!1,this._bound=!1,this._listeners=null,this._host=r,this._scope=i,this._frag=s}function ir(e){e.prototype._updateRef=function(e){var t=this.$options._ref;if(t){var n=(this._scope||this._context).$refs;e?n[t]===this&&(n[t]=null):n[t]=this}},e.prototype._compile=function(e){var t=this.$options,n=e;if(e=Qn(e,t),this._initElement(e),1!==e.nodeType||null===I(e,"v-pre")){var r,i=this._context&&this._context.$options,s=_n(e,t,i),o=this.constructor;t._linkerCachable&&(r=o.linker,r||(r=o.linker=Cn(e,t)));var u=s(this,e,this._scope),a=r?r(this,e):Cn(e,t)(this,e);this._unlinkFn=function(){u(),a(!0)},t.replace&&V(n,e),this._isCompiled=!0,this._callHook("compiled")}},e.prototype._initElement=function(e){e instanceof DocumentFragment?(this._isFragment=!0,this.$el=this._fragmentStart=e.firstChild,this._fragmentEnd=e.lastChild,3===this._fragmentStart.nodeType&&(this._fragmentStart.data=this._fragmentEnd.data=""),this._fragment=e):this.$el=e,this.$el.__vue__=this,this._callHook("beforeCompile")},e.prototype._bindDir=function(e,t,n,r,i){this._directives.push(new rr(e,this,t,n,r,i))},e.prototype._destroy=function(e,t){if(this._isBeingDestroyed)return void (t||this._cleanup());var n,r,i=this,s=function(){!n||r||t||i._cleanup()};e&&this.$el&&(r=!0,this.$remove(function(){r=!1,s()})),this._callHook("beforeDestroy"),this._isBeingDestroyed=!0;var o,u=this.$parent;for(u&&!u._isBeingDestroyed&&(u.$children.$remove(this),this._updateRef(!0)),o=this.$children.length;o--;)this.$children[o].$destroy();for(this._propsUnlinkFn&&this._propsUnlinkFn(),this._unlinkFn&&this._unlinkFn(),o=this._watchers.length;o--;)this._watchers[o].teardown();this.$el&&(this.$el.__vue__=null),n=!0,s()},e.prototype._cleanup=function(){this._isDestroyed||(this._frag&&this._frag.children.$remove(this),this._data.__ob__&&this._data.__ob__.removeVm(this),this.$el=this.$parent=this.$root=this.$children=this._watchers=this._context=this._scope=this._directives=null,this._isDestroyed=!0,this._callHook("destroyed"),this.$off())}}function sr(e){e.prototype._applyFilters=function(e,t,n,r){var i,s,o,u,a,f,l,c,h;for(f=0,l=n.length;l>f;f++)if(i=n[f],s=gt(this.$options,"filters",i.name),s&&(s=r?s.write:s.read||s,"function"==typeof s)){if(o=r?[e,t]:[e],a=r?2:1,i.args)for(c=0,h=i.args.length;h>c;c++)u=i.args[c],o[c+a]=u.dynamic?this.$get(u.value):u.value;e=s.apply(this,o)}return e},e.prototype._resolveComponent=function(t,n){var r=gt(this.$options,"components",t);if(r)if(r.options)n(r);else if(r.resolved)n(r.resolved);else if(r.requested)r.pendingCallbacks.push(n);else{r.requested=!0;var i=r.pendingCallbacks=[n];r(function(t){g(t)&&(t=e.extend(t)),r.resolved=t;for(var n=0,s=i.length;s>n;n++)i[n](t)},function(e){})}}}function or(n){function r(e){return(new Function("return function "+h(e)+" (options) { this._init(options) }"))()}n.util=bi,n.config=ai,n.set=e,n["delete"]=t,n.nextTick=Br,n.compiler=To,n.FragmentFactory=pn,n.internalDirectives=co,n.parsers={path:Bi,text:si,template:Xs,directive:Zr,expression:Qi},n.cid=0;var i=1;n.extend=function(e){e=e||{};var t=this,n=0===t.cid;if(n&&e._Ctor)return e._Ctor;var s=e.name||t.options.name,o=r(s||"VueComponent");return o.prototype=Object.create(t.prototype),o.prototype.constructor=o,o.cid=i++,o.options=mt(t.options,e),o["super"]=t,o.extend=t.extend,ai._assetTypes.forEach(function(e){o[e]=t[e]}),s&&(o.options.components[s]=o),n&&(e._Ctor=o),o},n.use=function(e){if(!e.installed){var t=d(arguments,1);return t.unshift(this),"function"==typeof e.install?e.install.apply(e,t):e.apply(null,t),e.installed=!0,this}},n.mixin=function(e){n.options=mt(n.options,e)},ai._assetTypes.forEach(function(e){n[e]=function(t,r){return r?("component"===e&&g(r)&&(r.name=t,r=n.extend(r)),this.options[e+"s"][t]=r,r):this.options[e+"s"][t]}})}function ur(e){function n(e){return JSON.parse(JSON.stringify(e))}e.prototype.$get=function(e,t){var n=Ft(e);if(n){if(t&&!It(e)){var r=this;return function(){r.$arguments=d(arguments);var e=n.get.call(r,r);return r.$arguments=null,e}}try{return n.get.call(this,this)}catch(i){}}},e.prototype.$set=function(e,t){var n=Ft(e,!0);n&&n.set&&n.set.call(this,this,t)},e.prototype.$delete=function(e){t(this._data,e)},e.prototype.$watch=function(e,t,n){var r,i=this;"string"==typeof e&&(r=C(e),e=r.expression);var s=new Wt(i,e,t,{deep:n&&n.deep,sync:n&&n.sync,filters:r&&r.filters,user:!n||n.user!==!1});return n&&n.immediate&&t.call(i,s.value),function(){s.teardown()}},e.prototype.$eval=function(e,t){if(Co.test(e)){var n=C(e),r=this.$get(n.expression,t);return n.filters?this._applyFilters(r,null,n.filters):r}return this.$get(e,t)},e.prototype.$interpolate=function(e){var t=A(e),n=this;return t?1===t.length?n.$eval(t[0].value)+"":t.map(function(e){return e.tag?n.$eval(e.value):e.value}).join(""):e},e.prototype.$log=function(e){var t=e?Ot(this._data,e):this._data;if(t&&(t=n(t)),!e)for(var r in this.$options.computed)t[r]=n(this[r]);console.log(t)}}function ar(e){function t(e,t,r,i,s,o){t=n(t);var u=!F(t),a=i===!1||u?s:o,f=!u&&!e._isAttached&&!F(e.$el);return e._isFragment?(it(e._fragmentStart,e._fragmentEnd,function(n){a(n,t,e)}),r&&r()):a(e.$el,t,e,r),f&&e._callHook("attached"),e}function n(e){return"string"==typeof e?document.querySelector(e):e}function r(e,t,n,r){t.appendChild(e),r&&r()}function i(e,t,n,r){U(e,t),r&&r()}function s(e,t,n){W(e),n&&n()}e.prototype.$nextTick=function(e){Br(e,this)},e.prototype.$appendTo=function(e,n,i){return t(this,e,n,i,r,D)},e.prototype.$prependTo=function(e,t,r){return e=n(e),e.hasChildNodes()?this.$before(e.firstChild,t,r):this.$appendTo(e,t,r),this},e.prototype.$before=function(e,n,r){return t(this,e,n,r,i,P)},e.prototype.$after=function(e,t,r){return e=n(e),e.nextSibling?this.$before(e.nextSibling,t,r):this.$appendTo(e.parentNode,t,r),this},e.prototype.$remove=function(e,t){if(!this.$el.parentNode)return e&&e();var n=this._isAttached&&F(this.$el);n||(t=!1);var r=this,i=function(){n&&r._callHook("detached"),e&&e()};if(this._isFragment)st(this._fragmentStart,this._fragmentEnd,this,this._fragment,i);else{var o=t===!1?s:H;o(this.$el,this,i)}return this}}function fr(e){function t(e,t,r){var i=e.$parent;if(i&&r&&!n.test(t))for(;i;)i._eventsCount[t]=(i._eventsCount[t]||0)+r,i=i.$parent}e.prototype.$on=function(e,n){return(this._events[e]||(this._events[e]=[])).push(n),t(this,e,1),this},e.prototype.$once=function(e,t){function n(){r.$off(e,n),t.apply(this,arguments)}var r=this;return n.fn=t,this.$on(e,n),this},e.prototype.$off=function(e,n){var r;if(!arguments.length){if(this.$parent)for(e in this._events)r=this._events[e],r&&t(this,e,-r.length);return this._events={},this}if(r=this._events[e],!r)return this;if(1===arguments.length)return t(this,e,-r.length),this._events[e]=null,this;for(var i,s=r.length;s--;)if(i=r[s],i===n||i.fn===n){t(this,e,-1),r.splice(s,1);break}return this},e.prototype.$emit=function(e){var t="string"==typeof e;e=t?e:e.name;var n=this._events[e],r=t||!n;if(n){n=n.length>1?d(n):n;var i=t&&n.some(function(e){return e._fromParent});i&&(r=!1);for(var s=d(arguments,1),o=0,u=n.length;u>o;o++){var a=n[o],f=a.apply(this,s);f!==!0||i&&!a._fromParent||(r=!0)}}return r},e.prototype.$broadcast=function(e){var t="string"==typeof e;if(e=t?e:e.name,this._eventsCount[e]){var n=this.$children,r=d(arguments);t&&(r[0]={name:e,source:this});for(var i=0,s=n.length;s>i;i++){var o=n[i],u=o.$emit.apply(o,r);u&&o.$broadcast.apply(o,r)}return this}},e.prototype.$dispatch=function(e){var t=this.$emit.apply(this,arguments);if(t){var n=this.$parent,r=d(arguments);for(r[0]={name:e,source:this};n;)t=n.$emit.apply(n,r),n=t?n.$parent:null;return this}};var n=/^hook:/}function lr(e){function t(){this._isAttached=!0,this._isReady=!0,this._callHook("ready")}e.prototype.$mount=function(e){return this._isCompiled?void 0:(e=j(e),e||(e=document.createElement("div")),this._compile(e),this._initDOMHooks(),F(this.$el)?(this._callHook("attached"),t.call(this)):this.$once("hook:attached",t),this)},e.prototype.$destroy=function(e,t){this._destroy(e,t)},e.prototype.$compile=function(e,t,n,r){return Cn(e,this.$options,!0)(this,e,t,n,r)}}function cr(e){this._init(e)}function hr(e,t,n){return n=n?parseInt(n,10):0,t=o(t),"number"==typeof t?e.slice(n,n+t):e}function pr(e,t,n){if(e=ko(e),null==t)return e;if("function"==typeof t)return e.filter(t);t=(""+t).toLowerCase();for(var r,i,s,o,u="in"===n?3:2,a=d(arguments,u).reduce(function(e,t){return e.concat(t)},[]),f=[],l=0,c=e.length;c>l;l++)if(r=e[l],s=r&&r.$value||r,o=a.length){for(;o--;)if(i=a[o],"$key"===i&&vr(r.$key,t)||vr(Ot(s,i),t)){f.push(r);break}}else vr(r,t)&&f.push(r);return f}function dr(e,t,n){if(e=ko(e),!t)return e;var r=n&&0>n?-1:1;return e.slice().sort(function(e,n){return"$key"!==t&&(m(e)&&"$value"in e&&(e=e.$value),m(n)&&"$value"in n&&(n=n.$value)),e=m(e)?Ot(e,t):e,n=m(n)?Ot(n,t):n,e===n?0:e>n?r:-r})}function vr(e,t){var n;if(g(e)){var r=Object.keys(e);for(n=r.length;n--;)if(vr(e[r[n]],t))return!0}else if(Tr(e)){for(n=e.length;n--;)if(vr(e[n],t))return!0}else if(null!=e)return e.toString().toLowerCase().indexOf(t)>-1}function mr(e,t,n){function r(e){!tt(e)||e.hasAttribute("v-if")||e.hasAttribute("v-for")||(e=sn(e)),e=rn(e),i.appendChild(e)}for(var i=document.createDocumentFragment(),s=0,o=e.length;o>s;s++){var u=e[s];n&&!u.__v_selected?r(u):n||u.parentNode!==t||(u.__v_selected=!0,r(u))}return i}var gr=Object.prototype.hasOwnProperty,yr=/^\s?(true|false|-?[\d\.]+|'[^']*'|"[^"]*")\s?$/,br=/-(\w)/g,wr=/([a-z\d])([A-Z])/g,Er=/(?:^|[-_\/])(\w)/g,Sr=Object.prototype.toString,xr="[object Object]",Tr=Array.isArray,Nr="__proto__"in{},Cr="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window),kr=Cr&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__,Lr=Cr&&navigator.userAgent.toLowerCase().indexOf("msie 9.0")>0,Ar=Cr&&navigator.userAgent.toLowerCase().indexOf("android")>0,Or=void 0,Mr=void 0,_r=void 0,Dr=void 0;if(Cr&&!Lr){var Pr=void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend,Hr=void 0===window.onanimationend&&void 0!==window.onwebkitanimationend;Or=Pr?"WebkitTransition":"transition",Mr=Pr?"webkitTransitionEnd":"transitionend",_r=Hr?"WebkitAnimation":"animation",Dr=Hr?"webkitAnimationEnd":"animationend"}var Br=function(){function e(){r=!1;var e=n.slice(0);n=[];for(var t=0;t<e.length;t++)e[t]()}var t,n=[],r=!1;if("undefined"!=typeof MutationObserver){var i=1,s=new MutationObserver(e),o=document.createTextNode(i);s.observe(o,{characterData:!0}),t=function(){i=(i+1)%2,o.data=i}}else{var u=Cr?window:"undefined"!=typeof global?global:{};t=u.setImmediate||setTimeout}return function(i,s){var o=s?function(){i.call(s)}:i;n.push(o),r||(r=!0,t(e,0))}}(),jr=x.prototype;jr.put=function(e,t){var n;this.size===this.limit&&(n=this.shift());var r=this.get(e,!0);return r||(r={key:e},this._keymap[e]=r,this.tail?(this.tail.newer=r,r.older=this.tail):this.head=r,this.tail=r,this.size++),r.value=t,n},jr.shift=function(){var e=this.head;return e&&(this.head=this.head.newer,this.head.older=void 0,e.newer=e.older=void 0,this._keymap[e.key]=void 0,this.size--),e},jr.get=function(e,t){var n=this._keymap[e];if(void 0!==n)return n===this.tail?t?n:n.value:(n.newer&&(n===this.head&&(this.head=n.newer),n.newer.older=n.older),n.older&&(n.older.newer=n.newer),n.newer=void 0,n.older=this.tail,this.tail&&(this.tail.newer=n),this.tail=n,t?n:n.value)};var Fr,Ir,qr,Rr,Ur,zr,Wr,Xr,Vr,$r,Jr,Kr,Qr=new x(1e3),Gr=/[^\s'"]+|'[^']*'|"[^"]*"/g,Yr=/^in$|^-?\d+/,Zr=Object.freeze({parseDirective:C}),ei=/[-.*+?^${}()|[\]\/\\]/g,ti=void 0,ni=void 0,ri=void 0,ii=/[^|]\|[^|]/,si=Object.freeze({compileRegex:L,parseText:A,tokensToExp:O}),oi=["{{","}}"],ui=["{{{","}}}"],ai=Object.defineProperties({debug:!1,silent:!1,async:!0,warnExpressionErrors:!0,convertAllProperties:!1,_delimitersChanged:!0,_assetTypes:["component","directive","elementDirective","filter","transition","partial"],_propBindingModes:{ONE_WAY:0,TWO_WAY:1,ONE_TIME:2},_maxUpdateCount:100},{delimiters:{get:function(){return oi},set:function(e){oi=e,L()},configurable:!0,enumerable:!0},unsafeDelimiters:{get:function(){return ui},set:function(e){ui=e,L()},configurable:!0,enumerable:!0}}),fi=void 0,li=/^v-ref:/,ci=/^(div|p|span|img|a|b|i|br|ul|ol|li|h1|h2|h3|h4|h5|h6|code|pre|table|th|td|tr|form|label|input|select|option|nav|article|section|header|footer)$/,hi=/^(slot|partial|component)$/,pi=ai.optionMergeStrategies=Object.create(null);pi.data=function(e,t,n){return n?e||t?function(){var r="function"==typeof t?t.call(n):t,i="function"==typeof e?e.call(n):void 0;return r?ct(r,i):i}:void 0:t?"function"!=typeof t?e:e?function(){return ct(t.call(this),e.call(this))}:t:e},pi.el=function(e,t,n){if(n||!t||"function"==typeof t){var r=t||e;return n&&"function"==typeof r?r.call(n):r}},pi.init=pi.created=pi.ready=pi.attached=pi.detached=pi.beforeCompile=pi.compiled=pi.beforeDestroy=pi.destroyed=function(e,t){return t?e?e.concat(t):Tr(t)?t:[t]:e},pi.paramAttributes=function(){},ai._assetTypes.forEach(function(e){pi[e+"s"]=ht}),pi.watch=pi.events=function(e,t){if(!t)return e;if(!e)return t;var n={};v(n,e);for(var r in t){var i=n[r],s=t[r];i&&!Tr(i)&&(i=[i]),n[r]=i?i.concat(s):[s]}return n},pi.props=pi.methods=pi.computed=function(e,t){if(!t)return e;if(!e)return t;var n=Object.create(null);return v(n,e),v(n,t),n};var di=function(e,t){return void 0===t?e:t},vi=Array.prototype,mi=Object.create(vi);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(e){var t=vi[e];y(mi,e,function(){for(var n=arguments.length,r=new Array(n);n--;)r[n]=arguments[n];var i,s=t.apply(this,r),o=this.__ob__;switch(e){case"push":i=r;break;case"unshift":i=r;break;case"splice":i=r.slice(2)}return i&&o.observeArray(i),o.dep.notify(),s})}),y(vi,"$set",function(e,t){return e>=this.length&&(this.length=Number(e)+1),this.splice(e,1,t)[0]}),y(vi,"$remove",function(e){if(this.length){var t=w(this,e);return t>-1?this.splice(t,1):void 0}});var gi=0;bt.target=null,bt.prototype.addSub=function(e){this.subs.push(e)},bt.prototype.removeSub=function(e){this.subs.$remove(e)},bt.prototype.depend=function(){bt.target.addDep(this)},bt.prototype.notify=function(){for(var e=d(this.subs),t=0,n=e.length;n>t;t++)e[t].update()};var yi=Object.getOwnPropertyNames(mi);wt.prototype.walk=function(e){for(var t=Object.keys(e),n=0,r=t.length;r>n;n++)this.convert(t[n],e[t[n]])},wt.prototype.observeArray=function(e){for(var t=0,n=e.length;n>t;t++)xt(e[t])},wt.prototype.convert=function(e,t){Tt(this.value,e,t)},wt.prototype.addVm=function(e){(this.vms||(this.vms=[])).push(e)},wt.prototype.removeVm=function(e){this.vms.$remove(e)};var bi=Object.freeze({defineReactive:Tt,set:e,del:t,hasOwn:n,isLiteral:r,isReserved:i,_toString:s,toNumber:o,toBoolean:u,stripQuotes:a,camelize:f,hyphenate:c,classify:h,bind:p,toArray:d,extend:v,isObject:m,isPlainObject:g,def:y,debounce:b,indexOf:w,cancellable:E,looseEqual:S,isArray:Tr,hasProto:Nr,inBrowser:Cr,devtools:kr,isIE9:Lr,isAndroid:Ar,get transitionProp(){return Or},get transitionEndEvent(){return Mr},get animationProp(){return _r},get animationEndEvent(){return Dr},nextTick:Br,query:j,inDoc:F,getAttr:I,getBindAttr:q,hasBindAttr:R,before:U,after:z,remove:W,prepend:X,replace:V,on:$,off:J,setClass:K,addClass:Q,removeClass:G,extractContent:Y,trimNode:Z,isTemplate:tt,createAnchor:nt,findRef:rt,mapNodeRange:it,removeNodeRange:st,mergeOptions:mt,resolveAsset:gt,assertAsset:yt,checkComponentAttr:ot,initProp:at,assertProp:ft,coerceProp:lt,commonTagRE:ci,reservedTagRE:hi,warn:fi}),wi=0,Ei=new x(1e3),Si=0,xi=1,Ti=2,Ni=3,Ci=0,ki=1,Li=2,Ai=3,Oi=4,Mi=5,_i=6,Di=7,Pi=8,Hi=[];Hi[Ci]={ws:[Ci],ident:[Ai,Si],"[":[Oi],eof:[Di]},Hi[ki]={ws:[ki],".":[Li],"[":[Oi],eof:[Di]},Hi[Li]={ws:[Li],ident:[Ai,Si]},Hi[Ai]={ident:[Ai,Si],0:[Ai,Si],number:[Ai,Si],ws:[ki,xi],".":[Li,xi],"[":[Oi,xi],eof:[Di,xi]},Hi[Oi]={"'":[Mi,Si],'"':[_i,Si],"[":[Oi,Ti],"]":[ki,Ni],eof:Pi,"else":[Oi,Si]},Hi[Mi]={"'":[Oi,Si],eof:Pi,"else":[Mi,Si]},Hi[_i]={'"':[Oi,Si],eof:Pi,"else":[_i,Si]};var Bi=Object.freeze({parsePath:At,getPath:Ot,setPath:Mt}),ji=new x(1e3),Fi="Math,Date,this,true,false,null,undefined,Infinity,NaN,isNaN,isFinite,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,parseInt,parseFloat",Ii=new RegExp("^("+Fi.replace(/,/g,"\\b|")+"\\b)"),qi="break,case,class,catch,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,let,return,super,switch,throw,try,var,while,with,yield,enum,await,implements,package,proctected,static,interface,private,public",Ri=new RegExp("^("+qi.replace(/,/g,"\\b|")+"\\b)"),Ui=/\s/g,zi=/\n/g,Wi=/[\{,]\s*[\w\$_]+\s*:|('(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*")|new |typeof |void /g,Xi=/"(\d+)"/g,Vi=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['.*?'\]|\[".*?"\]|\[\d+\]|\[[A-Za-z_$][\w$]*\])*$/,$i=/[^\w$\.](?:[A-Za-z_$][\w$]*)/g,Ji=/^(?:true|false)$/,Ki=[],Qi=Object.freeze({parseExpression:Ft,isSimplePath:It}),Gi=[],Yi=[],Zi={},es={},ts=!1,ns=!1,rs=0;Wt.prototype.addDep=function(e){var t=e.id;this.newDeps[t]||(this.newDeps[t]=e,this.deps[t]||(this.deps[t]=e,e.addSub(this)))},Wt.prototype.get=function(){this.beforeGet();var e,t=this.scope||this.vm;try{e=this.getter.call(t,t)}catch(n){}return this.deep&&Xt(e),this.preProcess&&(e=this.preProcess(e)),this.filters&&(e=t._applyFilters(e,null,this.filters,!1)),this.postProcess&&(e=this.postProcess(e)),this.afterGet(),e},Wt.prototype.set=function(e){var t=this.scope||this.vm;this.filters&&(e=t._applyFilters(e,this.value,this.filters,!0));try{this.setter.call(t,t,e)}catch(n){}var r=t.$forContext;if(r&&r.alias===this.expression){if(r.filters)return;r._withLock(function(){t.$key?r.rawValue[t.$key]=e:r.rawValue.$set(t.$index,e)})}},Wt.prototype.beforeGet=function(){bt.target=this,this.newDeps=Object.create(null)},Wt.prototype.afterGet=function(){bt.target=null;for(var e=Object.keys(this.deps),t=e.length;t--;){var n=e[t];this.newDeps[n]||this.deps[n].removeSub(this)}this.deps=this.newDeps},Wt.prototype.update=function(e){this.lazy?this.dirty=!0:this.sync||!ai.async?this.run():(this.shallow=this.queued?e?this.shallow:!1:!!e,this.queued=!0,zt(this))},Wt.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||(m(e)||this.deep)&&!this.shallow){var t=this.value;this.value=e,this.prevError,this.cb.call(this.vm,e,t)}this.queued=this.shallow=!1}},Wt.prototype.evaluate=function(){var e=bt.target;this.value=this.get(),this.dirty=!1,bt.target=e},Wt.prototype.depend=function(){for(var e=Object.keys(this.deps),t=e.length;t--;)this.deps[e[t]].depend()},Wt.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||this.vm._vForRemoving||this.vm._watchers.$remove(this);for(var e=Object.keys(this.deps),t=e.length;t--;)this.deps[e[t]].removeSub(this);this.active=!1,this.vm=this.cb=this.value=null}};var is={bind:function(){var e=this.el;this.vm.$once("pre-hook:compiled",function(){e.removeAttribute("v-cloak")})}},ss={bind:function(){}},os=700,us=800,as=850,fs=1100,ls=1500,cs=1500,hs=1750,ps=2e3,ds=2e3,vs=2100,ms={priority:ls,bind:function(){if(this.arg){var e=this.id=f(this.arg),t=(this._scope||this.vm).$els;n(t,e)?t[e]=this.el:Tt(t,e,this.el)}},unbind:function(){var e=(this._scope||this.vm).$els;e[this.id]===this.el&&(e[this.id]=null)}},gs=["-webkit-","-moz-","-ms-"],ys=["Webkit","Moz","ms"],bs=/!important;?$/,ws=Object.create(null),Es=null,Ss={deep:!0,update:function(e){"string"==typeof e?this.el.style.cssText=e:Tr(e)?this.handleObject(e.reduce(v,{})):this.handleObject(e||{})},handleObject:function(e){var t,n,r=this.cache||(this.cache={});for(t in r)t in e||(this.handleSingle(t,null),delete r[t]);for(t in e)n=e[t],n!==r[t]&&(r[t]=n,this.handleSingle(t,n))},handleSingle:function(e,t){if(e=Vt(e))if(null!=t&&(t+=""),t){var n=bs.test(t)?"important":"";n&&(t=t.replace(bs,"").trim()),this.el.style.setProperty(e,t,n)}else this.el.style.removeProperty(e)}},xs="http://www.w3.org/1999/xlink",Ts=/^xlink:/,Ns=/^v-|^:|^@|^(?:is|transition|transition-mode|debounce|track-by|stagger|enter-stagger|leave-stagger)$/,Cs=/^(?:value|checked|selected|muted)$/,ks={value:"_value","true-value":"_trueValue","false-value":"_falseValue"},Ls={priority:as,bind:function(){var e=this.arg,t=this.el.tagName;e||(this.deep=!0);var n=this.descriptor,r=n.interp;r&&(n.hasOneTime&&(this.expression=O(r,this._scope||this.vm)),(Ns.test(e)||"name"===e&&("PARTIAL"===t||"SLOT"===t))&&(this.el.removeAttribute(e),this.invalid=!0))},update:function(e){if(!this.invalid){var t=this.arg;this.arg?this.handleSingle(t,e):this.handleObject(e||{})}},handleObject:Ss.handleObject,handleSingle:function(e,t){var n=this.el,r=this.descriptor.interp;this.modifiers.camel&&(e=f(e)),!r&&Cs.test(e)&&e in n&&(n[e]="value"===e&&null==t?"":t);var i=ks[e];if(!r&&i){n[i]=t;var s=n.__v_model;s&&s.listener()}return"value"===e&&"TEXTAREA"===n.tagName?void n.removeAttribute(e):void (null!=t&&t!==!1?"class"===e?(n.__v_trans&&(t+=" "+n.__v_trans.id+"-transition"),K(n,t)):Ts.test(e)?n.setAttributeNS(xs,e,t===!0?"":t):n.setAttribute(e,t===!0?"":t):n.removeAttribute(e))}},As={esc:27,tab:9,enter:13,space:32,"delete":[8,46],up:38,left:37,right:39,down:40},Os={acceptStatement:!0,priority:os,bind:function(){if("IFRAME"===this.el.tagName&&"load"!==this.arg){var e=
this;this.iframeBind=function(){$(e.el.contentWindow,e.arg,e.handler,e.modifiers.capture)},this.on("load",this.iframeBind)}},update:function(e){if(this.descriptor.raw||(e=function(){}),"function"==typeof e){this.modifiers.stop&&(e=Kt(e)),this.modifiers.prevent&&(e=Qt(e)),this.modifiers.self&&(e=Gt(e));var t=Object.keys(this.modifiers).filter(function(e){return"stop"!==e&&"prevent"!==e});t.length&&(e=Jt(e,t)),this.reset(),this.handler=e,this.iframeBind?this.iframeBind():$(this.el,this.arg,this.handler,this.modifiers.capture)}},reset:function(){var e=this.iframeBind?this.el.contentWindow:this.el;this.handler&&J(e,this.arg,this.handler)},unbind:function(){this.reset()}},Ms={bind:function(){function e(){var e=n.checked;return e&&n.hasOwnProperty("_trueValue")?n._trueValue:!e&&n.hasOwnProperty("_falseValue")?n._falseValue:e}var t=this,n=this.el;this.getValue=function(){return n.hasOwnProperty("_value")?n._value:t.params.number?o(n.value):n.value},this.listener=function(){var r=t._watcher.value;if(Tr(r)){var i=t.getValue();n.checked?w(r,i)<0&&r.push(i):r.$remove(i)}else t.set(e())},this.on("change",this.listener),n.hasAttribute("checked")&&(this.afterBind=this.listener)},update:function(e){var t=this.el;Tr(e)?t.checked=w(e,this.getValue())>-1:t.hasOwnProperty("_trueValue")?t.checked=S(e,t._trueValue):t.checked=!!e}},_s={bind:function(){var e=this,t=this.el;this.forceUpdate=function(){e._watcher&&e.update(e._watcher.get())};var n=this.multiple=t.hasAttribute("multiple");this.listener=function(){var r=Yt(t,n);r=e.params.number?Tr(r)?r.map(o):o(r):r,e.set(r)},this.on("change",this.listener);var r=Yt(t,n,!0);(n&&r.length||!n&&null!==r)&&(this.afterBind=this.listener),this.vm.$on("hook:attached",this.forceUpdate)},update:function(e){var t=this.el;t.selectedIndex=-1;for(var n,r,i=this.multiple&&Tr(e),s=t.options,o=s.length;o--;)n=s[o],r=n.hasOwnProperty("_value")?n._value:n.value,n.selected=i?Zt(e,r)>-1:S(e,r)},unbind:function(){this.vm.$off("hook:attached",this.forceUpdate)}},Ds={bind:function(){var e=this,t=this.el;this.getValue=function(){if(t.hasOwnProperty("_value"))return t._value;var n=t.value;return e.params.number&&(n=o(n)),n},this.listener=function(){e.set(e.getValue())},this.on("change",this.listener),t.hasAttribute("checked")&&(this.afterBind=this.listener)},update:function(e){this.el.checked=S(e,this.getValue())}},Ps={bind:function(){var e=this,t=this.el,n="range"===t.type,r=this.params.lazy,i=this.params.number,s=this.params.debounce,u=!1;if(Ar||n||(this.on("compositionstart",function(){u=!0}),this.on("compositionend",function(){u=!1,r||e.listener()})),this.focused=!1,n||r||(this.on("focus",function(){e.focused=!0}),this.on("blur",function(){e.focused=!1,(!e._frag||e._frag.inserted)&&e.rawListener()})),this.listener=this.rawListener=function(){if(!u&&e._bound){var r=i||n?o(t.value):t.value;e.set(r),Br(function(){e._bound&&!e.focused&&e.update(e._watcher.value)})}},s&&(this.listener=b(this.listener,s)),this.hasjQuery="function"==typeof jQuery,this.hasjQuery){var a=jQuery.fn.on?"on":"bind";jQuery(t)[a]("change",this.listener),r||jQuery(t)[a]("input",this.listener)}else this.on("change",this.listener),r||this.on("input",this.listener);!r&&Lr&&(this.on("cut",function(){Br(e.listener)}),this.on("keyup",function(t){(46===t.keyCode||8===t.keyCode)&&e.listener()})),(t.hasAttribute("value")||"TEXTAREA"===t.tagName&&t.value.trim())&&(this.afterBind=this.listener)},update:function(e){this.el.value=s(e)},unbind:function(){var e=this.el;if(this.hasjQuery){var t=jQuery.fn.off?"off":"unbind";jQuery(e)[t]("change",this.listener),jQuery(e)[t]("input",this.listener)}}},Hs={text:Ps,radio:Ds,select:_s,checkbox:Ms},Bs={priority:us,twoWay:!0,handlers:Hs,params:["lazy","number","debounce"],bind:function(){this.checkFilters(),this.hasRead&&!this.hasWrite;var e,t=this.el,n=t.tagName;if("INPUT"===n)e=Hs[t.type]||Hs.text;else if("SELECT"===n)e=Hs.select;else{if("TEXTAREA"!==n)return;e=Hs.text}t.__v_model=this,e.bind.call(this),this.update=e.update,this._unbind=e.unbind},checkFilters:function(){var e=this.filters;if(e)for(var t=e.length;t--;){var n=gt(this.vm.$options,"filters",e[t].name);("function"==typeof n||n.read)&&(this.hasRead=!0),n.write&&(this.hasWrite=!0)}},unbind:function(){this.el.__v_model=null,this._unbind&&this._unbind()}},js={bind:function(){var e=this.el.nextElementSibling;e&&null!==I(e,"v-else")&&(this.elseEl=e)},update:function(e){this.apply(this.el,e),this.elseEl&&this.apply(this.elseEl,!e)},apply:function(e,t){function n(){e.style.display=t?"":"none"}F(e)?B(e,t?1:-1,n,this.vm):n()}},Fs=new x(1e3),Is=new x(1e3),qs={efault:[0,"",""],legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"]};qs.td=qs.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],qs.option=qs.optgroup=[1,'<select multiple="multiple">',"</select>"],qs.thead=qs.tbody=qs.colgroup=qs.caption=qs.tfoot=[1,"<table>","</table>"],qs.g=qs.defs=qs.symbol=qs.use=qs.image=qs.text=qs.circle=qs.ellipse=qs.line=qs.path=qs.polygon=qs.polyline=qs.rect=[1,'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ev="http://www.w3.org/2001/xml-events"version="1.1">',"</svg>"];var Rs=/<([\w:]+)/,Us=/&#?\w+?;/,zs=function(){if(Cr){var e=document.createElement("div");return e.innerHTML="<template>1</template>",!e.cloneNode(!0).firstChild.innerHTML}return!1}(),Ws=function(){if(Cr){var e=document.createElement("textarea");return e.placeholder="t","t"===e.cloneNode(!0).value}return!1}(),Xs=Object.freeze({cloneNode:rn,parseTemplate:sn});on.prototype.callHook=function(e){var t,n;for(t=0,n=this.childFrags.length;n>t;t++)this.childFrags[t].callHook(e);for(t=0,n=this.children.length;n>t;t++)e(this.children[t])},on.prototype.beforeRemove=function(){var e,t;for(e=0,t=this.childFrags.length;t>e;e++)this.childFrags[e].beforeRemove(!1);for(e=0,t=this.children.length;t>e;e++)this.children[e].$destroy(!1,!0);var n=this.unlink.dirs;for(e=0,t=n.length;t>e;e++)n[e]._watcher&&n[e]._watcher.teardown()},on.prototype.destroy=function(){this.parentFrag&&this.parentFrag.childFrags.$remove(this),this.node.__vfrag__=null,this.unlink()};var Vs=new x(5e3);pn.prototype.create=function(e,t,n){var r=rn(this.template);return new on(this.linker,this.vm,r,e,t,n)};var $s={priority:ds,bind:function(){var e=this.el;if(e.__vue__)this.invalid=!0;else{var t=e.nextElementSibling;t&&null!==I(t,"v-else")&&(W(t),this.elseFactory=new pn(this.vm,t)),this.anchor=nt("v-if"),V(e,this.anchor),this.factory=new pn(this.vm,e)}},update:function(e){this.invalid||(e?this.frag||this.insert():this.remove())},insert:function(){this.elseFrag&&(this.elseFrag.remove(),this.elseFrag=null),this.frag=this.factory.create(this._host,this._scope,this._frag),this.frag.before(this.anchor)},remove:function(){this.frag&&(this.frag.remove(),this.frag=null),this.elseFactory&&!this.elseFrag&&(this.elseFrag=this.elseFactory.create(this._host,this._scope,this._frag),this.elseFrag.before(this.anchor))},unbind:function(){this.frag&&this.frag.destroy(),this.elseFrag&&this.elseFrag.destroy()}},Js=0,Ks={priority:ps,params:["track-by","stagger","enter-stagger","leave-stagger"],bind:function(){var e=this.expression.match(/(.*) in (.*)/);if(e){var t=e[1].match(/\((.*),(.*)\)/);t?(this.iterator=t[1].trim(),this.alias=t[2].trim()):this.alias=e[1].trim(),this.expression=e[2]}if(this.alias){this.id="__v-for__"+ ++Js;var n=this.el.tagName;this.isOption=("OPTION"===n||"OPTGROUP"===n)&&"SELECT"===this.el.parentNode.tagName,this.start=nt("v-for-start"),this.end=nt("v-for-end"),V(this.el,this.end),U(this.start,this.end),this.cache=Object.create(null),this.factory=new pn(this.vm,this.el)}},update:function(e){this.diff(e),this.updateRef(),this.updateModel()},diff:function(e){var t,r,i,s,o,u,a=e[0],f=this.fromObject=m(a)&&n(a,"$key")&&n(a,"$value"),l=this.params.trackBy,c=this.frags,h=this.frags=new Array(e.length),p=this.alias,d=this.iterator,v=this.start,g=this.end,y=F(v),b=!c;for(t=0,r=e.length;r>t;t++)a=e[t],s=f?a.$key:null,o=f?a.$value:a,u=!m(o),i=!b&&this.getCachedFrag(o,t,s),i?(i.reused=!0,i.scope.$index=t,s&&(i.scope.$key=s),d&&(i.scope[d]=null!==s?s:t),(l||f||u)&&(i.scope[p]=o)):(i=this.create(o,p,t,s),i.fresh=!b),h[t]=i,b&&i.before(g);if(!b){var w=0,E=c.length-h.length;for(this.vm._vForRemoving=!0,t=0,r=c.length;r>t;t++)i=c[t],i.reused||(this.deleteCachedFrag(i),this.remove(i,w++,E,y));this.vm._vForRemoving=!1,this.vm._watchers=this.vm._watchers.filter(function(e){return e.active});var S,x,T,N=0;for(t=0,r=h.length;r>t;t++)i=h[t],S=h[t-1],x=S?S.staggerCb?S.staggerAnchor:S.end||S.node:v,i.reused&&!i.staggerCb?(T=dn(i,v,this.id),T===S||T&&dn(T,v,this.id)===S||this.move(i,x)):this.insert(i,N++,x,y),i.reused=i.fresh=!1}},create:function(e,t,n,r){var i=this._host,s=this._scope||this.vm,o=Object.create(s);o.$refs=Object.create(s.$refs),o.$els=Object.create(s.$els),o.$parent=s,o.$forContext=this,Tt(o,t,e),Tt(o,"$index",n),r?Tt(o,"$key",r):o.$key&&y(o,"$key",null),this.iterator&&Tt(o,this.iterator,null!==r?r:n);var u=this.factory.create(i,o,this._frag);return u.forId=this.id,this.cacheFrag(e,u,n,r),u},updateRef:function(){var e=this.descriptor.ref;if(e){var t,n=(this._scope||this.vm).$refs;this.fromObject?(t={},this.frags.forEach(function(e){t[e.scope.$key]=vn(e)})):t=this.frags.map(vn),n[e]=t}},updateModel:function(){if(this.isOption){var e=this.start.parentNode,t=e&&e.__v_model;t&&t.forceUpdate()}},insert:function(e,t,n,r){e.staggerCb&&(e.staggerCb.cancel(),e.staggerCb=null);var i=this.getStagger(e,t,null,"enter");if(r&&i){var s=e.staggerAnchor;s||(s=e.staggerAnchor=nt("stagger-anchor"),s.__vfrag__=e),z(s,n);var o=e.staggerCb=E(function(){e.staggerCb=null,e.before(s),W(s)});setTimeout(o,i)}else e.before(n.nextSibling)},remove:function(e,t,n,r){if(e.staggerCb)return e.staggerCb.cancel(),void (e.staggerCb=null);var i=this.getStagger(e,t,n,"leave");if(r&&i){var s=e.staggerCb=E(function(){e.staggerCb=null,e.remove()});setTimeout(s,i)}else e.remove()},move:function(e,t){t.nextSibling||this.end.parentNode.appendChild(this.end),e.before(t.nextSibling,!1)},cacheFrag:function(e,t,r,i){var s,o=this.params.trackBy,u=this.cache,a=!m(e);i||o||a?(s=o?"$index"===o?r:e[o]:i||e,u[s]||(u[s]=t)):(s=this.id,n(e,s)?null===e[s]&&(e[s]=t):y(e,s,t)),t.raw=e},getCachedFrag:function(e,t,n){var r,i=this.params.trackBy,s=!m(e);if(n||i||s){var o=i?"$index"===i?t:e[i]:n||e;r=this.cache[o]}else r=e[this.id];return r&&(r.reused||r.fresh),r},deleteCachedFrag:function(e){var t=e.raw,r=this.params.trackBy,i=e.scope,s=i.$index,o=n(i,"$key")&&i.$key,u=!m(t);if(r||o||u){var a=r?"$index"===r?s:t[r]:o||t;this.cache[a]=null}else t[this.id]=null,e.raw=null},getStagger:function(e,t,n,r){r+="Stagger";var i=e.node.__v_trans,s=i&&i.hooks,o=s&&(s[r]||s.stagger);return o?o.call(e,t,n):t*parseInt(this.params[r]||this.params.stagger,10)},_preProcess:function(e){return this.rawValue=e,e},_postProcess:function(e){if(Tr(e))return e;if(g(e)){for(var t,n=Object.keys(e),r=n.length,i=new Array(r);r--;)t=n[r],i[r]={$key:t,$value:e[t]};return i}return"number"!=typeof e||isNaN(e)||(e=mn(e)),e||[]},unbind:function(){if(this.descriptor.ref&&((this._scope||this.vm).$refs[this.descriptor.ref]=null),this.frags)for(var e,t=this.frags.length;t--;)e=this.frags[t],this.deleteCachedFrag(e),e.destroy()}},Qs={bind:function(){8===this.el.nodeType&&(this.nodes=[],this.anchor=nt("v-html"),V(this.el,this.anchor))},update:function(e){e=s(e),this.nodes?this.swap(e):this.el.innerHTML=e},swap:function(e){for(var t=this.nodes.length;t--;)W(this.nodes[t]);var n=sn(e,!0,!0);this.nodes=d(n.childNodes),U(n,this.anchor)}},Gs={bind:function(){this.attr=3===this.el.nodeType?"data":"textContent"},update:function(e){this.el[this.attr]=s(e)}},Ys={text:Gs,html:Qs,"for":Ks,"if":$s,show:js,model:Bs,on:Os,bind:Ls,el:ms,ref:ss,cloak:is},Zs=[],eo=!1,to="transition",no="animation",ro=Or+"Duration",io=_r+"Duration",so=bn.prototype;so.enter=function(e,t){this.cancelPending(),this.callHook("beforeEnter"),this.cb=t,Q(this.el,this.enterClass),e(),this.entered=!1,this.callHookWithCb("enter"),this.entered||(this.cancel=this.hooks&&this.hooks.enterCancelled,gn(this.enterNextTick))},so.enterNextTick=function(){this.justEntered=!0;var e=this;setTimeout(function(){e.justEntered=!1},17);var t=this.enterDone,n=this.getCssTransitionType(this.enterClass);this.pendingJsCb?n===to&&G(this.el,this.enterClass):n===to?(G(this.el,this.enterClass),this.setupCssCb(Mr,t)):n===no?this.setupCssCb(Dr,t):t()},so.enterDone=function(){this.entered=!0,this.cancel=this.pendingJsCb=null,G(this.el,this.enterClass),this.callHook("afterEnter"),this.cb&&this.cb()},so.leave=function(e,t){this.cancelPending(),this.callHook("beforeLeave"),this.op=e,this.cb=t,Q(this.el,this.leaveClass),this.left=!1,this.callHookWithCb("leave"),this.left||(this.cancel=this.hooks&&this.hooks.leaveCancelled,this.op&&!this.pendingJsCb&&(this.justEntered?this.leaveDone():gn(this.leaveNextTick)))},so.leaveNextTick=function(){var e=this.getCssTransitionType(this.leaveClass);if(e){var t=e===to?Mr:Dr;this.setupCssCb(t,this.leaveDone)}else this.leaveDone()},so.leaveDone=function(){this.left=!0,this.cancel=this.pendingJsCb=null,this.op(),G(this.el,this.leaveClass),this.callHook("afterLeave"),this.cb&&this.cb(),this.op=null},so.cancelPending=function(){this.op=this.cb=null;var e=!1;this.pendingCssCb&&(e=!0,J(this.el,this.pendingCssEvent,this.pendingCssCb),this.pendingCssEvent=this.pendingCssCb=null),this.pendingJsCb&&(e=!0,this.pendingJsCb.cancel(),this.pendingJsCb=null),e&&(G(this.el,this.enterClass),G(this.el,this.leaveClass)),this.cancel&&(this.cancel.call(this.vm,this.el),this.cancel=null)},so.callHook=function(e){this.hooks&&this.hooks[e]&&this.hooks[e].call(this.vm,this.el)},so.callHookWithCb=function(e){var t=this.hooks&&this.hooks[e];t&&(t.length>1&&(this.pendingJsCb=E(this[e+"Done"])),t.call(this.vm,this.el,this.pendingJsCb))},so.getCssTransitionType=function(e){if(!(!Mr||document.hidden||this.hooks&&this.hooks.css===!1||wn(this.el))){var t=this.type||this.typeCache[e];if(t)return t;var n=this.el.style,r=window.getComputedStyle(this.el),i=n[ro]||r[ro];if(i&&"0s"!==i)t=to;else{var s=n[io]||r[io];s&&"0s"!==s&&(t=no)}return t&&(this.typeCache[e]=t),t}},so.setupCssCb=function(e,t){this.pendingCssEvent=e;var n=this,r=this.el,i=this.pendingCssCb=function(s){s.target===r&&(J(r,e,i),n.pendingCssEvent=n.pendingCssCb=null,!n.pendingJsCb&&t&&t())};$(r,e,i)};var oo={priority:fs,update:function(e,t){var n=this.el,r=gt(this.vm.$options,"transitions",e);e=e||"v",n.__v_trans=new bn(n,e,r,this.el.__vue__||this.vm),t&&G(n,t+"-transition"),Q(n,e+"-transition")}},uo=ai._propBindingModes,ao={bind:function(){var e=this.vm,t=e._context,n=this.descriptor.prop,r=n.path,i=n.parentPath,s=n.mode===uo.TWO_WAY,o=this.parentWatcher=new Wt(t,i,function(t){t=lt(n,t),ft(n,t)&&(e[r]=t)},{twoWay:s,filters:n.filters,scope:this._scope});if(at(e,n,o.value),s){var u=this;e.$once("pre-hook:created",function(){u.childWatcher=new Wt(e,r,function(e){o.set(e)},{sync:!0})})}},unbind:function(){this.parentWatcher.teardown(),this.childWatcher&&this.childWatcher.teardown()}},fo={priority:cs,params:["keep-alive","transition-mode","inline-template"],bind:function(){this.el.__vue__||(this.keepAlive=this.params.keepAlive,this.keepAlive&&(this.cache={}),this.params.inlineTemplate&&(this.inlineTemplate=Y(this.el,!0)),this.pendingComponentCb=this.Component=null,this.pendingRemovals=0,this.pendingRemovalCb=null,this.anchor=nt("v-component"),V(this.el,this.anchor),this.el.removeAttribute("is"),this.descriptor.ref&&this.el.removeAttribute("v-ref:"+c(this.descriptor.ref)),this.literal&&this.setComponent(this.expression))},update:function(e){this.literal||this.setComponent(e)},setComponent:function(e,t){if(this.invalidatePending(),e){var n=this;this.resolveComponent(e,function(){n.mountComponent(t)})}else this.unbuild(!0),this.remove(this.childVM,t),this.childVM=null},resolveComponent:function(e,t){var n=this;this.pendingComponentCb=E(function(r){n.ComponentName=r.options.name||e,n.Component=r,t()}),this.vm._resolveComponent(e,this.pendingComponentCb)},mountComponent:function(e){this.unbuild(!0);var t=this,n=this.Component.options.activate,r=this.getCached(),i=this.build();n&&!r?(this.waitingFor=i,n.call(i,function(){t.waitingFor===i&&(t.waitingFor=null,t.transition(i,e))})):(r&&i._updateRef(),this.transition(i,e))},invalidatePending:function(){this.pendingComponentCb&&(this.pendingComponentCb.cancel(),this.pendingComponentCb=null)},build:function(e){var t=this.getCached();if(t)return t;if(this.Component){var n={name:this.ComponentName,el:rn(this.el),template:this.inlineTemplate,parent:this._host||this.vm,_linkerCachable:!this.inlineTemplate,_ref:this.descriptor.ref,_asComponent:!0,_isRouterView:this._isRouterView,_context:this.vm,_scope:this._scope,_frag:this._frag};e&&v(n,e);var r=new this.Component(n);return this.keepAlive&&(this.cache[this.Component.cid]=r),r}},getCached:function(){return this.keepAlive&&this.cache[this.Component.cid]},unbuild:function(e){this.waitingFor&&(this.waitingFor.$destroy(),this.waitingFor=null);var t=this.childVM;return!t||this.keepAlive?void (t&&t._updateRef(!0)):void t.$destroy(!1,e)},remove:function(e,t){var n=this.keepAlive;if(e){this.pendingRemovals++,this.pendingRemovalCb=t;var r=this;e.$remove(function(){r.pendingRemovals--,n||e._cleanup(),!r.pendingRemovals&&r.pendingRemovalCb&&(r.pendingRemovalCb(),r.pendingRemovalCb=null)})}else t&&t()},transition:function(e,t){var n=this,r=this.childVM;switch(this.childVM=e,n.params.transitionMode){case"in-out":e.$before(n.anchor,function(){n.remove(r,t)});break;case"out-in":n.remove(r,function(){e.$before(n.anchor,t)});break;default:n.remove(r),e.$before(n.anchor,t)}},unbind:function(){if(this.invalidatePending(),this.unbuild(),this.cache){for(var e in this.cache)this.cache[e].$destroy();this.cache=null}}},lo={deep:!0,update:function(e){e&&"string"==typeof e?this.handleObject(En(e)):g(e)?this.handleObject(e):Tr(e)?this.handleArray(e):this.cleanup()},handleObject:function(e){this.cleanup(e);for(var t=this.prevKeys=Object.keys(e),n=0,r=t.length;r>n;n++){var i=t[n];e[i]?Q(this.el,i):G(this.el,i)}},handleArray:function(e){this.cleanup(e);for(var t=0,n=e.length;n>t;t++)e[t]&&Q(this.el,e[t]);this.prevKeys=e.slice()},cleanup:function(e){if(this.prevKeys)for(var t=this.prevKeys.length;t--;){var n=this.prevKeys[t];!n||e&&Sn(e,n)||G(this.el,n)}}},co={style:Ss,"class":lo,component:fo,prop:ao,transition:oo},ho=ai._propBindingModes,po={},vo=/^[$_a-zA-Z]+[\w$]*$/,mo=/^v-bind:|^:/,go=/^v-on:|^@/,yo=/^v-([^:]+)(?:$|:(.*)$)/,bo=/\.[^\.]+/g,wo=/^(v-bind:|:)?transition$/,Eo=["for","if"],So=1e3;Wn.terminal=!0;var xo=/[^\w\-:\.]/,To=Object.freeze({compile:Cn,compileAndLinkProps:Mn,compileRoot:_n,terminalDirectives:Eo,transclude:Qn}),No=/^v-on:|^@/;rr.prototype._bind=function(){var e=this.name,t=this.descriptor;if(("cloak"!==e||this.vm._isCompiled)&&this.el&&this.el.removeAttribute){var n=t.attr||"v-"+e;this.el.removeAttribute(n)}var r=t.def;if("function"==typeof r?this.update=r:v(this,r),this._setupParams(),this.bind&&this.bind(),this._bound=!0,this.literal)this.update&&this.update(t.raw);else if((this.expression||this.modifiers)&&(this.update||this.twoWay)&&!this._checkStatement()){var i=this;this.update?this._update=function(e,t){i._locked||i.update(e,t)}:this._update=nr;var s=this._preProcess?p(this._preProcess,this):null,o=this._postProcess?p(this._postProcess,this):null,u=this._watcher=new Wt(this.vm,this.expression,this._update,{filters:this.filters,twoWay:this.twoWay,deep:this.deep,preProcess:s,postProcess:o,scope:this._scope});this.afterBind?this.afterBind():this.update&&this.update(u.value)}},rr.prototype._setupParams=function(){if(this.params){var e=this.params;this.params=Object.create(null);for(var t,n,r,i=e.length;i--;)t=e[i],r=f(t),n=q(this.el,t),null!=n?this._setupParamWatcher(r,n):(n=I(this.el,t),null!=n&&(this.params[r]=""===n?!0:n))}},rr.prototype._setupParamWatcher=function(e,t){var n=this,r=!1,i=(this._scope||this.vm).$watch(t,function(t,i){if(n.params[e]=t,r){var s=n.paramWatchers&&n.paramWatchers[e];s&&s.call(n,t,i)}else r=!0},{immediate:!0,user:!1});(this._paramUnwatchFns||(this._paramUnwatchFns=[])).push(i)},rr.prototype._checkStatement=function(){var e=this.expression;if(e&&this.acceptStatement&&!It(e)){var t=Ft(e).get,n=this._scope||this.vm,r=function(e){n.$event=e,t.call(n,n),n.$event=null};return this.filters&&(r=n._applyFilters(r,null,this.filters)),this.update(r),!0}},rr.prototype.set=function(e){this.twoWay&&this._withLock(function(){this._watcher.set(e)})},rr.prototype._withLock=function(e){var t=this;t._locked=!0,e.call(t),Br(function(){t._locked=!1})},rr.prototype.on=function(e,t,n){$(this.el,e,t,n),(this._listeners||(this._listeners=[])).push([e,t])},rr.prototype._teardown=function(){if(this._bound){this._bound=!1,this.unbind&&this.unbind(),this._watcher&&this._watcher.teardown();var e,t=this._listeners;if(t)for(e=t.length;e--;)J(this.el,t[e][0],t[e][1]);var n=this._paramUnwatchFns;if(n)for(e=n.length;e--;)n[e]();this.vm=this.el=this._watcher=this._listeners=null}};var Co=/[^|]\|[^|]/;Nt(cr),er(cr),tr(cr),ir(cr),sr(cr),or(cr),ur(cr),ar(cr),fr(cr),lr(cr);var ko=Ks._postProcess,Lo=/(\d{3})(?=\d)/g,Ao={orderBy:dr,filterBy:pr,limitBy:hr,json:{read:function(e,t){return"string"==typeof e?e:JSON.stringify(e,null,Number(t)||2)},write:function(e){try{return JSON.parse(e)}catch(t){return e}}},capitalize:function(e){return e||0===e?(e=e.toString(),e.charAt(0).toUpperCase()+e.slice(1)):""},uppercase:function(e){return e||0===e?e.toString().toUpperCase():""},lowercase:function(e){return e||0===e?e.toString().toLowerCase():""},currency:function(e,t){if(e=parseFloat(e),!isFinite(e)||!e&&0!==e)return"";t=null!=t?t:"$";var n=Math.abs(e).toFixed(2),r=n.slice(0,-3),i=r.length%3,s=i>0?r.slice(0,i)+(r.length>3?",":""):"",o=n.slice(-3),u=0>e?"-":"";return t+u+s+r.slice(i).replace(Lo,"$1,")+o},pluralize:function(e){var t=d(arguments,1);return t.length>1?t[e%10-1]||t[t.length-1]:t[0]+(1===e?"":"s")},debounce:function(e,t){return e?(t||(t=300),b(e,t)):void 0}},Oo={priority:hs,params:["name"],paramWatchers:{name:function(e){$s.remove.call(this),e&&this.insert(e)}},bind:function(){this.anchor=nt("v-partial"),V(this.el,this.anchor),this.insert(this.params.name)},insert:function(e){var t=gt(this.vm.$options,"partials",e);t&&(this.factory=new pn(this.vm,t),$s.insert.call(this))},unbind:function(){this.frag&&this.frag.destroy()}},Mo={priority:vs,bind:function(){var e=this.vm,t=e.$options._content;if(!t)return void this.fallback();var n=e._context,r=this.params&&this.params.name;if(r){var i='[slot="'+r+'"]',s=t.querySelectorAll(i);s.length?this.tryCompile(mr(s,t),n,e):this.fallback()}else this.tryCompile(mr(t.childNodes,t,!0),n,e)},tryCompile:function(e,t,n){e.hasChildNodes()?this.compile(e,t,n):this.fallback()},compile:function(e,t,n){if(e&&t){if(this.el.hasChildNodes()&&1===e.childNodes.length&&1===e.childNodes[0].nodeType&&e.childNodes[0].hasAttribute("v-if")){var r=document.createElement("template");r.setAttribute("v-else",""),r.innerHTML=this.el.innerHTML,e.appendChild(r)}var i=n?n._scope:this._scope;this.unlink=t.$compile(e,n,i,this._frag)}e?V(this.el,e):W(this.el)},fallback:function(){this.compile(Y(this.el,!0),this.vm)},unbind:function(){this.unlink&&this.unlink()}},_o=v(v({},Mo),{priority:Mo.priority+1,params:["name"]}),Do={slot:Mo,_namedSlot:_o,partial:Oo};return cr.version="1.0.16",cr.options={directives:Ys,elementDirectives:Do,filters:Ao,transitions:{},components:{},partials:{},replace:!0},kr&&kr.emit("init",cr),cr}),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.React=e()}}(function(){return function e(t,n,r){function i(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(s)return s(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){"use strict";var r=e(19),i=e(32),s=e(34),o=e(33),u=e(38),a=e(39),f=e(55),l=(e(56),e(40)),c=e(51),h=e(54),p=e(64),d=e(68),v=e(73),m=e(76),g=e(79),y=e(82),b=e(27),w=e(115),E=e(142);h.inject();var S=f.createElement,x=f.createFactory,T=f.cloneElement,N=v.measure("React","render",d.render),C={Children:{map:i.map,forEach:i.forEach,count:i.count,only:E},Component:s,DOM:l,PropTypes:m,initializeTouchEvents:function(e){r.useTouchEvents=e},createClass:o.createClass,createElement:S,cloneElement:T,createFactory:x,createMixin:function(e){return e},constructAndRenderComponent:d.constructAndRenderComponent,constructAndRenderComponentByID:d.constructAndRenderComponentByID,findDOMNode:w,render:N,renderToString:y.renderToString,renderToStaticMarkup:y.renderToStaticMarkup,unmountComponentAtNode:d.unmountComponentAtNode,isValidElement:f.isValidElement,withContext:u.withContext,__spread:b};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({CurrentOwner:a,InstanceHandles:p,Mount:d,Reconciler:g,TextComponent:c}),C.version="0.13.3",t.exports=C},{115:115,142:142,19:19,27:27,32:32,33:33,34:34,38:38,39:39,40:40,51:51,54:54,55:55,56:56,64:64,68:68,73:73,76:76,79:79,82:82}],2:[function(e,t,n){"use strict";var r=e(117),i={componentDidMount:function(){this.props.autoFocus&&r(this.getDOMNode())}};t.exports=i},{117:117}],3:[function(e,t,n){"use strict";function r(){var e=window.opera;return"object"==typeof e&&"function"==typeof e.version&&parseInt(e.version(),10)<=12}function i(e){return(e.ctrlKey||e.altKey||e.metaKey)&&(!e.ctrlKey||!e.altKey)}function s(e){switch(e){case L.topCompositionStart:return A.compositionStart;case L.topCompositionEnd:return A.compositionEnd;case L.topCompositionUpdate:return A.compositionUpdate}}function o(e,t){return e===L.topKeyDown&&t.keyCode===E}function u(e,t){switch(e){case L.topKeyUp:return-1!==w.indexOf(t.keyCode);case L.topKeyDown:return t.keyCode!==E;case L.topKeyPress:case L.topMouseDown:case L.topBlur:return!0;default:return!1}}function a(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}function f(e,t,n,r){var i,f;if(S?i=s(e):M?u(e,r)&&(i=A.compositionEnd):o(e,r)&&(i=A.compositionStart),!i)return null;N&&(M||i!==A.compositionStart?i===A.compositionEnd&&M&&(f=M.getData()):M=m.getPooled(t));var l=g.getPooled(i,n,r);if(f)l.data=f;else{var c=a(r);null!==c&&(l.data=c)}return d.accumulateTwoPhaseDispatches(l),l}function l(e,t){switch(e){case L.topCompositionEnd:return a(t);case L.topKeyPress:var n=t.which;return n!==C?null:(O=!0,k);case L.topTextInput:var r=t.data;return r===k&&O?null:r;default:return null}}function c(e,t){if(M){if(e===L.topCompositionEnd||u(e,t)){var n=M.getData();return m.release(M),M=null,n}return null}switch(e){case L.topPaste:return null;case L.topKeyPress:return t.which&&!i(t)?String.fromCharCode(t.which):null;case L.topCompositionEnd:return N?null:t.data;default:return null}}function h(e,t,n,r){var i;if(i=T?l(e,r):c(e,r),!i)return null;var s=y.getPooled(A.beforeInput,n,r);return s.data=i,d.accumulateTwoPhaseDispatches(s),s}var p=e(15),d=e(20),v=e(21),m=e(22),g=e(91),y=e(95),b=e(139),w=[9,13,27,32],E=229,S=v.canUseDOM&&"CompositionEvent"in window,x=null;v.canUseDOM&&"documentMode"in document&&(x=document.documentMode);var T=v.canUseDOM&&"TextEvent"in window&&!x&&!r(),N=v.canUseDOM&&(!S||x&&x>8&&11>=x),C=32,k=String.fromCharCode(C),L=p.topLevelTypes,A={beforeInput:{phasedRegistrationNames:{bubbled:b({onBeforeInput:null}),captured:b({onBeforeInputCapture:null})},dependencies:[L.topCompositionEnd,L.topKeyPress,L.topTextInput,L.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:b({onCompositionEnd:null}),captured:b({onCompositionEndCapture:null})},dependencies:[L.topBlur,L.topCompositionEnd,L.topKeyDown,L.topKeyPress,L.topKeyUp,L.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:b({onCompositionStart:null}),captured:b({onCompositionStartCapture:null})},dependencies:[L.topBlur,L.topCompositionStart,L.topKeyDown,L.topKeyPress,L.topKeyUp,L.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:b({onCompositionUpdate:null}),captured:b({onCompositionUpdateCapture:null})},dependencies:[L.topBlur,L.topCompositionUpdate,L.topKeyDown,L.topKeyPress,L.topKeyUp,L.topMouseDown]}},O=!1,M=null,_={eventTypes:A,extractEvents:function(e,t,n,r){return[f(e,t,n,r),h(e,t,n,r)]}};t.exports=_},{139:139,15:15,20:20,21:21,22:22,91:91,95:95}],4:[function(e,t,n){"use strict";function r(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var i={boxFlex:!0,boxFlexGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0},s=["Webkit","ms","Moz","O"];Object.keys(i).forEach(function(e){s.forEach(function(t){i[r(t,e)]=i[e]})});var o={background:{backgroundImage:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundColor:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0}},u={isUnitlessNumber:i,shorthandPropertyExpansions:o};t.exports=u},{}],5:[function(e,t,n){"use strict";var r=e(4),i=e(21),s=(e(106),e(111)),o=e(131),u=e(141),a=(e(150),u(function(e){return o(e)})),f="cssFloat";i.canUseDOM&&void 0===document.documentElement.style.cssFloat&&(f="styleFloat");var l={createMarkupForStyles:function(e){var t="";for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];null!=r&&(t+=a(n)+":",t+=s(n,r)+";")}return t||null},setValueForStyles:function(e,t){var n=e.style;for(var i in t)if(t.hasOwnProperty(i)){var o=s(i,t[i]);if("float"===i&&(i=f),o)n[i]=o;else{var u=r.shorthandPropertyExpansions[i];if(u)for(var a in u)n[a]="";else n[i]=""}}}};t.exports=l},{106:106,111:111,131:131,141:141,150:150,21:21,4:4}],6:[function(e,t,n){"use strict";function r(){this._callbacks=null,this._contexts=null}var i=e(28),s=e(27),o=e(133);s(r.prototype,{enqueue:function(e,t){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(e),this._contexts.push(t)},notifyAll:function(){var e=this._callbacks,t=this._contexts;if(e){o(e.length===t.length),this._callbacks=null,this._contexts=null;for(var n=0,r=e.length;r>n;n++)e[n].call(t[n]);e.length=0,t.length=0}},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),i.addPoolingTo(r),t.exports=r},{133:133,27:27,28:28}],7:[function(e,t,n){"use strict";function r(e){return"SELECT"===e.nodeName||"INPUT"===e.nodeName&&"file"===e.type}function i(e){var t=x.getPooled(L.change,O,e);w.accumulateTwoPhaseDispatches(t),S.batchedUpdates(s,t)}function s(e){b.enqueueEvents(e),b.processEventQueue()}function o(e,t){A=e,O=t,A.attachEvent("onchange",i)}function u(){A&&(A.detachEvent("onchange",i),A=null,O=null)}function a(e,t,n){return e===k.topChange?n:void 0}function f(e,t,n){e===k.topFocus?(u(),o(t,n)):e===k.topBlur&&u()}function l(e,t){A=e,O=t,M=e.value,_=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value"),Object.defineProperty(A,"value",H),A.attachEvent("onpropertychange",h)}function c(){A&&(delete A.value,A.detachEvent("onpropertychange",h),A=null,O=null,M=null,_=null)}function h(e){if("value"===e.propertyName){var t=e.srcElement.value;t!==M&&(M=t,i(e))}}function p(e,t,n){return e===k.topInput?n:void 0}function d(e,t,n){e===k.topFocus?(c(),l(t,n)):e===k.topBlur&&c()}function v(e,t,n){return e!==k.topSelectionChange&&e!==k.topKeyUp&&e!==k.topKeyDown||!A||A.value===M?void 0:(M=A.value,O)}function m(e){return"INPUT"===e.nodeName&&("checkbox"===e.type||"radio"===e.type)}function g(e,t,n){return e===k.topClick?n:void 0}var y=e(15),b=e(17),w=e(20),E=e(21),S=e(85),x=e(93),T=e(134),N=e(136),C=e(139),k=y.topLevelTypes,L={change:{phasedRegistrationNames:{bubbled:C({onChange:null}),captured:C({onChangeCapture:null})},dependencies:[k.topBlur,k.topChange,k.topClick,k.topFocus,k.topInput,k.topKeyDown,k.topKeyUp,k.topSelectionChange]}},A=null,O=null,M=null,_=null,D=!1;E.canUseDOM&&(D=T("change"
)&&(!("documentMode"in document)||document.documentMode>8));var P=!1;E.canUseDOM&&(P=T("input")&&(!("documentMode"in document)||document.documentMode>9));var H={get:function(){return _.get.call(this)},set:function(e){M=""+e,_.set.call(this,e)}},B={eventTypes:L,extractEvents:function(e,t,n,i){var s,o;if(r(t)?D?s=a:o=f:N(t)?P?s=p:(s=v,o=d):m(t)&&(s=g),s){var u=s(e,t,n);if(u){var l=x.getPooled(L.change,u,i);return w.accumulateTwoPhaseDispatches(l),l}}o&&o(e,t,n)}};t.exports=B},{134:134,136:136,139:139,15:15,17:17,20:20,21:21,85:85,93:93}],8:[function(e,t,n){"use strict";var r=0,i={createReactRootIndex:function(){return r++}};t.exports=i},{}],9:[function(e,t,n){"use strict";function r(e,t,n){e.insertBefore(t,e.childNodes[n]||null)}var i=e(12),s=e(70),o=e(145),u=e(133),a={dangerouslyReplaceNodeWithMarkup:i.dangerouslyReplaceNodeWithMarkup,updateTextContent:o,processUpdates:function(e,t){for(var n,a=null,f=null,l=0;l<e.length;l++)if(n=e[l],n.type===s.MOVE_EXISTING||n.type===s.REMOVE_NODE){var c=n.fromIndex,h=n.parentNode.childNodes[c],p=n.parentID;u(h),a=a||{},a[p]=a[p]||[],a[p][c]=h,f=f||[],f.push(h)}var d=i.dangerouslyRenderMarkup(t);if(f)for(var v=0;v<f.length;v++)f[v].parentNode.removeChild(f[v]);for(var m=0;m<e.length;m++)switch(n=e[m],n.type){case s.INSERT_MARKUP:r(n.parentNode,d[n.markupIndex],n.toIndex);break;case s.MOVE_EXISTING:r(n.parentNode,a[n.parentID][n.fromIndex],n.toIndex);break;case s.TEXT_CONTENT:o(n.parentNode,n.textContent);break;case s.REMOVE_NODE:}}};t.exports=a},{12:12,133:133,145:145,70:70}],10:[function(e,t,n){"use strict";function r(e,t){return(e&t)===t}var i=e(133),s={MUST_USE_ATTRIBUTE:1,MUST_USE_PROPERTY:2,HAS_SIDE_EFFECTS:4,HAS_BOOLEAN_VALUE:8,HAS_NUMERIC_VALUE:16,HAS_POSITIVE_NUMERIC_VALUE:48,HAS_OVERLOADED_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(e){var t=e.Properties||{},n=e.DOMAttributeNames||{},o=e.DOMPropertyNames||{},a=e.DOMMutationMethods||{};e.isCustomAttribute&&u._isCustomAttributeFunctions.push(e.isCustomAttribute);for(var f in t){i(!u.isStandardName.hasOwnProperty(f)),u.isStandardName[f]=!0;var l=f.toLowerCase();if(u.getPossibleStandardName[l]=f,n.hasOwnProperty(f)){var c=n[f];u.getPossibleStandardName[c]=f,u.getAttributeName[f]=c}else u.getAttributeName[f]=l;u.getPropertyName[f]=o.hasOwnProperty(f)?o[f]:f,a.hasOwnProperty(f)?u.getMutationMethod[f]=a[f]:u.getMutationMethod[f]=null;var h=t[f];u.mustUseAttribute[f]=r(h,s.MUST_USE_ATTRIBUTE),u.mustUseProperty[f]=r(h,s.MUST_USE_PROPERTY),u.hasSideEffects[f]=r(h,s.HAS_SIDE_EFFECTS),u.hasBooleanValue[f]=r(h,s.HAS_BOOLEAN_VALUE),u.hasNumericValue[f]=r(h,s.HAS_NUMERIC_VALUE),u.hasPositiveNumericValue[f]=r(h,s.HAS_POSITIVE_NUMERIC_VALUE),u.hasOverloadedBooleanValue[f]=r(h,s.HAS_OVERLOADED_BOOLEAN_VALUE),i(!u.mustUseAttribute[f]||!u.mustUseProperty[f]),i(u.mustUseProperty[f]||!u.hasSideEffects[f]),i(!!u.hasBooleanValue[f]+!!u.hasNumericValue[f]+!!u.hasOverloadedBooleanValue[f]<=1)}}},o={},u={ID_ATTRIBUTE_NAME:"data-reactid",isStandardName:{},getPossibleStandardName:{},getAttributeName:{},getPropertyName:{},getMutationMethod:{},mustUseAttribute:{},mustUseProperty:{},hasSideEffects:{},hasBooleanValue:{},hasNumericValue:{},hasPositiveNumericValue:{},hasOverloadedBooleanValue:{},_isCustomAttributeFunctions:[],isCustomAttribute:function(e){for(var t=0;t<u._isCustomAttributeFunctions.length;t++){var n=u._isCustomAttributeFunctions[t];if(n(e))return!0}return!1},getDefaultValueForProperty:function(e,t){var n,r=o[e];return r||(o[e]=r={}),t in r||(n=document.createElement(e),r[t]=n[t]),r[t]},injection:s};t.exports=u},{133:133}],11:[function(e,t,n){"use strict";function r(e,t){return null==t||i.hasBooleanValue[e]&&!t||i.hasNumericValue[e]&&isNaN(t)||i.hasPositiveNumericValue[e]&&1>t||i.hasOverloadedBooleanValue[e]&&t===!1}var i=e(10),s=e(143),o=(e(150),{createMarkupForID:function(e){return i.ID_ATTRIBUTE_NAME+"="+s(e)},createMarkupForProperty:function(e,t){if(i.isStandardName.hasOwnProperty(e)&&i.isStandardName[e]){if(r(e,t))return"";var n=i.getAttributeName[e];return i.hasBooleanValue[e]||i.hasOverloadedBooleanValue[e]&&t===!0?n:n+"="+s(t)}return i.isCustomAttribute(e)?null==t?"":e+"="+s(t):null},setValueForProperty:function(e,t,n){if(i.isStandardName.hasOwnProperty(t)&&i.isStandardName[t]){var s=i.getMutationMethod[t];if(s)s(e,n);else if(r(t,n))this.deleteValueForProperty(e,t);else if(i.mustUseAttribute[t])e.setAttribute(i.getAttributeName[t],""+n);else{var o=i.getPropertyName[t];i.hasSideEffects[t]&&""+e[o]==""+n||(e[o]=n)}}else i.isCustomAttribute(t)&&(null==n?e.removeAttribute(t):e.setAttribute(t,""+n))},deleteValueForProperty:function(e,t){if(i.isStandardName.hasOwnProperty(t)&&i.isStandardName[t]){var n=i.getMutationMethod[t];if(n)n(e,void 0);else if(i.mustUseAttribute[t])e.removeAttribute(i.getAttributeName[t]);else{var r=i.getPropertyName[t],s=i.getDefaultValueForProperty(e.nodeName,r);i.hasSideEffects[t]&&""+e[r]===s||(e[r]=s)}}else i.isCustomAttribute(t)&&e.removeAttribute(t)}});t.exports=o},{10:10,143:143,150:150}],12:[function(e,t,n){"use strict";function r(e){return e.substring(1,e.indexOf(" "))}var i=e(21),s=e(110),o=e(112),u=e(125),a=e(133),f=/^(<[^ \/>]+)/,l="data-danger-index",c={dangerouslyRenderMarkup:function(e){a(i.canUseDOM);for(var t,n={},c=0;c<e.length;c++)a(e[c]),t=r(e[c]),t=u(t)?t:"*",n[t]=n[t]||[],n[t][c]=e[c];var h=[],p=0;for(t in n)if(n.hasOwnProperty(t)){var d,v=n[t];for(d in v)if(v.hasOwnProperty(d)){var m=v[d];v[d]=m.replace(f,"$1 "+l+'="'+d+'" ')}for(var g=s(v.join(""),o),y=0;y<g.length;++y){var b=g[y];b.hasAttribute&&b.hasAttribute(l)&&(d=+b.getAttribute(l),b.removeAttribute(l),a(!h.hasOwnProperty(d)),h[d]=b,p+=1)}}return a(p===h.length),a(h.length===e.length),h},dangerouslyReplaceNodeWithMarkup:function(e,t){a(i.canUseDOM),a(t),a("html"!==e.tagName.toLowerCase());var n=s(t,o)[0];e.parentNode.replaceChild(n,e)}};t.exports=c},{110:110,112:112,125:125,133:133,21:21}],13:[function(e,t,n){"use strict";var r=e(139),i=[r({ResponderEventPlugin:null}),r({SimpleEventPlugin:null}),r({TapEventPlugin:null}),r({EnterLeaveEventPlugin:null}),r({ChangeEventPlugin:null}),r({SelectEventPlugin:null}),r({BeforeInputEventPlugin:null}),r({AnalyticsEventPlugin:null}),r({MobileSafariClickEventPlugin:null})];t.exports=i},{139:139}],14:[function(e,t,n){"use strict";var r=e(15),i=e(20),s=e(97),o=e(68),u=e(139),a=r.topLevelTypes,f=o.getFirstReactDOM,l={mouseEnter:{registrationName:u({onMouseEnter:null}),dependencies:[a.topMouseOut,a.topMouseOver]},mouseLeave:{registrationName:u({onMouseLeave:null}),dependencies:[a.topMouseOut,a.topMouseOver]}},c=[null,null],h={eventTypes:l,extractEvents:function(e,t,n,r){if(e===a.topMouseOver&&(r.relatedTarget||r.fromElement))return null;if(e!==a.topMouseOut&&e!==a.topMouseOver)return null;var u;if(t.window===t)u=t;else{var h=t.ownerDocument;u=h?h.defaultView||h.parentWindow:window}var d,v;if(e===a.topMouseOut?(d=t,v=f(r.relatedTarget||r.toElement)||u):(d=u,v=t),d===v)return null;var m=d?o.getID(d):"",g=v?o.getID(v):"",y=s.getPooled(l.mouseLeave,m,r);y.type="mouseleave",y.target=d,y.relatedTarget=v;var b=s.getPooled(l.mouseEnter,g,r);return b.type="mouseenter",b.target=v,b.relatedTarget=d,i.accumulateEnterLeaveDispatches(y,b,m,g),c[0]=y,c[1]=b,c}};t.exports=h},{139:139,15:15,20:20,68:68,97:97}],15:[function(e,t,n){"use strict";var r=e(138),i=r({bubbled:null,captured:null}),s=r({topBlur:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topError:null,topFocus:null,topInput:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topReset:null,topScroll:null,topSelectionChange:null,topSubmit:null,topTextInput:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topWheel:null}),o={topLevelTypes:s,PropagationPhases:i};t.exports=o},{138:138}],16:[function(e,t,n){var r=e(112),i={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):{remove:r}},registerDefault:function(){}};t.exports=i},{112:112}],17:[function(e,t,n){"use strict";var r=e(18),i=e(19),s=e(103),o=e(118),u=e(133),a={},f=null,l=function(e){if(e){var t=i.executeDispatch,n=r.getPluginModuleForEvent(e);n&&n.executeDispatch&&(t=n.executeDispatch),i.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e)}},c=null,h={injection:{injectMount:i.injection.injectMount,injectInstanceHandle:function(e){c=e},getInstanceHandle:function(){return c},injectEventPluginOrder:r.injectEventPluginOrder,injectEventPluginsByName:r.injectEventPluginsByName},eventNameDispatchConfigs:r.eventNameDispatchConfigs,registrationNameModules:r.registrationNameModules,putListener:function(e,t,n){u(!n||"function"==typeof n);var r=a[t]||(a[t]={});r[e]=n},getListener:function(e,t){var n=a[t];return n&&n[e]},deleteListener:function(e,t){var n=a[t];n&&delete n[e]},deleteAllListeners:function(e){for(var t in a)delete a[t][e]},extractEvents:function(e,t,n,i){for(var o,u=r.plugins,a=0,f=u.length;f>a;a++){var l=u[a];if(l){var c=l.extractEvents(e,t,n,i);c&&(o=s(o,c))}}return o},enqueueEvents:function(e){e&&(f=s(f,e))},processEventQueue:function(){var e=f;f=null,o(e,l),u(!f)},__purge:function(){a={}},__getListenerBank:function(){return a}};t.exports=h},{103:103,118:118,133:133,18:18,19:19}],18:[function(e,t,n){"use strict";function r(){if(u)for(var e in a){var t=a[e],n=u.indexOf(e);if(o(n>-1),!f.plugins[n]){o(t.extractEvents),f.plugins[n]=t;var r=t.eventTypes;for(var s in r)o(i(r[s],t,s))}}}function i(e,t,n){o(!f.eventNameDispatchConfigs.hasOwnProperty(n)),f.eventNameDispatchConfigs[n]=e;var r=e.phasedRegistrationNames;if(r){for(var i in r)if(r.hasOwnProperty(i)){var u=r[i];s(u,t,n)}return!0}return e.registrationName?(s(e.registrationName,t,n),!0):!1}function s(e,t,n){o(!f.registrationNameModules[e]),f.registrationNameModules[e]=t,f.registrationNameDependencies[e]=t.eventTypes[n].dependencies}var o=e(133),u=null,a={},f={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},injectEventPluginOrder:function(e){o(!u),u=Array.prototype.slice.call(e),r()},injectEventPluginsByName:function(e){var t=!1;for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];a.hasOwnProperty(n)&&a[n]===i||(o(!a[n]),a[n]=i,t=!0)}t&&r()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return f.registrationNameModules[t.registrationName]||null;for(var n in t.phasedRegistrationNames)if(t.phasedRegistrationNames.hasOwnProperty(n)){var r=f.registrationNameModules[t.phasedRegistrationNames[n]];if(r)return r}return null},_resetEventPlugins:function(){u=null;for(var e in a)a.hasOwnProperty(e)&&delete a[e];f.plugins.length=0;var t=f.eventNameDispatchConfigs;for(var n in t)t.hasOwnProperty(n)&&delete t[n];var r=f.registrationNameModules;for(var i in r)r.hasOwnProperty(i)&&delete r[i]}};t.exports=f},{133:133}],19:[function(e,t,n){"use strict";function r(e){return e===m.topMouseUp||e===m.topTouchEnd||e===m.topTouchCancel}function i(e){return e===m.topMouseMove||e===m.topTouchMove}function s(e){return e===m.topMouseDown||e===m.topTouchStart}function o(e,t){var n=e._dispatchListeners,r=e._dispatchIDs;if(Array.isArray(n))for(var i=0;i<n.length&&!e.isPropagationStopped();i++)t(e,n[i],r[i]);else n&&t(e,n,r)}function u(e,t,n){e.currentTarget=v.Mount.getNode(n);var r=t(e,n);return e.currentTarget=null,r}function a(e,t){o(e,t),e._dispatchListeners=null,e._dispatchIDs=null}function f(e){var t=e._dispatchListeners,n=e._dispatchIDs;if(Array.isArray(t)){for(var r=0;r<t.length&&!e.isPropagationStopped();r++)if(t[r](e,n[r]))return n[r]}else if(t&&t(e,n))return n;return null}function l(e){var t=f(e);return e._dispatchIDs=null,e._dispatchListeners=null,t}function c(e){var t=e._dispatchListeners,n=e._dispatchIDs;d(!Array.isArray(t));var r=t?t(e,n):null;return e._dispatchListeners=null,e._dispatchIDs=null,r}function h(e){return!!e._dispatchListeners}var p=e(15),d=e(133),v={Mount:null,injectMount:function(e){v.Mount=e}},m=p.topLevelTypes,g={isEndish:r,isMoveish:i,isStartish:s,executeDirectDispatch:c,executeDispatch:u,executeDispatchesInOrder:a,executeDispatchesInOrderStopAtTrue:l,hasDispatches:h,injection:v,useTouchEvents:!1};t.exports=g},{133:133,15:15}],20:[function(e,t,n){"use strict";function r(e,t,n){var r=t.dispatchConfig.phasedRegistrationNames[n];return m(e,r)}function i(e,t,n){var i=t?v.bubbled:v.captured,s=r(e,n,i);s&&(n._dispatchListeners=p(n._dispatchListeners,s),n._dispatchIDs=p(n._dispatchIDs,e))}function s(e){e&&e.dispatchConfig.phasedRegistrationNames&&h.injection.getInstanceHandle().traverseTwoPhase(e.dispatchMarker,i,e)}function o(e,t,n){if(n&&n.dispatchConfig.registrationName){var r=n.dispatchConfig.registrationName,i=m(e,r);i&&(n._dispatchListeners=p(n._dispatchListeners,i),n._dispatchIDs=p(n._dispatchIDs,e))}}function u(e){e&&e.dispatchConfig.registrationName&&o(e.dispatchMarker,null,e)}function a(e){d(e,s)}function f(e,t,n,r){h.injection.getInstanceHandle().traverseEnterLeave(n,r,o,e,t)}function l(e){d(e,u)}var c=e(15),h=e(17),p=e(103),d=e(118),v=c.PropagationPhases,m=h.getListener,g={accumulateTwoPhaseDispatches:a,accumulateDirectDispatches:l,accumulateEnterLeaveDispatches:f};t.exports=g},{103:103,118:118,15:15,17:17}],21:[function(e,t,n){"use strict";var r="undefined"!=typeof window&&!!window.document&&!!window.document.createElement,i={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&(!!window.addEventListener||!!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};t.exports=i},{}],22:[function(e,t,n){"use strict";function r(e){this._root=e,this._startText=this.getText(),this._fallbackText=null}var i=e(28),s=e(27),o=e(128);s(r.prototype,{getText:function(){return"value"in this._root?this._root.value:this._root[o()]},getData:function(){if(this._fallbackText)return this._fallbackText;var e,t,n=this._startText,r=n.length,i=this.getText(),s=i.length;for(e=0;r>e&&n[e]===i[e];e++);var o=r-e;for(t=1;o>=t&&n[r-t]===i[s-t];t++);var u=t>1?1-t:void 0;return this._fallbackText=i.slice(e,u),this._fallbackText}}),i.addPoolingTo(r),t.exports=r},{128:128,27:27,28:28}],23:[function(e,t,n){"use strict";var r,i=e(10),s=e(21),o=i.injection.MUST_USE_ATTRIBUTE,u=i.injection.MUST_USE_PROPERTY,a=i.injection.HAS_BOOLEAN_VALUE,f=i.injection.HAS_SIDE_EFFECTS,l=i.injection.HAS_NUMERIC_VALUE,c=i.injection.HAS_POSITIVE_NUMERIC_VALUE,h=i.injection.HAS_OVERLOADED_BOOLEAN_VALUE;if(s.canUseDOM){var p=document.implementation;r=p&&p.hasFeature&&p.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}var d={isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),Properties:{accept:null,acceptCharset:null,accessKey:null,action:null,allowFullScreen:o|a,allowTransparency:o,alt:null,async:a,autoComplete:null,autoPlay:a,cellPadding:null,cellSpacing:null,charSet:o,checked:u|a,classID:o,className:r?o:u,cols:o|c,colSpan:null,content:null,contentEditable:null,contextMenu:o,controls:u|a,coords:null,crossOrigin:null,data:null,dateTime:o,defer:a,dir:null,disabled:o|a,download:h,draggable:null,encType:null,form:o,formAction:o,formEncType:o,formMethod:o,formNoValidate:a,formTarget:o,frameBorder:o,headers:null,height:o,hidden:o|a,high:null,href:null,hrefLang:null,htmlFor:null,httpEquiv:null,icon:null,id:u,label:null,lang:null,list:o,loop:u|a,low:null,manifest:o,marginHeight:null,marginWidth:null,max:null,maxLength:o,media:o,mediaGroup:null,method:null,min:null,multiple:u|a,muted:u|a,name:null,noValidate:a,open:a,optimum:null,pattern:null,placeholder:null,poster:null,preload:null,radioGroup:null,readOnly:u|a,rel:null,required:a,role:o,rows:o|c,rowSpan:null,sandbox:null,scope:null,scoped:a,scrolling:null,seamless:o|a,selected:u|a,shape:null,size:o|c,sizes:o,span:c,spellCheck:null,src:null,srcDoc:u,srcSet:o,start:l,step:null,style:null,tabIndex:null,target:null,title:null,type:null,useMap:null,value:u|f,width:o,wmode:o,autoCapitalize:null,autoCorrect:null,itemProp:o,itemScope:o|a,itemType:o,itemID:o,itemRef:o,property:null,unselectable:o},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{autoCapitalize:"autocapitalize",autoComplete:"autocomplete",autoCorrect:"autocorrect",autoFocus:"autofocus",autoPlay:"autoplay",encType:"encoding",hrefLang:"hreflang",radioGroup:"radiogroup",spellCheck:"spellcheck",srcDoc:"srcdoc",srcSet:"srcset"}};t.exports=d},{10:10,21:21}],24:[function(e,t,n){"use strict";function r(e){f(null==e.props.checkedLink||null==e.props.valueLink)}function i(e){r(e),f(null==e.props.value&&null==e.props.onChange)}function s(e){r(e),f(null==e.props.checked&&null==e.props.onChange)}function o(e){this.props.valueLink.requestChange(e.target.value)}function u(e){this.props.checkedLink.requestChange(e.target.checked)}var a=e(76),f=e(133),l={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},c={Mixin:{propTypes:{value:function(e,t,n){return!e[t]||l[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,n){return!e[t]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:a.func}},getValue:function(e){return e.props.valueLink?(i(e),e.props.valueLink.value):e.props.value},getChecked:function(e){return e.props.checkedLink?(s(e),e.props.checkedLink.value):e.props.checked},getOnChange:function(e){return e.props.valueLink?(i(e),o):e.props.checkedLink?(s(e),u):e.props.onChange}};t.exports=c},{133:133,76:76}],25:[function(e,t,n){"use strict";function r(e){e.remove()}var i=e(30),s=e(103),o=e(118),u=e(133),a={trapBubbledEvent:function(e,t){u(this.isMounted());var n=this.getDOMNode();u(n);var r=i.trapBubbledEvent(e,t,n);this._localEventListeners=s(this._localEventListeners,r)},componentWillUnmount:function(){this._localEventListeners&&o(this._localEventListeners,r)}};t.exports=a},{103:103,118:118,133:133,30:30}],26:[function(e,t,n){"use strict";var r=e(15),i=e(112),s=r.topLevelTypes,o={eventTypes:null,extractEvents:function(e,t,n,r){if(e===s.topTouchStart){var o=r.target;o&&!o.onclick&&(o.onclick=i)}}};t.exports=o},{112:112,15:15}],27:[function(e,t,n){"use strict";function r(e,t){if(null==e)throw new TypeError("Object.assign target cannot be null or undefined");for(var n=Object(e),r=Object.prototype.hasOwnProperty,i=1;i<arguments.length;i++){var s=arguments[i];if(null!=s){var o=Object(s);for(var u in o)r.call(o,u)&&(n[u]=o[u])}}return n}t.exports=r},{}],28:[function(e,t,n){"use strict";var r=e(133),i=function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)},s=function(e,t){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,e,t),r}return new n(e,t)},o=function(e,t,n){var r=this;if(r.instancePool.length){var i=r.instancePool.pop();return r.call(i,e,t,n),i}return new r(e,t,n)},u=function(e,t,n,r,i){var s=this;if(s.instancePool.length){var o=s.instancePool.pop();return s.call(o,e,t,n,r,i),o}return new s(e,t,n,r,i)},a=function(e){var t=this;r(e instanceof t),e.destructor&&e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},f=10,l=i,c=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||l,n.poolSize||(n.poolSize=f),n.release=a,n},h={addPoolingTo:c,oneArgumentPooler:i,twoArgumentPooler:s,threeArgumentPooler:o,fiveArgumentPooler:u};t.exports=h},{133:133}],29:[function(e,t,n){"use strict";var r=e(115),i={getDOMNode:function(){return r(this)}};t.exports=i},{115:115}],30:[function(e,t,n){"use strict";function r(e){return Object.prototype.hasOwnProperty.call(e,v)||(e[v]=p++,c[e[v]]={}),c[e[v]]}var i=e(15),s=e(17),o=e(18),u=e(59),a=e(102),f=e(27),l=e(134),c={},h=!1,p=0,d={topBlur:"blur",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topScroll:"scroll",topSelectionChange:"selectionchange",topTextInput:"textInput",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topWheel:"wheel"},v="_reactListenersID"+String(Math.random()).slice(2),m=f({},u,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(m.handleTopLevel),m.ReactEventListener=e}},setEnabled:function(e){m.ReactEventListener&&m.ReactEventListener.setEnabled(e)},isEnabled:function(){return!!m.ReactEventListener&&!!m.ReactEventListener.isEnabled()},listenTo:function(e,t){for(var n=t,s=r(n),u=o.registrationNameDependencies[e],a=i.topLevelTypes,f=0,c=u.length;c>f;f++){var h=u[f];s.hasOwnProperty(h)&&s[h]||(h===a.topWheel?l("wheel")?m.ReactEventListener.trapBubbledEvent(a.topWheel,"wheel",n):l("mousewheel")?m.ReactEventListener.trapBubbledEvent(a.topWheel,"mousewheel",n):m.ReactEventListener.trapBubbledEvent(a.topWheel,"DOMMouseScroll",n):h===a.topScroll?l("scroll",!0)?m.ReactEventListener.trapCapturedEvent(a.topScroll,"scroll",n):m.ReactEventListener.trapBubbledEvent(a.topScroll,"scroll",m.ReactEventListener.WINDOW_HANDLE):h===a.topFocus||h===a.topBlur?(l("focus",!0)?(m.ReactEventListener.trapCapturedEvent(a.topFocus,"focus",n),m.ReactEventListener.trapCapturedEvent(a.topBlur,"blur",n)):l("focusin")&&(m.ReactEventListener.trapBubbledEvent(a.topFocus,"focusin",n),m.ReactEventListener.trapBubbledEvent(a.topBlur,"focusout",n)),s[a.topBlur]=!0,s[a.topFocus]=!0):d.hasOwnProperty(h)&&m.ReactEventListener.trapBubbledEvent(h,d[h],n),s[h]=!0)}},trapBubbledEvent:function(e,t,n){return m.ReactEventListener.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return m.ReactEventListener.trapCapturedEvent(e,t,n)},ensureScrollValueMonitoring:function(){if(!h){var e=a.refreshScrollValues;m.ReactEventListener.monitorScrollValue(e),h=!0}},eventNameDispatchConfigs:s.eventNameDispatchConfigs,registrationNameModules:s.registrationNameModules,putListener:s.putListener,getListener:s.getListener,deleteListener:s.deleteListener,deleteAllListeners:s.deleteAllListeners});t.exports=m},{102:102,134:134,15:15,17:17,18:18,27:27,59:59}],31:[function(e,t,n){"use strict";var r=e(79),i=e(116),s=e(132),o=e(147),u={instantiateChildren:function(e,t,n){var r=i(e);for(var o in r)if(r.hasOwnProperty(o)){var u=r[o],a=s(u,null);r[o]=a}return r},updateChildren:function(e,t,n,u){var f=i(t);if(!f&&!e)return null;var l;for(l in f)if(f.hasOwnProperty(l)){var c=e&&e[l],h=c&&c._currentElement,p=f[l];if(o(h,p))r.receiveComponent(c,p,n,u),f[l]=c;else{c&&r.unmountComponent(c,l);var d=s(p,null);f[l]=d}}for(l in e)!e.hasOwnProperty(l)||f&&f.hasOwnProperty(l)||r.unmountComponent(e[l]);return f},unmountChildren:function(e){for(var t in e){var n=e[t];r.unmountComponent(n)}}};t.exports=u},{116:116,132:132,147:147,79:79}],32:[function(e,t,n){"use strict";function r(e,t){this.forEachFunction=e,this.forEachContext=t}function i(e,t,n,r){var i=e;i.forEachFunction.call(i.forEachContext,t,r)}function s(e,t,n){if(null==e)return e;var s=r.getPooled(t,n);p(e,i,s),r.release(s)}function o(e,t,n){this.mapResult=e,this.mapFunction=t,this.mapContext=n}function u(e,t,n,r){var i=e,s=i.mapResult,o=!s.hasOwnProperty(n);if(o){var u=i.mapFunction.call(i.mapContext,t,r);s[n]=u}}function a(e,t,n){if(null==e)return e;var r={},i=o.getPooled(r,t,n);return p(e,u,i),o.release(i),h.create(r)}function f(e,t,n,r){return null}function l(e,t){return p(e,f,null)}var c=e(28),h=e(61),p=e(149),d=(e(150),c.twoArgumentPooler),v=c.threeArgumentPooler;c.addPoolingTo(r,d),c.addPoolingTo(o,v);var m={forEach:s,map:a,count:l};t.exports=m},{149:149,150:150,28:28,61:61}],33:[function(e,t,n){"use strict";function r(e,t){var n=T.hasOwnProperty(t)?T[t]:null;C.hasOwnProperty(t)&&y(n===S.OVERRIDE_BASE),e.hasOwnProperty(t)&&y(n===S.DEFINE_MANY||n===S.DEFINE_MANY_MERGED)}function i(e,t){if(t){y("function"!=typeof t),y(!h.isValidElement(t));var n=e.prototype;t.hasOwnProperty(E)&&N.mixins(e,t.mixins);for(var i in t)if(t.hasOwnProperty(i)&&i!==E){var s=t[i];if(r(n,i),N.hasOwnProperty(i))N[i](e,s);else{var o=T.hasOwnProperty(i),f=n.hasOwnProperty(i),l=s&&s.__reactDontBind,c="function"==typeof s,p=c&&!o&&!f&&!l;if(p)n.__reactAutoBindMap||(n.__reactAutoBindMap={}),n.__reactAutoBindMap[i]=s,n[i]=s;else if(f){var d=T[i];y(o&&(d===S.DEFINE_MANY_MERGED||d===S.DEFINE_MANY)),d===S.DEFINE_MANY_MERGED?n[i]=u(n[i],s):d===S.DEFINE_MANY&&(n[i]=a(n[i],s))}else n[i]=s}}}}function s(e,t){if(t)for(var n in t){var r=t[n];if(t.hasOwnProperty(n)){var i=n in N;y(!i);var s=n in e;y(!s),e[n]=r}}}function o(e,t){y(e&&t&&"object"==typeof e&&"object"==typeof t);for(var n in t)t.hasOwnProperty(n)&&(y(void 0===e[n]),e[n]=t[n]);return e}function u(e,t){return function(){var n=e.apply(this,arguments),r=t.apply(this,arguments);if(null==n)return r;if(null==r)return n;var i={};return o(i,n),o(i,r),i}}function a(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function f(e,t){var n=t.bind(e);return n}function l(e){for(var t in e.__reactAutoBindMap)if(e.__reactAutoBindMap.hasOwnProperty(t)){var n=e.__reactAutoBindMap[t];e[t]=f(e,p.guard(n,e.constructor.displayName+"."+t))}}var c=e(34),h=(e(39),e(55)),p=e(58),d=e(65),v=e(66),m=(e(75),e(74),e(84)),g=e(27),y=e(133),b=e(138),w=e(139),E=(e(150),w({mixins:null})),S=b({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),x=[],T={mixins:S.DEFINE_MANY,statics:S.DEFINE_MANY,propTypes:S.DEFINE_MANY,contextTypes:S.DEFINE_MANY,childContextTypes:S.DEFINE_MANY,getDefaultProps:S.DEFINE_MANY_MERGED,getInitialState:S.DEFINE_MANY_MERGED,getChildContext:S.DEFINE_MANY_MERGED,render:S.DEFINE_ONCE,componentWillMount:S.DEFINE_MANY,componentDidMount:S.DEFINE_MANY,componentWillReceiveProps:S.DEFINE_MANY,shouldComponentUpdate:S.DEFINE_ONCE,componentWillUpdate:S.DEFINE_MANY,componentDidUpdate:S.DEFINE_MANY,componentWillUnmount:S.DEFINE_MANY,updateComponent:S.OVERRIDE_BASE},N={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)i(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=g({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=g({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=u(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=g({},e.propTypes,t)},statics:function(e,t){s(e,t)}},C={replaceState:function(e,t){m.enqueueReplaceState(this,e),t&&m.enqueueCallback(this,t)},isMounted:function(){var e=d.get(this);return e&&e!==v.currentlyMountingInstance},setProps:function(e,t){m.enqueueSetProps(this,e),t&&m.enqueueCallback(this,t)},replaceProps:function(e,t){m.enqueueReplaceProps(this,e),t&&m.enqueueCallback(this,t)}},k=function(){};g(k.prototype,c.prototype,C);var L={createClass:function(e){var t=function(e,t){this.__reactAutoBindMap&&l(this),this.props=e,this.context=t,this.state=null;var n=this.getInitialState?this.getInitialState():null;y("object"==typeof n&&!Array.isArray(n)),this.state=n};t.prototype=new k,t.prototype.constructor=t,x.forEach(i.bind(null,t)),i(t,e),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),y(t.prototype.render);for(var n in T)t.prototype[n]||(t.prototype[n]=null);return t.type=t,t},injection:{injectMixin:function(e){x.push(e)}}};t.exports=L},{133:133,138:138,139:139,150:150,27:27,34:34,39:39,55:55,58:58,65:65,66:66,74:74,75:75,84:84}],34:[function(e,t,n){"use strict";function r(e,t){this.props=e,this.context=t}var i=e(84),s=e(133);e(150),r.prototype.setState=function(e,t){s("object"==typeof e||"function"==typeof e||null==e),i.enqueueSetState(this,e),t&&i.enqueueCallback(this,t)},r.prototype.forceUpdate=function(e){i.enqueueForceUpdate(this),e&&i.enqueueCallback(this,e)},t.exports=r},{133:133,150:150,84:84}],35:[function(e,t,n){"use strict";var r=e(44),i=e(68),s={processChildrenUpdates:r.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkupByID:r.dangerouslyReplaceNodeWithMarkupByID,unmountIDFromEnvironment:function(e){i.purgeID(e)}};t.exports=s},{44:44,68:68}],36:[function(e,t,n){"use strict";var r=e(133),i=!1,s={unmountIDFromEnvironment:null,replaceNodeWithMarkupByID:null,processChildrenUpdates:null,injection:{injectEnvironment:function(e){r(!i),s.unmountIDFromEnvironment=e.unmountIDFromEnvironment,s.replaceNodeWithMarkupByID=e.replaceNodeWithMarkupByID,s.processChildrenUpdates=e.processChildrenUpdates,i=!0}}};t.exports=s},{133:133}],37:[function(e,t,n){"use strict";function r(e){var t=e._currentElement._owner||null;if(t){var n=t.getName();if(n)return" Check the render method of `"+n+"`."}return""}var i=e(36),s=e(38),o=e(39),u=e(55),a=(e(56),e(65)),f=e(66),l=e(71),c=e(73),h=e(75),p=(e(74),e(79)),d=e(85),v=e(27),m=e(113),g=e(133),y=e(147),b=(e(150),1),w={construct:function(e){this._currentElement=e,this._rootNodeID=null,this._instance=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._isTopLevel=!1,this._pendingCallbacks=null},mountComponent:function(e,t,n){this._context=n,this._mountOrder=b++,this._rootNodeID=e;var r=this._processProps(this._currentElement.props),i=this._processContext(this._currentElement._context),s=l.getComponentClassForElement(this._currentElement),o=new s(r,i);o.props=r,o.context=i,o.refs=m,this._instance=o,a.set(o,this);var u=o.state;void 0===u&&(o.state=u=null),g("object"==typeof u&&!Array.isArray(u)),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var c,h,d=f.currentlyMountingInstance;f.currentlyMountingInstance=this;try{o.componentWillMount&&(o.componentWillMount(),this._pendingStateQueue&&(o.state=this._processPendingState(o.props,o.context))),c=this._getValidatedChildContext(n),h=this._renderValidatedComponent(c)}finally{f.currentlyMountingInstance=d}this._renderedComponent=this._instantiateReactComponent(h,this._currentElement.type);var v=p.mountComponent(this._renderedComponent,e,t,this._mergeChildContext(n,c));return o.componentDidMount&&t.getReactMountReady().enqueue(o.componentDidMount,o),v},unmountComponent:function(){var e=this._instance;if(e.componentWillUnmount){var t=f.currentlyUnmountingInstance;f.currentlyUnmountingInstance=this;try{e.componentWillUnmount()}finally{f.currentlyUnmountingInstance=t}}p.unmountComponent(this._renderedComponent),this._renderedComponent=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=null,a.remove(e)},_setPropsInternal:function(e,t){var n=this._pendingElement||this._currentElement;this._pendingElement=u.cloneAndReplaceProps(n,v({},n.props,e)),d.enqueueUpdate(this,t)},_maskContext:function(e){var t=null;if("string"==typeof this._currentElement.type)return m;var n=this._currentElement.type.contextTypes;if(!n)return m;t={};for(var r in n)t[r]=e[r];return t},_processContext:function(e){var t=this._maskContext(e);return t},_getValidatedChildContext:function(e){var t=this._instance,n=t.getChildContext&&t.getChildContext();if(n){g("object"==typeof t.constructor.childContextTypes);for(var r in n)g(r in t.constructor.childContextTypes);return n}return null},_mergeChildContext:function(e,t){return t?v({},e,t):e},_processProps:function(e){return e},_checkPropTypes:function(e,t,n){var i=this.getName();for(var s in e)if(e.hasOwnProperty(s)){var o;try{g("function"==typeof e[s]),o=e[s](t,s,i,n)}catch(u){o=u}o instanceof Error&&(r(this),n===h.prop
)}},receiveComponent:function(e,t,n){var r=this._currentElement,i=this._context;this._pendingElement=null,this.updateComponent(t,r,e,i,n)},performUpdateIfNecessary:function(e){null!=this._pendingElement&&p.receiveComponent(this,this._pendingElement||this._currentElement,e,this._context),(null!==this._pendingStateQueue||this._pendingForceUpdate)&&this.updateComponent(e,this._currentElement,this._currentElement,this._context,this._context)},_warnIfContextsDiffer:function(e,t){e=this._maskContext(e),t=this._maskContext(t);for(var n=Object.keys(t).sort(),r=(this.getName()||"ReactCompositeComponent",0);r<n.length;r++)n[r]},updateComponent:function(e,t,n,r,i){var s=this._instance,o=s.context,u=s.props;t!==n&&(o=this._processContext(n._context),u=this._processProps(n.props),s.componentWillReceiveProps&&s.componentWillReceiveProps(u,o));var a=this._processPendingState(u,o),f=this._pendingForceUpdate||!s.shouldComponentUpdate||s.shouldComponentUpdate(u,a,o);f?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,u,a,o,e,i)):(this._currentElement=n,this._context=i,s.props=u,s.state=a,s.context=o)},_processPendingState:function(e,t){var n=this._instance,r=this._pendingStateQueue,i=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!r)return n.state;if(i&&1===r.length)return r[0];for(var s=v({},i?r[0]:n.state),o=i?1:0;o<r.length;o++){var u=r[o];v(s,"function"==typeof u?u.call(n,s,e,t):u)}return s},_performComponentUpdate:function(e,t,n,r,i,s){var o=this._instance,u=o.props,a=o.state,f=o.context;o.componentWillUpdate&&o.componentWillUpdate(t,n,r),this._currentElement=e,this._context=s,o.props=t,o.state=n,o.context=r,this._updateRenderedComponent(i,s),o.componentDidUpdate&&i.getReactMountReady().enqueue(o.componentDidUpdate.bind(o,u,a,f),o)},_updateRenderedComponent:function(e,t){var n=this._renderedComponent,r=n._currentElement,i=this._getValidatedChildContext(),s=this._renderValidatedComponent(i);if(y(r,s))p.receiveComponent(n,s,e,this._mergeChildContext(t,i));else{var o=this._rootNodeID,u=n._rootNodeID;p.unmountComponent(n),this._renderedComponent=this._instantiateReactComponent(s,this._currentElement.type);var a=p.mountComponent(this._renderedComponent,o,e,this._mergeChildContext(t,i));this._replaceNodeWithMarkupByID(u,a)}},_replaceNodeWithMarkupByID:function(e,t){i.replaceNodeWithMarkupByID(e,t)},_renderValidatedComponentWithoutOwnerOrContext:function(){var e=this._instance,t=e.render();return t},_renderValidatedComponent:function(e){var t,n=s.current;s.current=this._mergeChildContext(this._currentElement._context,e),o.current=this;try{t=this._renderValidatedComponentWithoutOwnerOrContext()}finally{s.current=n,o.current=null}return g(null===t||t===!1||u.isValidElement(t)),t},attachRef:function(e,t){var n=this.getPublicInstance(),r=n.refs===m?n.refs={}:n.refs;r[e]=t.getPublicInstance()},detachRef:function(e){var t=this.getPublicInstance().refs;delete t[e]},getName:function(){var e=this._currentElement.type,t=this._instance&&this._instance.constructor;return e.displayName||t&&t.displayName||e.name||t&&t.name||null},getPublicInstance:function(){return this._instance},_instantiateReactComponent:null};c.measureMethods(w,"ReactCompositeComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent",_renderValidatedComponent:"_renderValidatedComponent"});var E={Mixin:w};t.exports=E},{113:113,133:133,147:147,150:150,27:27,36:36,38:38,39:39,55:55,56:56,65:65,66:66,71:71,73:73,74:74,75:75,79:79,85:85}],38:[function(e,t,n){"use strict";var r=e(27),i=e(113),s=(e(150),{current:i,withContext:function(e,t){var n,i=s.current;s.current=r({},i,e);try{n=t()}finally{s.current=i}return n}});t.exports=s},{113:113,150:150,27:27}],39:[function(e,t,n){"use strict";var r={current:null};t.exports=r},{}],40:[function(e,t,n){"use strict";function r(e){return i.createFactory(e)}var i=e(55),s=(e(56),e(140)),o=s({a:"a",abbr:"abbr",address:"address",area:"area",article:"article",aside:"aside",audio:"audio",b:"b",base:"base",bdi:"bdi",bdo:"bdo",big:"big",blockquote:"blockquote",body:"body",br:"br",button:"button",canvas:"canvas",caption:"caption",cite:"cite",code:"code",col:"col",colgroup:"colgroup",data:"data",datalist:"datalist",dd:"dd",del:"del",details:"details",dfn:"dfn",dialog:"dialog",div:"div",dl:"dl",dt:"dt",em:"em",embed:"embed",fieldset:"fieldset",figcaption:"figcaption",figure:"figure",footer:"footer",form:"form",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",head:"head",header:"header",hr:"hr",html:"html",i:"i",iframe:"iframe",img:"img",input:"input",ins:"ins",kbd:"kbd",keygen:"keygen",label:"label",legend:"legend",li:"li",link:"link",main:"main",map:"map",mark:"mark",menu:"menu",menuitem:"menuitem",meta:"meta",meter:"meter",nav:"nav",noscript:"noscript",object:"object",ol:"ol",optgroup:"optgroup",option:"option",output:"output",p:"p",param:"param",picture:"picture",pre:"pre",progress:"progress",q:"q",rp:"rp",rt:"rt",ruby:"ruby",s:"s",samp:"samp",script:"script",section:"section",select:"select",small:"small",source:"source",span:"span",strong:"strong",style:"style",sub:"sub",summary:"summary",sup:"sup",table:"table",tbody:"tbody",td:"td",textarea:"textarea",tfoot:"tfoot",th:"th",thead:"thead",time:"time",title:"title",tr:"tr",track:"track",u:"u",ul:"ul","var":"var",video:"video",wbr:"wbr",circle:"circle",clipPath:"clipPath",defs:"defs",ellipse:"ellipse",g:"g",line:"line",linearGradient:"linearGradient",mask:"mask",path:"path",pattern:"pattern",polygon:"polygon",polyline:"polyline",radialGradient:"radialGradient",rect:"rect",stop:"stop",svg:"svg",text:"text",tspan:"tspan"},r);t.exports=o},{140:140,55:55,56:56}],41:[function(e,t,n){"use strict";var r=e(2),i=e(29),s=e(33),o=e(55),u=e(138),a=o.createFactory("button"),f=u({onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0}),l=s.createClass({displayName:"ReactDOMButton",tagName:"BUTTON",mixins:[r,i],render:function(){var e={};for(var t in this.props)!this.props.hasOwnProperty(t)||this.props.disabled&&f[t]||(e[t]=this.props[t]);return a(e,this.props.children)}});t.exports=l},{138:138,2:2,29:29,33:33,55:55}],42:[function(e,t,n){"use strict";function r(e){e&&(null!=e.dangerouslySetInnerHTML&&(g(null==e.children),g("object"==typeof e.dangerouslySetInnerHTML&&"__html"in e.dangerouslySetInnerHTML)),g(null==e.style||"object"==typeof e.style))}function i(e,t,n,r){var i=h.findReactContainerForID(e);if(i){var s=i.nodeType===T?i.ownerDocument:i;w(t,s)}r.getPutListenerQueue().enqueuePutListener(e,t,n)}function s(e){A.call(L,e)||(g(k.test(e)),L[e]=!0)}function o(e){s(e),this._tag=e,this._renderedChildren=null,this._previousStyleCopy=null,this._rootNodeID=null}var u=e(5),a=e(10),f=e(11),l=e(30),c=e(35),h=e(68),p=e(69),d=e(73),v=e(27),m=e(114),g=e(133),y=(e(134),e(139)),b=(e(150),l.deleteListener),w=l.listenTo,E=l.registrationNameModules,S={string:!0,number:!0},x=y({style:null}),T=1,N=null,C={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},k=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,L={},A={}.hasOwnProperty;o.displayName="ReactDOMComponent",o.Mixin={construct:function(e){this._currentElement=e},mountComponent:function(e,t,n){this._rootNodeID=e,r(this._currentElement.props);var i=C[this._tag]?"":"</"+this._tag+">";return this._createOpenTagMarkupAndPutListeners(t)+this._createContentMarkup(t,n)+i},_createOpenTagMarkupAndPutListeners:function(e){var t=this._currentElement.props,n="<"+this._tag;for(var r in t)if(t.hasOwnProperty(r)){var s=t[r];if(null!=s)if(E.hasOwnProperty(r))i(this._rootNodeID,r,s,e);else{r===x&&(s&&(s=this._previousStyleCopy=v({},t.style)),s=u.createMarkupForStyles(s));var o=f.createMarkupForProperty(r,s);o&&(n+=" "+o)}}if(e.renderToStaticMarkup)return n+">";var a=f.createMarkupForID(this._rootNodeID);return n+" "+a+">"},_createContentMarkup:function(e,t){var n="";("listing"===this._tag||"pre"===this._tag||"textarea"===this._tag)&&(n="\n");var r=this._currentElement.props,i=r.dangerouslySetInnerHTML;if(null!=i){if(null!=i.__html)return n+i.__html}else{var s=S[typeof r.children]?r.children:null,o=null!=s?null:r.children;if(null!=s)return n+m(s);if(null!=o){var u=this.mountChildren(o,e,t);return n+u.join("")}}return n},receiveComponent:function(e,t,n){var r=this._currentElement;this._currentElement=e,this.updateComponent(t,r,e,n)},updateComponent:function(e,t,n,i){r(this._currentElement.props),this._updateDOMProperties(t.props,e),this._updateDOMChildren(t.props,e,i)},_updateDOMProperties:function(e,t){var n,r,s,o=this._currentElement.props;for(n in e)if(!o.hasOwnProperty(n)&&e.hasOwnProperty(n))if(n===x){var u=this._previousStyleCopy;for(r in u)u.hasOwnProperty(r)&&(s=s||{},s[r]="");this._previousStyleCopy=null}else E.hasOwnProperty(n)?b(this._rootNodeID,n):(a.isStandardName[n]||a.isCustomAttribute(n))&&N.deletePropertyByID(this._rootNodeID,n);for(n in o){var f=o[n],l=n===x?this._previousStyleCopy:e[n];if(o.hasOwnProperty(n)&&f!==l)if(n===x)if(f?f=this._previousStyleCopy=v({},f):this._previousStyleCopy=null,l){for(r in l)!l.hasOwnProperty(r)||f&&f.hasOwnProperty(r)||(s=s||{},s[r]="");for(r in f)f.hasOwnProperty(r)&&l[r]!==f[r]&&(s=s||{},s[r]=f[r])}else s=f;else E.hasOwnProperty(n)?i(this._rootNodeID,n,f,t):(a.isStandardName[n]||a.isCustomAttribute(n))&&N.updatePropertyByID(this._rootNodeID,n,f)}s&&N.updateStylesByID(this._rootNodeID,s)},_updateDOMChildren:function(e,t,n){var r=this._currentElement.props,i=S[typeof e.children]?e.children:null,s=S[typeof r.children]?r.children:null,o=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,u=r.dangerouslySetInnerHTML&&r.dangerouslySetInnerHTML.__html,a=null!=i?null:e.children,f=null!=s?null:r.children,l=null!=i||null!=o,c=null!=s||null!=u;null!=a&&null==f?this.updateChildren(null,t,n):l&&!c&&this.updateTextContent(""),null!=s?i!==s&&this.updateTextContent(""+s):null!=u?o!==u&&N.updateInnerHTMLByID(this._rootNodeID,u):null!=f&&this.updateChildren(f,t,n)},unmountComponent:function(){this.unmountChildren(),l.deleteAllListeners(this._rootNodeID),c.unmountIDFromEnvironment(this._rootNodeID),this._rootNodeID=null}},d.measureMethods(o,"ReactDOMComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent"}),v(o.prototype,o.Mixin,p.Mixin),o.injection={injectIDOperations:function(e){o.BackendIDOperations=N=e}},t.exports=o},{10:10,11:11,114:114,133:133,134:134,139:139,150:150,27:27,30:30,35:35,5:5,68:68,69:69,73:73}],43:[function(e,t,n){"use strict";var r=e(15),i=e(25),s=e(29),o=e(33),u=e(55),a=u.createFactory("form"),f=o.createClass({displayName:"ReactDOMForm",tagName:"FORM",mixins:[s,i],render:function(){return a(this.props)},componentDidMount:function(){this.trapBubbledEvent(r.topLevelTypes.topReset,"reset"),this.trapBubbledEvent(r.topLevelTypes.topSubmit,"submit")}});t.exports=f},{15:15,25:25,29:29,33:33,55:55}],44:[function(e,t,n){"use strict";var r=e(5),i=e(9),s=e(11),o=e(68),u=e(73),a=e(133),f=e(144),l={dangerouslySetInnerHTML:"`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",style:"`style` must be set using `updateStylesByID()`."},c={updatePropertyByID:function(e,t,n){var r=o.getNode(e);a(!l.hasOwnProperty(t)),null!=n?s.setValueForProperty(r,t,n):s.deleteValueForProperty(r,t)},deletePropertyByID:function(e,t,n){var r=o.getNode(e);a(!l.hasOwnProperty(t)),s.deleteValueForProperty(r,t,n)},updateStylesByID:function(e,t){var n=o.getNode(e);r.setValueForStyles(n,t)},updateInnerHTMLByID:function(e,t){var n=o.getNode(e);f(n,t)},updateTextContentByID:function(e,t){var n=o.getNode(e);i.updateTextContent(n,t)},dangerouslyReplaceNodeWithMarkupByID:function(e,t){var n=o.getNode(e);i.dangerouslyReplaceNodeWithMarkup(n,t)},dangerouslyProcessChildrenUpdates:function(e,t){for(var n=0;n<e.length;n++)e[n].parentNode=o.getNode(e[n].parentID);i.processUpdates(e,t)}};u.measureMethods(c,"ReactDOMIDOperations",{updatePropertyByID:"updatePropertyByID",deletePropertyByID:"deletePropertyByID",updateStylesByID:"updateStylesByID",updateInnerHTMLByID:"updateInnerHTMLByID",updateTextContentByID:"updateTextContentByID",dangerouslyReplaceNodeWithMarkupByID:"dangerouslyReplaceNodeWithMarkupByID",dangerouslyProcessChildrenUpdates:"dangerouslyProcessChildrenUpdates"}),t.exports=c},{11:11,133:133,144:144,5:5,68:68,73:73,9:9}],45:[function(e,t,n){"use strict";var r=e(15),i=e(25),s=e(29),o=e(33),u=e(55),a=u.createFactory("iframe"),f=o.createClass({displayName:"ReactDOMIframe",tagName:"IFRAME",mixins:[s,i],render:function(){return a(this.props)},componentDidMount:function(){this.trapBubbledEvent(r.topLevelTypes.topLoad,"load")}});t.exports=f},{15:15,25:25,29:29,33:33,55:55}],46:[function(e,t,n){"use strict";var r=e(15),i=e(25),s=e(29),o=e(33),u=e(55),a=u.createFactory("img"),f=o.createClass({displayName:"ReactDOMImg",tagName:"IMG",mixins:[s,i],render:function(){return a(this.props)},componentDidMount:function(){this.trapBubbledEvent(r.topLevelTypes.topLoad,"load"),this.trapBubbledEvent(r.topLevelTypes.topError,"error")}});t.exports=f},{15:15,25:25,29:29,33:33,55:55}],47:[function(e,t,n){"use strict";function r(){this.isMounted()&&this.forceUpdate()}var i=e(2),s=e(11),o=e(24),u=e(29),a=e(33),f=e(55),l=e(68),c=e(85),h=e(27),p=e(133),d=f.createFactory("input"),v={},m=a.createClass({displayName:"ReactDOMInput",tagName:"INPUT",mixins:[i,o.Mixin,u],getInitialState:function(){var e=this.props.defaultValue;return{initialChecked:this.props.defaultChecked||!1,initialValue:null!=e?e:null}},render:function(){var e=h({},this.props);e.defaultChecked=null,e.defaultValue=null;var t=o.getValue(this);e.value=null!=t?t:this.state.initialValue;var n=o.getChecked(this);return e.checked=null!=n?n:this.state.initialChecked,e.onChange=this._handleChange,d(e,this.props.children)},componentDidMount:function(){var e=l.getID(this.getDOMNode());v[e]=this},componentWillUnmount:function(){var e=this.getDOMNode(),t=l.getID(e);delete v[t]},componentDidUpdate:function(e,t,n){var r=this.getDOMNode();null!=this.props.checked&&s.setValueForProperty(r,"checked",this.props.checked||!1);var i=o.getValue(this);null!=i&&s.setValueForProperty(r,"value",""+i)},_handleChange:function(e){var t,n=o.getOnChange(this);n&&(t=n.call(this,e)),c.asap(r,this);var i=this.props.name;if("radio"===this.props.type&&null!=i){for(var s=this.getDOMNode(),u=s;u.parentNode;)u=u.parentNode;for(var a=u.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),f=0,h=a.length;h>f;f++){var d=a[f];if(d!==s&&d.form===s.form){var m=l.getID(d);p(m);var g=v[m];p(g),c.asap(r,g)}}}return t}});t.exports=m},{11:11,133:133,2:2,24:24,27:27,29:29,33:33,55:55,68:68,85:85}],48:[function(e,t,n){"use strict";var r=e(29),i=e(33),s=e(55),o=(e(150),s.createFactory("option")),u=i.createClass({displayName:"ReactDOMOption",tagName:"OPTION",mixins:[r],componentWillMount:function(){},render:function(){return o(this.props,this.props.children)}});t.exports=u},{150:150,29:29,33:33,55:55}],49:[function(e,t,n){"use strict";function r(){if(this._pendingUpdate){this._pendingUpdate=!1;var e=u.getValue(this);null!=e&&this.isMounted()&&s(this,e)}}function i(e,t,n){if(null==e[t])return null;if(e.multiple){if(!Array.isArray(e[t]))return new Error("The `"+t+"` prop supplied to <select> must be an array if `multiple` is true.")}else if(Array.isArray(e[t]))return new Error("The `"+t+"` prop supplied to <select> must be a scalar value if `multiple` is false.")}function s(e,t){var n,r,i,s=e.getDOMNode().options;if(e.props.multiple){for(n={},r=0,i=t.length;i>r;r++)n[""+t[r]]=!0;for(r=0,i=s.length;i>r;r++){var o=n.hasOwnProperty(s[r].value);s[r].selected!==o&&(s[r].selected=o)}}else{for(n=""+t,r=0,i=s.length;i>r;r++)if(s[r].value===n)return void (s[r].selected=!0);s.length&&(s[0].selected=!0)}}var o=e(2),u=e(24),a=e(29),f=e(33),l=e(55),c=e(85),h=e(27),p=l.createFactory("select"),d=f.createClass({displayName:"ReactDOMSelect",tagName:"SELECT",mixins:[o,u.Mixin,a],propTypes:{defaultValue:i,value:i},render:function(){var e=h({},this.props);return e.onChange=this._handleChange,e.value=null,p(e,this.props.children)},componentWillMount:function(){this._pendingUpdate=!1},componentDidMount:function(){var e=u.getValue(this);null!=e?s(this,e):null!=this.props.defaultValue&&s(this,this.props.defaultValue)},componentDidUpdate:function(e){var t=u.getValue(this);null!=t?(this._pendingUpdate=!1,s(this,t)):!e.multiple!=!this.props.multiple&&(null!=this.props.defaultValue?s(this,this.props.defaultValue):s(this,this.props.multiple?[]:""))},_handleChange:function(e){var t,n=u.getOnChange(this);return n&&(t=n.call(this,e)),this._pendingUpdate=!0,c.asap(r,this),t}});t.exports=d},{2:2,24:24,27:27,29:29,33:33,55:55,85:85}],50:[function(e,t,n){"use strict";function r(e,t,n,r){return e===n&&t===r}function i(e){var t=document.selection,n=t.createRange(),r=n.text.length,i=n.duplicate();i.moveToElementText(e),i.setEndPoint("EndToStart",n);var s=i.text.length,o=s+r;return{start:s,end:o}}function s(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,i=t.anchorOffset,s=t.focusNode,o=t.focusOffset,u=t.getRangeAt(0),a=r(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),f=a?0:u.toString().length,l=u.cloneRange();l.selectNodeContents(e),l.setEnd(u.startContainer,u.startOffset);var c=r(l.startContainer,l.startOffset,l.endContainer,l.endOffset),h=c?0:l.toString().length,p=h+f,d=document.createRange();d.setStart(n,i),d.setEnd(s,o);var v=d.collapsed;return{start:v?p:h,end:v?h:p}}function o(e,t){var n,r,i=document.selection.createRange().duplicate();"undefined"==typeof t.end?(n=t.start,r=n):t.start>t.end?(n=t.end,r=t.start):(n=t.start,r=t.end),i.moveToElementText(e),i.moveStart("character",n),i.setEndPoint("EndToStart",i),i.moveEnd("character",r-n),i.select()}function u(e,t){if(window.getSelection){var n=window.getSelection(),r=e[l()].length,i=Math.min(t.start,r),s="undefined"==typeof t.end?i:Math.min(t.end,r);if(!n.extend&&i>s){var o=s;s=i,i=o}var u=f(e,i),a=f(e,s);if(u&&a){var c=document.createRange();c.setStart(u.node,u.offset),n.removeAllRanges(),i>s?(n.addRange(c),n.extend(a.node,a.offset)):(c.setEnd(a.node,a.offset),n.addRange(c))}}}var a=e(21),f=e(126),l=e(128),c=a.canUseDOM&&"selection"in document&&!("getSelection"in window),h={getOffsets:c?i:s,setOffsets:c?o:u};t.exports=h},{126:126,128:128,21:21}],51:[function(e,t,n){"use strict";var r=e(11),i=e(35),s=e(42),o=e(27),u=e(114),a=function(e){};o(a.prototype,{construct:function(e){this._currentElement=e,this._stringText=""+e,this._rootNodeID=null,this._mountIndex=0},mountComponent:function(e,t,n){this._rootNodeID=e;var i=u(this._stringText);return t.renderToStaticMarkup?i:"<span "+r.createMarkupForID(e)+">"+i+"</span>"},receiveComponent:function(e,t){if(e!==this._currentElement){this._currentElement=e;var n=""+e;n!==this._stringText&&(this._stringText=n,s.BackendIDOperations.updateTextContentByID(this._rootNodeID,n))}},unmountComponent:function(){i.unmountIDFromEnvironment(this._rootNodeID)}}),t.exports=a},{11:11,114:114,27:27,35:35,42:42}],52:[function(e,t,n){"use strict";function r(){this.isMounted()&&this.forceUpdate()}var i=e(2),s=e(11),o=e(24),u=e(29),a=e(33),f=e(55),l=e(85),c=e(27),h=e(133),p=(e(150),f.createFactory("textarea")),d=a.createClass({displayName:"ReactDOMTextarea",tagName:"TEXTAREA",mixins:[i,o.Mixin,u],getInitialState:function(){var e=this.props.defaultValue,t=this.props.children;null!=t&&(h(null==e),Array.isArray(t)&&(h(t.length<=1),t=t[0]),e=""+t),null==e&&(e="");var n=o.getValue(this);return{initialValue:""+(null!=n?n:e)}},render:function(){var e=c({},this.props);return h(null==e.dangerouslySetInnerHTML),e.defaultValue=null,e.value=null,e.onChange=this._handleChange,p(e,this.state.initialValue)},componentDidUpdate:function(e,t,n){var r=o.getValue(this);if(null!=r){var i=this.getDOMNode();s.setValueForProperty(i,"value",""+r)}},_handleChange:function(e){var t,n=o.getOnChange(this);return n&&(t=n.call(this,e)),l.asap(r,this),t}});t.exports=d},{11:11,133:133,150:150,2:2,24:24,27:27,29:29,33:33,55:55,85:85}],53:[function(e,t,n){"use strict";function r(){this.reinitializeTransaction()}var i=e(85),s=e(101),o=e(27),u=e(112),a={initialize:u,close:function(){h.isBatchingUpdates=!1}},f={initialize:u,close:i.flushBatchedUpdates.bind(i)},l=[f,a];o(r.prototype,s.Mixin,{getTransactionWrappers:function(){return l}});var c=new r,h={isBatchingUpdates:!1,batchedUpdates:function(e,t,n,r,i){var s=h.isBatchingUpdates;h.isBatchingUpdates=!0,s?e(t,n,r,i):c.perform(e,null,t,n,r,i)}};t.exports=h},{101:101,112:112,27:27,85:85}],54:[function(e,t,n){"use strict";function r(e){return d.createClass({tagName:e.toUpperCase(),render:function(){return new L(e,null,null,null,null,this.props)}})}function i(){O.EventEmitter.injectReactEventListener(A),O.EventPluginHub.injectEventPluginOrder(a),O.EventPluginHub.injectInstanceHandle(M),O.EventPluginHub.injectMount(_),O.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:B,EnterLeaveEventPlugin:f,ChangeEventPlugin:o,MobileSafariClickEventPlugin:h,SelectEventPlugin:P,BeforeInputEventPlugin:s}),O.NativeComponent.injectGenericComponentClass(g),O.NativeComponent.injectTextComponentClass(k),O.NativeComponent.injectAutoWrapper(r),O.Class.injectMixin(p),O.NativeComponent.injectComponentClasses({button:y,form:b,iframe:S,img:w,input:x,option:T,select:N,textarea:C,html:F("html"),head:F("head"),body:F("body")}),O.DOMProperty.injectDOMPropertyConfig(c),O.DOMProperty.injectDOMPropertyConfig(j),O.EmptyComponent.injectEmptyComponent("noscript"),O.Updates.injectReconcileTransaction(D),O.Updates.injectBatchingStrategy(m),O.RootIndex.injectCreateReactRootIndex(l.canUseDOM?u.createReactRootIndex:H.createReactRootIndex),O.Component.injectEnvironment(v),O.DOMComponent.injectIDOperations(E)}var s=e(3),o=e(7),u=e(8),a=e(13),f=e(14),l=e(21),c=e(23),h=e(26),p=e(29),d=e(33),v=e(35),m=e(53),g=e(42),y=e(41),b=e(43),w=e(46),E=e(44),S=e(45),x=e(47),T=e(48),N=e(49),C=e(52),k=e(51),L=e(55),A=e(60),O=e(62),M=e(64),_=e(68),D=e(78),P=e(87),H=e(88),B=e(89),j=e(86),F=e(109);t.exports={inject:i}},{109:109,13:13,14:14,21:21,23:23,26:26,29:29,3:3,33:33,35:35,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,51:51,52:52,53:53,55:55,60:60,62:62,64:64,68:68,7:7,78:78,8:8,86:86,87:87,88:88,89:89}],55:[function(e,t,n){"use strict";var r=e(38),i=e(39),s=e(27),o=(e(150),{key:!0,ref:!0}),u=function(e,t,n,r,i,s){this.type=e,this.key=t,this.ref=n,this._owner=r,this._context=i,this.props=s};u.prototype={_isReactElement:!0},u.createElement=function(e,t,n){var s,f={},l=null,c=null;if(null!=t){c=void 0===t.ref?null:t.ref,l=void 0===t.key?null:""+t.key;for(s in t)t.hasOwnProperty(s)&&!o.hasOwnProperty(s)&&(f[s]=t[s])}var h=arguments.length-2;if(1===h)f.children=n;else if(h>1){for(var p=Array(h),d=0;h>d;d++)p[d]=arguments[d+2];f.children=p}if(e&&e.defaultProps){var v=e.defaultProps;for(s in v)"undefined"==typeof f[s]&&(f[s]=v[s])}return new u(e,l,c,i.current,r.current,f)},u.createFactory=function(e){var t=u.createElement.bind(null,e);return t.type=e,t},u.cloneAndReplaceProps=function(e,t){var n=new u(e.type,e.key,e.ref,e._owner,e._context,t);return n},u.cloneElement=function(e,t,n){var r,f=s({},e.props),l=e.key,c=e.ref,h=e._owner;if(null!=t){void 0!==t.ref&&(c=t.ref,h=i.current),void 0!==t.key&&(l=""+t.key);for(r in t)t.hasOwnProperty(r)&&!o.hasOwnProperty(r)&&(f[r]=t[r])}var p=arguments.length-2;if(1===p)f.children=n;else if(p>1){for(var d=Array(p),v=0;p>v;v++)d[v]=arguments[v+2];f.children=d}return new u(e.type,l,c,h,e._context,f)},u.isValidElement=function(e){var t=!!e&&!!e._isReactElement;return t},t.exports=u},{150:150,27:27,38:38,39:39}],56:[function(e,t,n){"use strict";function r(){if(y.current){var e=y.current.getName();if(e)return" Check the render method of `"+e+"`."}return""}function i(e){var t=e&&e.getPublicInstance();if(!t)return void 0;var n=t.constructor;return n?n.displayName||n.name||void 0:void 0}function s(){var e=y.current;return e&&i(e)||void 0}function o(e,t){e._store.validated||null!=e.key||(e._store.validated=!0,a('Each child in an array or iterator should have a unique "key" prop.',e,t))}function u(e,t,n){T.test(e)&&a("Child objects should have non-numeric keys so ordering is preserved.",t,n)}function a(e,t,n){var r=s(),o="string"==typeof n?n:n.displayName||n.name,u=r||o,a=S[e]||(S[e]={});if(!a.hasOwnProperty(u)){a[u]=!0;var f="";if(t&&t._owner&&t._owner!==y.current){var l=i(t._owner);f=" It was passed a child from "+l+"."}}}function f(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++){var r=e[n];v.isValidElement(r)&&o(r,t)}else if(v.isValidElement(e))e._store.validated=!0;else if(e){var i=w(e);if(i){if(i!==e.entries)for(var s,a=i.call(e);!(s=a.next()).done;)v.isValidElement(s.value)&&o(s.value,t)}else if("object"==typeof e){var f=m.extractIfFragment(e);for(var l in f)f.hasOwnProperty(l)&&u(l,f[l],t)}}}function l(e,t,n,i){for(var s in t)if(t.hasOwnProperty(s)){var o;try{E("function"==typeof t[s]),o=t[s](n,s,e,i)}catch(u){o=u}o instanceof Error&&!(o.message in x)&&(x[o.message]=!0,r(this))}}function c(e,t){var n=t.type,r="string"==typeof n?n:n.displayName,i=t._owner?t._owner.getPublicInstance().constructor.displayName:null,s=e+"|"+r+"|"+i;if(!N.hasOwnProperty(s)){N[s]=!0;var o="";r&&(o=" <"+r+" />");var u="";i&&(u=" The element was created by "+i+".")}}function h(e,t){return e!==e?t!==t:0===e&&0===t?1/e===1/t:e===t}function p(e){if(e._store){var t=e._store.originalProps,n=e.props;for(var r in n)n.hasOwnProperty(r)&&(t.hasOwnProperty(r)&&h(t[r],n[r])||(c(r,e),t[r]=n[r]))}}function d(e){if(null!=e.type){var t=b.getComponentClassForElement(e),n=t.displayName||t.name;t.propTypes&&l(n,t.propTypes,e.props,g.prop),"function"==typeof t.getDefaultProps}}var v=e(55),m=e(61),g=e(75),y=(e(74),e(39)),b=e(71),w=e(124),E=e(133),S=(e(150),{}),x={},T=/^\d+$/,N={},C={checkAndWarnForMutatedProps:p,createElement:function(e,t,n){var r=v.createElement.apply(this,arguments);if(null==r)return r;for(var i=2;i<arguments.length;i++)f(arguments[i],e);return d(r),r},createFactory:function(e){var t=C.createElement.bind(null,e);return t.type=e,t},cloneElement:function(e,t,n){for(var r=v.cloneElement.apply(this,arguments),i=2;i<arguments.length;i++)f(arguments[i],r.type);return d(r),r}};t.exports=C},{124:124,133:133,150:150,39:39,55:55,61:61,71:71,74:74,75:75}],57:[function(e,t,n){"use strict";function r(e){l[e]=!0}function i(e){delete l[e]}function s(e){return!!l[e]}var o,u=e(55),a=e(65),f=e(133),l={},c={injectEmptyComponent:function(e){o=u.createFactory(e)}},h=function(){};h.prototype.componentDidMount=function(){var e=a.get(this);e&&r(e._rootNodeID)},h.prototype.componentWillUnmount=function(){var e=a.get(this);e&&i(e._rootNodeID)},h.prototype.render=function(){return f(o),o()};var p=u.createElement(h),d={emptyElement:p,injection:c,isNullComponentID:s};t.exports=d},{133:133,55:55,65:65}],58:[function(e,t,n){"use strict";var r={guard:function(e,t){return e}};t.exports=r},{}],59:[function(e,t,n){"use strict";function r(e){i.enqueueEvents(e),i.processEventQueue()}var i=e(17),s={handleTopLevel:function(e,t,n,s){var u=i.extractEvents(e,t,n,s);r(u)}};t.exports=s},{17:17}],60:[function(e,t,n){"use strict";function r(e){var t=c.getID(e),n=l.getReactRootIDFromNodeID(t),r=c.findReactContainerForID(n),i=c.getFirstReactDOM(r);return i}function i(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function s(e){for(var t=c.getFirstReactDOM(d(e.nativeEvent))||window,n=t;n;)e.ancestors.push(n),n=r(n);for(var i=0,s=e.ancestors.length;s>i;i++){t=e.ancestors[i];var o=c.getID(t)||"";m._handleTopLevel(e.topLevelType,t,o,e.nativeEvent)}}function o(e){var t=v(window);e(t)}var u=e(16),a=e(21),f=e(28),l=e(64),c=e(68),h=e(85),p=e(27),d=e(123),v=e(129);p(i.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),f.addPoolingTo(i,f.twoArgumentPooler);var m={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:a.canUseDOM?window:null,setHandleTopLevel:function(e){m._handleTopLevel=e},setEnabled:function(e){m._enabled=!!e},isEnabled:function(){return m._enabled},trapBubbledEvent:function(e,t,n){var r=n;return r?u.listen(r,t,m.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){var r=n;return r?u.capture(r,t,m.dispatchEvent.bind(null,e)):null},monitorScrollValue:function(e){var t=o.bind(null,e);u.listen(window,"scroll",t)},dispatchEvent:function(e,t){if(m._enabled){var n=i.getPooled(e,t);try{h.batchedUpdates(s,n)}finally{i.release(n)}}}};t.exports=m},{123:123,129:129,16:16,21:21,27:27,28:28,64:64,68:68,85:85}],61:[function(e,t,n){"use strict";var r=(e(55),e(150),{create:function(e){return e},extract:function(e){return e},extractIfFragment:function(e){return e}});t.exports=r},{150:150,55:55}],62:[function(e,t,n){"use strict";var r=e(10),i=e(17),s=e(36),o=e(33),u=e(57),a=e(30),f=e(71),l=e(42),c=e(73),h=e(81),p=e(85),d={Component:s.injection,Class:o.injection,DOMComponent:l.injection,DOMProperty:r.injection,EmptyComponent:u.injection,EventPluginHub:i.injection,EventEmitter:a.injection,NativeComponent:f.injection,Perf:c.injection,RootIndex:h.injection,Updates:p.injection};t.exports=d},{10:10,17:17,30:30,33:33,36:36,42:42,57:57,71:71,73:73,81:81,85:85}],63:[function(e,t,n){"use strict";function r(e){return s(document.documentElement,e)}var i=e(50),s=e(107),o=e(117),u=e(119),a={hasSelectionCapabilities:function(e){return e&&("INPUT"===e.nodeName&&"text"===e.type||"TEXTAREA"===e.nodeName||"true"===e.contentEditable)},getSelectionInformation:function(){var e=u();return{focusedElem:e,selectionRange:a.hasSelectionCapabilities(e)?a.getSelection(e):null}},restoreSelection:function(e){var t=u(),n=e.focusedElem,i=e.selectionRange;t!==n&&r(n)&&(a.hasSelectionCapabilities(n)&&a.setSelection(n,i),o(n))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&"INPUT"===e.nodeName){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=i.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,r=t.end;if("undefined"==typeof r&&(r=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(r,e.value.length);else if(document.selection&&"INPUT"===e.nodeName){var s=e.createTextRange();s.collapse(!0),s.moveStart("character",n),s.moveEnd("character",r-n),s.select()}else i.setOffsets(e,t)}};t.exports=a},{107:107,117:117,119:119,50:50}],64:[function(e,t,n){"use strict";function r(e){return p+e.toString(36)}function i(e,t){return e.charAt(t)===p||t===e.length}function s(e){return""===e||e.charAt(0)===p&&e.charAt(e.length-1)!==p}function o(e,t){return 0===t.indexOf(e)&&i(t,e.length)}function u(e){return e?e.substr(0,e.lastIndexOf(p)):""}function a(e,t){if(h(s(e)&&s(t)),h(o(e,t)),e===t)return e;var n,r=e.length+d;for(n=r;n<t.length&&!i(t,n);n++);return t.substr(0,n)}function f(e,t){var n=Math.min(e.length,t.length);if(0===n)return"";for(var r=0,o=0;n>=o;o++)if(i(e,o)&&i(t,o))r=o;else if(e.charAt(o)!==t.charAt(o))break;var u=e.substr(0,r);return h(s(u)),u}function l(e,t,n,r,i,s){e=e||"",t=t||"",h(e!==t);var f=o(t,e);h(f||o(e,t));for(var l=0,c=f?u:a,p=e;;p=c(p,t)){var d;if(i&&p===e||s&&p===t||(d=n(p,f,r)),d===!1||p===t)break;h(l++<v)}}var c=e(81),h=e(133),p=".",d=p.length,v=100,m={createReactRootID:function(){return r(c.createReactRootIndex())},createReactID:function(e,t){return e+t},getReactRootIDFromNodeID:function(e){if(e&&e.charAt(0)===p&&e.length>1){var t=e.indexOf(p,1);return t>-1?e.substr(0,t):e}return null},traverseEnterLeave:function(e,t,n,r,i){var s=f(e,t);s!==e&&l(e,s,n,r,!1,!0),s!==t&&l(s,t,n,i,!0,!1)},traverseTwoPhase:function(e,t,n){e&&(l("",e,t,n,!0,!1),l(e,"",t,n,!1,!0))},traverseAncestors:function(e,t,n){l("",e,t,n,!0,!1)},_getFirstCommonAncestorID:f,_getNextDescendantID:a,isAncestorIDOf:o,SEPARATOR:p};t.exports=m},{133:133,81:81}],65:[function(e,t,n){"use strict";var r={remove:function(e){e._reactInternalInstance=void 0},get:function(e){return e._reactInternalInstance},has:function(e){return void 0!==e._reactInternalInstance},set:function(e,t){e._reactInternalInstance=t}};t.exports=r},{}],66:[function(e,t,n){"use strict";var r={currentlyMountingInstance:null,currentlyUnmountingInstance:null};t.exports=r},{}],67:[function(e,t,n){"use strict";var r=e(104),i={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=r(e);return e.replace(">"," "+i.CHECKSUM_ATTR_NAME+'="'+t+'">')},canReuseMarkup:function(e,t){var n=t.getAttribute(i.CHECKSUM_ATTR_NAME);n=n&&parseInt(n,10);var s=r(e);return s===n}};t.exports=i},{104:104}],68:[function(e,t,n){"use strict";function r(e,t){for(var n=Math.min(e.length,t.length),r=0;n>r;r++
)if(e.charAt(r)!==t.charAt(r))return r;return e.length===t.length?-1:n}function i(e){var t=A(e);return t&&z.getID(t)}function s(e){var t=o(e);if(t)if(B.hasOwnProperty(t)){var n=B[t];n!==e&&(M(!l(n,t)),B[t]=e)}else B[t]=e;return t}function o(e){return e&&e.getAttribute&&e.getAttribute(H)||""}function u(e,t){var n=o(e);n!==t&&delete B[n],e.setAttribute(H,t),B[t]=e}function a(e){return B.hasOwnProperty(e)&&l(B[e],e)||(B[e]=z.findReactNodeByID(e)),B[e]}function f(e){var t=E.get(e)._rootNodeID;return b.isNullComponentID(t)?null:(B.hasOwnProperty(t)&&l(B[t],t)||(B[t]=z.findReactNodeByID(t)),B[t])}function l(e,t){if(e){M(o(e)===t);var n=z.findReactContainerForID(t);if(n&&L(n,e))return!0}return!1}function c(e){delete B[e]}function h(e){var t=B[e];return t&&l(t,e)?void (U=t):!1}function p(e){U=null,w.traverseAncestors(e,h);var t=U;return U=null,t}function d(e,t,n,r,i){var s=T.mountComponent(e,t,r,k);e._isTopLevel=!0,z._mountImageIntoNode(s,n,i)}function v(e,t,n,r){var i=C.ReactReconcileTransaction.getPooled();i.perform(d,null,e,t,n,i,r),C.ReactReconcileTransaction.release(i)}var m=e(10),g=e(30),y=(e(39),e(55)),b=(e(56),e(57)),w=e(64),E=e(65),S=e(67),x=e(73),T=e(79),N=e(84),C=e(85),k=e(113),L=e(107),A=e(127),O=e(132),M=e(133),_=e(144),D=e(147),P=(e(150),w.SEPARATOR),H=m.ID_ATTRIBUTE_NAME,B={},j=1,F=9,I={},q={},R=[],U=null,z={_instancesByReactRootID:I,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,r){return z.scrollMonitor(n,function(){N.enqueueElementInternal(e,t),r&&N.enqueueCallbackInternal(e,r)}),e},_registerComponent:function(e,t){M(t&&(t.nodeType===j||t.nodeType===F)),g.ensureScrollValueMonitoring();var n=z.registerContainer(t);return I[n]=e,n},_renderNewRootComponent:function(e,t,n){var r=O(e,null),i=z._registerComponent(r,t);return C.batchedUpdates(v,r,i,t,n),r},render:function(e,t,n){M(y.isValidElement(e));var r=I[i(t)];if(r){var s=r._currentElement;if(D(s,e))return z._updateRootComponent(r,e,t,n).getPublicInstance();z.unmountComponentAtNode(t)}var o=A(t),u=o&&z.isRenderedByReact(o),a=u&&!r,f=z._renderNewRootComponent(e,t,a).getPublicInstance();return n&&n.call(f),f},constructAndRenderComponent:function(e,t,n){var r=y.createElement(e,t);return z.render(r,n)},constructAndRenderComponentByID:function(e,t,n){var r=document.getElementById(n);return M(r),z.constructAndRenderComponent(e,t,r)},registerContainer:function(e){var t=i(e);return t&&(t=w.getReactRootIDFromNodeID(t)),t||(t=w.createReactRootID()),q[t]=e,t},unmountComponentAtNode:function(e){M(e&&(e.nodeType===j||e.nodeType===F));var t=i(e),n=I[t];return n?(z.unmountComponentFromNode(n,e),delete I[t],delete q[t],!0):!1},unmountComponentFromNode:function(e,t){for(T.unmountComponent(e),t.nodeType===F&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)},findReactContainerForID:function(e){var t=w.getReactRootIDFromNodeID(e),n=q[t];return n},findReactNodeByID:function(e){var t=z.findReactContainerForID(e);return z.findComponentRoot(t,e)},isRenderedByReact:function(e){if(1!==e.nodeType)return!1;var t=z.getID(e);return t?t.charAt(0)===P:!1},getFirstReactDOM:function(e){for(var t=e;t&&t.parentNode!==t;){if(z.isRenderedByReact(t))return t;t=t.parentNode}return null},findComponentRoot:function(e,t){var n=R,r=0,i=p(t)||e;for(n[0]=i.firstChild,n.length=1;r<n.length;){for(var s,o=n[r++];o;){var u=z.getID(o);u?t===u?s=o:w.isAncestorIDOf(u,t)&&(n.length=r=0,n.push(o.firstChild)):n.push(o.firstChild),o=o.nextSibling}if(s)return n.length=0,s}n.length=0,M(!1)},_mountImageIntoNode:function(e,t,n){if(M(t&&(t.nodeType===j||t.nodeType===F)),n){var i=A(t);if(S.canReuseMarkup(e,i))return;var s=i.getAttribute(S.CHECKSUM_ATTR_NAME);i.removeAttribute(S.CHECKSUM_ATTR_NAME);var o=i.outerHTML;i.setAttribute(S.CHECKSUM_ATTR_NAME,s);var u=r(e,o);" (client) "+e.substring(u-20,u+20)+"\n (server) "+o.substring(u-20,u+20),M(t.nodeType!==F)}M(t.nodeType!==F),_(t,e)},getReactRootID:i,getID:s,setID:u,getNode:a,getNodeFromInstance:f,purgeID:c};x.measureMethods(z,"ReactMount",{_renderNewRootComponent:"_renderNewRootComponent",_mountImageIntoNode:"_mountImageIntoNode"}),t.exports=z},{10:10,107:107,113:113,127:127,132:132,133:133,144:144,147:147,150:150,30:30,39:39,55:55,56:56,57:57,64:64,65:65,67:67,73:73,79:79,84:84,85:85}],69:[function(e,t,n){"use strict";function r(e,t,n){d.push({parentID:e,parentNode:null,type:l.INSERT_MARKUP,markupIndex:v.push(t)-1,textContent:null,fromIndex:null,toIndex:n})}function i(e,t,n){d.push({parentID:e,parentNode:null,type:l.MOVE_EXISTING,markupIndex:null,textContent:null,fromIndex:t,toIndex:n})}function s(e,t){d.push({parentID:e,parentNode:null,type:l.REMOVE_NODE,markupIndex:null,textContent:null,fromIndex:t,toIndex:null})}function o(e,t){d.push({parentID:e,parentNode:null,type:l.TEXT_CONTENT,markupIndex:null,textContent:t,fromIndex:null,toIndex:null})}function u(){d.length&&(f.processChildrenUpdates(d,v),a())}function a(){d.length=0,v.length=0}var f=e(36),l=e(70),c=e(79),h=e(31),p=0,d=[],v=[],m={Mixin:{mountChildren:function(e,t,n){var r=h.instantiateChildren(e,t,n);this._renderedChildren=r;var i=[],s=0;for(var o in r)if(r.hasOwnProperty(o)){var u=r[o],a=this._rootNodeID+o,f=c.mountComponent(u,a,t,n);u._mountIndex=s,i.push(f),s++}return i},updateTextContent:function(e){p++;var t=!0;try{var n=this._renderedChildren;h.unmountChildren(n);for(var r in n)n.hasOwnProperty(r)&&this._unmountChildByName(n[r],r);this.setTextContent(e),t=!1}finally{p--,p||(t?a():u())}},updateChildren:function(e,t,n){p++;var r=!0;try{this._updateChildren(e,t,n),r=!1}finally{p--,p||(r?a():u())}},_updateChildren:function(e,t,n){var r=this._renderedChildren,i=h.updateChildren(r,e,t,n);if(this._renderedChildren=i,i||r){var s,o=0,u=0;for(s in i)if(i.hasOwnProperty(s)){var a=r&&r[s],f=i[s];a===f?(this.moveChild(a,u,o),o=Math.max(a._mountIndex,o),a._mountIndex=u):(a&&(o=Math.max(a._mountIndex,o),this._unmountChildByName(a,s)),this._mountChildByNameAtIndex(f,s,u,t,n)),u++}for(s in r)!r.hasOwnProperty(s)||i&&i.hasOwnProperty(s)||this._unmountChildByName(r[s],s)}},unmountChildren:function(){var e=this._renderedChildren;h.unmountChildren(e),this._renderedChildren=null},moveChild:function(e,t,n){e._mountIndex<n&&i(this._rootNodeID,e._mountIndex,t)},createChild:function(e,t){r(this._rootNodeID,t,e._mountIndex)},removeChild:function(e){s(this._rootNodeID,e._mountIndex)},setTextContent:function(e){o(this._rootNodeID,e)},_mountChildByNameAtIndex:function(e,t,n,r,i){var s=this._rootNodeID+t,o=c.mountComponent(e,s,r,i);e._mountIndex=n,this.createChild(e,o)},_unmountChildByName:function(e,t){this.removeChild(e),e._mountIndex=null}}};t.exports=m},{31:31,36:36,70:70,79:79}],70:[function(e,t,n){"use strict";var r=e(138),i=r({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,TEXT_CONTENT:null});t.exports=i},{138:138}],71:[function(e,t,n){"use strict";function r(e){if("function"==typeof e.type)return e.type;var t=e.type,n=c[t];return null==n&&(c[t]=n=f(t)),n}function i(e){return a(l),new l(e.type,e.props)}function s(e){return new h(e)}function o(e){return e instanceof h}var u=e(27),a=e(133),f=null,l=null,c={},h=null,p={injectGenericComponentClass:function(e){l=e},injectTextComponentClass:function(e){h=e},injectComponentClasses:function(e){u(c,e)},injectAutoWrapper:function(e){f=e}},d={getComponentClassForElement:r,createInternalComponent:i,createInstanceForText:s,isTextComponent:o,injection:p};t.exports=d},{133:133,27:27}],72:[function(e,t,n){"use strict";var r=e(133),i={isValidOwner:function(e){return!!e&&"function"==typeof e.attachRef&&"function"==typeof e.detachRef},addComponentAsRefTo:function(e,t,n){r(i.isValidOwner(n)),n.attachRef(t,e)},removeComponentAsRefFrom:function(e,t,n){r(i.isValidOwner(n)),n.getPublicInstance().refs[t]===e.getPublicInstance()&&n.detachRef(t)}};t.exports=i},{133:133}],73:[function(e,t,n){"use strict";function r(e,t,n){return n}var i={enableMeasure:!1,storedMeasure:r,measureMethods:function(e,t,n){},measure:function(e,t,n){return n},injection:{injectMeasure:function(e){i.storedMeasure=e}}};t.exports=i},{}],74:[function(e,t,n){"use strict";var r={};t.exports=r},{}],75:[function(e,t,n){"use strict";var r=e(138),i=r({prop:null,context:null,childContext:null});t.exports=i},{138:138}],76:[function(e,t,n){"use strict";function r(e){function t(t,n,r,i,s){if(i=i||E,null==n[r]){var o=b[s];return t?new Error("Required "+o+" `"+r+"` was not specified in "+("`"+i+"`.")):null}return e(n,r,i,s)}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function i(e){function t(t,n,r,i){var s=t[n],o=v(s);if(o!==e){var u=b[i],a=m(s);return new Error("Invalid "+u+" `"+n+"` of type `"+a+"` "+("supplied to `"+r+"`, expected `"+e+"`."))}return null}return r(t)}function s(){return r(w.thatReturns(null))}function o(e){function t(t,n,r,i){var s=t[n];if(!Array.isArray(s)){var o=b[i],u=v(s);return new Error("Invalid "+o+" `"+n+"` of type "+("`"+u+"` supplied to `"+r+"`, expected an array."))}for(var a=0;a<s.length;a++){var f=e(s,a,r,i);if(f instanceof Error)return f}return null}return r(t)}function u(){function e(e,t,n,r){if(!g.isValidElement(e[t])){var i=b[r];return new Error("Invalid "+i+" `"+t+"` supplied to "+("`"+n+"`, expected a ReactElement."))}return null}return r(e)}function a(e){function t(t,n,r,i){if(t[n]instanceof e)return null;var s=b[i],o=e.name||E;return new Error("Invalid "+s+" `"+n+"` supplied to "+("`"+r+"`, expected instance of `"+o+"`."))}return r(t)}function f(e){function t(t,n,r,i){for(var s=t[n],o=0;o<e.length;o++)if(s===e[o])return null;var u=b[i],a=JSON.stringify(e);return new Error("Invalid "+u+" `"+n+"` of value `"+s+"` "+("supplied to `"+r+"`, expected one of "+a+"."))}return r(t)}function l(e){function t(t,n,r,i){var s=t[n],o=v(s);if("object"!==o){var u=b[i];return new Error("Invalid "+u+" `"+n+"` of type "+("`"+o+"` supplied to `"+r+"`, expected an object."))}for(var a in s)if(s.hasOwnProperty(a)){var f=e(s,a,r,i);if(f instanceof Error)return f}return null}return r(t)}function c(e){function t(t,n,r,i){for(var s=0;s<e.length;s++){var o=e[s];if(null==o(t,n,r,i))return null}var u=b[i];return new Error("Invalid "+u+" `"+n+"` supplied to "+("`"+r+"`."))}return r(t)}function h(){function e(e,t,n,r){if(!d(e[t])){var i=b[r];return new Error("Invalid "+i+" `"+t+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return null}return r(e)}function p(e){function t(t,n,r,i){var s=t[n],o=v(s);if("object"!==o){var u=b[i];return new Error("Invalid "+u+" `"+n+"` of type `"+o+"` "+("supplied to `"+r+"`, expected `object`."))}for(var a in e){var f=e[a];if(f){var l=f(s,a,r,i);if(l)return l}}return null}return r(t)}function d(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(d);if(null===e||g.isValidElement(e))return!0;e=y.extractIfFragment(e);for(var t in e)if(!d(e[t]))return!1;return!0;default:return!1}}function v(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":t}function m(e){var t=v(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}var g=e(55),y=e(61),b=e(74),w=e(112),E="<<anonymous>>",S=u(),x=h(),T={array:i("array"),bool:i("boolean"),func:i("function"),number:i("number"),object:i("object"),string:i("string"),any:s(),arrayOf:o,element:S,instanceOf:a,node:x,objectOf:l,oneOf:f,oneOfType:c,shape:p};t.exports=T},{112:112,55:55,61:61,74:74}],77:[function(e,t,n){"use strict";function r(){this.listenersToPut=[]}var i=e(28),s=e(30),o=e(27);o(r.prototype,{enqueuePutListener:function(e,t,n){this.listenersToPut.push({rootNodeID:e,propKey:t,propValue:n})},putListeners:function(){for(var e=0;e<this.listenersToPut.length;e++){var t=this.listenersToPut[e];s.putListener(t.rootNodeID,t.propKey,t.propValue)}},reset:function(){this.listenersToPut.length=0},destructor:function(){this.reset()}}),i.addPoolingTo(r),t.exports=r},{27:27,28:28,30:30}],78:[function(e,t,n){"use strict";function r(){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=i.getPooled(null),this.putListenerQueue=a.getPooled()}var i=e(6),s=e(28),o=e(30),u=e(63),a=e(77),f=e(101),l=e(27),c={initialize:u.getSelectionInformation,close:u.restoreSelection},h={initialize:function(){var e=o.isEnabled();return o.setEnabled(!1),e},close:function(e){o.setEnabled(e)}},p={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},d={initialize:function(){this.putListenerQueue.reset()},close:function(){this.putListenerQueue.putListeners()}},v=[d,c,h,p],m={getTransactionWrappers:function(){return v},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){i.release(this.reactMountReady),this.reactMountReady=null,a.release(this.putListenerQueue),this.putListenerQueue=null}};l(r.prototype,f.Mixin,m),s.addPoolingTo(r),t.exports=r},{101:101,27:27,28:28,30:30,6:6,63:63,77:77}],79:[function(e,t,n){"use strict";function r(){i.attachRefs(this,this._currentElement)}var i=e(80),s=(e(56),{mountComponent:function(e,t,n,i){var s=e.mountComponent(t,n,i);return n.getReactMountReady().enqueue(r,e),s},unmountComponent:function(e){i.detachRefs(e,e._currentElement),e.unmountComponent()},receiveComponent:function(e,t,n,s){var u=e._currentElement;if(t!==u||null==t._owner){var a=i.shouldUpdateRefs(u,t);a&&i.detachRefs(e,u),e.receiveComponent(t,n,s),a&&n.getReactMountReady().enqueue(r,e)}},performUpdateIfNecessary:function(e,t){e.performUpdateIfNecessary(t)}});t.exports=s},{56:56,80:80}],80:[function(e,t,n){"use strict";function r(e,t,n){"function"==typeof e?e(t.getPublicInstance()):s.addComponentAsRefTo(t,e,n)}function i(e,t,n){"function"==typeof e?e(null):s.removeComponentAsRefFrom(t,e,n)}var s=e(72),o={};o.attachRefs=function(e,t){var n=t.ref;null!=n&&r(n,e,t._owner)},o.shouldUpdateRefs=function(e,t){return t._owner!==e._owner||t.ref!==e.ref},o.detachRefs=function(e,t){var n=t.ref;null!=n&&i(n,e,t._owner)},t.exports=o},{72:72}],81:[function(e,t,n){"use strict";var r={injectCreateReactRootIndex:function(e){i.createReactRootIndex=e}},i={createReactRootIndex:null,injection:r};t.exports=i},{}],82:[function(e,t,n){"use strict";function r(e){c(s.isValidElement(e));var t;try{var n=o.createReactRootID();return t=a.getPooled(!1),t.perform(function(){var r=l(e,null),i=r.mountComponent(n,t,f);return u.addChecksumToMarkup(i)},null)}finally{a.release(t)}}function i(e){c(s.isValidElement(e));var t;try{var n=o.createReactRootID();return t=a.getPooled(!0),t.perform(function(){var r=l(e,null);return r.mountComponent(n,t,f)},null)}finally{a.release(t)}}var s=e(55),o=e(64),u=e(67),a=e(83),f=e(113),l=e(132),c=e(133);t.exports={renderToString:r,renderToStaticMarkup:i}},{113:113,132:132,133:133,55:55,64:64,67:67,83:83}],83:[function(e,t,n){"use strict";function r(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.reactMountReady=s.getPooled(null),this.putListenerQueue=o.getPooled()}var i=e(28),s=e(6),o=e(77),u=e(101),a=e(27),f=e(112),l={initialize:function(){this.reactMountReady.reset()},close:f},c={initialize:function(){this.putListenerQueue.reset()},close:f},h=[c,l],p={getTransactionWrappers:function(){return h},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){s.release(this.reactMountReady),this.reactMountReady=null,o.release(this.putListenerQueue),this.putListenerQueue=null}};a(r.prototype,u.Mixin,p),i.addPoolingTo(r),t.exports=r},{101:101,112:112,27:27,28:28,6:6,77:77}],84:[function(e,t,n){"use strict";function r(e){e!==s.currentlyMountingInstance&&f.enqueueUpdate(e)}function i(e,t){c(null==o.current);var n=a.get(e);return n?n===s.currentlyUnmountingInstance?null:n:null}var s=e(66),o=e(39),u=e(55),a=e(65),f=e(85),l=e(27),c=e(133),h=(e(150),{enqueueCallback:function(e,t){c("function"==typeof t);var n=i(e);return n&&n!==s.currentlyMountingInstance?(n._pendingCallbacks?n._pendingCallbacks.push(t):n._pendingCallbacks=[t],void r(n)):null},enqueueCallbackInternal:function(e,t){c("function"==typeof t),e._pendingCallbacks?e._pendingCallbacks.push(t):e._pendingCallbacks=[t],r(e)},enqueueForceUpdate:function(e){var t=i(e,"forceUpdate");t&&(t._pendingForceUpdate=!0,r(t))},enqueueReplaceState:function(e,t){var n=i(e,"replaceState");n&&(n._pendingStateQueue=[t],n._pendingReplaceState=!0,r(n))},enqueueSetState:function(e,t){var n=i(e,"setState");if(n){var s=n._pendingStateQueue||(n._pendingStateQueue=[]);s.push(t),r(n)}},enqueueSetProps:function(e,t){var n=i(e,"setProps");if(n){c(n._isTopLevel);var s=n._pendingElement||n._currentElement,o=l({},s.props,t);n._pendingElement=u.cloneAndReplaceProps(s,o),r(n)}},enqueueReplaceProps:function(e,t){var n=i(e,"replaceProps");if(n){c(n._isTopLevel);var s=n._pendingElement||n._currentElement;n._pendingElement=u.cloneAndReplaceProps(s,t),r(n)}},enqueueElementInternal:function(e,t){e._pendingElement=t,r(e)}});t.exports=h},{133:133,150:150,27:27,39:39,55:55,65:65,66:66,85:85}],85:[function(e,t,n){"use strict";function r(){m(C.ReactReconcileTransaction&&w)}function i(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=l.getPooled(),this.reconcileTransaction=C.ReactReconcileTransaction.getPooled()}function s(e,t,n,i,s){r(),w.batchedUpdates(e,t,n,i,s)}function o(e,t){return e._mountOrder-t._mountOrder}function u(e){var t=e.dirtyComponentsLength;m(t===g.length),g.sort(o);for(var n=0;t>n;n++){var r=g[n],i=r._pendingCallbacks;if(r._pendingCallbacks=null,p.performUpdateIfNecessary(r,e.reconcileTransaction),i)for(var s=0;s<i.length;s++)e.callbackQueue.enqueue(i[s],r.getPublicInstance())}}function a(e){return r(),w.isBatchingUpdates?void g.push(e):void w.batchedUpdates(a,e)}function f(e,t){m(w.isBatchingUpdates),y.enqueue(e,t),b=!0}var l=e(6),c=e(28),h=(e(39),e(73)),p=e(79),d=e(101),v=e(27),m=e(133),g=(e(150),[]),y=l.getPooled(),b=!1,w=null,E={initialize:function(){this.dirtyComponentsLength=g.length},close:function(){this.dirtyComponentsLength!==g.length?(g.splice(0,this.dirtyComponentsLength),T()):g.length=0}},S={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},x=[E,S];v(i.prototype,d.Mixin,{getTransactionWrappers:function(){return x},destructor:function(){this.dirtyComponentsLength=null,l.release(this.callbackQueue),this.callbackQueue=null,C.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,n){return d.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,n)}}),c.addPoolingTo(i);var T=function(){for(;g.length||b;){if(g.length){var e=i.getPooled();e.perform(u,null,e),i.release(e)}if(b){b=!1;var t=y;y=l.getPooled(),t.notifyAll(),l.release(t)}}};T=h.measure("ReactUpdates","flushBatchedUpdates",T);var N={injectReconcileTransaction:function(e){m(e),C.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){m(e),m("function"==typeof e.batchedUpdates),m("boolean"==typeof e.isBatchingUpdates),w=e}},C={ReactReconcileTransaction:null,batchedUpdates:s,enqueueUpdate:a,flushBatchedUpdates:T,injection:N,asap:f};t.exports=C},{101:101,133:133,150:150,27:27,28:28,39:39,6:6,73:73,79:79}],86:[function(e,t,n){"use strict";var r=e(10),i=r.injection.MUST_USE_ATTRIBUTE,s={Properties:{clipPath:i,cx:i,cy:i,d:i,dx:i,dy:i,fill:i,fillOpacity:i,fontFamily:i,fontSize:i,fx:i,fy:i,gradientTransform:i,gradientUnits:i,markerEnd:i,markerMid:i,markerStart:i,offset:i,opacity:i,patternContentUnits:i,patternUnits:i,points:i,preserveAspectRatio:i,r:i,rx:i,ry:i,spreadMethod:i,stopColor:i,stopOpacity:i,stroke:i,strokeDasharray:i,strokeLinecap:i,strokeOpacity:i,strokeWidth:i,textAnchor:i,transform:i,version:i,viewBox:i,x1:i,x2:i,x:i,y1:i,y2:i,y:i},DOMAttributeNames:{clipPath:"clip-path",fillOpacity:"fill-opacity",fontFamily:"font-family",fontSize:"font-size",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",patternContentUnits:"patternContentUnits",patternUnits:"patternUnits",preserveAspectRatio:"preserveAspectRatio",spreadMethod:"spreadMethod",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeDasharray:"stroke-dasharray",strokeLinecap:"stroke-linecap",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",viewBox:"viewBox"}};t.exports=s},{10:10}],87:[function(e,t,n){"use strict";function r(e){if("selectionStart"in e&&u.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function i(e){if(y||null==v||v!==f())return null;var t=r(v);if(!g||!h(g,t)){g=t;var n=a.getPooled(d.select,m,e);return n.type="select",n.target=v,o.accumulateTwoPhaseDispatches(n),n}}var s=e(15),o=e(20),u=e(63),a=e(93),f=e(119),l=e(136),c=e(139),h=e(146),p=s.topLevelTypes,d={select:{phasedRegistrationNames:{bubbled:c({onSelect:null}),captured:c({onSelectCapture:null})},dependencies:[p.topBlur,p.topContextMenu,p.topFocus,p.topKeyDown,p.topMouseDown,p.topMouseUp,p.topSelectionChange]}},v=null,m=null,g=null,y=!1,b={eventTypes:d,extractEvents:function(e,t,n,r){switch(e){case p.topFocus:(l(t)||"true"===t.contentEditable)&&(v=t,m=n,g=null);break;case p.topBlur:v=null,m=null,g=null;break;case p.topMouseDown:y=!0;break;case p.topContextMenu:case p.topMouseUp:return y=!1,i(r);case p.topSelectionChange:case p.topKeyDown:case p.topKeyUp:return i(r)}}};t.exports=b},{119:119,136:136,139:139,146:146,15:15,20:20,63:63,93:93}],88:[function(e,t,n){"use strict";var r=Math.pow(2,53),i={createReactRootIndex:function(){return Math.ceil(Math.random()*r)}};t.exports=i},{}],89:[function(e,t,n){"use strict";var r=e(15),i=e(19),s=e(20),o=e(90),u=e(93),a=e(94),f=e(96),l=e(97),c=e(92),h=e(98),p=e(99),d=e(100),v=e(120),m=e(133),g=e(139),y=(e(150),r.topLevelTypes),b={blur:{phasedRegistrationNames:{bubbled:g({onBlur:!0}),captured:g({onBlurCapture:!0})}},click:{phasedRegistrationNames:{bubbled:g({onClick:!0}),captured:g({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:g({onContextMenu:!0}),captured:g({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:g({onCopy:!0}),captured:g({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:g({onCut:!0}),captured:g({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:g({onDoubleClick:!0}),captured:g({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:g({onDrag:!0}),captured:g({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:g({onDragEnd:!0}),captured:g({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:g({onDragEnter:!0}),captured:g({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:g({onDragExit:!0}),captured:g({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:g({onDragLeave:!0}),captured:g({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:g({onDragOver:!0}),captured:g({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:g({onDragStart:!0}),captured:g({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:g({onDrop:!0}),captured:g({onDropCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:g({onFocus:!0}),captured:g({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:g({onInput:!0}),captured:g({onInputCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:g({onKeyDown:!0}),captured:g({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:g({onKeyPress:!0}),captured:g({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:g({onKeyUp:!0}),captured:g({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:g({onLoad:!0}),captured:g({onLoadCapture:!0})}},error:{phasedRegistrationNames:{bubbled:g({onError:!0}),captured:g({onErrorCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:g({onMouseDown:!0}),captured:g({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:g({onMouseMove:!0}),captured:g({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:g({onMouseOut:!0}),captured:g({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:g({onMouseOver:!0}),captured:g({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:g({onMouseUp:!0}),captured:g({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:g({onPaste:!0}),captured:g({onPasteCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:g({onReset:!0}),captured:g({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:g({onScroll:!0}),captured:g({onScrollCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:g({onSubmit:!0}),captured:g({onSubmitCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:g({onTouchCancel:!0}),captured:g({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:g({onTouchEnd:!0}),captured:g({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:g({onTouchMove:!0}),captured:g({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:g({onTouchStart:!0}),captured:g({onTouchStartCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:g({onWheel:!0}),captured:g({onWheelCapture:!0})}}},w={topBlur:b.blur,topClick:b.click,topContextMenu:b.contextMenu,topCopy:b.copy,topCut:b.cut,topDoubleClick:b.doubleClick,topDrag:b.drag,topDragEnd:b.dragEnd,topDragEnter:b.dragEnter,topDragExit:b.dragExit,topDragLeave:b.dragLeave,topDragOver:b.dragOver,topDragStart:b.dragStart,topDrop:b.drop,topError:b.error,topFocus:b.focus,topInput:b.input,topKeyDown:b.keyDown,topKeyPress:b.keyPress,topKeyUp:b.keyUp,topLoad:b.load,topMouseDown:b.mouseDown,topMouseMove:b.mouseMove,topMouseOut:b.mouseOut,topMouseOver:b.mouseOver,topMouseUp:b.mouseUp,topPaste:b.paste,topReset:b.reset,topScroll:b.scroll,topSubmit:b.submit,topTouchCancel:b.touchCancel,topTouchEnd:b.touchEnd,topTouchMove:b.touchMove,topTouchStart:b.touchStart,topWheel:b.wheel};for(var E in w)w[E].dependencies=[E];var S={eventTypes:b,executeDispatch:function(e,t,n){var r=i.executeDispatch(e,t,n);r===!1&&(e.stopPropagation(),e.preventDefault())},extractEvents:function(e,t,n,r){var i=w[e];if(!i)return null;var g;switch(e){case y.topInput:case y.topLoad:case y.topError:case y.topReset:case y.topSubmit:g=u;break;case y.topKeyPress:if(0===v(r))return null;case y.topKeyDown:case y.topKeyUp:g=f;break;case y.topBlur:case y.topFocus:g=a;break;case y.topClick:if(2===r.button)return null;case y.topContextMenu:case y.topDoubleClick:case y.topMouseDown:case y.topMouseMove:case y.topMouseOut:case y.topMouseOver:case y.topMouseUp:g=l;break;case y.topDrag:case y.topDragEnd:case y.topDragEnter:case y.topDragExit:case y.topDragLeave:case y.topDragOver:case y.topDragStart:case y.topDrop:g=c;break;case y.topTouchCancel:case y.topTouchEnd:case y.topTouchMove:case y.topTouchStart:g=h;break;case y.topScroll:g=p;break;case y.topWheel:g=d;break;case y.topCopy:case y.topCut:case y.topPaste:g=o}m(g);var b=g.getPooled(i,n,r);return s.accumulateTwoPhaseDispatches(b),b}};t.exports=S},{100:100,120:120,133:133,139:139,15:15,150:150,19:19,20:20,90:90,92:92,93:93,94:94,96:96,97:97,98:98,99:99}],90:[function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=e(93),s={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};i.augmentClass(r,s),t.exports=r},{93:93}],91:[function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=e(93),s={data:null};i.augmentClass(r,s),t.exports=r},{93:93}],92:[function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=e(97),s={dataTransfer:null};i.augmentClass(r,s),t.exports=r},{97:97}],93:[function(e,t,n){"use strict";function r(e,t,n){this.dispatchConfig=e,this.dispatchMarker=t,this.nativeEvent=n;var r=this.constructor.Interface;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s?this[i]=s(n):this[i]=n[i]}var u=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;u?this.isDefaultPrevented=o.thatReturnsTrue:this.isDefaultPrevented=o.thatReturnsFalse,this.isPropagationStopped=o.thatReturnsFalse}var i=e(28),s=e(27),o=e(112),u=e(123),a={type:null,target:u,currentTarget:o.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};s(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e.preventDefault?e.preventDefault():e.returnValue=!1,this.isDefaultPrevented=o.thatReturnsTrue},stopPropagation:function(){var e=this.nativeEvent;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,this.isPropagationStopped=o.thatReturnsTrue},persist:function(){this.isPersistent=o.thatReturnsTrue},isPersistent:o.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)this[t]=null;this.dispatchConfig=null,this.dispatchMarker=null,this.nativeEvent=null}}),r.Interface=a,r.augmentClass=function(e,t){var n=this,r=Object.create(n.prototype);s(r,e.prototype),e.prototype=r,e.prototype.constructor=e,e.Interface=s({},n.Interface,t),e.augmentClass=n.augmentClass,i.addPoolingTo(e,i.threeArgumentPooler)},i.addPoolingTo(r,i.threeArgumentPooler),t.exports=r},{112:112,123:123,27:27,28:28}],94:[function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=e(99),s={relatedTarget:null};i.augmentClass(r,s),t.exports=r},{99:99}],95:[function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=e(93),s={data:null};i.augmentClass(r,s),t.exports=r},{93:93}],96:[function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=e(99),s=e(120),o=e(121),u=e(122),a={key:o,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:u,charCode:function(e){return"keypress"===e.type?s(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?s(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}};i.augmentClass(r,a),t.exports=r},{120:120,121:121,122:122,99:99}],97:[function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=e(99),s=e(102),o=e(122),u={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:o,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+s.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+s.currentScrollTop}};i.augmentClass(r,u),t.exports=r},{102:102,122:122,99:99}],98:[function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=e(99),s=e(122),o={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:s};i.augmentClass(r,o),t.exports=r},{122:122,99:99}],99:[function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=e(93),s=e(123),o={view:function(e){if(e.view)return e.view;var t=s(e);if(null!=t&&t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};i.augmentClass(r,o),t.exports=r},{123:123,93:93}],100:[function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=e(97),s={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};i.augmentClass(r,s),t.exports=r},{97:97}],101:[function(e,t,n){"use strict";var r=e(133),i={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,t,n,i,s,o,u,a){r(!this.isInTransaction());var f,l;try{this._isInTransaction=!0,f=!0,this.initializeAll(0),l=e.call(t,n,i,s,o,u,a),f=!1}finally{try{if(f)try{this.closeAll(0)}catch(c){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return l},initializeAll:function(e){for(var t=this.transactionWrappers,n=e;n<t.length;n++){var r=t[n];try{this.wrapperInitData[n]=s.OBSERVED_ERROR,this.wrapperInitData[n]=r.initialize?r.initialize.call(this):null}finally{if(this.wrapperInitData[n]===s.OBSERVED_ERROR)try{this.initializeAll
(n+1)}catch(i){}}}},closeAll:function(e){r(this.isInTransaction());for(var t=this.transactionWrappers,n=e;n<t.length;n++){var i,o=t[n],u=this.wrapperInitData[n];try{i=!0,u!==s.OBSERVED_ERROR&&o.close&&o.close.call(this,u),i=!1}finally{if(i)try{this.closeAll(n+1)}catch(a){}}}this.wrapperInitData.length=0}},s={Mixin:i,OBSERVED_ERROR:{}};t.exports=s},{133:133}],102:[function(e,t,n){"use strict";var r={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(e){r.currentScrollLeft=e.x,r.currentScrollTop=e.y}};t.exports=r},{}],103:[function(e,t,n){"use strict";function r(e,t){if(i(null!=t),null==e)return t;var n=Array.isArray(e),r=Array.isArray(t);return n&&r?(e.push.apply(e,t),e):n?(e.push(t),e):r?[e].concat(t):[e,t]}var i=e(133);t.exports=r},{133:133}],104:[function(e,t,n){"use strict";function r(e){for(var t=1,n=0,r=0;r<e.length;r++)t=(t+e.charCodeAt(r))%i,n=(n+t)%i;return t|n<<16}var i=65521;t.exports=r},{}],105:[function(e,t,n){function r(e){return e.replace(i,function(e,t){return t.toUpperCase()})}var i=/-(.)/g;t.exports=r},{}],106:[function(e,t,n){"use strict";function r(e){return i(e.replace(s,"ms-"))}var i=e(105),s=/^-ms-/;t.exports=r},{105:105}],107:[function(e,t,n){function r(e,t){return e&&t?e===t?!0:i(e)?!1:i(t)?r(e,t.parentNode):e.contains?e.contains(t):e.compareDocumentPosition?!!(16&e.compareDocumentPosition(t)):!1:!1}var i=e(137);t.exports=r},{137:137}],108:[function(e,t,n){function r(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}function i(e){return r(e)?Array.isArray(e)?e.slice():s(e):[e]}var s=e(148);t.exports=i},{148:148}],109:[function(e,t,n){"use strict";function r(e){var t=s.createFactory(e),n=i.createClass({tagName:e.toUpperCase(),displayName:"ReactFullPageComponent"+e,componentWillUnmount:function(){o(!1)},render:function(){return t(this.props)}});return n}var i=e(33),s=e(55),o=e(133);t.exports=r},{133:133,33:33,55:55}],110:[function(e,t,n){function r(e){var t=e.match(l);return t&&t[1].toLowerCase()}function i(e,t){var n=f;a(!!f);var i=r(e),s=i&&u(i);if(s){n.innerHTML=s[1]+e+s[2];for(var l=s[0];l--;)n=n.lastChild}else n.innerHTML=e;var c=n.getElementsByTagName("script");c.length&&(a(t),o(c).forEach(t));for(var h=o(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return h}var s=e(21),o=e(108),u=e(125),a=e(133),f=s.canUseDOM?document.createElement("div"):null,l=/^\s*<(\w+)/;t.exports=i},{108:108,125:125,133:133,21:21}],111:[function(e,t,n){"use strict";function r(e,t){var n=null==t||"boolean"==typeof t||""===t;if(n)return"";var r=isNaN(t);return r||0===t||s.hasOwnProperty(e)&&s[e]?""+t:("string"==typeof t&&(t=t.trim()),t+"px")}var i=e(4),s=i.isUnitlessNumber;t.exports=r},{4:4}],112:[function(e,t,n){function r(e){return function(){return e}}function i(){}i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},t.exports=i},{}],113:[function(e,t,n){"use strict";var r={};t.exports=r},{}],114:[function(e,t,n){"use strict";function r(e){return s[e]}function i(e){return(""+e).replace(o,r)}var s={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},o=/[&><"']/g;t.exports=i},{}],115:[function(e,t,n){"use strict";function r(e){return null==e?null:u(e)?e:i.has(e)?s.getNodeFromInstance(e):(o(null==e.render||"function"!=typeof e.render),void o(!1))}var i=(e(39),e(65)),s=e(68),o=e(133),u=e(135);e(150),t.exports=r},{133:133,135:135,150:150,39:39,65:65,68:68}],116:[function(e,t,n){"use strict";function r(e,t,n){var r=e,i=!r.hasOwnProperty(n);i&&null!=t&&(r[n]=t)}function i(e){if(null==e)return e;var t={};return s(e,r,t),t}var s=e(149);e(150),t.exports=i},{149:149,150:150}],117:[function(e,t,n){"use strict";function r(e){try{e.focus()}catch(t){}}t.exports=r},{}],118:[function(e,t,n){"use strict";var r=function(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)};t.exports=r},{}],119:[function(e,t,n){function r(){try{return document.activeElement||document.body}catch(e){return document.body}}t.exports=r},{}],120:[function(e,t,n){"use strict";function r(e){var t,n=e.keyCode;return"charCode"in e?(t=e.charCode,0===t&&13===n&&(t=13)):t=n,t>=32||13===t?t:0}t.exports=r},{}],121:[function(e,t,n){"use strict";function r(e){if(e.key){var t=s[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=i(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?o[e.keyCode]||"Unidentified":""}var i=e(120),s={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};t.exports=r},{120:120}],122:[function(e,t,n){"use strict";function r(e){var t=this,n=t.nativeEvent;if(n.getModifierState)return n.getModifierState(e);var r=s[e];return r?!!n[r]:!1}function i(e){return r}var s={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};t.exports=i},{}],123:[function(e,t,n){"use strict";function r(e){var t=e.target||e.srcElement||window;return 3===t.nodeType?t.parentNode:t}t.exports=r},{}],124:[function(e,t,n){"use strict";function r(e){var t=e&&(i&&e[i]||e[s]);return"function"==typeof t?t:void 0}var i="function"==typeof Symbol&&Symbol.iterator,s="@@iterator";t.exports=r},{}],125:[function(e,t,n){function r(e){return s(!!o),h.hasOwnProperty(e)||(e="*"),u.hasOwnProperty(e)||("*"===e?o.innerHTML="<link />":o.innerHTML="<"+e+"></"+e+">",u[e]=!o.firstChild),u[e]?h[e]:null}var i=e(21),s=e(133),o=i.canUseDOM?document.createElement("div"):null,u={circle:!0,clipPath:!0,defs:!0,ellipse:!0,g:!0,line:!0,linearGradient:!0,path:!0,polygon:!0,polyline:!0,radialGradient:!0,rect:!0,stop:!0,text:!0},a=[1,'<select multiple="true">',"</select>"],f=[1,"<table>","</table>"],l=[3,"<table><tbody><tr>","</tr></tbody></table>"],c=[1,"<svg>","</svg>"],h={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:a,option:a,caption:f,colgroup:f,tbody:f,tfoot:f,thead:f,td:l,th:l,circle:c,clipPath:c,defs:c,ellipse:c,g:c,line:c,linearGradient:c,path:c,polygon:c,polyline:c,radialGradient:c,rect:c,stop:c,text:c};t.exports=r},{133:133,21:21}],126:[function(e,t,n){"use strict";function r(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function i(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function s(e,t){for(var n=r(e),s=0,u=0;n;){if(3===n.nodeType){if(u=s+n.textContent.length,t>=s&&u>=t)return{node:n,offset:t-s};s=u}n=r(i(n))}}t.exports=s},{}],127:[function(e,t,n){"use strict";function r(e){return e?e.nodeType===i?e.documentElement:e.firstChild:null}var i=9;t.exports=r},{}],128:[function(e,t,n){"use strict";function r(){return!s&&i.canUseDOM&&(s="textContent"in document.documentElement?"textContent":"innerText"),s}var i=e(21),s=null;t.exports=r},{21:21}],129:[function(e,t,n){"use strict";function r(e){return e===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}t.exports=r},{}],130:[function(e,t,n){function r(e){return e.replace(i,"-$1").toLowerCase()}var i=/([A-Z])/g;t.exports=r},{}],131:[function(e,t,n){"use strict";function r(e){return i(e).replace(s,"-ms-")}var i=e(130),s=/^ms-/;t.exports=r},{130:130}],132:[function(e,t,n){"use strict";function r(e){return"function"==typeof e&&"undefined"!=typeof e.prototype&&"function"==typeof e.prototype.mountComponent&&"function"==typeof e.prototype.receiveComponent}function i(e,t){var n;if((null===e||e===!1)&&(e=o.emptyElement),"object"==typeof e){var i=e;n=t===i.type&&"string"==typeof i.type?u.createInternalComponent(i):r(i.type)?new i.type(i):new l}else"string"==typeof e||"number"==typeof e?n=u.createInstanceForText(e):f(!1);return n.construct(e),n._mountIndex=0,n._mountImage=null,n}var s=e(37),o=e(57),u=e(71),a=e(27),f=e(133),l=(e(150),function(){});a(l.prototype,s.Mixin,{_instantiateReactComponent:i}),t.exports=i},{133:133,150:150,27:27,37:37,57:57,71:71}],133:[function(e,t,n){"use strict";var r=function(e,t,n,r,i,s,o,u){if(!e){var a;if(void 0===t)a=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var f=[n,r,i,s,o,u],l=0;a=new Error("Invariant Violation: "+t.replace(/%s/g,function(){return f[l++]}))}throw a.framesToPop=1,a}};t.exports=r},{}],134:[function(e,t,n){"use strict";function r(e,t){if(!s.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,r=n in document;if(!r){var u=document.createElement("div");u.setAttribute(n,"return;"),r="function"==typeof u[n]}return!r&&i&&"wheel"===e&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var i,s=e(21);s.canUseDOM&&(i=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),t.exports=r},{21:21}],135:[function(e,t,n){function r(e){return!!e&&("function"==typeof Node?e instanceof Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName)}t.exports=r},{}],136:[function(e,t,n){"use strict";function r(e){return e&&("INPUT"===e.nodeName&&i[e.type]||"TEXTAREA"===e.nodeName)}var i={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};t.exports=r},{}],137:[function(e,t,n){function r(e){return i(e)&&3==e.nodeType}var i=e(135);t.exports=r},{135:135}],138:[function(e,t,n){"use strict";var r=e(133),i=function(e){var t,n={};r(e instanceof Object&&!Array.isArray(e));for(t in e)e.hasOwnProperty(t)&&(n[t]=t);return n};t.exports=i},{133:133}],139:[function(e,t,n){var r=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return t;return null};t.exports=r},{}],140:[function(e,t,n){"use strict";function r(e,t,n){if(!e)return null;var r={};for(var s in e)i.call(e,s)&&(r[s]=t.call(n,e[s],s,e));return r}var i=Object.prototype.hasOwnProperty;t.exports=r},{}],141:[function(e,t,n){"use strict";function r(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}t.exports=r},{}],142:[function(e,t,n){"use strict";function r(e){return s(i.isValidElement(e)),e}var i=e(55),s=e(133);t.exports=r},{133:133,55:55}],143:[function(e,t,n){"use strict";function r(e){return'"'+i(e)+'"'}var i=e(114);t.exports=r},{114:114}],144:[function(e,t,n){"use strict";var r=e(21),i=/^[ \r\n\t\f]/,s=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,o=function(e,t){e.innerHTML=t};if("undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction&&(o=function(e,t){MSApp.execUnsafeLocalFunction(function(){e.innerHTML=t})}),r.canUseDOM){var u=document.createElement("div");u.innerHTML=" ",""===u.innerHTML&&(o=function(e,t){if(e.parentNode&&e.parentNode.replaceChild(e,e),i.test(t)||"<"===t[0]&&s.test(t)){e.innerHTML="﻿"+t;var n=e.firstChild;1===n.data.length?e.removeChild(n):n.deleteData(0,1)}else e.innerHTML=t})}t.exports=o},{21:21}],145:[function(e,t,n){"use strict";var r=e(21),i=e(114),s=e(144),o=function(e,t){e.textContent=t};r.canUseDOM&&("textContent"in document.documentElement||(o=function(e,t){s(e,i(t))})),t.exports=o},{114:114,144:144,21:21}],146:[function(e,t,n){"use strict";function r(e,t){if(e===t)return!0;var n;for(n in e)if(e.hasOwnProperty(n)&&(!t.hasOwnProperty(n)||e[n]!==t[n]))return!1;for(n in t)if(t.hasOwnProperty(n)&&!e.hasOwnProperty(n))return!1;return!0}t.exports=r},{}],147:[function(e,t,n){"use strict";function r(e,t){if(null!=e&&null!=t){var n=typeof e,r=typeof t;if("string"===n||"number"===n)return"string"===r||"number"===r;if("object"===r&&e.type===t.type&&e.key===t.key){var i=e._owner===t._owner;return i}}return!1}e(150),t.exports=r},{150:150}],148:[function(e,t,n){function r(e){var t=e.length;if(i(!Array.isArray(e)&&("object"==typeof e||"function"==typeof e)),i("number"==typeof t),i(0===t||t-1 in e),e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(n){}for(var r=Array(t),s=0;t>s;s++)r[s]=e[s];return r}var i=e(133);t.exports=r},{133:133}],149:[function(e,t,n){"use strict";function r(e){return m[e]}function i(e,t){return e&&null!=e.key?o(e.key):t.toString(36)}function s(e){return(""+e).replace(g,r)}function o(e){return"$"+s(e)}function u(e,t,n,r,s){var a=typeof e;if(("undefined"===a||"boolean"===a)&&(e=null),null===e||"string"===a||"number"===a||f.isValidElement(e))return r(s,e,""===t?d+i(e,0):t,n),1;var c,m,g,y=0;if(Array.isArray(e))for(var b=0;b<e.length;b++)c=e[b],m=(""!==t?t+v:d)+i(c,b),g=n+y,y+=u(c,m,g,r,s);else{var w=h(e);if(w){var E,S=w.call(e);if(w!==e.entries)for(var x=0;!(E=S.next()).done;)c=E.value,m=(""!==t?t+v:d)+i(c,x++),g=n+y,y+=u(c,m,g,r,s);else for(;!(E=S.next()).done;){var T=E.value;T&&(c=T[1],m=(""!==t?t+v:d)+o(T[0])+v+i(c,0),g=n+y,y+=u(c,m,g,r,s))}}else if("object"===a){p(1!==e.nodeType);var N=l.extract(e);for(var C in N)N.hasOwnProperty(C)&&(c=N[C],m=(""!==t?t+v:d)+o(C)+v+i(c,0),g=n+y,y+=u(c,m,g,r,s))}}return y}function a(e,t,n){return null==e?0:u(e,"",0,t,n)}var f=e(55),l=e(61),c=e(64),h=e(124),p=e(133),d=(e(150),c.SEPARATOR),v=":",m={"=":"=0",".":"=1",":":"=2"},g=/[=.:]/g;t.exports=a},{124:124,133:133,150:150,55:55,61:61,64:64}],150:[function(e,t,n){"use strict";var r=e(112),i=r;t.exports=i},{112:112}]},{},[1])(1)}),function(e){typeof define=="function"&&define.amd?define(["jquery"],e):typeof exports=="object"?e(require("jquery")):e(jQuery)}(function(e){var t=function(){if(e&&e.fn&&e.fn.select2&&e.fn.select2.amd)var t=e.fn.select2.amd;var t;return function(){if(!t||!t.requirejs){t?n=t:t={};var e,n,r;(function(t){function v(e,t){return h.call(e,t)}function m(e,t){var n,r,i,s,o,u,a,f,c,h,p,v=t&&t.split("/"),m=l.map,g=m&&m["*"]||{};if(e&&e.charAt(0)===".")if(t){e=e.split("/"),o=e.length-1,l.nodeIdCompat&&d.test(e[o])&&(e[o]=e[o].replace(d,"")),e=v.slice(0,v.length-1).concat(e);for(c=0;c<e.length;c+=1){p=e[c];if(p===".")e.splice(c,1),c-=1;else if(p===".."){if(c===1&&(e[2]===".."||e[0]===".."))break;c>0&&(e.splice(c-1,2),c-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((v||g)&&m){n=e.split("/");for(c=n.length;c>0;c-=1){r=n.slice(0,c).join("/");if(v)for(h=v.length;h>0;h-=1){i=m[v.slice(0,h).join("/")];if(i){i=i[r];if(i){s=i,u=c;break}}}if(s)break;!a&&g&&g[r]&&(a=g[r],f=c)}!s&&a&&(s=a,u=f),s&&(n.splice(0,u,s),e=n.join("/"))}return e}function g(e,n){return function(){var r=p.call(arguments,0);return typeof r[0]!="string"&&r.length===1&&r.push(null),s.apply(t,r.concat([e,n]))}}function y(e){return function(t){return m(t,e)}}function b(e){return function(t){a[e]=t}}function w(e){if(v(f,e)){var n=f[e];delete f[e],c[e]=!0,i.apply(t,n)}if(!v(a,e)&&!v(c,e))throw new Error("No "+e);return a[e]}function E(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function S(e){return function(){return l&&l.config&&l.config[e]||{}}}var i,s,o,u,a={},f={},l={},c={},h=Object.prototype.hasOwnProperty,p=[].slice,d=/\.js$/;o=function(e,t){var n,r=E(e),i=r[0];return e=r[1],i&&(i=m(i,t),n=w(i)),i?n&&n.normalize?e=n.normalize(e,y(t)):e=m(e,t):(e=m(e,t),r=E(e),i=r[0],e=r[1],i&&(n=w(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},u={require:function(e){return g(e)},exports:function(e){var t=a[e];return typeof t!="undefined"?t:a[e]={}},module:function(e){return{id:e,uri:"",exports:a[e],config:S(e)}}},i=function(e,n,r,i){var s,l,h,p,d,m=[],y=typeof r,E;i=i||e;if(y==="undefined"||y==="function"){n=!n.length&&r.length?["require","exports","module"]:n;for(d=0;d<n.length;d+=1){p=o(n[d],i),l=p.f;if(l==="require")m[d]=u.require(e);else if(l==="exports")m[d]=u.exports(e),E=!0;else if(l==="module")s=m[d]=u.module(e);else if(v(a,l)||v(f,l)||v(c,l))m[d]=w(l);else{if(!p.p)throw new Error(e+" missing "+l);p.p.load(p.n,g(i,!0),b(l),{}),m[d]=a[l]}}h=r?r.apply(a[e],m):undefined;if(e)if(s&&s.exports!==t&&s.exports!==a[e])a[e]=s.exports;else if(h!==t||!E)a[e]=h}else e&&(a[e]=r)},e=n=s=function(e,n,r,a,f){if(typeof e=="string")return u[e]?u[e](n):w(o(e,n).f);if(!e.splice){l=e,l.deps&&s(l.deps,l.callback);if(!n)return;n.splice?(e=n,n=r,r=null):e=t}return n=n||function(){},typeof r=="function"&&(r=a,a=f),a?i(t,e,n,r):setTimeout(function(){i(t,e,n,r)},4),s},s.config=function(e){return s(e)},e._defined=a,r=function(e,t,n){if(typeof e!="string")throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),!v(a,e)&&!v(f,e)&&(f[e]=[e,t,n])},r.amd={jQuery:!0}})(),t.requirejs=e,t.require=n,t.define=r}}(),t.define("almond",function(){}),t.define("jquery",[],function(){var t=e||$;return t==null&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),t}),t.define("select2/utils",["jquery"],function(e){function n(e){var t=e.prototype,n=[];for(var r in t){var i=t[r];if(typeof i!="function")continue;if(r==="constructor")continue;n.push(r)}return n}var t={};t.Extend=function(e,t){function r(){this.constructor=e}var n={}.hasOwnProperty;for(var i in t)n.call(t,i)&&(e[i]=t[i]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},t.Decorate=function(e,t){function s(){var n=Array.prototype.unshift,r=t.prototype.constructor.length,i=e.prototype.constructor;r>0&&(n.call(arguments,e.prototype.constructor),i=t.prototype.constructor),i.apply(this,arguments)}function o(){this.constructor=s}var r=n(t),i=n(e);t.displayName=e.displayName,s.prototype=new o;for(var u=0;u<i.length;u++){var a=i[u];s.prototype[a]=e.prototype[a]}var f=function(e){var n=function(){};e in s.prototype&&(n=s.prototype[e]);var r=t.prototype[e];return function(){var e=Array.prototype.unshift;return e.call(arguments,n),r.apply(this,arguments)}};for(var l=0;l<r.length;l++){var c=r[l];s.prototype[c]=f(c)}return s};var r=function(){this.listeners={}};return r.prototype.on=function(e,t){this.listeners=this.listeners||{},e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t]},r.prototype.trigger=function(e){var t=Array.prototype.slice;this.listeners=this.listeners||{},e in this.listeners&&this.invoke(this.listeners[e],t.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},r.prototype.invoke=function(e,t){for(var n=0,r=e.length;n<r;n++)e[n].apply(this,t)},t.Observable=r,t.generateChars=function(e){var t="";for(var n=0;n<e;n++){var r=Math.floor(Math.random()*36);t+=r.toString(36)}return t},t.bind=function(e,t){return function(){e.apply(t,arguments)}},t._convertData=function(e){for(var t in e){var n=t.split("-"),r=e;if(n.length===1)continue;for(var i=0;i<n.length;i++){var s=n[i];s=s.substring(0,1).toLowerCase()+s.substring(1),s in r||(r[s]={}),i==n.length-1&&(r[s]=e[t]),r=r[s]}delete e[t]}return e},t.hasScroll=function(t,n){var r=e(n),i=n.style.overflowX,s=n.style.overflowY;return i!==s||s!=="hidden"&&s!=="visible"?i==="scroll"||s==="scroll"?!0:r.innerHeight()<n.scrollHeight||r.innerWidth()<n.scrollWidth:!1},t.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return typeof e!="string"?e:String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})},t.appendMany=function(t,n){if(e.fn.jquery.substr(0,3)==="1.7"){var r=e();e.map(n,function(e){r=r.add(e)}),n=r}t.append(n)},t}),t.define("select2/results",["jquery","./utils"],function(e,t){function n(e,t,r){this.$element=e,this.data=r,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var t=e('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&t.attr("aria-multiselectable","true"),this.$results=t,t},n.prototype.clear=function(){this.$results.empty()},n.prototype.displayMessage=function(t){var n=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var r=e('<li role="treeitem" aria-live="assertive" class="select2-results__option"></li>'),i=this.options.get("translations").get(t.message);r.append(n(i(t.args))),r[0].className+=" select2-results__message",this.$results.append(r)},n.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},n.prototype.append=function(e){this.hideLoading();var t=[];if(e.results==null||e.results.length===0){this.$results.children().length===0&&this.trigger("results:message",{message:"noResults"});return}e.results=this.sort(e.results);for(var n=0;n<e.results.length;n++){var r=e.results[n],i=this.option(r);t.push(i)}this.$results.append(t)},n.prototype.position=function(e,t){var n=t.find(".select2-results");n.append(e)},n.prototype.sort=function(e){var t=this.options.get("sorter");return t(e)},n.prototype.setClasses=function(){var t=this;this.data.current(function(n){var r=e.map(n,function(e){return e.id.toString()}),i=t.$results.find(".select2-results__option[aria-selected]");i.each(function(){var t=e(this),n=e.data(this,"data"),i=""+n.id;n.element!=null&&n.element.selected||n.element==null&&e.inArray(i,r)>-1?t.attr("aria-selected","true"):t.attr("aria-selected","false")});var s=i.filter("[aria-selected=true]");s.length>0?s.first().trigger("mouseenter"):i.first().trigger("mouseenter")})},n.prototype.showLoading=function(e){this.hideLoading();var t=this.options.get("translations").get("searching"),n={disabled:!0,loading:!0,text:t(e)},r=this.option(n);r.className+=" loading-results",this.$results.prepend(r)},n.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},n.prototype.option=function(t){var n=document.createElement("li");n.className="select2-results__option";var r={role:"treeitem","aria-selected":"false"};t.disabled&&(delete r["aria-selected"],r["aria-disabled"]="true"),t.id==null&&delete r["aria-selected"],t._resultId!=null&&(n.id=t._resultId),t.title&&(n.title=t.title),t.children&&(r.role="group",r["aria-label"]=t.text,delete r["aria-selected"]);for(var i in r){var s=r[i];n.setAttribute(i,s)}if(t.children){var o=e(n),u=document.createElement("strong");u.className="select2-results__group";var a=e(u);this.template(t,u);var f=[];for(var l=0;l<t.children.length;l++){var c=t.children[l],h=this.option(c);f.push(h)}var p=e("<ul></ul>",{"class":"select2-results__options select2-results__options--nested"});p.append(f),o.append(u),o.append(p)}else this.template(t,n);return e.data(n,"data",t),n},n.prototype.bind=function(t,n){var r=this,i=t.id+"-results";this.$results.attr("id",i),t.on("results:all",function(e){r.clear(),r.append(e.data),t.isOpen()&&r.setClasses()}),t.on("results:append",function(e){r.append(e.data),t.isOpen()&&r.setClasses()}),t.on("query",function(e){r.hideMessages(),r.showLoading(e)}),t.on("select",function(){if(!t.isOpen())return;r.setClasses()}),t.on("unselect",function(){if(!t.isOpen())return;r.setClasses()}),t.on("open",function(){r.$results.attr("aria-expanded","true"),r.$results.attr("aria-hidden","false"),r.setClasses(),r.ensureHighlightVisible()}),t.on("close",function(){r.$results.attr("aria-expanded","false"),r.$results.attr("aria-hidden","true"),r.$results.removeAttr("aria-activedescendant")}),t.on("results:toggle",function(){var e=r.getHighlightedResults();if(e.length===0)return;e.trigger("mouseup")}),t.on("results:select",function(){var e=r.getHighlightedResults();if(e.length===0)return;var t=e.data("data");e.attr("aria-selected")=="true"?r.trigger("close",{}):r.trigger("select",{data:t})}),t.on("results:previous",function(){var e=r.getHighlightedResults(),t=r.$results.find("[aria-selected]"),n=t.index(e);if(n===0)return;var i=n-1;e.length===0&&(i=0);var s=t.eq(i);s.trigger("mouseenter");var o=r.$results.offset().top,u=s.offset().top,a=r.$results.scrollTop()+(u-o);i===0?r.$results.scrollTop(0):u-o<0&&r.$results.scrollTop(a)}),t.on("results:next",function(){var e=r.getHighlightedResults(),t=r.$results.find("[aria-selected]"),n=t.index(e),i=n+1;if(i>=t.length)return;var s=t.eq(i);s.trigger("mouseenter");var o=r.$results.offset().top+r.$results.outerHeight(!1),u=s.offset().top+s.outerHeight(!1),a=r.$results.scrollTop()+u-o;i===0?r.$results.scrollTop(0):u>o&&r.$results.scrollTop(a)}),t.on("results:focus",function(e){e.element.addClass("select2-results__option--highlighted")}),t.on("results:message",function(e){r.displayMessage(e)}),e.fn.mousewheel&&this.$results.on("mousewheel",function(e){var t=r.$results.scrollTop(),n=r.$results.get(0).scrollHeight-t+e.deltaY,i=e.deltaY>0&&t-e.deltaY<=0,s=e.deltaY<0&&n<=r.$results.height();i?(r.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):s&&(r.$results.scrollTop(r.$results.get(0).scrollHeight-r.$results.height()),e.preventDefault(),e.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(t){var n=e(this),i=n.data("data");if(n.attr("aria-selected")==="true"){r.options.get("multiple")?r.trigger("unselect",{originalEvent:t,data:i}):r.trigger("close",{});return}r.trigger("select",{originalEvent:t,data:i})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(t){var n=e(this).data("data");r.getHighlightedResults().removeClass("select2-results__option--highlighted"),r.trigger("results:focus",{data:n,element:e(this)})})},n.prototype.getHighlightedResults=function(){var e=this.$results.find(".select2-results__option--highlighted");return e},n.prototype.destroy=function(){this.$results.remove()},n.prototype.ensureHighlightVisible=function(){var e=this.getHighlightedResults();if(e.length===0)return;var t=this.$results.find("[aria-selected]"),n=t.index(e),r=this.$results.offset().top,i=e.offset().top,s=this.$results.scrollTop()+(i-r),o=i-r;s-=e.outerHeight(!1)*2,n<=2?this.$results.scrollTop(0):(o>this.$results.outerHeight()||o<0)&&this.$results.scrollTop(s)},n.prototype.template=function(t,n){var r=this.options.get("templateResult"),i=this.options.get("escapeMarkup"),s=r(t,n);s==null?n.style.display="none":typeof s=="string"?n.innerHTML=i(s):e(n).append(s)},n}),t.define("select2/keys",[],function(){var e={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46};return e}),t.define("select2/selection/base",["jquery","../utils","../keys"],function(e,t,n){function r(e,t){this.$element=e,this.options=t,r.__super__.constructor.call(this)}return t.Extend(r,t.Observable),r.prototype.render=function(){var t=e('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,this.$element.data("old-tabindex")!=null?this._tabindex=this.$element.data("old-tabindex"):this.$element.attr("tabindex")!=null&&(this._tabindex=this.$element.attr("tabindex")),t.attr("title",this.$element.attr("title")),t.attr("tabindex",this._tabindex),this.$selection=t,t},r.prototype.bind=function(e,t){var r=this,i=e.id+"-container",s=e.id+"-results";this.container=e,this.$selection.on("focus",function(e){r.trigger("focus",e)}),this.$selection.on("blur",function(e){r._handleBlur(e)}),this.$selection.on("keydown",function(e){r.trigger("keypress",e),e.which===n.SPACE&&e.preventDefault()}),e.on("results:focus",function(e){r.$selection.attr("aria-activedescendant",e.data._resultId)}),e.on("selection:update",function(e){r.update(e.data)}),e.on("open",function(){r.$selection.attr("aria-expanded","true"),r.$selection.attr("aria-owns",s),r._attachCloseHandler(e)}),e.on("close",function(){r.$selection.attr("aria-expanded","false"),r.$selection.removeAttr("aria-activedescendant"),r.$selection.removeAttr("aria-owns"),r.$selection.focus(),r._detachCloseHandler(e)}),e.on("enable",function(){r.$selection.attr("tabindex",r._tabindex)}),e.on("disable",function(){r.$selection.attr("tabindex","-1")})},r.prototype._handleBlur=function(t){var n=this;window.setTimeout(function(){if(document.activeElement==n.$selection[0]||e.contains(n.$selection[0],document.activeElement))return;n.trigger("blur",t)},1)},r.prototype._attachCloseHandler=function(t){var n=this;e(document.body).on("mousedown.select2."+t.id,function(t){var n=e(t.target),r=n.closest(".select2"),i=e(".select2.select2-container--open");i.each(function(){var t=e(this);if(this==r[0])return;var n=t.data("element");n.select2("close")})})},r.prototype._detachCloseHandler=function(t){e(document.body).off("mousedown.select2."+t.id)},r.prototype.position=function(e,t){var n=t.find(".selection");n.append(e)},r.prototype.destroy=function(){this._detachCloseHandler(this.container)},r.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")},r}),t.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(e,t,n,r){function i(){i.__super__.constructor.apply(this,arguments)}return n.Extend(i,t),i.prototype.render=function(){var e=i.__super__.render.call(this);return e.addClass("select2-selection--single"),e.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),e},i.prototype.bind=function(e,t){var n=this;i.__super__.bind.apply(this,arguments);var r=e.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",r),this.$selection.attr("aria-labelledby",r),this.$selection.on("mousedown",function(e){if(e.which!==1)return;n.trigger("toggle",{originalEvent:e})}),this.$selection.on("focus",function(e){}),this.$selection.on("blur",function(e){}),e.on("selection:update",function(e){n.update(e.data)})},i.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},i.prototype.display=function(e,t){var n=this.options.get("templateSelection"),r=this.options.get("escapeMarkup");return r(n(e,t))},i.prototype.selectionContainer=function(){return e("<span></span>")},i.prototype.update=function(e){if(e.length===0){this.clear();return}var t=e[0],n=this.$selection.find(".select2-selection__rendered"),r=this.display(t,n);n.empty().append(r),n.prop("title",t.title||t.text)},i}),t.define("select2/selection/multiple",["jquery","./base","../utils"],function(e,t,n){function r(e,t){r.__super__.constructor.apply(this,arguments)}return n.Extend(r,t),r.prototype.render=function(){var e=r.__super__.render.call(this);return e.addClass("select2-selection--multiple"),e.html('<ul class="select2-selection__rendered"></ul>'),e},r.prototype.bind=function(t,n){var i=this;r.__super__.bind.apply(this,arguments),this.$selection.on("click",function(e){i.trigger("toggle",{originalEvent:e})}),this.$selection.on("click",".select2-selection__choice__remove",function(t){if(i.options.get("disabled"))return;var n=e(this),r=n.parent(),s=r.data("data");i.trigger("unselect",{originalEvent:t,data:s})})},r.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},r.prototype.display=function(e,t){var n=this.options.get("templateSelection"),r=this.options.get("escapeMarkup");return r(n(e,t))},r.prototype.selectionContainer=function(){var t=e('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>');return t},r.prototype.update=function(e){this.clear();if(e.length===0)return;var t=[];for(var r=0;r<e.length;r++){var i=e[r],s=this.selectionContainer(),o=this.display(i,s);s.append(o),s.prop("title",i.title||i.text),s.data("data",i),t.push(s)}var u=this.$selection.find(".select2-selection__rendered");n.appendMany(u,t)},r}),t.define("select2/selection/placeholder",["../utils"],function(e){function t(e,t,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n)}return t.prototype.normalizePlaceholder=function(e,t){return typeof t=="string"&&(t={id:"",text:t}),t},t.prototype.createPlaceholder=function(e,t){var n=this.selectionContainer();return n.html(this.display(t)),n.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),n},t.prototype.update=function(e,t){var n=t.length==1&&t[0].id!=this.placeholder.id,r=t.length>1;if(r||n)return e.call(this,t);this.clear();var i=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(i)},t}),t.define("select2/selection/allowClear",["jquery","../keys"],function(e,t){function n(){}
return n.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),this.placeholder==null&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(e){r._handleClear(e)}),t.on("keypress",function(e){r._handleKeyboardClear(e,t)})},n.prototype._handleClear=function(e,t){if(this.options.get("disabled"))return;var n=this.$selection.find(".select2-selection__clear");if(n.length===0)return;t.stopPropagation();var r=n.data("data");for(var i=0;i<r.length;i++){var s={data:r[i]};this.trigger("unselect",s);if(s.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle",{})},n.prototype._handleKeyboardClear=function(e,n,r){if(r.isOpen())return;(n.which==t.DELETE||n.which==t.BACKSPACE)&&this._handleClear(n)},n.prototype.update=function(t,n){t.call(this,n);if(this.$selection.find(".select2-selection__placeholder").length>0||n.length===0)return;var r=e('<span class="select2-selection__clear">&times;</span>');r.data("data",n),this.$selection.find(".select2-selection__rendered").prepend(r)},n}),t.define("select2/selection/search",["jquery","../utils","../keys"],function(e,t,n){function r(e,t,n){e.call(this,t,n)}return r.prototype.render=function(t){var n=e('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');this.$searchContainer=n,this.$search=n.find("input");var r=t.call(this);return this._transferTabIndex(),r},r.prototype.bind=function(e,t,r){var i=this;e.call(this,t,r),t.on("open",function(){i.$search.trigger("focus")}),t.on("close",function(){i.$search.val(""),i.$search.removeAttr("aria-activedescendant"),i.$search.trigger("focus")}),t.on("enable",function(){i.$search.prop("disabled",!1),i._transferTabIndex()}),t.on("disable",function(){i.$search.prop("disabled",!0)}),t.on("focus",function(e){i.$search.trigger("focus")}),t.on("results:focus",function(e){i.$search.attr("aria-activedescendant",e.id)}),this.$selection.on("focusin",".select2-search--inline",function(e){i.trigger("focus",e)}),this.$selection.on("focusout",".select2-search--inline",function(e){i._handleBlur(e)}),this.$selection.on("keydown",".select2-search--inline",function(e){e.stopPropagation(),i.trigger("keypress",e),i._keyUpPrevented=e.isDefaultPrevented();var t=e.which;if(t===n.BACKSPACE&&i.$search.val()===""){var r=i.$searchContainer.prev(".select2-selection__choice");if(r.length>0){var s=r.data("data");i.searchRemoveChoice(s),e.preventDefault()}}});var s=document.documentMode,o=s&&s<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(e){if(o){i.$selection.off("input.search input.searchcheck");return}i.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(e){if(o&&e.type==="input"){i.$selection.off("input.search input.searchcheck");return}var t=e.which;if(t==n.SHIFT||t==n.CTRL||t==n.ALT)return;if(t==n.TAB)return;i.handleSearch(e)})},r.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},r.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)},r.prototype.update=function(e,t){var n=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),e.call(this,t),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),n&&this.$search.focus()},r.prototype.handleSearch=function(){this.resizeSearch();if(!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},r.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(t.text),this.handleSearch()},r.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="";if(this.$search.attr("placeholder")!=="")e=this.$selection.find(".select2-selection__rendered").innerWidth();else{var t=this.$search.val().length+1;e=t*.75+"em"}this.$search.css("width",e)},r}),t.define("select2/selection/eventRelay",["jquery"],function(e){function t(){}return t.prototype.bind=function(t,n,r){var i=this,s=["open","opening","close","closing","select","selecting","unselect","unselecting"],o=["opening","closing","selecting","unselecting"];t.call(this,n,r),n.on("*",function(t,n){if(e.inArray(t,s)===-1)return;n=n||{};var r=e.Event("select2:"+t,{params:n});i.$element.trigger(r);if(e.inArray(t,o)===-1)return;n.prevented=r.isDefaultPrevented()})},t}),t.define("select2/translation",["jquery","require"],function(e,t){function n(e){this.dict=e||{}}return n.prototype.all=function(){return this.dict},n.prototype.get=function(e){return this.dict[e]},n.prototype.extend=function(t){this.dict=e.extend({},t.all(),this.dict)},n._cache={},n.loadPath=function(e){if(!(e in n._cache)){var r=t(e);n._cache[e]=r}return new n(n._cache[e])},n}),t.define("select2/diacritics",[],function(){var e={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"};return e}),t.define("select2/data/base",["../utils"],function(e){function t(e,n){t.__super__.constructor.call(this)}return e.Extend(t,e.Observable),t.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")},t.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")},t.prototype.bind=function(e,t){},t.prototype.destroy=function(){},t.prototype.generateResultId=function(t,n){var r=t.id+"-result-";return r+=e.generateChars(4),n.id!=null?r+="-"+n.id.toString():r+="-"+e.generateChars(4),r},t}),t.define("select2/data/select",["./base","../utils","jquery"],function(e,t,n){function r(e,t){this.$element=e,this.options=t,r.__super__.constructor.call(this)}return t.Extend(r,e),r.prototype.current=function(e){var t=[],r=this;this.$element.find(":selected").each(function(){var e=n(this),i=r.item(e);t.push(i)}),e(t)},r.prototype.select=function(e){var t=this;e.selected=!0;if(n(e.element).is("option")){e.element.selected=!0,this.$element.trigger("change");return}if(this.$element.prop("multiple"))this.current(function(r){var i=[];e=[e],e.push.apply(e,r);for(var s=0;s<e.length;s++){var o=e[s].id;n.inArray(o,i)===-1&&i.push(o)}t.$element.val(i),t.$element.trigger("change")});else{var r=e.id;this.$element.val(r),this.$element.trigger("change")}},r.prototype.unselect=function(e){var t=this;if(!this.$element.prop("multiple"))return;e.selected=!1;if(n(e.element).is("option")){e.element.selected=!1,this.$element.trigger("change");return}this.current(function(r){var i=[];for(var s=0;s<r.length;s++){var o=r[s].id;o!==e.id&&n.inArray(o,i)===-1&&i.push(o)}t.$element.val(i),t.$element.trigger("change")})},r.prototype.bind=function(e,t){var n=this;this.container=e,e.on("select",function(e){n.select(e.data)}),e.on("unselect",function(e){n.unselect(e.data)})},r.prototype.destroy=function(){this.$element.find("*").each(function(){n.removeData(this,"data")})},r.prototype.query=function(e,t){var r=[],i=this,s=this.$element.children();s.each(function(){var t=n(this);if(!t.is("option")&&!t.is("optgroup"))return;var s=i.item(t),o=i.matches(e,s);o!==null&&r.push(o)}),t({results:r})},r.prototype.addOptions=function(e){t.appendMany(this.$element,e)},r.prototype.option=function(e){var t;e.children?(t=document.createElement("optgroup"),t.label=e.text):(t=document.createElement("option"),t.textContent!==undefined?t.textContent=e.text:t.innerText=e.text),e.id&&(t.value=e.id),e.disabled&&(t.disabled=!0),e.selected&&(t.selected=!0),e.title&&(t.title=e.title);var r=n(t),i=this._normalizeItem(e);return i.element=t,n.data(t,"data",i),r},r.prototype.item=function(e){var t={};t=n.data(e[0],"data");if(t!=null)return t;if(e.is("option"))t={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")};else if(e.is("optgroup")){t={text:e.prop("label"),children:[],title:e.prop("title")};var r=e.children("option"),i=[];for(var s=0;s<r.length;s++){var o=n(r[s]),u=this.item(o);i.push(u)}t.children=i}return t=this._normalizeItem(t),t.element=e[0],n.data(e[0],"data",t),t},r.prototype._normalizeItem=function(e){n.isPlainObject(e)||(e={id:e,text:e}),e=n.extend({},{text:""},e);var t={selected:!1,disabled:!1};return e.id!=null&&(e.id=e.id.toString()),e.text!=null&&(e.text=e.text.toString()),e._resultId==null&&e.id&&this.container!=null&&(e._resultId=this.generateResultId(this.container,e)),n.extend({},t,e)},r.prototype.matches=function(e,t){var n=this.options.get("matcher");return n(e,t)},r}),t.define("select2/data/array",["./select","../utils","jquery"],function(e,t,n){function r(e,t){var n=t.get("data")||[];r.__super__.constructor.call(this,e,t),this.addOptions(this.convertToOptions(n))}return t.Extend(r,e),r.prototype.select=function(e){var t=this.$element.find("option").filter(function(t,n){return n.value==e.id.toString()});t.length===0&&(t=this.option(e),this.addOptions(t)),r.__super__.select.call(this,e)},r.prototype.convertToOptions=function(e){function u(e){return function(){return n(this).val()==e.id}}var r=this,i=this.$element.find("option"),s=i.map(function(){return r.item(n(this)).id}).get(),o=[];for(var a=0;a<e.length;a++){var f=this._normalizeItem(e[a]);if(n.inArray(f.id,s)>=0){var l=i.filter(u(f)),c=this.item(l),h=n.extend(!0,{},f,c),p=this.option(h);l.replaceWith(p);continue}var d=this.option(f);if(f.children){var v=this.convertToOptions(f.children);t.appendMany(d,v)}o.push(d)}return o},r}),t.define("select2/data/ajax",["./array","../utils","jquery"],function(e,t,n){function r(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax")),this.ajaxOptions.processResults!=null&&(this.processResults=this.ajaxOptions.processResults),r.__super__.constructor.call(this,e,t)}return t.Extend(r,e),r.prototype._applyDefaults=function(e){var t={data:function(e){return n.extend({},e,{q:e.term})},transport:function(e,t,r){var i=n.ajax(e);return i.then(t),i.fail(r),i}};return n.extend({},t,e,!0)},r.prototype.processResults=function(e){return e},r.prototype.query=function(e,t){function o(){var r=s.transport(s,function(r){var s=i.processResults(r,e);i.options.get("debug")&&window.console&&console.error&&(!s||!s.results||!n.isArray(s.results))&&console.error("Select2: The AJAX results did not return an array in the `results` key of the response."),t(s)},function(){i.trigger("results:message",{message:"errorLoading"})});i._request=r}var r=[],i=this;this._request!=null&&(n.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var s=n.extend({type:"GET"},this.ajaxOptions);typeof s.url=="function"&&(s.url=s.url.call(this.$element,e)),typeof s.data=="function"&&(s.data=s.data.call(this.$element,e)),this.ajaxOptions.delay&&e.term!==""?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(o,this.ajaxOptions.delay)):o()},r}),t.define("select2/data/tags",["jquery"],function(e){function t(t,n,r){var i=r.get("tags"),s=r.get("createTag");s!==undefined&&(this.createTag=s);var o=r.get("insertTag");o!==undefined&&(this.insertTag=o),t.call(this,n,r);if(e.isArray(i))for(var u=0;u<i.length;u++){var a=i[u],f=this._normalizeItem(a),l=this.option(f);this.$element.append(l)}}return t.prototype.query=function(e,t,n){function i(e,s){var o=e.results;for(var u=0;u<o.length;u++){var a=o[u],f=a.children!=null&&!i({results:a.children},!0),l=a.text===t.term;if(l||f){if(s)return!1;e.data=o,n(e);return}}if(s)return!0;var c=r.createTag(t);if(c!=null){var h=r.option(c);h.attr("data-select2-tag",!0),r.addOptions([h]),r.insertTag(o,c)}e.results=o,n(e)}var r=this;this._removeOldTags();if(t.term==null||t.page!=null){e.call(this,t,n);return}e.call(this,t,i)},t.prototype.createTag=function(t,n){var r=e.trim(n.term);return r===""?null:{id:r,text:r}},t.prototype.insertTag=function(e,t,n){t.unshift(n)},t.prototype._removeOldTags=function(t){var n=this._lastTag,r=this.$element.find("option[data-select2-tag]");r.each(function(){if(this.selected)return;e(this).remove()})},t}),t.define("select2/data/tokenizer",["jquery"],function(e){function t(e,t,n){var r=n.get("tokenizer");r!==undefined&&(this.tokenizer=r),e.call(this,t,n)}return t.prototype.bind=function(e,t,n){e.call(this,t,n),this.$search=t.dropdown.$search||t.selection.$search||n.find(".select2-search__field")},t.prototype.query=function(e,t,n){function i(e){r.trigger("select",{data:e})}var r=this;t.term=t.term||"";var s=this.tokenizer(t,this.options,i);s.term!==t.term&&(this.$search.length&&(this.$search.val(s.term),this.$search.focus()),t.term=s.term),e.call(this,t,n)},t.prototype.tokenizer=function(t,n,r,i){var s=r.get("tokenSeparators")||[],o=n.term,u=0,a=this.createTag||function(e){return{id:e.term,text:e.term}};while(u<o.length){var f=o[u];if(e.inArray(f,s)===-1){u++;continue}var l=o.substr(0,u),c=e.extend({},n,{term:l}),h=a(c);if(h==null){u++;continue}i(h),o=o.substr(u+1)||"",u=0}return{term:o}},t}),t.define("select2/data/minimumInputLength",[],function(){function e(e,t,n){this.minimumInputLength=n.get("minimumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"";if(t.term.length<this.minimumInputLength){this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}});return}e.call(this,t,n)},e}),t.define("select2/data/maximumInputLength",[],function(){function e(e,t,n){this.maximumInputLength=n.get("maximumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"";if(this.maximumInputLength>0&&t.term.length>this.maximumInputLength){this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}});return}e.call(this,t,n)},e}),t.define("select2/data/maximumSelectionLength",[],function(){function e(e,t,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){var r=this;this.current(function(i){var s=i!=null?i.length:0;if(r.maximumSelectionLength>0&&s>=r.maximumSelectionLength){r.trigger("results:message",{message:"maximumSelected",args:{maximum:r.maximumSelectionLength}});return}e.call(r,t,n)})},e}),t.define("select2/dropdown",["jquery","./utils"],function(e,t){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var t=e('<span class="select2-dropdown"><span class="select2-results"></span></span>');return t.attr("dir",this.options.get("dir")),this.$dropdown=t,t},n.prototype.bind=function(){},n.prototype.position=function(e,t){},n.prototype.destroy=function(){this.$dropdown.remove()},n}),t.define("select2/dropdown/search",["jquery","../utils"],function(e,t){function n(){}return n.prototype.render=function(t){var n=t.call(this),r=e('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=r,this.$search=r.find("input"),n.prepend(r),n},n.prototype.bind=function(t,n,r){var i=this;t.call(this,n,r),this.$search.on("keydown",function(e){i.trigger("keypress",e),i._keyUpPrevented=e.isDefaultPrevented()}),this.$search.on("input",function(t){e(this).off("keyup")}),this.$search.on("keyup input",function(e){i.handleSearch(e)}),n.on("open",function(){i.$search.attr("tabindex",0),i.$search.focus(),window.setTimeout(function(){i.$search.focus()},0)}),n.on("close",function(){i.$search.attr("tabindex",-1),i.$search.val("")}),n.on("results:all",function(e){if(e.query.term==null||e.query.term===""){var t=i.showSearch(e);t?i.$searchContainer.removeClass("select2-search--hide"):i.$searchContainer.addClass("select2-search--hide")}})},n.prototype.handleSearch=function(e){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},n.prototype.showSearch=function(e,t){return!0},n}),t.define("select2/dropdown/hidePlaceholder",[],function(){function e(e,t,n,r){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n,r)}return e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results),e.call(this,t)},e.prototype.normalizePlaceholder=function(e,t){return typeof t=="string"&&(t={id:"",text:t}),t},e.prototype.removePlaceholder=function(e,t){var n=t.slice(0);for(var r=t.length-1;r>=0;r--){var i=t[r];this.placeholder.id===i.id&&n.splice(r,1)}return n},e}),t.define("select2/dropdown/infiniteScroll",["jquery"],function(e){function t(e,t,n,r){this.lastParams={},e.call(this,t,n,r),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return t.prototype.append=function(e,t){this.$loadingMore.remove(),this.loading=!1,e.call(this,t),this.showLoadingMore(t)&&this.$results.append(this.$loadingMore)},t.prototype.bind=function(t,n,r){var i=this;t.call(this,n,r),n.on("query",function(e){i.lastParams=e,i.loading=!0}),n.on("query:append",function(e){i.lastParams=e,i.loading=!0}),this.$results.on("scroll",function(){var t=e.contains(document.documentElement,i.$loadingMore[0]);if(i.loading||!t)return;var n=i.$results.offset().top+i.$results.outerHeight(!1),r=i.$loadingMore.offset().top+i.$loadingMore.outerHeight(!1);n+50>=r&&i.loadMore()})},t.prototype.loadMore=function(){this.loading=!0;var t=e.extend({},{page:1},this.lastParams);t.page++,this.trigger("query:append",t)},t.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more},t.prototype.createLoadingMore=function(){var t=e('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>'),n=this.options.get("translations").get("loadingMore");return t.html(n(this.lastParams)),t},t}),t.define("select2/dropdown/attachBody",["jquery","../utils"],function(e,t){function n(t,n,r){this.$dropdownParent=r.get("dropdownParent")||e(document.body),t.call(this,n,r)}return n.prototype.bind=function(e,t,n){var r=this,i=!1;e.call(this,t,n),t.on("open",function(){r._showDropdown(),r._attachPositioningHandler(t),i||(i=!0,t.on("results:all",function(){r._positionDropdown(),r._resizeDropdown()}),t.on("results:append",function(){r._positionDropdown(),r._resizeDropdown()}))}),t.on("close",function(){r._hideDropdown(),r._detachPositioningHandler(t)}),this.$dropdownContainer.on("mousedown",function(e){e.stopPropagation()})},n.prototype.destroy=function(e){e.call(this),this.$dropdownContainer.remove()},n.prototype.position=function(e,t,n){t.attr("class",n.attr("class")),t.removeClass("select2"),t.addClass("select2-container--open"),t.css({position:"absolute",top:-999999}),this.$container=n},n.prototype.render=function(t){var n=e("<span></span>"),r=t.call(this);return n.append(r),this.$dropdownContainer=n,n},n.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()},n.prototype._attachPositioningHandler=function(n,r){var i=this,s="scroll.select2."+r.id,o="resize.select2."+r.id,u="orientationchange.select2."+r.id,a=this.$container.parents().filter(t.hasScroll);a.each(function(){e(this).data("select2-scroll-position",{x:e(this).scrollLeft(),y:e(this).scrollTop()})}),a.on(s,function(t){var n=e(this).data("select2-scroll-position");e(this).scrollTop(n.y)}),e(window).on(s+" "+o+" "+u,function(e){i._positionDropdown(),i._resizeDropdown()})},n.prototype._detachPositioningHandler=function(n,r){var i="scroll.select2."+r.id,s="resize.select2."+r.id,o="orientationchange.select2."+r.id,u=this.$container.parents().filter(t.hasScroll);u.off(i),e(window).off(i+" "+s+" "+o)},n.prototype._positionDropdown=function(){var t=e(window),n=this.$dropdown.hasClass("select2-dropdown--above"),r=this.$dropdown.hasClass("select2-dropdown--below"),i=null,s=this.$container.offset();s.bottom=s.top+this.$container.outerHeight(!1);var o={height:this.$container.outerHeight(!1)};o.top=s.top,o.bottom=s.top+o.height;var u={height:this.$dropdown.outerHeight(!1)},a={top:t.scrollTop(),bottom:t.scrollTop()+t.height()},f=a.top<s.top-u.height,l=a.bottom>s.bottom+u.height,c={left:s.left,top:o.bottom},h=this.$dropdownParent;h.css("position")==="static"&&(h=h.offsetParent());var p=h.offset();c.top-=p.top,c.left-=p.left,!n&&!r&&(i="below"),!l&&f&&!n?i="above":!f&&l&&n&&(i="below");if(i=="above"||n&&i!=="below")c.top=o.top-u.height;i!=null&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+i),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+i)),this.$dropdownContainer.css(c)},n.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(e.minWidth=e.width,e.width="auto"),this.$dropdown.css(e)},n.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},n}),t.define("select2/dropdown/minimumResultsForSearch",[],function(){function e(t){var n=0;for(var r=0;r<t.length;r++){var i=t[r];i.children?n+=e(i.children):n++}return n}function t(e,t,n,r){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=Infinity),e.call(this,t,n,r)}return t.prototype.showSearch=function(t,n){return e(n.data.results)<this.minimumResultsForSearch?!1:t.call(this,n)},t}),t.define("select2/dropdown/selectOnClose",[],function(){function e(){}return e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),t.on("close",function(){r._handleSelectOnClose()})},e.prototype._handleSelectOnClose=function(){var e=this.getHighlightedResults();if(e.length<1)return;var t=e.data("data");if(t.element!=null&&t.element.selected||t.element==null&&t.selected)return;this.trigger("select",{data:t})},e}),t.define("select2/dropdown/closeOnSelect",[],function(){function e(){}return e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),t.on("select",function(e){r._selectTriggered(e)}),t.on("unselect",function(e){r._selectTriggered(e)})},e.prototype._selectTriggered=function(e,t){var n=t.originalEvent;if(n&&n.ctrlKey)return;this.trigger("close",{})},e}),t.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum,n="Please delete "+t+" character";return t!=1&&(n+="s"),n},inputTooShort:function(e){var t=e.minimum-e.input.length,n="Please enter "+t+" or more characters";return n},loadingMore:function(){return"Loading more results…"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";return e.maximum!=1&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching…"}}}),t.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L){function A(){this.reset()}A.prototype.apply=function(c){c=e.extend(!0,{},this.defaults,c);if(c.dataAdapter==null){c.ajax!=null?c.dataAdapter=d:c.data!=null?c.dataAdapter=p:c.dataAdapter=h,c.minimumInputLength>0&&(c.dataAdapter=f.Decorate(c.dataAdapter,g)),c.maximumInputLength>0&&(c.dataAdapter=f.Decorate(c.dataAdapter,y)),c.maximumSelectionLength>0&&(c.dataAdapter=f.Decorate(c.dataAdapter,b)),c.tags&&(c.dataAdapter=f.Decorate(c.dataAdapter,v));if(c.tokenSeparators!=null||c.tokenizer!=null)c.dataAdapter=f.Decorate(c.dataAdapter,m);if(c.query!=null){var L=t(c.amdBase+"compat/query");c.dataAdapter=f.Decorate(c.dataAdapter,L)}if(c.initSelection!=null){var A=t(c.amdBase+"compat/initSelection");c.dataAdapter=f.Decorate(c.dataAdapter,A)}}c.resultsAdapter==null&&(c.resultsAdapter=n,c.ajax!=null&&(c.resultsAdapter=f.Decorate(c.resultsAdapter,x)),c.placeholder!=null&&(c.resultsAdapter=f.Decorate(c.resultsAdapter,S)),c.selectOnClose&&(c.resultsAdapter=f.Decorate(c.resultsAdapter,C)));if(c.dropdownAdapter==null){if(c.multiple)c.dropdownAdapter=w;else{var O=f.Decorate(w,E);c.dropdownAdapter=O}c.minimumResultsForSearch!==0&&(c.dropdownAdapter=f.Decorate(c.dropdownAdapter,N)),c.closeOnSelect&&(c.dropdownAdapter=f.Decorate(c.dropdownAdapter,k));if(c.dropdownCssClass!=null||c.dropdownCss!=null||c.adaptDropdownCssClass!=null){var M=t(c.amdBase+"compat/dropdownCss");c.dropdownAdapter=f.Decorate(c.dropdownAdapter,M)}c.dropdownAdapter=f.Decorate(c.dropdownAdapter,T)}if(c.selectionAdapter==null){c.multiple?c.selectionAdapter=i:c.selectionAdapter=r,c.placeholder!=null&&(c.selectionAdapter=f.Decorate(c.selectionAdapter,s)),c.allowClear&&(c.selectionAdapter=f.Decorate(c.selectionAdapter,o)),c.multiple&&(c.selectionAdapter=f.Decorate(c.selectionAdapter,u));if(c.containerCssClass!=null||c.containerCss!=null||c.adaptContainerCssClass!=null){var _=t(c.amdBase+"compat/containerCss");c.selectionAdapter=f.Decorate(c.selectionAdapter,_)}c.selectionAdapter=f.Decorate(c.selectionAdapter,a)}if(typeof c.language=="string")if(c.language.indexOf("-")>0){var D=c.language.split("-"),P=D[0];c.language=[c.language,P]}else c.language=[c.language];if(e.isArray(c.language)){var H=new l;c.language.push("en");var B=c.language;for(var j=0;j<B.length;j++){var F=B[j],I={};try{I=l.loadPath(F)}catch(q){try{F=this.defaults.amdLanguageBase+F,I=l.loadPath(F)}catch(R){c.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+
F+'" could not be '+"automatically loaded. A fallback will be used instead.");continue}}H.extend(I)}c.translations=H}else{var U=l.loadPath(this.defaults.amdLanguageBase+"en"),z=new l(c.language);z.extend(U),c.translations=z}return c},A.prototype.reset=function(){function t(e){function t(e){return c[e]||e}return e.replace(/[^\u0000-\u007E]/g,t)}function n(r,i){if(e.trim(r.term)==="")return i;if(i.children&&i.children.length>0){var s=e.extend(!0,{},i);for(var o=i.children.length-1;o>=0;o--){var u=i.children[o],a=n(r,u);a==null&&s.children.splice(o,1)}return s.children.length>0?s:n(r,s)}var f=t(i.text).toUpperCase(),l=t(r.term).toUpperCase();return f.indexOf(l)>-1?i:null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:f.escapeMarkup,language:L,matcher:n,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}},A.prototype.set=function(t,n){var r=e.camelCase(t),i={};i[r]=n;var s=f._convertData(i);e.extend(this.defaults,s)};var O=new A;return O}),t.define("select2/options",["require","jquery","./defaults","./utils"],function(e,t,n,r){function i(t,i){this.options=t,i!=null&&this.fromElement(i),this.options=n.apply(this.options);if(i&&i.is("input")){var s=e(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=r.Decorate(this.options.dataAdapter,s)}}return i.prototype.fromElement=function(e){var n=["select2"];this.options.multiple==null&&(this.options.multiple=e.prop("multiple")),this.options.disabled==null&&(this.options.disabled=e.prop("disabled")),this.options.language==null&&(e.prop("lang")?this.options.language=e.prop("lang").toLowerCase():e.closest("[lang]").prop("lang")&&(this.options.language=e.closest("[lang]").prop("lang"))),this.options.dir==null&&(e.prop("dir")?this.options.dir=e.prop("dir"):e.closest("[dir]").prop("dir")?this.options.dir=e.closest("[dir]").prop("dir"):this.options.dir="ltr"),e.prop("disabled",this.options.disabled),e.prop("multiple",this.options.multiple),e.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),e.data("data",e.data("select2Tags")),e.data("tags",!0)),e.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),e.attr("ajax--url",e.data("ajaxUrl")),e.data("ajax--url",e.data("ajaxUrl")));var i={};t.fn.jquery&&t.fn.jquery.substr(0,2)=="1."&&e[0].dataset?i=t.extend(!0,{},e[0].dataset,e.data()):i=e.data();var s=t.extend(!0,{},i);s=r._convertData(s);for(var o in s){if(t.inArray(o,n)>-1)continue;t.isPlainObject(this.options[o])?t.extend(this.options[o],s[o]):this.options[o]=s[o]}return this},i.prototype.get=function(e){return this.options[e]},i.prototype.set=function(e,t){this.options[e]=t},i}),t.define("select2/core",["jquery","./options","./utils","./keys"],function(e,t,n,r){var i=function(e,n){e.data("select2")!=null&&e.data("select2").destroy(),this.$element=e,this.id=this._generateId(e),n=n||{},this.options=new t(n,e),i.__super__.constructor.call(this);var r=e.attr("tabindex")||0;e.data("old-tabindex",r),e.attr("tabindex","-1");var s=this.options.get("dataAdapter");this.dataAdapter=new s(e,this.options);var o=this.render();this._placeContainer(o);var u=this.options.get("selectionAdapter");this.selection=new u(e,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,o);var a=this.options.get("dropdownAdapter");this.dropdown=new a(e,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,o);var f=this.options.get("resultsAdapter");this.results=new f(e,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var l=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(e){l.trigger("selection:update",{data:e})}),e.addClass("select2-hidden-accessible"),e.attr("aria-hidden","true"),this._syncAttributes(),e.data("select2",this)};return n.Extend(i,n.Observable),i.prototype._generateId=function(e){var t="";return e.attr("id")!=null?t=e.attr("id"):e.attr("name")!=null?t=e.attr("name")+"-"+n.generateChars(2):t=n.generateChars(4),t=t.replace(/(:|\.|\[|\]|,)/g,""),t="select2-"+t,t},i.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));t!=null&&e.css("width",t)},i.prototype._resolveWidth=function(e,t){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if(t=="resolve"){var r=this._resolveWidth(e,"style");return r!=null?r:this._resolveWidth(e,"element")}if(t=="element"){var i=e.outerWidth(!1);return i<=0?"auto":i+"px"}if(t=="style"){var s=e.attr("style");if(typeof s!="string")return null;var o=s.split(";");for(var u=0,a=o.length;u<a;u+=1){var f=o[u].replace(/\s/g,""),l=f.match(n);if(l!==null&&l.length>=1)return l[1]}return null}return t},i.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},i.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",function(){t.dataAdapter.current(function(e){t.trigger("selection:update",{data:e})})}),this._sync=n.bind(this._syncAttributes,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._sync);var r=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;r!=null?(this._observer=new r(function(n){e.each(n,t._sync)}),this._observer.observe(this.$element[0],{attributes:!0,subtree:!1})):this.$element[0].addEventListener&&this.$element[0].addEventListener("DOMAttrModified",t._sync,!1)},i.prototype._registerDataEvents=function(){var e=this;this.dataAdapter.on("*",function(t,n){e.trigger(t,n)})},i.prototype._registerSelectionEvents=function(){var t=this,n=["toggle","focus"];this.selection.on("toggle",function(){t.toggleDropdown()}),this.selection.on("focus",function(e){t.focus(e)}),this.selection.on("*",function(r,i){if(e.inArray(r,n)!==-1)return;t.trigger(r,i)})},i.prototype._registerDropdownEvents=function(){var e=this;this.dropdown.on("*",function(t,n){e.trigger(t,n)})},i.prototype._registerResultsEvents=function(){var e=this;this.results.on("*",function(t,n){e.trigger(t,n)})},i.prototype._registerEvents=function(){var e=this;this.on("open",function(){e.$container.addClass("select2-container--open")}),this.on("close",function(){e.$container.removeClass("select2-container--open")}),this.on("enable",function(){e.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){e.$container.addClass("select2-container--disabled")}),this.on("blur",function(){e.$container.removeClass("select2-container--focus")}),this.on("query",function(t){e.isOpen()||e.trigger("open",{}),this.dataAdapter.query(t,function(n){e.trigger("results:all",{data:n,query:t})})}),this.on("query:append",function(t){this.dataAdapter.query(t,function(n){e.trigger("results:append",{data:n,query:t})})}),this.on("keypress",function(t){var n=t.which;if(e.isOpen())n===r.ESC||n===r.TAB||n===r.UP&&t.altKey?(e.close(),t.preventDefault()):n===r.ENTER?(e.trigger("results:select",{}),t.preventDefault()):n===r.SPACE&&t.ctrlKey?(e.trigger("results:toggle",{}),t.preventDefault()):n===r.UP?(e.trigger("results:previous",{}),t.preventDefault()):n===r.DOWN&&(e.trigger("results:next",{}),t.preventDefault());else if(n===r.ENTER||n===r.SPACE||n===r.DOWN&&t.altKey)e.open(),t.preventDefault()})},i.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},i.prototype.trigger=function(e,t){var n=i.__super__.trigger,r={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};t===undefined&&(t={});if(e in r){var s=r[e],o={prevented:!1,name:e,args:t};n.call(this,s,o);if(o.prevented){t.prevented=!0;return}}n.call(this,e,t)},i.prototype.toggleDropdown=function(){if(this.options.get("disabled"))return;this.isOpen()?this.close():this.open()},i.prototype.open=function(){if(this.isOpen())return;this.trigger("query",{})},i.prototype.close=function(){if(!this.isOpen())return;this.trigger("close",{})},i.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},i.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},i.prototype.focus=function(e){if(this.hasFocus())return;this.$container.addClass("select2-container--focus"),this.trigger("focus",{})},i.prototype.enable=function(e){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.');if(e==null||e.length===0)e=[!0];var t=!e[0];this.$element.prop("disabled",t)},i.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var e=[];return this.dataAdapter.current(function(t){e=t}),e},i.prototype.val=function(t){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.');if(t==null||t.length===0)return this.$element.val();var n=t[0];e.isArray(n)&&(n=e.map(n,function(e){return e.toString()})),this.$element.val(n).trigger("change")},i.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._sync),this._observer!=null?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&this.$element[0].removeEventListener("DOMAttrModified",this._sync,!1),this._sync=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},i.prototype.render=function(){var t=e('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return t.attr("dir",this.options.get("dir")),this.$container=t,this.$container.addClass("select2-container--"+this.options.get("theme")),t.data("element",this.$element),t},i}),t.define("jquery-mousewheel",["jquery"],function(e){return e}),t.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults"],function(e,t,n,r){if(e.fn.select2==null){var i=["open","close","destroy"];e.fn.select2=function(t){t=t||{};if(typeof t=="object")return this.each(function(){var r=e.extend(!0,{},t),i=new n(e(this),r)}),this;if(typeof t=="string"){var r;return this.each(function(){var n=e(this).data("select2");n==null&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an "+"element that is not using Select2.");var i=Array.prototype.slice.call(arguments,1);r=n[t].apply(n,i)}),e.inArray(t,i)>-1?this:r}throw new Error("Invalid arguments for Select2: "+t)}}return e.fn.select2.defaults==null&&(e.fn.select2.defaults=r),n}),{define:t.define,require:t.require}}(),n=t.require("jquery.select2");return e.fn.select2.amd=t,n}),function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;return e.define("select2/i18n/zh-CN",[],function(){return{errorLoading:function(){return"无法载入结果。"},inputTooLong:function(e){var t=e.input.length-e.maximum,n="请删除"+t+"个字符";return n},inputTooShort:function(e){var t=e.minimum-e.input.length,n="请再输入至少"+t+"个字符";return n},loadingMore:function(){return"载入更多结果…"},maximumSelected:function(e){var t="最多只能选择"+e.maximum+"个项目";return t},noResults:function(){return"未找到结果"},searching:function(){return"搜索中…"}}}),{define:e.define,require:e.require}}(),function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;return e.define("select2/i18n/zh-TW",[],function(){return{inputTooLong:function(e){var t=e.input.length-e.maximum,n="請刪掉"+t+"個字元";return n},inputTooShort:function(e){var t=e.minimum-e.input.length,n="請再輸入"+t+"個字元";return n},loadingMore:function(){return"載入中…"},maximumSelected:function(e){var t="你只能選擇最多"+e.maximum+"項";return t},noResults:function(){return"沒有找到相符的項目"},searching:function(){return"搜尋中…"}}}),{define:e.define,require:e.require}}(),function(document,window){function handleTurbolinksEvents(){var e,t;$?e=function(e,t){$(document).on(e,t)}:e=function(e,t){document.addEventListener(e,t)},Turbolinks.EVENTS?t=Turbolinks.EVENTS.BEFORE_UNLOAD:(t="page:receive",Turbolinks.pagesCached(0),window.ReactRailsUJS.RAILS_ENV_DEVELOPMENT&&console.warn("The Turbolinks cache has been disabled (Turbolinks >= 2.4.0 is recommended). See https://github.com/reactjs/react-rails/issues/87 for more information.")),e("page:change",function(){window.ReactRailsUJS.mountComponents()}),e(t,function(){window.ReactRailsUJS.unmountComponents()})}function handleNativeEvents(){$?($(function(){window.ReactRailsUJS.mountComponents()}),$(window).unload(function(){window.ReactRailsUJS.unmountComponents()})):(document.addEventListener("DOMContentLoaded",function(){window.ReactRailsUJS.mountComponents()}),window.addEventListener("unload",function(){window.ReactRailsUJS.unmountComponents()}))}var $=typeof window.jQuery!="undefined"&&window.jQuery;window.ReactRailsUJS={CLASS_NAME_ATTR:"data-react-class",PROPS_ATTR:"data-react-props",RAILS_ENV_DEVELOPMENT:!1,findDOMNodes:function(e){var t;if(typeof e=="undefined")var t="["+window.ReactRailsUJS.CLASS_NAME_ATTR+"]";else var t=e+" ["+window.ReactRailsUJS.CLASS_NAME_ATTR+"]";return $?$(t):document.querySelectorAll(t)},mountComponents:function(searchSelector){var nodes=window.ReactRailsUJS.findDOMNodes(searchSelector);for(var i=0;i<nodes.length;++i){var node=nodes[i],className=node.getAttribute(window.ReactRailsUJS.CLASS_NAME_ATTR),constructor=window[className]||eval.call(window,className),propsJson=node.getAttribute(window.ReactRailsUJS.PROPS_ATTR),props=propsJson&&JSON.parse(propsJson);React.render(React.createElement(constructor,props),node)}},unmountComponents:function(e){var t=window.ReactRailsUJS.findDOMNodes(e);for(var n=0;n<t.length;++n){var r=t[n];React.unmountComponentAtNode(r)}}},typeof Turbolinks!="undefined"&&Turbolinks.supported?handleTurbolinksEvents():handleNativeEvents()}(document,window),function(){this.FieldPlaceholderInsertion=React.createClass({displayName:"FieldPlaceholderInsertion",propTypes:{labels:React.PropTypes.array,textAreaSelector:React.PropTypes.string,hideInsertAllField:React.PropTypes.bool.isRequired},getDefaultProps:function(){return{hideInsertAllField:!1}},insertAllFields:function(){var e;return e=_.map(this.props.labels,function(e){return e+"：$("+e+")"}),this._insertContent(e)},insertFieldPlaceholer:function(e){var t;return t="$("+$(e.target).text()+")",this._insertContent(t)},buildCkEditorPlaceholder:function(e){return"<span contenteditable='false' data-cke-widget-wrapper='1' data-cke-filter='off' class='cke_widget_wrapper cke_widget_inline cke_widget_selected'>"+("<span data-widget='placeholder' class='cke_placeholder cke_widget_element'>"+e+"</span>")+"</span>"},formatContentForRichEditor:function(e){var t;return _.isArray(e)?function(){var n,r,i;i=[];for(n=0,r=e.length;n<r;n++)t=e[n],i.push(t.replace(GD.PLACEHOLDER_REPLACE_REGEX,this.buildCkEditorPlaceholder));return i}.call(this).join("<br />"):e.replace(GD.PLACEHOLDER_REPLACE_REGEX,this.buildCkEditorPlaceholder)},_insertContent:function(e){var t,n;return n=$(this.props.textAreaSelector),t=CKEDITOR.instances[n.attr("id")],n.is(".rich-editor")&&t?t.insertHtml(this.formatContentForRichEditor(e)):(_.isArray(e)&&(e=e.join("\n")),n.val()===""?n.val(e):n.insertAtCursor(e),autosize.update(n)),n.click(),$(".tooltipstered:visible").tooltipster("hide")},render:function(){return this.props.hideInsertAllField?React.createElement("div",{className:"all-fields"},React.createElement("ul",{className:"field-placeholder-selector"},this.props.labels.map(function(e,t){return React.createElement("li",{onClick:this.insertFieldPlaceholer,key:t},e)}.bind(this)))):React.createElement("div",{className:"all-fields"},React.createElement("ul",{className:"field-placeholder-selector"},React.createElement("li",{className:"insert-all-fields",onClick:this.insertAllFields},"一键插入全部表单字段"),React.createElement("li",{className:"separator"}),this.props.labels.map(function(e,t){return React.createElement("li",{onClick:this.insertFieldPlaceholer,key:t},e)}.bind(this))))}})}.call(this),function(){var e,t,n;this.FormCloseRule=React.createClass({displayName:"FormCloseRule",propTypes:{closed:React.PropTypes.bool,byTimeRange:React.PropTypes.bool.isRequired,toggleUrl:React.PropTypes.string.isRequired,showCancelButton:React.PropTypes.bool,startDate:React.PropTypes.string.isRequired,startHour:React.PropTypes.number.isRequired,startMinute:React.PropTypes.number.isRequired,endDate:React.PropTypes.string.isRequired,endHour:React.PropTypes.number.isRequired,endMinute:React.PropTypes.number.isRequired,entryLimit:React.PropTypes.number.isRequired,hasDailyReapeat:React.PropTypes.bool.isRequired,dailyReapeatPeriods:React.PropTypes.array.isRequired,formStatusText:React.PropTypes.string.isRequired,formStatusTextContainerSelector:React.PropTypes.string,toggleAnimation:React.PropTypes.bool,needFormStatusToggle:React.PropTypes.bool,settingPath:React.PropTypes.string.isRequired},getDefaultProps:function(){return{showCancelButton:!1,toggleAnimation:!0,closed:!1,needFormStatusToggle:!0}},getInitialState:function(){return{closed:this.props.closed,byTimeRange:this.props.byTimeRange,formStatusText:this.props.formStatusText,valid:!0}},toggleFormStatus:function(){return this.setState({closed:!this.state.closed})},updateFormCloseRuleValidateStatus:function(){return $("[data-react-class='FormCloseRule'] .error").length>0?this.setState({valid:!1}):this.setState({valid:!0})},formStatusText:function(){return{__html:this.state.formStatusText}},submitHandler:function(){var e;return e=this.props.settingPath.replace("setting","data_collection_status"),$("#form_close_rule_setting_form").one("ajax:success",function(t){return function(){return $.get(e,function(e){t.setState({formStatusText:e});if(t.props.formStatusTextContainerSelector)return $(t.props.formStatusTextContainerSelector).html(e)})}}(this))},renderFormStatusToogle:function(){var e;e=(this.state.closed?"status-closed":"")+" content-sub-section";if(this.props.needFormStatusToggle)return React.createElement("div",{className:e},React.createElement(GdSwitchery,{checked:!this.state.closed,toggleFormStatus:this.toggleFormStatus,toggleUrl:this.props.toggleUrl}))},getFormStatusNotificationClass:function(){return(this.state.closed&&this.props.needFormStatusToggle?"gd-hide":"")+" form-status-container content-sub-section"},getSubmitFieldClass:function(){return(this.state.closed&&this.props.needFormStatusToggle?"gd-hide":"")+" submit-field content-sub-section"},helpDocumentTooltip:function(e){var t;return t=GD.helpDocumentJson[e]||{},React.createElement("i",{className:"help-document-tooltip gd-icon-help-circle-o","data-id":e,"data-title":t.title,"data-content":t.content,"data-hyperlink_text":t.hyperlink_text,"data-hyperlink_text_url":t.hyperlink_text_url})},render:function(){return React.createElement("div",{className:"content-section"},React.createElement("div",{className:"section-header"},React.createElement("span",{className:"title"},"表单开启/停止",this.helpDocumentTooltip("help_doc_form_close_open"))),React.createElement("div",{className:"section-body"},React.createElement("form",{className:"need-ajax-flash",action:this.props.settingPath,acceptCharset:"UTF-8","data-remote":"true",method:"post",onSubmit:this.submitHandler,id:"form_close_rule_setting_form"},React.createElement("input",{type:"hidden",name:"utf8",value:"✓"}),React.createElement("input",{type:"hidden",name:"_method",value:"patch"}),this.renderFormStatusToogle(),React.createElement("div",{className:this.getFormStatusNotificationClass()},React.createElement("div",{className:"switch-toggle-notification form-status-notification","data-message":'{"notice":"表单收集数据已开启"}'}),React.createElement("span",{className:"label label-warning status-text",dangerouslySetInnerHTML:this.formStatusText()}),React.createElement("div",{className:"controls close-rules"},React.createElement(FormOpenTimeSetting,{byTimeRange:this.state.byTimeRange,startDate:this.props.startDate,endDate:this.props.endDate,startHour:this.props.startHour,endHour:this.props.endHour,startMinute:this.props.startMinute,endMinute:this.props.endMinute,toggleAnimation:this.props.toggleAnimation,updateFormCloseRuleValidateStatus:this.updateFormCloseRuleValidateStatus,helpDocumentTooltip:this.helpDocumentTooltip}),React.createElement(FormEntryLimitSetting,{entryLimit:this.props.entryLimit,toggleAnimation:this.props.toggleAnimation,helpDocumentTooltip:this.helpDocumentTooltip}),React.createElement(FormDaliyRepeatSetting,{hasDailyReapeat:this.props.hasDailyReapeat,dailyReapeatPeriods:this.props.dailyReapeatPeriods,toggleAnimation:this.props.toggleAnimation,updateFormCloseRuleValidateStatus:this.updateFormCloseRuleValidateStatus,helpDocumentTooltip:this.helpDocumentTooltip}))),React.createElement("div",{className:this.getSubmitFieldClass()},React.createElement("input",{type:"submit",name:"commit",value:"保存设置",className:"gd-btn gd-btn-primary",disabled:!this.state.valid,"data-disable-with":"保存中..."}),React.createElement("input",{type:"button",name:"cancel",value:"取消","data-dismiss":"tooltipster",className:this.props.showCancelButton?"gd-btn gd-btn-info":"gd-btn gd-btn-info hide"})))))}}),n={propTypes:{toggleAnimation:React.PropTypes.bool},getDefaultProps:function(){return{toggleAnimation:!0}},componentDidMount:function(){var e;return e=$(this.getDOMNode()),e.find(".toggle-config").on("click",function(t){return function(){return t.props.toggleAnimation?e.find(".config").slideToggle():e.find(".config").toggle()}}(this))}},e={avaliableHourOpthion:function(){var e,t;return e=function(){var e,n;n=[];for(t=e=0;e<=23;t=++e)n.push(this.zeroPadding(t));return n}.call(this),e.map(function(e,t){return React.createElement("option",{value:e,key:t},e)})},avaliableMinuteOpthion:function(e){var t,n;return t=function(){var t,r,i;i=[];for(n=t=0,r=e;t<=55;n=t+=r)i.push(this.zeroPadding(n));return i}.call(this),t.map(function(e,t){return React.createElement("option",{value:e,key:t},e)})},zeroPadding:function(e){return"string"==typeof e?e:e<10?"0"+e:""+e}},t={propTypes:{updateFormCloseRuleValidateStatus:React.PropTypes.func.isRequired},validateOnTimePeriod:function(e,t,n,r){var i;return i=new GD.TimePeriod(e),r.find(".error").remove(),r.find(".error-border").removeClass("error-border"),i.isValid()||(t.addClass("error-border"),n.append($("<div class='error'>"+i.errorMessage+"</div>"))),this.props.updateFormCloseRuleValidateStatus(i.isValid())}},this.FormOpenTimeSetting=React.createClass({displayName:"FormOpenTimeSetting",propTypes:{byTimeRange:React.PropTypes.bool.isRequired,startDate:React.PropTypes.string.isRequired,startHour:React.PropTypes.number.isRequired,startMinute:React.PropTypes.number.isRequired,endDate:React.PropTypes.string.isRequired,endHour:React.PropTypes.number.isRequired,endMinute:React.PropTypes.number.isRequired,helpDocumentTooltip:React.PropTypes.func.isRequired},mixins:[n,e,t],validateByTimeRangeCloseRule:function(e){var t,n,r,i,s;t={},s=["start_date","start_hour","start_minute","end_date","end_hour","end_minute"];for(n=0,i=s.length;n<i;n++)r=s[n],t[r]=$("[name='form_setting[close_rules][ByTimeRangeCloseRule]["+r+"]']").val();return this.validateOnTimePeriod(t,e,e.parents(".date-wrapper"),e.parents(".date-wrapper").parent())},componentDidMount:function(){var e,t,n,r;return e=$(".by-time-range-setting"),GD.initDatePicker(e),n=e.find(".start-date"),t=e.find(".end-date"),r={language:"zh-CN",format:"yyyy-mm-dd",autoclose:!0,orientation:"auto left"},n.datepicker(r).on("changeDate",function(e){return function(r){return e.validateByTimeRangeCloseRule(n),t.datepicker("setStartDate",r.date)}}(this)),t.datepicker($.extend(r,{startDate:this.props.startDate})).on("changeDate",function(e){return function(n){return e.validateByTimeRangeCloseRule(t)}}(this))},validateTimePeriod:function(e){return this.validateByTimeRangeCloseRule($(e.target))},componentWillUnmount:function(){return $(this.refs.byTimeRangeCheckBox.getDOMNode()).off("click")},render:function(){return React.createElement("div",{className:"by-time-range-setting close-rule-group-item"},React.createElement("label",{className:"checkbox inline-block"},React.createElement("input",{type:"checkbox",name:"form_setting[enabled_close_rules][]",value:"ByTimeRangeCloseRule",ref:"byTimeRangeCheckBox",defaultChecked:this.props.byTimeRange,className:"toggle-config with-impact-on-tooltip-size"}),"设定开启/停止时间"),this.props.helpDocumentTooltip("help_doc_form_by_time_close_rule"),React.createElement("br",null),React.createElement("div",{className:this.props.byTimeRange?"config":"gd-hide config",ref:"byTimeRangeConfig"},React.createElement("div",{className:"date-wrapper"},React.createElement("label",null,"开始时间"),React.createElement("input",{type:"date",name:"form_setting[close_rules][ByTimeRangeCloseRule][start_date]",id:"form_setting_close_rules_ByTimeRangeCloseRule_start_date",className:"input_date start-date with-impact-on-tooltip-size gd-input-thin",ref:"startDate",defaultValue:this.props.startDate}),React.createElement("select",{id:"date_hour",name:"form_setting[close_rules][ByTimeRangeCloseRule][start_hour]",className:"gd-input-xsmall gd-input-thin",defaultValue:this.zeroPadding(this.props.startHour),onChange:this.validateTimePeriod},this.avaliableHourOpthion()),React.createElement("span",{className:"time-separator"},":"),React.createElement("select",{id:"date_minute",name:"form_setting[close_rules][ByTimeRangeCloseRule][start_minute]",className:"gd-input-xsmall gd-input-thin",defaultValue:this.zeroPadding(this.props.startMinute),onChange:this.validateTimePeriod},this.avaliableMinuteOpthion(5))),React.createElement("div",{className:"date-wrapper"},React.createElement("label",null,"停止时间"),React.createElement("input",{type:"date",name:"form_setting[close_rules][ByTimeRangeCloseRule][end_date]",i:!0,d:"form_setting_close_rules_ByTimeRangeCloseRule_end_date",className:"input_date end-date gd-input-thin",ref:"endDate",defaultValue:this.props.endDate}),React.createElement("select",{id:"date_hour",name:"form_setting[close_rules][ByTimeRangeCloseRule][end_hour]",className:"gd-input-xsmall gd-input-thin",defaultValue:this.zeroPadding(this.props.endHour),onChange:this.validateTimePeriod},this.avaliableHourOpthion()),React.createElement("span",{className:"time-separator"},":"),React.createElement("select",{id:"date_minute",name:"form_setting[close_rules][ByTimeRangeCloseRule][end_minute]",className:"gd-input-xsmall gd-input-thin",defaultValue:this.zeroPadding(this.props.endMinute),onChange:this.validateTimePeriod},this.avaliableMinuteOpthion(5)))))}}),this.FormEntryLimitSetting=React.createClass({displayName:"FormEntryLimitSetting",propTypes:{entryLimit:React.PropTypes.number.isRequired,helpDocumentTooltip:React.PropTypes.func.isRequired},mixins:[n],render:function(){return React.createElement("div",{className:"close-rule-group-item"},React.createElement("label",{className:"checkbox inline-block"},React.createElement("input",{type:"checkbox",name:"form_setting[enabled_close_rules][]",id:"form_setting_enabled_close_rules_",value:"ByEntriesCloseRule","data-role":"close_rule",defaultChecked:this.props.entryLimit!=0,className:"toggle-config with-impact-on-tooltip-size"}),"设定数据量上限"),this.props.helpDocumentTooltip("help_doc_form_by_entry_limit_close_rule"),React.createElement("br",null),React.createElement("div",{className:this.props.entryLimit!=0?"config":"gd-hide config"},"最多接受",React.createElement("input",{type:"number",name:"form_setting[close_rules][ByEntriesCloseRule][limit]",id:"form_setting_close_rules_ByEntriesCloseRule_limit",className:"gd-input-xsmall gd-input-thin",defaultValue:this.props.entryLimit}),"条数据"))}}),this.FormDaliyRepeatSetting=React.createClass({displayName:"FormDaliyRepeatSetting",propTypes:{hasDailyReapeat:React.PropTypes.bool.isRequired,dailyReapeatPeriods:React.PropTypes.array.isRequired,helpDocumentTooltip:React.PropTypes.func.isRequired},mixins:[n,e,t],getInitialState:function(){return{dailyReapeatPeriods:this.props.dailyReapeatPeriods}},currentDailyReapeatPeriod:function(e,t){var n;return n=parseInt($(t.target).data("index")),e[n]},clonedDailyRepeatPeriods:function(){var e,t,n,r,i;r=this.state.dailyReapeatPeriods,i=[];for(e=0,t=r.length;e<t;e++)n=r[e],i.push($.extend(!0,{},n));return i},addTimePeriod:function(e){var t,n;return e.preventDefault(),n=this.clonedDailyRepeatPeriods(),t=$.extend(!0,{},this.currentDailyReapeatPeriod(n,e)),n.splice(parseInt($(e.target).data("index"))+1,0,t),this.setState({dailyReapeatPeriods:n})},deleteTimePeriod:function(e){var t;return e.preventDefault(),t=this.clonedDailyRepeatPeriods(),t=_.without(t,this.currentDailyReapeatPeriod(t,e)),this.setState({dailyReapeatPeriods:t})},updateTimePeriod:function(e,t,n){var r,i;return i=this.clonedDailyRepeatPeriods(),r=this.currentDailyReapeatPeriod(i,n),r[e][t]=parseInt(n.target.value),this.setState({dailyReapeatPeriods:i}),this.validateDailyRepeatCloseRule($(n.target))},validateDailyRepeatCloseRule:function(e){var t,n,r,i,s,o;t=e.closest("li"),n={start_date:"today",end_date:"today"},o=["start_hour","start_minute","end_hour","end_minute"];for(r=0,s=o.length;r<s;r++)i=o[r],n[i]=t.find("[data-role="+i+"]").val();return this.validateOnTimePeriod(n,e,t,t)},updateStartHour:function(e){return this.updateTimePeriod("start_time","hour",e)},updateEndHour:function(e){return this.updateTimePeriod("end_time","hour",e)},updateStartMinute:function(e){return this.updateTimePeriod("start_time","minute",e)},updateEndMinute:function(e){return this.updateTimePeriod("end_time","minute",e)},addTimePeriodClasses:function(){return"add-time-period with-impact-on-tooltip-size "+(this.state.dailyReapeatPeriods.length>=3?"gd-hide":"")},deleteTimePeriodClasses:function(){return"del-time-period with-impact-on-tooltip-size "+(this.state.dailyReapeatPeriods.length===1?"gd-hide":"")},render:function(){return React.createElement("div",{className:"close-rule-group-item"},React.createElement("label",{className:"checkbox inline-block"},React.createElement("input",{type:"checkbox",name:"form_setting[enabled_close_rules][]",id:"form_setting_enabled_close_rules_",value:"DailyRepeatCloseRule","data-role":"close_rule",className:"toggle-config with-impact-on-tooltip-size",defaultChecked:this.props.hasDailyReapeat}),"设定每日开启时段"),this.props.helpDocumentTooltip("help_doc_form_by_repeat_close_rule"),React.createElement("br",null),React.createElement("div",{"data-initial-count":"1",className:this.props.hasDailyReapeat?"config time-periods":"gd-hide config time-periods"},React.createElement("ul",null,this.state.dailyReapeatPeriods.map(function(e,t){var n="form_setting[close_rules][DailyRepeatCloseRule][time_periods]";return React.createElement("li",{key:t},React.createElement("select",{name:n+"["+t+"][start_time][hour]","data-index":t,className:"gd-input-xsmall gd-input-thin",value:this.zeroPadding(e.start_time.hour),onChange:this.updateStartHour,"data-role":"start_hour"},this.avaliableHourOpthion()),React.createElement("span",{className:"time-separator"},":"),React.createElement("select",{name:n+"["+t+"][start_time][minute]","data-index":t,className:"gd-input-xsmall gd-input-thin",value:this.zeroPadding(e.start_time.minute),onChange:this.updateStartMinute,"data-role":"start_minute"
},this.avaliableMinuteOpthion(1)),React.createElement("span",{className:"time-separator"},"至"),React.createElement("select",{name:n+"["+t+"][end_time][hour]","data-index":t,className:"gd-input-xsmall gd-input-thin",value:this.zeroPadding(e.end_time.hour),onChange:this.updateEndHour,"data-role":"end_hour"},this.avaliableHourOpthion()),React.createElement("span",{className:"time-separator"},":"),React.createElement("select",{name:n+"["+t+"][end_time][minute]","data-index":t,className:"gd-input-xsmall gd-input-thin",value:this.zeroPadding(e.end_time.minute),onChange:this.updateEndMinute,"data-role":"end_minute"},this.avaliableMinuteOpthion(1)),React.createElement("a",{className:this.addTimePeriodClasses(),href:"javascript:void(0)",tabIndex:"-1",onClick:this.addTimePeriod,"data-index":t},React.createElement("i",{className:"gd-icon-plus-circle-o","data-index":t})),React.createElement("a",{className:this.deleteTimePeriodClasses(),href:"javascript:void(0)",tabIndex:"-1",onClick:this.deleteTimePeriod,"data-index":t},React.createElement("i",{className:"gd-icon-minus-circle-o","data-index":t})))}.bind(this)))))}})}.call(this),function(){this.FormPublicSubSubmitAuthority=React.createClass({displayName:"FormPublicSubSubmitAuthority",propTypes:{submitAuthority:React.PropTypes.string.isRequired},getSubPublicSubmitAuthorityClass:function(){return"config "+(this.props.submitAuthority.indexOf("public")!==-1?"":"gd-hide")},getDefaultProps:function(){return{nameAttribute:"form_setting[sub_submission_authority]",idAttribute:"sub_submission_authority",radioButtons:[{label:"不做限制",value:"public"},{label:"每个金数据用户限填一次",value:"public_but_once"},{label:"每台电脑/手机限填一次",value:"public_but_once_per_pc"},{label:"每个IP地址限填一次 (公司、学校等机构内网所有电脑的对外IP是相同，请谨慎选择此限制)",value:"public_but_once_per_ip"}]}},render:function(){return React.createElement("div",{id:"sub_authority_of_public",className:this.getSubPublicSubmitAuthorityClass()},React.createElement(GDRadioButtonGroup,{radioButtons:this.props.radioButtons,nameAttribute:this.props.nameAttribute,checkedValue:this.props.submitAuthority}),React.createElement("div",{className:"label label-warning"},"以上限制均不影响团队协作成员"))}})}.call(this),function(){this.GDDropDownList=React.createClass({displayName:"GDDropDownList",propTypes:{nameAttribute:React.PropTypes.string,selectedValue:React.PropTypes.string,selections:React.PropTypes.array},render:function(){return React.createElement("div",null,React.createElement("select",{className:"with-impact-on-tooltip-size",name:this.props.nameAttribute,defaultValue:this.props.selectedValue,onChange:this.props.onChange},this.props.selections.map(function(e){return React.createElement("option",{value:e.value,key:e.value},e.label)})))}})}.call(this),function(){this.GDRadioButtonGroup=React.createClass({displayName:"GDRadioButtonGroup",propTypes:{radioButtons:React.PropTypes.array,nameAttribute:React.PropTypes.string,idAttribute:React.PropTypes.string,checkedValue:React.PropTypes.string},getDefaultProps:function(){return{idAttribute:"radio"}},getId:function(e){return this.props.idAttribute+"_"+e},checked:function(e){return this.props.checkedValue===e||e==="public"},render:function(){return React.createElement("div",null,this.props.radioButtons.map(function(e){return React.createElement("label",{className:"radio",htmlFor:this.getId(e.value),key:e.value},React.createElement("input",{type:"radio",value:e.value,name:this.props.nameAttribute,id:this.getId(e.value),defaultChecked:this.checked(e.value)}),React.createElement("span",{dangerouslySetInnerHTML:{__html:e.label}}))}.bind(this)))}})}.call(this),function(){this.FormSubmitAuthority=React.createClass({displayName:"FormSubmitAuthority",propTypes:{submitAuthority:React.PropTypes.string,locale:React.PropTypes.string,enableQrcode:React.PropTypes.bool,canChangeEntry:React.PropTypes.bool,enableCaptcha:React.PropTypes.bool,submitPassword:React.PropTypes.string,actionUrl:React.PropTypes.string,showCancelButton:React.PropTypes.bool,inFormOverview:React.PropTypes.bool},getDefaultProps:function(){return{baseNameTag:"form_setting",showCancelButton:!1,inFormOverview:!1,submitAuthorities:[{label:"公开：所有人可填",value:"public"},{label:"限制：仅限金数据用户填写",value:"gd_user_only"},{label:"加密：凭密码填写",value:"protected"},{label:"私密：仅我和表单管理员、数据维护员可填",value:"private"}],locales:[{label:"简体中文",value:"zh-CN"},{label:"繁體中文",value:"zh-TW"},{label:"English",value:"en"}]}},getInitialState:function(){return{submitAuthority:this.props.submitAuthority,showSubmitPassword:this.props.submitAuthority==="protected",submitPassword:this.props.submitPassword}},changeSubmitAuthority:function(e){return this.setState({submitAuthority:e.target.value}),this.setState({showSubmitPassword:e.target.value==="protected"})},getSubmitPasswordClass:function(){return"config "+(this.state.showSubmitPassword?"":"gd-hide")},getNameAttribute:function(e){return this.props.baseNameTag+"["+e+"]"},cancelButtonClass:function(){return"gd-btn gd-btn-info "+(this.props.showCancelButton===!0?"":"hide")},formLocaleClass:function(){return"content-sub-section "+(this.props.inFormOverview?"gd-hide":void 0)},helpDocumentTooltip:function(e){var t;return t=GD.helpDocumentJson[e]||{},React.createElement("i",{className:"help-document-tooltip gd-icon-help-circle-o","data-id":e,"data-title":t.title,"data-content":t.content,"data-hyperlink_text":t.hyperlink_text,"data-hyperlink_text_url":t.hyperlink_text_url})},render:function(){return React.createElement("form",{className:"form-horizontal need-ajax-flash",action:this.props.actionUrl,acceptCharset:"UTF-8","data-remote":"true",method:"patch"},React.createElement("div",{className:"content-section",id:"form_submit_authority"},React.createElement("div",{className:"section-header"},React.createElement("span",{className:"title"},"填写者权限与设置",this.helpDocumentTooltip("help_doc_form_submit_authority"))),React.createElement("div",{className:"section-body"},React.createElement("div",{className:"section-description"},React.createElement("p",null,"您可以通过设置来获取高质量的数据。")),React.createElement("div",{className:"content-sub-section"},React.createElement(GDDropDownList,{nameAttribute:this.getNameAttribute("submission_authority"),selectedValue:this.state.submitAuthority,selections:this.props.submitAuthorities,onChange:this.changeSubmitAuthority}),React.createElement(FormPublicSubSubmitAuthority,{submitAuthority:this.state.submitAuthority}),React.createElement("div",{id:"submission_password",className:this.getSubmitPasswordClass()},React.createElement("input",{className:"gd-input-small form-control submission-password-input",placeholder:"密码",type:"text",name:"form_setting[submission_password]",id:"form_setting_submission_password",defaultValue:this.props.submitPassword}),React.createElement("label",null,"如需自定义文案，请到“提示文案->凭密码填写表单”处修改。"))),React.createElement("div",{className:"content-sub-section"},React.createElement("label",{className:"checkbox inline-block"},React.createElement("input",{type:"hidden",value:"0",name:this.getNameAttribute("enable_qrcode"),readOnly:!0}),React.createElement("input",{type:"checkbox",value:"1",name:this.getNameAttribute("enable_qrcode"),defaultChecked:this.props.enableQrcode}),"显示分享二维码"),this.helpDocumentTooltip("help_doc_form_enable_qrcode"),React.createElement("br",null),React.createElement("label",{className:"checkbox inline-block"},React.createElement("input",{type:"hidden",value:"0",name:this.getNameAttribute("can_change_entry"),readOnly:!0}),React.createElement("input",{type:"checkbox",value:"1",name:this.getNameAttribute("can_change_entry"),defaultChecked:this.props.canChangeEntry}),"允许填写者在登录金数据后修改结果"),this.helpDocumentTooltip("help_doc_form_can_change_entry"),React.createElement("br",null),React.createElement("label",{className:"checkbox inline-block"},React.createElement("input",{type:"hidden",value:"0",name:this.getNameAttribute("enable_captcha"),readOnly:!0}),React.createElement("input",{type:"checkbox",value:"1",name:this.getNameAttribute("enable_captcha"),defaultChecked:this.props.enableCaptcha}),"提交前需填写验证码"),this.helpDocumentTooltip("help_doc_form_enable_captcha"),React.createElement("br",null)),React.createElement("div",{className:"content-sub-section "+this.formLocaleClass()},React.createElement("label",{htmlFor:"form_setting_locale"},"发布表单语言选择",this.helpDocumentTooltip("help_doc_form_setting_locale")),React.createElement("div",null,React.createElement(GDDropDownList,{nameAttribute:this.getNameAttribute("locale"),selectedValue:this.props.locale,selections:this.props.locales}))),React.createElement("div",{className:"content-sub-section submit-field"},React.createElement("input",{type:"submit",name:"commit",value:"保存设置",className:"gd-btn gd-btn-primary","data-disable-with":"保存中..."}),React.createElement("input",{type:"button",name:"cancel",value:"取消",className:this.cancelButtonClass(),"data-dismiss":"tooltipster"})))))}})}.call(this),function(){this.GdSwitchery=React.createClass({displayName:"GdSwitchery",propTypes:{checked:React.PropTypes.bool.isRequired,toggleFormStatus:React.PropTypes.func,successCallback:React.PropTypes.string,errorCallback:React.PropTypes.string,toggleUrl:React.PropTypes.string.isRequired,requestMethod:React.PropTypes.string,size:React.PropTypes.string,onText:React.PropTypes.string,offText:React.PropTypes.string,name:React.PropTypes.string,disabled:React.PropTypes.bool,modalSelector:React.PropTypes.string},getInitialState:function(){return{checked:this.props.checked}},getDefaultProps:function(){return{requestMethod:"patch",size:"nomal",onText:"已开启",offText:"已关闭"}},revertSwitcheryStatus:function(){var e;return e=this.refs.toggle.getDOMNode(),$(e).parents(".switch-container").find(".switchery").remove(),$(e).prop("checked",this.state.checked),new Switchery(e,{color:GD.switcheryMainColor,size:this.props.size})},componentDidMount:function(){var e;e=this.refs.toggle.getDOMNode(),$(e).data("checked",$(e).is(":checked")),$(e).data("switchery")||new Switchery(e,{color:GD.switcheryMainColor,size:this.props.size}),$(e).on("change",function(t){return function(){return $.ajax({url:t.props.toggleUrl,data:{on:$(e).is(":checked")},type:t.props.requestMethod}).success(function(n){t.setState({checked:!t.state.checked}),GD.showFlashNotification("保存设置成功"),t.props.toggleFormStatus&&t.props.toggleFormStatus();if(t.props.successCallback)return GD[t.props.successCallback]($(e))}).error(function(n){GD.showFlashNotification("保存设置失败","danger"),t.revertSwitcheryStatus();if(t.props.errorCallback)return GD[t.props.errorCallback]($(e))})}}(this));if(this.props.modalSelector)return $(e).next(".switchery").on("click",function(t){return function(){return $(t.props.modalSelector).data("element",$(e)).modal("show")}}(this))},componentWillUnmount:function(){return $(this.refs.toggle.getDOMNode()).off("change")},toggleStatus:function(){return this.state.checked?this.props.onText:this.props.offText},render:function(){return React.createElement("div",{className:"switch-container"},React.createElement("input",{type:"checkbox",name:this.props.name,ref:"toggle",defaultChecked:this.props.checked,disabled:this.props.disabled}),React.createElement("span",{className:this.toggleStatus().length==0?"switch-text gd-hide":"switch-text"},"  ",this.toggleStatus()))}})}.call(this),function(){}.call(this),function(){window.GD||(window.GD={}),GD.REGEXP={email:/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/,link:/^(http:|https:)\/\/[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^<>\"\"])*$/,telephone:/^(\d{3,4}|\d{3,4}-)?\d{7,8}$/,mobile:/^1\d{10}$/}}.call(this),function(e){"use strict";typeof define=="function"&&define.amd?define(["jquery"],e):typeof exports!="undefined"?module.exports=e(require("jquery")):e(jQuery)}(function(e){"use strict";var t=window.Slick||{};t=function(){function n(n,r){var i=this,s;i.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:e(n),appendDots:e(n),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(e,t){return'<button type="button" data-role="none" role="button" aria-required="false" tabindex="0">'+(t+1)+"</button>"},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},i.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},e.extend(i,i.initials),i.activeBreakpoint=null,i.animType=null,i.animProp=null,i.breakpoints=[],i.breakpointSettings=[],i.cssTransitions=!1,i.hidden="hidden",i.paused=!1,i.positionProp=null,i.respondTo=null,i.rowCount=1,i.shouldClick=!0,i.$slider=e(n),i.$slidesCache=null,i.transformType=null,i.transitionType=null,i.visibilityChange="visibilitychange",i.windowWidth=0,i.windowTimer=null,s=e(n).data("slick")||{},i.options=e.extend({},i.defaults,s,r),i.currentSlide=i.options.initialSlide,i.originalSettings=i.options,typeof document.mozHidden!="undefined"?(i.hidden="mozHidden",i.visibilityChange="mozvisibilitychange"):typeof document.webkitHidden!="undefined"&&(i.hidden="webkitHidden",i.visibilityChange="webkitvisibilitychange"),i.autoPlay=e.proxy(i.autoPlay,i),i.autoPlayClear=e.proxy(i.autoPlayClear,i),i.changeSlide=e.proxy(i.changeSlide,i),i.clickHandler=e.proxy(i.clickHandler,i),i.selectHandler=e.proxy(i.selectHandler,i),i.setPosition=e.proxy(i.setPosition,i),i.swipeHandler=e.proxy(i.swipeHandler,i),i.dragHandler=e.proxy(i.dragHandler,i),i.keyHandler=e.proxy(i.keyHandler,i),i.autoPlayIterator=e.proxy(i.autoPlayIterator,i),i.instanceUid=t++,i.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,i.registerBreakpoints(),i.init(!0),i.checkResponsive(!0)}var t=0;return n}(),t.prototype.addSlide=t.prototype.slickAdd=function(t,n,r){var i=this;if(typeof n=="boolean")r=n,n=null;else if(n<0||n>=i.slideCount)return!1;i.unload(),typeof n=="number"?n===0&&i.$slides.length===0?e(t).appendTo(i.$slideTrack):r?e(t).insertBefore(i.$slides.eq(n)):e(t).insertAfter(i.$slides.eq(n)):r===!0?e(t).prependTo(i.$slideTrack):e(t).appendTo(i.$slideTrack),i.$slides=i.$slideTrack.children(this.options.slide),i.$slideTrack.children(this.options.slide).detach(),i.$slideTrack.append(i.$slides),i.$slides.each(function(t,n){e(n).attr("data-slick-index",t)}),i.$slidesCache=i.$slides,i.reinit()},t.prototype.animateHeight=function(){var e=this;if(e.options.slidesToShow===1&&e.options.adaptiveHeight===!0&&e.options.vertical===!1){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.animate({height:t},e.options.speed)}},t.prototype.animateSlide=function(t,n){var r={},i=this;i.animateHeight(),i.options.rtl===!0&&i.options.vertical===!1&&(t=-t),i.transformsEnabled===!1?i.options.vertical===!1?i.$slideTrack.animate({left:t},i.options.speed,i.options.easing,n):i.$slideTrack.animate({top:t},i.options.speed,i.options.easing,n):i.cssTransitions===!1?(i.options.rtl===!0&&(i.currentLeft=-i.currentLeft),e({animStart:i.currentLeft}).animate({animStart:t},{duration:i.options.speed,easing:i.options.easing,step:function(e){e=Math.ceil(e),i.options.vertical===!1?(r[i.animType]="translate("+e+"px, 0px)",i.$slideTrack.css(r)):(r[i.animType]="translate(0px,"+e+"px)",i.$slideTrack.css(r))},complete:function(){n&&n.call()}})):(i.applyTransition(),t=Math.ceil(t),i.options.vertical===!1?r[i.animType]="translate3d("+t+"px, 0px, 0px)":r[i.animType]="translate3d(0px,"+t+"px, 0px)",i.$slideTrack.css(r),n&&setTimeout(function(){i.disableTransition(),n.call()},i.options.speed))},t.prototype.asNavFor=function(t){var n=this,r=n.options.asNavFor;r&&r!==null&&(r=e(r).not(n.$slider)),r!==null&&typeof r=="object"&&r.each(function(){var n=e(this).slick("getSlick");n.unslicked||n.slideHandler(t,!0)})},t.prototype.applyTransition=function(e){var t=this,n={};t.options.fade===!1?n[t.transitionType]=t.transformType+" "+t.options.speed+"ms "+t.options.cssEase:n[t.transitionType]="opacity "+t.options.speed+"ms "+t.options.cssEase,t.options.fade===!1?t.$slideTrack.css(n):t.$slides.eq(e).css(n)},t.prototype.autoPlay=function(){var e=this;e.autoPlayTimer&&clearInterval(e.autoPlayTimer),e.slideCount>e.options.slidesToShow&&e.paused!==!0&&(e.autoPlayTimer=setInterval(e.autoPlayIterator,e.options.autoplaySpeed))},t.prototype.autoPlayClear=function(){var e=this;e.autoPlayTimer&&clearInterval(e.autoPlayTimer)},t.prototype.autoPlayIterator=function(){var e=this;e.options.infinite===!1?e.direction===1?(e.currentSlide+1===e.slideCount-1&&(e.direction=0),e.slideHandler(e.currentSlide+e.options.slidesToScroll)):(e.currentSlide-1===0&&(e.direction=1),e.slideHandler(e.currentSlide-e.options.slidesToScroll)):e.slideHandler(e.currentSlide+e.options.slidesToScroll)},t.prototype.buildArrows=function(){var t=this;t.options.arrows===!0&&(t.$prevArrow=e(t.options.prevArrow).addClass("slick-arrow"),t.$nextArrow=e(t.options.nextArrow).addClass("slick-arrow"),t.slideCount>t.options.slidesToShow?(t.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.prependTo(t.options.appendArrows),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.appendTo(t.options.appendArrows),t.options.infinite!==!0&&t.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):t.$prevArrow.add(t.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},t.prototype.buildDots=function(){var t=this,n,r;if(t.options.dots===!0&&t.slideCount>t.options.slidesToShow){r='<ul class="'+t.options.dotsClass+'">';for(n=0;n<=t.getDotCount();n+=1)r+="<li>"+t.options.customPaging.call(this,t,n)+"</li>";r+="</ul>",t.$dots=e(r).appendTo(t.options.appendDots),t.$dots.find("li").first().addClass("slick-active").attr("aria-hidden","false")}},t.prototype.buildOut=function(){var t=this;t.$slides=t.$slider.children(t.options.slide+":not(.slick-cloned)").addClass("slick-slide"),t.slideCount=t.$slides.length,t.$slides.each(function(t,n){e(n).attr("data-slick-index",t).data("originalStyling",e(n).attr("style")||"")}),t.$slidesCache=t.$slides,t.$slider.addClass("slick-slider"),t.$slideTrack=t.slideCount===0?e('<div class="slick-track"/>').appendTo(t.$slider):t.$slides.wrapAll('<div class="slick-track"/>').parent(),t.$list=t.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent(),t.$slideTrack.css("opacity",0);if(t.options.centerMode===!0||t.options.swipeToSlide===!0)t.options.slidesToScroll=1;e("img[data-lazy]",t.$slider).not("[src]").addClass("slick-loading"),t.setupInfinite(),t.buildArrows(),t.buildDots(),t.updateDots(),t.setSlideClasses(typeof t.currentSlide=="number"?t.currentSlide:0),t.options.draggable===!0&&t.$list.addClass("draggable")},t.prototype.buildRows=function(){var e=this,t,n,r,i,s,o,u;i=document.createDocumentFragment(),o=e.$slider.children();if(e.options.rows>1){u=e.options.slidesPerRow*e.options.rows,s=Math.ceil(o.length/u);for(t=0;t<s;t++){var a=document.createElement("div");for(n=0;n<e.options.rows;n++){var f=document.createElement("div");for(r=0;r<e.options.slidesPerRow;r++){var l=t*u+(n*e.options.slidesPerRow+r);o.get(l)&&f.appendChild(o.get(l))}a.appendChild(f)}i.appendChild(a)}e.$slider.html(i),e.$slider.children().children().children().css({width:100/e.options.slidesPerRow+"%",display:"inline-block"})}},t.prototype.checkResponsive=function(t,n){var r=this,i,s,o,u=!1,a=r.$slider.width(),f=window.innerWidth||e(window).width();r.respondTo==="window"?o=f:r.respondTo==="slider"?o=a:r.respondTo==="min"&&(o=Math.min(f,a));if(r.options.responsive&&r.options.responsive.length&&r.options.responsive!==null){s=null;for(i in r.breakpoints)r.breakpoints.hasOwnProperty(i)&&(r.originalSettings.mobileFirst===!1?o<r.breakpoints[i]&&(s=r.breakpoints[i]):o>r.breakpoints[i]&&(s=r.breakpoints[i]));if(s!==null)if(r.activeBreakpoint!==null){if(s!==r.activeBreakpoint||n)r.activeBreakpoint=s,r.breakpointSettings[s]==="unslick"?r.unslick(s):(r.options=e.extend({},r.originalSettings,r.breakpointSettings[s]),t===!0&&(r.currentSlide=r.options.initialSlide),r.refresh(t)),u=s}else r.activeBreakpoint=s,r.breakpointSettings[s]==="unslick"?r.unslick(s):(r.options=e.extend({},r.originalSettings,r.breakpointSettings[s]),t===!0&&(r.currentSlide=r.options.initialSlide),r.refresh(t)),u=s;else r.activeBreakpoint!==null&&(r.activeBreakpoint=null,r.options=r.originalSettings,t===!0&&(r.currentSlide=r.options.initialSlide),r.refresh(t),u=s);!t&&u!==!1&&r.$slider.trigger("breakpoint",[r,u])}},t.prototype.changeSlide=function(t,n){var r=this,i=e(t.target),s,o,u;i.is("a")&&t.preventDefault(),i.is("li")||(i=i.closest("li")),u=r.slideCount%r.options.slidesToScroll!==0,s=u?0:(r.slideCount-r.currentSlide)%r.options.slidesToScroll;switch(t.data.message){case"previous":o=s===0?r.options.slidesToScroll:r.options.slidesToShow-s,r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide-o,!1,n);break;case"next":o=s===0?r.options.slidesToScroll:s,r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide+o,!1,n);break;case"index":var a=t.data.index===0?0:t.data.index||i.index()*r.options.slidesToScroll;r.slideHandler(r.checkNavigable(a),!1,n),i.children().trigger("focus");break;default:return}},t.prototype.checkNavigable=function(e){var t=this,n,r;n=t.getNavigableIndexes(),r=0;if(e>n[n.length-1])e=n[n.length-1];else for(var i in n){if(e<n[i]){e=r;break}r=n[i]}return e},t.prototype.cleanUpEvents=function(){var t=this;t.options.dots&&t.$dots!==null&&(e("li",t.$dots).off("click.slick",t.changeSlide),t.options.pauseOnDotsHover===!0&&t.options.autoplay===!0&&e("li",t.$dots).off("mouseenter.slick",e.proxy(t.setPaused,t,!0)).off("mouseleave.slick",e.proxy(t.setPaused,t,!1))),t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow&&t.$prevArrow.off("click.slick",t.changeSlide),t.$nextArrow&&t.$nextArrow.off("click.slick",t.changeSlide)),t.$list.off("touchstart.slick mousedown.slick",t.swipeHandler),t.$list.off("touchmove.slick mousemove.slick",t.swipeHandler),t.$list.off("touchend.slick mouseup.slick",t.swipeHandler),t.$list.off("touchcancel.slick mouseleave.slick",t.swipeHandler),t.$list.off("click.slick",t.clickHandler),e(document).off(t.visibilityChange,t.visibility),t.$list.off("mouseenter.slick",e.proxy(t.setPaused,t,!0)),t.$list.off("mouseleave.slick",e.proxy(t.setPaused,t,!1)),t.options.accessibility===!0&&t.$list.off("keydown.slick",t.keyHandler),t.options.focusOnSelect===!0&&e(t.$slideTrack).children().off("click.slick",t.selectHandler),e(window).off("orientationchange.slick.slick-"+t.instanceUid,t.orientationChange),e(window).off("resize.slick.slick-"+t.instanceUid,t.resize),e("[draggable!=true]",t.$slideTrack).off("dragstart",t.preventDefault),e(window).off("load.slick.slick-"+t.instanceUid,t.setPosition),e(document).off("ready.slick.slick-"+t.instanceUid,t.setPosition)},t.prototype.cleanUpRows=function(){var e=this,t;e.options.rows>1&&(t=e.$slides.children().children(),t.removeAttr("style"),e.$slider.html(t))},t.prototype.clickHandler=function(e){var t=this;t.shouldClick===!1&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault())},t.prototype.destroy=function(t){var n=this;n.autoPlayClear(),n.touchObject={},n.cleanUpEvents(),e(".slick-cloned",n.$slider).detach(),n.$dots&&n.$dots.remove(),n.options.arrows===!0&&(n.$prevArrow&&n.$prevArrow.length&&(n.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),n.htmlExpr.test(n.options.prevArrow)&&n.$prevArrow.remove()),n.$nextArrow&&n.$nextArrow.length&&(n.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),n.htmlExpr.test(n.options.nextArrow)&&n.$nextArrow.remove())),n.$slides&&(n.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){e(this).attr("style",e(this).data("originalStyling"))}),n.$slideTrack.children(this.options.slide).detach(),n.$slideTrack.detach(),n.$list.detach(),n.$slider.append(n.$slides)),n.cleanUpRows(),n.$slider.removeClass("slick-slider"),n.$slider.removeClass("slick-initialized"),n.unslicked=!0,t||n.$slider.trigger("destroy",[n])},t.prototype.disableTransition=function(e){var t=this,n={};n[t.transitionType]="",t.options.fade===!1?t.$slideTrack.css(n):t.$slides.eq(e).css(n)},t.prototype.fadeSlide=function(e,t){var n=this;n.cssTransitions===!1?(n.$slides.eq(e).css({zIndex:n.options.zIndex}),n.$slides.eq(e).animate({opacity:1},n.options.speed,n.options.easing,t)):(n.applyTransition(e),n.$slides.eq(e).css({opacity:1,zIndex:n.options.zIndex}),t&&setTimeout(function(){n.disableTransition(e),t.call()},n.options.speed))},t.prototype.fadeSlideOut=function(e){var t=this;t.cssTransitions===!1?t.$slides.eq(e).animate({opacity:0,zIndex:t.options.zIndex-2},t.options.speed,t.options.easing):(t.applyTransition(e),t.$slides.eq(e).css({opacity:0,zIndex:t.options.zIndex-2}))},t.prototype.filterSlides=t.prototype.slickFilter=function(e){var t=this;e!==null&&(t.unload(),t.$slideTrack.children(this.options.slide).detach(),t.$slidesCache.filter(e).appendTo(t.$slideTrack),t.reinit())},t.prototype.getCurrent=t.prototype.slickCurrentSlide=function(){var e=this;return e.currentSlide},t.prototype.getDotCount=function(){var e=this,t=0,n=0,r=0;if(e.options.infinite===!0)while(t<e.slideCount)++r,t=n+e.options.slidesToShow,n+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;else if(e.options.centerMode===!0)r=e.slideCount;else while(t<e.slideCount)++r,t=n+e.options.slidesToShow,n+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;return r-1},t.prototype.getLeft=function(e){var t=this,n,r,i=0,s;return t.slideOffset=0,r=t.$slides.first().outerHeight(!0),t.options.infinite===!0?(t.slideCount>t.options.slidesToShow&&(t.slideOffset=t.slideWidth*t.options.slidesToShow*-1,i=r*t.options.slidesToShow*-1),t.slideCount%t.options.slidesToScroll!==0&&e+t.options.slidesToScroll>t.slideCount&&t.slideCount>t.options.slidesToShow&&(e>t.slideCount?(t.slideOffset=(t.options.slidesToShow-(e-t.slideCount))*t.slideWidth*-1,i=(t.options.slidesToShow-(e-t.slideCount))*r*-1):(t.slideOffset=t.slideCount%t.options.slidesToScroll*t.slideWidth*-1,i=t.slideCount%t.options.slidesToScroll*r*-1))):e+t.options.slidesToShow>t.slideCount&&(t.slideOffset=(e+t.options.slidesToShow-t.slideCount)*t.slideWidth,i=(e+t.options.slidesToShow-t.slideCount)*r),t.slideCount<=t.options.slidesToShow&&(t.slideOffset=0,i=0),t.options.centerMode===!0&&t.options.infinite===!0?t.slideOffset+=t.slideWidth*Math.floor(t.options.slidesToShow/2)-t.slideWidth:t.options.centerMode===!0&&(t.slideOffset=0,t.slideOffset+=t.slideWidth*Math.floor(t.options.slidesToShow/2)),t.options.vertical===!1?n=e*t.slideWidth*-1+t.slideOffset:n=e*r*-1+i,t.options.variableWidth===!0&&(t.slideCount<=t.options.slidesToShow||t.options.infinite===!1?s=t.$slideTrack.children(".slick-slide").eq(e):s=t.$slideTrack.children(".slick-slide").eq(e+t.options.slidesToShow),n=s[0]?s[0].offsetLeft*-1:0,t.options.centerMode===!0&&(t.options.infinite===!1?s=t.$slideTrack.children(".slick-slide").eq(e):s=t.$slideTrack.children(".slick-slide").eq(e+t.options.slidesToShow+1),n=s[0]?s[0].offsetLeft*-1:0,n+=(t.$list.width()-s.outerWidth())/2)),n},t.prototype.getOption=t.prototype.slickGetOption=function(e){var t=this;return t.options[e]},t.prototype.getNavigableIndexes=function(){var e=this,t=0,n=0,r=[],i;e.options.infinite===!1?i=e.slideCount:(t=e.options.slidesToScroll*-1,n=e.options.slidesToScroll*-1,i=e.slideCount*2);while(t<i)r.push(t),t=n+e.options.slidesToScroll,n+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;return r},t.prototype.getSlick=function(){return this},t.prototype.getSlideCount=function(){var t=this,n,r,i;return i=t.options.centerMode===!0?t.slideWidth*Math.floor(t.options.slidesToShow/2):0,t.options.swipeToSlide===!0?(t.$slideTrack.find(".slick-slide").each(function(n,s){if(s.offsetLeft-i+e(s).outerWidth()/2>t.swipeLeft*-1)return r=s,!1}),n=Math.abs(e(r).attr("data-slick-index")-t.currentSlide)||1,n):t.options.slidesToScroll},t.prototype.goTo=t.prototype.slickGoTo=function(e,t){var n=this;n.changeSlide({data:{message:"index",index:parseInt(e)}},t)},t.prototype.init=function(t){var n=this;e(n.$slider).hasClass("slick-initialized")||(e(n.$slider).addClass("slick-initialized"),n.buildRows(),n.buildOut(),n.setProps(),n.startLoad(),n.loadSlider(),n.initializeEvents(),n.updateArrows(),n.updateDots()),t&&n.$slider.trigger("init",[n]),n.options.accessibility===!0&&n.initADA()},t.prototype.initArrowEvents=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.on("click.slick",{message:"previous"},e.changeSlide),e.$nextArrow.on("click.slick",{message:"next"},e.changeSlide))},t.prototype.initDotEvents=function(){var t=this;t.options.dots===!0&&t.slideCount>t.options.slidesToShow&&e("li",t.$dots).on("click.slick",{message:"index"},t.changeSlide),t.options.dots===!0&&t.options.pauseOnDotsHover===!0&&t.options.autoplay===!0&&e("li",t.$dots).on("mouseenter.slick",e.proxy(t.setPaused,t,!0)).on("mouseleave.slick",e.proxy(t.setPaused,t,!1))},t.prototype.initializeEvents=function(){var t=this;t.initArrowEvents(),t.initDotEvents(),t.$list.on("touchstart.slick mousedown.slick",{action:"start"},t.swipeHandler),t.$list.on("touchmove.slick mousemove.slick",{action:"move"},t.swipeHandler),t.$list.on("touchend.slick mouseup.slick",{action:"end"},t.swipeHandler),t.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},t.swipeHandler),t.$list.on("click.slick",t.clickHandler),e(document).on(t.visibilityChange,e.proxy(t.visibility,t)),t.$list.on("mouseenter.slick",e.proxy(t.setPaused,t,!0)),t.$list.on("mouseleave.slick",e.proxy(t.setPaused,t,!1)),t.options.accessibility===!0&&t.$list.on("keydown.slick",t.keyHandler),t.options.focusOnSelect===!0&&e(t.$slideTrack).children().on("click.slick",t.selectHandler),e(window).on("orientationchange.slick.slick-"+t.instanceUid,e.proxy(t.orientationChange,t)),e(window).on("resize.slick.slick-"+t.instanceUid,e.proxy(t.resize,t)),e("[draggable!=true]",t.$slideTrack).on("dragstart",t.preventDefault),e(window).on("load.slick.slick-"+t.instanceUid,t.setPosition),e(document).on("ready.slick.slick-"+t.instanceUid,t.setPosition)},t.prototype.initUI=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.show(),e.$nextArrow.show()),e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&e.$dots.show(),e.options.autoplay===!0&&e.autoPlay()},t.prototype.keyHandler=function(e){var t=this;e.target.tagName.match("TEXTAREA|INPUT|SELECT")||(e.keyCode===37&&t.options.accessibility===!0?t.changeSlide({data:{message:"previous"}}):e.keyCode===39&&t.options.accessibility===!0&&t.changeSlide({data:{message:"next"}}))},t.prototype.lazyLoad=function(){function o(t){e("img[data-lazy]",t).each(function(){var t=e(this),n=e(this).attr("data-lazy"),r=document.createElement("img");r.onload=function(){t.animate({opacity:0},100,function(){t.attr("src",n).animate({opacity:1},200,function(){t.removeAttr("data-lazy").removeClass("slick-loading")})})},r.src=n})}var t=this,n,r,i,s;t.options.centerMode===!0?t.options.infinite===!0?(i=t.currentSlide+(t.options.slidesToShow/2+1),s=i+t.options.slidesToShow+2):(i=Math.max(0,t.currentSlide-(t.options.slidesToShow/2+1)),s=2+(t.options.slidesToShow/2+1)+t.currentSlide):(i=t.options.infinite?t.options.slidesToShow+t.currentSlide:t.currentSlide,s=i+t.options.slidesToShow,t.options.fade===!0&&(i>0&&i--,s<=t.slideCount&&s++)),n=t.$slider.find(".slick-slide").slice(i,s),o(n),t.slideCount<=t.options.slidesToShow?(r=t.$slider.find(".slick-slide"),o(r)):t.currentSlide>=t.slideCount-t.options.slidesToShow?(r=t.$slider.find(".slick-cloned").slice(0,t.options.slidesToShow),o(r)):t.currentSlide===0&&(r=t.$slider.find(".slick-cloned"
).slice(t.options.slidesToShow*-1),o(r))},t.prototype.loadSlider=function(){var e=this;e.setPosition(),e.$slideTrack.css({opacity:1}),e.$slider.removeClass("slick-loading"),e.initUI(),e.options.lazyLoad==="progressive"&&e.progressiveLazyLoad()},t.prototype.next=t.prototype.slickNext=function(){var e=this;e.changeSlide({data:{message:"next"}})},t.prototype.orientationChange=function(){var e=this;e.checkResponsive(),e.setPosition()},t.prototype.pause=t.prototype.slickPause=function(){var e=this;e.autoPlayClear(),e.paused=!0},t.prototype.play=t.prototype.slickPlay=function(){var e=this;e.paused=!1,e.autoPlay()},t.prototype.postSlide=function(e){var t=this;t.$slider.trigger("afterChange",[t,e]),t.animating=!1,t.setPosition(),t.swipeLeft=null,t.options.autoplay===!0&&t.paused===!1&&t.autoPlay(),t.options.accessibility===!0&&t.initADA()},t.prototype.prev=t.prototype.slickPrev=function(){var e=this;e.changeSlide({data:{message:"previous"}})},t.prototype.preventDefault=function(e){e.preventDefault()},t.prototype.progressiveLazyLoad=function(){var t=this,n,r;n=e("img[data-lazy]",t.$slider).length,n>0&&(r=e("img[data-lazy]",t.$slider).first(),r.attr("src",r.attr("data-lazy")).removeClass("slick-loading").load(function(){r.removeAttr("data-lazy"),t.progressiveLazyLoad(),t.options.adaptiveHeight===!0&&t.setPosition()}).error(function(){r.removeAttr("data-lazy"),t.progressiveLazyLoad()}))},t.prototype.refresh=function(t){var n=this,r=n.currentSlide;n.destroy(!0),e.extend(n,n.initials,{currentSlide:r}),n.init(),t||n.changeSlide({data:{message:"index",index:r}},!1)},t.prototype.registerBreakpoints=function(){var t=this,n,r,i,s=t.options.responsive||null;if(e.type(s)==="array"&&s.length){t.respondTo=t.options.respondTo||"window";for(n in s){i=t.breakpoints.length-1,r=s[n].breakpoint;if(s.hasOwnProperty(n)){while(i>=0)t.breakpoints[i]&&t.breakpoints[i]===r&&t.breakpoints.splice(i,1),i--;t.breakpoints.push(r),t.breakpointSettings[r]=s[n].settings}}t.breakpoints.sort(function(e,n){return t.options.mobileFirst?e-n:n-e})}},t.prototype.reinit=function(){var t=this;t.$slides=t.$slideTrack.children(t.options.slide).addClass("slick-slide"),t.slideCount=t.$slides.length,t.currentSlide>=t.slideCount&&t.currentSlide!==0&&(t.currentSlide=t.currentSlide-t.options.slidesToScroll),t.slideCount<=t.options.slidesToShow&&(t.currentSlide=0),t.registerBreakpoints(),t.setProps(),t.setupInfinite(),t.buildArrows(),t.updateArrows(),t.initArrowEvents(),t.buildDots(),t.updateDots(),t.initDotEvents(),t.checkResponsive(!1,!0),t.options.focusOnSelect===!0&&e(t.$slideTrack).children().on("click.slick",t.selectHandler),t.setSlideClasses(0),t.setPosition(),t.$slider.trigger("reInit",[t]),t.options.autoplay===!0&&t.focusHandler()},t.prototype.resize=function(){var t=this;e(window).width()!==t.windowWidth&&(clearTimeout(t.windowDelay),t.windowDelay=window.setTimeout(function(){t.windowWidth=e(window).width(),t.checkResponsive(),t.unslicked||t.setPosition()},50))},t.prototype.removeSlide=t.prototype.slickRemove=function(e,t,n){var r=this;typeof e=="boolean"?(t=e,e=t===!0?0:r.slideCount-1):e=t===!0?--e:e;if(r.slideCount<1||e<0||e>r.slideCount-1)return!1;r.unload(),n===!0?r.$slideTrack.children().remove():r.$slideTrack.children(this.options.slide).eq(e).remove(),r.$slides=r.$slideTrack.children(this.options.slide),r.$slideTrack.children(this.options.slide).detach(),r.$slideTrack.append(r.$slides),r.$slidesCache=r.$slides,r.reinit()},t.prototype.setCSS=function(e){var t=this,n={},r,i;t.options.rtl===!0&&(e=-e),r=t.positionProp=="left"?Math.ceil(e)+"px":"0px",i=t.positionProp=="top"?Math.ceil(e)+"px":"0px",n[t.positionProp]=e,t.transformsEnabled===!1?t.$slideTrack.css(n):(n={},t.cssTransitions===!1?(n[t.animType]="translate("+r+", "+i+")",t.$slideTrack.css(n)):(n[t.animType]="translate3d("+r+", "+i+", 0px)",t.$slideTrack.css(n)))},t.prototype.setDimensions=function(){var e=this;e.options.vertical===!1?e.options.centerMode===!0&&e.$list.css({padding:"0px "+e.options.centerPadding}):(e.$list.height(e.$slides.first().outerHeight(!0)*e.options.slidesToShow),e.options.centerMode===!0&&e.$list.css({padding:e.options.centerPadding+" 0px"})),e.listWidth=e.$list.width(),e.listHeight=e.$list.height(),e.options.vertical===!1&&e.options.variableWidth===!1?(e.slideWidth=Math.ceil(e.listWidth/e.options.slidesToShow),e.$slideTrack.width(Math.ceil(e.slideWidth*e.$slideTrack.children(".slick-slide").length))):e.options.variableWidth===!0?e.$slideTrack.width(5e3*e.slideCount):(e.slideWidth=Math.ceil(e.listWidth),e.$slideTrack.height(Math.ceil(e.$slides.first().outerHeight(!0)*e.$slideTrack.children(".slick-slide").length)));var t=e.$slides.first().outerWidth(!0)-e.$slides.first().width();e.options.variableWidth===!1&&e.$slideTrack.children(".slick-slide").width(e.slideWidth-t)},t.prototype.setFade=function(){var t=this,n;t.$slides.each(function(r,i){n=t.slideWidth*r*-1,t.options.rtl===!0?e(i).css({position:"relative",right:n,top:0,zIndex:t.options.zIndex-2,opacity:0}):e(i).css({position:"relative",left:n,top:0,zIndex:t.options.zIndex-2,opacity:0})}),t.$slides.eq(t.currentSlide).css({zIndex:t.options.zIndex-1,opacity:1})},t.prototype.setHeight=function(){var e=this;if(e.options.slidesToShow===1&&e.options.adaptiveHeight===!0&&e.options.vertical===!1){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.css("height",t)}},t.prototype.setOption=t.prototype.slickSetOption=function(t,n,r){var i=this,s,o;if(t==="responsive"&&e.type(n)==="array")for(o in n)if(e.type(i.options.responsive)!=="array")i.options.responsive=[n[o]];else{s=i.options.responsive.length-1;while(s>=0)i.options.responsive[s].breakpoint===n[o].breakpoint&&i.options.responsive.splice(s,1),s--;i.options.responsive.push(n[o])}else i.options[t]=n;r===!0&&(i.unload(),i.reinit())},t.prototype.setPosition=function(){var e=this;e.setDimensions(),e.setHeight(),e.options.fade===!1?e.setCSS(e.getLeft(e.currentSlide)):e.setFade(),e.$slider.trigger("setPosition",[e])},t.prototype.setProps=function(){var e=this,t=document.body.style;e.positionProp=e.options.vertical===!0?"top":"left",e.positionProp==="top"?e.$slider.addClass("slick-vertical"):e.$slider.removeClass("slick-vertical"),(t.WebkitTransition!==undefined||t.MozTransition!==undefined||t.msTransition!==undefined)&&e.options.useCSS===!0&&(e.cssTransitions=!0),e.options.fade&&(typeof e.options.zIndex=="number"?e.options.zIndex<3&&(e.options.zIndex=3):e.options.zIndex=e.defaults.zIndex),t.OTransform!==undefined&&(e.animType="OTransform",e.transformType="-o-transform",e.transitionType="OTransition",t.perspectiveProperty===undefined&&t.webkitPerspective===undefined&&(e.animType=!1)),t.MozTransform!==undefined&&(e.animType="MozTransform",e.transformType="-moz-transform",e.transitionType="MozTransition",t.perspectiveProperty===undefined&&t.MozPerspective===undefined&&(e.animType=!1)),t.webkitTransform!==undefined&&(e.animType="webkitTransform",e.transformType="-webkit-transform",e.transitionType="webkitTransition",t.perspectiveProperty===undefined&&t.webkitPerspective===undefined&&(e.animType=!1)),t.msTransform!==undefined&&(e.animType="msTransform",e.transformType="-ms-transform",e.transitionType="msTransition",t.msTransform===undefined&&(e.animType=!1)),t.transform!==undefined&&e.animType!==!1&&(e.animType="transform",e.transformType="transform",e.transitionType="transition"),e.transformsEnabled=e.animType!==null&&e.animType!==!1},t.prototype.setSlideClasses=function(e){var t=this,n,r,i,s;r=t.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),t.$slides.eq(e).addClass("slick-current"),t.options.centerMode===!0?(n=Math.floor(t.options.slidesToShow/2),t.options.infinite===!0&&(e>=n&&e<=t.slideCount-1-n?t.$slides.slice(e-n,e+n+1).addClass("slick-active").attr("aria-hidden","false"):(i=t.options.slidesToShow+e,r.slice(i-n+1,i+n+2).addClass("slick-active").attr("aria-hidden","false")),e===0?r.eq(r.length-1-t.options.slidesToShow).addClass("slick-center"):e===t.slideCount-1&&r.eq(t.options.slidesToShow).addClass("slick-center")),t.$slides.eq(e).addClass("slick-center")):e>=0&&e<=t.slideCount-t.options.slidesToShow?t.$slides.slice(e,e+t.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):r.length<=t.options.slidesToShow?r.addClass("slick-active").attr("aria-hidden","false"):(s=t.slideCount%t.options.slidesToShow,i=t.options.infinite===!0?t.options.slidesToShow+e:e,t.options.slidesToShow==t.options.slidesToScroll&&t.slideCount-e<t.options.slidesToShow?r.slice(i-(t.options.slidesToShow-s),i+s).addClass("slick-active").attr("aria-hidden","false"):r.slice(i,i+t.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")),t.options.lazyLoad==="ondemand"&&t.lazyLoad()},t.prototype.setupInfinite=function(){var t=this,n,r,i;t.options.fade===!0&&(t.options.centerMode=!1);if(t.options.infinite===!0&&t.options.fade===!1){r=null;if(t.slideCount>t.options.slidesToShow){t.options.centerMode===!0?i=t.options.slidesToShow+1:i=t.options.slidesToShow;for(n=t.slideCount;n>t.slideCount-i;n-=1)r=n-1,e(t.$slides[r]).clone(!0).attr("id","").attr("data-slick-index",r-t.slideCount).prependTo(t.$slideTrack).addClass("slick-cloned");for(n=0;n<i;n+=1)r=n,e(t.$slides[r]).clone(!0).attr("id","").attr("data-slick-index",r+t.slideCount).appendTo(t.$slideTrack).addClass("slick-cloned");t.$slideTrack.find(".slick-cloned").find("[id]").each(function(){e(this).attr("id","")})}}},t.prototype.setPaused=function(e){var t=this;t.options.autoplay===!0&&t.options.pauseOnHover===!0&&(t.paused=e,e?t.autoPlayClear():t.autoPlay())},t.prototype.selectHandler=function(t){var n=this,r=e(t.target).is(".slick-slide")?e(t.target):e(t.target).parents(".slick-slide"),i=parseInt(r.attr("data-slick-index"));i||(i=0);if(n.slideCount<=n.options.slidesToShow){n.setSlideClasses(i),n.asNavFor(i);return}n.slideHandler(i)},t.prototype.slideHandler=function(e,t,n){var r,i,s,o,u=null,a=this;t=t||!1;if(a.animating===!0&&a.options.waitForAnimate===!0)return;if(a.options.fade===!0&&a.currentSlide===e)return;if(a.slideCount<=a.options.slidesToShow)return;t===!1&&a.asNavFor(e),r=e,u=a.getLeft(r),o=a.getLeft(a.currentSlide),a.currentLeft=a.swipeLeft===null?o:a.swipeLeft;if(a.options.infinite===!1&&a.options.centerMode===!1&&(e<0||e>a.getDotCount()*a.options.slidesToScroll)){a.options.fade===!1&&(r=a.currentSlide,n!==!0?a.animateSlide(o,function(){a.postSlide(r)}):a.postSlide(r));return}if(a.options.infinite===!1&&a.options.centerMode===!0&&(e<0||e>a.slideCount-a.options.slidesToScroll)){a.options.fade===!1&&(r=a.currentSlide,n!==!0?a.animateSlide(o,function(){a.postSlide(r)}):a.postSlide(r));return}a.options.autoplay===!0&&clearInterval(a.autoPlayTimer),r<0?a.slideCount%a.options.slidesToScroll!==0?i=a.slideCount-a.slideCount%a.options.slidesToScroll:i=a.slideCount+r:r>=a.slideCount?a.slideCount%a.options.slidesToScroll!==0?i=0:i=r-a.slideCount:i=r,a.animating=!0,a.$slider.trigger("beforeChange",[a,a.currentSlide,i]),s=a.currentSlide,a.currentSlide=i,a.setSlideClasses(a.currentSlide),a.updateDots(),a.updateArrows();if(a.options.fade===!0){n!==!0?(a.fadeSlideOut(s),a.fadeSlide(i,function(){a.postSlide(i)})):a.postSlide(i),a.animateHeight();return}n!==!0?a.animateSlide(u,function(){a.postSlide(i)}):a.postSlide(i)},t.prototype.startLoad=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.hide(),e.$nextArrow.hide()),e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&e.$dots.hide(),e.$slider.addClass("slick-loading")},t.prototype.swipeDirection=function(){var e,t,n,r,i=this;return e=i.touchObject.startX-i.touchObject.curX,t=i.touchObject.startY-i.touchObject.curY,n=Math.atan2(t,e),r=Math.round(n*180/Math.PI),r<0&&(r=360-Math.abs(r)),r<=45&&r>=0?i.options.rtl===!1?"left":"right":r<=360&&r>=315?i.options.rtl===!1?"left":"right":r>=135&&r<=225?i.options.rtl===!1?"right":"left":i.options.verticalSwiping===!0?r>=35&&r<=135?"left":"right":"vertical"},t.prototype.swipeEnd=function(e){var t=this,n;t.dragging=!1,t.shouldClick=t.touchObject.swipeLength>10?!1:!0;if(t.touchObject.curX===undefined)return!1;t.touchObject.edgeHit===!0&&t.$slider.trigger("edge",[t,t.swipeDirection()]);if(t.touchObject.swipeLength>=t.touchObject.minSwipe)switch(t.swipeDirection()){case"left":n=t.options.swipeToSlide?t.checkNavigable(t.currentSlide+t.getSlideCount()):t.currentSlide+t.getSlideCount(),t.slideHandler(n),t.currentDirection=0,t.touchObject={},t.$slider.trigger("swipe",[t,"left"]);break;case"right":n=t.options.swipeToSlide?t.checkNavigable(t.currentSlide-t.getSlideCount()):t.currentSlide-t.getSlideCount(),t.slideHandler(n),t.currentDirection=1,t.touchObject={},t.$slider.trigger("swipe",[t,"right"])}else t.touchObject.startX!==t.touchObject.curX&&(t.slideHandler(t.currentSlide),t.touchObject={})},t.prototype.swipeHandler=function(e){var t=this;if(t.options.swipe===!1||"ontouchend"in document&&t.options.swipe===!1)return;if(t.options.draggable===!1&&e.type.indexOf("mouse")!==-1)return;t.touchObject.fingerCount=e.originalEvent&&e.originalEvent.touches!==undefined?e.originalEvent.touches.length:1,t.touchObject.minSwipe=t.listWidth/t.options.touchThreshold,t.options.verticalSwiping===!0&&(t.touchObject.minSwipe=t.listHeight/t.options.touchThreshold);switch(e.data.action){case"start":t.swipeStart(e);break;case"move":t.swipeMove(e);break;case"end":t.swipeEnd(e)}},t.prototype.swipeMove=function(e){var t=this,n=!1,r,i,s,o,u;u=e.originalEvent!==undefined?e.originalEvent.touches:null;if(!t.dragging||u&&u.length!==1)return!1;r=t.getLeft(t.currentSlide),t.touchObject.curX=u!==undefined?u[0].pageX:e.clientX,t.touchObject.curY=u!==undefined?u[0].pageY:e.clientY,t.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(t.touchObject.curX-t.touchObject.startX,2))),t.options.verticalSwiping===!0&&(t.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(t.touchObject.curY-t.touchObject.startY,2)))),i=t.swipeDirection();if(i==="vertical")return;e.originalEvent!==undefined&&t.touchObject.swipeLength>4&&e.preventDefault(),o=(t.options.rtl===!1?1:-1)*(t.touchObject.curX>t.touchObject.startX?1:-1),t.options.verticalSwiping===!0&&(o=t.touchObject.curY>t.touchObject.startY?1:-1),s=t.touchObject.swipeLength,t.touchObject.edgeHit=!1,t.options.infinite===!1&&(t.currentSlide===0&&i==="right"||t.currentSlide>=t.getDotCount()&&i==="left")&&(s=t.touchObject.swipeLength*t.options.edgeFriction,t.touchObject.edgeHit=!0),t.options.vertical===!1?t.swipeLeft=r+s*o:t.swipeLeft=r+s*(t.$list.height()/t.listWidth)*o,t.options.verticalSwiping===!0&&(t.swipeLeft=r+s*o);if(t.options.fade===!0||t.options.touchMove===!1)return!1;if(t.animating===!0)return t.swipeLeft=null,!1;t.setCSS(t.swipeLeft)},t.prototype.swipeStart=function(e){var t=this,n;if(t.touchObject.fingerCount!==1||t.slideCount<=t.options.slidesToShow)return t.touchObject={},!1;e.originalEvent!==undefined&&e.originalEvent.touches!==undefined&&(n=e.originalEvent.touches[0]),t.touchObject.startX=t.touchObject.curX=n!==undefined?n.pageX:e.clientX,t.touchObject.startY=t.touchObject.curY=n!==undefined?n.pageY:e.clientY,t.dragging=!0},t.prototype.unfilterSlides=t.prototype.slickUnfilter=function(){var e=this;e.$slidesCache!==null&&(e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.appendTo(e.$slideTrack),e.reinit())},t.prototype.unload=function(){var t=this;e(".slick-cloned",t.$slider).remove(),t.$dots&&t.$dots.remove(),t.$prevArrow&&t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.remove(),t.$nextArrow&&t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.remove(),t.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},t.prototype.unslick=function(e){var t=this;t.$slider.trigger("unslick",[t,e]),t.destroy()},t.prototype.updateArrows=function(){var e=this,t;t=Math.floor(e.options.slidesToShow/2),e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&!e.options.infinite&&(e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),e.currentSlide===0?(e.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):e.currentSlide>=e.slideCount-e.options.slidesToShow&&e.options.centerMode===!1?(e.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):e.currentSlide>=e.slideCount-1&&e.options.centerMode===!0&&(e.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},t.prototype.updateDots=function(){var e=this;e.$dots!==null&&(e.$dots.find("li").removeClass("slick-active").attr("aria-hidden","true"),e.$dots.find("li").eq(Math.floor(e.currentSlide/e.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false"))},t.prototype.visibility=function(){var e=this;document[e.hidden]?(e.paused=!0,e.autoPlayClear()):e.options.autoplay===!0&&(e.paused=!1,e.autoPlay())},t.prototype.initADA=function(){var t=this;t.$slides.add(t.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),t.$slideTrack.attr("role","listbox"),t.$slides.not(t.$slideTrack.find(".slick-cloned")).each(function(n){e(this).attr({role:"option","aria-describedby":"slick-slide"+t.instanceUid+n+""})}),t.$dots!==null&&t.$dots.attr("role","tablist").find("li").each(function(n){e(this).attr({role:"presentation","aria-selected":"false","aria-controls":"navigation"+t.instanceUid+n+"",id:"slick-slide"+t.instanceUid+n+""})}).first().attr("aria-selected","true").end().find("button").attr("role","button").end().closest("div").attr("role","toolbar"),t.activateADA()},t.prototype.activateADA=function(){var e=this,t=e.$slider.find("*").is(":focus");e.$slideTrack.find(".slick-active").attr({"aria-hidden":"false",tabindex:"0"}).find("a, input, button, select").attr({tabindex:"0"}),t&&e.$slideTrack.find(".slick-active").focus()},t.prototype.focusHandler=function(){var t=this;t.$slider.on("focus.slick blur.slick","*",function(n){n.stopImmediatePropagation();var r=e(this);setTimeout(function(){t.isPlay&&(r.is(":focus")?(t.autoPlayClear(),t.paused=!0):(t.paused=!1,t.autoPlay()))},0)})},e.fn.slick=function(){var e=this,n=arguments[0],r=Array.prototype.slice.call(arguments,1),i=e.length,s=0,o;for(s;s<i;s++){typeof n=="object"||typeof n=="undefined"?e[s].slick=new t(e[s],n):o=e[s].slick[n].apply(e[s].slick,r);if(typeof o!="undefined")return o}return e}}),function(e,t){if(typeof define=="function"&&define.amd)define(["exports","module"],t);else if(typeof exports!="undefined"&&typeof module!="undefined")t(exports,module);else{var n={exports:{}};t(n.exports,n),e.autosize=n.exports}}(this,function(e,t){"use strict";function n(e){function a(){var t=window.getComputedStyle(e,null);t.resize==="vertical"?e.style.resize="none":t.resize==="both"&&(e.style.resize="horizontal"),t.boxSizing==="content-box"?o=-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):o=parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),c()}function f(t){var n=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=n,u=t,s&&(e.style.overflowY=t),l()}function l(){var t=window.pageYOffset,n=document.body.scrollTop,r=e.style.height;e.style.height="auto";var i=e.scrollHeight+o;if(e.scrollHeight===0){e.style.height=r;return}e.style.height=i+"px",document.documentElement.scrollTop=t,document.body.scrollTop=n}function c(){var t=e.style.height;l();var n=window.getComputedStyle(e,null);n.height!==e.style.height?u!=="visible"&&f("visible"):u!=="hidden"&&f("hidden");if(t!==e.style.height){var r=document.createEvent("Event");r.initEvent("autosize:resized",!0,!1),e.dispatchEvent(r)}}var t=arguments[1]===undefined?{}:arguments[1],n=t.setOverflowX,r=n===undefined?!0:n,i=t.setOverflowY,s=i===undefined?!0:i;if(!e||!e.nodeName||e.nodeName!=="TEXTAREA"||e.hasAttribute("data-autosize-on"))return;var o=null,u="hidden",h=function(t){window.removeEventListener("resize",c),e.removeEventListener("input",c),e.removeEventListener("keyup",c),e.removeAttribute("data-autosize-on"),e.removeEventListener("autosize:destroy",h),Object.keys(t).forEach(function(n){e.style[n]=t[n]})}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",h),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",c),window.addEventListener("resize",c),e.addEventListener("input",c),e.addEventListener("autosize:update",c),e.setAttribute("data-autosize-on",!0),s&&(e.style.overflowY="hidden"),r&&(e.style.overflowX="hidden",e.style.wordWrap="break-word"),a()}function r(e){if(!e||!e.nodeName||e.nodeName!=="TEXTAREA")return;var t=document.createEvent("Event");t.initEvent("autosize:destroy",!0,!1),e.dispatchEvent(t)}function i(e){if(!e||!e.nodeName||e.nodeName!=="TEXTAREA")return;var t=document.createEvent("Event");t.initEvent("autosize:update",!0,!1),e.dispatchEvent(t)}var s=null;typeof window=="undefined"||typeof window.getComputedStyle!="function"?(s=function(e){return e},s.destroy=function(e){return e},s.update=function(e){return e}):(s=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return n(e,t)}),e},s.destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],r),e},s.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],i),e}),t.exports=s}),function(){function e(t){var n=e.modules[t];if(!n)throw new Error('failed to require "'+t+'"');return!("exports"in n)&&typeof n.definition=="function"&&(n.client=n.component=!0,n.definition.call(this,n.exports={},n),delete n.definition),n.exports}e.loader="component",e.helper={},e.helper.semVerSort=function(e,t){var n=e.version.split("."),r=t.version.split(".");for(var i=0;i<n.length;++i){var s=parseInt(n[i],10),o=parseInt(r[i],10);if(s===o){var u=n[i].substr((""+s).length),a=r[i].substr((""+o).length);if(u===""&&a!=="")return 1;if(u!==""&&a==="")return-1;if(u!==""&&a!=="")return u>a?1:-1;continue}return s>o?1:-1}return 0},e.latest=function(t,n){function r(e){throw new Error('failed to find latest module of "'+e+'"')}var i=/(.*)~(.*)@v?(\d+\.\d+\.\d+[^\/]*)$/,s=/(.*)~(.*)/;s.test(t)||r(t);var o=Object.keys(e.modules),u=[],a=[];for(var f=0;f<o.length;f++){var l=o[f];if((new RegExp(t+"@")).test(l)){var c=l.substr(t.length+1),h=i.exec(l);h!=null?u.push({version:c,name:l}):a.push({version:c,name:l})}}u.concat(a).length===0&&r(t);if(u.length>0){var p=u.sort(e.helper.semVerSort).pop().name;return n===!0?p:e(p)}var p=a.sort(function(e,t){return e.name>t.name})[0].name;return n===!0?p:e(p)},e.modules={},e.register=function(t,n){e.modules[t]={definition:n}},e.define=function(t,n){e.modules[t]={exports:n}},e.register("abpetkov~transitionize@0.0.3",function(e,t){function n(e,t){if(!(this instanceof n))return new n(e,t);this.element=e,this.props=t||{},this.init()}t.exports=n,n.prototype.isSafari=function(){return/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)},n.prototype.init=function(){var e=[];for(var t in this.props)e.push(t+" "+this.props[t]);this.element.style.transition=e.join(", "),this.isSafari()&&(this.element.style.webkitTransition=e.join(", "))}}),e.register("ftlabs~fastclick@v0.6.11",function(e,t){function n(e){"use strict";var t,r=this;this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=e;if(!e||!e.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return n.prototype.onClick.apply(r,arguments)},this.onMouse=function(){return n.prototype.onMouse.apply(r,arguments)},this.onTouchStart=function(){return n.prototype.onTouchStart.apply(r,arguments)},this.onTouchMove=function(){return n.prototype.onTouchMove.apply(r,arguments)},this.onTouchEnd=function(){return n.prototype.onTouchEnd.apply(r,arguments)},this.onTouchCancel=function(){return n.prototype.onTouchCancel.apply(r,arguments)};if(n.notNeeded(e))return;this.deviceIsAndroid&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,r){var i=Node.prototype.removeEventListener;t==="click"?i.call(e,t,n.hijacked||n,r):i.call(e,t,n,r)},e.addEventListener=function(t,n,r){var i=Node.prototype.addEventListener;t==="click"?i.call(e,t,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),r):i.call(e,t,n,r)}),typeof e.onclick=="function"&&(t=e.onclick,e.addEventListener("click",function(e){t(e)},!1),e.onclick=null)}n.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,n.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),n.prototype.deviceIsIOS4=n.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),n.prototype.deviceIsIOSWithBadTarget=n.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),n.prototype.needsClick=function(e){"use strict";switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(this.deviceIsIOS&&e.type==="file"||e.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(e.className)},n.prototype.needsFocus=function(e){"use strict";switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!this.deviceIsAndroid;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},n.prototype.sendClick=function(e,t){"use strict";var n,r;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),r=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},n.prototype.determineEventType=function(e){"use strict";return this.deviceIsAndroid&&e.tagName.toLowerCase()==="select"?"mousedown":"click"},n.prototype.focus=function(e){"use strict";var t;this.deviceIsIOS&&e.setSelectionRange&&e.type.indexOf("date")!==0&&e.type!=="time"?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},n.prototype.updateScrollParent=function(e){"use strict";var t,n;t=e.fastClickScrollParent;if(!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},n.prototype.getTargetElementFromEventTarget=function(e){"use strict";return e.nodeType===Node.TEXT_NODE?e.parentNode:e},n.prototype.onTouchStart=function(e){"use strict";var t,n,r;if(e.targetTouches.length>1)return!0;t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0];if(this.deviceIsIOS){r=window.getSelection();if(r.rangeCount&&!r.isCollapsed)return!0;if(!this.deviceIsIOS4){if(n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<200&&e.preventDefault(),!0},n.prototype.touchHasMoved=function(e){"use strict";var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n?!0:!1},n.prototype.onTouchMove=function(e){"use strict";if(!this.trackingClick)return!0;if(this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))this.trackingClick=!1,this.targetElement=null;return!0},n.prototype.findControl=function(e){"use strict";return e.control!==undefined?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},n.prototype.onTouchEnd=function(e){"use strict";var t,n,r,i,s,o=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(s=e.changedTouches[0],o=document.elementFromPoint(s.pageX-window.pageXOffset,s.pageY-window.pageYOffset)||o,o.fastClickScrollParent=this.targetElement.fastClickScrollParent),r=o.tagName.toLowerCase();if(r==="label"){t=this.findControl(o);if(t){this.focus(o);if(this.deviceIsAndroid)return!1;o=t}}else if(this.needsFocus(o)){if(e.timeStamp-n>100||this.deviceIsIOS&&window.top!==window&&r==="input")return this.targetElement=null,!1;this.focus(o);if(!this.deviceIsIOS4||r!=="select")this.targetElement=null,e.preventDefault();return!1}if(this.deviceIsIOS&&!this.deviceIsIOS4){i=o.fastClickScrollParent;if(i&&i.fastClickLastScrollTop!==i.scrollTop)return!0}return this.needsClick(o)||(e.preventDefault(),this.sendClick(o,e)),!1},n.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},n.prototype.onMouse=function(e){"use strict";return this.targetElement?e.forwardedTouchEvent?!0:e.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0:!0:!0},n.prototype.onClick=function(e){"use strict";var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):e.target.type==="submit"&&e.detail===0?!0:(t=this.onMouse(e),t||(this.targetElement=null),t)},n.prototype.destroy=function(){"use strict";var e=this.layer;this.deviceIsAndroid&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},n.notNeeded=function(e){"use strict";var t,r;if(typeof window.ontouchstart=="undefined")return!0;r=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(r){if(!n.prototype.deviceIsAndroid)return!0;t=document.querySelector("meta[name=viewport]");if(t){if(t.content.indexOf("user-scalable=no")!==-1)return!0;if(r>31&&window.innerWidth<=window.screen.width)return!0}}return e.style.msTouchAction==="none"?!0:!1},n.attach=function(e){"use strict";return new n(e)},typeof define!="undefined"&&define.amd?define(function(){"use strict";return n}):typeof t!="undefined"&&t.exports?(t.exports=n.attach,t.exports.FastClick=n):window.FastClick=n}),e.register("component~indexof@0.0.3",function(e,t){t.exports=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}}),e.register("component~classes@1.2.1",function(t,n){function o(e){if(!e)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}var r=e("component~indexof@0.0.3"),i=/\s+/,s=Object.prototype.toString;n.exports=function(e){return new o(e)},o.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array(),n=r(t,e);return~n||t.push(e),this.el.className=t.join(" "),this},o.prototype.remove=function(e){if("[object RegExp]"==s.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=r(t,e);return~n&&t.splice(n,1),this.el.className=t.join(" "),this},o.prototype.removeMatching=function(e){var t=this.array();for(var n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},o.prototype.toggle=function(e,t){return this.list?("undefined"!=typeof t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this):("undefined"!=typeof t?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this)},o.prototype.array=function(){var e=this.el.className.replace(/^\s+|\s+$/g,""),t=e.split(i);return""===t[0]&&t.shift(),t},o.prototype.has=o.prototype.contains=function(e){return this.list?this.list.contains(e):!!~r(this.array(),e)}}),e.register("component~event@0.1.4",function(e,t){var n=window
.addEventListener?"addEventListener":"attachEvent",r=window.removeEventListener?"removeEventListener":"detachEvent",i=n!=="addEventListener"?"on":"";e.bind=function(e,t,r,s){return e[n](i+t,r,s||!1),r},e.unbind=function(e,t,n,s){return e[r](i+t,n,s||!1),n}}),e.register("component~query@0.0.3",function(e,t){function n(e,t){return t.querySelector(e)}e=t.exports=function(e,t){return t=t||document,n(e,t)},e.all=function(e,t){return t=t||document,t.querySelectorAll(e)},e.engine=function(t){if(!t.one)throw new Error(".one callback required");if(!t.all)throw new Error(".all callback required");return n=t.one,e.all=t.all,e}}),e.register("component~matches-selector@0.1.5",function(t,n){function o(e,t){if(!e||e.nodeType!==1)return!1;if(s)return s.call(e,t);var n=r.all(t,e.parentNode);for(var i=0;i<n.length;++i)if(n[i]==e)return!0;return!1}var r=e("component~query@0.0.3"),i=Element.prototype,s=i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector;n.exports=o}),e.register("component~closest@0.1.4",function(t,n){var r=e("component~matches-selector@0.1.5");n.exports=function(e,t,n,i){e=n?{parentNode:e}:e,i=i||document;while((e=e.parentNode)&&e!==document){if(r(e,t))return e;if(e===i)return}}}),e.register("component~delegate@0.2.3",function(t,n){var r=e("component~closest@0.1.4"),i=e("component~event@0.1.4");t.bind=function(e,t,n,s,o){return i.bind(e,n,function(n){var i=n.target||n.srcElement;n.delegateTarget=r(i,t,!0,e),n.delegateTarget&&s.call(e,n)},o)},t.unbind=function(e,t,n,r){i.unbind(e,t,n,r)}}),e.register("component~events@1.0.9",function(t,n){function s(e,t){if(!(this instanceof s))return new s(e,t);if(!e)throw new Error("element required");if(!t)throw new Error("object required");this.el=e,this.obj=t,this._events={}}function o(e){var t=e.split(/ +/);return{name:t.shift(),selector:t.join(" ")}}var r=e("component~event@0.1.4"),i=e("component~delegate@0.2.3");n.exports=s,s.prototype.sub=function(e,t,n){this._events[e]=this._events[e]||{},this._events[e][t]=n},s.prototype.bind=function(e,t){function l(){var e=[].slice.call(arguments).concat(f);u[t].apply(u,e)}var n=o(e),s=this.el,u=this.obj,a=n.name,t=t||"on"+a,f=[].slice.call(arguments,2);return n.selector?l=i.bind(s,n.selector,a,l):r.bind(s,a,l),this.sub(a,t,l),l},s.prototype.unbind=function(e,t){if(0==arguments.length)return this.unbindAll();if(1==arguments.length)return this.unbindAllOf(e);var n=this._events[e];if(!n)return;var i=n[t];if(!i)return;r.unbind(this.el,e,i)},s.prototype.unbindAll=function(){for(var e in this._events)this.unbindAllOf(e)},s.prototype.unbindAllOf=function(e){var t=this._events[e];if(!t)return;for(var n in t)this.unbind(e,n)}}),e.register("switchery",function(t,n){function a(e,t){if(!(this instanceof a))return new a(e,t);this.element=e,this.options=t||{};for(var n in u)this.options[n]==null&&(this.options[n]=u[n]);this.element!=null&&this.element.type=="checkbox"&&this.init(),this.isDisabled()===!0&&this.disable()}var r=e("abpetkov~transitionize@0.0.3"),i=e("ftlabs~fastclick@v0.6.11"),s=e("component~classes@1.2.1"),o=e("component~events@1.0.9");n.exports=a;var u={color:"#64bd63",secondaryColor:"#dfdfdf",jackColor:"#fff",jackSecondaryColor:null,className:"switchery",disabled:!1,disabledOpacity:.5,speed:"0.4s",size:"default"};a.prototype.hide=function(){this.element.style.display="none"},a.prototype.show=function(){var e=this.create();this.insertAfter(this.element,e)},a.prototype.create=function(){return this.switcher=document.createElement("span"),this.jack=document.createElement("small"),this.switcher.appendChild(this.jack),this.switcher.className=this.options.className,this.events=o(this.switcher,this),this.switcher},a.prototype.insertAfter=function(e,t){e.parentNode.insertBefore(t,e.nextSibling)},a.prototype.setPosition=function(e){var t=this.isChecked(),n=this.switcher,r=this.jack;e&&t?t=!1:e&&!t&&(t=!0),t===!0?(this.element.checked=!0,window.getComputedStyle?r.style.left=parseInt(window.getComputedStyle(n).width)-parseInt(window.getComputedStyle(r).width)+"px":r.style.left=parseInt(n.currentStyle.width)-parseInt(r.currentStyle.width)+"px",this.options.color&&this.colorize()):(r.style.left=0,this.element.checked=!1,this.switcher.style.boxShadow="inset 0 0 0 0 "+this.options.secondaryColor,this.switcher.style.borderColor=this.options.secondaryColor,this.switcher.style.backgroundColor=this.options.secondaryColor!==u.secondaryColor?this.options.secondaryColor:"#fff",this.jack.style.backgroundColor=this.options.jackSecondaryColor!==this.options.jackColor?this.options.jackSecondaryColor:this.options.jackColor),e&&this.setSpeed()},a.prototype.setSpeed=function(){var e={},t={"background-color":this.options.speed,left:this.options.speed.replace(/[a-z]/,"")/2+"s"};this.isChecked()?e={border:this.options.speed,"box-shadow":this.options.speed,"background-color":this.options.speed.replace(/[a-z]/,"")*3+"s"}:e={border:this.options.speed,"box-shadow":this.options.speed},r(this.switcher,e),r(this.jack,t)},a.prototype.setSize=function(){var e="switchery-small",t="switchery-default",n="switchery-large";switch(this.options.size){case"small":s(this.switcher).add(e);break;case"large":s(this.switcher).add(n);break;default:s(this.switcher).add(t)}},a.prototype.colorize=function(){var e=this.switcher.offsetHeight/2;this.switcher.style.backgroundColor=this.options.color,this.switcher.style.borderColor=this.options.color,this.switcher.style.boxShadow="inset 0 0 0 "+e+"px "+this.options.color,this.jack.style.backgroundColor=this.options.jackColor},a.prototype.handleOnchange=function(e){if(document.dispatchEvent){var t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!0),this.element.dispatchEvent(t)}else this.element.fireEvent("onchange")},a.prototype.handleChange=function(){var e=this,t=this.element;t.addEventListener?t.addEventListener("change",function(){e.setPosition()}):t.attachEvent("onchange",function(){e.setPosition()})},a.prototype.handleClick=function(){var e=this.switcher;i(e),this.events.bind("click","bindClick")},a.prototype.bindClick=function(){var e=this.element.parentNode.tagName.toLowerCase(),t=e==="label"?!1:!0;this.setPosition(t),this.handleOnchange(this.element.checked)},a.prototype.markAsSwitched=function(){this.element.setAttribute("data-switchery",!0)},a.prototype.markedAsSwitched=function(){return this.element.getAttribute("data-switchery")},a.prototype.init=function(){this.hide(),this.show(),this.setSize(),this.setPosition(),this.markAsSwitched(),this.handleChange(),this.handleClick()},a.prototype.isChecked=function(){return this.element.checked},a.prototype.isDisabled=function(){return this.options.disabled||this.element.disabled||this.element.readOnly},a.prototype.destroy=function(){this.events.unbind()},a.prototype.enable=function(){this.options.disabled&&(this.options.disabled=!1),this.element.disabled&&(this.element.disabled=!1),this.element.readOnly&&(this.element.readOnly=!1),this.switcher.style.opacity=1,this.events.bind("click","bindClick")},a.prototype.disable=function(){this.options.disabled||(this.options.disabled=!0),this.element.disabled||(this.element.disabled=!0),this.element.readOnly||(this.element.readOnly=!0),this.switcher.style.opacity=this.options.disabledOpacity,this.destroy()}}),typeof exports=="object"?module.exports=e("switchery"):typeof define=="function"&&define.amd?define("Switchery",[],function(){return e("switchery")}):(this||window).Switchery=e("switchery")}(),function(e,t){typeof exports=="object"&&typeof module!="undefined"?module.exports=t():typeof define=="function"&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";function t(){return e.apply(null,arguments)}function n(t){e=t}function r(e){return Object.prototype.toString.call(e)==="[object Array]"}function i(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function s(e,t){var n=[],r;for(r=0;r<e.length;++r)n.push(t(e[r],r));return n}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e,t){for(var n in t)o(t,n)&&(e[n]=t[n]);return o(t,"toString")&&(e.toString=t.toString),o(t,"valueOf")&&(e.valueOf=t.valueOf),e}function a(e,t,n,r){return En(e,t,n,r,!0).utc()}function f(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function l(e){return e._pf==null&&(e._pf=f()),e._pf}function c(e){if(e._isValid==null){var t=l(e);e._isValid=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated,e._strict&&(e._isValid=e._isValid&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===undefined)}return e._isValid}function h(e){var t=a(NaN);return e!=null?u(l(t),e):l(t).userInvalidated=!0,t}function p(e){return e===void 0}function v(e,t){var n,r,i;p(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),p(t._i)||(e._i=t._i),p(t._f)||(e._f=t._f),p(t._l)||(e._l=t._l),p(t._strict)||(e._strict=t._strict),p(t._tzm)||(e._tzm=t._tzm),p(t._isUTC)||(e._isUTC=t._isUTC),p(t._offset)||(e._offset=t._offset),p(t._pf)||(e._pf=l(t)),p(t._locale)||(e._locale=t._locale);if(d.length>0)for(n in d)r=d[n],i=t[r],p(i)||(e[r]=i);return e}function g(e){v(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),m===!1&&(m=!0,t.updateOffset(this),m=!1)}function y(e){return e instanceof g||e!=null&&e._isAMomentObject!=null}function b(e){return e<0?Math.ceil(e):Math.floor(e)}function w(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(n=b(t)),n}function E(e,t,n){var r=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),s=0,o;for(o=0;o<r;o++)(n&&e[o]!==t[o]||!n&&w(e[o])!==w(t[o]))&&s++;return s+i}function S(){}function N(e){return e?e.toLowerCase().replace("_","-"):e}function C(e){var t=0,n,r,i,s;while(t<e.length){s=N(e[t]).split("-"),n=s.length,r=N(e[t+1]),r=r?r.split("-"):null;while(n>0){i=k(s.slice(0,n).join("-"));if(i)return i;if(r&&r.length>=n&&E(s,r,!0)>=n-1)break;n--}t++}return null}function k(e){var t=null;if(!x[e]&&!p(module)&&module&&module.exports)try{t=T._abbr,require("./locale/"+e),L(t)}catch(n){}return x[e]}function L(e,t){var n;return e&&(p(t)?n=O(e):n=A(e,t),n&&(T=n)),T._abbr}function A(e,t){return t!==null?(t.abbr=e,x[e]=x[e]||new S,x[e].set(t),L(e),x[e]):(delete x[e],null)}function O(e){var t;e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr);if(!e)return T;if(!r(e)){t=k(e);if(t)return t;e=[e]}return C(e)}function _(e,t){var n=e.toLowerCase();M[n]=M[n+"s"]=M[t]=e}function D(e){return typeof e=="string"?M[e]||M[e.toLowerCase()]:undefined}function P(e){var t={},n,r;for(r in e)o(e,r)&&(n=D(r),n&&(t[n]=e[r]));return t}function H(e){return e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function B(e,n){return function(r){return r!=null?(F(this,e,r),t.updateOffset(this,n),this):j(this,e)}}function j(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function F(e,t,n){e.isValid()&&e._d["set"+(e._isUTC?"UTC":"")+t](n)}function I(e,t){var n;if(typeof e=="object")for(n in e)this.set(n,e[n]);else{e=D(e);if(H(this[e]))return this[e](t)}return this}function q(e,t,n){var r=""+Math.abs(e),i=t-r.length,s=e>=0;return(s?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}function X(e,t,n,r){var i=r;typeof r=="string"&&(i=function(){return this[r]()}),e&&(W[e]=i),t&&(W[t[0]]=function(){return q(i.apply(this,arguments),t[1],t[2])}),n&&(W[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function V(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function $(e){var t=e.match(R),n,r;for(n=0,r=t.length;n<r;n++)W[t[n]]?t[n]=W[t[n]]:t[n]=V(t[n]);return function(i){var s="";for(n=0;n<r;n++)s+=t[n]instanceof Function?t[n].call(i,e):t[n];return s}}function J(e,t){return e.isValid()?(t=K(t,e.localeData()),z[t]=z[t]||$(t),z[t](e)):e.localeData().invalidDate()}function K(e,t){function r(e){return t.longDateFormat(e)||e}var n=5;U.lastIndex=0;while(n>=0&&U.test(e))e=e.replace(U,r),U.lastIndex=0,n-=1;return e}function dt(e,t,n){pt[e]=H(t)?t:function(e){return e&&n?n:t}}function vt(e,t){return o(pt,e)?pt[e](t._strict,t._locale):new RegExp(mt(e))}function mt(e){return e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function yt(e,t){var n,r=t;typeof e=="string"&&(e=[e]),typeof t=="number"&&(r=function(e,n){n[t]=w(e)});for(n=0;n<e.length;n++)gt[e[n]]=r}function bt(e,t){yt(e,function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)})}function wt(e,t,n){t!=null&&o(gt,e)&&gt[e](t,n._a,n,e)}function Ot(e,t){return(new Date(Date.UTC(e,t+1,0))).getUTCDate()}function Dt(e,t){return r(this._months)?this._months[e.month()]:this._months[Mt.test(t)?"format":"standalone"][e.month()]}function Ht(e,t){return r(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Mt.test(t)?"format":"standalone"][e.month()]}function Bt(e,t,n){var r,i,s;this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(r=0;r<12;r++){i=a([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),!n&&!this._monthsParse[r]&&(s="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(s.replace(".",""),"i"));if(n&&t==="MMMM"&&this._longMonthsParse[r].test(e))return r;if(n&&t==="MMM"&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function jt(e,t){var n;if(!e.isValid())return e;if(typeof t=="string"){t=e.localeData().monthsParse(t);if(typeof t!="number")return e}return n=Math.min(e.date(),Ot(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function Ft(e){return e!=null?(jt(this,e),t.updateOffset(this,!0),this):j(this,"Month")}function It(){return Ot(this.year(),this.month())}function qt(e){var t,n=e._a;return n&&l(e).overflow===-2&&(t=n[St]<0||n[St]>11?St:n[xt]<1||n[xt]>Ot(n[Et],n[St])?xt:n[Tt]<0||n[Tt]>24||n[Tt]===24&&(n[Nt]!==0||n[Ct]!==0||n[kt]!==0)?Tt:n[Nt]<0||n[Nt]>59?Nt:n[Ct]<0||n[Ct]>59?Ct:n[kt]<0||n[kt]>999?kt:-1,l(e)._overflowDayOfYear&&(t<Et||t>xt)&&(t=xt),l(e)._overflowWeeks&&t===-1&&(t=Lt),l(e)._overflowWeekday&&t===-1&&(t=At),l(e).overflow=t),e}function Rt(e){t.suppressDeprecationWarnings===!1&&!p(console)&&console.warn&&console.warn("Deprecation warning: "+e)}function Ut(e,t){var n=!0;return u(function(){return n&&(Rt(e+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),n=!1),t.apply(this,arguments)},t)}function Wt(e,t){zt[e]||(Rt(t),zt[e]=!0)}function Gt(e){var t,n,r=e._i,i=Xt.exec(r)||Vt.exec(r),s,o,u,a;if(i){l(e).iso=!0;for(t=0,n=Jt.length;t<n;t++)if(Jt[t][1].exec(i[1])){o=Jt[t][0],s=Jt[t][2]!==!1;break}if(o==null){e._isValid=!1;return}if(i[3]){for(t=0,n=Kt.length;t<n;t++)if(Kt[t][1].exec(i[3])){u=(i[2]||" ")+Kt[t][0];break}if(u==null){e._isValid=!1;return}}if(!s&&u!=null){e._isValid=!1;return}if(i[4]){if(!$t.exec(i[4])){e._isValid=!1;return}a="Z"}e._f=o+(u||"")+(a||""),dn(e)}else e._isValid=!1}function Yt(e){var n=Qt.exec(e._i);if(n!==null){e._d=new Date(+n[1]);return}Gt(e),e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e))}function Zt(e,t,n,r,i,s,o){var u=new Date(e,t,n,r,i,s,o);return e<100&&e>=0&&isFinite(u.getFullYear())&&u.setFullYear(e),u}function en(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function tn(e){return nn(e)?366:365}function nn(e){return e%4===0&&e%100!==0||e%400===0}function sn(){return nn(this.year())}function on(e,t,n){var r=7+t-n,i=(7+en(e,0,r).getUTCDay()-t)%7;return-i+r-1}function un(e,t,n,r,i){var s=(7+n-r)%7,o=on(e,r,i),u=1+7*(t-1)+s+o,a,f;return u<=0?(a=e-1,f=tn(a)+u):u>tn(e)?(a=e+1,f=u-tn(e)):(a=e,f=u),{year:a,dayOfYear:f}}function an(e,t,n){var r=on(e.year(),t,n),i=Math.floor((e.dayOfYear()-r-1)/7)+1,s,o;return i<1?(o=e.year()-1,s=i+fn(o,t,n)):i>fn(e.year(),t,n)?(s=i-fn(e.year(),t,n),o=e.year()+1):(o=e.year(),s=i),{week:s,year:o}}function fn(e,t,n){var r=on(e,t,n),i=on(e+1,t,n);return(tn(e)-r+i)/7}function ln(e,t,n){return e!=null?e:t!=null?t:n}function cn(e){var n=new Date(t.now());return e._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function hn(e){var t,n,r=[],i,s;if(e._d)return;i=cn(e),e._w&&e._a[xt]==null&&e._a[St]==null&&pn(e),e._dayOfYear&&(s=ln(e._a[Et],i[Et]),e._dayOfYear>tn(s)&&(l(e)._overflowDayOfYear=!0),n=en(s,0,e._dayOfYear),e._a[St]=n.getUTCMonth(),e._a[xt]=n.getUTCDate());for(t=0;t<3&&e._a[t]==null;++t)e._a[t]=r[t]=i[t];for(;t<7;t++)e._a[t]=r[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[Tt]===24&&e._a[Nt]===0&&e._a[Ct]===0&&e._a[kt]===0&&(e._nextDay=!0,e._a[Tt]=0),e._d=(e._useUTC?en:Zt).apply(null,r),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Tt]=24)}function pn(e){var t,n,r,i,s,o,u,a;t=e._w;if(t.GG!=null||t.W!=null||t.E!=null){s=1,o=4,n=ln(t.GG,e._a[Et],an(Sn(),1,4).year),r=ln(t.W,1),i=ln(t.E,1);if(i<1||i>7)a=!0}else{s=e._locale._week.dow,o=e._locale._week.doy,n=ln(t.gg,e._a[Et],an(Sn(),s,o).year),r=ln(t.w,1);if(t.d!=null){i=t.d;if(i<0||i>6)a=!0}else if(t.e!=null){i=t.e+s;if(t.e<0||t.e>6)a=!0}else i=s}r<1||r>fn(n,s,o)?l(e)._overflowWeeks=!0:a!=null?l(e)._overflowWeekday=!0:(u=un(n,r,i,s,o),e._a[Et]=u.year,e._dayOfYear=u.dayOfYear)}function dn(e){if(e._f===t.ISO_8601){Gt(e);return}e._a=[],l(e).empty=!0;var n=""+e._i,r,i,s,o,u,a=n.length,f=0;s=K(e._f,e._locale).match(R)||[];for(r=0;r<s.length;r++)o=s[r],i=(n.match(vt(o,e))||[])[0],i&&(u=n.substr(0,n.indexOf(i)),u.length>0&&l(e).unusedInput.push(u),n=n.slice(n.indexOf(i)+i.length),f+=i.length),W[o]?(i?l(e).empty=!1:l(e).unusedTokens.push(o),wt(o,i,e)):e._strict&&!i&&l(e).unusedTokens.push(o);l(e).charsLeftOver=a-f,n.length>0&&l(e).unusedInput.push(n),l(e).bigHour===!0&&e._a[Tt]<=12&&e._a[Tt]>0&&(l(e).bigHour=undefined),e._a[Tt]=vn(e._locale,e._a[Tt],e._meridiem),hn(e),qt(e)}function vn(e,t,n){var r;return n==null?t:e.meridiemHour!=null?e.meridiemHour(t,n):e.isPM!=null?(r=e.isPM(n),r&&t<12&&(t+=12),!r&&t===12&&(t=0),t):t}function mn(e){var t,n,r,i,s;if(e._f.length===0){l(e).invalidFormat=!0,e._d=new Date(NaN);return}for(i=0;i<e._f.length;i++){s=0,t=v({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[i],dn(t);if(!c(t))continue;s+=l(t).charsLeftOver,s+=l(t).unusedTokens.length*10,l(t).score=s;if(r==null||s<r)r=s,n=t}u(e,n||t)}function gn(e){if(e._d)return;var t=P(e._i);e._a=s([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),hn(e)}function yn(e){var t=new g(qt(bn(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=undefined),t}function bn(e){var t=e._i,n=e._f;return e._locale=e._locale||O(e._l),t===null||n===undefined&&t===""?h({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),y(t)?new g(qt(t)):(r(n)?mn(e):n?dn(e):i(t)?e._d=t:wn(e),c(e)||(e._d=null),e))}function wn(e){var n=e._i;n===undefined?e._d=new Date(t.now()):i(n)?e._d=new Date(+n):typeof n=="string"?Yt(e):r(n)?(e._a=s(n.slice(0),function(e){return parseInt(e,10)}),hn(e)):typeof n=="object"?gn(e):typeof n=="number"?e._d=new Date(n):t.createFromInputFallback(e)}function En(e,t,n,r,i){var s={};return typeof n=="boolean"&&(r=n,n=undefined),s._isAMomentObject=!0,s._useUTC=s._isUTC=i,s._l=n,s._i=e,s._f=t,s._strict=r,yn(s)}function Sn(e,t,n,r){return En(e,t,n,r,!1)}function Nn(e,t){var n,i;t.length===1&&r(t[0])&&(t=t[0]);if(!t.length)return Sn();n=t[0];for(i=1;i<t.length;++i)if(!t[i].isValid()||t[i][e](n))n=t[i];return n}function Cn(){var e=[].slice.call(arguments,0);return Nn("isBefore",e)}function kn(){var e=[].slice.call(arguments,0);return Nn("isAfter",e)}function An(e){var t=P(e),n=t.year||0,r=t.quarter||0,i=t.month||0,s=t.week||0,o=t.day||0,u=t.hour||0,a=t.minute||0,f=t.second||0,l=t.millisecond||0;this._milliseconds=+l+f*1e3+a*6e4+u*36e5,this._days=+o+s*7,this._months=+i+r*3+n*12,this._data={},this._locale=O(),this._bubble()}function On(e){return e instanceof An}function Mn(e,t){X(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+q(~~(e/60),2)+t+q(~~e%60,2)})}function Dn(e,t){var n=(t||"").match(e)||[],r=n[n.length-1]||[],i=(r+"").match(_n)||["-",0,0],s=+(i[1]*60)+w(i[2]);return i[0]==="+"?s:-s}function Pn(e,n){var r,s;return n._isUTC?(r=n.clone(),s=(y(e)||i(e)?+e:+Sn(e))- +r,r._d.setTime(+r._d+s),t.updateOffset(r,!1),r):Sn(e).local()}function Hn(e){return-Math.round(e._d.getTimezoneOffset()/15)*15}function Bn(e,n){var r=this._offset||0,i;return this.isValid()?e!=null?(typeof e=="string"?e=Dn(lt,e):Math.abs(e)<16&&(e*=60),!this._isUTC&&n&&(i=Hn(this)),this._offset=e,this._isUTC=!0,i!=null&&this.add(i,"m"),r!==e&&(!n||this._changeInProgress?er(this,Kn(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?r:Hn(this):e!=null?this:NaN}function jn(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Fn(e){return this.utcOffset(0,e)}function In(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Hn(this),"m")),this}function qn(){return this._tzm?this.utcOffset(this._tzm):typeof this._i=="string"&&this.utcOffset(Dn(ft,this._i)),this}function Rn(e){return this.isValid()?(e=e?Sn(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function Un(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function zn(){if(!p(this._isDSTShifted))return this._isDSTShifted;var e={};v(e,this),e=bn(e);if(e._a){var t=e._isUTC?a(e._a):Sn(e._a);this._isDSTShifted=this.isValid()&&E(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Wn(){return this.isValid()?!this._isUTC:!1}function Xn(){return this.isValid()?this._isUTC:!1}function Vn(){return this.isValid()?this._isUTC&&this._offset===0:!1}function Kn(e,t){var n=e,r=null,i,s,u;return On(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:typeof e=="number"?(n={},t?n[t]=e:n.milliseconds=e):(r=$n.exec(e))?(i=r[1]==="-"?-1:1,n={y:0,d:w(r[xt])*i,h:w(r[Tt])*i,m:w(r[Nt])*i,s:w(r[Ct])*i,ms:w(r[kt])*i}):(r=Jn.exec(e))?(i=r[1]==="-"?-1:1,n={y:Qn(r[2],i),M:Qn(r[3],i),d:Qn(r[4],i),h:Qn(r[5],i),m:Qn(r[6],i),s:Qn(r[7],i),w:Qn(r[8],i)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(u=Yn(Sn(n.from),Sn(n.to)),n={},n.ms=u.milliseconds,n.M=u.months),s=new An(n),On(e)&&o(e,"_locale")&&(s._locale=e._locale),s}function Qn(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Gn(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t- +e.clone().add(n.months,"M"),n}function Yn(e,t){var n;return!e.isValid()||!t.isValid()?{milliseconds:0,months:0}:(t=Pn(t,e),e.isBefore(t)?n=Gn(e,t):(n=Gn(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n)}function Zn(e,t){return function(n,r){var i,s;return r!==null&&!isNaN(+r)&&(Wt(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),s=n,n=r,r=s),n=typeof n=="string"?+n:n,i=Kn(n,r),er(this,i,e),this}}function er(e,n,r,i){var s=n._milliseconds,o=n._days,u=n._months;if(!e.isValid())return;i=i==null?!0:i,s&&e._d.setTime(+e._d+s*r),o&&F(e,"Date",j(e,"Date")+o*r),u&&jt(e,j(e,"Month")+u*r),i&&t.updateOffset(e,o||u)}function rr(e,t){var n=e||Sn(),r=Pn(n,this).startOf("day"),i=this.diff(r,"days",!0),s=i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse",o=t&&(H(t[s])?t[s]():t[s]);return this.format(o||this.localeData().calendar(s,this,Sn(n)))}function ir(){return new g(this)}function sr(e,t){var n=y(e)?e:Sn(e);return!this.isValid()||!n.isValid()?!1:(t=D(p(t)?"millisecond":t),t==="millisecond"?+this>+n:+n<+this.clone().startOf(t))}function or(e,t){var n=y(e)?e:Sn(e);return!this.isValid()||!n.isValid()?!1:(t=D(p(t)?"millisecond":t),t==="millisecond"?+this<+n:+this.clone().endOf(t)<+n)}function ur(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)}function ar(e,t){var n=y(e)?e:Sn(e),r;return!this.isValid()||!n.isValid()?!1:(t=D(t||"millisecond"),t==="millisecond"?+this===+n:(r=+n,+this.clone().startOf(t)<=r&&r<=+this.clone().endOf(t)))}function fr(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function lr(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function cr(e,t,n){var r,i,s,o;return this.isValid()?(r=Pn(e,this),r.isValid()?(i=(r.utcOffset()-this.utcOffset())*6e4,t=D(t),t==="year"||t==="month"||t==="quarter"?(o=hr(this,r),t==="quarter"?o/=3:t==="year"&&(o/=12)):(s=this-r,o=t==="second"?s/1e3:t==="minute"?s/6e4:t==="hour"?s/36e5:t==="day"?(s-i)/864e5:t==="week"?(s-i)/6048e5:s),n?o:b(o)):NaN):NaN}function hr(e,t){var n=(t.year()-e.year())*12+(t.month()-e.month()),r=e.clone().add(n,"months"),i,s;return t-r<0?(i=e.clone().add(n-1,"months"),s=(t-r)/(r-i)):(i=e.clone().add(n+1,"months"),s=(t-r)/(i-r)),-(n+s)}function pr(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function dr(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?H(Date.prototype.toISOString)?this.toDate().toISOString():J(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):J(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function vr(e){var n=J(this,e||t.defaultFormat);return this.localeData().postformat(n)}function mr(e,t){return this.isValid()&&(y(e)&&e.isValid()||Sn(e).isValid())?Kn({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function gr(e){return this.from(Sn(),e)}function yr(e,t){return this.isValid()&&(y(e)&&e.isValid()||Sn(e).isValid())?Kn({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function br(e){return this.to(Sn(),e)}function wr(e){var t;return e===undefined?this._locale._abbr:(t=O(e),t!=null&&(this._locale=t),this)}function Sr(){return this._locale}function xr(e){e=D(e);switch(e){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return e==="week"&&this.weekday(0),e==="isoWeek"&&this.isoWeekday(1),e==="quarter"&&this.month(Math.floor(this.month()/3)*3),this}function Tr(e){return e=D(e),e===undefined||e==="millisecond"?this:this.startOf(e).add(1,e==="isoWeek"?"week":e).subtract(1,"ms")}function Nr(){return+this._d-(this._offset||0)*6e4}function Cr(){return Math.floor(+this/1e3)}function kr(){return this._offset?new Date(+this):this._d}function Lr(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Ar(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Or(){return this.isValid()?this.toISOString():"null"}function Mr(){return c(this)}function _r(){return u({},l(this))}function Dr(){return l(this).overflow}function Pr(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Hr(e,t){X(0,[e,e.length],0,t)}function Br(e){return qr.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function jr(e){return qr.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Fr(){return fn(this.year(),1,4)}function Ir(){var e=this.localeData()._week;return fn(this.year(),e.dow,e.doy)}function qr(e,t,n,r,i){var s;return e==null?an(this,r,i).year:(s=fn(e,r,i),t>s&&(t=s),Rr.call(this,e,t,n,r,i))}function Rr(e,t,n,r,i){var s=un(e,t,n,r,i),o=en(s.year,0,s.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}function Ur(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}function zr(e){return an(e,this._week.dow,this._week.doy).week}function Xr(){return this._week.dow}function Vr(){return this._week.doy}function $r(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function Jr(e){var t=an(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}function Qr(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function Yr(e,t){return r(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]}function ei(e){return this._weekdaysShort[e.day()]}function ni(e){return this._weekdaysMin[e.day()]}function ri(e,t,n){var r,i,s;this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(r=0;r<7;r++){i=Sn([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".",".?")+"$","i")),this._weekdaysParse[r]||(s="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(s.replace(".",""),"i"));if(n&&t==="dddd"&&this._fullWeekdaysParse[r].test(e))return r;if(n&&t==="ddd"&&this._shortWeekdaysParse[r].test(e))return r;if(n&&t==="dd"&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function ii(e){if(!this.isValid())return e!=null?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=Qr(e,this.localeData()),this.add(e-t,"d")):t}function si(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function oi(e){return this.isValid()?e==null?this.day()||7:this.day(this.day()%7?e:e-7):e!=null?this:NaN}function ui(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}function ai(){return this.hours()%12||12}function fi(e,t){X(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function li(e,t){return t._meridiemParse}function ci(e){return(e+"").toLowerCase().charAt(0)==="p"}function pi(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function yi(e,t){t[kt]=w(("0."+e)*1e3)}function wi(){return this._isUTC?"UTC":""}function Ei(){return this._isUTC?"Coordinated Universal Time":""}function Ti(e){return Sn(e*1e3)}function Ni(){return Sn.apply(null,arguments).parseZone()}function ki(e,t,n){var r=this._calendar[e];return H(r)?r.call(t,n):r}function Ai(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function Mi(){return this._invalidDate}function Pi(e){return this._ordinal.replace("%d",e)}function Hi(e){return e}function ji(e,t,n,r){var i=this._relativeTime[n];return H(i)?i(e,t,n,r):i.replace(/%d/i,e)}function Fi(e,t){var n=this._relativeTime[e>0?"future":"past"];return H(n)?n(t):n.replace(/%s/i,t)}function Ii(e){var t,n;for(n in e)t=e[n],H(t)?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function Ri(e,t,n,r){var i=O(),s=a().set(r,t);return i[n](s,e)}function Ui(e,t,n,r,i){typeof e=="number"&&(t=e,e=undefined),e=e||"";if(t!=null)return Ri(e,t,n,i);var s,o=[];for(s=0;s<r;s++)o[s]=Ri(e,s,n,i);return o}function zi(e,t){return Ui(e,t,"months",12,"month")}function Wi(e,t){return Ui(e,t,"monthsShort",12,"month")}function Xi(e,t){return Ui(e,t,"weekdays",7,"day")}function Vi(e,t){return Ui(e,t,"weekdaysShort",7,"day")}function $i(e,t){return Ui(e,t,"weekdaysMin",7,"day")}function Ki(){var e=this._data;return this._milliseconds=Ji(this._milliseconds),this._days=Ji(this._days),this._months=Ji(this._months),e.milliseconds=Ji(e.milliseconds),e.seconds=Ji(e.seconds),e.minutes=Ji(e.minutes),e.hours=Ji(e.hours),e.months=Ji(e.months),e.years=Ji(e.years),this}function Qi(e,t,n,r){var i=Kn(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function Gi(e,t){return Qi(this,e,t,1)}function Yi(e,t){return Qi(this,e,t,-1)}function Zi(e){return e<0?Math.floor(e):Math.ceil(e)}function es(){var e=this._milliseconds,t=this._days,n=this._months,r=this._data,i,s,o,u,a;return e>=0&&t>=0&&n>=0||e<=0&&t<=0&&n<=0||(e+=Zi(ns(n)+t)*864e5,t=0,n=0),r.milliseconds=e%1e3,i=b(e/1e3),r.seconds=i%60,s=b(i/60),r.minutes=s%60,o=b(s/60),r.hours=o%24,t+=b(o/24),a=b(ts(t)),n+=a,t-=Zi(ns(a)),u=b(n/12),n%=12,r.days=t,r.months=n,r.years=u,this}function ts(e){return e*4800/146097}function ns(e){return e*146097/4800
}function rs(e){var t,n,r=this._milliseconds;e=D(e);if(e==="month"||e==="year")return t=this._days+r/864e5,n=this._months+ts(t),e==="month"?n:n/12;t=this._days+Math.round(ns(this._months));switch(e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return t*24+r/36e5;case"minute":return t*1440+r/6e4;case"second":return t*86400+r/1e3;case"millisecond":return Math.floor(t*864e5)+r;default:throw new Error("Unknown unit "+e)}}function is(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+w(this._months/12)*31536e6}function ss(e){return function(){return this.as(e)}}function ds(e){return e=D(e),this[e+"s"]()}function vs(e){return function(){return this._data[e]}}function xs(){return b(this.days()/7)}function Cs(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function ks(e,t,n){var r=Kn(e).abs(),i=Ts(r.as("s")),s=Ts(r.as("m")),o=Ts(r.as("h")),u=Ts(r.as("d")),a=Ts(r.as("M")),f=Ts(r.as("y")),l=i<Ns.s&&["s",i]||s<=1&&["m"]||s<Ns.m&&["mm",s]||o<=1&&["h"]||o<Ns.h&&["hh",o]||u<=1&&["d"]||u<Ns.d&&["dd",u]||a<=1&&["M"]||a<Ns.M&&["MM",a]||f<=1&&["y"]||["yy",f];return l[2]=t,l[3]=+e>0,l[4]=n,Cs.apply(null,l)}function Ls(e,t){return Ns[e]===undefined?!1:t===undefined?Ns[e]:(Ns[e]=t,!0)}function As(e){var t=this.localeData(),n=ks(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function Ms(){var e=Os(this._milliseconds)/1e3,t=Os(this._days),n=Os(this._months),r,i,s;r=b(e/60),i=b(r/60),e%=60,r%=60,s=b(n/12),n%=12;var o=s,u=n,a=t,f=i,l=r,c=e,h=this.asSeconds();return h?(h<0?"-":"")+"P"+(o?o+"Y":"")+(u?u+"M":"")+(a?a+"D":"")+(f||l||c?"T":"")+(f?f+"H":"")+(l?l+"M":"")+(c?c+"S":""):"P0D"}var e,d=t.momentProperties=[],m=!1,x={},T,M={},R=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,U=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,z={},W={},Q=/\d/,G=/\d\d/,Y=/\d{3}/,Z=/\d{4}/,et=/[+-]?\d{6}/,tt=/\d\d?/,nt=/\d\d\d\d?/,rt=/\d\d\d\d\d\d?/,it=/\d{1,3}/,st=/\d{1,4}/,ot=/[+-]?\d{1,6}/,ut=/\d+/,at=/[+-]?\d+/,ft=/Z|[+-]\d\d:?\d\d/gi,lt=/Z|[+-]\d\d(?::?\d\d)?/gi,ct=/[+-]?\d+(\.\d{1,3})?/,ht=/[0-9]*(a[mn]\s?)?['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\-]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,pt={},gt={},Et=0,St=1,xt=2,Tt=3,Nt=4,Ct=5,kt=6,Lt=7,At=8;X("M",["MM",2],"Mo",function(){return this.month()+1}),X("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),X("MMMM",0,0,function(e){return this.localeData().months(this,e)}),_("month","M"),dt("M",tt),dt("MM",tt,G),dt("MMM",ht),dt("MMMM",ht),yt(["M","MM"],function(e,t){t[St]=w(e)-1}),yt(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);i!=null?t[St]=i:l(n).invalidMonth=e});var Mt=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,_t="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Pt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sept_Oct_Nov_Dec".split("_"),zt={};t.suppressDeprecationWarnings=!1;var Xt=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Vt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,$t=/Z|[+-]\d\d(?::?\d\d)?/,Jt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Kt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Qt=/^\/?Date\((\-?\d+)/i;t.createFromInputFallback=Ut("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),X(0,["YY",2],0,function(){return this.year()%100}),X(0,["YYYY",4],0,"year"),X(0,["YYYYY",5],0,"year"),X(0,["YYYYYY",6,!0],0,"year"),_("year","y"),dt("Y",at),dt("YY",tt,G),dt("YYYY",st,Z),dt("YYYYY",ot,et),dt("YYYYYY",ot,et),yt(["YYYYY","YYYYYY"],Et),yt("YYYY",function(e,n){n[Et]=e.length===2?t.parseTwoDigitYear(e):w(e)}),yt("YY",function(e,n){n[Et]=t.parseTwoDigitYear(e)}),t.parseTwoDigitYear=function(e){return w(e)+(w(e)>68?1900:2e3)};var rn=B("FullYear",!1);t.ISO_8601=function(){};var xn=Ut("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=Sn.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:h()}),Tn=Ut("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=Sn.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:h()}),Ln=Date.now||function(){return+(new Date)};Mn("Z",":"),Mn("ZZ",""),dt("Z",lt),dt("ZZ",lt),yt(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Dn(lt,e)});var _n=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var $n=/(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Jn=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Kn.fn=An.prototype;var tr=Zn(1,"add"),nr=Zn(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Er=Ut("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===undefined?this.localeData():this.locale(e)});X(0,["gg",2],0,function(){return this.weekYear()%100}),X(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Hr("gggg","weekYear"),Hr("ggggg","weekYear"),Hr("GGGG","isoWeekYear"),Hr("GGGGG","isoWeekYear"),_("weekYear","gg"),_("isoWeekYear","GG"),dt("G",at),dt("g",at),dt("GG",tt,G),dt("gg",tt,G),dt("GGGG",st,Z),dt("gggg",st,Z),dt("GGGGG",ot,et),dt("ggggg",ot,et),bt(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=w(e)}),bt(["gg","GG"],function(e,n,r,i){n[i]=t.parseTwoDigitYear(e)}),X("Q",0,"Qo","quarter"),_("quarter","Q"),dt("Q",Q),yt("Q",function(e,t){t[St]=(w(e)-1)*3}),X("w",["ww",2],"wo","week"),X("W",["WW",2],"Wo","isoWeek"),_("week","w"),_("isoWeek","W"),dt("w",tt),dt("ww",tt,G),dt("W",tt),dt("WW",tt,G),bt(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=w(e)});var Wr={dow:0,doy:6};X("D",["DD",2],"Do","date"),_("date","D"),dt("D",tt),dt("DD",tt,G),dt("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),yt(["D","DD"],xt),yt("Do",function(e,t){t[xt]=w(e.match(tt)[0],10)});var Kr=B("Date",!0);X("d",0,"do","day"),X("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),X("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),X("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),X("e",0,0,"weekday"),X("E",0,0,"isoWeekday"),_("day","d"),_("weekday","e"),_("isoWeekday","E"),dt("d",tt),dt("e",tt),dt("E",tt),dt("dd",ht),dt("ddd",ht),dt("dddd",ht),bt(["dd","ddd","dddd"],function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);i!=null?t.d=i:l(n).invalidWeekday=e}),bt(["d","e","E"],function(e,t,n,r){t[r]=w(e)});var Gr="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Zr="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),ti="Su_Mo_Tu_We_Th_Fr_Sa".split("_");X("DDD",["DDDD",3],"DDDo","dayOfYear"),_("dayOfYear","DDD"),dt("DDD",it),dt("DDDD",Y),yt(["DDD","DDDD"],function(e,t,n){n._dayOfYear=w(e)}),X("H",["HH",2],0,"hour"),X("h",["hh",2],0,ai),X("hmm",0,0,function(){return""+ai.apply(this)+q(this.minutes(),2)}),X("hmmss",0,0,function(){return""+ai.apply(this)+q(this.minutes(),2)+q(this.seconds(),2)}),X("Hmm",0,0,function(){return""+this.hours()+q(this.minutes(),2)}),X("Hmmss",0,0,function(){return""+this.hours()+q(this.minutes(),2)+q(this.seconds(),2)}),fi("a",!0),fi("A",!1),_("hour","h"),dt("a",li),dt("A",li),dt("H",tt),dt("h",tt),dt("HH",tt,G),dt("hh",tt,G),dt("hmm",nt),dt("hmmss",rt),dt("Hmm",nt),dt("Hmmss",rt),yt(["H","HH"],Tt),yt(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),yt(["h","hh"],function(e,t,n){t[Tt]=w(e),l(n).bigHour=!0}),yt("hmm",function(e,t,n){var r=e.length-2;t[Tt]=w(e.substr(0,r)),t[Nt]=w(e.substr(r)),l(n).bigHour=!0}),yt("hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[Tt]=w(e.substr(0,r)),t[Nt]=w(e.substr(r,2)),t[Ct]=w(e.substr(i)),l(n).bigHour=!0}),yt("Hmm",function(e,t,n){var r=e.length-2;t[Tt]=w(e.substr(0,r)),t[Nt]=w(e.substr(r))}),yt("Hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[Tt]=w(e.substr(0,r)),t[Nt]=w(e.substr(r,2)),t[Ct]=w(e.substr(i))});var hi=/[ap]\.?m?\.?/i,di=B("Hours",!0);X("m",["mm",2],0,"minute"),_("minute","m"),dt("m",tt),dt("mm",tt,G),yt(["m","mm"],Nt);var vi=B("Minutes",!1);X("s",["ss",2],0,"second"),_("second","s"),dt("s",tt),dt("ss",tt,G),yt(["s","ss"],Ct);var mi=B("Seconds",!1);X("S",0,0,function(){return~~(this.millisecond()/100)}),X(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),X(0,["SSS",3],0,"millisecond"),X(0,["SSSS",4],0,function(){return this.millisecond()*10}),X(0,["SSSSS",5],0,function(){return this.millisecond()*100}),X(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),X(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),X(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),X(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),_("millisecond","ms"),dt("S",it,Q),dt("SS",it,G),dt("SSS",it,Y);var gi;for(gi="SSSS";gi.length<=9;gi+="S")dt(gi,ut);for(gi="S";gi.length<=9;gi+="S")yt(gi,yi);var bi=B("Milliseconds",!1);X("z",0,0,"zoneAbbr"),X("zz",0,0,"zoneName");var Si=g.prototype;Si.add=tr,Si.calendar=rr,Si.clone=ir,Si.diff=cr,Si.endOf=Tr,Si.format=vr,Si.from=mr,Si.fromNow=gr,Si.to=yr,Si.toNow=br,Si.get=I,Si.invalidAt=Dr,Si.isAfter=sr,Si.isBefore=or,Si.isBetween=ur,Si.isSame=ar,Si.isSameOrAfter=fr,Si.isSameOrBefore=lr,Si.isValid=Mr,Si.lang=Er,Si.locale=wr,Si.localeData=Sr,Si.max=Tn,Si.min=xn,Si.parsingFlags=_r,Si.set=I,Si.startOf=xr,Si.subtract=nr,Si.toArray=Lr,Si.toObject=Ar,Si.toDate=kr,Si.toISOString=dr,Si.toJSON=Or,Si.toString=pr,Si.unix=Cr,Si.valueOf=Nr,Si.creationData=Pr,Si.year=rn,Si.isLeapYear=sn,Si.weekYear=Br,Si.isoWeekYear=jr,Si.quarter=Si.quarters=Ur,Si.month=Ft,Si.daysInMonth=It,Si.week=Si.weeks=$r,Si.isoWeek=Si.isoWeeks=Jr,Si.weeksInYear=Ir,Si.isoWeeksInYear=Fr,Si.date=Kr,Si.day=Si.days=ii,Si.weekday=si,Si.isoWeekday=oi,Si.dayOfYear=ui,Si.hour=Si.hours=di,Si.minute=Si.minutes=vi,Si.second=Si.seconds=mi,Si.millisecond=Si.milliseconds=bi,Si.utcOffset=Bn,Si.utc=Fn,Si.local=In,Si.parseZone=qn,Si.hasAlignedHourOffset=Rn,Si.isDST=Un,Si.isDSTShifted=zn,Si.isLocal=Wn,Si.isUtcOffset=Xn,Si.isUtc=Vn,Si.isUTC=Vn,Si.zoneAbbr=wi,Si.zoneName=Ei,Si.dates=Ut("dates accessor is deprecated. Use date instead.",Kr),Si.months=Ut("months accessor is deprecated. Use month instead",Ft),Si.years=Ut("years accessor is deprecated. Use year instead",rn),Si.zone=Ut("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",jn);var xi=Si,Ci={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Li={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Oi="Invalid date",_i="%d",Di=/\d{1,2}/,Bi={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},qi=S.prototype;qi._calendar=Ci,qi.calendar=ki,qi._longDateFormat=Li,qi.longDateFormat=Ai,qi._invalidDate=Oi,qi.invalidDate=Mi,qi._ordinal=_i,qi.ordinal=Pi,qi._ordinalParse=Di,qi.preparse=Hi,qi.postformat=Hi,qi._relativeTime=Bi,qi.relativeTime=ji,qi.pastFuture=Fi,qi.set=Ii,qi.months=Dt,qi._months=_t,qi.monthsShort=Ht,qi._monthsShort=Pt,qi.monthsParse=Bt,qi.week=zr,qi._week=Wr,qi.firstDayOfYear=Vr,qi.firstDayOfWeek=Xr,qi.weekdays=Yr,qi._weekdays=Gr,qi.weekdaysMin=ni,qi._weekdaysMin=ti,qi.weekdaysShort=ei,qi._weekdaysShort=Zr,qi.weekdaysParse=ri,qi.isPM=ci,qi._meridiemParse=hi,qi.meridiem=pi,L("en",{monthsParse:[/^jan/i,/^feb/i,/^mar/i,/^apr/i,/^may/i,/^jun/i,/^jul/i,/^aug/i,/^sep/i,/^oct/i,/^nov/i,/^dec/i],longMonthsParse:[/^january$/i,/^february$/i,/^march$/i,/^april$/i,/^may$/i,/^june$/i,/^july$/i,/^august$/i,/^september$/i,/^october$/i,/^november$/i,/^december$/i],shortMonthsParse:[/^jan$/i,/^feb$/i,/^mar$/i,/^apr$/i,/^may$/i,/^jun$/i,/^jul$/i,/^aug/i,/^sept?$/i,/^oct$/i,/^nov$/i,/^dec$/i],ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=w(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}}),t.lang=Ut("moment.lang is deprecated. Use moment.locale instead.",L),t.langData=Ut("moment.langData is deprecated. Use moment.localeData instead.",O);var Ji=Math.abs,os=ss("ms"),us=ss("s"),as=ss("m"),fs=ss("h"),ls=ss("d"),cs=ss("w"),hs=ss("M"),ps=ss("y"),ms=vs("milliseconds"),gs=vs("seconds"),ys=vs("minutes"),bs=vs("hours"),ws=vs("days"),Es=vs("months"),Ss=vs("years"),Ts=Math.round,Ns={s:45,m:45,h:22,d:26,M:11},Os=Math.abs,_s=An.prototype;_s.abs=Ki,_s.add=Gi,_s.subtract=Yi,_s.as=rs,_s.asMilliseconds=os,_s.asSeconds=us,_s.asMinutes=as,_s.asHours=fs,_s.asDays=ls,_s.asWeeks=cs,_s.asMonths=hs,_s.asYears=ps,_s.valueOf=is,_s._bubble=es,_s.get=ds,_s.milliseconds=ms,_s.seconds=gs,_s.minutes=ys,_s.hours=bs,_s.days=ws,_s.weeks=xs,_s.months=Es,_s.years=Ss,_s.humanize=As,_s.toISOString=Ms,_s.toString=Ms,_s.toJSON=Ms,_s.locale=wr,_s.localeData=Sr,_s.toIsoString=Ut("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ms),_s.lang=Er,X("X",0,0,"unix"),X("x",0,0,"valueOf"),dt("x",at),dt("X",ct),yt("X",function(e,t,n){n._d=new Date(parseFloat(e,10)*1e3)}),yt("x",function(e,t,n){n._d=new Date(w(e))}),t.version="2.11.0",n(Sn),t.fn=xi,t.min=Cn,t.max=kn,t.now=Ln,t.utc=a,t.unix=Ti,t.months=zi,t.isDate=i,t.locale=L,t.invalid=h,t.duration=Kn,t.isMoment=y,t.weekdays=Xi,t.parseZone=Ni,t.localeData=O,t.isDuration=On,t.monthsShort=Wi,t.weekdaysMin=$i,t.defineLocale=A,t.weekdaysShort=Vi,t.normalizeUnits=D,t.relativeTimeThreshold=Ls,t.prototype=xi;var Ds=t;return Ds}),function(){function e(e,t){function c(e,t){return r.getComputedStyle||(r.getComputedStyle=function(e,t){return this.el=e,this.getPropertyValue=function(t){var n=/(\-([a-z]){1})/g;return t=="float"&&(t="styleFloat"),n.test(t)&&(t=t.replace(n,function(){return arguments[2].toUpperCase()})),e.currentStyle&&e.currentStyle[t]?e.currentStyle[t]:null},this}),r.getComputedStyle(e,null).getPropertyValue(t)}function h(t){var n=t||e.clientHeight,r=d(e);return Math.max(Math.floor(n/r),0)}function p(t){var n=d(e);return n*t}function d(e){var t=c(e,"line-height");return t=="normal"&&(t=parseInt(c(e,"font-size"))*1.2),parseInt(t)}function b(t){return t.lastChild.children&&t.lastChild.children.length>0?b(Array.prototype.slice.call(t.children).pop()):!t.lastChild||!t.lastChild.nodeValue||t.lastChild.nodeValue==""||t.lastChild.nodeValue==i.truncationChar?(t.lastChild.parentNode.removeChild(t.lastChild),b(e)):t.lastChild}function w(t,n){function r(){v=i.splitOnChars.slice(0),m=v[0],g=null,y=null}if(!n)return;var s=t.nodeValue.replace(i.truncationChar,"");g||(v.length>0?m=v.shift():m="",g=s.split(m)),g.length>1?(y=g.pop(),E(t,g.join(m))):g=null,l&&(t.nodeValue=t.nodeValue.replace(i.truncationChar,""),e.innerHTML=t.nodeValue+" "+l.innerHTML+i.truncationChar);if(g){if(e.clientHeight<=n){if(!(v.length>=0&&m!=""))return e.innerHTML;E(t,g.join(m)+m+y),g=null}}else m==""&&(E(t,""),t=b(e),r());if(!i.animate)return w(t,n);setTimeout(function(){w(t,n)},i.animate===!0?10:i.animate)}function E(e,t){e.nodeValue=t+i.truncationChar}t=t||{};var n=this,r=window,i={clamp:t.clamp||2,useNativeClamp:typeof t.useNativeClamp!="undefined"?t.useNativeClamp:!0,splitOnChars:t.splitOnChars||[".","-","–","—"," "],animate:t.animate||!1,truncationChar:t.truncationChar||"…",truncationHTML:t.truncationHTML},s=e.style,o=e.innerHTML,u=typeof e.style.webkitLineClamp!="undefined",a=i.clamp,f=a.indexOf&&(a.indexOf("px")>-1||a.indexOf("em")>-1),l;i.truncationHTML&&(l=document.createElement("span"),l.innerHTML=i.truncationHTML);var v=i.splitOnChars.slice(0),m=v[0],g,y;a=="auto"?a=h():f&&(a=h(parseInt(a)));var S;if(u&&i.useNativeClamp)s.overflow="hidden",s.textOverflow="ellipsis",s.webkitBoxOrient="vertical",s.display="-webkit-box",s.webkitLineClamp=a,f&&(s.height=i.clamp+"px");else{var x=p(a);x<=e.clientHeight&&(S=w(b(e),x))}return{original:o,clamped:S}}window.$clamp=e}(),function(e,t){typeof define=="function"&&define.amd?define(t):typeof exports=="object"?module.exports=t(require,exports,module):e.CountUp=t()}(this,function(e,t,n){var r=function(e,t,n,r,i,s){var o=0,u=["webkit","moz","ms","o"];for(var a=0;a<u.length&&!window.requestAnimationFrame;++a)window.requestAnimationFrame=window[u[a]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[u[a]+"CancelAnimationFrame"]||window[u[a]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,t){var n=(new Date).getTime(),r=Math.max(0,16-(n-o)),i=window.setTimeout(function(){e(n+r)},r);return o=n+r,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)}),this.options={useEasing:!0,useGrouping:!0,separator:",",decimal:"."};for(var f in s)s.hasOwnProperty(f)&&(this.options[f]=s[f]);this.options.separator===""&&(this.options.useGrouping=!1),this.options.prefix||(this.options.prefix=""),this.options.suffix||(this.options.suffix=""),this.d=typeof e=="string"?document.getElementById(e):e,this.startVal=Number(t),isNaN(t)&&(this.startVal=Number(t.match(/[\d]+/g).join(""))),this.endVal=Number(n),isNaN(n)&&(this.endVal=Number(n.match(/[\d]+/g).join(""))),this.countDown=this.startVal>this.endVal,this.frameVal=this.startVal,this.decimals=Math.max(0,r||0),this.dec=Math.pow(10,this.decimals),this.duration=Number(i)*1e3||2e3;var l=this;this.version=function(){return"1.5.3"},this.printValue=function(e){var t=isNaN(e)?"--":l.formatNumber(e);l.d.tagName=="INPUT"?this.d.value=t:l.d.tagName=="text"?this.d.textContent=t:this.d.innerHTML=t},this.easeOutExpo=function(e,t,n,r){return n*(-Math.pow(2,-10*e/r)+1)*1024/1023+t},this.count=function(e){l.startTime||(l.startTime=e),l.timestamp=e;var t=e-l.startTime;l.remaining=l.duration-t,l.options.useEasing?l.countDown?l.frameVal=l.startVal-l.easeOutExpo(t,0,l.startVal-l.endVal,l.duration):l.frameVal=l.easeOutExpo(t,l.startVal,l.endVal-l.startVal,l.duration):l.countDown?l.frameVal=l.startVal-(l.startVal-l.endVal)*(t/l.duration):l.frameVal=l.startVal+(l.endVal-l.startVal)*(t/l.duration),l.countDown?l.frameVal=l.frameVal<l.endVal?l.endVal:l.frameVal:l.frameVal=l.frameVal>l.endVal?l.endVal:l.frameVal,l.frameVal=Math.round(l.frameVal*l.dec)/l.dec,l.printValue(l.frameVal),t<l.duration?l.rAF=requestAnimationFrame(l.count):l.callback&&l.callback()},this.start=function(e){return l.callback=e,!isNaN(l.endVal)&&!isNaN(l.startVal)&&l.startVal!==l.endVal?l.rAF=requestAnimationFrame(l.count):(console.log("countUp error: startVal or endVal is not a number"),l.printValue(n)),!1},this.pauseResume=function(){l.paused?(l.paused=!1,delete l.startTime,l.duration=l.remaining,l.startVal=l.frameVal,requestAnimationFrame(l.count)):(l.paused=!0,cancelAnimationFrame(l.rAF))},this.reset=function(){l.paused=!1,delete l.startTime,l.startVal=t,cancelAnimationFrame(l.rAF),l.printValue(l.startVal)},this.update=function(e){cancelAnimationFrame(l.rAF),l.paused=!1,delete l.startTime,l.startVal=l.frameVal,l.endVal=Number(e),l.countDown=l.startVal>l.endVal,l.rAF=requestAnimationFrame(l.count)},this.formatNumber=function(e){e=e.toFixed(l.decimals),e+="";var t,n,r,i;t=e.split("."),n=t[0],r=t.length>1?l.options.decimal+t[1]:"",i=/(\d+)(\d{3})/;if(l.options.useGrouping)while(i.test(n))n=n.replace(i,"$1"+l.options.separator+"$2");return l.options.prefix+n+r+l.options.suffix},l.printValue(l.startVal)};return r}),function(){"use strict";var e="undefined",t="string",n=self.navigator,r=String,i=Object.prototype.hasOwnProperty,s={},o={},u=!1,a=!0,f=/^\s*application\/(?:vnd\.oftn\.|x-)?l10n\+json\s*(?:$|;)/i,l,c="locale",h="defaultLocale",p="toLocaleString",d="toLowerCase",v=Array.prototype.indexOf||function(e){var t=this.length,n=0;for(;n<t;n++)if(n in this&&this[n]===e)return n;return-1},m=function(e){var t=new l,n={};t.open("GET",e,u),t.send(null);try{n=JSON.parse(t.responseText)}catch(r){setTimeout(function(){var t=new Error("Unable to load localization data: "+e);throw t.name="Localization Error",t},0)}return n},g=r[p]=function(e){if(arguments.length>0&&typeof e!="number")if(typeof e===t)g(m(e));else if(e===u)o={};else{var n,a,f;for(n in e)if(i.call(e,n)){a=e[n],n=n[d]();if(!(n in o)||a===u)o[n]={};if(a===u)continue;if(typeof a===t){if(r[c][d]().indexOf(n)!==0){n in s||(s[n]=[]),s[n].push(a);continue}a=m(a)}for(f in a)i.call(a,f)&&(o[n][f]=a[f])}}return Function.prototype[p].apply(r,arguments)},y=function(e){var t=s[e],n=0,r=t.length,i;for(;n<r;n++)i={},i[e]=m(t[n]),g(i);delete s[e]},b,w=r.prototype[p]=function(){var e=b,t=r[e?h:c],n=t[d]().split("-"),i=n.length,f=this.valueOf(),l;b=u;do{l=n.slice(0,i).join("-"),l in s&&y(l);if(l in o&&f in o[l])return o[l][f]}while(i-->1);return!e&&r[h]?(b=a,w.call(f)):f};if(typeof XMLHttpRequest===e&&typeof ActiveXObject!==e){var E=ActiveXObject;l=function(){try{return new E("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new E("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new E("Msxml2.XMLHTTP")}catch(n){}throw new Error("XMLHttpRequest not supported by this browser.")}}else l=XMLHttpRequest;r[h]=r[h]||"",r[c]=n&&(n.language||n.userLanguage)||"";if(typeof document!==e){var S=document.getElementsByTagName("link"),x=S.length,T;while(x--){var N=S[x],C=(N.getAttribute("rel")||"")[d]().split(/\s+/);f.test(N.type)&&(v.call(C,"localizations")!==-1?g(N.getAttribute("href")):v.call(C,"localization")!==-1&&(T={},T[(N.getAttribute("hreflang")||"")[d]()]=N.getAttribute("href"),g(T)))}}}(),function(e){"use strict";typeof define=="function"&&define.amd?define(["jquery"],e):typeof exports=="object"&&typeof module=="object"?module.exports=e:e(jQuery)}(function(e,t){"use strict";function a(t,n,r,i){var o=[];for(var u=0;u<t.length;u++){var a=t[u];if(a){var f=tinycolor(a),l=f.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";l+=tinycolor.equals(n,a)?" sp-thumb-active":"";var c=f.toString(i.preferredFormat||"rgb"),h=s?"background-color:"+f.toRgbString():"filter:"+f.toFilter();o.push('<span title="'+c+'" data-color="'+f.toRgbString()+'" class="'+l+'"><span class="sp-thumb-inner" style="'+h+';" /></span>')}else{var p="sp-clear-display";o.push(e("<div />").append(e('<span data-color="" style="background-color:transparent;" class="'+p+'"></span>').attr("title",i.noColorSelectedText)).html())}}return"<div class='sp-cf "+r+"'>"+o.join("")+"</div>"}function f(){for(var e=0;e<r.length;e++)r[e]&&r[e].hide()}function l(t,r){var i=e.extend({},n,t);return i.callbacks={move:v(i.move,r),change:v(i.change,r),show:v(i.show,r),hide:v(i.hide,r),beforeShow:v(i.beforeShow,r)},i}function c(n,c){function Nt(){p.showPaletteOnly&&(p.showPalette=!0),ct.text(p.showPaletteOnly?p.togglePaletteMoreText:p.togglePaletteLessText);if(p.palette){F=p.palette.slice(0),I=e.isArray(F[0])?F:[F],q={};for(var t=0;t<I.length;t++)for(var n=0;n<I[t].length;n++){var r=tinycolor(I[t][n]).toRgbString();q[r]=!0}}Q.toggleClass("sp-flat",v),Q.toggleClass("sp-input-disabled",!p.showInput),Q.toggleClass("sp-alpha-enabled",p.showAlpha),Q.toggleClass("sp-clear-enabled",Tt),Q.toggleClass("sp-buttons-disabled",!p.showButtons),Q.toggleClass("sp-palette-buttons-disabled",!p.togglePaletteOnly),Q.toggleClass("sp-palette-disabled",!p.showPalette),Q.toggleClass("sp-palette-only",p.showPaletteOnly),Q.toggleClass("sp-initial-disabled",!p.showInitial),Q.addClass(p.className).addClass(p.containerClassName),Jt()}function Ct(){function n(t){return t.data&&t.data.ignore?(Rt(e(t.target).closest(".sp-thumb-el").data("color")),Wt()):(Rt(e(t.target).closest(".sp-thumb-el").data("color")),Wt(),$t(!0),p.hideAfterPaletteSelect&&It()),!1}i&&Q.find("*:not(input)").attr("unselectable","on"),Nt(),dt&&J.after(vt).hide(),Tt||ft.hide();if(v)J.after(Q).hide();else{var t=p.appendTo==="parent"?J.parent():e(p.appendTo);t.length!==1&&(t=e("body")),t.append(Q)}kt(),mt.bind("click.spectrum touchstart.spectrum",function(t){K||Ht(),t.stopPropagation(),e(t.target).is("input")||t.preventDefault()}),(J.is(":disabled")||p.disabled===!0)&&Yt(),Q.click(d),st.change(Pt),st.bind("paste",function(){setTimeout(Pt,1)}),st.keydown(function(e){e.keyCode==13&&Pt()}),at.text(p.cancelText),at.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),qt(),It()}),ft.attr("title",p.clearText),ft.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),xt=!0,Wt(),v&&$t(!0)}),lt.text(p.chooseText),lt.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),i&&st.is(":focus")&&st.trigger("change"),zt()&&($t(!0),It())}),ct.text(p.showPaletteOnly?p.togglePaletteMoreText:p.togglePaletteLessText),ct.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),p.showPaletteOnly=!p.showPaletteOnly,!p.showPaletteOnly&&!v&&Q.css("left","-="+(G.outerWidth(!0)+5)),Nt()}),m(rt,function(e,t,n){j=e/M,xt=!1,n.shiftKey&&(j=Math.round(j*10)/10),Wt()},_t,Dt),m(et,function(e,t){P=parseFloat(t/A),xt=!1,p.showAlpha||(j=1),Wt()},_t,Dt),m(Y,function(e,t,n){if(!n.shiftKey)W=null;else if(!W){var r=H*C,i=k-B*k,s=Math.abs(e-r)>Math.abs(t-i);W=s?"x":"y"}var o=!W||W==="x",u=!W||W==="y";o&&(H=parseFloat(e/C)),u&&(B=parseFloat((k-t)/k)),xt=!1,p.showAlpha||(j=1),Wt()},_t,Dt),yt?(Rt(yt),Xt(),Et=wt||tinycolor(yt).format,Lt(yt)):Xt(),v&&Bt();var r=i?"mousedown.spectrum":"click.spectrum touchstart.spectrum";ot.delegate(".sp-thumb-el",r,n),ut.delegate(".sp-thumb-el:nth-child(1)",r,{ignore:!0},n)}function kt(){if(w&&window.localStorage){try{var t=window.localStorage[w].split(",#");t.length>1&&(delete window.localStorage[w],e.each(t,function(e,t){Lt(t)}))}catch(n){}try{R=window.localStorage[w].split(";")}catch(n){}}}function Lt(t){if(b){var n=tinycolor(t).toRgbString();if(!q[n]&&e.inArray(n,R)===-1){R.push(n);while(R.length>U)R.shift()}if(w&&window.localStorage)try{window.localStorage[w]=R.join(";")}catch(r){}}}function At(){var e=[];if(p.showPalette)for(var t=0;t<R.length;t++){var n=tinycolor(R[t]).toRgbString();q[n]||e.push(R[t])}return e.reverse().slice(0,p.maxSelectionSize)}function Ot(){var t=Ut(),n=e.map(I,function(e,n){return a(e,t,"sp-palette-row sp-palette-row-"+n,p)});kt(),R&&n.push(a(At(),t,"sp-palette-row sp-palette-row-selection",p)),ot.html(n.join(""))}function Mt(){if(p.showInitial){var e=bt,t=Ut();ut.html(a([e,t],t,"sp-palette-row-initial",p))}}function _t(){(k<=0||C<=0||A<=0)&&Jt(),N=!0,Q.addClass(z),W=null,J.trigger("dragstart.spectrum",[Ut()])}function Dt(){N=!1,Q.removeClass(z),J.trigger("dragstop.spectrum",[Ut()])}function Pt(){var e=st.val();if(e!==null&&e!==""||!Tt){var t=tinycolor(e);t.isValid()?(Rt(t),$t(!0)):st.addClass("sp-validation-error")}else Rt(null),$t(!0)}function Ht(){T?It():Bt()}function Bt(){var t=e.Event("beforeShow.spectrum");if(T){Jt();return}J.trigger(t,[Ut()]);if(S.beforeShow(Ut())===!1||t.isDefaultPrevented())return;f(),T=!0,e(X).bind("keydown.spectrum",jt),e(X).bind("click.spectrum",Ft),e(window).bind("resize.spectrum",x),vt.addClass("sp-active"),Q.removeClass("sp-hidden"),Jt(),Xt(),bt=Ut(),Mt(),S.show(bt),J.trigger("show.spectrum",[bt])}function jt(e){e.keyCode===27&&It()}function Ft(e){if(e.button==2)return;if(N)return;St?$t(!0):qt(),It()}function It(){if(!T||v)return;T=!1,e(X).unbind("keydown.spectrum",jt),e(X).unbind("click.spectrum",Ft),e(window).unbind("resize.spectrum",x),vt.removeClass("sp-active"),Q.addClass("sp-hidden"),S.hide(Ut()),J.trigger("hide.spectrum",[Ut()])}function qt(){Rt(bt,!0)}function Rt(e,t){if(tinycolor.equals(e,Ut())){Xt();return}var n,r;!e&&Tt?xt=!0:(xt=!1,n=tinycolor(e),r=n.toHsv(),P=r.h%360/360,H=r.s,B=r.v,j=r.a),Xt(),n&&n.isValid()&&!t&&(Et=wt||n.getFormat())}function Ut(e){return e=e||{},Tt&&xt?null:tinycolor.fromRatio({h:P,s:H,v:B,a:Math.round(j*100)/100},{format:e.format||Et})}function zt(){return!st.hasClass("sp-validation-error")}function Wt(){Xt(),S.move(Ut()),J.trigger("move.spectrum",[Ut()])}function Xt(){st.removeClass("sp-validation-error"),Vt();var e=tinycolor.fromRatio({h:P,s:1,v:1});Y.css("background-color",e.toHexString());var t=Et;j<1&&(j!==0||t!=="name")&&(t==="hex"||t==="hex3"||t==="hex6"||t==="name")&&(t="rgb");var n=Ut({format:t}),r="";gt.removeClass("sp-clear-display"),gt.css("background-color","transparent");if(!n&&Tt)gt.addClass("sp-clear-display");else{var o=n.toHexString(),u=n.toRgbString();s||n.alpha===1?gt.css("background-color",u):(gt.css("background-color","transparent"),gt.css("filter",n.toFilter()));if(p.showAlpha){var a=n.toRgb();a.a=0;var f=tinycolor(a).toRgbString(),l="linear-gradient(left, "+f+", "+o+")";i?nt.css("filter",tinycolor(f).toFilter({gradientType:1},o)):(nt.css("background","-webkit-"+l),nt.css("background","-moz-"+l),nt.css("background","-ms-"+l),nt.css("background","linear-gradient(to right, "+f+", "+o+")"))}r=n.toString(t)}p.showInput&&st.val(r),p.showPalette&&Ot(),Mt()}function Vt(){var e=H,t=B;if(Tt&&xt)it.hide(),tt.hide(),Z.hide();else{it.show(),tt.show(),Z.show();var n=e*C,r=k-t*k;n=Math.max(-L,Math.min(C-L,n-L)),r=Math.max(-L,Math.min(k-L,r-L)),Z.css({top:r+"px",left:n+"px"});var i=j*M;it.css({left:i-_/2+"px"});var s=P*A;tt.css({top:s-D+"px"})}}function $t(e){var t=Ut(),n="",r=!tinycolor.equals(t,bt);t&&(n=t.toString(Et),Lt(t)),ht&&J.val(n),e&&r&&(S.change(t),J.trigger("change",[t]))}function Jt(){C=Y.width(),k=Y.height(),L=Z.height(),O=et.width(),A=et.height(),D=tt.height(),M=rt.width(),_=it.width(),v||(Q.css("position","absolute"),p.offset?Q.offset(p.offset):Q.offset(h(Q,mt))),Vt(),p.showPalette&&Ot(),J.trigger("reflow.spectrum")}function Kt(){J.show(),mt.unbind("click.spectrum touchstart.spectrum"),Q.remove(),vt.remove(),r[en.id]=null}function Qt(n,r){if(n===t)return e.extend({},p);if(r===t)return p[n];p[n]=r,Nt()}function Gt(){K=!1,J.attr("disabled",!1),mt.removeClass("sp-disabled")}function Yt(){It(),K=!0,J.attr("disabled",!0),mt.addClass("sp-disabled")}function Zt(e){p.offset=e,Jt()}var p=l(c,n),v=p.flat,b=p.showSelectionPalette,w=p.localStorageKey,E=p.theme,S=p.callbacks,x=g(Jt,10),T=!1,N=!1,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0,j=1,F=[],I=[],q={},R=p.selectionPalette.slice(0),U=p.maxSelectionSize,z="sp-dragging",W=null,X=n.ownerDocument,V=X.body,J=e(n),K=!1,Q=e(u,X).addClass(E),G=Q.find(".sp-picker-container"),Y=Q.find(".sp-color"),Z=Q.find(".sp-dragger"),et=Q.find(".sp-hue"),tt=Q.find(".sp-slider"),nt=Q.find(".sp-alpha-inner"),rt=Q.find(".sp-alpha"),it=Q.find(".sp-alpha-handle"),st=Q.find(".sp-input"),ot=Q.find(".sp-palette"),ut=Q.find(".sp-initial"),at=Q.find(".sp-cancel"),ft=Q.find(".sp-clear"),lt=Q.find(".sp-choose"),ct=Q.find(".sp-palette-toggle"),ht=J.is("input"),pt=ht&&J.attr("type")==="color"&&y(),dt=ht&&!v,vt=dt?e(o).addClass(E).addClass(p.className).addClass(p.replacerClassName):e([]),mt=dt?vt:J,gt=vt.find(".sp-preview-inner"),yt=p.color||ht&&J.val(),bt=!1,wt=p.preferredFormat,Et=wt,St=!p.showButtons||p.clickoutFiresChange,xt=!yt,Tt=p.allowEmpty&&!pt;Ct();var en={show:Bt,hide:It,toggle:Ht,reflow:Jt,option:Qt,enable:Gt,disable:Yt,offset:Zt,set:function(e){Rt(e),$t()},get:Ut,destroy:Kt,container:Q};return en.id=r.push(en)-1,en}function h(t,n){var r=0,i=t.outerWidth(),s=t.outerHeight(),o=n.outerHeight(),u=t[0].ownerDocument,a=u.documentElement,f=a.clientWidth+e(u).scrollLeft(),l=a.clientHeight+e(u).scrollTop(),c=n.offset();return c.top+=o,c.left-=Math.min(c.left,c.left+i>f&&f>i?Math.abs(c.left+i-f):0),c.top-=Math.min(c.top,c.top+s>l&&l>s?Math.abs(s+o-r):r),c}function p(){}function d(e){e.stopPropagation()}function v(e,t){var n=Array.prototype.slice,r=n.call(arguments,2);return function(){return e.apply(t,r.concat(n.call(arguments)))}}function m(t,n,r,s){function p(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.returnValue=!1}function d(e){if(u){if(i&&o.documentMode<9&&!e.button)return m();var r=e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches[0],s=r&&r.pageX||e.pageX,h=r&&r.pageY||e.pageY,d=Math.max(0,Math.min(s-a.left,l)),v=Math.max(0,Math.min(h-a.top,f));c&&p(e),n.apply(t,[d,v,e])}}function v(n){var i=n.which?n.which==3:n.button==2
;!i&&!u&&r.apply(t,arguments)!==!1&&(u=!0,f=e(t).height(),l=e(t).width(),a=e(t).offset(),e(o).bind(h),e(o.body).addClass("sp-dragging"),d(n),p(n))}function m(){u&&(e(o).unbind(h),e(o.body).removeClass("sp-dragging"),setTimeout(function(){s.apply(t,arguments)},0)),u=!1}n=n||function(){},r=r||function(){},s=s||function(){};var o=document,u=!1,a={},f=0,l=0,c="ontouchstart"in window,h={};h.selectstart=p,h.dragstart=p,h["touchmove mousemove"]=d,h["touchend mouseup"]=m,e(t).bind("touchstart mousedown",v)}function g(e,t,n){var r;return function(){var i=this,s=arguments,o=function(){r=null,e.apply(i,s)};n&&clearTimeout(r);if(n||!r)r=setTimeout(o,t)}}function y(){return e.fn.spectrum.inputTypeColorSupport()}var n={beforeShow:p,move:p,change:p,show:p,hide:p,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},r=[],i=!!/msie/i.exec(window.navigator.userAgent),s=function(){function e(e,t){return!!~(""+e).indexOf(t)}var t=document.createElement("div"),n=t.style;return n.cssText="background-color:rgba(0,0,0,.5)",e(n.backgroundColor,"rgba")||e(n.backgroundColor,"hsla")}(),o=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),u=function(){var e="";if(i)for(var t=1;t<=6;t++)e+="<div class='sp-"+t+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",e,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}(),b="spectrum.id";e.fn.spectrum=function(t,n){if(typeof t=="string"){var i=this,s=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=r[e(this).data(b)];if(n){var o=n[t];if(!o)throw new Error("Spectrum: no such method: '"+t+"'");t=="get"?i=n.get():t=="container"?i=n.container:t=="option"?i=n.option.apply(n,s):t=="destroy"?(n.destroy(),e(this).removeData(b)):o.apply(n,s)}}),i}return this.spectrum("destroy").each(function(){var n=e.extend({},t,e(this).data()),r=c(this,n);e(this).data(b,r.id)})},e.fn.spectrum.load=!0,e.fn.spectrum.loadOpts={},e.fn.spectrum.draggable=m,e.fn.spectrum.defaults=n,e.fn.spectrum.inputTypeColorSupport=function w(){if(typeof w._cachedResult=="undefined"){var t=e("<input type='color' value='!' />")[0];w._cachedResult=t.type==="color"&&t.value!=="!"}return w._cachedResult},e.spectrum={},e.spectrum.localization={},e.spectrum.palettes={},e.fn.spectrum.processNativeColorInputs=function(){var t=e("input[type=color]");t.length&&!y()&&t.spectrum({preferredFormat:"hex6"})},function(){function f(e){var t={r:0,g:0,b:0},n=1,r=!1,i=!1;return typeof e=="string"&&(e=W(e)),typeof e=="object"&&(e.hasOwnProperty("r")&&e.hasOwnProperty("g")&&e.hasOwnProperty("b")?(t=l(e.r,e.g,e.b),r=!0,i=String(e.r).substr(-1)==="%"?"prgb":"rgb"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("v")?(e.s=q(e.s),e.v=q(e.v),t=d(e.h,e.s,e.v),r=!0,i="hsv"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("l")&&(e.s=q(e.s),e.l=q(e.l),t=h(e.h,e.s,e.l),r=!0,i="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=D(n),{ok:r,format:e.format||i,r:s(255,o(t.r,0)),g:s(255,o(t.g,0)),b:s(255,o(t.b,0)),a:n}}function l(e,t,n){return{r:P(e,255)*255,g:P(t,255)*255,b:P(n,255)*255}}function c(e,t,n){e=P(e,255),t=P(t,255),n=P(n,255);var r=o(e,t,n),i=s(e,t,n),u,a,f=(r+i)/2;if(r==i)u=a=0;else{var l=r-i;a=f>.5?l/(2-r-i):l/(r+i);switch(r){case e:u=(t-n)/l+(t<n?6:0);break;case t:u=(n-e)/l+2;break;case n:u=(e-t)/l+4}u/=6}return{h:u,s:a,l:f}}function h(e,t,n){function o(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var r,i,s;e=P(e,360),t=P(t,100),n=P(n,100);if(t===0)r=i=s=n;else{var u=n<.5?n*(1+t):n+t-n*t,a=2*n-u;r=o(a,u,e+1/3),i=o(a,u,e),s=o(a,u,e-1/3)}return{r:r*255,g:i*255,b:s*255}}function p(e,t,n){e=P(e,255),t=P(t,255),n=P(n,255);var r=o(e,t,n),i=s(e,t,n),u,a,f=r,l=r-i;a=r===0?0:l/r;if(r==i)u=0;else{switch(r){case e:u=(t-n)/l+(t<n?6:0);break;case t:u=(n-e)/l+2;break;case n:u=(e-t)/l+4}u/=6}return{h:u,s:a,v:f}}function d(e,t,n){e=P(e,360)*6,t=P(t,100),n=P(n,100);var i=r.floor(e),s=e-i,o=n*(1-t),u=n*(1-s*t),a=n*(1-(1-s)*t),f=i%6,l=[n,u,o,o,a,n][f],c=[a,n,n,u,o,o][f],h=[o,o,a,n,n,u][f];return{r:l*255,g:c*255,b:h*255}}function v(e,t,n,r){var s=[I(i(e).toString(16)),I(i(t).toString(16)),I(i(n).toString(16))];return r&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function m(e,t,n,r){var s=[I(R(r)),I(i(e).toString(16)),I(i(t).toString(16)),I(i(n).toString(16))];return s.join("")}function g(e,t){t=t===0?0:t||10;var n=a(e).toHsl();return n.s-=t/100,n.s=H(n.s),a(n)}function y(e,t){t=t===0?0:t||10;var n=a(e).toHsl();return n.s+=t/100,n.s=H(n.s),a(n)}function b(e){return a(e).desaturate(100)}function w(e,t){t=t===0?0:t||10;var n=a(e).toHsl();return n.l+=t/100,n.l=H(n.l),a(n)}function E(e,t){t=t===0?0:t||10;var n=a(e).toRgb();return n.r=o(0,s(255,n.r-i(255*-(t/100)))),n.g=o(0,s(255,n.g-i(255*-(t/100)))),n.b=o(0,s(255,n.b-i(255*-(t/100)))),a(n)}function S(e,t){t=t===0?0:t||10;var n=a(e).toHsl();return n.l-=t/100,n.l=H(n.l),a(n)}function x(e,t){var n=a(e).toHsl(),r=(i(n.h)+t)%360;return n.h=r<0?360+r:r,a(n)}function T(e){var t=a(e).toHsl();return t.h=(t.h+180)%360,a(t)}function N(e){var t=a(e).toHsl(),n=t.h;return[a(e),a({h:(n+120)%360,s:t.s,l:t.l}),a({h:(n+240)%360,s:t.s,l:t.l})]}function C(e){var t=a(e).toHsl(),n=t.h;return[a(e),a({h:(n+90)%360,s:t.s,l:t.l}),a({h:(n+180)%360,s:t.s,l:t.l}),a({h:(n+270)%360,s:t.s,l:t.l})]}function k(e){var t=a(e).toHsl(),n=t.h;return[a(e),a({h:(n+72)%360,s:t.s,l:t.l}),a({h:(n+216)%360,s:t.s,l:t.l})]}function L(e,t,n){t=t||6,n=n||30;var r=a(e).toHsl(),i=360/n,s=[a(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,s.push(a(r));return s}function A(e,t){t=t||6;var n=a(e).toHsv(),r=n.h,i=n.s,s=n.v,o=[],u=1/t;while(t--)o.push(a({h:r,s:i,v:s})),s=(s+u)%1;return o}function _(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function D(e){e=parseFloat(e);if(isNaN(e)||e<0||e>1)e=1;return e}function P(e,t){j(e)&&(e="100%");var n=F(e);return e=s(t,o(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),r.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function H(e){return s(1,o(0,e))}function B(e){return parseInt(e,16)}function j(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function F(e){return typeof e=="string"&&e.indexOf("%")!=-1}function I(e){return e.length==1?"0"+e:""+e}function q(e){return e<=1&&(e=e*100+"%"),e}function R(e){return Math.round(parseFloat(e)*255).toString(16)}function U(e){return B(e)/255}function W(n){n=n.replace(e,"").replace(t,"").toLowerCase();var r=!1;if(O[n])n=O[n],r=!0;else if(n=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var i;return(i=z.rgb.exec(n))?{r:i[1],g:i[2],b:i[3]}:(i=z.rgba.exec(n))?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=z.hsl.exec(n))?{h:i[1],s:i[2],l:i[3]}:(i=z.hsla.exec(n))?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=z.hsv.exec(n))?{h:i[1],s:i[2],v:i[3]}:(i=z.hsva.exec(n))?{h:i[1],s:i[2],v:i[3],a:i[4]}:(i=z.hex8.exec(n))?{a:U(i[1]),r:B(i[2]),g:B(i[3]),b:B(i[4]),format:r?"name":"hex8"}:(i=z.hex6.exec(n))?{r:B(i[1]),g:B(i[2]),b:B(i[3]),format:r?"name":"hex"}:(i=z.hex3.exec(n))?{r:B(i[1]+""+i[1]),g:B(i[2]+""+i[2]),b:B(i[3]+""+i[3]),format:r?"name":"hex"}:!1}var e=/^[\s,#]+/,t=/\s+$/,n=0,r=Math,i=r.round,s=r.min,o=r.max,u=r.random,a=function(e,t){e=e?e:"",t=t||{};if(e instanceof a)return e;if(!(this instanceof a))return new a(e,t);var r=f(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=i(100*this._a)/100,this._format=t.format||r.format,this._gradientType=t.gradientType,this._r<1&&(this._r=i(this._r)),this._g<1&&(this._g=i(this._g)),this._b<1&&(this._b=i(this._b)),this._ok=r.ok,this._tc_id=n++};a.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},setAlpha:function(e){return this._a=D(e),this._roundA=i(100*this._a)/100,this},toHsv:function(){var e=p(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=p(this._r,this._g,this._b),t=i(e.h*360),n=i(e.s*100),r=i(e.v*100);return this._a==1?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=c(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=c(this._r,this._g,this._b),t=i(e.h*360),n=i(e.s*100),r=i(e.l*100);return this._a==1?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return v(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(){return m(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:i(this._r),g:i(this._g),b:i(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+i(this._r)+", "+i(this._g)+", "+i(this._b)+")":"rgba("+i(this._r)+", "+i(this._g)+", "+i(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:i(P(this._r,255)*100)+"%",g:i(P(this._g,255)*100)+"%",b:i(P(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+i(P(this._r,255)*100)+"%, "+i(P(this._g,255)*100)+"%, "+i(P(this._b,255)*100)+"%)":"rgba("+i(P(this._r,255)*100)+"%, "+i(P(this._g,255)*100)+"%, "+i(P(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:M[v(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+m(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var i=a(e);n=i.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0,i=!t&&r&&(e==="hex"||e==="hex6"||e==="hex3"||e==="name");if(i)return e==="name"&&this._a===0?this.toName():this.toRgbString();e==="rgb"&&(n=this.toRgbString()),e==="prgb"&&(n=this.toPercentageRgbString());if(e==="hex"||e==="hex6")n=this.toHexString();return e==="hex3"&&(n=this.toHexString(!0)),e==="hex8"&&(n=this.toHex8String()),e==="name"&&(n=this.toName()),e==="hsl"&&(n=this.toHslString()),e==="hsv"&&(n=this.toHsvString()),n||this.toHexString()},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(w,arguments)},brighten:function(){return this._applyModification(E,arguments)},darken:function(){return this._applyModification(S,arguments)},desaturate:function(){return this._applyModification(g,arguments)},saturate:function(){return this._applyModification(y,arguments)},greyscale:function(){return this._applyModification(b,arguments)},spin:function(){return this._applyModification(x,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(L,arguments)},complement:function(){return this._applyCombination(T,arguments)},monochromatic:function(){return this._applyCombination(A,arguments)},splitcomplement:function(){return this._applyCombination(k,arguments)},triad:function(){return this._applyCombination(N,arguments)},tetrad:function(){return this._applyCombination(C,arguments)}},a.fromRatio=function(e,t){if(typeof e=="object"){var n={};for(var r in e)e.hasOwnProperty(r)&&(r==="a"?n[r]=e[r]:n[r]=q(e[r]));e=n}return a(e,t)},a.equals=function(e,t){return!e||!t?!1:a(e).toRgbString()==a(t).toRgbString()},a.random=function(){return a.fromRatio({r:u(),g:u(),b:u()})},a.mix=function(e,t,n){n=n===0?0:n||50;var r=a(e).toRgb(),i=a(t).toRgb(),s=n/100,o=s*2-1,u=i.a-r.a,f;o*u==-1?f=o:f=(o+u)/(1+o*u),f=(f+1)/2;var l=1-f,c={r:i.r*f+r.r*l,g:i.g*f+r.g*l,b:i.b*f+r.b*l,a:i.a*s+r.a*(1-s)};return a(c)},a.readability=function(e,t){var n=a(e),r=a(t),i=n.toRgb(),s=r.toRgb(),o=n.getBrightness(),u=r.getBrightness(),f=Math.max(i.r,s.r)-Math.min(i.r,s.r)+Math.max(i.g,s.g)-Math.min(i.g,s.g)+Math.max(i.b,s.b)-Math.min(i.b,s.b);return{brightness:Math.abs(o-u),color:f}},a.isReadable=function(e,t){var n=a.readability(e,t);return n.brightness>125&&n.color>500},a.mostReadable=function(e,t){var n=null,r=0,i=!1;for(var s=0;s<t.length;s++){var o=a.readability(e,t[s]),u=o.brightness>125&&o.color>500,f=3*(o.brightness/125)+o.color/500;if(u&&!i||u&&i&&f>r||!u&&!i&&f>r)i=u,r=f,n=a(t[s])}return n};var O=a.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},M=a.hexNames=_(O),z=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",n="(?:"+t+")|(?:"+e+")",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+i),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();window.tinycolor=a}(),e(function(){e.fn.spectrum.load&&e.fn.spectrum.processNativeColorInputs()})}),function(e){var t=document.createElement("div"),n=t.getElementsByTagName("i"),r=e(document.documentElement);t.innerHTML="<!--[if lte IE 8]><i></i><![endif]-->",n[0]&&r.addClass("ie-lte8");if(!("querySelector"in document)||window.blackberry&&!window.WebKitPoint||window.operamini)return;r.addClass("tablesaw-enhanced"),e(function(){e(document).trigger("enhance.tablesaw")})}(jQuery),typeof Tablesaw=="undefined"&&(Tablesaw={i18n:{modes:["Stack","Swipe","Toggle"],columns:'Col<span class="a11y-sm">umn</span>s',columnBtnText:"Columns",columnsDialogError:"No eligible columns.",sort:"Sort"}}),Tablesaw.config||(Tablesaw.config={}),function(e){var t="table",n={toolbar:"tablesaw-bar"},r={create:"tablesawcreate",destroy:"tablesawdestroy",refresh:"tablesawrefresh"},i="stack",s="table[data-tablesaw-mode],table[data-tablesaw-sortable]",o=function(t){if(!t)throw new Error("Tablesaw requires an element.");this.table=t,this.$table=e(t),this.mode=this.$table.attr("data-tablesaw-mode")||i,this.init()};o.prototype.init=function(){this.$table.attr("id")||this.$table.attr("id",t+"-"+Math.round(Math.random()*1e4)),this.createToolbar();var e=this._initCells();this.$table.trigger(r.create,[this,e])},o.prototype._initCells=function(){var t,n=this.table.querySelectorAll("thead tr"),r=this;return e(n).each(function(){var i=0;e(this).children().each(function(){var s=parseInt(this.getAttribute("colspan"),10),o=":nth-child("+(i+1)+")";t=i+1;if(s)for(var u=0;u<s-1;u++)i++,o+=", :nth-child("+(i+1)+")";this.cells=r.$table.find("tr").not(e(n).eq(0)).not(this).children(o),i++})}),t},o.prototype.refresh=function(){this._initCells(),this.$table.trigger(r.refresh)},o.prototype.createToolbar=function(){var t=this.$table.prev("."+n.toolbar);t.length||(t=e("<div>").addClass(n.toolbar).insertBefore(this.$table)),this.$toolbar=t,this.mode&&this.$toolbar.addClass("mode-"+this.mode)},o.prototype.destroy=function(){this.$table.prev("."+n.toolbar).each(function(){this.className=this.className.replace(/\bmode\-\w*\b/gi,"")});var i=this.$table.attr("id");e(document).unbind("."+i),e(window).unbind("."+i),this.$table.trigger(r.destroy,[this]),this.$table.removeAttr("data-tablesaw-mode"),this.$table.removeData(t)},e.fn[t]=function(){return this.each(function(){var n=e(this);if(n.data(t))return;var r=new o(this);n.data(t,r)})},e(document).on("enhance.tablesaw",function(n){e(n.target).find(s)[t]()})}(jQuery),function(e,t,n){var r={stackTable:"tablesaw-stack",cellLabels:"tablesaw-cell-label",cellContentLabels:"tablesaw-cell-content"},i={obj:"tablesaw-stack"},s={labelless:"data-tablesaw-no-labels",hideempty:"data-tablesaw-hide-empty"},o=function(e){this.$table=t(e),this.labelless=this.$table.is("["+s.labelless+"]"),this.hideempty=this.$table.is("["+s.hideempty+"]"),this.labelless||(this.allHeaders=this.$table.find("th")),this.$table.data(i.obj,this)};o.prototype.init=function(e){this.$table.addClass(r.stackTable);if(this.labelless)return;var n=t(this.allHeaders),i=this.hideempty;n.each(function(){var n=t(this),o=t(this.cells).filter(function(){return!t(this).parent().is("["+s.labelless+"]")&&(!i||!t(this).is(":empty"))}),u=o.not(this).filter("thead th").length&&" tablesaw-cell-label-top",a=n.find(".tablesaw-sortable-btn"),f=a.length?a.html():n.html();if(f!=="")if(u){var l=parseInt(t(this).attr("colspan"),10),c="";l&&(c="td:nth-child("+l+"n + "+e+")"),o.filter(c).prepend("<b class='"+r.cellLabels+u+"'>"+f+"</b>")}else o.wrapInner("<span class='"+r.cellContentLabels+"'></span>"),o.prepend("<b class='"+r.cellLabels+"'>"+f+"</b>")})},o.prototype.destroy=function(){this.$table.removeClass(r.stackTable),this.$table.find("."+r.cellLabels).remove(),this.$table.find("."+r.cellContentLabels).each(function(){t(this).replaceWith(this.childNodes)})},t(document).on("tablesawcreate",function(e,t,n){if(t.mode==="stack"){var r=new o(t.table);r.init(n)}}),t(document).on("tablesawdestroy",function(e,n){n.mode==="stack"&&t(n.table).data(i.obj).destroy()})}(this,jQuery),function(e){if(typeof exports=="object"&&typeof module!="undefined")module.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var t;typeof window!="undefined"?t=window:typeof global!="undefined"?t=global:typeof self!="undefined"?t=self:t=this,t.Clipboard=e()}}(function(){var e,t,n;return function r(e,t,n){function i(o,u){if(!t[o]){if(!e[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(s)return s(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=t[o]={exports:{}};e[o][0].call(l.exports,function(t){var n=e[o][1][t];return i(n?n:t)},l,l.exports,r,e,t,n)}return t[o].exports}var s=typeof require=="function"&&require;for(var o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t,n){var r=e("matches-selector");t.exports=function(e,t,n){var i=n?e:e.parentNode;while(i&&i!==document){if(r(i,t))return i;i=i.parentNode}}},{"matches-selector":2}],2:[function(e,t,n){function s(e,t){if(i)return i.call(e,t);var n=e.parentNode.querySelectorAll(t);for(var r=0;r<n.length;++r)if(n[r]==e)return!0;return!1}var r=Element.prototype,i=r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector;t.exports=s},{}],3:[function(e,t,n){function i(e,t,n,r){var i=s.apply(this,arguments);return e.addEventListener(n,i),{destroy:function(){e.removeEventListener(n,i)}}}function s(e,t,n,i){return function(n){n.delegateTarget=r(n.target,t,!0),n.delegateTarget&&i.call(e,n)}}var r=e("closest");t.exports=i},{closest:1}],4:[function(e,t,n){n.node=function(e){return e!==undefined&&e instanceof HTMLElement&&e.nodeType===1},n.nodeList=function(e){var t=Object.prototype.toString.call(e);return e!==undefined&&(t==="[object NodeList]"||t==="[object HTMLCollection]")&&"length"in e&&(e.length===0||n.node(e[0]))},n.string=function(e){return typeof e=="string"||e instanceof String},n.function=function(e){var t=Object.prototype.toString.call(e);return t==="[object Function]"}},{}],5:[function(e,t,n){function s(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!r.string(t))throw new TypeError("Second argument must be a String");if(!r.function(n))throw new TypeError("Third argument must be a Function");if(r.node(e))return o(e,t,n);if(r.nodeList(e))return u(e,t,n);if(r.string(e))return a(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function o(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}function u(e,t,n){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}}}function a(e,t,n){return i(document.body,e,t,n)}var r=e("./is"),i=e("delegate");t.exports=s},{"./is":4,delegate:3}],6:[function(e,t,n){function r(e){var t;if(e.nodeName==="INPUT"||e.nodeName==="TEXTAREA")e.focus(),e.setSelectionRange(0,e.value.length),t=e.value;else{e.hasAttribute("contenteditable")&&e.focus();var n=window.getSelection(),r=document.createRange();r.selectNodeContents(e),n.removeAllRanges(),n.addRange(r),t=n.toString()}return t}t.exports=r},{}],7:[function(e,t,n){function r(){}r.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function i(){r.off(e,i),t.apply(n,arguments)}var r=this;return i._=t,this.on(e,i,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,i=n.length;for(r;r<i;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],i=[];if(r&&t)for(var s=0,o=r.length;s<o;s++)r[s].fn!==t&&r[s].fn._!==t&&i.push(r[s]);return i.length?n[e]=i:delete n[e],this}},t.exports=r},{}],8:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("select"),u=i(o),a=function(){function e(t){s(this,e),this.resolveOptions(t),this.initSelection()}return e.prototype.resolveOptions=function(){var t=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];this.action=t.action,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""},e.prototype.initSelection=function(){if(this.text&&this.target)throw new Error('Multiple attributes declared, use either "target" or "text"');if(this.text)this.selectFake();else{if(!this.target)throw new Error('Missing required attributes, use either "target" or "text"');this.selectTarget()}},e.prototype.selectFake=function(){var t=this;this.removeFake(),this.fakeHandler=document.body.addEventListener("click",function(){return t.removeFake()}),this.fakeElem=document.createElement("textarea"),this.fakeElem.style.position="absolute",this.fakeElem.style.left="-9999px",this.fakeElem.style.top=(window.pageYOffset||document.documentElement.scrollTop)+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=u["default"](this.fakeElem),this.copyText()},e.prototype.removeFake=function(){this.fakeHandler&&(document.body.removeEventListener("click"),this.fakeHandler=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)},e.prototype.selectTarget=function(){this.selectedText=u["default"](this.target),this.copyText()},e.prototype.copyText=function(){var t=undefined;try{t=document.execCommand(this.action)}catch(n){t=!1}this.handleResult(t)},e.prototype.handleResult=function(t){t?this.emitter.emit("success",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)}):this.emitter.emit("error",{action:this.action,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})},e.prototype.clearSelection=function(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()},e.prototype.destroy=function(){this.removeFake()},r(e,[{key:"action",set:function(){var t=arguments.length<=0||arguments[0]===undefined?"copy":arguments[0];this._action=t;if(this._action!=="copy"&&this._action!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(t!==undefined){if(!t||typeof t!="object"||t.nodeType!==1)throw new Error('Invalid "target" value, use a valid Element');this._target=t}},get:function(){return this._target}}]),e}();n["default"]=a,t.exports=n["default"]},{select:6}],9:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function p(e,t){var n="data-clipboard-"+e;if(!t.hasAttribute(n))return;return t.getAttribute(n)}n.__esModule=!0;var o=e("./clipboard-action"),u=r(o),a=e("tiny-emitter"),f=r(a),l=e("good-listener"),c=r(l),h=function(e){function t(n,r){i(this,t),e.call(this),this.resolveOptions(r),this.listenClick(n)}return s(t,e),t.prototype.resolveOptions=function(){var t=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];this.action=typeof t.action=="function"?t.action:this.defaultAction,this.target=typeof t.target=="function"?t.target:this.defaultTarget,this.text=typeof t.text=="function"?t.text:this.defaultText},t.prototype.listenClick=function(t){var n=this;this.listener=c["default"](t,"click",function(e){return n.onClick(e)})},t.prototype.onClick=function(t){var n=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new u["default"]({action:this.action(n),target:this.target(n),text:this.text(n),trigger:n,emitter:this})},t.prototype.defaultAction=function(t){return p("action",t)},t.prototype.defaultTarget=function(t){var n=p("target",t);if(n)return document.querySelector(n)},t.prototype.defaultText=function(t){return p("text",t)},t.prototype.destroy=function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)},t}(f["default"]);n["default"]=h,t.exports=n["default"]},{"./clipboard-action":8,"good-listener":5,"tiny-emitter":7}]},{},[9])(9)}),function(){window.GD||(window.GD={}),String.prototype.underscore=function(){return this.trim().replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},String.prototype.dasherize=function(){return this.replace(/_/g,"-")},$.fn.removeClassRegExp=function(e){return $(this).removeClass(function(t,n){var r,i,s,o,u;i=[],u=n.split(" ");for(s=0,o=u.length;s<o;s++)r=u[s],e.test(r)&&i.push(r);return i.join(" ")}),this},jQuery.extend({getQueryParameters:function(e){return e=e||document.location.href,e.indexOf("?")===-1?{}:e.split("?")[1].split("&").map(function(e){return e=e.split("="),this[e[0]]=e[1],this}.bind({}))[0]}}),GD.isRetina=function(){return window.devicePixelRatio>1},GD.addParamToUrl=function(e){return function(e,t,n){var r;return!t||!n?e:(r=$.getQueryParameters(e),r[t]=n,e.split("?")[0]+"?"+$.param(r))}}(this),GD.isIE=function(){return Detectizr.browser.name==="ie"},GD.isFirefox=function(){return Detectizr.browser.name==="firefox"},GD.isMac=function(){return/Mac/i.test(navigator.userAgent)},GD.formatDateTime=function(e){return moment(e,moment.ISO_8601).format("YYYY-MM-DD HH:mm:ss")},GD.delay=function(e,t){return setTimeout(t,e)},GD.recalcFormHeight=function(){return $(window).trigger("customLoad")},GD.htmlSafe=function(e){return _.escape(e)},GD.htmlSafeWithLineBreak=function(e){return GD.htmlSafe(e).replace(/\n/g,"<br/>")},GD.removeFileSuffix=function(e){return e.substr(0,e.lastIndexOf("."))},GD.isEmpty=function(e){return e===null||e===""},GD.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},GD.formatDate=function(e){return _.isDate(e)?moment(e).format("YYYY-MM-DD "):e},GD.parseDate=function(e){var t,n;return t=new Date,e===""||e===void 0||e===null?null:(e==="yesterday"?e="before_1":e==="tomorrow"&&(e="after_1"),e==="today"?t:e.indexOf("before")!==-1?(n=parseInt(e.split("_")[1]),t.setDate(t.getDate()-n),t):e.indexOf("after")!==-1?(n=parseInt(e.split("_")[1]),t.setDate(t.getDate()+n),t):new Date(e))},GD.extractExistedQueryParams=function(){var e;return e={},!url("?order")||(e.order=url("?order")),!url("?per_page")||(e.per_page=url("?per_page")),!url("?query")||(e.query=decodeURIComponent(url("?query"))),!url("?serial_number")||(e.serial_number=url("?serial_number")),!url("?start")||(e.start=url("?start")),!url("?end")||(e.end=url("?end")),$.isEmptyObject(GD.filterParams.data)||(e=$.extend
(e,GD.filterParams.data)),e},GD.isAndroidDevice=function(){return navigator.userAgent.indexOf("Android")>0},GD.isOpenInWeiXin=function(){return(navigator.userAgent.indexOf("MicroMessenger")>0||navigator.userAgent.indexOf("wechatdevtools")>0)&&navigator.userAgent.indexOf("WindowsWechat")<0},GD.createKeyboardEvent=function(e){var t;return t=$.Event("keydown"),t.keyCode=e,t.customEvent=!0,t},GD.renderQrcode=function(e,t,n){var r,i;return Modernizr.canvas?typeof (r=e.empty()).qrcode=="function"?r.qrcode({size:n,text:t}):void 0:typeof (i=e.empty()).qrcode=="function"?i.qrcode({render:"div",size:n,text:t}):void 0},GD.validateFile=function(e,t,n){var r;return r=[],e.name.substr(0,1)==="."&&r.push(l("%warn_system_file")),e.name.length>200&&r.push(l("%file_name_too_long")),n&&!n.test(e.name)&&r.push(l("%warn_invalid_filetype")),/.*\.(exe|bat)$/gi.test(e.name)&&r.push(l("%warn_exec_file")),e.size&&e.size>t&&r.push(l("%warn_oversize",{maxSize:GD.numberToHumanSize(t)})),r},GD.validateURL=function(e){var t;return $.trim(e)?(t=/^(https:\/\/|http:\/\/)?(((([a-zA-Z]|\d|-|\.|_|~)|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-zA-Z]|\d)|(([a-zA-Z]|\d)([a-zA-Z]|\d|-|\.|_|~)*([a-zA-Z]|\d)))\.)+(([a-zA-Z])|(([a-zA-Z])([a-zA-Z]|\d|-|\.|_|~)*([a-zA-Z])))\.?)(:\d*)?)(\/((([a-zA-Z]|\d|-|\.|_|~)|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-zA-Z]|\d|-|\.|_|~)|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-zA-Z]|\d|-|\.|_|~)|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?(\#((([a-zA-Z]|\d|-|\.|_|~)|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/,t.test($.trim(e))):!0},GD.isLowVersionIE=function(){return Detectizr.browser.name==="ie"&&parseInt(Detectizr.browser.version,10)<10},GD.countDown=function(e,t,n){var r;return n==null&&(n=l("%resend")),t>0?(e.addClass("disabled"),r=n+(" ("+t+")"),e.is("input")?(e.prop("disabled",!0),e.val(r)):e.text(r),t--,setTimeout(function(){return GD.countDown(e,t,n)},1e3)):(e.is("input")?(e.prop("disabled",!1),e.val(n)):e.text(n),GD.enableBtn(e))},GD.countDownRedirect=function(e,t,n,r){if(url("path")===t)return;return n>0?(e.text(r+(" ("+n+"s)")),n--,setTimeout(function(){return GD.countDownRedirect(e,t,n,r)},1e3)):Turbolinks.visit(t)},GD.isMobileNumber=function(e){var t;return t=/^1\d{10}$/,t.test(e)},GD.getStringLength=function(e){var t;return e?(t=e.match(/[^x00-xff]/ig),e.length+(t?t.length:0)):0},GD.numberToHumanSize=function(e){var t,n,r;return e?(n=e/1024,n<1024?n.toFixed(0)+" KB":(r=n/1024,r<1024?r.toFixed(1)+" MB":(t=r/1024,t.toFixed(1)+" GB"))):null},GD.numberToCurrencyFloat=function(e){return parseFloat(e).toFixed(2)},GD.PLACEHOLDER_REPLACE_REGEX=/\$\([^\)]+\)/g,GD.pollingDataFromServer=function(e,t,n,r,i){var s,o,u;return i==null&&(i=null),s=0,u=null,o=function(){return $.getJSON(n,function(e){if(!(s>t))return s++,r(e,u);clearInterval(u);if(i!==null)return i("polling finished without successfully")}).fail(function(){clearInterval(u);if(i!==null)return i()})},u=setInterval(o,e)},GD.SYSTEM_TAGS={ALL_FORMS_TAG_ID:"ALL_FORMS_TAG_ID",ALL_FOLDERS_TAG_ID:"ALL_FOLDERS_TAG_ID",UNTAGGED_ID:"UNTAGGED_ID",SHARED_FORMS_TAG_ID:"SHARED_FORMS_TAG_ID"},GD.toSentence=function(e){return e.join(l("%common_separator")).replace(/\s/g,"")},$.fn.serializeObject=function(){var e,t;return t={},e=this.serializeArray(),$.each(e,function(){return t[this.name]!==void 0?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t},GD.cacheToLocalStorage=function(e,t,n){var r,i;try{return typeof localStorage!="undefined"&&localStorage!==null?localStorage.setItem(e,t):void 0}catch(i){return r=i,n?typeof localStorage!="undefined"&&localStorage!==null?localStorage.clear():void 0:(typeof localStorage!="undefined"&&localStorage!==null&&localStorage.removeItem("columbusCachedformCreateModal"),typeof localStorage!="undefined"&&localStorage!==null&&localStorage.removeItem("cachedformCreateModal"),GD.cacheToLocalStorage(e,t,!0))}},GD.isInOrganiztion=function(){return typeof GD.currentOrganization=="string"},GD.cookieExpireMinutes=function(e){var t;return t=new Date,t.setTime(t.getTime()+e*60*1e3),t}}.call(this),function(){var e;window.GD||(window.GD={}),GD.switcheryMainColor="#44DB5E",GD.adaptDevice=function(e){var t;return t=GD.isMobile?"mlarge":"xlarge",e?""+e+t:t},GD.addRetinaSuffix=function(e,t){var n;return n=GD.isMobile||!GD.isRetina()?"":"Retina",e+"@"+t+n},GD.adaptRetina=function(){var e,t,n;return t=$(".need-adapt-retina"),e=GD.adaptDevice(t.data("img-prefix")),n=GD.addRetinaSuffix(t.data("img-url"),e),t.attr("src",n)},GD.adaptVerticalPoistion=function(e){var t;return t=($(window).height()-e.height())/2,e.css({top:t})},GD.showLoading=function(e,t){return e==null&&(e="#entries_grid"),t==null&&(t="entries"),$(e).find(".cover").length===0&&$(e).append('<div class="cover"></div>'),$(".loading[data-target="+t+"]").show()},GD.hideLoading=function(e,t){return $(e).find(".cover").remove(),$(".loading[data-target="+t+"]").hide()},GD.focusToEnd=function(e){var t;return t=e.val(),t!==""&&!/\n$/.test(t)&&(t+="\n"),e.focus().val("").val(t)},GD.writeContentToIframe=function(e,t){var n;return n=$(e)[0].contentWindow.document,n.open(),n.write(t),n.close()},GD.isTextOverflow=function(e){var t;return t=e[0],t?t.scrollWidth>t.offsetWidth:!1},GD.loadWithLoading=function(e,t,n){return GD.showLoading(t,n),t.load(e,function(){return GD.hideLoading(t,n)})},GD.showTooltipErrorIfHave=function(e,t){if(t)return e.parent().is(".gd-input-prepend, .gd-input-append")?e.parent().addClass("has-error"):e.wrap("<div class='has-error'>"),e.gdCustomTooltip({content:"<div class='error'><i class='gd-icon-times-circle'></i> "+t+"</div>"}).tooltipster("show")},GD.clearTooltipError=function(e){e.parent(".gd-input-prepend, .gd-input-append").is(".has-error")?e.parent().removeClass("has-error"):e.parent().is(".has-error")&&e.unwrap();if(e.hasClass("tooltipstered"))return e.tooltipster("destroy")},GD.showTooltipFlashMessage=function(e,t,n,r){var i;return r==null&&(r="bottom"),i=function(){switch(t){case"success":return"<div class='success'><i class='gd-icon-check-circle'></i> "+n+"</div>";case"error":return"<div class='error'><i class='gd-icon-times-circle'></i> "+n+"</div>";default:return n}}(),e.hasClass("tooltipstered")&&e.tooltipster("destroy"),e.gdCustomTooltip({content:i,position:r,timer:2e3}).tooltipster("show")},GD.showErrorMessageBelow=function(e,t){var n;if(e&&t)return n=$("<div class='error-message'>"+t+"</div>"),e.parent().is(".gd-input-prepend, .gd-input-append")&&(e=e.parent()),e.wrap("<div class='has-error'>"),e.after(n)},GD.clearErrorMessageBelow=function(e){if(!e)return;e.parent().is(".gd-input-prepend, .gd-input-append")&&(e=e.parent());if(e.parent().is(".has-error"))return e.parent().find(".error-message").remove(),e.unwrap()},GD.showErrorMessageBesides=function(e,t,n,r){var i;n==null&&(n=!1),r==null&&(r=!1),i=r?"":"<i class='gd-icon-times-circle'></i>",$(e).find(".inline-error-message").length===0&&$(e).append("<div class='inline-error-message'>"+i+t+"</div>");if(!n)return setTimeout(function(){return $(e).find(".inline-error-message").fadeOut().remove()},3e3)},GD.removeErrorMessageBesides=function(e){return $(e).find(".inline-error-message").fadeOut().remove()},GD.initClipboard=function(e){var t;return t=function(){return GD.showFlashNotification("您的浏览器不支持直接复制，请手动复制！","danger")},$(e).mouseenter(function(){var t;if($(e).data("clipboardInitialied")||$(e).is(".disabled"))return;return t=new Clipboard(e),$(e).data("clipboardInitialied",!0),t.on("success",function(e){return GD.showFlashNotification($(e.trigger).data("message")||"复制成功")}),t.on("error",function(){var t;return t=GD.isMac()?"使用⌘-C复制":"使用Ctrl-C复制",$(e).hasClass("tooltipstered")?$(e).tooltipster("content",t):$(e).gdClickTooltip({content:t,theme:"gd-tooltip-mini"}).tooltipster("show")})})},GD.disableBtn=function(e){var t;t=$(e);if(t.length>0&&!t.hasClass("disabled"))return t.data("disabled-with")&&t.data("disable-with",t.data("disabled-with")),GD.disableElement(t)},GD.enableBtn=function(e){var t;t=$(e);if(t.length>0&&t.hasClass("disabled"))return t.removeClass("disabled"),$.rails.enableElement(t)},GD.disableElement=function(e){if(e.length)return $.rails.disableElement(e),e.addClass("disabled")},GD.enableElement=function(e){if(e.length)return $.rails.enableElement(e),e.removeClass("disabled disabled-with-cursor-auto")},GD.syncHeight=function(e,t){return t.css({height:e.outerHeight()})},e=function(e,t){var n;return n={showInput:!0,showButtons:!1,showAlpha:!0,containerClassName:"gd-spectrum-container",replacerClassName:"gd-spectrum-replacer",preferredFormat:"rgb",move:function(t){return e.val(t).trigger("change")}},e.spectrum($.extend(n,t!=null?t:{}))},GD.initSpectrums=function(t,n){var r,i,s,o,u;n==null&&(n=null),o=t.find("[data-role=color-picker]"),u=[];for(i=0,s=o.length;i<s;i++)r=o[i],u.push(e($(r),n));return u},GD.updateModalHeight=function(e,t,n,r){var i,s,o,u,a;t==null&&(t=".modal-body"),n==null&&(n=null),r==null&&(r=null),i=$(e).find(t);if(i.length===0)return;n||(n=$(e).find(".modal-header").outerHeight()+((a=$(e).find(".modal-footer").outerHeight())!=null?a:0)),o=s=$(window).height()*.8-n,u=$(e).find(".modal-dialog"),i.get(0).scrollHeight>s?($(u).css({top:"1%"}),o=$(window).height()*.9-n):$(u).css({top:"10%"}),i.css({"max-height":o+"px"});if(r)return r(o)},GD.updateSubmitBtn=function(){var e,t,n,r,i;return r=$(".submit-field input.submit, .entry-show .actions [data-role='submit']"),i=(t=r.data("fileUploading"))!=null?t:0,i<0&&r.data("fileUploading",0),e=(n=i>0||r.data("no-goods-selected")||r.data("weixin-openid-fetching"))!=null?n:!1,r.attr("disabled",e)},GD.showConfirmBox=function(e,t,n){var r;return r="<div id='gd_confirm_modal' class='modal light' tabindex='-1' role='dialog' hidden='true'>\n  <div class='modal-dialog modal-sm'>\n    <div class='modal-content'>\n      <div class='modal-header'><h4 class=\"modal-title\">"+e+"</h4></div>\n      <div class='modal-body clearfix'> "+t+" </div>\n      <div class='modal-footer'>\n        <a data-role='ok' class='gd-btn gd-btn-primary' href='javascript:void(0)'>确定</a>\n        <a data-dismiss='modal' class='gd-btn gd-btn-info' href='javascript:void(0)'>取消</a>\n      </div>\n    </div>\n  </div>\n</div>",$("#gd_confirm_modal").remove(),$("body").append(r),$("#gd_confirm_modal").modal("show"),$("#gd_confirm_modal [data-role=ok]").one("click",function(){$(this).closest(".modal").modal("hide");if(n)return n()})},GD.updateSwitchText=function(e){var t;if(!$(e).is("input[type=checkbox]"))return;t=$(e).is(":checked")?$(e).data("on-text"):$(e).data("off-text");if(!!t)return $(e).siblings(".switch-text").remove(),$(e).parent().append($("<span class='switch-text'>"+t+"</span>"))},GD.updateRadioBtnGroupStatus=function(e){var t;return t=e.is(".gd-btn")?e:e.closest(".gd-btn"),t.siblings(".gd-btn.selected").removeClass("selected"),t.addClass("selected")},GD.turbolinksReloadWithCurrentPosition=function(){return Turbolinks.enableTransitionCache(!0),Turbolinks.visit(window.location.href),Turbolinks.enableTransitionCache(!1)},GD.insertFieldsBaseTooltip=function(e){return $(e).gdClickTooltip({contentCloning:!1,autoClose:!1,theme:"field-placeholder-selector gd-tooltip-menu-over",content:$(e).next(".gd-hide").find("[data-react-class='FieldPlaceholderInsertion']"),functionReady:function(e,t){return setTimeout(function(){return $(document).one("click","*:not(.tooltipster-content)",function(t){return e.tooltipster("hide")})},100)},functionAfter:function(e,t){return $(document).off("click","*:not(.tooltipster-content)")}})},GD.bindKeyNav=function(e,t){return t==null&&(t={}),$(document).one("page:fetch",function(){return $(document).off("keydown.nav")}),$(document).on("keydown.nav",function(n){var r,i;if(!$("#lightbox").is(":visible")&&!$(n.target).is("input:visible:not(:submit), textarea, select")){i=e?$(e).find(".nav-arrows a"):$(".nav-arrows a");if(i.length===2){r=function(){switch(n.keyCode){case 37:return i.first();case 39:return i.last();default:return null}}();if(r&&r.is(":not(.disabled)"))return t.target?(t.beforeSend&&t.beforeSend(),$(t.target).load(r.attr("href"),t.afterSend)):Turbolinks.visit(r.attr("href"))}}})},_.templateSettings={evaluate:/\[\[(.+?)\]\]/g,interpolate:/\{\{(.+?)\}\}/g},$(document).on("page:load ready ajax:complete",function(){var e,t,n,r,i;e=$("a[data-role=copy]");if(e.length!==0){r=[];for(t=0,n=e.length;t<n;t++)i=e[t],r.push(GD.initClipboard(i));return r}}),$(document).on("page:load ready ajax:complete",function(){var e,t,n;e=$(".qrcode");if(e.length>0){n=e.data("text");if(n)return t=e.data("size")||175,GD.renderQrcode(e,n,t)}}),$(document).on("click","a[data-disabled-with]",function(){return GD.disableBtn($(this))}),$(document).on("click",".search-box .search-icon",function(){return $(this).siblings("input[type=search]").focus()}),$(document).on("change",".search-box input[type=search]",function(){var e;return e=!!$.trim($(this).val()),$(this).toggleClass("has-value",e)}),$(document).on("page:load ready ajax:complete",function(){return $(".need-switch").each(function(e,t){var n;$(t).data("checked",$(t).is(":checked")),GD.updateSwitchText($(t));if(!$(t).data("switchery"))return n={color:GD.switcheryMainColor},$(t).data("switchery-size")&&(n.size=$(t).data("switchery-size")),n.disabled=$(t).data("disabled"),new Switchery(t,n)})}),$(document).on("click",".gd-btn-radio-group .gd-btn",function(){return GD.updateRadioBtnGroupStatus($(this))}),$(document).on("click","a.disabled, a.prevent-default",function(e){return e.preventDefault()}),$(document).on("click","#switch_to_mobile",function(){return $.removeCookie("platform",{path:"/"})}),$(document).on("ajax:complete","form.need-ajax-flash",function(e,t,n){return n==="success"?GD.showFlashNotification($(this).data("success-flash")||"设置保存成功"):GD.showFlashNotification($(this).data("error-flash")||"设置保存失败","danger")}),$(".need-select2:visible").livequery(function(){return $(this).select2({language:String.locale})}),$(".need-drop-select").livequery(function(){return $(this).dropselect({clear:!1,icons:!1,filter:{placeholder:"",noresult:l("%no_result")}})}),$(".need-count-down").livequery(function(){var e,t,n,r;return e=$(this),r=e.data("second")||5,n=e.attr("href"),t=e.data("basetext")||e.text(),GD.countDownRedirect(e,n,r,t)}),$(".select2-search__field").livequery(function(){return $(this).on("click",function(e){return $(this).focus()})}),GD.triggerShowModal=function(){var e,t;t=url("?modal_trigger_id");if(!t)return;e=$("#"+decodeURIComponent(t));if(e.length)return e.trigger("click")},$(document).on("page:load ready",function(){return GD.isMobile=$(".mobile-device").length>0,GD.isPhone=$(".phone-device").length>0,setTimeout(function(){return GD.triggerShowModal()},150),GD.adaptRetina()}),$("[data-feature-name]").livequery(function(){var e,t;e=$(this).data("feature-name").underscore(),$(this).is(".paid-feature")&&$(this).next(".gd-btn-paid-feature").length===0&&(t=$(this).data("paid-feature-label")||"付费功能",$(this).after(" <a class='gd-btn gd-btn-paid-feature' href='#paid_feature_"+e+"_modal' data-toggle='modal'>"+t+"</a>"));if($(this).data("need-upgrade"))return $(this).attr({"data-toggle":"modal","data-target":"#paid_feature_"+e+"_modal"})})}.call(this),function(){window.GD||(window.GD={}),$(function(){var e,t;return t="gd-tooltip-light",e=function(e,n,r){var i,s,o,u;return i={position:"bottom",theme:t,delay:0,speed:10,contentAsHTML:!0,interactive:!0,interactiveTolerance:0},r.theme&&(r.theme=t+" "+r.theme),u=function(e,t){var n;t.one("click","[data-dismiss=tooltipster]",function(){return e.tooltipster("hide")}),t.on("click change",".with-impact-on-tooltip-size",function(){return setTimeout(function(){return e.tooltipster("reposition")},r.repositionDelay||5)}),t.find(".tooltipster-content").css({maxHeight:$(window).height()*.9}),r.backdrop===!0&&(n=$('<div class="gd-tooltip-backdrop gd-hide"></div>'),$(t).after(n),n.fadeIn(300,"linear")),e.addClass("active");if(typeof r.functionReady=="function")return r.functionReady(e,t)},o=function(e,t){var n;$(".tooltipster-base").length===0&&(n=$(".gd-tooltip-backdrop"),n.fadeOut(300,"linear",function(){return n.remove()})),e.data("tooltipster-ns")&&e.tooltipster("status")!=="shown"&&e.removeClass("active");if(typeof r.functionAfter=="function")return r.functionAfter(e,t)},s=$.extend(i,n,r,{functionReady:u,functionAfter:o}),e.each(function(){return $(this).tooltipster(s)})},$.fn.gdHoverTooltip=function(t){var n;return t==null&&(t={}),n={trigger:"hover",interactiveTolerance:500},e(this,n,t)},$.fn.gdClickTooltip=function(t){var n;return t==null&&(t={}),n={trigger:"click"},e(this,n,t)},$.fn.gdCustomTooltip=function(t){var n;return t==null&&(t={}),n={trigger:"custom"},e(this,n,t)},$(".with-tooltip").livequery(function(){return $(this).gdHoverTooltip({multiple:!0,position:$(this).data("tooltip-position")||"bottom",offsetY:$(this).data("tooltip-offset-y")||0,interactiveTolerance:$(this).data("interactive-tolerance")||0,contentAsHTML:!0,maxWidth:$(this).data("tooltip-max-width")||null,theme:$(this).data("tooltip-theme")||"gd-tooltip-mini",content:$(this).attr("title")||$(this).data("title"),functionAfter:function(e){return function(){if($(e).data("need-reset-after-hide"))return $(e).tooltipster("update",$(e).attr("title")||$(e).data("title"))}}(this)})}),$(".image-tooltip").livequery(function(){var e,t;return e=$(this).data("image-path"),t=$(this).data("additional-img-class")||"",$(this).gdHoverTooltip({content:$("#nav_qrcode_container"),functionReady:function(e,t){return e.tooltipster("reposition")}})}),$("[data-toggle=tooltipster]").livequery(function(){return $(this).click(function(){return $(".tooltipstered").not(this).tooltipster("hide")})}),GD.tooltipInitialized=function(e){return e.hasClass("tooltipstered")}})}.call(this),function(){var e;GD.enhanceDateField=function(e){var t,n,r;if(!$("body").is(".mobile-device"))return t=e.find("input[type=date]").addClass("transformed-date-input"),t.each(function(){var e;return e=$(this).val(),$(this).attr({type:"text"}).val(e)}),n=t.css("display"),r={},n&&(r.display=n),t.closest(".gd-input-container").addClass("gd-input-date").css(r)},e=function(){function e(e,t){var n;n={language:String.locale||"zh-CN",format:"yyyy-mm-dd",autoclose:!0,orientation:"auto left",todayHighlight:!0},t=$.extend(n,t||{}),$(e).datepicker(t).on("show hide",function(e){return e.stopPropagation()}),$(e).siblings(".gd-input-icon").click(function(){if(!$(e).prop("readonly"))return $(e).focus()})}return e}(),GD.initDatePicker=function(t,n){var r,i,s,o,u;n==null&&(n=null),GD.enhanceDateField(t),o=t.find(".transformed-date-input"),u=[];for(i=0,s=o.length;i<s;i++)r=o[i],u.push(new e(r,n));return u},$(function(){return $(document).on("ready page:load ajax:complete",function(){if(!($(".dashboard").length>0))return GD.initDatePicker($(document))})})}.call(this);var CKEDITOR_BASEPATH="/assets/ckeditor/";(function(){if(window.CKEDITOR&&window.CKEDITOR.dom)return;window.CKEDITOR||(window.CKEDITOR=function(){var e=/(^|.*[\\\/])ckeditor\.js(?:\?.*|;.*)?$/i,t={timestamp:"F7J9",version:"4.5.3",revision:"6c70c82",rnd:Math.floor(900*Math.random())+100,_:{pending:[],basePathSrcPattern:e},status:"unloaded",basePath:function(){var t=window.CKEDITOR_BASEPATH||"";if(!t)for(var n=document.getElementsByTagName("script"),r=0;r<n.length;r++){var i=n[r].src.match(e);if(i){t=i[1];break}}-1==t.indexOf(":/")&&"//"!=t.slice(0,2)&&(t=0===t.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+t:location.href.match(/^[^\?]*\/(?:)/)[0]+t);if(!t)throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';return t}(),getUrl:function(e){return-1==e.indexOf(":/")&&0!==e.indexOf("/")&&(e=this.basePath+e),this.timestamp&&"/"!=e.charAt(e.length-1)&&!/[&?]t=/.test(e)&&(e+=(0<=e.indexOf("?")?"&":"?")+"t="+this.timestamp),e},domReady:function(){function e(){try{document.addEventListener?(document.removeEventListener("DOMContentLoaded",e,!1),t()):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",e),t())}catch(n){}}function t(){for(var e;e=n.shift();)e()}var n=[];return function(t){function r(){try{document.documentElement.doScroll("left")}catch(t){setTimeout(r,1);return}e()}n.push(t),"complete"===document.readyState&&setTimeout(e,1);if(1==n.length)if(document.addEventListener)document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",e),window.attachEvent("onload",e),t=!1;try{t=!window.frameElement}catch(i){}document.documentElement.doScroll&&t&&r()}}}()},n=window.CKEDITOR_GETURL;if(n){var r=t.getUrl;t.getUrl=function(e){return n.call(t,e)||r.call(t,e)}}return t}()),CKEDITOR.event||(CKEDITOR.event=function(){},CKEDITOR.event.implementOn=function(e){var t=CKEDITOR.event.prototype,n;for(n in t)e[n]==null&&(e[n]=t[n])},CKEDITOR.event.prototype=function(){function e(e){var r=t(this);return r[e]||(r[e]=new n(e))}var t=function(e){return e=e.getPrivate&&e.getPrivate()||e._||(e._={}),e.events||(e.events={})},n=function(e){this.name=e,this.listeners=[]};return n.prototype={getListenerIndex:function(e){for(var t=0,n=this.listeners;t<n.length;t++)if(n[t].fn==e)return t;return-1}},{define:function(t,n){var r=e.call(this,t);CKEDITOR.tools.extend(r,n,!0)},on:function(t,n,r,i,s){function o(e,s,o,a){return e={name:t,sender:this,editor:e,data:s,listenerData:i,stop:o,cancel:a,removeListener:u},n.call(r,e)===!1?!1:e.data}function u(){l.removeListener(t,n)}var f=e.call(this,t);if(f.getListenerIndex(n)<0){f=f.listeners,r||(r=this),isNaN(s)&&(s=10);var l=this;o.fn=n,o.priority=s;for(var c=f.length-1;c>=0;c--)if(f[c].priority<=s)return f.splice(c+1,0,o),{removeListener:u};f.unshift(o)}return{removeListener:u}},once:function(){var e=Array.prototype.slice.call(arguments),t=e[1];return e[1]=function(e){return e.removeListener(),t.apply(this,arguments)},this.on.apply(this,e)},capture:function(){CKEDITOR.event.useCapture=1;var e=this.on.apply(this,arguments);return CKEDITOR.event.useCapture=0,e},fire:function(){var e=0,n=function(){e=1},r=0,i=function(){r=1};return function(s,o,u){var l=t(this)[s],s=e,c=r;e=r=0;if(l){var p=l.listeners;if(p.length)for(var p=p.slice(0),v,m=0;m<p.length;m++){if(l.errorProof)try{v=p[m].call(this,u,o,n,i)}catch(g){}else v=p[m].call(this,u,o,n,i);v===!1?r=1:typeof v!="undefined"&&(o=v);if(e||r)break}}return o=r?!1:typeof o=="undefined"?!0:o,e=s,r=c,o}}(),fireOnce:function(e,n,r){return n=this.fire(e,n,r),delete t(this)[e],n},removeListener:function(e,n){var r=t(this)[e];if(r){var i=r.getListenerIndex(n);i>=0&&r.listeners.splice(i,1)}},removeAllListeners:function(){var e=t(this),n;for(n in e)delete e[n]},hasListeners:function(e){return(e=t(this)[e])&&e.listeners.length>0}}}()),CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this,arguments]),CKEDITOR.event.call(this)},CKEDITOR.editor.prototype.fire=function(e,t){return e in{instanceReady:1,loaded:1}&&(this[e]=!0),CKEDITOR.event.prototype.fire.call(this,e,t,this)},CKEDITOR.editor.prototype.fireOnce=function(e,t){return e in{instanceReady:1,loaded:1}&&(this[e]=!0),CKEDITOR.event.prototype.fireOnce.call(this,e,t,this)},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype)),CKEDITOR.env||(CKEDITOR.env=function(){var e=navigator.userAgent.toLowerCase(),t=e.match(/edge[ \/](\d+.?\d*)/),n=e.indexOf("trident/")>-1,n=!!t||!!n,n={ie:n,edge:!!t,webkit:!n&&e.indexOf(" applewebkit/")>-1,air:e.indexOf(" adobeair/")>-1,mac:e.indexOf("macintosh")>-1,quirks:document.compatMode=="BackCompat"&&(!document.documentMode||document.documentMode<10),mobile:e.indexOf("mobile")>-1,iOS:/(ipad|iphone|ipod)/.test(e),isCustomDomain:function(){if(!this.ie)return!1;var e=document.domain,t=window.location.hostname;return e!=t&&e!="["+t+"]"},secure:location.protocol=="https:"};n.gecko=navigator.product=="Gecko"&&!n.webkit&&!n.ie,n.webkit&&(e.indexOf("chrome")>-1?n.chrome=!0:n.safari=!0);var r=0;return n.ie&&(r=t?parseFloat(t[1]):n.quirks||!document.documentMode?parseFloat(e.match(/msie (\d+)/)[1]):document.documentMode,n.ie9Compat=r==9,n.ie8Compat=r==8,n.ie7Compat=r==7,n.ie6Compat=r<7||n.quirks),n.gecko&&(t=e.match(/rv:([\d\.]+)/))&&(t=t[1].split("."),r=t[0]*1e4+(t[1]||0)*100+(t[2]||0)*1),n.air&&(r=parseFloat(e.match(/ adobeair\/(\d+)/)[1])),n.webkit&&(r=parseFloat(e.match(/ applewebkit\/(\d+)/)[1])),n.version=r,n.isCompatible=!(n.ie&&r<7)&&!(n.gecko&&r<4e4)&&!(n.webkit&&r<534),n.hidpi=window.devicePixelRatio>=2,n.needsBrFiller=n.gecko||n.webkit||n.ie&&r>10,n.needsNbspFiller=n.ie&&r<11,n.cssClass="cke_browser_"+(n.ie?"ie":n.gecko?"gecko":n.webkit?"webkit":"unknown"),n.quirks&&(n.cssClass=n.cssClass+" cke_browser_quirks"),n.ie&&(n.cssClass=n.cssClass+(" cke_browser_ie"+(n.quirks?"6 cke_browser_iequirks":n.version))),n.air&&(n.cssClass=n.cssClass+" cke_browser_air"),n.iOS&&(n.cssClass=n.cssClass+" cke_browser_ios"),n.hidpi&&(n.cssClass=n.cssClass+" cke_hidpi"),n}()),"unloaded"==CKEDITOR.status&&function(){CKEDITOR.event.implementOn(CKEDITOR),CKEDITOR.loadFullCore=function(){if(CKEDITOR.status!="basic_ready")CKEDITOR.loadFullCore._load=1;else{delete CKEDITOR.loadFullCore;var e=document.createElement("script");e.type="text/javascript",e.src=CKEDITOR.basePath+"ckeditor.js",document.getElementsByTagName("head")[0].appendChild(e)}},CKEDITOR.loadFullCoreTimeout=0,CKEDITOR.add=function(e){(this._.pending||(this._.pending=[])).push(e)},function(){CKEDITOR.domReady(function(){var e=CKEDITOR.loadFullCore,t=CKEDITOR.loadFullCoreTimeout;e&&(CKEDITOR.status="basic_ready",e&&e._load?e():t&&setTimeout(function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()},t*1e3))})}(),CKEDITOR.status="basic_loaded"}(),CKEDITOR.dom={},function(){var e=[],t=CKEDITOR.env.gecko?"-moz-":CKEDITOR.env.webkit?"-webkit-":CKEDITOR.env.ie?"-ms-":"",n=/&/g,r=/>/g,i=/</g,s=/"/g,o=/&(lt|gt|amp|quot|nbsp|shy|#\d{1,5});/g,u={lt:"<",gt:">",amp:"&",quot:'"',nbsp:" ",shy:"­"},a=function(e,t){return t[0]=="#"?String.fromCharCode(parseInt(t.slice(1),10)):u[t]};CKEDITOR.on("reset",function(){e=[]}),CKEDITOR.tools={arrayCompare:function(e,t){if(!e&&!t)return!0;if(!e||!t||e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0},getIndex:function(e,t){for(var n=0;n<e.length;++n)if(t(e[n]))return n;return-1},clone:function(e){var t;if(e&&e instanceof Array){t=[];for(var n=0;n<e.length;n++)t[n]=CKEDITOR.tools.clone(e[n]);return t}if(e===null||typeof e!="object"||e instanceof String||e instanceof Number||e instanceof Boolean||e instanceof Date||e instanceof RegExp||e.nodeType||e.window===e)return e;t=new e.constructor;for(n in e)t[n]=CKEDITOR.tools.clone(e[n]);return t},capitalize:function(e,t){return e.charAt(0).toUpperCase()+(t?e.slice(1):e.slice(1).toLowerCase())},extend:function(e){var t=arguments.length,n,r;typeof (n=arguments[t-1])=="boolean"?t--:typeof (n=arguments[t-2])=="boolean"&&(r=arguments[t-1],t-=2);for(var i=1;i<t;i++){var s=arguments[i],o;for(o in s)if(n===!0||e[o]==null)if(!r||o in r)e[o]=s[o]}return e},prototypedCopy:function(e){var t=function(){};return t.prototype=e,new t},copy:function(e){var t={},n;for(n in e)t[n]=e[n];return t},isArray:function(e){return Object.prototype.toString.call(e)=="[object Array]"},isEmpty:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},cssVendorPrefix:function(e,n,r){return r?t+e+":"+n+";"+e+":"+n:(r={},r[e]=n,r[t+e]=n,r)},cssStyleToDomStyle:function(){var e=document.createElement("div").style,t=typeof e.cssFloat!="undefined"?"cssFloat":typeof e.styleFloat!="undefined"?"styleFloat":"float";return function(e){return e=="float"?t:e.replace(/-./g,function(e){return e.substr(1).toUpperCase()})}}(),buildStyleHtml:function(e){for(var e=[].concat(e),t,n=[],r=0;r<e.length;r++)if(t=e[r])/@import|[{}]/.test(t)?n.push("<style>"+t+"</style>"):n.push('<link type="text/css" rel=stylesheet href="'+t+'">');return n.join("")},htmlEncode:function(e){return e===void 0||e===null?"":(""+e).replace(n,"&amp;").replace(r,"&gt;").replace(i,"&lt;")},htmlDecode:function(e){return e.replace(o,a)},htmlEncodeAttr:function(e){return CKEDITOR.tools.htmlEncode(e).replace(s,"&quot;")},htmlDecodeAttr:function(e){return CKEDITOR.tools.htmlDecode(e)},transformPlainTextToHtml:function(e,t){var n=t==CKEDITOR.ENTER_BR,r=this.htmlEncode(e.replace(/\r\n/g,"\n")),r=r.replace(/\t/g,"&nbsp;&nbsp; &nbsp;"),i=t==CKEDITOR.ENTER_P?"p":"div";if(!n){var s=/\n{2}/g;if(s.test(r))var o="<"+i+">",u="</"+i+">",r=o+r.replace(s,function(){return u+o})+u}return r=r.replace(/\n/g,"<br>"),n||(r=r.replace(RegExp("<br>(?=</"+i+">)"),function(e){return CKEDITOR.tools.repeat(e,2)})),r=r.replace(/^ | $/g,"&nbsp;"),r=r.replace(/(>|\s) /g,function(e,t){return t+"&nbsp;"}).replace(/ (?=<)/g,"&nbsp;")},getNextNumber:function(){var e=0;return function(){return++e}}(),getNextId:function(){return"cke_"+this.getNextNumber()},getUniqueId:function(){for(var e="e",t=0;t<8;t++)e+=Math.floor((1+Math.random())*65536).toString(16).substring(1);return e},override:function(e,t){var n=t(e);return n.prototype=e.prototype,n},setTimeout:function(e,t,n,r,i){return i||(i=window),n||(n=i),i.setTimeout(function(){r?e.apply(n,[].concat(r)):e.apply(n)},t||0)},trim:function(){var e=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(t){return t.replace(e,"")}}(),ltrim:function(){var e=/^[ \t\n\r]+/g;return function(t){return t.replace(e,"")}}(),rtrim:function(){var e=/[ \t\n\r]+$/g;return function(t){return t.replace(e,"")}}(),indexOf:function(e,t){if(typeof t=="function"){for(var n=0,r=e.length;n<r;n++)if(t(e[n]))return n}else{if(e.indexOf)return e.indexOf(t);n=0;for(r=e.length;n<r;n++)if(e[n]===t)return n}return-1},search:function(e,t){var n=CKEDITOR.tools.indexOf(e,t);return n>=0?e[n]:null},bind:function(e,t){return function(){return e.apply(t,arguments)}},createClass:function(e){var t=e.$,n=e.base,r=e.privates||e._,i=e.proto,e=e.statics;!t&&(t=function(){n&&this.base.apply(this,arguments)});if(r)var s=t,t=function(){var e=this._||(this._={}),t;for(t in r){var n=r[t];e[t]=typeof n=="function"?CKEDITOR.tools.bind(n,this):n}s.apply(this,arguments)};return n&&(t.prototype=this.prototypedCopy(n.prototype),t.prototype.constructor=t,t.base=n,t.baseProto=n.prototype,t.prototype.base=function(){this.base=n.prototype.base,n.apply(this,arguments),this.base=arguments.callee}),i&&this.extend(t.prototype,i,!0),e&&this.extend(t,e,!0),t},addFunction:function(t,n){return e.push(function(){return t.apply(n||this,arguments)})-1},removeFunction:function(t){e[t]=null},callFunction:function(t){var n=e[t];return n&&n.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var e=/^-?\d+\.?\d*px$/,t;return function(n){return t=CKEDITOR.tools.trim(n+"")+"px",e.test(t)?t:n||""}}(),convertToPx:function(){var e;return function(t){return e||(e=CKEDITOR.dom.element.createFromHtml('<div style="position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"></div>',CKEDITOR.document),CKEDITOR.document.getBody().append(e)),/%$/.test(t)?t:(e.setStyle("width",t),e.$.clientWidth)}}(),repeat:function(e,t){return Array(t+1).join(e)},tryThese:function(){for(var e,t=0,n=arguments.length;t<n;t++){var r=arguments[t];try{e=r();break}catch(i){}}return e},genKey:function(){return Array.prototype.slice.call(arguments).join("-")},defer:function(e){return function(){var t=arguments,n=this;window.setTimeout(function(){e.apply(n,t)},0)}},normalizeCssText:function(e,t){var n=[],r,i=CKEDITOR.tools.parseCssText(e,!0,t);for(r in i)n.push(r+":"+i[r]);return n.sort(),n.length?n.join(";")+";":""},convertRgbToHex:function(e){return e.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,function(e,t,n,r){e=[t,n,r];for(t=0;t<3;t++)e[t]=("0"+parseInt(e[t],10).toString(16)).slice(-2);return"#"+e.join("")})},parseCssText:function(e,t,n){var r={};return n&&(n=new CKEDITOR.dom.element("span"),n.setAttribute("style",e),e=CKEDITOR.tools.convertRgbToHex(n.getAttribute("style")||"")),!e||e==";"?r:(e.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(e,n,i){t&&(n=n.toLowerCase(),n=="font-family"&&(i=i.toLowerCase().replace(/["']/g,"").replace(/\s*,\s*/g,",")),i=CKEDITOR.tools.trim(i)),r[n]=i}),r)},writeCssText:function(e,t){var n,r=[];for(n in e)r.push(n+":"+e[n]);return t&&r.sort(),r.join("; ")},objectCompare:function(e,t,n){var r;if(!e&&!t)return!0;if(!e||!t)return!1;for(r in e)if(e[r]!=t[r])return!1;if(!n)for(r in t)if(e[r]!=t[r])return!1;return!0},objectKeys:function(e){var t=[],n;for(n in e)t.push(n);return t},convertArrayToObject:function(e,t){var n={};arguments.length==1&&(t=!0
);for(var r=0,i=e.length;r<i;++r)n[e[r]]=t;return n},fixDomain:function(){for(var e;;)try{e=window.parent.document.domain;break}catch(t){e=e?e.replace(/.+?(?:\.|$)/,""):document.domain;if(!e)break;document.domain=e}return!!e},eventsBuffer:function(e,t,n){function r(){s=(new Date).getTime(),i=!1,n?t.call(n):t()}var i,s=0;return{input:function(){if(!i){var t=(new Date).getTime()-s;t<e?i=setTimeout(r,e-t):r()}},reset:function(){i&&clearTimeout(i),i=s=0}}},enableHtml5Elements:function(e,t){for(var n=["abbr","article","aside","audio","bdi","canvas","data","datalist","details","figcaption","figure","footer","header","hgroup","main","mark","meter","nav","output","progress","section","summary","time","video"],r=n.length,i;r--;)i=e.createElement(n[r]),t&&e.appendChild(i)},checkIfAnyArrayItemMatches:function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n].match(t))return!0;return!1},checkIfAnyObjectPropertyMatches:function(e,t){for(var n in e)if(n.match(t))return!0;return!1},transparentImageData:"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw=="}}(),CKEDITOR.dtd=function(){var e=CKEDITOR.tools.extend,t=function(e,t){for(var n=CKEDITOR.tools.clone(e),r=1;r<arguments.length;r++){var t=arguments[r],i;for(i in t)delete n[i]}return n},n={},r={},i={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},s={command:1,link:1,meta:1,noscript:1,script:1,style:1},o={},u={"#":1},a={center:1,dir:1,noframes:1};return e(n,{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,"var":1,video:1,wbr:1},u,{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1}),e(r,i,n,a),t={a:t(n,{a:1,button:1}),abbr:n,address:r,area:o,article:r,aside:r,audio:e({source:1,track:1},r),b:n,base:o,bdi:n,bdo:n,blockquote:r,body:r,br:o,button:t(n,{a:1,button:1}),canvas:n,caption:r,cite:n,code:n,col:o,colgroup:{col:1},command:o,datalist:e({option:1},n),dd:r,del:n,details:e({summary:1},r),dfn:n,div:r,dl:{dt:1,dd:1},dt:r,em:n,embed:o,fieldset:e({legend:1},r),figcaption:r,figure:e({figcaption:1},r),footer:r,form:r,h1:n,h2:n,h3:n,h4:n,h5:n,h6:n,head:e({title:1,base:1},s),header:r,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:o,html:e({head:1,body:1},r,s),i:n,iframe:u,img:o,input:o,ins:n,kbd:n,keygen:o,label:n,legend:n,li:r,link:o,main:r,map:r,mark:n,menu:e({li:1},r),meta:o,meter:t(n,{meter:1}),nav:r,noscript:e({link:1,meta:1,style:1},n),object:e({param:1},n),ol:{li:1},optgroup:{option:1},option:u,output:n,p:n,param:o,pre:n,progress:t(n,{progress:1}),q:n,rp:n,rt:n,ruby:e({rp:1,rt:1},n),s:n,samp:n,script:u,section:r,select:{optgroup:1,option:1},small:n,source:o,span:n,strong:n,style:u,sub:n,summary:n,sup:n,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:r,textarea:u,tfoot:{tr:1},th:r,thead:{tr:1},time:t(n,{time:1}),title:u,tr:{th:1,td:1},track:o,u:n,ul:{li:1},"var":n,video:e({source:1,track:1},r),wbr:o,acronym:n,applet:e({param:1},r),basefont:o,big:n,center:r,dialog:o,dir:{li:1},font:n,isindex:o,noframes:r,strike:n,tt:n},e(t,{$block:e({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},i,a),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,main:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,main:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},$inline:n,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:e({body:1,head:1,html:1},t.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,"var":1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}}),t}(),CKEDITOR.dom.event=function(e){this.$=e},CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var e=this.getKey();if(this.$.ctrlKey||this.$.metaKey)e+=CKEDITOR.CTRL;return this.$.shiftKey&&(e+=CKEDITOR.SHIFT),this.$.altKey&&(e+=CKEDITOR.ALT),e},preventDefault:function(e){var t=this.$;t.preventDefault?t.preventDefault():t.returnValue=!1,e&&this.stopPropagation()},stopPropagation:function(){var e=this.$;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},getTarget:function(){var e=this.$.target||this.$.srcElement;return e?new CKEDITOR.dom.node(e):null},getPhase:function(){return this.$.eventPhase||2},getPageOffset:function(){var e=this.getTarget().getDocument().$;return{x:this.$.pageX||this.$.clientX+(e.documentElement.scrollLeft||e.body.scrollLeft),y:this.$.pageY||this.$.clientY+(e.documentElement.scrollTop||e.body.scrollTop)}}},CKEDITOR.CTRL=1114112,CKEDITOR.SHIFT=2228224,CKEDITOR.ALT=4456448,CKEDITOR.EVENT_PHASE_CAPTURING=1,CKEDITOR.EVENT_PHASE_AT_TARGET=2,CKEDITOR.EVENT_PHASE_BUBBLING=3,CKEDITOR.dom.domObject=function(e){e&&(this.$=e)},CKEDITOR.dom.domObject.prototype=function(){var e=function(e,t){return function(n){typeof CKEDITOR!="undefined"&&e.fire(t,new CKEDITOR.dom.event(n))}};return{getPrivate:function(){var e;return(e=this.getCustomData("_"))||this.setCustomData("_",e={}),e},on:function(t){var n=this.getCustomData("_cke_nativeListeners");return n||(n={},this.setCustomData("_cke_nativeListeners",n)),n[t]||(n=n[t]=e(this,t),this.$.addEventListener?this.$.addEventListener(t,n,!!CKEDITOR.event.useCapture):this.$.attachEvent&&this.$.attachEvent("on"+t,n)),CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(e){CKEDITOR.event.prototype.removeListener.apply(this,arguments);if(!this.hasListeners(e)){var t=this.getCustomData("_cke_nativeListeners"),n=t&&t[e];n&&(this.$.removeEventListener?this.$.removeEventListener(e,n,!1):this.$.detachEvent&&this.$.detachEvent("on"+e,n),delete t[e])}},removeAllListeners:function(){var e=this.getCustomData("_cke_nativeListeners"),t;for(t in e){var n=e[t];this.$.detachEvent?this.$.detachEvent("on"+t,n):this.$.removeEventListener&&this.$.removeEventListener(t,n,!1),delete e[t]}CKEDITOR.event.prototype.removeAllListeners.call(this)}}}(),function(e){var t={};CKEDITOR.on("reset",function(){t={}}),e.equals=function(e){try{return e&&e.$===this.$}catch(t){return!1}},e.setCustomData=function(e,n){var r=this.getUniqueId();return(t[r]||(t[r]={}))[e]=n,this},e.getCustomData=function(e){var n=this.$["data-cke-expando"];return(n=n&&t[n])&&e in n?n[e]:null},e.removeCustomData=function(e){var n=this.$["data-cke-expando"],n=n&&t[n],r,i;return n&&(r=n[e],i=e in n,delete n[e]),i?r:null},e.clearCustomData=function(){this.removeAllListeners();var e=this.$["data-cke-expando"];e&&delete t[e]},e.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())},CKEDITOR.event.implementOn(e)}(CKEDITOR.dom.domObject.prototype),CKEDITOR.dom.node=function(e){return e?new CKEDITOR.dom[e.nodeType==CKEDITOR.NODE_DOCUMENT?"document":e.nodeType==CKEDITOR.NODE_ELEMENT?"element":e.nodeType==CKEDITOR.NODE_TEXT?"text":e.nodeType==CKEDITOR.NODE_COMMENT?"comment":e.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?"documentFragment":"domObject"](e):this},CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject,CKEDITOR.NODE_ELEMENT=1,CKEDITOR.NODE_DOCUMENT=9,CKEDITOR.NODE_TEXT=3,CKEDITOR.NODE_COMMENT=8,CKEDITOR.NODE_DOCUMENT_FRAGMENT=11,CKEDITOR.POSITION_IDENTICAL=0,CKEDITOR.POSITION_DISCONNECTED=1,CKEDITOR.POSITION_FOLLOWING=2,CKEDITOR.POSITION_PRECEDING=4,CKEDITOR.POSITION_IS_CONTAINED=8,CKEDITOR.POSITION_CONTAINS=16,CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(e,t){return e.append(this,t),e},clone:function(e,t){function n(r){r["data-cke-expando"]&&(r["data-cke-expando"]=!1);if(r.nodeType==CKEDITOR.NODE_ELEMENT||r.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT){!t&&r.nodeType==CKEDITOR.NODE_ELEMENT&&r.removeAttribute("id",!1);if(e)for(var r=r.childNodes,i=0;i<r.length;i++)n(r[i])}}function r(t){if(t.type==CKEDITOR.NODE_ELEMENT||t.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT){if(t.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var n=t.getName();n[0]==":"&&t.renameNode(n.substring(1))}if(e)for(n=0;n<t.getChildCount();n++)r(t.getChild(n))}}var i=this.$.cloneNode(e);return n(i),i=new CKEDITOR.dom.node(i),CKEDITOR.env.ie&&CKEDITOR.env.version<9&&(this.type==CKEDITOR.NODE_ELEMENT||this.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&r(i),i},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function(e){return e.$.parentNode.insertBefore(this.$,e.$.nextSibling),e},insertBefore:function(e){return e.$.parentNode.insertBefore(this.$,e.$),e},insertBeforeMe:function(e){return this.$.parentNode.insertBefore(e.$,this.$),e},getAddress:function(e){for(var t=[],n=this.getDocument().$.documentElement,r=this.$;r&&r!=n;){var i=r.parentNode;i&&t.unshift(this.getIndex.call({$:r},e)),r=i}return t},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(e){function t(e,n){var r=n?e.nextSibling:e.previousSibling;return!r||r.nodeType!=CKEDITOR.NODE_TEXT?null:r.nodeValue?r:t(r,n)}var n=this.$,r=-1,i;if(!this.$.parentNode||e&&n.nodeType==CKEDITOR.NODE_TEXT&&!n.nodeValue&&!t(n)&&!t(n,!0))return-1;do if(!e||n==this.$||n.nodeType!=CKEDITOR.NODE_TEXT||!i&&!!n.nodeValue)r++,i=n.nodeType==CKEDITOR.NODE_TEXT;while(n=n.previousSibling);return r},getNextSourceNode:function(e,t,n){if(n&&!n.call)var r=n,n=function(e){return!e.equals(r)};var e=!e&&this.getFirst&&this.getFirst(),i;if(!e){if(this.type==CKEDITOR.NODE_ELEMENT&&n&&n(this,!0)===!1)return null;e=this.getNext()}for(;!e&&(i=(i||this).getParent());){if(n&&n(i,!0)===!1)return null;e=i.getNext()}return!e||n&&n(e)===!1?null:t&&t!=e.type?e.getNextSourceNode(!1,t,n):e},getPreviousSourceNode:function(e,t,n){if(n&&!n.call)var r=n,n=function(e){return!e.equals(r)};var e=!e&&this.getLast&&this.getLast(),i;if(!e){if(this.type==CKEDITOR.NODE_ELEMENT&&n&&n(this,!0)===!1)return null;e=this.getPrevious()}for(;!e&&(i=(i||this).getParent());){if(n&&n(i,!0)===!1)return null;e=i.getPrevious()}return!e||n&&n(e)===!1?null:t&&e.type!=t?e.getPreviousSourceNode(!1,t,n):e},getPrevious:function(e){var t=this.$,n;do n=(t=t.previousSibling)&&t.nodeType!=10&&new CKEDITOR.dom.node(t);while(n&&e&&!e(n));return n},getNext:function(e){var t=this.$,n;do n=(t=t.nextSibling)&&new CKEDITOR.dom.node(t);while(n&&e&&!e(n));return n},getParent:function(e){var t=this.$.parentNode;return t&&(t.nodeType==CKEDITOR.NODE_ELEMENT||e&&t.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?new CKEDITOR.dom.node(t):null},getParents:function(e){var t=this,n=[];do n[e?"push":"unshift"](t);while(t=t.getParent());return n},getCommonAncestor:function(e){if(e.equals(this))return this;if(e.contains&&e.contains(this))return e;var t=this.contains?this:this.getParent();do if(t.contains(e))return t;while(t=t.getParent());return null},getPosition:function(e){var t=this.$,n=e.$;if(t.compareDocumentPosition)return t.compareDocumentPosition(n);if(t==n)return CKEDITOR.POSITION_IDENTICAL;if(this.type==CKEDITOR.NODE_ELEMENT&&e.type==CKEDITOR.NODE_ELEMENT){if(t.contains){if(t.contains(n))return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING;if(n.contains(t))return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING}if("sourceIndex"in t)return t.sourceIndex<0||n.sourceIndex<0?CKEDITOR.POSITION_DISCONNECTED:t.sourceIndex<n.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}for(var t=this.getAddress(),e=e.getAddress(),n=Math.min(t.length,e.length),r=0;r<n;r++)if(t[r]!=e[r])return t[r]<e[r]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING;return t.length<e.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(e,t){var n=this.$,r,i;t||(n=n.parentNode),typeof e=="function"?(i=!0,r=e):(i=!1,r=function(t){return t=typeof t.nodeName=="string"?t.nodeName.toLowerCase():"",typeof e=="string"?t==e:t in e});for(;n;){if(r(i?new CKEDITOR.dom.node(n):n))return new CKEDITOR.dom.node(n);try{n=n.parentNode}catch(s){n=null}}return null},hasAscendant:function(e,t){var n=this.$;t||(n=n.parentNode);for(;n;){if(n.nodeName&&n.nodeName.toLowerCase()==e)return!0;n=n.parentNode}return!1},move:function(e,t){e.append(this.remove(),t)},remove:function(e){var t=this.$,n=t.parentNode;if(n){if(e)for(;e=t.firstChild;)n.insertBefore(t.removeChild(e),t);n.removeChild(t)}return this},replace:function(e){this.insertBefore(e),e.remove()},trim:function(){this.ltrim(),this.rtrim()},ltrim:function(){for(var e;this.getFirst&&(e=this.getFirst());){if(e.type==CKEDITOR.NODE_TEXT){var t=CKEDITOR.tools.ltrim(e.getText()),n=e.getLength();if(!t){e.remove();continue}t.length<n&&(e.split(n-t.length),this.$.removeChild(this.$.firstChild))}break}},rtrim:function(){for(var e;this.getLast&&(e=this.getLast());){if(e.type==CKEDITOR.NODE_TEXT){var t=CKEDITOR.tools.rtrim(e.getText()),n=e.getLength();if(!t){e.remove();continue}t.length<n&&(e.split(t.length),this.$.lastChild.parentNode.removeChild(this.$.lastChild))}break}CKEDITOR.env.needsBrFiller&&(e=this.$.lastChild)&&e.type==1&&e.nodeName.toLowerCase()=="br"&&e.parentNode.removeChild(e)},isReadOnly:function(e){var t=this;this.type!=CKEDITOR.NODE_ELEMENT&&(t=this.getParent()),CKEDITOR.env.edge&&t&&t.is("textarea")&&(e=!0);if(!e&&t&&typeof t.$.isContentEditable!="undefined")return!t.$.isContentEditable&&!t.data("cke-editable");for(;t;){if(t.data("cke-editable"))return!1;if(t.hasAttribute("contenteditable"))return t.getAttribute("contenteditable")=="false";t=t.getParent()}return!0}}),CKEDITOR.dom.window=function(e){CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){this.$.focus()},getViewPaneSize:function(){var e=this.$.document,t=e.compatMode=="CSS1Compat";return{width:(t?e.documentElement.clientWidth:e.body.clientWidth)||0,height:(t?e.documentElement.clientHeight:e.body.clientHeight)||0}},getScrollPosition:function(){var e=this.$;return"pageXOffset"in e?{x:e.pageXOffset||0,y:e.pageYOffset||0}:(e=e.document,{x:e.documentElement.scrollLeft||e.body.scrollLeft||0,y:e.documentElement.scrollTop||e.body.scrollTop||0})},getFrame:function(){var e=this.$.frameElement;return e?new CKEDITOR.dom.element.get(e):null}}),CKEDITOR.dom.document=function(e){CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function(e){if(this.$.createStyleSheet)this.$.createStyleSheet(e);else{var t=new CKEDITOR.dom.element("link");t.setAttributes({rel:"stylesheet",type:"text/css",href:e}),this.getHead().append(t)}},appendStyleText:function(e){if(this.$.createStyleSheet){var t=this.$.createStyleSheet("");t.cssText=e}else{var n=new CKEDITOR.dom.element("style",this);n.append(new CKEDITOR.dom.text(e,this)),this.getHead().append(n)}return t||n.$.sheet},createElement:function(e,t){var n=new CKEDITOR.dom.element(e,this);return t&&(t.attributes&&n.setAttributes(t.attributes),t.styles&&n.setStyles(t.styles)),n},createText:function(e){return new CKEDITOR.dom.text(e,this)},focus:function(){this.getWindow().focus()},getActive:function(){var e;try{e=this.$.activeElement}catch(t){return null}return new CKEDITOR.dom.element(e)},getById:function(e){return(e=this.$.getElementById(e))?new CKEDITOR.dom.element(e):null},getByAddress:function(e,t){for(var n=this.$.documentElement,r=0;n&&r<e.length;r++){var i=e[r];if(t)for(var s=-1,o=0;o<n.childNodes.length;o++){var u=n.childNodes[o];if(t!==!0||u.nodeType!=3||!u.previousSibling||u.previousSibling.nodeType!=3){s++;if(s==i){n=u;break}}}else n=n.childNodes[i]}return n?new CKEDITOR.dom.node(n):null},getElementsByTag:function(e,t){return!(CKEDITOR.env.ie&&document.documentMode<=8)&&t&&(e=t+":"+e),new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(e))},getHead:function(){var e=this.$.getElementsByTagName("head")[0];return e=e?new CKEDITOR.dom.element(e):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),!0)},getBody:function(){return new CKEDITOR.dom.element(this.$.body)},getDocumentElement:function(){return new CKEDITOR.dom.element(this.$.documentElement)},getWindow:function(){return new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView)},write:function(e){this.$.open("text/html","replace"),CKEDITOR.env.ie&&(e=e.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,'$&\n<script data-cke-temp="1">('+CKEDITOR.tools.fixDomain+")();</script>")),this.$.write(e),this.$.close()},find:function(e){return new CKEDITOR.dom.nodeList(this.$.querySelectorAll(e))},findOne:function(e){return(e=this.$.querySelector(e))?new CKEDITOR.dom.element(e):null},_getHtml5ShivFrag:function(){var e=this.getCustomData("html5ShivFrag");return e||(e=this.$.createDocumentFragment(),CKEDITOR.tools.enableHtml5Elements(e,!0),this.setCustomData("html5ShivFrag",e)),e}}),CKEDITOR.dom.nodeList=function(e){this.$=e},CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length},getItem:function(e){return e<0||e>=this.$.length?null:(e=this.$[e])?new CKEDITOR.dom.node(e):null}},CKEDITOR.dom.element=function(e,t){typeof e=="string"&&(e=(t?t.$:document).createElement(e)),CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.element.get=function(e){return(e=typeof e=="string"?document.getElementById(e)||document.getElementsByName(e)[0]:e)&&(e.$?e:new CKEDITOR.dom.element(e))},CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node,CKEDITOR.dom.element.createFromHtml=function(e,t){var n=new CKEDITOR.dom.element("div",t);return n.setHtml(e),n.getFirst().remove()},CKEDITOR.dom.element.setMarker=function(e,t,n,r){var i=t.getCustomData("list_marker_id")||t.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),s=t.getCustomData("list_marker_names")||t.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");return e[i]=t,s[n]=1,t.setCustomData(n,r)},CKEDITOR.dom.element.clearAllMarkers=function(e){for(var t in e)CKEDITOR.dom.element.clearMarkers(e,e[t],1)},CKEDITOR.dom.element.clearMarkers=function(e,t,n){var r=t.getCustomData("list_marker_names"),i=t.getCustomData("list_marker_id"),s;for(s in r)t.removeCustomData(s);t.removeCustomData("list_marker_names"),n&&(t.removeCustomData("list_marker_id"),delete e[i])},function(){function e(e,t){return(" "+e+" ").replace(s," ").indexOf(" "+t+" ")>-1}function t(e){var t=!0;return e.$.id||(e.$.id="cke_tmp_"+CKEDITOR.tools.getNextNumber(),t=!1),function(){t||e.removeAttribute("id")}}function n(e,t){return"#"+e.$.id+" "+t.split(/,\s*/).join(", #"+e.$.id+" ")}function r(e){for(var t=0,n=0,r=o[e].length;n<r;n++)t+=parseInt(this.getComputedStyle(o[e][n])||0,10)||0;return t}var i=!!document.createElement("span").classList,s=/[\n\t\r]/g;CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:i?function(e){return this.$.classList.add(e),this}:function(t){var n=this.$.className;return n&&(e(n,t)||(n+=" "+t)),this.$.className=n||t,this},removeClass:i?function(e){var t=this.$;return t.classList.remove(e),t.className||t.removeAttribute("class"),this}:function(t){var n=this.getAttribute("class");return n&&e(n,t)&&((n=n.replace(RegExp("(?:^|\\s+)"+t+"(?=\\s|$)"),"").replace(/^\s+/,""))?this.setAttribute("class",n):this.removeAttribute("class")),this},hasClass:function(t){return e(this.$.className,t)},append:function(e,t){return typeof e=="string"&&(e=this.getDocument().createElement(e)),t?this.$.insertBefore(e.$,this.$.firstChild):this.$.appendChild(e.$),e},appendHtml:function(e){if(this.$.childNodes.length){var t=new CKEDITOR.dom.element("div",this.getDocument());t.setHtml(e),t.moveChildren(this)}else this.setHtml(e)},appendText:function(e){this.$.text!=null&&CKEDITOR.env.ie&&CKEDITOR.env.version<9?this.$.text=this.$.text+e:this.append(new CKEDITOR.dom.text(e))},appendBogus:function(e){if(e||CKEDITOR.env.needsBrFiller){for(e=this.getLast();e&&e.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(e.getText());)e=e.getPrevious();if(!e||!e.is||!e.is("br"))e=this.getDocument().createElement("br"),CKEDITOR.env.gecko&&e.setAttribute("type","_moz"),this.append(e)}},breakParent:function(e,t){var n=new CKEDITOR.dom.range(this.getDocument());n.setStartAfter(this),n.setEndAfter(e);var r=n.extractContents(!1,t||!1);n.insertNode(this.remove()),r.insertAfterNode(this)},contains:document.compareDocumentPosition?function(e){return!!(this.$.compareDocumentPosition(e.$)&16)}:function(e){var t=this.$;return e.type!=CKEDITOR.NODE_ELEMENT?t.contains(e.getParent().$):t!=e.$&&t.contains(e.$)},focus:function(){function e(){try{this.$.focus()}catch(e){}}return function(t){t?CKEDITOR.tools.setTimeout(e,100,this):e.call(this)}}(),getHtml:function(){var e=this.$.innerHTML;return CKEDITOR.env.ie?e.replace(/<\?[^>]*>/g,""):e},getOuterHtml:function(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,"");var e=this.$.ownerDocument.createElement("div");return e.appendChild(this.$.cloneNode(!0)),e.innerHTML},getClientRect:function(){var e=CKEDITOR.tools.extend({},this.$.getBoundingClientRect());return!e.width&&(e.width=e.right-e.left),!e.height&&(e.height=e.bottom-e.top),e},setHtml:CKEDITOR.env.ie&&CKEDITOR.env.version<9?function(e){try{var t=this.$;if(this.getParent())return t.innerHTML=e;var n=this.getDocument()._getHtml5ShivFrag();return n.appendChild(t),t.innerHTML=e,n.removeChild(t),e}catch(r){this.$.innerHTML="",t=new CKEDITOR.dom.element("body",this.getDocument()),t.$.innerHTML=e;for(t=t.getChildren();t.count();)this.append(t.getItem(0));return e}}:function(e){return this.$.innerHTML=e},setText:function(){var e=document.createElement("p");return e.innerHTML="x",e=e.textContent,function(t){this.$[e?"textContent":"innerText"]=t}}(),getAttribute:function(){var e=function(e){return this.$.getAttribute(e,2)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(e){switch(e){case"class":e="className";break;case"http-equiv":e="httpEquiv";break;case"name":return this.$.name;case"tabindex":return e=this.$.getAttribute(e,2),e!==0&&this.$.tabIndex===0&&(e=null),e;case"checked":return e=this.$.attributes.getNamedItem(e),(e.specified?e.nodeValue:this.$.checked)?"checked":null;case"hspace":case"value":return this.$[e];case"style":return this.$.style.cssText;case"contenteditable":case"contentEditable":return this.$.attributes.getNamedItem("contentEditable").specified?this.$.getAttribute("contentEditable"):null}return this.$.getAttribute(e,2)}:e}(),getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getComputedStyle:document.defaultView&&document.defaultView.getComputedStyle?function(e){var t=this.getWindow().$.getComputedStyle(this.$,null);return t?t.getPropertyValue(e):""}:function(e){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(e)]},getDtd:function(){var e=CKEDITOR.dtd[this.getName()];return this.getDtd=function(){return e},e},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:function(){var e=this.$.tabIndex;return e===0&&!CKEDITOR.dtd.$tabIndex[this.getName()]&&parseInt(this.getAttribute("tabindex"),10)!==0?-1:e},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var e=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&document.documentMode<=8){var t=this.$.scopeName;t!="HTML"&&(e=t.toLowerCase()+":"+e)}return this.getName=function(){return e},this.getName()},getValue:function(){return this.$.value},getFirst:function(e){var t=this.$.firstChild;return(t=t&&new CKEDITOR.dom.node(t))&&e&&!e(t)&&(t=t.getNext(e)),t},getLast:function(e){var t=this.$.lastChild;return(t=t&&new CKEDITOR.dom.node(t))&&e&&!e(t)&&(t=t.getPrevious(e)),t},getStyle:function(e){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(e)]},is:function(){var e=this.getName();if(typeof arguments[0]=="object")return!!arguments[0][e];for(var t=0;t<arguments.length;t++)if(arguments[t]==e)return!0;return!1},isEditable:function(e){var t=this.getName();return this.isReadOnly()||this.getComputedStyle("display")=="none"||this.getComputedStyle("visibility")=="hidden"||CKEDITOR.dtd.$nonEditable[t]||CKEDITOR.dtd.$empty[t]||this.is("a")&&(this.data("cke-saved-name")||this.hasAttribute("name"))&&!this.getChildCount()?!1:e!==!1?(e=CKEDITOR.dtd[t]||CKEDITOR.dtd.span,!!e&&!!e["#"]):!0},isIdentical:function(e){var t=this.clone(0,1),e=e.clone(0,1);t.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),e.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]);if(t.$.isEqualNode)return t.$.style.cssText=CKEDITOR.tools.normalizeCssText(t.$.style.cssText),e.$.style.cssText=CKEDITOR.tools.normalizeCssText(e.$.style.cssText),t.$.isEqualNode(e.$);t=t.getOuterHtml(),e=e.getOuterHtml();if(CKEDITOR.env.ie&&CKEDITOR.env.version<9&&this.is("a")){var n=this.getParent();n.type==CKEDITOR.NODE_ELEMENT&&(n=n.clone(),n.setHtml(t),t=n.getHtml(),n.setHtml(e),e=n.getHtml())}return t==e},isVisible:function(){var e=(this.$.offsetHeight||this.$.offsetWidth)&&this.getComputedStyle("visibility")!="hidden",t,n;return e&&CKEDITOR.env.webkit&&(t=this.getWindow(),!t.equals(CKEDITOR.document.getWindow())&&(n=t.$.frameElement)&&(e=(new CKEDITOR.dom.element(n)).isVisible())),!!e},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()])return!1;for(var e=this.getChildren(),t=0,n=e.count();t<n;t++){var r=e.getItem(t);if((r.type!=CKEDITOR.NODE_ELEMENT||!r.data("cke-bookmark"))&&(r.type==CKEDITOR.NODE_ELEMENT&&!r.isEmptyInlineRemoveable()||r.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(r.getText())))return!1}return!0},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(){for(var e=this.$.attributes,t=0;t<e.length;t++){var n=e[t];switch(n.nodeName){case"class":if(this.getAttribute("class"))return!0;case"data-cke-expando":continue;default:if(n.specified)return!0}}return!1}:function(){var e=this.$.attributes,t=e.length,n={"data-cke-expando":1,_moz_dirty:1};return t>0&&(t>2||!n[e[0].nodeName]||t==2&&!n[e[1].nodeName])},hasAttribute:function(){function e(e){var t=this.$.attributes.getNamedItem(e);if(this.getName()=="input")switch(e){case"class":return this.$.className.length>0;case"checked":return!!this.$.checked;case"value":return e=this.getAttribute("type"),e=="checkbox"||e=="radio"?this.$.value!="on":!!this.$.value}return t?t.specified:!1}return CKEDITOR.env.ie?CKEDITOR.env.version<8?function(t){return t=="name"?!!this.$.name:e.call(this,t)}:e:function(e){return!!this.$.attributes.getNamedItem(e)}}(),hide:function(){this.setStyle("display","none")},moveChildren:function(e,t){var n=this.$,e=e.$;if(n!=e){var r;if(t)for(;r=n.lastChild;)e.insertBefore(n.removeChild(r),e.firstChild);else for(;r=n.firstChild;)e.appendChild(n.removeChild(r))}},mergeSiblings:function(){function e(e,t,n){if(t&&t.type==CKEDITOR.NODE_ELEMENT){for(var r=[];t.data("cke-bookmark")||t.isEmptyInlineRemoveable();){r.push(t),t=n?t.getNext():t.getPrevious();if(!t||t.type!=CKEDITOR.NODE_ELEMENT)return}if(e.isIdentical(t)){for(var i=n?e.getLast():e.getFirst();r.length;)r.shift().move(e,!n);t.moveChildren(e,!n),t.remove(),i&&i.type==CKEDITOR.NODE_ELEMENT&&i.mergeSiblings()}}}return function(t){if(t===!1||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a"))e(this,this.getNext(),!0),e(this,this.getPrevious())}}(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var e=function(e,t){return this.$.setAttribute(e,t),this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(t,n){return t=="class"?this.$.className=n:t=="style"?this.$.style.cssText=n:t=="tabindex"?this.$.tabIndex=n:t=="checked"?this.$.checked=n:t=="contenteditable"?e.call(this,"contentEditable",n):e.apply(this,arguments),this}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(t,n){if(t=="src"&&n.match(/^http:\/\//))try{e.apply(this,arguments)}catch(r){}else e.apply(this,arguments);return this}:e}(),setAttributes:function(e){for(var t in e)this.setAttribute(t,e[t]);return this},setValue:function(e){return this.$.value=e,this},removeAttribute:function(){var e=function(e){this.$.removeAttribute(e)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(e){e=="class"?e="className":e=="tabindex"?e="tabIndex":e=="contenteditable"&&(e="contentEditable"),this.$.removeAttribute(e)}:e}(),removeAttributes:function(e){if(CKEDITOR.tools.isArray(e))for(var t=0;t<e.length;t++)this.removeAttribute(e[t]);else for(t in e)e.hasOwnProperty(t)&&this.removeAttribute(t)},removeStyle:function(e){var t=this.$.style;if(!!t.removeProperty||e!="border"&&e!="margin"&&e!="padding")t.removeProperty?t.removeProperty(e):t.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(e)),this.$.style.cssText||this.removeAttribute("style");else{var n=["top","left","right","bottom"],r;e=="border"&&(r=["color","style","width"]);for(var t=[],i=0;i<n.length;i++)if(r)for(var s=0;s<r.length;s++)t.push([e,n[i],r[s]].join("-"));else t.push([e,n[i]].join("-"));for(e=0;e<t.length;e++)this.removeStyle(t[e])}},setStyle:function(e,t){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(e)]=t,this},setStyles:function(e){for(var t in e)this.setStyle(t,e[t]);return this},setOpacity:function(e){CKEDITOR.env.ie&&CKEDITOR.env.version<9?(e=Math.round(e*100),this.setStyle("filter",e>=100?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+e+")")):this.setStyle("opacity",e)},unselectable:function(){this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","none"));if(CKEDITOR.env.ie){this.setAttribute("unselectable","on");for(var e,t=this.getElementsByTag("*"),n=0,r=t.count();n<r;n++)e=t.getItem(n),e.setAttribute("unselectable","on")}},getPositionedAncestor:function(){for(var e=this;e.getName()!="html";){if(e.getComputedStyle("position")!="static")return e;e=e.getParent()}return null},getDocumentPosition:function(e){var t=0,n=0,r=this.getDocument(),i=r.getBody(),s=r.$.compatMode=="BackCompat";if(document.documentElement.getBoundingClientRect){var o=this.$.getBoundingClientRect(),u=r.$.documentElement,a=u.clientTop||i.$.clientTop||0,f=u.clientLeft||i.$.clientLeft||0,l=!0;CKEDITOR.env.ie&&(l=r.getDocumentElement().contains(this),r=r.getBody().contains(this),l=s&&r||!s&&l),l&&(CKEDITOR.env.webkit||CKEDITOR.env.ie&&CKEDITOR.env.version>=12?(t=i.$.scrollLeft||u.scrollLeft,n=i.$.scrollTop||u.scrollTop):(n=s?i.$:u,t=n.scrollLeft,n=n.scrollTop),t=o.left+t-f,n=o.top+n-a)}else{a=this;for(f=null;a&&a.getName()!="body"&&a.getName()!="html";){t+=a.$.offsetLeft-a.$.scrollLeft,n+=a.$.offsetTop-a.$.scrollTop,a.equals(this)||(t+=a.$.clientLeft||0,n+=a.$.clientTop||0);for(;f&&!f.equals(a);)t-=f.$.scrollLeft,n-=f.$.scrollTop,f=f.getParent();f=a,a=(o=a.$.offsetParent)?new CKEDITOR.dom.element(o):null}}return e&&(o=this.getWindow(),a=e.getWindow(),!o.equals(a)&&o.$.frameElement&&(e=(new CKEDITOR.dom.element(o.$.frameElement)).getDocumentPosition(e),t+=e.x,n+=e.y)),!document.documentElement.getBoundingClientRect&&CKEDITOR.env.gecko&&!s&&(t+=this.$.clientLeft?1:0,n+=this.$.clientTop?1:0),{x:t,y:n}},scrollIntoView:function(e){var t=this.getParent();if(t)do{(t.$.clientWidth&&t.$.clientWidth<t.$.scrollWidth||t.$.clientHeight&&t.$.clientHeight<t.$.scrollHeight)&&!t.is("body")&&this.scrollIntoParent(t,e,1);if(t.is("html")){var n=t.getWindow
();try{var r=n.$.frameElement;r&&(t=new CKEDITOR.dom.element(r))}catch(i){}}}while(t=t.getParent())},scrollIntoParent:function(e,t,n){function u(t,n){/body|html/.test(e.getName())?e.getWindow().$.scrollBy(t,n):(e.$.scrollLeft=e.$.scrollLeft+t,e.$.scrollTop=e.$.scrollTop+n)}function a(e,t){var n={x:0,y:0};if(!e.is(l?"body":"html")){var r=e.$.getBoundingClientRect();n.x=r.left,n.y=r.top}return r=e.getWindow(),r.equals(t)||(r=a(CKEDITOR.dom.element.get(r.$.frameElement),t),n.x=n.x+r.x,n.y=n.y+r.y),n}function f(e,t){return parseInt(e.getComputedStyle("margin-"+t)||0,10)||0}var r,i,s,o;!e&&(e=this.getWindow()),s=e.getDocument();var l=s.$.compatMode=="BackCompat";e instanceof CKEDITOR.dom.window&&(e=l?s.getBody():s.getDocumentElement()),s=e.getWindow(),i=a(this,s);var c=a(e,s),h=this.$.offsetHeight;r=this.$.offsetWidth;var p=e.$.clientHeight,d=e.$.clientWidth;s=i.x-f(this,"left")-c.x||0,o=i.y-f(this,"top")-c.y||0,r=i.x+r+f(this,"right")-(c.x+d)||0,i=i.y+h+f(this,"bottom")-(c.y+p)||0,(o<0||i>0)&&u(0,t===!0?o:t===!1?i:o<0?o:i),n&&(s<0||r>0)&&u(s<0?s:r,0)},setState:function(e,t,n){t=t||"cke";switch(e){case CKEDITOR.TRISTATE_ON:this.addClass(t+"_on"),this.removeClass(t+"_off"),this.removeClass(t+"_disabled"),n&&this.setAttribute("aria-pressed",!0),n&&this.removeAttribute("aria-disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass(t+"_disabled"),this.removeClass(t+"_off"),this.removeClass(t+"_on"),n&&this.setAttribute("aria-disabled",!0),n&&this.removeAttribute("aria-pressed");break;default:this.addClass(t+"_off"),this.removeClass(t+"_on"),this.removeClass(t+"_disabled"),n&&this.removeAttribute("aria-pressed"),n&&this.removeAttribute("aria-disabled")}},getFrameDocument:function(){var e=this.$;try{e.contentWindow.document}catch(t){e.src=e.src}return e&&new CKEDITOR.dom.document(e.contentWindow.document)},copyAttributes:function(e,t){for(var n=this.$.attributes,t=t||{},r=0;r<n.length;r++){var i=n[r],s=i.nodeName.toLowerCase(),o;if(!(s in t))if(s=="checked"&&(o=this.getAttribute(s)))e.setAttribute(s,o);else if(!CKEDITOR.env.ie||this.hasAttribute(s))o=this.getAttribute(s),o===null&&(o=i.nodeValue),e.setAttribute(s,o)}this.$.style.cssText!==""&&(e.$.style.cssText=this.$.style.cssText)},renameNode:function(e){if(this.getName()!=e){var t=this.getDocument(),e=new CKEDITOR.dom.element(e,t);this.copyAttributes(e),this.moveChildren(e),this.getParent(!0)&&this.$.parentNode.replaceChild(e.$,this.$),e.$["data-cke-expando"]=this.$["data-cke-expando"],this.$=e.$,delete this.getName}},getChild:function(){function e(e,t){var n=e.childNodes;if(t>=0&&t<n.length)return n[t]}return function(t){var n=this.$;if(t.slice)for(t=t.slice();t.length>0&&n;)n=e(n,t.shift());else n=e(n,t);return n?new CKEDITOR.dom.node(n):null}}(),getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){this.on("contextmenu",function(e){e.data.getTarget().hasClass("cke_enable_context_menu")||e.data.preventDefault()})},getDirection:function(e){return e?this.getComputedStyle("direction")||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||"ltr":this.getStyle("direction")||this.getAttribute("dir")},data:function(e,t){return e="data-"+e,t===void 0?this.getAttribute(e):(t===!1?this.removeAttribute(e):this.setAttribute(e,t),null)},getEditor:function(){var e=CKEDITOR.instances,t,n;for(t in e){n=e[t];if(n.element.equals(this)&&n.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO)return n}return null},find:function(e){var r=t(this),e=new CKEDITOR.dom.nodeList(this.$.querySelectorAll(n(this,e)));return r(),e},findOne:function(e){var r=t(this),e=this.$.querySelector(n(this,e));return r(),e?new CKEDITOR.dom.element(e):null},forEach:function(e,t,n){if(!n&&(!t||this.type==t))var r=e(this);if(r!==!1)for(var n=this.getChildren(),i=0;i<n.count();i++)r=n.getItem(i),r.type==CKEDITOR.NODE_ELEMENT?r.forEach(e,t):(!t||r.type==t)&&e(r)}});var o={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(e,t,n){typeof t=="number"&&(n&&(!CKEDITOR.env.ie||!CKEDITOR.env.quirks)&&(t-=r.call(this,e)),this.setStyle(e,t+"px"))},CKEDITOR.dom.element.prototype.getSize=function(e,t){var n=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(e)],this.$["client"+CKEDITOR.tools.capitalize(e)])||0;return t&&(n-=r.call(this,e)),n}}(),CKEDITOR.dom.documentFragment=function(e){e=e||CKEDITOR.document,this.$=e.type==CKEDITOR.NODE_DOCUMENT?e.$.createDocumentFragment():e},CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(e){e=e.$,e.parentNode.insertBefore(this.$,e.nextSibling)},getHtml:function(){var e=new CKEDITOR.dom.element("div");return this.clone(1,1).appendTo(e),e.getHtml().replace(/\s*data-cke-expando=".*?"/g,"")}},!0,{append:1,appendBogus:1,clone:1,getFirst:1,getHtml:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1}),function(){function e(e,t){var n=this.range;if(this._.end)return null;if(!this._.start){this._.start=1;if(n.collapsed)return this.end(),null;n.optimize()}var r,i=n.startContainer;r=n.endContainer;var s=n.startOffset,o=n.endOffset,u,a=this.guard,f=this.type,l=e?"getPreviousSourceNode":"getNextSourceNode";if(!e&&!this._.guardLTR){var c=r.type==CKEDITOR.NODE_ELEMENT?r:r.getParent(),h=r.type==CKEDITOR.NODE_ELEMENT?r.getChild(o):r.getNext();this._.guardLTR=function(e,t){return(!t||!c.equals(e))&&(!h||!e.equals(h))&&(e.type!=CKEDITOR.NODE_ELEMENT||!t||!e.equals(n.root))}}if(e&&!this._.guardRTL){var p=i.type==CKEDITOR.NODE_ELEMENT?i:i.getParent(),d=i.type==CKEDITOR.NODE_ELEMENT?s?i.getChild(s-1):null:i.getPrevious();this._.guardRTL=function(e,t){return(!t||!p.equals(e))&&(!d||!e.equals(d))&&(e.type!=CKEDITOR.NODE_ELEMENT||!t||!e.equals(n.root))}}var v=e?this._.guardRTL:this._.guardLTR;u=a?function(e,t){return v(e,t)===!1?!1:a(e,t)}:v,this.current?r=this.current[l](!1,f,u):(e?r.type==CKEDITOR.NODE_ELEMENT&&(r=o>0?r.getChild(o-1):u(r,!0)===!1?null:r.getPreviousSourceNode(!0,f,u)):(r=i,r.type==CKEDITOR.NODE_ELEMENT&&!(r=r.getChild(s))&&(r=u(i,!0)===!1?null:i.getNextSourceNode(!0,f,u))),r&&u(r)===!1&&(r=null));for(;r&&!this._.end;){this.current=r;if(!this.evaluator||this.evaluator(r)!==!1){if(!t)return r}else if(t&&this.evaluator)return!1;r=r[l](!1,f,u)}return this.end(),this.current=null}function t(t){for(var n,r=null;n=e.call(this,t);)r=n;return r}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(e){this.range=e,this._={}},proto:{end:function(){this._.end=1},next:function(){return e.call(this)},previous:function(){return e.call(this,1)},checkForward:function(){return e.call(this,0,1)!==!1},checkBackward:function(){return e.call(this,1,1)!==!1},lastForward:function(){return t.call(this)},lastBackward:function(){return t.call(this,1)},reset:function(){delete this.current,this._={}}}});var n={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},r={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(e){return this.getComputedStyle("float")!="none"||this.getComputedStyle("position")in r||!n[this.getComputedStyle("display")]?!!(this.is(CKEDITOR.dtd.$block)||e&&this.is(e)):!0},CKEDITOR.dom.walker.blockBoundary=function(e){return function(t){return t.type!=CKEDITOR.NODE_ELEMENT||!t.isBlockBoundary(e)}},CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})},CKEDITOR.dom.walker.bookmark=function(e,t){function n(e){return e&&e.getName&&e.getName()=="span"&&e.data("cke-bookmark")}return function(r){var i,s;return i=r&&r.type!=CKEDITOR.NODE_ELEMENT&&(s=r.getParent())&&n(s),i=e?i:i||n(r),!!(t^i)}},CKEDITOR.dom.walker.whitespaces=function(e){return function(t){var n;return t&&t.type==CKEDITOR.NODE_TEXT&&(n=!CKEDITOR.tools.trim(t.getText())||CKEDITOR.env.webkit&&t.getText()=="​"),!!(e^n)}},CKEDITOR.dom.walker.invisible=function(e){var t=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.env.webkit?1:0;return function(r){return t(r)?r=1:(r.type==CKEDITOR.NODE_TEXT&&(r=r.getParent()),r=r.$.offsetWidth<=n),!!(e^r)}},CKEDITOR.dom.walker.nodeType=function(e,t){return function(n){return!!(t^n.type==e)}},CKEDITOR.dom.walker.bogus=function(e){function t(e){return!s(e)&&!o(e)}return function(n){var r=CKEDITOR.env.needsBrFiller?n.is&&n.is("br"):n.getText&&i.test(n.getText());return r&&(r=n.getParent(),n=n.getNext(t),r=r.isBlockBoundary()&&(!n||n.type==CKEDITOR.NODE_ELEMENT&&n.isBlockBoundary())),!!(e^r)}},CKEDITOR.dom.walker.temp=function(e){return function(t){return t.type!=CKEDITOR.NODE_ELEMENT&&(t=t.getParent()),t=t&&t.hasAttribute("data-cke-temp"),!!(e^t)}};var i=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,s=CKEDITOR.dom.walker.whitespaces(),o=CKEDITOR.dom.walker.bookmark(),u=CKEDITOR.dom.walker.temp();CKEDITOR.dom.walker.ignored=function(e){return function(t){return t=s(t)||o(t)||u(t),!!(e^t)}};var a=CKEDITOR.dom.walker.ignored();CKEDITOR.dom.walker.empty=function(e){return function(t){for(var n=0,r=t.getChildCount();n<r;++n)if(!a(t.getChild(n)))return!!e;return!e}};var f=CKEDITOR.dom.walker.empty(),l=CKEDITOR.dom.walker.validEmptyBlockContainers=CKEDITOR.tools.extend(function(e){var t={},n;for(n in e)CKEDITOR.dtd[n]["#"]&&(t[n]=1);return t}(CKEDITOR.dtd.$block),{caption:1,td:1,th:1});CKEDITOR.dom.walker.editable=function(e){return function(t){return!!(e^(a(t)?0:t.type==CKEDITOR.NODE_TEXT||t.type==CKEDITOR.NODE_ELEMENT&&(t.is(CKEDITOR.dtd.$inline)||t.is("hr")||t.getAttribute("contenteditable")=="false"||!CKEDITOR.env.needsBrFiller&&t.is(l)&&f(t))?1:0))}},CKEDITOR.dom.element.prototype.getBogus=function(){var e=this;do e=e.getPreviousSourceNode();while(o(e)||s(e)||e.type==CKEDITOR.NODE_ELEMENT&&e.is(CKEDITOR.dtd.$inline)&&!e.is(CKEDITOR.dtd.$empty));return e&&(CKEDITOR.env.needsBrFiller?e.is&&e.is("br"):e.getText&&i.test(e.getText()))?e:!1}}(),CKEDITOR.dom.range=function(e){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null,this.collapsed=!0;var t=e instanceof CKEDITOR.dom.document;this.document=t?e:e.getDocument(),this.root=t?e.getBody():e},function(){function e(e){e.collapsed=e.startContainer&&e.endContainer&&e.startContainer.equals(e.endContainer)&&e.startOffset==e.endOffset}function t(e,t,n,r,i){function s(e,t,n,r){var s=n?e.getPrevious():e.getNext();return r&&a?s:(l||r?t.append(e.clone(!0,i),n):(e.remove(),f&&t.append(e)),s)}function o(){var e,t,n,r=Math.min(E.length,S.length);for(e=0;e<r;e++){t=E[e],n=S[e];if(!t.equals(n))return e}return e-1}function u(){var t=x-1,n=g&&y&&!c.equals(h);t<T-1||t<N-1||n?(n?e.moveToPosition(h,CKEDITOR.POSITION_BEFORE_START):N==t+1&&m?e.moveToPosition(S[t],CKEDITOR.POSITION_BEFORE_END):e.moveToPosition(S[t+1],CKEDITOR.POSITION_BEFORE_START),r&&(t=E[t+1])&&t.type==CKEDITOR.NODE_ELEMENT&&(n=CKEDITOR.dom.element.createFromHtml('<span data-cke-bookmark="1" style="display:none">&nbsp;</span>',e.document),n.insertAfter(t),t.mergeSiblings(!1),e.moveToBookmark({startNode:n}))):e.collapse(!0)}e.optimizeBookmark();var a=t===0,f=t==1,l=t==2,t=l||f,c=e.startContainer,h=e.endContainer,p=e.startOffset,d=e.endOffset,v,m,g,y,b,w;if(l&&h.type==CKEDITOR.NODE_TEXT&&c.equals(h))c=e.document.createText(c.substring(p,d)),n.append(c);else{h.type==CKEDITOR.NODE_TEXT?l?w=!0:h=h.split(d):h.getChildCount()>0?d>=h.getChildCount()?(h=h.getChild(d-1),m=!0):h=h.getChild(d):y=m=!0,c.type==CKEDITOR.NODE_TEXT?l?b=!0:c.split(p):c.getChildCount()>0?p===0?(c=c.getChild(p),v=!0):c=c.getChild(p-1):g=v=!0;for(var E=c.getParents(),S=h.getParents(),x=o(),T=E.length-1,N=S.length-1,C=n,k,L,A,O=-1,M=x;M<=T;M++){L=E[M],A=L.getNext();for(M==T&&!(L.equals(S[M])&&T<N)?v?s(L,C,!1,g):b&&C.append(e.document.createText(L.substring(p))):t&&(k=C.append(L.clone(0,i)));A;){if(A.equals(S[M])){O=M;break}A=s(A,C)}C=k}C=n;for(M=x;M<=N;M++){n=S[M],A=n.getPrevious();if(n.equals(E[M]))t&&(C=C.getChild(0));else{M==N&&!(n.equals(E[M])&&N<T)?m?s(n,C,!1,y):w&&C.append(e.document.createText(n.substring(0,d))):t&&(k=C.append(n.clone(0,i)));if(M>O)for(;A;)A=s(A,C,!0);C=k}}l||u()}}function n(){var e=!1,t=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.dom.walker.bookmark(!0),r=CKEDITOR.dom.walker.bogus();return function(i){return n(i)||t(i)?!0:r(i)&&!e?e=!0:i.type==CKEDITOR.NODE_TEXT&&(i.hasAscendant("pre")||CKEDITOR.tools.trim(i.getText()).length)||i.type==CKEDITOR.NODE_ELEMENT&&!i.is(s)?!1:!0}}function r(e){var t=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.dom.walker.bookmark(1);return function(r){return n(r)||t(r)?!0:!e&&o(r)||r.type==CKEDITOR.NODE_ELEMENT&&r.is(CKEDITOR.dtd.$removeEmpty)}}function i(e){return function(){var t;return this[e?"getPreviousNode":"getNextNode"](function(e){return!t&&f(e)&&(t=e),a(e)&&(!o(e)||!e.equals(t))})}}var s={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1},o=CKEDITOR.dom.walker.bogus(),u=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,a=CKEDITOR.dom.walker.editable(),f=CKEDITOR.dom.walker.ignored(!0);CKEDITOR.dom.range.prototype={clone:function(){var e=new CKEDITOR.dom.range(this.root);return e._setStartContainer(this.startContainer),e.startOffset=this.startOffset,e._setEndContainer(this.endContainer),e.endOffset=this.endOffset,e.collapsed=this.collapsed,e},collapse:function(e){e?(this._setEndContainer(this.startContainer),this.endOffset=this.startOffset):(this._setStartContainer(this.endContainer),this.startOffset=this.endOffset),this.collapsed=!0},cloneContents:function(e){var n=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||t(this,2,n,!1,typeof e=="undefined"?!0:e),n},deleteContents:function(e){this.collapsed||t(this,0,null,e)},extractContents:function(e,n){var r=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||t(this,1,r,e,typeof n=="undefined"?!0:n),r},createBookmark:function(e){var t,n,r,i,s=this.collapsed;return t=this.document.createElement("span"),t.data("cke-bookmark",1),t.setStyle("display","none"),t.setHtml("&nbsp;"),e&&(r="cke_bm_"+CKEDITOR.tools.getNextNumber(),t.setAttribute("id",r+(s?"C":"S"))),s||(n=t.clone(),n.setHtml("&nbsp;"),e&&n.setAttribute("id",r+"E"),i=this.clone(),i.collapse(),i.insertNode(n)),i=this.clone(),i.collapse(!0),i.insertNode(t),n?(this.setStartAfter(t),this.setEndBefore(n)):this.moveToPosition(t,CKEDITOR.POSITION_AFTER_END),{startNode:e?r+(s?"C":"S"):t,endNode:e?r+"E":n,serializable:e,collapsed:s}},createBookmark2:function(){function e(e){var n=e.container,r=e.offset,i;i=n;var s=r;i=i.type!=CKEDITOR.NODE_ELEMENT||s===0||s==i.getChildCount()?0:i.getChild(s-1).type==CKEDITOR.NODE_TEXT&&i.getChild(s).type==CKEDITOR.NODE_TEXT,i&&(n=n.getChild(r-1),r=n.getLength()),n.type==CKEDITOR.NODE_ELEMENT&&r>1&&(r=n.getChild(r-1).getIndex(!0)+1);if(n.type==CKEDITOR.NODE_TEXT){i=n;for(s=0;(i=i.getPrevious())&&i.type==CKEDITOR.NODE_TEXT;)s+=i.getLength();i=s,n.getText()?r+=i:(s=n.getPrevious(t),i?(r=i,n=s?s.getNext():n.getParent().getFirst()):(n=n.getParent(),r=s?s.getIndex(!0)+1:0))}e.container=n,e.offset=r}var t=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_TEXT,!0);return function(t){var n=this.collapsed,r={container:this.startContainer,offset:this.startOffset},i={container:this.endContainer,offset:this.endOffset};return t&&(e(r),n||e(i)),{start:r.container.getAddress(t),end:n?null:i.container.getAddress(t),startOffset:r.offset,endOffset:i.offset,normalized:t,collapsed:n,is2:!0}}}(),moveToBookmark:function(e){if(e.is2){var t=this.document.getByAddress(e.start,e.normalized),n=e.startOffset,r=e.end&&this.document.getByAddress(e.end,e.normalized),e=e.endOffset;this.setStart(t,n),r?this.setEnd(r,e):this.collapse(!0)}else t=(n=e.serializable)?this.document.getById(e.startNode):e.startNode,e=n?this.document.getById(e.endNode):e.endNode,this.setStartBefore(t),t.remove(),e?(this.setEndBefore(e),e.remove()):this.collapse(!0)},getBoundaryNodes:function(){var e=this.startContainer,t=this.endContainer,n=this.startOffset,r=this.endOffset,i;if(e.type==CKEDITOR.NODE_ELEMENT){i=e.getChildCount();if(i>n)e=e.getChild(n);else if(i<1)e=e.getPreviousSourceNode();else{for(e=e.$;e.lastChild;)e=e.lastChild;e=new CKEDITOR.dom.node(e),e=e.getNextSourceNode()||e}}if(t.type==CKEDITOR.NODE_ELEMENT){i=t.getChildCount();if(i>r)t=t.getChild(r).getPreviousSourceNode(!0);else if(i<1)t=t.getPreviousSourceNode();else{for(t=t.$;t.lastChild;)t=t.lastChild;t=new CKEDITOR.dom.node(t)}}return e.getPosition(t)&CKEDITOR.POSITION_FOLLOWING&&(e=t),{startNode:e,endNode:t}},getCommonAncestor:function(e,t){var n=this.startContainer,r=this.endContainer,n=n.equals(r)?e&&n.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?n.getChild(this.startOffset):n:n.getCommonAncestor(r);return t&&!n.is?n.getParent():n},optimize:function(){var e=this.startContainer,t=this.startOffset;e.type!=CKEDITOR.NODE_ELEMENT&&(t?t>=e.getLength()&&this.setStartAfter(e):this.setStartBefore(e)),e=this.endContainer,t=this.endOffset,e.type!=CKEDITOR.NODE_ELEMENT&&(t?t>=e.getLength()&&this.setEndAfter(e):this.setEndBefore(e))},optimizeBookmark:function(){var e=this.startContainer,t=this.endContainer;e.is&&e.is("span")&&e.data("cke-bookmark")&&this.setStartAt(e,CKEDITOR.POSITION_BEFORE_START),t&&t.is&&t.is("span")&&t.data("cke-bookmark")&&this.setEndAt(t,CKEDITOR.POSITION_AFTER_END)},trim:function(e,t){var n=this.startContainer,r=this.startOffset,i=this.collapsed;if((!e||i)&&n&&n.type==CKEDITOR.NODE_TEXT){if(r)if(r>=n.getLength())r=n.getIndex()+1,n=n.getParent();else{var s=n.split(r),r=n.getIndex()+1,n=n.getParent();this.startContainer.equals(this.endContainer)?this.setEnd(s,this.endOffset-this.startOffset):n.equals(this.endContainer)&&(this.endOffset=this.endOffset+1)}else r=n.getIndex(),n=n.getParent();this.setStart(n,r);if(i){this.collapse(!0);return}}n=this.endContainer,r=this.endOffset,!t&&!i&&n&&n.type==CKEDITOR.NODE_TEXT&&(r?(r>=n.getLength()||n.split(r),r=n.getIndex()+1):r=n.getIndex(),n=n.getParent(),this.setEnd(n,r))},enlarge:function(e,t){function n(e){return e&&e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("contenteditable")?null:e}var r=RegExp(/[^\s\ufeff]/);switch(e){case CKEDITOR.ENLARGE_INLINE:var i=1;case CKEDITOR.ENLARGE_ELEMENT:if(this.collapsed)break;var s=this.getCommonAncestor(),o=this.root,u,a,f,l,c,h=!1,p,d;p=this.startContainer;var v=this.startOffset;p.type==CKEDITOR.NODE_TEXT?(v&&(p=!CKEDITOR.tools.trim(p.substring(0,v)).length&&p,h=!!p),p&&!(l=p.getPrevious())&&(f=p.getParent())):(v&&(l=p.getChild(v-1)||p.getLast()),l||(f=p));for(f=n(f);f||l;){if(f&&!l){!c&&f.equals(s)&&(c=!0);if(i?f.isBlockBoundary():!o.contains(f))break;if(!h||f.getComputedStyle("display")!="inline")h=!1,c?u=f:this.setStartBefore(f);l=f.getPrevious()}for(;l;){p=!1;if(l.type==CKEDITOR.NODE_COMMENT)l=l.getPrevious();else{if(l.type==CKEDITOR.NODE_TEXT)d=l.getText(),r.test(d)&&(l=null),p=/[\s\ufeff]$/.test(d);else if((l.$.offsetWidth>(CKEDITOR.env.webkit?1:0)||t&&l.is("br"))&&!l.data("cke-bookmark"))if(h&&CKEDITOR.dtd.$removeEmpty[l.getName()]){d=l.getText();if(r.test(d))l=null;else for(var v=l.$.getElementsByTagName("*"),m=0,g;g=v[m++];)if(!CKEDITOR.dtd.$removeEmpty[g.nodeName.toLowerCase()]){l=null;break}l&&(p=!!d.length)}else l=null;p&&(h?c?u=f:f&&this.setStartBefore(f):h=!0);if(l){p=l.getPrevious();if(!f&&!p){f=l,l=null;break}l=p}else f=null}}f&&(f=n(f.getParent()))}p=this.endContainer,v=this.endOffset,f=l=null,c=h=!1;var y=function(e,t){var n=new CKEDITOR.dom.range(o);n.setStart(e,t),n.setEndAt(o,CKEDITOR.POSITION_BEFORE_END);var n=new CKEDITOR.dom.walker(n),i;for(n.guard=function(e){return e.type!=CKEDITOR.NODE_ELEMENT||!e.isBlockBoundary()};i=n.next();){if(i.type!=CKEDITOR.NODE_TEXT)return!1;d=i!=e?i.getText():i.substring(t);if(r.test(d))return!1}return!0};p.type==CKEDITOR.NODE_TEXT?CKEDITOR.tools.trim(p.substring(v)).length?h=!0:(h=!p.getLength(),v==p.getLength()?(l=p.getNext())||(f=p.getParent()):y(p,v)&&(f=p.getParent())):(l=p.getChild(v))||(f=p);for(;f||l;){if(f&&!l){!c&&f.equals(s)&&(c=!0);if(i?f.isBlockBoundary():!o.contains(f))break;if(!h||f.getComputedStyle("display")!="inline")h=!1,c?a=f:f&&this.setEndAfter(f);l=f.getNext()}for(;l;){p=!1;if(l.type==CKEDITOR.NODE_TEXT)d=l.getText(),y(l,0)||(l=null),p=/^[\s\ufeff]/.test(d);else if(l.type==CKEDITOR.NODE_ELEMENT){if((l.$.offsetWidth>0||t&&l.is("br"))&&!l.data("cke-bookmark"))if(h&&CKEDITOR.dtd.$removeEmpty[l.getName()]){d=l.getText();if(r.test(d))l=null;else{v=l.$.getElementsByTagName("*");for(m=0;g=v[m++];)if(!CKEDITOR.dtd.$removeEmpty[g.nodeName.toLowerCase()]){l=null;break}}l&&(p=!!d.length)}else l=null}else p=1;p&&h&&(c?a=f:this.setEndAfter(f));if(l){p=l.getNext();if(!f&&!p){f=l,l=null;break}l=p}else f=null}f&&(f=n(f.getParent()))}u&&a&&(s=u.contains(a)?a:u,this.setStartBefore(s),this.setEndAfter(s));break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:f=new CKEDITOR.dom.range(this.root),o=this.root,f.setStartAt(o,CKEDITOR.POSITION_AFTER_START),f.setEnd(this.startContainer,this.startOffset),f=new CKEDITOR.dom.walker(f);var b,w,E=CKEDITOR.dom.walker.blockBoundary(e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),S=null,x=function(e){if(e.type==CKEDITOR.NODE_ELEMENT&&e.getAttribute("contenteditable")=="false")if(S){if(S.equals(e)){S=null;return}}else S=e;else if(S)return;var t=E(e);return t||(b=e),t},i=function(e){var t=x(e);return!t&&e.is&&e.is("br")&&(w=e),t};f.guard=x,f=f.lastBackward(),b=b||o,this.setStartAt(b,!b.is("br")&&(!f&&this.checkStartOfBlock()||f&&b.contains(f))?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END);if(e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){f=this.clone(),f=new CKEDITOR.dom.walker(f);var T=CKEDITOR.dom.walker.whitespaces(),N=CKEDITOR.dom.walker.bookmark();f.evaluator=function(e){return!T(e)&&!N(e)};if((f=f.previous())&&f.type==CKEDITOR.NODE_ELEMENT&&f.is("br"))break}f=this.clone(),f.collapse(),f.setEndAt(o,CKEDITOR.POSITION_BEFORE_END),f=new CKEDITOR.dom.walker(f),f.guard=e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?i:x,b=S=w=null,f=f.lastForward(),b=b||o,this.setEndAt(b,!f&&this.checkEndOfBlock()||f&&b.contains(f)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START),w&&this.setEndAfter(w)}},shrink:function(e,t,n){if(!this.collapsed){var e=e||CKEDITOR.SHRINK_TEXT,r=this.clone(),i=this.startContainer,s=this.endContainer,o=this.startOffset,u=this.endOffset,a=1,f=1;i&&i.type==CKEDITOR.NODE_TEXT&&(o?o>=i.getLength()?r.setStartAfter(i):(r.setStartBefore(i),a=0):r.setStartBefore(i)),s&&s.type==CKEDITOR.NODE_TEXT&&(u?u>=s.getLength()?r.setEndAfter(s):(r.setEndAfter(s),f=0):r.setEndBefore(s));var r=new CKEDITOR.dom.walker(r),l=CKEDITOR.dom.walker.bookmark();r.evaluator=function(t){return t.type==(e==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)};var c;return r.guard=function(t,r){return l(t)?!0:e==CKEDITOR.SHRINK_ELEMENT&&t.type==CKEDITOR.NODE_TEXT||r&&t.equals(c)||n===!1&&t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary()||t.type==CKEDITOR.NODE_ELEMENT&&t.hasAttribute("contenteditable")?!1:(!r&&t.type==CKEDITOR.NODE_ELEMENT&&(c=t),!0)},a&&(i=r[e==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]())&&this.setStartAt(i,t?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START),f&&(r.reset(),(r=r[e==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(r,t?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END)),!!a||!!f}},insertNode:function(e){this.optimizeBookmark(),this.trim(!1,!0);var t=this.startContainer,n=t.getChild(this.startOffset);n?e.insertBefore(n):t.append(e),e.getParent()&&e.getParent().equals(this.endContainer)&&this.endOffset++,this.setStartBefore(e)},moveToPosition:function(e,t){this.setStartAt(e,t),this.collapse(!0)},moveToRange:function(e){this.setStart(e.startContainer,e.startOffset),this.setEnd(e.endContainer,e.endOffset)},selectNodeContents:function(e){this.setStart(e,0),this.setEnd(e,e.type==CKEDITOR.NODE_TEXT?e.getLength():e.getChildCount())},setStart:function(t,n){t.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[t.getName()]&&(n=t.getIndex(),t=t.getParent()),this._setStartContainer(t),this.startOffset=n,this.endContainer||(this._setEndContainer(t),this.endOffset=n),e(this)},setEnd:function(t,n){t.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[t.getName()]&&(n=t.getIndex()+1,t=t.getParent()),this._setEndContainer(t),this.endOffset=n,this.startContainer||(this._setStartContainer(t),this.startOffset=n),e(this)},setStartAfter:function(e){this.setStart(e.getParent(),e.getIndex()+1)},setStartBefore:function(e){this.setStart(e.getParent(),e.getIndex())},setEndAfter:function(e){this.setEnd(e.getParent(),e.getIndex()+1)},setEndBefore:function(e){this.setEnd(e.getParent(),e.getIndex())},setStartAt:function(t,n){switch(n){case CKEDITOR.POSITION_AFTER_START:this.setStart(t,0);break;case CKEDITOR.POSITION_BEFORE_END:t.type==CKEDITOR.NODE_TEXT?this.setStart(t,t.getLength()):this.setStart(t,t.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(t);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(t)}e(this)},setEndAt:function(t,n){switch(n){case CKEDITOR.POSITION_AFTER_START:this.setEnd(t,0);break;case CKEDITOR.POSITION_BEFORE_END:t.type==CKEDITOR.NODE_TEXT?this.setEnd(t,t.getLength()):this.setEnd(t,t.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(t);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(t)}e(this)},fixBlock:function(e,t){var n=this.createBookmark(),r=this.document.createElement(t);this.collapse(e),this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),this.extractContents().appendTo(r),r.trim(),this.insertNode(r);var i=r.getBogus();return i&&i.remove(),r.appendBogus(),this.moveToBookmark(n),r},splitBlock:function(e,t){var n=new CKEDITOR.dom.elementPath(this.startContainer,this.root),r=new CKEDITOR.dom.elementPath(this.endContainer,this.root),i=n.block,s=r.block,o=null;return n.blockLimit.equals(r.blockLimit)?(e!="br"&&(i||(i=this.fixBlock(!0,e),s=(new CKEDITOR.dom.elementPath(this.endContainer,this.root)).block),s||(s=this.fixBlock(!1,e))),n=i&&this.checkStartOfBlock(),r=s&&this.checkEndOfBlock(),this.deleteContents(),i&&i.equals(s)&&(r?(o=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(s,CKEDITOR.POSITION_AFTER_END),s=null):n?(o=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(i,CKEDITOR.POSITION_BEFORE_START),i=null):(s=this.splitElement(i,t||!1),i.is("ul","ol")||i.appendBogus())),{previousBlock:i,nextBlock:s,wasStartOfBlock:n,wasEndOfBlock:r,elementPath:o}):null},splitElement:function(e,t){if(!this.collapsed)return null;this.setEndAt(e,CKEDITOR.POSITION_BEFORE_END);var n=this.extractContents(!1,t||!1),r=e.clone(!1,t||!1);return n.appendTo(r),r.insertAfter(e),this.moveToPosition(e,CKEDITOR.POSITION_AFTER_END),r},removeEmptyBlocksAtEnd:function(){function e(e){return function(r){return t(r)||n(r)||r.type==CKEDITOR.NODE_ELEMENT&&r.isEmptyInlineRemoveable()||e.is("table")&&r.is("caption")?!1:!0}}var t=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.dom.walker.bookmark(!1);return function(t){for(var n=this.createBookmark(),r=this[t?"endPath":"startPath"](),i=r.block||r.blockLimit,s;i&&!i.equals(r.root)&&!i.getFirst(e(i));)s=i.getParent(),this[t?"setEndAt":"setStartAt"](i,CKEDITOR.POSITION_AFTER_END),i.remove(1),i=s;this.moveToBookmark(n)}}(),startPath:function(){return new CKEDITOR.dom.elementPath(this.startContainer,this.root)},endPath:function(){return new CKEDITOR.dom.elementPath(this.endContainer,this.root)},checkBoundaryOfElement:function(e,t){var n=t==CKEDITOR.START,i=this.clone();return i.collapse(n),i[n?"setStartAt":"setEndAt"](e,n?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),i=new CKEDITOR.dom.walker(i),i.evaluator=r(n),i[n?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var e=this.startContainer,t=this.startOffset;return CKEDITOR.env.ie&&t&&e.type==CKEDITOR.NODE_TEXT&&(e=CKEDITOR.tools.ltrim(e.substring(0,t)),u.test(e)&&this.trim(0,1)),this.trim(),e=new CKEDITOR.dom.elementPath(this.startContainer,this.root),t=this.clone(),t.collapse(!0),t.setStartAt(e.block||e.blockLimit,CKEDITOR.POSITION_AFTER_START),e=new CKEDITOR.dom.walker(t),e.evaluator=n(),e.checkBackward()},checkEndOfBlock:function(){var e=this.endContainer,t=this.endOffset;return CKEDITOR.env.ie&&e.type==CKEDITOR.NODE_TEXT&&(e=CKEDITOR.tools.rtrim(e.substring(t)),u.test(e)&&this.trim(1,0)),this.trim(),e=new CKEDITOR.dom.elementPath(this.endContainer,this.root),t=this.clone(),t.collapse(!1),t.setEndAt(e.block||e.blockLimit,CKEDITOR.POSITION_BEFORE_END),e=new CKEDITOR.dom.walker(t),e.evaluator=n(),e.checkForward()},getPreviousNode:function(e,t,n){var r=this.clone();return r.collapse(1),r.setStartAt(n||this.root,CKEDITOR.POSITION_AFTER_START),n=new CKEDITOR.dom.walker(r),n.evaluator=e,n.guard=t,n.previous()},getNextNode:function(e,t,n){var r=this.clone();return r.collapse(),r.setEndAt(n||this.root,CKEDITOR.POSITION_BEFORE_END),n=new CKEDITOR.dom.walker(r),n.evaluator=e,n.guard=t,n.next()},checkReadOnly:function(){function e(e,t){for(;e;){if(e.type==CKEDITOR.NODE_ELEMENT){if(e.getAttribute("contentEditable")=="false"&&!e.data("cke-editable"))return 0;if(e.is("html")||e.getAttribute("contentEditable")=="true"&&(e.contains(t)||e.equals(t)))break}e=e.getParent()}return 1}return function(){var t=this.startContainer,n=this.endContainer;return!e(t,n)||!e(n,t)}}(),moveToElementEditablePosition:function(e,t){if(e.type==CKEDITOR.NODE_ELEMENT&&!e.isEditable(!1))return this.moveToPosition(e,t?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),!0;for(var n=0;e;){if(e.type==CKEDITOR.NODE_TEXT){t&&this.endContainer&&this.checkEndOfBlock()&&u.test(e.getText())?this.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(e,t?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),n=1;break}if(e.type==CKEDITOR.NODE_ELEMENT)if(e.isEditable())this.moveToPosition(e,t?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START),n=1;else if(t&&e.is("br")&&this.endContainer&&this.checkEndOfBlock())this.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START);else if(e.getAttribute("contenteditable")=="false"&&e.is(CKEDITOR.dtd.$block))return this.setStartBefore(e),this.setEndAfter(e),!0;var r=e,i=n,s=void 0;r.type==CKEDITOR.NODE_ELEMENT&&r.isEditable(!1)&&(s=r[t?"getLast":"getFirst"](f)),!i&&!s&&(s=r[t?"getPrevious":"getNext"](f)),e=s}return!!n},moveToClosestEditablePosition:function(e,t){var n,r=0,i,s,o=[CKEDITOR.POSITION_AFTER_END,CKEDITOR.POSITION_BEFORE_START];e?(n=new CKEDITOR.dom.range(this.root),n.moveToPosition(e,o[t?0:1])):n=this.clone();if(e&&!e.is(CKEDITOR.dtd.$block))r=1;else if(i=n[t?"getNextEditableNode":"getPreviousEditableNode"]())r=1,(s=i.type==CKEDITOR.NODE_ELEMENT)&&i.is(CKEDITOR.dtd.$block)&&i.getAttribute("contenteditable")=="false"?(n.setStartAt(i,CKEDITOR.POSITION_BEFORE_START),n.setEndAt(i,CKEDITOR.POSITION_AFTER_END)):!CKEDITOR.env.needsBrFiller&&s&&i.is(CKEDITOR.dom.walker.validEmptyBlockContainers)?(n.setEnd(i,0),n.collapse()):n.moveToPosition(i,o[t?1:0]);return r&&this.moveToRange(n),!!r},moveToElementEditStart:function(e){return this.moveToElementEditablePosition(e)},moveToElementEditEnd:function(e){return this.moveToElementEditablePosition(e,!0)},getEnclosedNode:function(){var e=this.clone();e.optimize();if(e.startContainer.type!=CKEDITOR.NODE_ELEMENT||e.endContainer.type!=CKEDITOR.NODE_ELEMENT)return null;var e=new CKEDITOR.dom.walker(e),t=CKEDITOR.dom.walker.bookmark(!1,!0),n=CKEDITOR.dom.walker.whitespaces(!0);e.evaluator=function(e){return n(e)&&t(e)};var r=e.next();return e.reset(),r&&r.equals(e.previous())?r:null},getTouchedStartNode:function(){var e=this.startContainer;return this.collapsed||e.type!=CKEDITOR.NODE_ELEMENT?e:e.getChild(this.startOffset)||e},getTouchedEndNode:function(){var e=this.endContainer;return this.collapsed||e.type!=CKEDITOR.NODE_ELEMENT?e:e.getChild(this.endOffset-1)||e},getNextEditableNode:i(),getPreviousEditableNode:i(1),scrollIntoView:function(){var e=new CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",this.document),t,n,r,i=this.clone();i.optimize(),(r=i.startContainer.type==CKEDITOR.NODE_TEXT)?(n=i.startContainer.getText(),t=i.startContainer.split(i.startOffset),e.insertAfter(i.startContainer)):i.insertNode(e),e.scrollIntoView(),r&&(i.startContainer.setText(n),t.remove()),e.remove()},_setStartContainer:function(e){this.startContainer=e},_setEndContainer:function(e){this.endContainer=e}}}(),CKEDITOR.POSITION_AFTER_START=1,CKEDITOR.POSITION_BEFORE_END=2,CKEDITOR.POSITION_BEFORE_START=3,CKEDITOR.POSITION_AFTER_END=4,CKEDITOR
.ENLARGE_ELEMENT=1,CKEDITOR.ENLARGE_BLOCK_CONTENTS=2,CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3,CKEDITOR.ENLARGE_INLINE=4,CKEDITOR.START=1,CKEDITOR.END=2,CKEDITOR.SHRINK_ELEMENT=1,CKEDITOR.SHRINK_TEXT=2,"use strict",function(){function e(e){arguments.length<1||(this.range=e,this.forceBrBreak=0,this.enlargeBr=1,this.enforceRealBlocks=0,this._||(this._={}))}function t(e){var t=[];return e.forEach(function(e){if(e.getAttribute("contenteditable")=="true")return t.push(e),!1},CKEDITOR.NODE_ELEMENT,!0),t}function n(e,r,i,s){e:{s==null&&(s=t(i));for(var o;o=s.shift();)if(o.getDtd().p){s={element:o,remaining:s};break e}s=null}return s?(o=CKEDITOR.filter.instances[s.element.data("cke-filter")])&&!o.check(r)?n(e,r,i,s.remaining):(r=new CKEDITOR.dom.range(s.element),r.selectNodeContents(s.element),r=r.createIterator(),r.enlargeBr=e.enlargeBr,r.enforceRealBlocks=e.enforceRealBlocks,r.activeFilter=r.filter=o,e._.nestedEditable={element:s.element,container:i,remaining:s.remaining,iterator:r},1):0}function r(e,t,n){return t?(e=e.clone(),e.collapse(!n),e.checkBoundaryOfElement(t,n?CKEDITOR.START:CKEDITOR.END)):!1}var i=/^[\r\n\t ]+$/,s=CKEDITOR.dom.walker.bookmark(!1,!0),o=CKEDITOR.dom.walker.whitespaces(!0),u=function(e){return s(e)&&o(e)},a={dd:1,dt:1,li:1};e.prototype={getNextParagraph:function(e){var t,o,l,h,p,e=e||"p";if(this._.nestedEditable){if(t=this._.nestedEditable.iterator.getNextParagraph(e))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,t;this.activeFilter=this.filter;if(n(this,e,this._.nestedEditable.container,this._.nestedEditable.remaining))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,this._.nestedEditable.iterator.getNextParagraph(e);this._.nestedEditable=null}if(!this.range.root.getDtd()[e])return null;if(!this._.started){var d=this.range.clone();o=d.startPath();var v=d.endPath(),m=!d.collapsed&&r(d,o.block),g=!d.collapsed&&r(d,v.block,1);d.shrink(CKEDITOR.SHRINK_ELEMENT,!0),m&&d.setStartAt(o.block,CKEDITOR.POSITION_BEFORE_END),g&&d.setEndAt(v.block,CKEDITOR.POSITION_AFTER_START),o=d.endContainer.hasAscendant("pre",!0)||d.startContainer.hasAscendant("pre",!0),d.enlarge(this.forceBrBreak&&!o||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS);if(!d.collapsed){o=new CKEDITOR.dom.walker(d.clone()),v=CKEDITOR.dom.walker.bookmark(!0,!0),o.evaluator=v,this._.nextNode=o.next(),o=new CKEDITOR.dom.walker(d.clone()),o.evaluator=v,o=o.previous(),this._.lastNode=o.getNextSourceNode(!0,null,d.root),this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()&&(v=this.range.clone(),v.moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END),v.checkEndOfBlock()&&(v=new CKEDITOR.dom.elementPath(v.endContainer,v.root),this._.lastNode=(v.block||v.blockLimit).getNextSourceNode(!0)));if(!this._.lastNode||!d.root.contains(this._.lastNode))this._.lastNode=this._.docEndMarker=d.document.createText(""),this._.lastNode.insertAfter(o);d=null}this._.started=1,o=d}v=this._.nextNode,d=this._.lastNode;for(this._.nextNode=null;v;){var m=0,g=v.hasAscendant("pre"),y=v.type!=CKEDITOR.NODE_ELEMENT,w=0;if(y)v.type==CKEDITOR.NODE_TEXT&&i.test(v.getText())&&(y=0);else{var E=v.getName();if(CKEDITOR.dtd.$block[E]&&v.getAttribute("contenteditable")=="false"){t=v,n(this,e,t);break}if(v.isBlockBoundary(this.forceBrBreak&&!g&&{br:1})){if(E=="br")y=1;else if(!o&&!v.getChildCount()&&E!="hr"){t=v,l=v.equals(d);break}o&&(o.setEndAt(v,CKEDITOR.POSITION_BEFORE_START),E!="br"&&(this._.nextNode=v)),m=1}else{if(v.getFirst()){o||(o=this.range.clone(),o.setStartAt(v,CKEDITOR.POSITION_BEFORE_START)),v=v.getFirst();continue}y=1}}y&&!o&&(o=this.range.clone(),o.setStartAt(v,CKEDITOR.POSITION_BEFORE_START)),l=(!m||y)&&v.equals(d);if(o&&!m)for(;!v.getNext(u)&&!l;){E=v.getParent();if(E.isBlockBoundary(this.forceBrBreak&&!g&&{br:1})){m=1,y=0,l||E.equals(d),o.setEndAt(E,CKEDITOR.POSITION_BEFORE_END);break}v=E,y=1,l=v.equals(d),w=1}y&&o.setEndAt(v,CKEDITOR.POSITION_AFTER_END),v=this._getNextSourceNode(v,w,d);if((l=!v)||m&&o)break}if(!t){if(!o)return this._.docEndMarker&&this._.docEndMarker.remove(),this._.nextNode=null;t=new CKEDITOR.dom.elementPath(o.startContainer,o.root),v=t.blockLimit,m={div:1,th:1,td:1},t=t.block;if(!t&&v&&!this.enforceRealBlocks&&m[v.getName()]&&o.checkStartOfBlock()&&o.checkEndOfBlock()&&!v.equals(o.root))t=v;else if(!t||this.enforceRealBlocks&&t.is(a))t=this.range.document.createElement(e),o.extractContents().appendTo(t),t.trim(),o.insertNode(t),h=p=!0;else if(t.getName()!="li"){if(!o.checkStartOfBlock()||!o.checkEndOfBlock())t=t.clone(!1),o.extractContents().appendTo(t),t.trim(),p=o.splitBlock(),h=!p.wasStartOfBlock,p=!p.wasEndOfBlock,o.insertNode(t)}else l||(this._.nextNode=t.equals(d)?null:this._getNextSourceNode(o.getBoundaryNodes().endNode,1,d))}return h&&(h=t.getPrevious())&&h.type==CKEDITOR.NODE_ELEMENT&&(h.getName()=="br"?h.remove():h.getLast()&&h.getLast().$.nodeName.toLowerCase()=="br"&&h.getLast().remove()),p&&(h=t.getLast())&&h.type==CKEDITOR.NODE_ELEMENT&&h.getName()=="br"&&(!CKEDITOR.env.needsBrFiller||h.getPrevious(s)||h.getNext(s))&&h.remove(),this._.nextNode||(this._.nextNode=l||t.equals(d)||!d?null:this._getNextSourceNode(t,1,d)),t},_getNextSourceNode:function(e,t,n){function r(e){return!e.equals(n)&&!e.equals(i)}for(var i=this.range.root,e=e.getNextSourceNode(t,null,r);!s(e);)e=e.getNextSourceNode(t,null,r);return e}},CKEDITOR.dom.range.prototype.createIterator=function(){return new e(this)}}(),CKEDITOR.command=function(e,t){this.uiItems=[],this.exec=function(n){return this.state==CKEDITOR.TRISTATE_DISABLED||!this.checkAllowed()?!1:(this.editorFocus&&e.focus(),this.fire("exec")===!1?!0:t.exec.call(this,e,n)!==!1)},this.refresh=function(e,n){return!this.readOnly&&e.readOnly?!0:this.context&&!n.isContextFor(this.context)?(this.disable(),!0):this.checkAllowed(!0)?(this.startDisabled||this.enable(),this.modes&&!this.modes[e.mode]&&this.disable(),this.fire("refresh",{editor:e,path:n})===!1?!0:t.refresh&&t.refresh.apply(this,arguments)!==!1):(this.disable(),!0)};var n;this.checkAllowed=function(t){return!t&&typeof n=="boolean"?n:n=e.activeFilter.checkFeature(this)},CKEDITOR.tools.extend(this,t,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!t.context,state:CKEDITOR.TRISTATE_DISABLED}),CKEDITOR.event.call(this)},CKEDITOR.command.prototype={enable:function(){this.state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState(!this.preserveState||typeof this.previousState=="undefined"?CKEDITOR.TRISTATE_OFF:this.previousState)},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(e){return this.state==e||e!=CKEDITOR.TRISTATE_DISABLED&&!this.checkAllowed()?!1:(this.previousState=this.state,this.state=e,this.fire("state"),!0)},toggleState:function(){this.state==CKEDITOR.TRISTATE_OFF?this.setState(CKEDITOR.TRISTATE_ON):this.state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.event.implementOn(CKEDITOR.command.prototype),CKEDITOR.ENTER_P=1,CKEDITOR.ENTER_BR=2,CKEDITOR.ENTER_DIV=3,CKEDITOR.config={customConfig:"config.js",autoUpdateElement:!0,language:"",defaultLanguage:"en",contentsLangDirection:"",enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:"<!DOCTYPE html>",bodyId:"",bodyClass:"",fullPage:!1,height:200,extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,width:"",baseFloatZIndex:1e4,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85]},function(){function e(e,t,n,r,i){var s,u,e=[];for(s in t){u=t[s],u=typeof u=="boolean"?{}:typeof u=="function"?{match:u}:L(u),s.charAt(0)!="$"&&(u.elements=s),n&&(u.featureName=n.toLowerCase());var a=u;a.elements=o(a.elements,/\s+/)||null,a.propertiesOnly=a.propertiesOnly||a.elements===!0;var f=/\s*,\s*/,l=void 0;for(l in _){a[l]=o(a[l],f)||null;var c=a,h=D[l],p=o(a[D[l]],f),d=a[l],v=[],m=!0,y=void 0;p?m=!1:p={};for(y in d)y.charAt(0)=="!"&&(y=y.slice(1),v.push(y),p[y]=!0,m=!1);for(;y=v.pop();)d[y]=d["!"+y],delete d["!"+y];c[h]=(m?!1:p)||null}a.match=a.match||null,r.push(u),e.push(u)}for(var t=i.elements,i=i.generic,b,n=0,r=e.length;n<r;++n){s=L(e[n]),u=s.classes===!0||s.styles===!0||s.attributes===!0,a=s,l=h=f=void 0;for(f in _)a[f]=g(a[f]);c=!0;for(l in D){f=D[l],h=a[f],p=[],d=void 0;for(d in h)d.indexOf("*")>-1?p.push(RegExp("^"+d.replace(/\*/g,".*")+"$")):p.push(d);h=p,h.length&&(a[f]=h,c=!1)}a.nothingRequired=c,a.noProperties=!(a.attributes||a.classes||a.styles);if(s.elements===!0||s.elements===null)i[u?"unshift":"push"](s);else{a=s.elements,delete s.elements;for(b in a)t[b]?t[b][u?"unshift":"push"](s):t[b]=[s]}}}function t(e,t,r,i){if(!e.match||e.match(t))if(i||u(e,t)){e.propertiesOnly||(r.valid=!0),r.allAttributes||(r.allAttributes=n(e.attributes,t.attributes,r.validAttributes)),r.allStyles||(r.allStyles=n(e.styles,t.styles,r.validStyles));if(!r.allClasses){e=e.classes,t=t.classes,i=r.validClasses;if(e)if(e===!0)e=!0;else{for(var s=0,o=t.length,a;s<o;++s)a=t[s],i[a]||(i[a]=e(a));e=!1}else e=!1;r.allClasses=e}}}function n(e,t,n){if(!e)return!1;if(e===!0)return!0;for(var r in t)n[r]||(n[r]=e(r));return!1}function r(e,t,n){if(!e.match||e.match(t)){if(e.noProperties)return!1;n.hadInvalidAttribute=i(e.attributes,t.attributes)||n.hadInvalidAttribute,n.hadInvalidStyle=i(e.styles,t.styles)||n.hadInvalidStyle,e=e.classes,t=t.classes;if(e){for(var r=!1,s=e===!0,o=t.length;o--;)if(s||e(t[o]))t.splice(o,1),r=!0;e=r}else e=!1;n.hadInvalidClass=e||n.hadInvalidClass}}function i(e,t){if(!e)return!1;var n=!1,r=e===!0,i;for(i in t)if(r||e(i))delete t[i],n=!0;return n}function s(e,t,n){return e.disabled||e.customConfig&&!n||!t?!1:(e._.cachedChecks={},!0)}function o(e,t){if(!e)return!1;if(e===!0)return e;if(typeof e=="string")return e=A(e),e=="*"?!0:CKEDITOR.tools.convertArrayToObject(e.split(t));if(CKEDITOR.tools.isArray(e))return e.length?CKEDITOR.tools.convertArrayToObject(e):!1;var n={},r=0,i;for(i in e)n[i]=e[i],r++;return r?n:!1}function u(e,t){if(e.nothingRequired)return!0;var n,r,i,s;if(i=e.requiredClasses){s=t.classes;for(n=0;n<i.length;++n){r=i[n];if(typeof r=="string"){if(CKEDITOR.tools.indexOf(s,r)==-1)return!1}else if(!CKEDITOR.tools.checkIfAnyArrayItemMatches(s,r))return!1}}return a(t.styles,e.requiredStyles)&&a(t.attributes,e.requiredAttributes)}function a(e,t){if(!t)return!0;for(var n=0,r;n<t.length;++n){r=t[n];if(typeof r=="string"){if(!(r in e))return!1}else if(!CKEDITOR.tools.checkIfAnyObjectPropertyMatches(e,r))return!1}return!0}function f(e){if(!e)return{};for(var e=e.split(/\s*,\s*/).sort(),t={};e.length;)t[e.shift()]=O;return t}function l(e){for(var t,n,r,i,s={},o=1,e=A(e);t=e.match(P);)(n=t[2])?(r=c(n,"styles"),i=c(n,"attrs"),n=c(n,"classes")):r=i=n=null,s["$"+o++]={elements:t[1],classes:n,styles:r,attributes:i},e=e.slice(t[0].length);return s}function c(e,t){var n=e.match(H[t]);return n?A(n[1]):null}function h(e){var t=e.styleBackup=e.attributes.style,n=e.classBackup=e.attributes["class"];e.styles||(e.styles=CKEDITOR.tools.parseCssText(t||"",1)),e.classes||(e.classes=n?n.split(/\s+/):[])}function p(e,n,i,s){var o=0,u;s.toHtml&&(n.name=n.name.replace(B,"$1"));if(s.doCallbacks&&e.elementCallbacks){e:for(var a=e.elementCallbacks,f=0,l=a.length,c;f<l;++f)if(c=a[f](n)){u=c;break e}if(u)return u}if(s.doTransform)if(u=e._.transformations[n.name]){h(n);for(a=0;a<u.length;++a)E(e,n,u[a]);v(n)}if(s.doFilter){e:{a=n.name,f=e._,e=f.allowedRules.elements[a],u=f.allowedRules.generic,a=f.disallowedRules.elements[a],f=f.disallowedRules.generic,l=s.skipRequired,c={valid:!1,validAttributes:{},validClasses:{},validStyles:{},allAttributes:!1,allClasses:!1,allStyles:!1,hadInvalidAttribute:!1,hadInvalidClass:!1,hadInvalidStyle:!1};var p,d;if(!e&&!u)e=null;else{h(n);if(a){p=0;for(d=a.length;p<d;++p)if(r(a[p],n,c)===!1){e=null;break e}}if(f){p=0;for(d=f.length;p<d;++p)r(f[p],n,c)}if(e){p=0;for(d=e.length;p<d;++p)t(e[p],n,c,l)}if(u){p=0;for(d=u.length;p<d;++p)t(u[p],n,c,l)}e=c}}if(!e)return i.push(n),k;if(!e.valid)return i.push(n),k;d=e.validAttributes;var g=e.validStyles;u=e.validClasses;var a=n.attributes,y=n.styles,f=n.classes,l=n.classBackup,b=n.styleBackup,w,S,x=[];c=[];var T=/^data-cke-/;p=!1,delete a.style,delete a["class"],delete n.classBackup,delete n.styleBackup;if(!e.allAttributes)for(w in a)d[w]||(T.test(w)?w!=(S=w.replace(/^data-cke-saved-/,""))&&!d[S]&&(delete a[w],p=!0):(delete a[w],p=!0));if(!e.allStyles||e.hadInvalidStyle){for(w in y)e.allStyles||g[w]?x.push(w+":"+y[w]):p=!0;x.length&&(a.style=x.sort().join("; "))}else b&&(a.style=b);if(!e.allClasses||e.hadInvalidClass){for(w=0;w<f.length;++w)(e.allClasses||u[f[w]])&&c.push(f[w]);c.length&&(a["class"]=c.sort().join(" ")),l&&c.length<l.split(/\s+/).length&&(p=!0)}else l&&(a["class"]=l);p&&(o=k);if(!s.skipFinalValidation&&!m(n))return i.push(n),k}return s.toHtml&&(n.name=n.name.replace(j,"cke:$1")),o}function d(e){var t=[],n;for(n in e)n.indexOf("*")>-1&&t.push(n.replace(/\*/g,".*"));return t.length?RegExp("^(?:"+t.join("|")+")$"):null}function v(e){var t=e.attributes,n;delete t.style,delete t["class"];if(n=CKEDITOR.tools.writeCssText(e.styles,!0))t.style=n;e.classes.length&&(t["class"]=e.classes.sort().join(" "))}function m(e){switch(e.name){case"a":if(!e.children.length&&!e.attributes.name)return!1;break;case"img":if(!e.attributes.src)return!1}return!0}function g(e){if(!e)return!1;if(e===!0)return!0;var t=d(e);return function(n){return n in e||t&&n.match(t)}}function y(){return new CKEDITOR.htmlParser.element("br")}function b(e){return e.type==CKEDITOR.NODE_ELEMENT&&(e.name=="br"||C.$block[e.name])}function w(e,t,n){var r=e.name;if(C.$empty[r]||!e.children.length)r=="hr"&&t=="br"?e.replaceWith(y()):(e.parent&&n.push({check:"it",el:e.parent}),e.remove());else if(C.$block[r]||r=="tr")if(t=="br")e.previous&&!b(e.previous)&&(t=y(),t.insertBefore(e)),e.next&&!b(e.next)&&(t=y(),t.insertAfter(e)),e.replaceWithChildren();else{var r=e.children,i;e:{i=C[t];for(var s=0,o=r.length,u;s<o;++s){u=r[s];if(u.type==CKEDITOR.NODE_ELEMENT&&!i[u.name]){i=!1;break e}}i=!0}if(i)e.name=t,e.attributes={},n.push({check:"parent-down",el:e});else{i=e.parent;for(var s=i.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||i.name=="body",a,f,o=r.length;o>0;)u=r[--o],s&&(u.type==CKEDITOR.NODE_TEXT||u.type==CKEDITOR.NODE_ELEMENT&&C.$inline[u.name])?(a||(a=new CKEDITOR.htmlParser.element(t),a.insertAfter(e),n.push({check:"parent-down",el:a})),a.add(u,0)):(a=null,f=C[i.name]||C.span,u.insertAfter(e),i.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT&&u.type==CKEDITOR.NODE_ELEMENT&&!f[u.name]&&n.push({check:"el-up",el:u}));e.remove()}}else r in{style:1,script:1}?e.remove():(e.parent&&n.push({check:"it",el:e.parent}),e.replaceWithChildren())}function E(e,t,n){var r,i;for(r=0;r<n.length;++r){i=n[r];if((!i.check||e.check(i.check,!1))&&(!i.left||i.left(t))){i.right(t,F);break}}}function S(e,t){var n=t.getDefinition(),r=n.attributes,i=n.styles,s,o,u,a;if(e.name!=n.element)return!1;for(s in r)if(s=="class"){n=r[s].split(/\s+/);for(u=e.classes.join("|");a=n.pop();)if(u.indexOf(a)==-1)return!1}else if(e.attributes[s]!=r[s])return!1;for(o in i)if(e.styles[o]!=i[o])return!1;return!0}function x(e,t){var n,r;return typeof e=="string"?n=e:e instanceof CKEDITOR.style?r=e:(n=e[0],r=e[1]),[{element:n,left:r,right:function(e,n){n.transform(e,t)}}]}function T(e){return function(t){return S(t,e)}}function N(e){return function(t,n){n[e](t)}}var C=CKEDITOR.dtd,k=1,L=CKEDITOR.tools.copy,A=CKEDITOR.tools.trim,O="cke-test",M=["","p","br","div"];CKEDITOR.FILTER_SKIP_TREE=2,CKEDITOR.filter=function(e){this.allowedContent=[],this.disallowedContent=[],this.elementCallbacks=null,this.disabled=!1,this.editor=null,this.id=CKEDITOR.tools.getNextNumber(),this._={allowedRules:{elements:{},generic:[]},disallowedRules:{elements:{},generic:[]},transformations:{},cachedTests:{}},CKEDITOR.filter.instances[this.id]=this;if(e instanceof CKEDITOR.editor){e=this.editor=e,this.customConfig=!0;var t=e.config.allowedContent;t===!0?this.disabled=!0:(t||(this.customConfig=!1),this.allow(t,"config",1),this.allow(e.config.extraAllowedContent,"extra",1),this.allow(M[e.enterMode]+" "+M[e.shiftEnterMode],"default",1),this.disallow(e.config.disallowedContent))}else this.customConfig=!1,this.allow(e,"default",1)},CKEDITOR.filter.instances={},CKEDITOR.filter.prototype={allow:function(t,n,r){if(!s(this,t,r))return!1;var i,o;if(typeof t=="string")t=l(t);else if(t instanceof CKEDITOR.style){if(t.toAllowedContentRules)return this.allow(t.toAllowedContentRules(this.editor),n,r);i=t.getDefinition(),t={},r=i.attributes,t[i.element]=i={styles:i.styles,requiredStyles:i.styles&&CKEDITOR.tools.objectKeys(i.styles)},r&&(r=L(r),i.classes=r["class"]?r["class"].split(/\s+/):null,i.requiredClasses=i.classes,delete r["class"],i.attributes=r,i.requiredAttributes=r&&CKEDITOR.tools.objectKeys(r))}else if(CKEDITOR.tools.isArray(t)){for(i=0;i<t.length;++i)o=this.allow(t[i],n,r);return o}return e(this,t,n,this.allowedContent,this._.allowedRules),!0},applyTo:function(e,t,n,r){if(this.disabled)return!1;var i=this,s=[],o=this.editor&&this.editor.config.protectedSource,u,a=!1,f={doFilter:!n,doTransform:!0,doCallbacks:!0,toHtml:t};e.forEach(function(e){if(e.type==CKEDITOR.NODE_ELEMENT){if(e.attributes["data-cke-filter"]=="off")return!1;if(!t||e.name!="span"||!~CKEDITOR.tools.objectKeys(e.attributes).join("|").indexOf("data-cke-")){u=p(i,e,s,f);if(u&k)a=!0;else if(u&2)return!1}}else if(e.type==CKEDITOR.NODE_COMMENT&&e.value.match(/^\{cke_protected\}(?!\{C\})/)){var n;e:{var r=decodeURIComponent(e.value.replace(/^\{cke_protected\}/,""));n=[];var l,c,h;if(o)for(c=0;c<o.length;++c)if((h=r.match(o[c]))&&h[0].length==r.length){n=!0;break e}r=CKEDITOR.htmlParser.fragment.fromHtml(r),r.children.length==1&&(l=r.children[0]).type==CKEDITOR.NODE_ELEMENT&&p(i,l,n,f),n=!n.length}n||s.push(e)}},null,!0),s.length&&(a=!0);for(var l,e=[],r=M[r||(this.editor?this.editor.enterMode:CKEDITOR.ENTER_P)],c;n=s.pop();)n.type==CKEDITOR.NODE_ELEMENT?w(n,r,e):n.remove();for(;l=e.pop();){n=l.el;if(n.parent){c=C[n.parent.name]||C.span;switch(l.check){case"it":C.$removeEmpty[n.name]&&!n.children.length?w(n,r,e):m(n)||w(n,r,e);break;case"el-up":n.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT&&!c[n.name]&&w(n,r,e);break;case"parent-down":n.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT&&!c[n.name]&&w(n.parent,r,e)}}}return a},checkFeature:function(e){return this.disabled||!e?!0:(e.toFeature&&(e=e.toFeature(this.editor)),!e.requiredContent||this.check(e.requiredContent))},disable:function(){this.disabled=!0},disallow:function(t){return s(this,t,!0)?(typeof t=="string"&&(t=l(t)),e(this,t,null,this.disallowedContent,this._.disallowedRules),!0):!1},addContentForms:function(e){if(!this.disabled&&e){var t,n,r=[],i;for(t=0;t<e.length&&!i;++t)n=e[t],(typeof n=="string"||n instanceof CKEDITOR.style)&&this.check(n)&&(i=n);if(i){for(t=0;t<e.length;++t)r.push(x(e[t],i));this.addTransformations(r)}}},addElementCallback:function(e){this.elementCallbacks||(this.elementCallbacks=[]),this.elementCallbacks.push(e)},addFeature:function(e){return this.disabled||!e?!0:(e.toFeature&&(e=e.toFeature(this.editor)),this.allow(e.allowedContent,e.name),this.addTransformations(e.contentTransformations),this.addContentForms(e.contentForms),e.requiredContent&&(this.customConfig||this.disallowedContent.length)?this.check(e.requiredContent):!0)},addTransformations:function(e){var t,n;if(!this.disabled&&e){var r=this._.transformations,i;for(i=0;i<e.length;++i){t=e[i];var s=void 0,o=void 0,u=void 0,a=void 0,f=void 0,l=void 0;n=[];for(o=0;o<t.length;++o)u=t[o],typeof u=="string"?(u=u.split(/\s*:\s*/),a=u[0],f=null,l=u[1]):(a=u.check,f=u.left,l=u.right),s||(s=u,s=s.element?s.element:a?a.match(/^([a-z0-9]+)/i)[0]:s.left.getDefinition().element),f instanceof CKEDITOR.style&&(f=T(f)),n.push({check:a==s?null:a,left:f,right:typeof l=="string"?N(l):l});t=s,r[t]||(r[t]=[]),r[t].push(n)}}},check:function(e,t,n){if(this.disabled)return!0;if(CKEDITOR.tools.isArray(e)){for(var r=e.length;r--;)if(this.check(e[r],t,n))return!0;return!1}var i,s;if(typeof e=="string"){s=e+"<"+(t===!1?"0":"1")+(n?"1":"0")+">";if(s in this._.cachedChecks)return this._.cachedChecks[s];r=l(e).$1,i=r.styles;var o=r.classes;r.name=r.elements,r.classes=o=o?o.split(/\s*,\s*/):[],r.styles=f(i),r.attributes=f(r.attributes),r.children=[],o.length&&(r.attributes["class"]=o.join(" ")),i&&(r.attributes.style=CKEDITOR.tools.writeCssText(r.styles)),i=r}else r=e.getDefinition(),i=r.styles,o=r.attributes||{},i?(i=L(i),o.style=CKEDITOR.tools.writeCssText(i,!0)):i={},i={name:r.element,attributes:o,classes:o["class"]?o["class"].split(/\s+/):[],styles:i,children:[]};var o=CKEDITOR.tools.clone(i),u=[],a;if(t!==!1&&(a=this._.transformations[i.name])){for(r=0;r<a.length;++r)E(this,i,a[r]);v(i)}return p(this,o,u,{doFilter:!0,doTransform:t!==!1,skipRequired:!n,skipFinalValidation:!n}),t=u.length>0?!1:CKEDITOR.tools.objectCompare(i.attributes,o.attributes,!0)?!0:!1,typeof e=="string"&&(this._.cachedChecks[s]=t),t},getAllowedEnterMode:function(){var e=["p","div","br"],t={p:CKEDITOR.ENTER_P,div:CKEDITOR.ENTER_DIV,br:CKEDITOR.ENTER_BR};return function(n,r){var i=e.slice(),s;if(this.check(M[n]))return n;for(r||(i=i.reverse());s=i.pop();)if(this.check(s))return t[s];return CKEDITOR.ENTER_BR}}(),destroy:function(){delete CKEDITOR.filter.instances[this.id],delete this._,delete this.allowedContent,delete this.disallowedContent}};var _={styles:1,attributes:1,classes:1},D={styles:"requiredStyles",attributes:"requiredAttributes",classes:"requiredClasses"},P=/^([a-z0-9\-*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,H={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},B=/^cke:(object|embed|param)$/,j=/^(object|embed|param)$/,F=CKEDITOR.filter.transformationsTools={sizeToStyle:function(e){this.lengthToStyle(e,"width"),this.lengthToStyle(e,"height")},sizeToAttribute:function(e){this.lengthToAttribute(e,"width"),this.lengthToAttribute(e,"height")},lengthToStyle:function(e,t,n){n=n||t;if(!(n in e.styles)){var r=e.attributes[t];r&&(/^\d+$/.test(r)&&(r+="px"),e.styles[n]=r)}delete e.attributes[t]},lengthToAttribute:function(e,t,n){n=n||t;if(!(n in e.attributes)){var r=e.styles[t],i=r&&r.match(/^(\d+)(?:\.\d*)?px$/);i?e.attributes[n]=i[1]:r==O&&(e.attributes[n]=O)}delete e.styles[t]},alignmentToStyle:function(e){if(!("float"in e.styles)){var t=e.attributes.align;if(t=="left"||t=="right")e.styles["float"]=t}delete e.attributes.align},alignmentToAttribute:function(e){if(!("align"in e.attributes)){var t=e.styles["float"];if(t=="left"||t=="right")e.attributes.align=t}delete e.styles["float"]},matchesStyle:S,transform:function(e,t){if(typeof t=="string")e.name=t;else{var n=t.getDefinition(),r=n.styles,i=n.attributes,s,o,u,a;e.name=n.element;for(s in i)if(s=="class"){n=e.classes.join("|");for(u=i[s].split(/\s+/);a=u.pop();)n.indexOf(a)==-1&&e.classes.push(a)}else e.attributes[s]=i[s];for(o in r)e.styles[o]=r[o]}}}}(),function(){CKEDITOR.focusManager=function(e){return e.focusManager?e.focusManager:(this.hasFocus=!1,this.currentActive=null,this._={editor:e},this)},CKEDITOR.focusManager._={blurDelay:200},CKEDITOR.focusManager.prototype={focus:function(e){this._.timer&&clearTimeout(this._.timer),e&&(this.currentActive=e),!this.hasFocus&&!this._.locked&&((e=CKEDITOR.currentInstance)&&e.focusManager.blur(1),this.hasFocus=!0,(e=this._.editor.container)&&e.addClass("cke_focus"),this._.editor.fire("focus"))},lock:function(){this._.locked=1},unlock:function(){delete this._.locked},blur:function(e){function t(){if(this.hasFocus){this.hasFocus=!1;var e=this._.editor.container;e&&e.removeClass("cke_focus"),this._.editor.fire("blur")}}if(!this._.locked){this._.timer&&clearTimeout(this._.timer);var n=CKEDITOR.focusManager._.blurDelay;e||!n?t.call(this):this._.timer=CKEDITOR.tools.setTimeout(function(){delete this._.timer,t.call(this)},n,this)}},add:function(e,t){var n=e.getCustomData("focusmanager");if(!n||n!=this){n&&n.remove(e);var n="focus",r="blur";t&&(CKEDITOR.env.ie?(n="focusin",r="focusout"):CKEDITOR.event.useCapture=1);var i={blur:function(){e.equals(this.currentActive)&&this.blur()},focus:function(){this.focus(e)}};e.on(n,i.focus,this),e.on(r,i.blur,this),t&&(CKEDITOR.event.useCapture=0),e.setCustomData("focusmanager",this),e.setCustomData("focusmanager_handlers",i)}},remove:function(e){e.removeCustomData("focusmanager");var t=e.removeCustomData("focusmanager_handlers");e.removeListener("blur",t.blur),e.removeListener("focus",t.focus)}}}(),CKEDITOR.keystrokeHandler=function(e){return e.keystrokeHandler?e.keystrokeHandler:(this.keystrokes={},this.blockedKeystrokes={},this._={editor:e},this)},function(){var e,t=function(t){var t=t.data,n=t.getKeystroke(),r=this.keystrokes[n],i=this._.editor;return e=i.fire("key",{keyCode:n,domEvent:t})===!1,e||(r&&(e=i.execCommand(r,{from:"keystrokeHandler"})!==!1),e||(e=!!this.blockedKeystrokes[n])),e&&t.preventDefault(!0),!e},n=function(t){e&&(e=!1,t.data.preventDefault(!0))};CKEDITOR.keystrokeHandler.prototype={attach:function(e){e.on("keydown",t,this),CKEDITOR.env.gecko&&CKEDITOR.env.mac&&e.on("keypress",n,this)}}}(),function(){CKEDITOR.lang={languages:{af:1,ar:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function(e,t,n){if(!e||!CKEDITOR.lang.languages[e])e=this.detect(t,e);var r=this,t=function(){r[e].dir=r.rtl[e]?"rtl":"ltr",n(e,r[e])};this[e]?t():CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+e+".js"),t,this)},detect:function(e,t){var n=this.languages,t=t||navigator.userLanguage||navigator.language||e,r=t.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),i=r[1],r=r[2];return n[i+"-"+r]?i=i+"-"+r:n[i]||(i=null),CKEDITOR.lang.detect=i?function(){return i}:function(e){return e},i||e}}}(),CKEDITOR.scriptLoader=function(){var e={},t={};return{load:function(n,r,i,s){var o=typeof n=="string";o&&(n=[n]),i||(i=CKEDITOR);var u=n.length,f=[],l=[],c=function(e){r&&(o?r.call(i,e):r.call(i,f,l))};if(u===0)c(!0);else{var h=function(e,t){(t?f:l).push(e),--u<=0&&(s&&CKEDITOR.document.getDocumentElement().removeStyle("cursor"),c(t))},p=function(n,r){e[n]=1;var i=t[n];delete t[n];for(var s=0;s<i.length;s++)i[s](n,r)},v=function(n){if(e[n])h(n,!0);else{var i=t[n]||(t[n]=[]);i.push(h);if(!(i.length>1)){var s=new CKEDITOR.dom.element("script");s.setAttributes({type:"text/javascript",src:n}),r&&(CKEDITOR.env.ie&&CKEDITOR.env.version<11?s.$.onreadystatechange=function(){if(s.$.readyState=="loaded"||s.$.readyState=="complete")s.$.onreadystatechange=null,p(n,!0)}:(s.$.onload=function(){setTimeout(function(){p(n,!0)},0)},s.$.onerror=function(){p(n,!1)})),s.appendTo(CKEDITOR.document.getHead())}}};s&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var m=0;m<u;m++)v(n[m])}},queue:function(){function e(){var e;(e=t[0])&&this.load(e.scriptUrl,e.callback,CKEDITOR,0)}var t=[];return function(n,r){var i=this;t.push({scriptUrl:n,callback:function(){r&&r.apply(this,arguments),t.shift(),e.call(i)}}),t.length==1&&e.call(this)}}()}}(),CKEDITOR.resourceManager=function(e,t){this.basePath=e,this.fileName=t,this.registered={},this.loaded={},this.externals={},this._={waitingList:{}}},CKEDITOR.resourceManager.prototype={add:function(e,t){if(this.registered[e])throw'[CKEDITOR.resourceManager.add] The resource name "'+e+'" is already registered.';var n=this.registered[e]=t||{};return n.name=e,n.path=this.getPath(e),CKEDITOR.fire(e+CKEDITOR.tools.capitalize(this.fileName)+"Ready",n),this.get(e)},get:function(e){return this.registered[e]||null},getPath:function(e){var t=this.externals[e];return CKEDITOR.getUrl(t&&t.dir||this.basePath+e+"/")},getFilePath:function(e){var t=this.externals[e];return CKEDITOR.getUrl(this.getPath(e)+(t?t.file:this.fileName+".js"))},addExternal:function(e,t,n){for(var e=e.split(","),r=0;r<e.length;r++){var i=e[r];n||(t=t.replace(/[^\/]+$/,function(e){return n=e,""})),this.externals[i]={dir:t,file:n||this.fileName+".js"}}},load:function(e,t,n){CKEDITOR.tools.isArray(e)||(e=e?[e]:[]);for(var r=this.loaded,i=this.registered,s=[],o={},u={},a=0;a<e.length;a++){var f=e[a];if(f)if(!r[f]&&!i[f]){var l=this.getFilePath(f);s.push(l),l in o||(o[l]=[]),o[l].push(f)}else u[f]=this.get(f)}CKEDITOR.scriptLoader.load(s,function(e,i){if(i.length)throw'[CKEDITOR.resourceManager.load] Resource name "'+o[i[0]].join(",")+'" was not found at "'+i[0]+'".';for(var s=0;s<e.length;s++)for(var a=o[e[s]],f=0;f<a.length;f++){var l=a[f];u[l]=this.get(l),r[l]=1}t.call(n,u)},this)}},CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin"),CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,function(e){var t={};return function(n,r,i){var s={},o=function(n){e.call(this,n,function(e){CKEDITOR.tools.extend(s,e);var n=[],u;for(u in e){var a=e[u],l=a&&a.requires;if(!t[u]){if(a.icons)for(var p=a.icons.split(","),v=p.length;v--;)CKEDITOR.skin.addIcon(p[v],a.path+"icons/"+(CKEDITOR.env.hidpi&&a.hidpi?"hidpi/":"")+p[v]+".png");t[u]=1}if(l){l.split&&(l=l.split(","));for(a=0;a<l.length;a++)s[l[a]]||n.push(l[a])}}if(n.length)o.call(this,n);else{for(u in s)a=s[u],a.onLoad&&!a.onLoad._called&&(a.onLoad()===!1&&delete s[u],a.onLoad._called=1);r&&r.call(i||window,s)}},this)};o.call(this,n)}}),CKEDITOR.plugins.setLang=function(e,t,n){var r=this.get(e),e=r.langEntries||(r.langEntries={}),r=r.lang||(r.lang=[]);r.split&&(r=r.split(",")),CKEDITOR.tools.indexOf(r,t)==-1&&r.push(t),e[t]=n},CKEDITOR.ui=function(e){return e.ui?e.ui:(this.items={},this.instances={},this.editor=e,this._={handlers:{}},this)},CKEDITOR.ui.prototype={add:function(e,t,n){n.name=e.toLowerCase();var r=this.items[e]={type:t,command:n.command||null,args:Array.prototype.slice.call(arguments,2)};CKEDITOR.tools.extend(r,n)},get:function(e){return this.instances[e]},create:function(e){var t=this.items[e],n=t&&this._.handlers[t.type],r=t&&t.command&&this.editor.getCommand(t.command),n=n&&n.create.apply(this,t.args);return this.instances[e]=n,r&&r.uiItems.push(n),n&&!n.type&&(n.type=t.type),n},addHandler:function(e,t){this._.handlers[e]=t},space:function(e){return CKEDITOR.document.getById(this.spaceId(e))},spaceId:function(e){return this.editor.id+"_"+e}},CKEDITOR.event.implementOn(CKEDITOR.ui),function(){function e(e,r,s){CKEDITOR.event.call(this),e=e&&CKEDITOR.tools.clone(e);if(r!==void 0){if(!(r instanceof CKEDITOR.dom.element))throw Error("Expect element of type CKEDITOR.dom.element.");if(!s)throw Error("One of the element modes must be specified.");if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&s==CKEDITOR.ELEMENT_MODE_INLINE)throw Error("Inline element mode is not supported on IE quirks.");if(!(s==CKEDITOR.ELEMENT_MODE_INLINE?r.is(CKEDITOR.dtd.$editable)||r.is("textarea"):s==CKEDITOR.ELEMENT_MODE_REPLACE?!r.is(CKEDITOR.dtd.$nonBodyContent):1))throw Error('The specified element mode is not supported on element: "'+r.getName()+'".');this.element=r,this.elementMode=s,this.name=this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(r.getId()||r.getNameAtt())}else this.elementMode=CKEDITOR.ELEMENT_MODE_NONE;this._={},this.commands={},this.templates={},this.name=this.name||t(),this.id=CKEDITOR.tools.getNextId(),this.status="unloaded",this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config),this.ui=new CKEDITOR.ui(this),this.focusManager=new CKEDITOR.focusManager(this),this.keystrokeHandler=new CKEDITOR.keystrokeHandler(this),this.on("readOnly",n),this.on("selectionChange",function(e){i(this,e.data.path)}),this.on("activeFilterChange",function(){i(this,this.elementPath(),!0)}),this.on("mode",n),this.on("instanceReady",function(){this.config.startupFocus&&this.focus()}),CKEDITOR.fire("instanceCreated",null,this),CKEDITOR.add(this),CKEDITOR.tools.setTimeout(function(){o(this,e)},0,this)}function t(){do var e="editor"+ ++h;while(CKEDITOR.instances[e]);return e}function n(){var e=this.commands,t;for(t in e)r(this,e[t])}function r(e,t){t[t.startDisabled?"disable":e.readOnly&&!t.readOnly?"disable":t.modes[e.mode]?"enable":"disable"]()}function i(e,t,n){if(t){var r,i,s=e.commands;for(i in s)r=s[i],(n||r.contextSensitive)&&r.refresh(e,t)}}function s(e){var t=e.config.customConfig;if(!t)return!1;var t=CKEDITOR.getUrl(t),n=p[t]||(p[t]={});return n.fn?(n.fn.call(e,e.config),(CKEDITOR.getUrl(e.config.customConfig)==t||!s(e))&&e.fireOnce("customConfigLoaded")):CKEDITOR.scriptLoader.queue(t,function(){n.fn=CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){},s(e)}),!0}function o(e,t){e.on("customConfigLoaded",function(
){if(t){if(t.on)for(var n in t.on)e.on(n,t.on[n]);CKEDITOR.tools.extend(e.config,t,!0),delete e.config.on}n=e.config,e.readOnly=n.readOnly?!0:e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.element.is("textarea")?e.element.hasAttribute("disabled")||e.element.hasAttribute("readonly"):e.element.isReadOnly():e.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?e.element.hasAttribute("disabled")||e.element.hasAttribute("readonly"):!1,e.blockless=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?!e.element.is("textarea")&&!CKEDITOR.dtd[e.element.getName()].p:!1,e.tabIndex=n.tabIndex||e.element&&e.element.getAttribute("tabindex")||0,e.activeEnterMode=e.enterMode=e.blockless?CKEDITOR.ENTER_BR:n.enterMode,e.activeShiftEnterMode=e.shiftEnterMode=e.blockless?CKEDITOR.ENTER_BR:n.shiftEnterMode,n.skin&&(CKEDITOR.skinName=n.skin),e.fireOnce("configLoaded"),e.dataProcessor=new CKEDITOR.htmlDataProcessor(e),e.filter=e.activeFilter=new CKEDITOR.filter(e),u(e)}),t&&t.customConfig!=null&&(e.config.customConfig=t.customConfig),s(e)||e.fireOnce("customConfigLoaded")}function u(e){CKEDITOR.skin.loadPart("editor",function(){a(e)})}function a(e){CKEDITOR.lang.load(e.config.language,e.config.defaultLanguage,function(t,n){var r=e.config.title;e.langCode=t,e.lang=CKEDITOR.tools.prototypedCopy(n),e.title=typeof r=="string"||r===!1?r:[e.lang.editor,e.name].join(", "),e.config.contentsLangDirection||(e.config.contentsLangDirection=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.element.getDirection(1):e.lang.dir),e.fire("langLoaded"),f(e)})}function f(e){e.getStylesSet(function(t){e.once("loaded",function(){e.fire("stylesSet",{styles:t})},null,null,1),l(e)})}function l(e){var t=e.config,n=t.plugins,r=t.extraPlugins,i=t.removePlugins;if(r)var s=RegExp("(?:^|,)(?:"+r.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),n=n.replace(s,""),n=n+(","+r);if(i)var o=RegExp("(?:^|,)(?:"+i.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),n=n.replace(o,"");CKEDITOR.env.air&&(n+=",adobeair"),CKEDITOR.plugins.load(n.split(","),function(n){var r=[],i=[],s=[];e.plugins=n;for(var u in n){var a=n[u],f=a.lang,l=null,c=a.requires,h;CKEDITOR.tools.isArray(c)&&(c=c.join(","));if(c&&(h=c.match(o)))for(;c=h.pop();)CKEDITOR.tools.setTimeout(function(e,t){throw Error('Plugin "'+e.replace(",","")+'" cannot be removed from the plugins list, because it\'s required by "'+t+'" plugin.')},0,null,[c,u]);f&&!e.lang[u]&&(f.split&&(f=f.split(",")),CKEDITOR.tools.indexOf(f,e.langCode)>=0?l=e.langCode:(l=e.langCode.replace(/-.*/,""),l=l!=e.langCode&&CKEDITOR.tools.indexOf(f,l)>=0?l:CKEDITOR.tools.indexOf(f,"en")>=0?"en":f[0]),!a.langEntries||!a.langEntries[l]?s.push(CKEDITOR.getUrl(a.path+"lang/"+l+".js")):(e.lang[u]=a.langEntries[l],l=null)),i.push(l),r.push(a)}CKEDITOR.scriptLoader.load(s,function(){for(var n=["beforeInit","init","afterInit"],s=0;s<n.length;s++)for(var o=0;o<r.length;o++){var u=r[o];s===0&&i[o]&&u.lang&&u.langEntries&&(e.lang[u.name]=u.langEntries[i[o]]),u[n[s]]&&u[n[s]](e)}e.fireOnce("pluginsLoaded"),t.keystrokes&&e.setKeystroke(e.config.keystrokes);for(o=0;o<e.config.blockedKeystrokes.length;o++)e.keystrokeHandler.blockedKeystrokes[e.config.blockedKeystrokes[o]]=1;e.status="loaded",e.fireOnce("loaded"),CKEDITOR.fire("instanceLoaded",null,e)})})}function c(){var e=this.element;if(e&&this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var t=this.getData();return this.config.htmlEncodeOutput&&(t=CKEDITOR.tools.htmlEncode(t)),e.is("textarea")?e.setValue(t):e.setHtml(t),!0}return!1}e.prototype=CKEDITOR.editor.prototype,CKEDITOR.editor=e;var h=0,p={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{addCommand:function(e,t){t.name=e.toLowerCase();var n=new CKEDITOR.command(this,t);return this.mode&&r(this,n),this.commands[e]=n},_attachToForm:function(){function e(e){t.updateElement(),t._.required&&!n.getValue()&&t.fire("required")===!1&&e.data.preventDefault()}var t=this,n=t.element,r=new CKEDITOR.dom.element(n.$.form);n.is("textarea")&&r&&(r.on("submit",e),r.$.submit&&r.$.submit.call&&r.$.submit.apply&&(r.$.submit=CKEDITOR.tools.override(r.$.submit,function(t){return function(){e(),t.apply?t.apply(this):t()}})),t.on("destroy",function(){r.removeListener("submit",e)}))},destroy:function(e){this.fire("beforeDestroy"),!e&&c.call(this),this.editable(null),this.filter.destroy(),delete this.filter,delete this.activeFilter,this.status="destroyed",this.fire("destroy"),this.removeAllListeners(),CKEDITOR.remove(this),CKEDITOR.fire("instanceDestroyed",null,this)},elementPath:function(e){if(!e){e=this.getSelection();if(!e)return null;e=e.getStartElement()}return e?new CKEDITOR.dom.elementPath(e,this.editable()):null},createRange:function(){var e=this.editable();return e?new CKEDITOR.dom.range(e):null},execCommand:function(e,t){var n=this.getCommand(e),r={name:e,commandData:t,command:n};if(n&&n.state!=CKEDITOR.TRISTATE_DISABLED&&this.fire("beforeCommandExec",r)!==!1){r.returnValue=n.exec(r.commandData);if(!n.async&&this.fire("afterCommandExec",r)!==!1)return r.returnValue}return!1},getCommand:function(e){return this.commands[e]},getData:function(e){!e&&this.fire("beforeGetData");var t=this._.data;return typeof t!="string"&&(t=(t=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?t.is("textarea")?t.getValue():t.getHtml():""),t={dataValue:t},!e&&this.fire("getData",t),t.dataValue},getSnapshot:function(){var e=this.fire("getSnapshot");return typeof e!="string"&&(e=(e=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?e.is("textarea")?e.getValue():e.getHtml():""),e},loadSnapshot:function(e){this.fire("loadSnapshot",e)},setData:function(e,t,n){var r=!0,i=t;t&&typeof t=="object"&&(n=t.internal,i=t.callback,r=!t.noSnapshot),!n&&r&&this.fire("saveSnapshot"),(i||!n)&&this.once("dataReady",function(e){!n&&r&&this.fire("saveSnapshot"),i&&i.call(e.editor)}),e={dataValue:e},!n&&this.fire("setData",e),this._.data=e.dataValue,!n&&this.fire("afterSetData",e)},setReadOnly:function(e){e=e==null||e,this.readOnly!=e&&(this.readOnly=e,this.keystrokeHandler.blockedKeystrokes[8]=+e,this.editable().setReadOnly(e),this.fire("readOnly"))},insertHtml:function(e,t,n){this.fire("insertHtml",{dataValue:e,mode:t,range:n})},insertText:function(e){this.fire("insertText",e)},insertElement:function(e){this.fire("insertElement",e)},getSelectedHtml:function(e){var t=this.editable(),n=this.getSelection(),n=n&&n.getRanges();return!t||!n||n.length===0?null:(t=t.getHtmlFromRange(n[0]),e?t.getHtml():t)},extractSelectedHtml:function(e,t){var n=this.editable(),r=this.getSelection().getRanges();return!n||r.length===0?null:(r=r[0],n=n.extractHtmlFromRange(r,t),t||this.getSelection().selectRanges([r]),e?n.getHtml():n)},focus:function(){this.fire("beforeFocus")},checkDirty:function(){return this.status=="ready"&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this._.previousValue=this.getSnapshot()},updateElement:function(){return c.call(this)},setKeystroke:function(){for(var e=this.keystrokeHandler.keystrokes,t=CKEDITOR.tools.isArray(arguments[0])?arguments[0]:[[].slice.call(arguments,0)],n,r,i=t.length;i--;)n=t[i],r=0,CKEDITOR.tools.isArray(n)&&(r=n[1],n=n[0]),r?e[n]=r:delete e[n]},addFeature:function(e){return this.filter.addFeature(e)},setActiveFilter:function(e){e||(e=this.filter),this.activeFilter!==e&&(this.activeFilter=e,this.fire("activeFilterChange"),e===this.filter?this.setActiveEnterMode(null,null):this.setActiveEnterMode(e.getAllowedEnterMode(this.enterMode),e.getAllowedEnterMode(this.shiftEnterMode,!0)))},setActiveEnterMode:function(e,t){e=e?this.blockless?CKEDITOR.ENTER_BR:e:this.enterMode,t=t?this.blockless?CKEDITOR.ENTER_BR:t:this.shiftEnterMode;if(this.activeEnterMode!=e||this.activeShiftEnterMode!=t)this.activeEnterMode=e,this.activeShiftEnterMode=t,this.fire("activeEnterModeChange")},showNotification:function(e){alert(e)}})}(),CKEDITOR.ELEMENT_MODE_NONE=0,CKEDITOR.ELEMENT_MODE_REPLACE=1,CKEDITOR.ELEMENT_MODE_APPENDTO=2,CKEDITOR.ELEMENT_MODE_INLINE=3,CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)--\>)|(?:([^\/\s>]+)((?:\s+[\w\-:.]+(?:\s*=\s*?(?:(?:"[^"]*")|(?:'[^']*')|[^\s"'\/>]+))?)*)[\S\s]*?(\/?)>))/g}},function(){var e=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,t={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(n){for(var r,i,s=0,o;r=this._.htmlPartsRegex.exec(n);){i=r.index,i>s&&(s=n.substring(s,i),o?o.push(s):this.onText(s)),s=this._.htmlPartsRegex.lastIndex;if(i=r[1]){i=i.toLowerCase(),o&&CKEDITOR.dtd.$cdata[i]&&(this.onCDATA(o.join("")),o=null);if(!o){this.onTagClose(i);continue}}if(o)o.push(r[0]);else if(i=r[3]){i=i.toLowerCase();if(!/="/.test(i)){var u={},f,l=r[4];r=!!r[5];if(l)for(;f=e.exec(l);){var c=f[1].toLowerCase();f=f[2]||f[3]||f[4]||"",u[c]=!f&&t[c]?c:CKEDITOR.tools.htmlDecodeAttr(f)}this.onTagOpen(i,u,r),!o&&CKEDITOR.dtd.$cdata[i]&&(o=[])}}else(i=r[2])&&this.onComment(i)}n.length>s&&this.onText(n.substring(s,n.length))}}}(),CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}},proto:{openTag:function(e){this._.output.push("<",e)},openTagClose:function(e,t){t?this._.output.push(" />"):this._.output.push(">")},attribute:function(e,t){typeof t=="string"&&(t=CKEDITOR.tools.htmlEncodeAttr(t)),this._.output.push(" ",e,'="',t,'"')},closeTag:function(e){this._.output.push("</",e,">")},text:function(e){this._.output.push(e)},comment:function(e){this._.output.push("<!--",e,"-->")},write:function(e){this._.output.push(e)},reset:function(){this._.output=[],this._.indent=!1},getHtml:function(e){var t=this._.output.join("");return e&&this.reset(),t}}}),"use strict",function(){CKEDITOR.htmlParser.node=function(){},CKEDITOR.htmlParser.node.prototype={remove:function(){var e=this.parent.children,t=CKEDITOR.tools.indexOf(e,this),n=this.previous,r=this.next;n&&(n.next=r),r&&(r.previous=n),e.splice(t,1),this.parent=null},replaceWith:function(e){var t=this.parent.children,n=CKEDITOR.tools.indexOf(t,this),r=e.previous=this.previous,i=e.next=this.next;r&&(r.next=e),i&&(i.previous=e),t[n]=e,e.parent=this.parent,this.parent=null},insertAfter:function(e){var t=e.parent.children,n=CKEDITOR.tools.indexOf(t,e),r=e.next;t.splice(n+1,0,this),this.next=e.next,this.previous=e,e.next=this,r&&(r.previous=this),this.parent=e.parent},insertBefore:function(e){var t=e.parent.children,n=CKEDITOR.tools.indexOf(t,e);t.splice(n,0,this),this.next=e,(this.previous=e.previous)&&(e.previous.next=this),e.previous=this,this.parent=e.parent},getAscendant:function(e){var t=typeof e=="function"?e:typeof e=="string"?function(t){return t.name==e}:function(t){return t.name in e},n=this.parent;for(;n&&n.type==CKEDITOR.NODE_ELEMENT;){if(t(n))return n;n=n.parent}return null},wrapWith:function(e){return this.replaceWith(e),e.add(this),e},getIndex:function(){return CKEDITOR.tools.indexOf(this.parent.children,this)},getFilterContext:function(e){return e||{}}}}(),"use strict",CKEDITOR.htmlParser.comment=function(e){this.value=e,this._={isBlockLike:!1}},CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_COMMENT,filter:function(e,t){var n=this.value;return(n=e.onComment(t,n,this))?typeof n!="string"?(this.replaceWith(n),!1):(this.value=n,!0):(this.remove(),!1)},writeHtml:function(e,t){t&&this.filter(t),e.comment(this.value)}}),"use strict",function(){CKEDITOR.htmlParser.text=function(e){this.value=e,this._={isBlockLike:!1}},CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(e,t){if(!(this.value=e.onText(t,this.value,this)))return this.remove(),!1},writeHtml:function(e,t){t&&this.filter(t),e.text(this.value)}})}(),"use strict",function(){CKEDITOR.htmlParser.cdata=function(e){this.value=e},CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(){},writeHtml:function(e){e.write(this.value)}})}(),"use strict",CKEDITOR.htmlParser.fragment=function(){this.children=[],this.parent=null,this._={isBlockLike:!0,hasInlineStarted:!1}},function(){function e(e){return e.attributes["data-cke-survive"]?!1:e.name=="a"&&e.attributes.href||CKEDITOR.dtd.$removeEmpty[e.name]}var t=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),n={ol:1,ul:1},r=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1}),i={ul:"li",ol:"li",dl:"dd",table:"tbody",tbody:"tr",thead:"tr",tfoot:"tr",tr:"td"};CKEDITOR.htmlParser.fragment.fromHtml=function(s,o,u){function f(e){var t;if(w.length>0)for(var n=0;n<w.length;n++){var r=w[n],i=r.name,s=CKEDITOR.dtd[i],o=S.name&&CKEDITOR.dtd[S.name];(!o||o[i])&&(!e||!s||s[e]||!CKEDITOR.dtd[e])?(t||(l(),t=1),r=r.clone(),r.parent=S,S=r,w.splice(n,1),n--):i==S.name&&(p(S,S.parent,1),n--)}}function l(){for(;E.length;)p(E.shift(),S)}function h(e){if(e._.isBlockLike&&e.name!="pre"&&e.name!="textarea"){var t=e.children.length,n=e.children[t-1],r;n&&n.type==CKEDITOR.NODE_TEXT&&((r=CKEDITOR.tools.rtrim(n.value))?n.value=r:e.children.length=t-1)}}function p(t,n,r){var n=n||S||y,i=S;t.previous===void 0&&(v(n,t)&&(S=n,g.onTagOpen(u,{}),t.returnPoint=n=S),h(t),(!e(t)||t.children.length)&&n.add(t),t.name=="pre"&&(T=!1),t.name=="textarea"&&(x=!1)),t.returnPoint?(S=t.returnPoint,delete t.returnPoint):S=r?n:i}function v(e,t){if((e==y||e.name=="body")&&u&&(!e.name||CKEDITOR.dtd[e.name][u])){var n,r;return(n=t.attributes&&(r=t.attributes["data-cke-real-element-type"])?r:t.name)&&n in CKEDITOR.dtd.$inline&&!(n in CKEDITOR.dtd.head)&&!t.isOrphan||t.type==CKEDITOR.NODE_TEXT}}function m(e,t){return e in CKEDITOR.dtd.$listItem||e in CKEDITOR.dtd.$tableContent?e==t||e=="dt"&&t=="dd"||e=="dd"&&t=="dt":!1}var g=new CKEDITOR.htmlParser,y=o instanceof CKEDITOR.htmlParser.element?o:typeof o=="string"?new CKEDITOR.htmlParser.element(o):new CKEDITOR.htmlParser.fragment,w=[],E=[],S=y,x=y.name=="textarea",T=y.name=="pre";g.onTagOpen=function(i,s,o,u){s=new CKEDITOR.htmlParser.element(i,s),s.isUnknown&&o&&(s.isEmpty=!0),s.isOptionalClose=u;if(e(s))w.push(s);else{if(i=="pre")T=!0;else{if(i=="br"&&T){S.add(new CKEDITOR.htmlParser.text("\n"));return}i=="textarea"&&(x=!0)}if(i=="br")E.push(s);else{for(;;){u=(o=S.name)?CKEDITOR.dtd[o]||(S._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):r;if(!(!s.isUnknown&&!S.isUnknown&&!u[i]))break;if(S.isOptionalClose)g.onTagClose(o);else if(i in n&&o in n)o=S.children,(o=o[o.length-1])&&o.name=="li"||p(o=new CKEDITOR.htmlParser.element("li"),S),!s.returnPoint&&(s.returnPoint=S),S=o;else if(i in CKEDITOR.dtd.$listItem&&!m(i,o))g.onTagOpen(i=="li"?"ul":"dl",{},0,1);else if(o in t&&!m(i,o))!s.returnPoint&&(s.returnPoint=S),S=S.parent;else{o in CKEDITOR.dtd.$inline&&w.unshift(S);if(!S.parent){s.isOrphan=1;break}p(S,S.parent,1)}}f(i),l(),s.parent=S,s.isEmpty?p(s):S=s}}},g.onTagClose=function(e){for(var t=w.length-1;t>=0;t--)if(e==w[t].name){w.splice(t,1);return}for(var n=[],r=[],i=S;i!=y&&i.name!=e;)i._.isBlockLike||r.unshift(i),n.push(i),i=i.returnPoint||i.parent;if(i!=y){for(t=0;t<n.length;t++){var s=n[t];p(s,s.parent)}S=i,i._.isBlockLike&&l(),p(i,i.parent),i==S&&(S=S.parent),w=w.concat(r)}e=="body"&&(u=!1)},g.onText=function(e){if((!S._.hasInlineStarted||E.length)&&!T&&!x){e=CKEDITOR.tools.ltrim(e);if(e.length===0)return}var n=S.name,s=n?CKEDITOR.dtd[n]||(S._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):r;!x&&!s["#"]&&n in t?(g.onTagOpen(i[n]||""),g.onText(e)):(l(),f(),!T&&!x&&(e=e.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," ")),e=new CKEDITOR.htmlParser.text(e),v(S,e)&&this.onTagOpen(u,{},0,1),S.add(e))},g.onCDATA=function(e){S.add(new CKEDITOR.htmlParser.cdata(e))},g.onComment=function(e){l(),f(),S.add(new CKEDITOR.htmlParser.comment(e))},g.parse(s);for(l();S!=y;)p(S,S.parent,1);return h(y),y},CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function(e,t){isNaN(t)&&(t=this.children.length);var n=t>0?this.children[t-1]:null;if(n){if(e._.isBlockLike&&n.type==CKEDITOR.NODE_TEXT){n.value=CKEDITOR.tools.rtrim(n.value);if(n.value.length===0){this.children.pop(),this.add(e);return}}n.next=e}e.previous=n,e.parent=this,this.children.splice(t,0,e),this._.hasInlineStarted||(this._.hasInlineStarted=e.type==CKEDITOR.NODE_TEXT||e.type==CKEDITOR.NODE_ELEMENT&&!e._.isBlockLike)},filter:function(e,t){t=this.getFilterContext(t),e.onRoot(t,this),this.filterChildren(e,!1,t)},filterChildren:function(e,t,n){if(this.childrenFilteredBy!=e.id){n=this.getFilterContext(n),t&&!this.parent&&e.onRoot(n,this),this.childrenFilteredBy=e.id;for(t=0;t<this.children.length;t++)this.children[t].filter(e,n)===!1&&t--}},writeHtml:function(e,t){t&&this.filter(t),this.writeChildrenHtml(e)},writeChildrenHtml:function(e,t,n){var r=this.getFilterContext();n&&!this.parent&&t&&t.onRoot(r,this),t&&this.filterChildren(t,!1,r),t=0,n=this.children;for(r=n.length;t<r;t++)n[t].writeHtml(e)},forEach:function(e,t,n){if(!n&&(!t||this.type==t))var r=e(this);if(r!==!1)for(var n=this.children,i=0;i<n.length;i++)r=n[i],r.type==CKEDITOR.NODE_ELEMENT?r.forEach(e,t):(!t||r.type==t)&&e(r)},getFilterContext:function(e){return e||{}}}}(),"use strict",function(){function e(){this.rules=[]}function t(t,n,r,i){var s,o;for(s in n)(o=t[s])||(o=t[s]=new e),o.add(n[s],r,i)}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(t){this.id=CKEDITOR.tools.getNextNumber(),this.elementNameRules=new e,this.attributeNameRules=new e,this.elementsRules={},this.attributesRules={},this.textRules=new e,this.commentRules=new e,this.rootRules=new e,t&&this.addRules(t,10)},proto:{addRules:function(e,n){var r;typeof n=="number"?r=n:n&&"priority"in n&&(r=n.priority),typeof r!="number"&&(r=10),typeof n!="object"&&(n={}),e.elementNames&&this.elementNameRules.addMany(e.elementNames,r,n),e.attributeNames&&this.attributeNameRules.addMany(e.attributeNames,r,n),e.elements&&t(this.elementsRules,e.elements,r,n),e.attributes&&t(this.attributesRules,e.attributes,r,n),e.text&&this.textRules.add(e.text,r,n),e.comment&&this.commentRules.add(e.comment,r,n),e.root&&this.rootRules.add(e.root,r,n)},applyTo:function(e){e.filter(this)},onElementName:function(e,t){return this.elementNameRules.execOnName(e,t)},onAttributeName:function(e,t){return this.attributeNameRules.execOnName(e,t)},onText:function(e,t,n){return this.textRules.exec(e,t,n)},onComment:function(e,t,n){return this.commentRules.exec(e,t,n)},onRoot:function(e,t){return this.rootRules.exec(e,t)},onElement:function(e,t){for(var n=[this.elementsRules["^"],this.elementsRules[t.name],this.elementsRules.$],r,i=0;i<3;i++)if(r=n[i]){r=r.exec(e,t,this);if(r===!1)return null;if(r&&r!=t)return this.onNode(e,r);if(t.parent&&!t.name)break}return t},onNode:function(e,t){var n=t.type;return n==CKEDITOR.NODE_ELEMENT?this.onElement(e,t):n==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(e,t.value)):n==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(e,t.value)):null},onAttribute:function(e,t,n,r){return(n=this.attributesRules[n])?n.exec(e,r,t,this):r}}}),CKEDITOR.htmlParser.filterRulesGroup=e,e.prototype={add:function(e,t,n){this.rules.splice(this.findIndex(t),0,{value:e,priority:t,options:n})},addMany:function(e,t,n){for(var r=[this.findIndex(t),0],i=0,s=e.length;i<s;i++)r.push({value:e[i],priority:t,options:n});this.rules.splice.apply(this.rules,r)},findIndex:function(e){for(var t=this.rules,n=t.length-1;n>=0&&e<t[n].priority;)n--;return n+1},exec:function(e,t){var n=t instanceof CKEDITOR.htmlParser.node||t instanceof CKEDITOR.htmlParser.fragment,r=Array.prototype.slice.call(arguments,1),i=this.rules,s=i.length,o,u,a,f;for(f=0;f<s;f++){n&&(o=t.type,u=t.name),a=i[f];if(!(e.nonEditable&&!a.options.applyToAll||e.nestedEditable&&a.options.excludeNestedEditable)){a=a.value.apply(null,r);if(a===!1||n&&a&&(a.name!=u||a.type!=o))return a;a!=null&&(r[0]=t=a)}}return t},execOnName:function(e,t){for(var n=0,r=this.rules,i=r.length,s;t&&n<i;n++)s=r[n],!(e.nonEditable&&!s.options.applyToAll||e.nestedEditable&&s.options.excludeNestedEditable)&&(t=t.replace(s.value[0],s.value[1]));return t}}}(),function(){function e(e,t){function u(e){return e||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text(" "):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1})}function a(e,t){return function(i){if(i.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var o=[],a=n(i),l,h;if(a)for(f(a,1)&&o.push(a);a;)s(a)&&(l=r(a))&&f(l)&&((h=r(l))&&!s(h)?o.push(l):(u(c).insertAfter(l),l.remove())),a=a.previous;for(a=0;a<o.length;a++)o[a].remove();if(o=!e||(typeof t=="function"?t(i):t)!==!1)!c&&!CKEDITOR.env.needsBrFiller&&i.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT?o=!1:!c&&!CKEDITOR.env.needsBrFiller&&(document.documentMode>7||i.name in CKEDITOR.dtd.tr||i.name in CKEDITOR.dtd.$listItem)?o=!1:(o=n(i),o=!o||i.name=="form"&&o.name=="input");o&&i.add(u(e))}}}function f(e,t){if((!c||CKEDITOR.env.needsBrFiller)&&e.type==CKEDITOR.NODE_ELEMENT&&e.name=="br"&&!e.attributes["data-cke-eol"])return!0;var n;if(e.type==CKEDITOR.NODE_TEXT&&(n=e.value.match(m))){n.index&&((new CKEDITOR.htmlParser.text(e.value.substring(0,n.index))).insertBefore(e),e.value=n[0]);if(!CKEDITOR.env.needsBrFiller&&c&&(!t||e.parent.name in h))return!0;if(!c)if((n=e.previous)&&n.name=="br"||!n||s(n))return!0}return!1}var l={elements:{}},c=t=="html",h=CKEDITOR.tools.extend({},w),p;for(p in h)"#"in y[p]||delete h[p];for(p in h)l.elements[p]=a(c,e.config.fillEmptyBlocks);return l.root=a(c,!1),l.elements.br=function(e){return function(t){if(t.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var n=t.attributes;if("data-cke-bogus"in n||"data-cke-eol"in n)delete n["data-cke-bogus"];else{for(n=t.next;n&&i(n);)n=n.next;var a=r(t);!n&&s(t.parent)?o(t.parent,u(e)):s(n)&&a&&!s(a)&&u(e).insertBefore(n)}}}}(c),l}function t(e,t){return e!=CKEDITOR.ENTER_BR&&t!==!1?e==CKEDITOR.ENTER_DIV?"div":"p":!1}function n(e){for(e=e.children[e.children.length-1];e&&i(e);)e=e.previous;return e}function r(e){for(e=e.previous;e&&i(e);)e=e.previous;return e}function i(e){return e.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(e.value)||e.type==CKEDITOR.NODE_ELEMENT&&e.attributes["data-cke-bookmark"]}function s(e){return e&&(e.type==CKEDITOR.NODE_ELEMENT&&e.name in w||e.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)}function o(e,t){var n=e.children[e.children.length-1];e.children.push(t),t.parent=e,n&&(n.next=t,t.previous=n)}function u(e){e=e.attributes,e.contenteditable!="false"&&(e["data-cke-editable"]=e.contenteditable?"true":1),e.contenteditable="false"}function a(e){e=e.attributes;switch(e["data-cke-editable"]){case"true":e.contenteditable="true";break;case"1":delete e.contenteditable}}function f(e){return e.replace(N,function(e,t,n){return"<"+t+n.replace(C,function(e,t){return k.test(t)&&n.indexOf("data-cke-saved-"+t)==-1?" data-cke-saved-"+e+" data-cke-"+CKEDITOR.rnd+"-"+e:e})+">"})}function l(e,t){return e.replace(t,function(e,t,n){return e.indexOf("<textarea")===0&&(e=t+p(n).replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</textarea>"),"<cke:encoded>"+encodeURIComponent(e)+"</cke:encoded>"})}function c(e){return e.replace(O,function(e,t){return decodeURIComponent(t)})}function h(e){return e.replace(/<\!--(?!{cke_protected})[\s\S]+?--\>/g,function(e){return"<!--"+g+"{C}"+encodeURIComponent(e).replace(/--/g,"%2D%2D")+"-->"})}function p(e){return e.replace(/<\!--\{cke_protected\}\{C\}([\s\S]+?)--\>/g,function(e,t){return decodeURIComponent(t)})}function d(e,t){var n=t._.dataStore;return e.replace(/<\!--\{cke_protected\}([\s\S]+?)--\>/g,function(e,t){return decodeURIComponent(t)}).replace(/\{cke_protected_(\d+)\}/g,function(e,t){return n&&n[t]||""})}function v(e,t){for(var n=[],r=t.config.protectedSource,i=t._.dataStore||(t._.dataStore={id:1}),s=/<\!--\{cke_temp(comment)?\}(\d*?)--\>/g,r=[/<script[\s\S]*?(<\/script>|$)/gi,/<noscript[\s\S]*?<\/noscript>/gi,/<meta[\s\S]*?\/?>/gi].concat(r),e=e.replace(/<\!--[\s\S]*?--\>/g,function(e){return"<!--{cke_tempcomment}"+(n.push(e)-1)+"-->"}),o=0;o<r.length;o++)e=e.replace(r[o],function(e){return e=e.replace(s,function(e,t,r){return n[r]}),/cke_temp(comment)?/.test(e)?e:"<!--{cke_temp}"+(n.push(e)-1)+"-->"});return e=e.replace(s,function(e,t,r){return"<!--"+g+(t?"{C}":"")+encodeURIComponent(n[r]).replace(/--/g,"%2D%2D")+"-->"}),e=e.replace(/<\w+(?:\s+(?:(?:[^\s=>]+\s*=\s*(?:[^'"\s>]+|'[^']*'|"[^"]*"))|[^\s=\/>]+))+\s*\/?>/g,function(e){return e.replace(/<\!--\{cke_protected\}([^>]*)--\>/g,function(e,t){return i[i.id]=decodeURIComponent(t),"{cke_protected_"+i.id++ +"}"})}),e=e.replace(/<(title|iframe|textarea)([^>]*)>([\s\S]*?)<\/\1>/g,function(e,n,r,i){return"<"+n+r+">"+d(p(i),t)+"</"+n+">"})}CKEDITOR.htmlDataProcessor=function(n){var r,i,s=this;this.editor=n,this.dataFilter=r=new CKEDITOR.htmlParser.filter,this.htmlFilter=i=new CKEDITOR.htmlParser.filter,this.writer=new CKEDITOR.htmlParser.basicWriter,r.addRules(E),r.addRules(S,{applyToAll:!0}),r.addRules(e(n,"data"),{applyToAll:!0}),i.addRules(x),i.addRules(T,{applyToAll:!0}),i.addRules(e(n,"html"),{applyToAll:!0}),n.on("toHtml",function(e){var e=e.data,r=e.dataValue,i,r=v(r,n),r=l(r,A),r=f(r),r=l(r,L),r=r.replace(M,"$1cke:$2"),r=r.replace(D,"<cke:$1$2></cke:$1>"),r=r.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2"),r=r.replace(/([^a-z0-9<\-])(on\w{3,})(?!>)/gi,"$1data-cke-"+CKEDITOR.rnd+"-$2");i=e.context||n.editable().getName();var s;CKEDITOR.env.ie&&CKEDITOR.env.version<9&&i=="pre"&&(i="div",r="<pre>"+r+"</pre>",s=1),i=n.document.createElement(i),i.setHtml("a"+r),r=i.getHtml().substr(1),r=r.replace(RegExp("data-cke-"+CKEDITOR.rnd+"-","ig"),""),s&&(r=r.replace(/^<pre>|<\/pre>$/gi,"")),r=r.replace(_,"$1$2"),r=c(r),r=p(r),i=e.fixForBody===!1?!1:t(e.enterMode,n.config.autoParagraph),r=CKEDITOR.htmlParser.fragment.fromHtml(r,e.context,i),i&&(s=r,!s.children.length&&CKEDITOR.dtd[s.name][i]&&(i=new CKEDITOR.htmlParser.element(i),s.add(i))),e.dataValue=r},null,null,5),n.on("toHtml",function(e){e.data.filter.applyTo(e.data.dataValue,!0,e.data.dontFilter,e.data.enterMode)&&n.fire("dataFiltered")},null,null,6),n.on("toHtml",function(e){e.data.dataValue.filterChildren(s.dataFilter,!0)},null,null,10),n.on("toHtml",function(e){var e=e.data,t=e.dataValue,n=new CKEDITOR.htmlParser.basicWriter;t.writeChildrenHtml(n),t=n.getHtml(!0),e.dataValue=h(t)},null,null,15),n.on("toDataFormat",function(e){var r=e.data.dataValue;e.data.enterMode!=CKEDITOR.ENTER_BR&&(r=r.replace(/^<br *\/?>/i,"")),e.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(r,e.data.context,t(e.data.enterMode,n.config.autoParagraph))},null,null,5),n.on("toDataFormat",function(e){e.data.dataValue.filterChildren(s.htmlFilter,!0)},null,null,10),n.on("toDataFormat",function(e){e.data.filter.applyTo(e.data.dataValue,!1,!0)},null,null,11),n.on("toDataFormat",function(e){var t=e.data.dataValue,r=s.writer;r.reset(),t.writeChildrenHtml(r),t=r.getHtml(!0),t=p(t),t=d(t,n),e.data.dataValue=t},null,null,15)},CKEDITOR.htmlDataProcessor.prototype={toHtml:function(e,t,n,r){var i=this.editor,s,o,u,a;return t&&typeof t=="object"?(s=t.context,n=t.fixForBody,r=t.dontFilter,o=t.filter,u=t.enterMode,a=t.protectedWhitespaces):s=t,!s&&s!==null&&(s=i.editable().getName()),i.fire("toHtml",{dataValue:e,context:s,fixForBody:n,dontFilter:r,filter:o||i.filter,enterMode:u||i.enterMode,protectedWhitespaces:a}).dataValue},toDataFormat:function(e,t){var n,r,i;return t&&(n=t.context,r=t.filter,i=t.enterMode),!n&&n!==null&&(n=this.editor.editable().getName()),this.editor.fire("toDataFormat",{dataValue:e,filter:r||this.editor.filter,context:n,enterMode:i||this.editor.enterMode}).dataValue}};var m=/(?:&nbsp;|\xa0)$/,g="{cke_protected}",y=CKEDITOR.dtd,b=["caption","colgroup","col","thead","tfoot","tbody"],w=CKEDITOR.tools.extend({},y.$blockLimit,y.$block),E={elements:{input:u,textarea:u}},S={attributeNames:[[/^on/,"data-cke-pa-on"],[/^data-cke-expando$/,""]]},x={elements:{embed:function(e){var t=e.parent;if(t&&t.name=="object"){var n=t.attributes.width,t=t.attributes.height;n&&(e.attributes.width=n),t&&(e.attributes.height=t)}},a:function(e){if(!e.children.length&&!e.attributes.name&&!e.attributes["data-cke-saved-name"])return!1}}},T={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(e){var t=e.attributes;if(t){if(t["data-cke-temp"])return!1;for(var n=["name","href","src"],r,i=0;i<n.length;i++)r="data-cke-saved-"+n[i],r in t&&delete t[n[i]]}return e},table:function(e){e.children.slice(0).sort(function(e,t){var n,r;return e.type==CKEDITOR.NODE_ELEMENT&&t.type==e.type&&(n=CKEDITOR.tools.indexOf(b,e.name),r=CKEDITOR.tools.indexOf(b,t.name)),n>-1&&r>-1&&n!=r||(n=e.parent?e.getIndex():-1,r=t.parent?t.getIndex():-1),n>r?1:-1})},param:function(e){return e.children=[],e.isEmpty=!0,e},span:function(e){e.attributes["class"]=="Apple-style-span"&&delete e.name},html:function(e){delete e.attributes.contenteditable,delete e.attributes["class"]},body:function(e){delete e.attributes.spellcheck,delete e.attributes.contenteditable},style:function(e){var t=e.children[0];t&&t.value&&(t.value=CKEDITOR.tools.trim(t.value)),e.attributes.type||(e.attributes.type="text/css")},title:function(e){var t=e.children[0];!t&&o(e,t=new CKEDITOR.htmlParser.text),t.value=e.attributes["data-cke-title"]||""},input:a,textarea:a},attributes:{"class":function(e){return CKEDITOR.tools.ltrim(e.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}}};CKEDITOR.env.ie&&(T.attributes.style=function(e){return e.replace(/(^|;)([^\:]+)/g,function(e){return e.toLowerCase()})});var N=/<(a|area|img|input|source)\b([^>]*)>/gi,C=/([\w-:]+)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,k=/^(href|src|name)$/i,L=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,A=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,O=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,M=/(<\/?)((?:object|embed|param|html|body|head|title)[^>]*>)/gi,_=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,D=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi}(),"use strict",CKEDITOR.htmlParser.element=function(e,t){this.name=e,this.attributes=t||{},this.children=[];var n=e||"",r=n.match(/^cke:(.*)/);r&&(n=r[1]),n=!(!CKEDITOR.dtd.$nonBodyContent[n]&&!CKEDITOR.dtd.$block[n]&&!CKEDITOR.dtd.$listItem[n]&&!CKEDITOR.dtd.$tableContent[n]&&!CKEDITOR.dtd.$nonEditable[n]&&n!="br"),this.isEmpty=!!CKEDITOR.dtd.$empty[e],this.isUnknown=!CKEDITOR.dtd[e],this._={isBlockLike:n,hasInlineStarted:this.isEmpty||!n}},CKEDITOR.htmlParser.cssStyle=function(e){var t={};return((e instanceof CKEDITOR.htmlParser.element?e.attributes.style:e)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(e,n,r){n=="font-family"&&(r=r.replace(/["']/g,"")),t[n.toLowerCase()]=r}),{rules:t,populate:function(e){var t=this.toString();t&&(e instanceof CKEDITOR.dom.element?e.setAttribute("style",t):e instanceof CKEDITOR.htmlParser.element?e.attributes.style=t:e.style=t)},toString:function(){var e=[],n;for(n in t)t[n]&&e.push(n,":",t[n],";");return e.join("")}}},function(){function e(e){return function(t){return t.type==CKEDITOR.NODE_ELEMENT&&(typeof e=="string"?t.name==e:t.name in e)}}var t=function(e,t){return e=e[0],t=t[0],e<t?-1:e>t?1:0},n=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:n.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(e,t){var n=this,r,i,t=n.getFilterContext(t);if(t.off)return!0;n.parent||e.onRoot(t,n);for(;;){r=n.name;if(!(i=e.onElementName(t,r)))return this.remove(),!1;n.name=i;if(!(n=e.onElement(t,n)))return this.remove(),!1;if(n!==this)return this.replaceWith(n),!1;if(n.name==r)break;if(n.type!=CKEDITOR.NODE_ELEMENT)return this.replaceWith(n),!1;if(!n.name)return this.replaceWithChildren(),!1}r=n.attributes;var s,o;for(s in r){o=s;for(i=r[s];;){if(!(o=e.onAttributeName(t,s))){delete r[s];break}if(o==s)break;delete r[s],s=o}o&&((i=e.onAttribute(t,n,o,i))===!1?delete r[o]:r[o]=i)}return n.isEmpty||this.filterChildren(e,!1,t),!0},filterChildren:n.filterChildren,writeHtml:function(e,n){n&&this.filter(n);var r=this.name,i=[],s=this.attributes,o,u;e.openTag(r,s);for(o in s)i.push([o,s[o]]);e.sortAttributes&&i.sort(t),o=0;for(u=i.length;o<u;o++)s=i[o],e.attribute(s[0],s[1]);e.openTagClose(r,this.isEmpty),this.writeChildrenHtml(e),this.isEmpty||e.closeTag(r)},writeChildrenHtml:n.writeChildrenHtml,replaceWithChildren:function(){for(var e=this.children,t=e.length;t;)e[--t].insertAfter(this);this.remove()},forEach:n.forEach,getFirst
:function(t){if(!t)return this.children.length?this.children[0]:null;typeof t!="function"&&(t=e(t));for(var n=0,r=this.children.length;n<r;++n)if(t(this.children[n]))return this.children[n];return null},getHtml:function(){var e=new CKEDITOR.htmlParser.basicWriter;return this.writeChildrenHtml(e),e.getHtml()},setHtml:function(e){for(var e=this.children=CKEDITOR.htmlParser.fragment.fromHtml(e).children,t=0,n=e.length;t<n;++t)e[t].parent=this},getOuterHtml:function(){var e=new CKEDITOR.htmlParser.basicWriter;return this.writeHtml(e),e.getHtml()},split:function(e){for(var t=this.children.splice(e,this.children.length-e),n=this.clone(),r=0;r<t.length;++r)t[r].parent=n;return n.children=t,t[0]&&(t[0].previous=null),e>0&&(this.children[e-1].next=null),this.parent.add(n,this.getIndex()+1),n},addClass:function(e){if(!this.hasClass(e)){var t=this.attributes["class"]||"";this.attributes["class"]=t+(t?" ":"")+e}},removeClass:function(e){var t=this.attributes["class"];t&&((t=CKEDITOR.tools.trim(t.replace(RegExp("(?:\\s+|^)"+e+"(?:\\s+|$)")," ")))?this.attributes["class"]=t:delete this.attributes["class"])},hasClass:function(e){var t=this.attributes["class"];return t?RegExp("(?:^|\\s)"+e+"(?=\\s|$)").test(t):!1},getFilterContext:function(e){var t=[];e||(e={off:!1,nonEditable:!1,nestedEditable:!1}),!e.off&&this.attributes["data-cke-processor"]=="off"&&t.push("off",!0),!e.nonEditable&&this.attributes.contenteditable=="false"?t.push("nonEditable",!0):e.nonEditable&&!e.nestedEditable&&this.attributes.contenteditable=="true"&&t.push("nestedEditable",!0);if(t.length)for(var e=CKEDITOR.tools.copy(e),n=0;n<t.length;n+=2)e[t[n]]=t[n+1];return e}},!0)}(),function(){var e={},t=/{([^}]+)}/g,n=/([\\'])/g,r=/\n/g,i=/\r/g;CKEDITOR.template=function(s){if(e[s])this.output=e[s];else{var o=s.replace(n,"\\$1").replace(r,"\\n").replace(i,"\\r").replace(t,function(e,t){return"',data['"+t+"']==undefined?'{"+t+"}':data['"+t+"'],'"});this.output=e[s]=Function("data","buffer","return buffer?buffer.push('"+o+"'):['"+o+"'].join('');")}}}(),delete CKEDITOR.loadFullCore,CKEDITOR.instances={},CKEDITOR.document=new CKEDITOR.dom.document(document),CKEDITOR.add=function(e){CKEDITOR.instances[e.name]=e,e.on("focus",function(){CKEDITOR.currentInstance!=e&&(CKEDITOR.currentInstance=e,CKEDITOR.fire("currentInstance"))}),e.on("blur",function(){CKEDITOR.currentInstance==e&&(CKEDITOR.currentInstance=null,CKEDITOR.fire("currentInstance"))}),CKEDITOR.fire("instance",null,e)},CKEDITOR.remove=function(e){delete CKEDITOR.instances[e.name]},function(){var e={};CKEDITOR.addTemplate=function(t,n){var r=e[t];return r?r:(r={name:t,source:n},CKEDITOR.fire("template",r),e[t]=new CKEDITOR.template(r.source))},CKEDITOR.getTemplate=function(t){return e[t]}}(),function(){var e=[];CKEDITOR.addCss=function(t){e.push(t)},CKEDITOR.getCss=function(){return e.join("\n")}}(),CKEDITOR.on("instanceDestroyed",function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset")}),CKEDITOR.TRISTATE_ON=1,CKEDITOR.TRISTATE_OFF=2,CKEDITOR.TRISTATE_DISABLED=0,function(){CKEDITOR.inline=function(e,t){if(!CKEDITOR.env.isCompatible)return null;e=CKEDITOR.dom.element.get(e);if(e.getEditor())throw'The editor instance "'+e.getEditor().name+'" is already attached to the provided element.';var n=new CKEDITOR.editor(t,e,CKEDITOR.ELEMENT_MODE_INLINE),r=e.is("textarea")?e:null;return r?(n.setData(r.getValue(),null,!0),e=CKEDITOR.dom.element.createFromHtml('<div contenteditable="'+!!n.readOnly+'" class="cke_textarea_inline">'+r.getValue()+"</div>",CKEDITOR.document),e.insertAfter(r),r.hide(),r.$.form&&n._attachToForm()):n.setData(e.getHtml(),null,!0),n.on("loaded",function(){n.fire("uiReady"),n.editable(e),n.container=e,n.ui.contentsElement=e,n.setData(n.getData(1)),n.resetDirty(),n.fire("contentDom"),n.mode="wysiwyg",n.fire("mode"),n.status="ready",n.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,n)},null,null,1e4),n.on("destroy",function(){r&&(n.container.clearCustomData(),n.container.remove(),r.show()),n.element.clearCustomData(),delete n.element}),n},CKEDITOR.inlineAll=function(){var e,t,n;for(n in CKEDITOR.dtd.$editable)for(var r=CKEDITOR.document.getElementsByTag(n),i=0,s=r.count();i<s;i++)e=r.getItem(i),e.getAttribute("contenteditable")=="true"&&(t={element:e,config:{}},CKEDITOR.fire("inline",t)!==!1&&CKEDITOR.inline(e,t.config))},CKEDITOR.domReady(function(){!CKEDITOR.disableAutoInline&&CKEDITOR.inlineAll()})}(),CKEDITOR.replaceClass="ckeditor",function(){function e(e,r,i,s){if(!CKEDITOR.env.isCompatible)return null;e=CKEDITOR.dom.element.get(e);if(e.getEditor())throw'The editor instance "'+e.getEditor().name+'" is already attached to the provided element.';var o=new CKEDITOR.editor(r,e,s);return s==CKEDITOR.ELEMENT_MODE_REPLACE&&(e.setStyle("visibility","hidden"),o._.required=e.hasAttribute("required"),e.removeAttribute("required")),i&&o.setData(i,null,!0),o.on("loaded",function(){n(o),s==CKEDITOR.ELEMENT_MODE_REPLACE&&o.config.autoUpdateElement&&e.$.form&&o._attachToForm(),o.setMode(o.config.startupMode,function(){o.resetDirty(),o.status="ready",o.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,o)})}),o.on("destroy",t),o}function t(){var e=this.container,t=this.element;e&&(e.clearCustomData(),e.remove()),t&&(t.clearCustomData(),this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(t.show(),this._.required&&t.setAttribute("required","required")),delete this.element)}function n(e){var t=e.name,n=e.element,r=e.elementMode,i=e.fire("uiSpace",{space:"top",html:""}).html,s=e.fire("uiSpace",{space:"bottom",html:""}).html,o=new CKEDITOR.template('<{outerEl} id="cke_{name}" class="{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} '+CKEDITOR.env.cssClass+'"  dir="{langDir}" lang="{langCode}" role="application"'+(e.title?' aria-labelledby="cke_{name}_arialbl"':"")+">"+(e.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':"")+'<{outerEl} class="cke_inner cke_reset" role="presentation">{topHtml}<{outerEl} id="{contentId}" class="cke_contents cke_reset" role="presentation"></{outerEl}>{bottomHtml}</{outerEl}></{outerEl}>'),t=CKEDITOR.dom.element.createFromHtml(o.output({id:e.id,name:t,langDir:e.lang.dir,langCode:e.langCode,voiceLabel:e.title,topHtml:i?'<span id="'+e.ui.spaceId("top")+'" class="cke_top cke_reset_all" role="presentation" style="height:auto">'+i+"</span>":"",contentId:e.ui.spaceId("contents"),bottomHtml:s?'<span id="'+e.ui.spaceId("bottom")+'" class="cke_bottom cke_reset_all" role="presentation">'+s+"</span>":"",outerEl:CKEDITOR.env.ie?"span":"div"}));r==CKEDITOR.ELEMENT_MODE_REPLACE?(n.hide(),t.insertAfter(n)):n.append(t),e.container=t,e.ui.contentsElement=e.ui.space("contents"),i&&e.ui.space("top").unselectable(),s&&e.ui.space("bottom").unselectable(),n=e.config.width,r=e.config.height,n&&t.setStyle("width",CKEDITOR.tools.cssLength(n)),r&&e.ui.space("contents").setStyle("height",CKEDITOR.tools.cssLength(r)),t.disableContextMenu(),CKEDITOR.env.webkit&&t.on("focus",function(){e.focus()}),e.fireOnce("uiReady")}CKEDITOR.replace=function(t,n){return e(t,n,null,CKEDITOR.ELEMENT_MODE_REPLACE)},CKEDITOR.appendTo=function(t,n,r){return e(t,n,r,CKEDITOR.ELEMENT_MODE_APPENDTO)},CKEDITOR.replaceAll=function(){for(var e=document.getElementsByTagName("textarea"),t=0;t<e.length;t++){var n=null,r=e[t];if(r.name||r.id){if(typeof arguments[0]=="string"){if(!RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)").test(r.className))continue}else if(typeof arguments[0]=="function"){n={};if(arguments[0](r,n)===!1)continue}this.replace(r,n)}}},CKEDITOR.editor.prototype.addMode=function(e,t){(this._.modes||(this._.modes={}))[e]=t},CKEDITOR.editor.prototype.setMode=function(e,t){var n=this,r=this._.modes;if(e!=n.mode&&!!r&&!!r[e]){n.fire("beforeSetMode",e);if(n.mode){var i=n.checkDirty(),r=n._.previousModeData,s,o=0;n.fire("beforeModeUnload"),n.editable(0),n._.previousMode=n.mode,n._.previousModeData=s=n.getData(1),n.mode=="source"&&r==s&&(n.fire("lockSnapshot",{forceUpdate:!0}),o=1),n.ui.space("contents").setHtml(""),n.mode=""}else n._.previousModeData=n.getData(1);this._.modes[e](function(){n.mode=e,i!==void 0&&!i&&n.resetDirty(),o?n.fire("unlockSnapshot"):e=="wysiwyg"&&n.fire("saveSnapshot"),setTimeout(function(){n.fire("mode"),t&&t.call(n)},0)})}},CKEDITOR.editor.prototype.resize=function(e,t,n,r){var i=this.container,s=this.ui.space("contents"),o=CKEDITOR.env.webkit&&this.document&&this.document.getWindow().$.frameElement,r=r?this.container.getFirst(function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasClass("cke_inner")}):i;r.setSize("width",e,!0),o&&(o.style.width="1%");var u=(r.$.offsetHeight||0)-(s.$.clientHeight||0),i=Math.max(t-(n?0:u),0),t=n?t+u:t;s.setStyle("height",i+"px"),o&&(o.style.width="100%"),this.fire("resize",{outerHeight:t,contentsHeight:i,outerWidth:e||r.getSize("width")})},CKEDITOR.editor.prototype.getResizable=function(e){return e?this.ui.space("contents"):this.container},CKEDITOR.domReady(function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass)})}(),CKEDITOR.config.startupMode="wysiwyg",function(){function i(e){var t=e.editor,n=e.data.path,r=n.blockLimit,i=e.data.selection,o=i.getRanges()[0],a;if(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller)if(i=s(i,n))i.appendBogus(),a=CKEDITOR.env.ie;if(l(t,n.block,r)&&o.collapsed&&!o.getCommonAncestor().isReadOnly()){n=o.clone(),n.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),r=new CKEDITOR.dom.walker(n),r.guard=function(e){return!u(e)||e.type==CKEDITOR.NODE_COMMENT||e.isReadOnly()};if(!r.checkForward()||n.checkStartOfBlock()&&n.checkEndOfBlock())t=o.fixBlock(!0,t.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p"),CKEDITOR.env.needsBrFiller||(t=t.getFirst(u))&&t.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(t.getText()).match(/^(?:&nbsp;|\xa0)$/)&&t.remove(),a=1,e.cancel()}a&&o.select()}function s(e,t){if(e.isFake)return 0;var n=t.block||t.blockLimit,r=n&&n.getLast(u);if(n&&n.isBlockBoundary()&&(!r||r.type!=CKEDITOR.NODE_ELEMENT||!r.isBlockBoundary())&&!n.is("pre")&&!n.getBogus())return n}function o(e){var t=e.data.getTarget();t.is("input")&&(t=t.getAttribute("type"),(t=="submit"||t=="reset")&&e.data.preventDefault())}function u(e){return d(e)&&v(e)}function a(e,t){return function(n){var r=n.data.$.toElement||n.data.$.fromElement||n.data.$.relatedTarget,r=r&&r.nodeType==CKEDITOR.NODE_ELEMENT?new CKEDITOR.dom.element(r):null;(!r||!t.equals(r)&&!t.contains(r))&&e.call(this,n)}}function f(e){function t(e){return function(t,r){r&&t.type==CKEDITOR.NODE_ELEMENT&&t.is(i)&&(n=t);if(!r&&u(t)&&(!e||!g(t)))return!1}}var n,r=e.getRanges()[0],e=e.root,i={table:1,ul:1,ol:1,dl:1};if(r.startPath().contains(i)){var s=r.clone();s.collapse(1),s.setStartAt(e,CKEDITOR.POSITION_AFTER_START),e=new CKEDITOR.dom.walker(s),e.guard=t(),e.checkBackward();if(n)return s=r.clone(),s.collapse(),s.setEndAt(n,CKEDITOR.POSITION_AFTER_END),e=new CKEDITOR.dom.walker(s),e.guard=t(!0),n=!1,e.checkForward(),n}return null}function l(e,t,n){return e.config.autoParagraph!==!1&&e.activeEnterMode!=CKEDITOR.ENTER_BR&&(e.editable().equals(n)&&!t||t&&t.getAttribute("contenteditable")=="true")}function c(e){return e.activeEnterMode!=CKEDITOR.ENTER_BR&&e.config.autoParagraph!==!1?e.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p":!1}function h(e){var t=e.editor;t.getSelection().scrollIntoView(),setTimeout(function(){t.fire("saveSnapshot")},0)}function p(e,t,n){for(var r=e.getCommonAncestor(t),t=e=n?t:e;(e=e.getParent())&&!r.equals(e)&&e.getChildCount()==1;)t=e;t.remove()}var e,t,n,r;CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function(e,t){this.base(t.$||t),this.editor=e,this.status="unloaded",this.hasFocus=!1,this.setup()},proto:{focus:function(){var e;if(CKEDITOR.env.webkit&&!this.hasFocus){e=this.editor._.previousActive||this.getDocument().getActive();if(this.contains(e)){e.focus();return}}try{this.$[CKEDITOR.env.ie&&this.getDocument().equals(CKEDITOR.document)?"setActive":"focus"]()}catch(t){if(!CKEDITOR.env.ie)throw t}CKEDITOR.env.safari&&!this.isInline()&&(e=CKEDITOR.document.getActive(),e.equals(this.getWindow().getFrame())||this.getWindow().focus())},on:function(e,t){var n=Array.prototype.slice.call(arguments,0);return CKEDITOR.env.ie&&/^focus|blur$/.exec(e)&&(e=e=="focus"?"focusin":"focusout",t=a(t,this),n[0]=e,n[1]=t),CKEDITOR.dom.element.prototype.on.apply(this,n)},attachListener:function(e){!this._.listeners&&(this._.listeners=[]);var t=Array.prototype.slice.call(arguments,1),t=e.on.apply(e,t);return this._.listeners.push(t),t},clearListeners:function(){var e=this._.listeners;try{for(;e.length;)e.pop().removeListener()}catch(t){}},restoreAttrs:function(){var e=this._.attrChanges,t,n;for(n in e)e.hasOwnProperty(n)&&(t=e[n],t!==null?this.setAttribute(n,t):this.removeAttribute(n))},attachClass:function(e){var t=this.getCustomData("classes");this.hasClass(e)||(!t&&(t=[]),t.push(e),this.setCustomData("classes",t),this.addClass(e))},changeAttr:function(e,t){var n=this.getAttribute(e);t!==n&&(!this._.attrChanges&&(this._.attrChanges={}),e in this._.attrChanges||(this._.attrChanges[e]=n),this.setAttribute(e,t))},insertText:function(e){this.editor.focus(),this.insertHtml(this.transformPlainTextToHtml(e),"text")},transformPlainTextToHtml:function(e){var t=this.editor.getSelection().getStartElement().hasAscendant("pre",!0)?CKEDITOR.ENTER_BR:this.editor.activeEnterMode;return CKEDITOR.tools.transformPlainTextToHtml(e,t)},insertHtml:function(e,t,n){var r=this.editor;r.focus(),r.fire("saveSnapshot"),n||(n=r.getSelection().getRanges()[0]),b(this,t||"html",e,n),n.select(),h(this),this.editor.fire("afterInsertHtml",{})},insertHtmlIntoRange:function(e,t,n){b(this,n||"html",e,t),this.editor.fire("afterInsertHtml",{intoRange:t})},insertElement:function(e,t){var n=this.editor;n.focus(),n.fire("saveSnapshot");var r=n.activeEnterMode,n=n.getSelection(),i=e.getName(),i=CKEDITOR.dtd.$block[i];t||(t=n.getRanges()[0]),this.insertElementIntoRange(e,t)&&(t.moveToPosition(e,CKEDITOR.POSITION_AFTER_END),i&&((i=e.getNext(function(e){return u(e)&&!g(e)}))&&i.type==CKEDITOR.NODE_ELEMENT&&i.is(CKEDITOR.dtd.$block)?i.getDtd()["#"]?t.moveToElementEditStart(i):t.moveToElementEditEnd(e):!i&&r!=CKEDITOR.ENTER_BR&&(i=t.fixBlock(!0,r==CKEDITOR.ENTER_DIV?"div":"p"),t.moveToElementEditStart(i)))),n.selectRanges([t]),h(this)},insertElementIntoSelection:function(e){this.insertElement(e)},insertElementIntoRange:function(e,t){var n=this.editor,r=n.config.enterMode,i=e.getName(),s=CKEDITOR.dtd.$block[i];if(t.checkReadOnly())return!1;t.deleteContents(1),t.startContainer.type==CKEDITOR.NODE_ELEMENT&&t.startContainer.is({tr:1,table:1,tbody:1,thead:1,tfoot:1})&&w(t);var o,u;if(s)for(;(o=t.getCommonAncestor(0,1))&&(u=CKEDITOR.dtd[o.getName()])&&(!u||!u[i]);)o.getName()in CKEDITOR.dtd.span?t.splitElement(o):t.checkStartOfBlock()&&t.checkEndOfBlock()?(t.setStartBefore(o),t.collapse(!0),o.remove()):t.splitBlock(r==CKEDITOR.ENTER_DIV?"div":"p",n.editable());return t.insertNode(e),!0},setData:function(e,t){t||(e=this.editor.dataProcessor.toHtml(e)),this.setHtml(e),this.fixInitialSelection(),this.status=="unloaded"&&(this.status="ready"),this.editor.fire("dataReady")},getData:function(e){var t=this.getHtml();return e||(t=this.editor.dataProcessor.toDataFormat(t)),t},setReadOnly:function(e){this.setAttribute("contenteditable",!e)},detach:function(){this.removeClass("cke_editable"),this.status="detached";var e=this.editor;this._.detach(),delete e.document,delete e.window},isInline:function(){return this.getDocument().equals(CKEDITOR.document)},fixInitialSelection:function(){function e(){var e=n.getDocument().$,t=e.getSelection(),r;if(t.anchorNode&&t.anchorNode==n.$)r=!0;else if(CKEDITOR.env.webkit){var i=n.getDocument().getActive();i&&i.equals(n)&&!t.anchorNode&&(r=!0)}r&&(r=new CKEDITOR.dom.range(n),r.moveToElementEditStart(n),e=e.createRange(),e.setStart(r.startContainer.$,r.startOffset),e.collapse(!0),t.removeAllRanges(),t.addRange(e))}function t(){var e=n.getDocument().$,t=e.selection,r=n.getDocument().getActive();t.type=="None"&&r.equals(n)&&(t=new CKEDITOR.dom.range(n),e=e.body.createTextRange(),t.moveToElementEditStart(n),t=t.startContainer,t.type!=CKEDITOR.NODE_ELEMENT&&(t=t.getParent()),e.moveToElementText(t.$),e.collapse(!0),e.select())}var n=this;CKEDITOR.env.ie&&(CKEDITOR.env.version<9||CKEDITOR.env.quirks)?this.hasFocus&&(this.focus(),t()):this.hasFocus?(this.focus(),e()):this.once("focus",function(){e()},null,null,-999)},getHtmlFromRange:function(i){return i.collapsed?new CKEDITOR.dom.documentFragment(i.document):(i={doc:this.getDocument(),range:i.clone()},e.detect(i,this),t.exclude(i),n.shrink(i),i.fragment=i.range.cloneContents(),r.rebuild(i,this),e.fix(i,this),new CKEDITOR.dom.documentFragment(i.fragment.$))},extractHtmlFromRange:function(e,t){var n=E,r={range:e,doc:e.document},i=this.getHtmlFromRange(e);if(e.collapsed)return e.optimize(),i;e.enlarge(CKEDITOR.ENLARGE_INLINE,1),n.table.detectPurge(r),r.bookmark=e.createBookmark(),delete r.range;var s=this.editor.createRange();s.moveToPosition(r.bookmark.startNode,CKEDITOR.POSITION_BEFORE_START),r.targetBookmark=s.createBookmark(),n.list.detectMerge(r,this),n.table.detectRanges(r,this),n.block.detectMerge(r,this),r.tableContentsRanges?(n.table.deleteRanges(r),e.moveToBookmark(r.bookmark),r.range=e):(e.moveToBookmark(r.bookmark),r.range=e,e.extractContents(n.detectExtractMerge(r))),e.moveToBookmark(r.targetBookmark),e.optimize(),n.fixUneditableRangePosition(e),n.list.merge(r,this),n.table.purge(r,this),n.block.merge(r,this);if(t){n=e.startPath();if(r=e.checkStartOfBlock())if(r=e.checkEndOfBlock())if(r=n.block)if(r=!e.root.equals(n.block)){e:{var r=n.block.getElementsByTag("span"),s=0,o;if(r)for(;o=r.getItem(s++);)if(!v(o)){r=!0;break e}r=!1}r=!r}r&&(e.moveToPosition(n.block,CKEDITOR.POSITION_BEFORE_START),n.block.remove())}else n.autoParagraph(this.editor,e),m(e.startContainer)&&e.startContainer.appendBogus();return e.startContainer.mergeSiblings(),i},setup:function(){var e=this.editor;this.attachListener(e,"beforeGetData",function(){var t=this.getData();this.is("textarea")||e.config.ignoreEmptyParagraph!==!1&&(t=t.replace(y,function(e,t){return t})),e.setData(t,null,1)},this),this.attachListener(e,"getSnapshot",function(e){e.data=this.getData(1)},this),this.attachListener(e,"afterSetData",function(){this.setData(e.getData(1))},this),this.attachListener(e,"loadSnapshot",function(e){this.setData(e.data,1)},this),this.attachListener(e,"beforeFocus",function(){var t=e.getSelection();(t=t&&t.getNative())&&t.type=="Control"||this.focus()},this),this.attachListener(e,"insertHtml",function(e){this.insertHtml(e.data.dataValue,e.data.mode,e.data.range)},this),this.attachListener(e,"insertElement",function(e){this.insertElement(e.data)},this),this.attachListener(e,"insertText",function(e){this.insertText(e.data)},this),this.setReadOnly(e.readOnly),this.attachClass("cke_editable"),e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?this.attachClass("cke_editable_inline"):(e.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE||e.elementMode==CKEDITOR.ELEMENT_MODE_APPENDTO)&&this.attachClass("cke_editable_themed"),this.attachClass("cke_contents_"+e.config.contentsLangDirection),e.keystrokeHandler.blockedKeystrokes[8]=+e.readOnly,e.keystrokeHandler.attach(this),this.on("blur",function(){this.hasFocus=!1},null,null,-1),this.on("focus",function(){this.hasFocus=!0},null,null,-1),e.focusManager.add(this),this.equals(CKEDITOR.document.getActive())&&(this.hasFocus=!0,e.once("contentDom",function(){e.focusManager.focus(this)},this)),this.isInline()&&this.changeAttr("tabindex",e.tabIndex);if(!this.is("textarea")){e.document=this.getDocument(),e.window=this.getWindow();var t=e.document;this.changeAttr("spellcheck",!e.config.disableNativeSpellChecker);var n=e.config.contentsLangDirection;this.getDirection(1)!=n&&this.changeAttr("dir",n);var r=CKEDITOR.getCss();r&&(n=t.getHead(),n.getCustomData("stylesheet")||(r=t.appendStyleText(r),r=new CKEDITOR.dom.element(r.ownerNode||r.owningElement),n.setCustomData("stylesheet",r),r.data("cke-temp",1))),n=t.getCustomData("stylesheet_ref")||0,t.setCustomData("stylesheet_ref",n+1),this.setCustomData("cke_includeReadonly",!e.config.disableReadonlyStyling),this.attachListener(this,"click",function(e){var e=e.data,t=(new CKEDITOR.dom.elementPath(e.getTarget(),this)).contains("a");t&&e.$.button!=2&&t.isReadOnly()&&e.preventDefault()});var i={8:1,46:1};this.attachListener(e,"key",function(t){if(e.readOnly)return!0;var n=t.data.domEvent.getKey(),r;if(n in i){var t=e.getSelection(),s,o=t.getRanges()[0],u=o.startPath(),a,l,c,n=n==8;CKEDITOR.env.ie&&CKEDITOR.env.version<11&&(s=t.getSelectedElement())||(s=f(t))?(e.fire("saveSnapshot"),o.moveToPosition(s,CKEDITOR.POSITION_BEFORE_START),s.remove(),o.select(),e.fire("saveSnapshot"),r=1):o.collapsed&&((a=u.block)&&(c=a[n?"getPrevious":"getNext"](d))&&c.type==CKEDITOR.NODE_ELEMENT&&c.is("table")&&o[n?"checkStartOfBlock":"checkEndOfBlock"]()?(e.fire("saveSnapshot"),o[n?"checkEndOfBlock":"checkStartOfBlock"]()&&a.remove(),o["moveToElementEdit"+(n?"End":"Start")](c),o.select(),e.fire("saveSnapshot"),r=1):u.blockLimit&&u.blockLimit.is("td")&&(l=u.blockLimit.getAscendant("table"))&&o.checkBoundaryOfElement(l,n?CKEDITOR.START:CKEDITOR.END)&&(c=l[n?"getPrevious":"getNext"](d))?(e.fire("saveSnapshot"),o["moveToElementEdit"+(n?"End":"Start")](c),o.checkStartOfBlock()&&o.checkEndOfBlock()?c.remove():o.select(),e.fire("saveSnapshot"),r=1):(l=u.contains(["td","th","caption"]))&&o.checkBoundaryOfElement(l,n?CKEDITOR.START:CKEDITOR.END)&&(r=1))}return!r}),e.blockless&&CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller&&this.attachListener(this,"keyup",function(t){t.data.getKeystroke()in i&&!this.getFirst(u)&&(this.appendBogus(),t=e.createRange(),t.moveToPosition(this,CKEDITOR.POSITION_AFTER_START),t.select())}),this.attachListener(this,"dblclick",function(t){if(e.readOnly)return!1;t={element:t.data.getTarget()},e.fire("doubleclick",t)}),CKEDITOR.env.ie&&this.attachListener(this,"click",o),(!CKEDITOR.env.ie||CKEDITOR.env.edge)&&this.attachListener(this,"mousedown",function(t){var n=t.data.getTarget();n.is("img","hr","input","textarea","select")&&!n.isReadOnly()&&(e.getSelection().selectElement(n),n.is("input","textarea","select")&&t.data.preventDefault())}),CKEDITOR.env.edge&&this.attachListener(this,"mouseup",function(t){(t=t.data.getTarget())&&t.is("img")&&e.getSelection().selectElement(t)}),CKEDITOR.env.gecko&&this.attachListener(this,"mouseup",function(t){if(t.data.$.button==2){t=t.data.getTarget();if(!t.getOuterHtml().replace(y,"")){var n=e.createRange();n.moveToElementEditStart(t),n.select(!0)}}}),CKEDITOR.env.webkit&&(this.attachListener(this,"click",function(e){e.data.getTarget().is("input","select")&&e.data.preventDefault()}),this.attachListener(this,"mouseup",function(e){e.data.getTarget().is("input","textarea")&&e.data.preventDefault()})),CKEDITOR.env.webkit&&this.attachListener(e,"key",function(t){if(e.readOnly)return!0;t=t.data.domEvent.getKey();if(t in i){var n=t==8,r=e.getSelection().getRanges()[0],t=r.startPath();if(r.collapsed){var s;e:{var o=t.block;if(o)if(r[n?"checkStartOfBlock":"checkEndOfBlock"]())if(!r.moveToClosestEditablePosition(o,!n)||!r.collapsed)s=!1;else{if(r.startContainer.type==CKEDITOR.NODE_ELEMENT){var u=r.startContainer.getChild(r.startOffset-(n?1:0));if(u&&u.type==CKEDITOR.NODE_ELEMENT&&u.is("hr")){e.fire("saveSnapshot"),u.remove(),s=!0;break e}}if((r=r.startPath().block)&&(!r||!r.contains(o))){e.fire("saveSnapshot");var a;(a=(n?r:o).getBogus())&&a.remove(),s=e.getSelection(),a=s.createBookmarks(),(n?o:r).moveChildren(n?r:o,!1),t.lastElement.mergeSiblings(),p(o,r,!n),s.selectBookmarks(a),s=!0}}else s=!1;else s=!1}if(!s)return}else{n=r,s=t.block,a=n.endPath().block,!s||!a||s.equals(a)?t=!1:(e.fire("saveSnapshot"),(o=s.getBogus())&&o.remove(),n.enlarge(CKEDITOR.ENLARGE_INLINE),n.deleteContents(),a.getParent()&&(a.moveChildren(s,!1),t.lastElement.mergeSiblings(),p(s,a,!0)),n=e.getSelection().getRanges()[0],n.collapse(1),n.optimize(),n.startContainer.getHtml()===""&&n.startContainer.appendBogus(),n.select(),t=!0);if(!t)return}return e.getSelection().scrollIntoView(),e.fire("saveSnapshot"),!1}},this,null,100)}}},_:{detach:function(){this.editor.setData(this.editor.getData(),0,1),this.clearListeners(),this.restoreAttrs();var e;if(e=this.removeCustomData("classes"))for(;e.length;)this.removeClass(e.pop());if(!this.is("textarea")){e=this.getDocument();var t=e.getHead();if(t.getCustomData("stylesheet")){var n=e.getCustomData("stylesheet_ref");--n?e.setCustomData("stylesheet_ref",n):(e.removeCustomData("stylesheet_ref"),t.removeCustomData("stylesheet").remove())}}this.editor.fire("contentDomUnload"),delete this.editor}}}),CKEDITOR.editor.prototype.editable=function(e){var t=this._.editable;return t&&e?0:(arguments.length&&(t=this._.editable=e?e instanceof CKEDITOR.editable?e:new CKEDITOR.editable(this,e):(t&&t.detach(),null)),t)},CKEDITOR.on("instanceLoaded",function(e){var t=e.editor;t.on("insertElement",function(e){e=e.data,e.type==CKEDITOR.NODE_ELEMENT&&(e.is("input")||e.is("textarea"))&&(e.getAttribute("contentEditable")!="false"&&e.data("cke-editable",e.hasAttribute("contenteditable")?"true":"1"),e.setAttribute("contentEditable",!1))}),t.on("selectionChange",function(e){if(!t.readOnly){var n=t.getSelection();n&&!n.isLocked&&(n=t.checkDirty(),t.fire("lockSnapshot"),i(e),t.fire("unlockSnapshot"),!n&&t.resetDirty())}})}),CKEDITOR.on("instanceCreated",function(e){var t=e.editor;t.on("mode",function(){var e=t.editable();if(e&&e.isInline()){var n=t.title;e.changeAttr("role","textbox"),e.changeAttr("aria-label",n),n&&e.changeAttr("title",n);var r=t.fire("ariaEditorHelpLabel",{}).label;if(r)if(n=this.ui.space(this.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"top":"contents")){var i=CKEDITOR.tools.getNextId(),r=CKEDITOR.dom.element.createFromHtml('<span id="'+i+'" class="cke_voice_label">'+r+"</span>");n.append(r),e.changeAttr("aria-describedby",i)}}})}),CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}");var d=CKEDITOR.dom.walker.whitespaces(!0),v=CKEDITOR.dom.walker.bookmark(!1,!0),m=CKEDITOR.dom.walker.empty(),g=CKEDITOR.dom.walker.bogus(),y=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,b=function(){function e(e){return e.type==CKEDITOR.NODE_ELEMENT}function t(n,r){var i,s,u,a,f=[],l=r.range.startContainer;i=r.range.startPath();for(var l=o[l.getName()],c=0,h=n.getChildren(),p=h.count(),d=-1,v=-1,m=0,g=i.contains(o.$list);c<p;++c)i=h.getItem(c),e(i)?(u=i.getName(),g&&u in CKEDITOR.dtd.$list?f=f.concat(t(i,r)):(a=!!l[u],u=="br"&&i.data("cke-eol")&&(!c||c==p-1)&&(m=(s=c?f[c-1].node:h.getItem(c+1))&&(!e(s)||!s.is("br")),s=s&&e(s)&&o.$block[s.getName()]),d==-1&&!a&&(d=c),a||(v=c),f.push({isElement:1,isLineBreak:m,isBlock:i.isBlockBoundary(),hasBlockSibling:s,node:i,name:u,allowed:a}),s=m=0)):f.push({isElement:0,node:i,allowed:1});return d>-1&&(f[d].firstNotAllowed=1),v>-1&&(f[v].lastNotAllowed=1),f}function n(t,r){var i=[],s=t.getChildren(),u=s.count(),a,f=0,l=o[r],c=!t.is(o.$inline)||t.is("br");for(c&&i.push(" ");f<u;f++)a=s.getItem(f),e(a)&&!a.is(l)?i=i.concat(n(a,r)):i.push(a);return c&&i.push(" "),i}function r(t){return t&&e(t)&&(t.is(o.$removeEmpty)||t.is("a")&&!t.isBlockBoundary())}function i(t,n,r,s){var o=t.clone(),u,f;o.setEndAt(n,CKEDITOR.POSITION_BEFORE_END),(u=(new CKEDITOR.dom.walker(o)).next())&&e(u)&&a[u.getName()]&&(f=u.getPrevious())&&e(f)&&!f.getParent().equals(t.startContainer)&&r.contains(f)&&s.contains(u)&&u.isIdentical(f)&&(u.moveChildren(f),u.remove(),i(t,n,r,s))}function s(t,n){function r(t,n){if(n.isBlock&&n.isElement&&!n.node.is("br")&&e(t)&&t.is("br"))return t.remove(),1}var i=n.endContainer.getChild(n.endOffset),s=n.endContainer.getChild(n.endOffset-1);i&&r(i,t[t.length-1]),s&&r(s,t[0])&&(n.setEnd(n.endContainer,n.endOffset-1),n.collapse())}var o=CKEDITOR.dtd,a={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,li:1,pre:1,dl:1,blockquote:1},f={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},h=CKEDITOR.tools.extend({},o.$inline);return delete h.br,function(a,p,d,v){var m=a.editor,g=!1;p=="unfiltered_html"&&(p="html",g=!0);if(!v.checkReadOnly()){var y=(new CKEDITOR.dom.elementPath(v.startContainer,v.root)).blockLimit||v.root,a={type:p,dontFilter:g,editable:a,editor:m,range:v,blockLimit:y,mergeCandidates:[],zombies:[]},p=a.range,v=a.mergeCandidates,b,w;a.type=="text"&&p.shrink(CKEDITOR.SHRINK_ELEMENT,!0,!1)&&(b=CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",p.document),p.insertNode(b),p.setStartAfter(b)),g=new CKEDITOR.dom.elementPath(p.startContainer),a.endPath=y=new CKEDITOR.dom.elementPath(p.endContainer);if(!p.collapsed){var m=y.block||y.blockLimit,E=p.getCommonAncestor();m&&!m.equals(E)&&!m.contains(E)&&p.checkEndOfBlock()&&a.zombies.push(m),p.deleteContents()}for(;(w=e(p.startContainer)&&p.startContainer.getChild(p.startOffset-1))&&e(w)&&w.isBlockBoundary()&&g.contains(w);)p.moveToPosition(w,CKEDITOR.POSITION_BEFORE_END);i(p,a.blockLimit,g,y),b&&(p.setEndBefore(b),p.collapse(),b.remove()),b=p.startPath();if(m=b.contains(r,!1,1))p.splitElement(m),a.inlineStylesRoot=m,a.inlineStylesPeak=b.lastElement;b=p.createBookmark(),(m=b.startNode.getPrevious(u))&&e(m)&&r(m)&&v.push(m),(m=b.startNode.getNext(u))&&e(m)&&r(m)&&v.push(m);for(m=b.startNode;(m=m.getParent())&&r(m);)v.push(m);p.moveToBookmark(b);if(b=d){b=a.range;if(a.type=="text"&&a.inlineStylesRoot){w=a.inlineStylesPeak,p=w.getDocument().createText("{cke-peak}");for(v=a.inlineStylesRoot.getParent();!w.equals(v);)p=p.appendTo(w.clone()),w=w.getParent();d=p.getOuterHtml().split("{cke-peak}").join(d)}w=a.blockLimit.getName();if(/^\s+|\s+$/.test(d)&&"span"in CKEDITOR.dtd[w])var S='<span data-cke-marker="1">&nbsp;</span>',d=S+d+S;d=a.editor.dataProcessor.toHtml(d,{context:null,fixForBody:!1,protectedWhitespaces:!!S,dontFilter:a.dontFilter,filter:a.editor.activeFilter,enterMode:a.editor.activeEnterMode}),w=b.document.createElement("body"),w.setHtml(d),S&&(w.getFirst().remove(),w.getLast().remove());if((S=b.startPath().block)&&(S.getChildCount()!=1||!S.getBogus()))e:{var x;if(w.getChildCount()==1&&e(x=w.getFirst())&&x.is(f)&&!x.hasAttribute("contenteditable")){S=x.getElementsByTag("*"),b=0;for(v=S.count();b<v;b++){p=S.getItem(b);if(!p.is(h))break e}x.moveChildren(x.getParent(1)),x.remove()}}a.dataWrapper=w,b=d}if(b){x=a.range,b=x.document;var T;w=a.blockLimit;var v=0,N,S=[],C,k,d=m=0,L,O,p=x.startContainer,g=a.endPath.elements[0],M,y=g.getPosition(p),E=!!g.getCommonAncestor(p)&&y!=CKEDITOR.POSITION_IDENTICAL&&!(y&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED),p=t(a.dataWrapper,a);for(s(p,x);v<p.length;v++){y=p[v];if(T=y.isLineBreak){T=x,L=w;var _=void 0,D=void 0;y.hasBlockSibling?T=1:(_=T.startContainer.getAscendant(o.$block,1),!_||!_.is({div:1,p:1})?T=0:(D=_.getPosition(L),D==CKEDITOR.POSITION_IDENTICAL||D==CKEDITOR.POSITION_CONTAINS?T=0:(L=T.splitElement(_),T.moveToPosition(L,CKEDITOR.POSITION_AFTER_START),T=1)))}if(T)d=v>0;else{T=x.startPath(),!y.isBlock&&l(a.editor,T.block,T.blockLimit)&&(k=c(a.editor))&&(k=b.createElement(k),k.appendBogus(),x.insertNode(k),CKEDITOR.env.needsBrFiller&&(N=k.getBogus())&&N.remove(),x.moveToPosition(k,CKEDITOR.POSITION_BEFORE_END));if((T=x.startPath().block)&&!T.equals(C)){if(N=T.getBogus())N.remove(),S.push(T);C=T}y.firstNotAllowed&&(m=1);if(m&&y.isElement){T=x.startContainer;for(L=null;T&&!o[T.getName()][y.name];){if(T.equals(w)){T=null;break}L=T,T=T.getParent()}if(T)L&&(O=x.splitElement(L),a.zombies.push(O),a.zombies.push(L));else{L=w.getName(),M=!v,T=v==p.length-1,L=n(y.node,L);for(var _=[],D=L.length,P=0,H=void 0,B=0,F=-1;P<D;P++)H=L[P],H==" "?(!B&&(!M||P)&&(_.push(new CKEDITOR.dom.text(" ")),F=_.length),B=1):(_.push(H),B=0);T&&F==_.length&&_.pop(),M=_}}if(M){for(;T=M.pop();)x.insertNode(T);M=0}else x.insertNode(y.node);y.lastNotAllowed&&v<p.length-1&&((O=E?g:O)&&x.setEndAt(O,CKEDITOR.POSITION_AFTER_START),m=0),x.collapse()}}p.length!=1?N=!1:(N=p[0],N=N.isElement&&N.node.getAttribute("contenteditable")=="false"),N&&(d=!0,T=p[0].node,x.setStartAt(T,CKEDITOR.POSITION_BEFORE_START),x.setEndAt(T,CKEDITOR.POSITION_AFTER_END)),a.dontMoveCaret=d,a.bogusNeededBlocks=S}N=a.range;var I;O=a.bogusNeededBlocks;for(M=N.createBookmark();C=a.zombies.pop();)C.getParent()&&(k=N.clone(),k.moveToElementEditStart(C),k.removeEmptyBlocksAtEnd());if(O)for(;C=O.pop();)CKEDITOR.env.needsBrFiller?C.appendBogus():C.append(N.document.createText(" "));for(;C=a.mergeCandidates.pop();)C.mergeSiblings();N.moveToBookmark(M);if(!a.dontMoveCaret){for(C=e(N.startContainer)&&N.startContainer.getChild(N.startOffset-1);C&&e(C)&&!C.is(o.$empty);){if(C.isBlockBoundary())N.moveToPosition(C,CKEDITOR.POSITION_BEFORE_END);else{if(r(C)&&
C.getHtml().match(/(\s|&nbsp;)$/g)){I=null;break}I=N.clone(),I.moveToPosition(C,CKEDITOR.POSITION_BEFORE_END)}C=C.getLast(u)}I&&N.moveToRange(I)}}}}(),w=function(){function e(e){return e=new CKEDITOR.dom.walker(e),e.guard=function(e,t){if(t)return!1;if(e.type==CKEDITOR.NODE_ELEMENT)return e.is(CKEDITOR.dtd.$tableContent)},e.evaluator=function(e){return e.type==CKEDITOR.NODE_ELEMENT},e}function t(e,t,n){return t=e.getDocument().createElement(t),e.append(t,n),t}function n(e){var t=e.count(),n;for(t;t-->0;)n=e.getItem(t),CKEDITOR.tools.trim(n.getHtml())||(n.appendBogus(),CKEDITOR.env.ie&&CKEDITOR.env.version<9&&n.getChildCount()&&n.getFirst().remove())}return function(r){var i=r.startContainer,s=i.getAscendant("table",1),o=!1;n(s.getElementsByTag("td")),n(s.getElementsByTag("th")),s=r.clone(),s.setStart(i,0),s=e(s).lastBackward(),s||(s=r.clone(),s.setEndAt(i,CKEDITOR.POSITION_BEFORE_END),s=e(s).lastForward(),o=!0),s||(s=i),s.is("table")?(r.setStartAt(s,CKEDITOR.POSITION_BEFORE_START),r.collapse(!0),s.remove()):(s.is({tbody:1,thead:1,tfoot:1})&&(s=t(s,"tr",o)),s.is("tr")&&(s=t(s,s.getParent().is("thead")?"th":"td",o)),(i=s.getBogus())&&i.remove(),r.moveToPosition(s,o?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END))}}();e={detect:function(e,t){var n=e.range,r=n.clone(),i=n.clone(),s=new CKEDITOR.dom.elementPath(n.startContainer,t),o=new CKEDITOR.dom.elementPath(n.endContainer,t);r.collapse(1),i.collapse(),s.block&&r.checkBoundaryOfElement(s.block,CKEDITOR.END)&&(n.setStartAfter(s.block),e.prependEolBr=1),o.block&&i.checkBoundaryOfElement(o.block,CKEDITOR.START)&&(n.setEndBefore(o.block),e.appendEolBr=1)},fix:function(e,t){var n=t.getDocument(),r;e.appendEolBr&&(r=this.createEolBr(n),e.fragment.append(r)),e.prependEolBr&&(!r||r.getPrevious())&&e.fragment.append(this.createEolBr(n),1)},createEolBr:function(e){return e.createElement("br",{attributes:{"data-cke-eol":1}})}},t={exclude:function(e){var t=e.range.getBoundaryNodes(),n=t.startNode;(t=t.endNode)&&g(t)&&(!n||!n.equals(t))&&e.range.setEndBefore(t)}},r={rebuild:function(e,t){var n=e.range,r=n.getCommonAncestor(),i=new CKEDITOR.dom.elementPath(r,t),s=new CKEDITOR.dom.elementPath(n.startContainer,t),n=new CKEDITOR.dom.elementPath(n.endContainer,t),o;r.type==CKEDITOR.NODE_TEXT&&(r=r.getParent());if(i.blockLimit.is({tr:1,table:1})){var u=i.contains("table").getParent();o=function(e){return!e.equals(u)}}else if(i.block&&i.block.is(CKEDITOR.dtd.$listItem)){s=s.contains(CKEDITOR.dtd.$list),n=n.contains(CKEDITOR.dtd.$list);if(!s.equals(n)){var a=i.contains(CKEDITOR.dtd.$list).getParent();o=function(e){return!e.equals(a)}}}o||(o=function(e){return!e.equals(i.block)&&!e.equals(i.blockLimit)}),this.rebuildFragment(e,t,r,o)},rebuildFragment:function(e,t,n,r){for(var i;n&&!n.equals(t)&&r(n);)i=n.clone(0,1),e.fragment.appendTo(i),e.fragment=i,n=n.getParent()}},n={shrink:function(e){var e=e.range,t=e.startContainer,n=e.endContainer,r=e.startOffset,i=e.endOffset;t.type==CKEDITOR.NODE_ELEMENT&&t.equals(n)&&t.is("tr")&&++r==i&&e.shrink(CKEDITOR.SHRINK_TEXT)}};var E=function(){function e(e,t){var n=e.getParent();n.is(CKEDITOR.dtd.$inline)&&e[t?"insertBefore":"insertAfter"](n)}function t(t,n,r){e(n),e(r,1);for(var i;i=r.getNext();)i.insertAfter(n),n=i;m(t)&&t.remove()}function n(e,t){var n=new CKEDITOR.dom.range(e);return n.setStartAfter(t.startNode),n.setEndBefore(t.endNode),n}return{list:{detectMerge:function(e,t){var r=n(t,e.bookmark),i=r.startPath(),s=r.endPath(),o=i.contains(CKEDITOR.dtd.$list),u=s.contains(CKEDITOR.dtd.$list);e.mergeList=o&&u&&o.getParent().equals(u.getParent())&&!o.equals(u),e.mergeListItems=i.block&&s.block&&i.block.is(CKEDITOR.dtd.$listItem)&&s.block.is(CKEDITOR.dtd.$listItem);if(e.mergeList||e.mergeListItems)r=r.clone(),r.setStartBefore(e.bookmark.startNode),r.setEndAfter(e.bookmark.endNode),e.mergeListBookmark=r.createBookmark()},merge:function(e,n){if(e.mergeListBookmark){var r=e.mergeListBookmark.startNode,i=e.mergeListBookmark.endNode,s=new CKEDITOR.dom.elementPath(r,n),o=new CKEDITOR.dom.elementPath(i,n);if(e.mergeList){var u=s.contains(CKEDITOR.dtd.$list),a=o.contains(CKEDITOR.dtd.$list);u.equals(a)||(a.moveChildren(u),a.remove())}e.mergeListItems&&(s=s.contains(CKEDITOR.dtd.$listItem),o=o.contains(CKEDITOR.dtd.$listItem),s.equals(o)||t(o,r,i)),r.remove(),i.remove()}}},block:{detectMerge:function(e,t){if(!e.tableContentsRanges&&!e.mergeListBookmark){var n=new CKEDITOR.dom.range(t);n.setStartBefore(e.bookmark.startNode),n.setEndAfter(e.bookmark.endNode),e.mergeBlockBookmark=n.createBookmark()}},merge:function(e,n){if(e.mergeBlockBookmark&&!e.purgeTableBookmark){var r=e.mergeBlockBookmark.startNode,i=e.mergeBlockBookmark.endNode,s=new CKEDITOR.dom.elementPath(r,n),o=new CKEDITOR.dom.elementPath(i,n),s=s.block,o=o.block;s&&o&&!s.equals(o)&&t(o,r,i),r.remove(),i.remove()}}},table:function(){function e(e){var n=[],i,s=new CKEDITOR.dom.walker(e),o=e.startPath().contains(r),u=e.endPath().contains(r),a={};return s.guard=function(s,f){if(s.type==CKEDITOR.NODE_ELEMENT){var l="visited_"+(f?"out":"in");if(s.getCustomData(l))return;CKEDITOR.dom.element.setMarker(a,s,l,1)}f&&o&&s.equals(o)?(i=e.clone(),i.setEndAt(o,CKEDITOR.POSITION_BEFORE_END),n.push(i)):!f&&u&&s.equals(u)?(i=e.clone(),i.setStartAt(u,CKEDITOR.POSITION_AFTER_START),n.push(i)):!f&&s.type==CKEDITOR.NODE_ELEMENT&&s.is(r)&&(!o||t(s,o))&&(!u||t(s,u))&&(i=e.clone(),i.selectNodeContents(s),n.push(i))},s.lastForward(),CKEDITOR.dom.element.clearAllMarkers(a),n}function t(e,t){var n=CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED,r=e.getPosition(t);return r===CKEDITOR.POSITION_IDENTICAL?!1:(r&n)===0}var r={td:1,th:1,caption:1};return{detectPurge:function(e){var t=e.range,n=t.clone();n.enlarge(CKEDITOR.ENLARGE_ELEMENT);var n=new CKEDITOR.dom.walker(n),i=0;n.evaluator=function(e){e.type==CKEDITOR.NODE_ELEMENT&&e.is(r)&&++i},n.checkForward();if(i>1){var n=t.startPath().contains("table"),s=t.endPath().contains("table");n&&s&&t.checkBoundaryOfElement(n,CKEDITOR.START)&&t.checkBoundaryOfElement(s,CKEDITOR.END)&&(t=e.range.clone(),t.setStartBefore(n),t.setEndAfter(s),e.purgeTableBookmark=t.createBookmark())}},detectRanges:function(i,s){var o=n(s,i.bookmark),u=o.clone(),a,f,l=o.getCommonAncestor();l.is(CKEDITOR.dtd.$tableContent)&&!l.is(r)&&(l=l.getAscendant("table",!0)),f=l,l=new CKEDITOR.dom.elementPath(o.startContainer,f),f=new CKEDITOR.dom.elementPath(o.endContainer,f),l=l.contains("table"),f=f.contains("table");if(l||f)l&&f&&t(l,f)?(i.tableSurroundingRange=u,u.setStartAt(l,CKEDITOR.POSITION_AFTER_END),u.setEndAt(f,CKEDITOR.POSITION_BEFORE_START),u=o.clone(),u.setEndAt(l,CKEDITOR.POSITION_AFTER_END),a=o.clone(),a.setStartAt(f,CKEDITOR.POSITION_BEFORE_START),a=e(u).concat(e(a))):l?f||(i.tableSurroundingRange=u,u.setStartAt(l,CKEDITOR.POSITION_AFTER_END),o.setEndAt(l,CKEDITOR.POSITION_AFTER_END)):(i.tableSurroundingRange=u,u.setEndAt(f,CKEDITOR.POSITION_BEFORE_START),o.setStartAt(f,CKEDITOR.POSITION_AFTER_START)),i.tableContentsRanges=a?a:e(o)},deleteRanges:function(e){for(var t;t=e.tableContentsRanges.pop();)t.extractContents(),m(t.startContainer)&&t.startContainer.appendBogus();e.tableSurroundingRange&&e.tableSurroundingRange.extractContents()},purge:function(e){if(e.purgeTableBookmark){var t=e.doc,n=e.range.clone(),t=t.createElement("p");t.insertBefore(e.purgeTableBookmark.startNode),n.moveToBookmark(e.purgeTableBookmark),n.deleteContents(),e.range.moveToPosition(t,CKEDITOR.POSITION_AFTER_START)}}}}(),detectExtractMerge:function(e){return!e.range.startPath().contains(CKEDITOR.dtd.$listItem)||!e.range.endPath().contains(CKEDITOR.dtd.$listItem)},fixUneditableRangePosition:function(e){e.startContainer.getDtd()["#"]||e.moveToClosestEditablePosition(null,!0)},autoParagraph:function(e,t){var n=t.startPath(),r;l(e,n.block,n.blockLimit)&&(r=c(e))&&(r=t.document.createElement(r),r.appendBogus(),t.insertNode(r),t.moveToPosition(r,CKEDITOR.POSITION_AFTER_START))}}}()}(),function(){function e(){var e=this._.fakeSelection,t;if(e){t=this.getSelection(1);if(!t||!t.isHidden())e.reset(),e=0}if(!e){e=t||this.getSelection(1);if(!e||e.getType()==CKEDITOR.SELECTION_NONE)return}this.fire("selectionCheck",e),t=this.elementPath(),t.compare(this._.selectionPreviousPath)||(CKEDITOR.env.webkit&&(this._.previousActive=this.document.getActive()),this._.selectionPreviousPath=t,this.fire("selectionChange",{selection:e,path:t}))}function t(){d=!0,p||(n.call(this),p=CKEDITOR.tools.setTimeout(n,200,this))}function n(){p=null,d&&(CKEDITOR.tools.setTimeout(e,0,this),d=!1)}function r(e){return v(e)||e.type==CKEDITOR.NODE_ELEMENT&&!e.is(CKEDITOR.dtd.$empty)?!0:!1}function i(e){function t(t,n){return!t||t.type==CKEDITOR.NODE_TEXT?!1:e.clone()["moveToElementEdit"+(n?"End":"Start")](t)}if(e.root instanceof CKEDITOR.editable){var n=e.startContainer,i=e.getPreviousNode(r,null,n),s=e.getNextNode(r,null,n);return t(i)||t(s,1)||!i&&!s&&(n.type!=CKEDITOR.NODE_ELEMENT||!n.isBlockBoundary()||!n.getBogus())?!0:!1}return!1}function s(e){return e.getCustomData("cke-fillingChar")}function o(e,t){var n=e&&e.removeCustomData("cke-fillingChar");if(n){if(t!==!1){var r,i=e.getDocument().getSelection().getNative(),s=i&&i.type!="None"&&i.getRangeAt(0);n.getLength()>1&&s&&s.intersectsNode(n.$)&&(r=a(i),s=i.focusNode==n.$&&i.focusOffset>0,i.anchorNode==n.$&&i.anchorOffset>0&&r[0].offset--,s&&r[1].offset--)}n.setText(u(n.getText())),r&&f(e.getDocument().$,r)}}function u(e){return e.replace(/\u200B( )?/g,function(e){return e[1]?" ":""})}function a(e){return[{node:e.anchorNode,offset:e.anchorOffset},{node:e.focusNode,offset:e.focusOffset}]}function f(e,t){var n=e.getSelection(),r=e.createRange();r.setStart(t[0].node,t[0].offset),r.collapse(!0),n.removeAllRanges(),n.addRange(r),n.extend(t[1].node,t[1].offset)}function l(e){var t=CKEDITOR.dom.element.createFromHtml('<div data-cke-hidden-sel="1" data-cke-temp="1" style="'+(CKEDITOR.env.ie?"display:none":"position:fixed;top:0;left:-1000px")+'">&nbsp;</div>',e.document);e.fire("lockSnapshot"),e.editable().append(t);var n=e.getSelection(1),r=e.createRange(),i=n.root.on("selectionchange",function(e){e.cancel()},null,null,0);r.setStartAt(t,CKEDITOR.POSITION_AFTER_START),r.setEndAt(t,CKEDITOR.POSITION_BEFORE_END),n.selectRanges([r]),i.removeListener(),e.fire("unlockSnapshot"),e._.hiddenSelectionContainer=t}function c(e){var t={37:1,39:1,8:1,46:1};return function(n){var r=n.data.getKeystroke();if(t[r]){var i=e.getSelection().getRanges(),s=i[0];i.length==1&&s.collapsed&&(r=s[r<38?"getPreviousEditableNode":"getNextEditableNode"]())&&r.type==CKEDITOR.NODE_ELEMENT&&r.getAttribute("contenteditable")=="false"&&(e.getSelection().fake(r),n.data.preventDefault(),n.cancel())}}}function h(e){for(var t=0;t<e.length;t++){var n=e[t];n.getCommonAncestor().isReadOnly()&&e.splice(t,1);if(!n.collapsed){if(n.startContainer.isReadOnly())for(var r=n.startContainer,i;r;){if((i=r.type==CKEDITOR.NODE_ELEMENT)&&r.is("body")||!r.isReadOnly())break;i&&r.getAttribute("contentEditable")=="false"&&n.setStartAfter(r),r=r.getParent()}r=n.startContainer,i=n.endContainer;var s=n.startOffset,o=n.endOffset,u=n.clone();r&&r.type==CKEDITOR.NODE_TEXT&&(s>=r.getLength()?u.setStartAfter(r):u.setStartBefore(r)),i&&i.type==CKEDITOR.NODE_TEXT&&(o?u.setEndAfter(i):u.setEndBefore(i)),r=new CKEDITOR.dom.walker(u),r.evaluator=function(r){if(r.type==CKEDITOR.NODE_ELEMENT&&r.isReadOnly()){var i=n.clone();return n.setEndBefore(r),n.collapsed&&e.splice(t--,1),r.getPosition(u.endContainer)&CKEDITOR.POSITION_CONTAINS||(i.setStartAfter(r),i.collapsed||e.splice(t+1,0,i)),!0}return!1},r.next()}}return e}var p,d,v=CKEDITOR.dom.walker.invisible(1),m=function(){function e(e){return function(t){var n=t.editor.createRange();return n.moveToClosestEditablePosition(t.selected,e)&&t.editor.getSelection().selectRanges([n]),!1}}function t(e){return function(t){var n=t.editor,r=n.createRange(),i;return(i=r.moveToClosestEditablePosition(t.selected,e))||(i=r.moveToClosestEditablePosition(t.selected,!e)),i&&n.getSelection().selectRanges([r]),n.fire("saveSnapshot"),t.selected.remove(),i||(r.moveToElementEditablePosition(n.editable()),n.getSelection().selectRanges([r])),n.fire("saveSnapshot"),!1}}var n=e(),r=e(1);return{37:n,38:n,39:r,40:r,8:t(),46:t(1)}}();CKEDITOR.on("instanceCreated",function(n){function r(){var e=i.getSelection();e&&e.removeAllRanges()}var i=n.editor;i.on("contentDom",function(){function n(){d=new CKEDITOR.dom.selection(i.getSelection()),d.lock()}function r(){u.removeListener("mouseup",r),l.removeListener("mouseup",r);var e=CKEDITOR.document.$.selection,t=e.createRange();e.type!="None"&&t.parentElement().ownerDocument==s.$&&t.select()}var s=i.document,u=CKEDITOR.document,a=i.editable(),f=s.getBody(),l=s.getDocumentElement(),h=a.isInline(),p,d;CKEDITOR.env.gecko&&a.attachListener(a,"focus",function(e){e.removeListener(),p!==0&&(e=i.getSelection().getNative())&&e.isCollapsed&&e.anchorNode==a.$&&(e=i.createRange(),e.moveToElementEditStart(a),e.select())},null,null,-2),a.attachListener(a,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){p&&CKEDITOR.env.webkit&&(p=i._.previousActive&&i._.previousActive.equals(s.getActive())),i.unlockSelection(p),p=0},null,null,-1),a.attachListener(a,"mousedown",function(){p=0});if(CKEDITOR.env.ie||h)g?a.attachListener(a,"beforedeactivate",n,null,null,-1):a.attachListener(i,"selectionCheck",n,null,null,-1),a.attachListener(a,CKEDITOR.env.webkit?"DOMFocusOut":"blur",function(){i.lockSelection(d),p=1},null,null,-1),a.attachListener(a,"mousedown",function(){p=0});if(CKEDITOR.env.ie&&!h){var v;a.attachListener(a,"mousedown",function(e){if(e.data.$.button==2){e=i.document.getSelection();if(!e||e.getType()==CKEDITOR.SELECTION_NONE)v=i.window.getScrollPosition()}}),a.attachListener(a,"mouseup",function(e){e.data.$.button==2&&v&&(i.document.$.documentElement.scrollLeft=v.x,i.document.$.documentElement.scrollTop=v.y),v=null}),s.$.compatMode!="BackCompat"&&((CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&l.on("mousedown",function(e){function t(e){e=e.data.$;if(r){var t=f.$.createTextRange();try{t.moveToPoint(e.clientX,e.clientY)}catch(n){}r.setEndPoint(s.compareEndPoints("StartToStart",t)<0?"EndToEnd":"StartToStart",t),r.select()}}function n(){l.removeListener("mousemove",t),u.removeListener("mouseup",n),l.removeListener("mouseup",n),r.select()}e=e.data;if(e.getTarget().is("html")&&e.$.y<l.$.clientHeight&&e.$.x<l.$.clientWidth){var r=f.$.createTextRange();try{r.moveToPoint(e.$.clientX,e.$.clientY)}catch(i){}var s=r.duplicate();l.on("mousemove",t),u.on("mouseup",n),l.on("mouseup",n)}}),CKEDITOR.env.version>7&&CKEDITOR.env.version<11&&l.on("mousedown",function(e){e.data.getTarget().is("html")&&(u.on("mouseup",r),l.on("mouseup",r))}))}a.attachListener(a,"selectionchange",e,i),a.attachListener(a,"keyup",t,i),a.attachListener(a,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){i.forceNextSelectionCheck(),i.selectionChange(1)});if(h&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)){var m;a.attachListener(a,"mousedown",function(){m=1}),a.attachListener(s.getDocumentElement(),"mouseup",function(){m&&t.call(i),m=0})}else a.attachListener(CKEDITOR.env.ie?a:s.getDocumentElement(),"mouseup",t,i);CKEDITOR.env.webkit&&a.attachListener(s,"keydown",function(e){switch(e.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:o(a)}},null,null,-1),a.attachListener(a,"keydown",c(i),null,null,-1)}),i.on("setData",function(){i.unlockSelection(),CKEDITOR.env.webkit&&r()}),i.on("contentDomUnload",function(){i.unlockSelection()}),CKEDITOR.env.ie9Compat&&i.on("beforeDestroy",r,null,null,9),i.on("dataReady",function(){delete i._.fakeSelection,delete i._.hiddenSelectionContainer,i.selectionChange(1)}),i.on("loadSnapshot",function(){var e=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT),t=i.editable().getLast(e);t&&t.hasAttribute("data-cke-hidden-sel")&&(t.remove(),CKEDITOR.env.gecko&&(e=i.editable().getFirst(e))&&e.is("br")&&e.getAttribute("_moz_editor_bogus_node")&&e.remove())},null,null,100),i.on("key",function(e){if(i.mode=="wysiwyg"){var t=i.getSelection();if(t.isFake){var n=m[e.data.keyCode];if(n)return n({editor:i,selected:t.getSelectedElement(),selection:t,keyEvent:e})}}})}),CKEDITOR.on("instanceReady",function(e){function t(){var e=r.editable();if(e)if(e=s(e)){var t=r.document.$.getSelection();t.type!="None"&&(t.anchorNode==e.$||t.focusNode==e.$)&&(l=a(t)),i=e.getText(),e.setText(u(i))}}function n(){var e=r.editable();e&&(e=s(e))&&(e.setText(i),l&&(f(r.document.$,l),l=null))}var r=e.editor,i,l;CKEDITOR.env.webkit&&(r.on("selectionChange",function(){var e=r.editable(),t=s(e);t&&(t.getCustomData("ready")?o(e):t.setCustomData("ready",1))},null,null,-1),r.on("beforeSetMode",function(){o(r.editable())},null,null,-1),r.on("beforeUndoImage",t),r.on("afterUndoImage",n),r.on("beforeGetData",t,null,null,0),r.on("getData",n))}),CKEDITOR.editor.prototype.selectionChange=function(n){(n?e:t).call(this)},CKEDITOR.editor.prototype.getSelection=function(e){return(this._.savedSelection||this._.fakeSelection)&&!e?this._.savedSelection||this._.fakeSelection:(e=this.editable())&&this.mode=="wysiwyg"?new CKEDITOR.dom.selection(e):null},CKEDITOR.editor.prototype.lockSelection=function(e){return e=e||this.getSelection(1),e.getType()!=CKEDITOR.SELECTION_NONE?(!e.isLocked&&e.lock(),this._.savedSelection=e,!0):!1},CKEDITOR.editor.prototype.unlockSelection=function(e){var t=this._.savedSelection;return t?(t.unlock(e),delete this._.savedSelection,!0):!1},CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath},CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this)},CKEDITOR.dom.range.prototype.select=function(){var e=this.root instanceof CKEDITOR.editable?this.root.editor.getSelection():new CKEDITOR.dom.selection(this.root);return e.selectRanges([this]),e},CKEDITOR.SELECTION_NONE=1,CKEDITOR.SELECTION_TEXT=2,CKEDITOR.SELECTION_ELEMENT=3;var g=typeof window.getSelection!="function",y=1;CKEDITOR.dom.selection=function(e){if(e instanceof CKEDITOR.dom.selection)var t=e,e=e.root;var n=e instanceof CKEDITOR.dom.element;this.rev=t?t.rev:y++,this.document=e instanceof CKEDITOR.dom.document?e:e.getDocument(),this.root=n?e:this.document.getBody(),this.isLocked=0,this._={cache:{}};if(t)return CKEDITOR.tools.extend(this._.cache,t._.cache),this.isFake=t.isFake,this.isLocked=t.isLocked,this;var e=this.getNative(),r,i;if(e)if(e.getRangeAt)r=(i=e.rangeCount&&e.getRangeAt(0))&&new CKEDITOR.dom.node(i.commonAncestorContainer);else{try{i=e.createRange()}catch(s){}r=i&&CKEDITOR.dom.element.get(i.item&&i.item(0)||i.parentElement())}if(!r||r.type!=CKEDITOR.NODE_ELEMENT&&r.type!=CKEDITOR.NODE_TEXT||!this.root.equals(r)&&!this.root.contains(r))this._.cache.type=CKEDITOR.SELECTION_NONE,this._.cache.startElement=null,this._.cache.selectedElement=null,this._.cache.selectedText="",this._.cache.ranges=new CKEDITOR.dom.rangeList;return this};var b={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1};CKEDITOR.dom.selection.prototype={getNative:function(){return this._.cache.nativeSel!==void 0?this._.cache.nativeSel:this._.cache.nativeSel=g?this.document.$.selection:this.document.getWindow().$.getSelection()},getType:g?function(){var e=this._.cache;if(e.type)return e.type;var t=CKEDITOR.SELECTION_NONE;try{var n=this.getNative(),r=n.type;r=="Text"&&(t=CKEDITOR.SELECTION_TEXT),r=="Control"&&(t=CKEDITOR.SELECTION_ELEMENT),n.createRange().parentElement()&&(t=CKEDITOR.SELECTION_TEXT)}catch(i){}return e.type=t}:function(){var e=this._.cache;if(e.type)return e.type;var t=CKEDITOR.SELECTION_TEXT,n=this.getNative();if(!n||!n.rangeCount)t=CKEDITOR.SELECTION_NONE;else if(n.rangeCount==1){var n=n.getRangeAt(0),r=n.startContainer;r==n.endContainer&&r.nodeType==1&&n.endOffset-n.startOffset==1&&b[r.childNodes[n.startOffset].nodeName.toLowerCase()]&&(t=CKEDITOR.SELECTION_ELEMENT)}return e.type=t},getRanges:function(){var e=g?function(){function e(e){return(new CKEDITOR.dom.node(e)).getIndex()}var t=function(t,n){t=t.duplicate(),t.collapse(n);var r=t.parentElement();if(!r.hasChildNodes())return{container:r,offset:0};for(var i=r.children,s,o,u=t.duplicate(),a=0,f=i.length-1,l=-1,c,h;a<=f;){l=Math.floor((a+f)/2),s=i[l],u.moveToElementText(s),c=u.compareEndPoints("StartToStart",t);if(c>0)f=l-1;else{if(!(c<0))return{container:r,offset:e(s)};a=l+1}}if(l==-1||l==i.length-1&&c<0){u.moveToElementText(r),u.setEndPoint("StartToStart",t),u=u.text.replace(/(\r\n|\r)/g,"\n").length,i=r.childNodes;if(!u)return s=i[i.length-1],s.nodeType!=CKEDITOR.NODE_TEXT?{container:r,offset:i.length}:{container:s,offset:s.nodeValue.length};for(r=i.length;u>0&&r>0;)o=i[--r],o.nodeType==CKEDITOR.NODE_TEXT&&(h=o,u-=o.nodeValue.length);return{container:h,offset:-u}}u.collapse(c>0?!0:!1),u.setEndPoint(c>0?"StartToStart":"EndToStart",t),u=u.text.replace(/(\r\n|\r)/g,"\n").length;if(!u)return{container:r,offset:e(s)+(c>0?0:1)};for(;u>0;)try{o=s[c>0?"previousSibling":"nextSibling"],o.nodeType==CKEDITOR.NODE_TEXT&&(u-=o.nodeValue.length,h=o),s=o}catch(p){return{container:r,offset:e(s)}}return{container:h,offset:c>0?-u:h.nodeValue.length+u}};return function(){var e=this.getNative(),n=e&&e.createRange(),r=this.getType();if(!e)return[];if(r==CKEDITOR.SELECTION_TEXT)return e=new CKEDITOR.dom.range(this.root),r=t(n,!0),e.setStart(new CKEDITOR.dom.node(r.container),r.offset),r=t(n),e.setEnd(new CKEDITOR.dom.node(r.container),r.offset),e.endContainer.getPosition(e.startContainer)&CKEDITOR.POSITION_PRECEDING&&e.endOffset<=e.startContainer.getIndex()&&e.collapse(),[e];if(r==CKEDITOR.SELECTION_ELEMENT){for(var r=[],i=0;i<n.length;i++){for(var s=n.item(i),o=s.parentNode,u=0,e=new CKEDITOR.dom.range(this.root);u<o.childNodes.length&&o.childNodes[u]!=s;u++);e.setStart(new CKEDITOR.dom.node(o),u),e.setEnd(new CKEDITOR.dom.node(o),u+1),r.push(e)}return r}return[]}}():function(){var e=[],t,n=this.getNative();if(!n)return e;for(var r=0;r<n.rangeCount;r++){var i=n.getRangeAt(r);t=new CKEDITOR.dom.range(this.root),t.setStart(new CKEDITOR.dom.node(i.startContainer),i.startOffset),t.setEnd(new CKEDITOR.dom.node(i.endContainer),i.endOffset),e.push(t)}return e};return function(t){var n=this._.cache,r=n.ranges;return r||(n.ranges=r=new CKEDITOR.dom.rangeList(e.call(this))),t?h(new CKEDITOR.dom.rangeList(r.slice())):r}}(),getStartElement:function(){var e=this._.cache;if(e.startElement!==void 0)return e.startElement;var t;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var n=this.getRanges()[0];if(n){if(n.collapsed)t=n.startContainer,t.type!=CKEDITOR.NODE_ELEMENT&&(t=t.getParent());else{for(n.optimize();;){t=n.startContainer;if(n.startOffset!=(t.getChildCount?t.getChildCount():t.getLength())||!!t.isBlockBoundary())break;n.setStartAfter(t)}t=n.startContainer;if(t.type!=CKEDITOR.NODE_ELEMENT)return t.getParent();t=t.getChild(n.startOffset);if(!t||t.type!=CKEDITOR.NODE_ELEMENT)t=n.startContainer;else for(n=t.getFirst();n&&n.type==CKEDITOR.NODE_ELEMENT;)t=n,n=n.getFirst()}t=t.$}}return e.startElement=t?new CKEDITOR.dom.element(t):null},getSelectedElement:function(){var e=this._.cache;if(e.selectedElement!==void 0)return e.selectedElement;var t=this,n=CKEDITOR.tools.tryThese(function(){return t.getNative().createRange().item(0)},function(){for(var e=t.getRanges()[0].clone(),n,r,i=2;i&&(!(n=e.getEnclosedNode())||n.type!=CKEDITOR.NODE_ELEMENT||!b[n.getName()]||!(r=n));i--)e.shrink(CKEDITOR.SHRINK_ELEMENT);return r&&r.$});return e.selectedElement=n?new CKEDITOR.dom.element(n):null},getSelectedText:function(){var e=this._.cache;if(e.selectedText!==void 0)return e.selectedText;var t=this.getNative(),t=g?t.type=="Control"?"":t.createRange().text:t.toString();return e.selectedText=t},lock:function(){this.getRanges(),this.getStartElement(),this.getSelectedElement(),this.getSelectedText(),this._.cache.nativeSel=null,this.isLocked=1},unlock:function(e){if(this.isLocked){if(e)var t=this.getSelectedElement(),n=!t&&this.getRanges(),r=this.isFake;this.isLocked=0,this.reset(),e&&(e=t||n[0]&&n[0].getCommonAncestor())&&e.getAscendant("body",1)&&(r?this.fake(t):t?this.selectElement(t):this.selectRanges(n))}},reset:function(){this._.cache={},this.isFake=0;var e=this.root.editor;if(e&&e._.fakeSelection&&this.rev==e._.fakeSelection.rev){delete e._.fakeSelection;var t=e._.hiddenSelectionContainer;if(t){var n=e.checkDirty();e.fire("lockSnapshot"),t.remove(),e.fire("unlockSnapshot"),!n&&e.resetDirty()}delete e._.hiddenSelectionContainer}this.rev=y++},selectElement:function(e){var t=new CKEDITOR.dom.range(this.root);t.setStartBefore(e),t.setEndAfter(e),this.selectRanges([t])},selectRanges:function(e){var t=this.root.editor,t=t&&t._.hiddenSelectionContainer;this.reset();if(t)for(var t=this.root,n,r=0;r<e.length;++r)n=e[r],n.endContainer.equals(t)&&(n.endOffset=Math.min(n.endOffset,t.getChildCount()));if(e.length)if(this.isLocked){var s=CKEDITOR.document.getActive();this.unlock(),this.selectRanges(e),this.lock(),s&&!s.equals(this.root)&&s.focus()}else{var u;e:{var a,f;if(e.length==1&&!(f=e[0]).collapsed&&(u=f.getEnclosedNode())&&u.type==CKEDITOR.NODE_ELEMENT){f=f.clone(),f.shrink(CKEDITOR.SHRINK_ELEMENT,!0),(a=f.getEnclosedNode())&&a.type==CKEDITOR.NODE_ELEMENT&&(u=a);if(u.getAttribute("contenteditable")=="false")break e}u=void 0}if(u)this.fake(u);else{if(g){f=CKEDITOR.dom.walker.whitespaces(!0),a=/\ufeff|\u00a0/,t={table:1,tbody:1,tr:1},e.length>1&&(u=e[e.length-1],e[0].setEnd(u.endContainer,u.endOffset)),u=e[0];var e=u.collapsed,l,c,h;if((n=u.getEnclosedNode())&&n.type==CKEDITOR.NODE_ELEMENT&&n.getName()in b&&(!n.is("a")||!n.getText()))try{h=n.$.createControlRange(),h.addElement(n.$),h.select();return}catch(p){}if(u.startContainer.type==CKEDITOR.NODE_ELEMENT&&u.startContainer.getName()in t||u.endContainer.type==CKEDITOR.NODE_ELEMENT&&u.endContainer.getName()in t)u.shrink(CKEDITOR.NODE_ELEMENT,!0),e=u.collapsed;h=u.createBookmark(),t=h.startNode,e||(s=h.endNode),h=u.document.$.body.createTextRange(),h.moveToElementText(t.$),h.moveStart("character",1),s?(a=u.document.$.body.createTextRange(),a.moveToElementText(s.$),h.setEndPoint("EndToEnd",a),h.moveEnd("character",-1)):(l=t.getNext(f),c=t.hasAscendant("pre"),l=!(l&&l.getText&&l.getText().match(a))&&(c||!t.hasPrevious()||t.getPrevious().is&&t.getPrevious().is("br")),c=u.document.createElement("span"),c.setHtml("&#65279;"),c.insertBefore(t),l&&u.document.createText("﻿").insertBefore(t)),u.setStartBefore(t),t.remove(),e?(l?(h.moveStart("character",-1),h.select(),u.document.$.selection.clear()):h.select(),u.moveToPosition(c,CKEDITOR.POSITION_BEFORE_START),c.remove()):(u.setEndBefore(s),s.remove(),h.select())}else{s=this.getNative();if(!s)return;this.removeAllRanges();for(h=0;h<e.length;h++){if(h<e.length-1){l=e[h],c=e[h+1],a=l.clone(),a.setStart(l.endContainer,l.endOffset),a.setEnd(c.startContainer,c.startOffset);if(!a.collapsed){a.shrink(CKEDITOR.NODE_ELEMENT,!0),u=a.getCommonAncestor(),a=a.getEnclosedNode();if(u.isReadOnly()||a&&a.isReadOnly()){c.setStart(l.startContainer,l.startOffset),e.splice(h--,1);continue}}}u=e[h],c=this.document.$.createRange(),u.collapsed&&CKEDITOR.env.webkit&&i(u)&&(l=this.root,o(l,!1),a=l.getDocument().createText("​"),l.setCustomData("cke-fillingChar",a),u.insertNode(a),(l=a.getNext())&&!a.getPrevious()&&l.type==CKEDITOR.NODE_ELEMENT&&l.getName()=="br"?(o(this.root),u.moveToPosition(l,CKEDITOR.POSITION_BEFORE_START)):u.moveToPosition(a,CKEDITOR.POSITION_AFTER_END)),c.setStart(u.startContainer.$,u.startOffset);try{c.setEnd(u.endContainer.$,u.endOffset)}catch(d){if(!(d.toString().indexOf("NS_ERROR_ILLEGAL_VALUE")>=0))throw d;u.collapse(1),c.setEnd(u.endContainer.$,u.endOffset)}s.addRange(c)}}this.reset(),this.root.fire("selectionchange")}}},fake:function(e){var t=this.root.editor;this.reset(),l(t);var n=this._.cache,r=new CKEDITOR.dom.range(this.root);r.setStartBefore(e),r.setEndAfter(e),n.ranges=new CKEDITOR.dom.rangeList(r),n.selectedElement=n.startElement=e,n.type=CKEDITOR.SELECTION_ELEMENT,n.selectedText=n.nativeSel=null,this.isFake=1,this.rev=y++,t._.fakeSelection=this,this.root.fire("selectionchange")},isHidden:function(){var e=this.getCommonAncestor();return e&&e.type==CKEDITOR.NODE_TEXT&&(e=e.getParent()),!!e&&!!e.data("cke-hidden-sel")},createBookmarks:function(e){return e=this.getRanges().createBookmarks(e),this.isFake&&(e.isFake=1),e},createBookmarks2:function(e){return e=this.getRanges().createBookmarks2(e),this.isFake&&(e.isFake=1),e},selectBookmarks:function(e){for(var t=[],n,r=0;r<e.length;r++){var i=new CKEDITOR.dom.range(this.root);i.moveToBookmark(e[r]),t.push(i)}if(e.isFake){n=t[0].getEnclosedNode();if(!n||n.type!=CKEDITOR.NODE_ELEMENT)e.isFake=0}return e.isFake?this.fake(n):this.selectRanges(t),this},getCommonAncestor:function(){var e=this.getRanges();return e.length?e[0].startContainer.getCommonAncestor(e[e.length-1].endContainer):null},scrollIntoView:function(){this.type!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView()},removeAllRanges:function(){if(this.getType()!=CKEDITOR.SELECTION_NONE){var e=this.getNative();try{e&&e[g?"empty":"removeAllRanges"]()}catch(t){}this.reset()}}}}(),"use strict",CKEDITOR.STYLE_BLOCK=1,CKEDITOR.STYLE_INLINE=2,CKEDITOR.STYLE_OBJECT=3,function(){function e(e,t){for(var n,r;e=e.getParent();){if(e.equals(t))break;if(e.getAttribute("data-nostyle"))n=e;else if(!r){var i=e.getAttribute("contentEditable");i=="false"?n=e:i=="true"&&(r=1)}}return n}function t(n){var i=n.document;if(n.collapsed)i=m(this,i),n.insertNode(i),n.moveToPosition(i,CKEDITOR.POSITION_BEFORE_END);else{var s=this.element,o=this._.definition,u,a=o.ignoreReadonly,f=a||o.includeReadonly;f==null&&(f=n.root.getCustomData("cke_includeReadonly"));var l=CKEDITOR.dtd[s];l||(u=!0,l=CKEDITOR.dtd.span),n.enlarge(CKEDITOR.ENLARGE_INLINE,1),n.trim();var c=n.createBookmark(),h=c.startNode,d=c.endNode,v=h,g;if(!a){var y=n.getCommonAncestor(),a=e(h,y),y=e(d,y);a&&(v=a.getNextSourceNode(!0)),y&&(d=y)}for(v.getPosition(d)==CKEDITOR.POSITION_FOLLOWING&&(v=0);v;){a=!1;if(v.equals(d))v=null,a=!0;else{var b=v.type==CKEDITOR.NODE_ELEMENT?v.getName():null,y=b&&v.getAttribute("contentEditable")=="false",w=b&&v.getAttribute("data-nostyle");if(b&&v.data("cke-bookmark")){v=v.getNextSourceNode(!0);continue}if(y&&f&&CKEDITOR.dtd.$block[b])for(var E=v,S=r(E),x=void 0,T=S.length,N=0,E=T&&new CKEDITOR.dom.range(E.getDocument());N<T;++N){var x=S[N],k=CKEDITOR.filter.instances[x.data("cke-filter")];if(k?k.check(this):1)E.selectNodeContents(x),t.call(this,E)}S=b?!l[b]||w?0:y&&!f?0:(v.getPosition(d)|L)==L&&(!o.childRule||o.childRule(v)):1;if(S)if((S=v.getParent())&&((S.getDtd()||CKEDITOR.dtd.span)[s]||u)&&(!o.parentRule||o.parentRule(S))){!g&&(!b||!CKEDITOR.dtd.$removeEmpty[b]||(v.getPosition(d)|L)==L)&&(g=n.clone(),g.setStartBefore(v)),b=v.type;if(b==CKEDITOR.NODE_TEXT||y||b==CKEDITOR.NODE_ELEMENT&&!v.getChildCount()){for(var b=v,O;(a=!b.getNext(C))&&(O=b.getParent(),l[O.getName()])&&(O.getPosition(h)|A)==A&&(!o.childRule||o.childRule(O));)b=O;g.setEndAfter(b)}}else a=!0;else a=!0;v=v.getNextSourceNode(w||y)}if(a&&g&&!g.collapsed){for(var a=m(this,i),y=a.hasAttributes(),w=g.getCommonAncestor(),b={},S={},x={},T={},M,_,D;a&&w;){if(w.getName()==s){for(M in o.attributes)!T[M]&&(D=w.getAttribute(_))&&(a.getAttribute(M)==D?S[M]=1:T[M]=1);for(_ in o.styles)!x[_]&&(D=w.getStyle(_))&&(a.getStyle(_)==D?b[_]=1:x[_]=1)}w=w.getParent()}for(M in S)a.removeAttribute(M);for(_ in b)a.removeStyle(_);y&&!a.hasAttributes()&&(a=null),a?(g.extractContents().appendTo(a),g.insertNode(a),p.call(this,a),a.mergeSiblings(),CKEDITOR.env.ie||a.$.normalize()):(a=new CKEDITOR.dom.element("span"),g.extractContents().appendTo(a),g.insertNode(a),p.call(this,a),a.remove(!0)),g=null}}n.moveToBookmark(c),n.shrink(CKEDITOR.SHRINK_TEXT),n.shrink(CKEDITOR.NODE_ELEMENT,!0)}}function n(e){function t(){for(var e=new CKEDITOR.dom.elementPath(r.getParent()),t=new CKEDITOR.dom.elementPath(f.getParent()),n=null,i=null,s=0;s<e.elements.length;s++){var o=e.elements[s];if(o==e.block||o==e.blockLimit)break;l.checkElementRemovable(o,!0)&&(n=o)}for(s=0;s<t.elements.length;s++){o=t.elements[s];if(o==t.block||o==t.blockLimit)break;l.checkElementRemovable(o,!0)&&(i=o)}i&&f.breakParent(i),n&&r.breakParent(n)}e.enlarge(CKEDITOR.ENLARGE_INLINE,1);var n=e.createBookmark(),r=n.startNode;if(e.collapsed){for(var i=new CKEDITOR.dom.elementPath(r.getParent(),e.root),s,o=0,u;o<i.elements.length&&(u=i.elements[o]);o++){if(u==i.block||u==i.blockLimit)break;if(this.checkElementRemovable(u)){var a;e.collapsed&&(e.checkBoundaryOfElement(u,CKEDITOR.END)||(a=e.checkBoundaryOfElement(u,CKEDITOR.START)))?(s=u,s.match=a?"start":"end"):(u.mergeSiblings(),u.is(this.element)?h.call(this,u):d(u,b(
this)[u.getName()]))}}if(s){u=r;for(o=0;;o++){a=i.elements[o];if(a.equals(s))break;if(a.match)continue;a=a.clone(),a.append(u),u=a}u[s.match=="start"?"insertBefore":"insertAfter"](s)}}else{var f=n.endNode,l=this;t();for(i=r;!i.equals(f);)s=i.getNextSourceNode(),i.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(i)&&(i.getName()==this.element?h.call(this,i):d(i,b(this)[i.getName()]),s.type==CKEDITOR.NODE_ELEMENT&&s.contains(r)&&(t(),s=r.getNext())),i=s}e.moveToBookmark(n),e.shrink(CKEDITOR.NODE_ELEMENT,!0)}function r(e){var t=[];return e.forEach(function(e){if(e.getAttribute("contenteditable")=="true")return t.push(e),!1},CKEDITOR.NODE_ELEMENT,!0),t}function i(e){var t=e.getEnclosedNode()||e.getCommonAncestor(!1,!0);(e=(new CKEDITOR.dom.elementPath(t,e.root)).contains(this.element,1))&&!e.isReadOnly()&&g(e,this)}function s(e){var t=e.getCommonAncestor(!0,!0);if(e=(new CKEDITOR.dom.elementPath(t,e.root)).contains(this.element,1)){var t=this._.definition,n=t.attributes;if(n)for(var r in n)e.removeAttribute(r,n[r]);if(t.styles)for(var i in t.styles)t.styles.hasOwnProperty(i)&&e.removeStyle(i)}}function o(e){var t=e.createBookmark(!0),n=e.createIterator();n.enforceRealBlocks=!0,this._.enterMode&&(n.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR);for(var r,i=e.document,s;r=n.getNextParagraph();)!r.isReadOnly()&&(n.activeFilter?n.activeFilter.check(this):1)&&(s=m(this,i,r),a(r,s));e.moveToBookmark(t)}function u(e){var t=e.createBookmark(1),n=e.createIterator();n.enforceRealBlocks=!0,n.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;for(var r,i;r=n.getNextParagraph();)this.checkElementRemovable(r)&&(r.is("pre")?((i=this._.enterMode==CKEDITOR.ENTER_BR?null:e.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))&&r.copyAttributes(i),a(r,i)):h.call(this,r));e.moveToBookmark(t)}function a(e,t){var n=!t;n&&(t=e.getDocument().createElement("div"),e.copyAttributes(t));var r=t&&t.is("pre"),i=e.is("pre"),s=!r&&i;if(r&&!i){i=t,(s=e.getBogus())&&s.remove(),s=e.getHtml(),s=l(s,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,""),s=s.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1"),s=s.replace(/([ \t\n\r]+|&nbsp;)/g," "),s=s.replace(/<br\b[^>]*>/gi,"\n");if(CKEDITOR.env.ie){var o=e.getDocument().createElement("div");o.append(i),i.$.outerHTML="<pre>"+s+"</pre>",i.copyAttributes(o.getFirst()),i=o.getFirst().remove()}else i.setHtml(s);t=i}else s?t=c(n?[e.getHtml()]:f(e),t):e.moveChildren(t);t.replace(e);if(r){var n=t,u;(u=n.getPrevious(k))&&u.type==CKEDITOR.NODE_ELEMENT&&u.is("pre")&&(r=l(u.getHtml(),/\n$/,"")+"\n\n"+l(n.getHtml(),/^\n/,""),CKEDITOR.env.ie?n.$.outerHTML="<pre>"+r+"</pre>":n.setHtml(r),u.remove())}else n&&v(t)}function f(e){var t=[];return l(e.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,function(e,t,n){return t+"</pre>"+n+"<pre>"}).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(e,n){t.push(n)}),t}function l(e,t,n){var r="",i="",e=e.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(e,t,n){return t&&(r=t),n&&(i=n),""});return r+e.replace(t,n)+i}function c(e,t){var n;e.length>1&&(n=new CKEDITOR.dom.documentFragment(t.getDocument()));for(var r=0;r<e.length;r++){var i=e[r],i=i.replace(/(\r\n|\r)/g,"\n"),i=l(i,/^[ \t]*\n/,""),i=l(i,/\n$/,""),i=l(i,/^[ \t]+|[ \t]+$/g,function(e,t){return e.length==1?"&nbsp;":t?" "+CKEDITOR.tools.repeat("&nbsp;",e.length-1):CKEDITOR.tools.repeat("&nbsp;",e.length-1)+" "}),i=i.replace(/\n/g,"<br>"),i=i.replace(/[ \t]{2,}/g,function(e){return CKEDITOR.tools.repeat("&nbsp;",e.length-1)+" "});if(n){var s=t.clone();s.setHtml(i),n.append(s)}else t.setHtml(i)}return n||t}function h(e,t){var n=this._.definition,r=n.attributes,n=n.styles,i=b(this)[e.getName()],s=CKEDITOR.tools.isEmpty(r)&&CKEDITOR.tools.isEmpty(n),o;for(o in r)(o!="class"&&!this._.definition.fullMatch||e.getAttribute(o)==w(o,r[o]))&&(!t||o.slice(0,5)!="data-")&&(s=e.hasAttribute(o),e.removeAttribute(o));for(var u in n)if(!this._.definition.fullMatch||e.getStyle(u)==w(u,n[u],true))s=s||!!e.getStyle(u),e.removeStyle(u);d(e,i,S[e.getName()]),s&&(this._.definition.alwaysRemoveElement?v(e,1):!CKEDITOR.dtd.$block[e.getName()]||this._.enterMode==CKEDITOR.ENTER_BR&&!e.hasAttributes()?v(e):e.renameNode(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))}function p(e){for(var t=b(this),n=e.getElementsByTag(this.element),r,i=n.count();--i>=0;)r=n.getItem(i),r.isReadOnly()||h.call(this,r,!0);for(var s in t)if(s!=this.element){n=e.getElementsByTag(s);for(i=n.count()-1;i>=0;i--)r=n.getItem(i),r.isReadOnly()||d(r,t[s])}}function d(e,t,n){if(t=t&&t.attributes)for(var r=0;r<t.length;r++){var i=t[r][0],s;if(s=e.getAttribute(i)){var o=t[r][1];(o===null||o.test&&o.test(s)||typeof o=="string"&&s==o)&&e.removeAttribute(i)}}n||v(e)}function v(e,t){if(!e.hasAttributes()||t)if(CKEDITOR.dtd.$block[e.getName()]){var n=e.getPrevious(k),r=e.getNext(k);n&&(n.type==CKEDITOR.NODE_TEXT||!n.isBlockBoundary({br:1}))&&e.append("br",1),r&&(r.type==CKEDITOR.NODE_TEXT||!r.isBlockBoundary({br:1}))&&e.append("br"),e.remove(!0)}else n=e.getFirst(),r=e.getLast(),e.remove(!0),n&&(n.type==CKEDITOR.NODE_ELEMENT&&n.mergeSiblings(),r&&!n.equals(r)&&r.type==CKEDITOR.NODE_ELEMENT&&r.mergeSiblings())}function m(e,t,n){var r;return r=e.element,r=="*"&&(r="span"),r=new CKEDITOR.dom.element(r,t),n&&n.copyAttributes(r),r=g(r,e),t.getCustomData("doc_processing_style")&&r.hasAttribute("id")?r.removeAttribute("id"):t.setCustomData("doc_processing_style",1),r}function g(e,t){var n=t._.definition,r=n.attributes,n=CKEDITOR.style.getStyleText(n);if(r)for(var i in r)e.setAttribute(i,r[i]);return n&&e.setAttribute("style",n),e}function y(e,t){for(var n in e)e[n]=e[n].replace(N,function(e,n){return t[n]})}function b(e){if(e._.overrides)return e._.overrides;var t=e._.overrides={},n=e._.definition.overrides;if(n){CKEDITOR.tools.isArray(n)||(n=[n]);for(var r=0;r<n.length;r++){var i=n[r],s,o;typeof i=="string"?s=i.toLowerCase():(s=i.element?i.element.toLowerCase():e.element,o=i.attributes),i=t[s]||(t[s]={});if(o){var i=i.attributes=i.attributes||[],u;for(u in o)i.push([u.toLowerCase(),o[u]])}}}return t}function w(e,t,n){var r=new CKEDITOR.dom.element("span");return r[n?"setStyle":"setAttribute"](e,t),r[n?"getStyle":"getAttribute"](e)}function E(e,t,n){for(var r=e.document,i=e.getRanges(),t=t?this.removeFromRange:this.applyToRange,s,o=i.createIterator();s=o.getNextRange();)t.call(this,s,n);e.selectRanges(i),r.removeCustomData("doc_processing_style")}var S={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},x={a:1,blockquote:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},T=/\s*(?:;\s*|$)/,N=/#\((.+?)\)/g,C=CKEDITOR.dom.walker.bookmark(0,1),k=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(e,t){if(typeof e.type=="string")return new CKEDITOR.style.customHandlers[e.type](e);var n=e.attributes;n&&n.style&&(e.styles=CKEDITOR.tools.extend({},e.styles,CKEDITOR.tools.parseCssText(n.style)),delete n.style),t&&(e=CKEDITOR.tools.clone(e),y(e.attributes,t),y(e.styles,t)),n=this.element=e.element?typeof e.element=="string"?e.element.toLowerCase():e.element:"*",this.type=e.type||(S[n]?CKEDITOR.STYLE_BLOCK:x[n]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE),typeof this.element=="object"&&(this.type=CKEDITOR.STYLE_OBJECT),this._={definition:e}},CKEDITOR.style.prototype={apply:function(e){if(e instanceof CKEDITOR.dom.document)return E.call(this,e.getSelection());if(this.checkApplicable(e.elementPath(),e)){var t=this._.enterMode;t||(this._.enterMode=e.activeEnterMode),E.call(this,e.getSelection(),0,e),this._.enterMode=t}},remove:function(e){if(e instanceof CKEDITOR.dom.document)return E.call(this,e.getSelection(),1);if(this.checkApplicable(e.elementPath(),e)){var t=this._.enterMode;t||(this._.enterMode=e.activeEnterMode),E.call(this,e.getSelection(),1,e),this._.enterMode=t}},applyToRange:function(e){return this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?t:this.type==CKEDITOR.STYLE_BLOCK?o:this.type==CKEDITOR.STYLE_OBJECT?i:null,this.applyToRange(e)},removeFromRange:function(e){return this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?n:this.type==CKEDITOR.STYLE_BLOCK?u:this.type==CKEDITOR.STYLE_OBJECT?s:null,this.removeFromRange(e)},applyToObject:function(e){g(e,this)},checkActive:function(e,t){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(e.block||e.blockLimit,!0,t);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var n=e.elements,r=0,i;r<n.length;r++){i=n[r];if(this.type!=CKEDITOR.STYLE_INLINE||i!=e.block&&i!=e.blockLimit){if(this.type==CKEDITOR.STYLE_OBJECT){var s=i.getName();if(!(typeof this.element=="string"?s==this.element:s in this.element))continue}if(this.checkElementRemovable(i,!0,t))return!0}}}return!1},checkApplicable:function(e,t,n){t&&t instanceof CKEDITOR.filter&&(n=t);if(n&&!n.check(this))return!1;switch(this.type){case CKEDITOR.STYLE_OBJECT:return!!e.contains(this.element);case CKEDITOR.STYLE_BLOCK:return!!e.blockLimit.getDtd()[this.element]}return!0},checkElementMatch:function(e,t){var n=this._.definition;if(!e||!n.ignoreReadonly&&e.isReadOnly())return!1;var r=e.getName();if(typeof this.element=="string"?r==this.element:r in this.element){if(!t&&!e.hasAttributes())return!0;if(r=n._AC)n=r;else{var r={},i=0,s=n.attributes;if(s)for(var o in s)i++,r[o]=s[o];if(o=CKEDITOR.style.getStyleText(n))r.style||i++,r.style=o;r._length=i,n=n._AC=r}if(!n._length)return!0;for(var u in n)if(u!="_length"){i=e.getAttribute(u)||"";if(u=="style")e:{r=n[u],typeof r=="string"&&(r=CKEDITOR.tools.parseCssText(r)),typeof i=="string"&&(i=CKEDITOR.tools.parseCssText(i,!0)),o=void 0;for(o in r)if(!(o in i)||i[o]!=r[o]&&r[o]!="inherit"&&i[o]!="inherit"){r=!1;break e}r=!0}else r=n[u]==i;if(r){if(!t)return!0}else if(t)return!1}if(t)return!0}return!1},checkElementRemovable:function(e,t,n){if(this.checkElementMatch(e,t,n))return!0;if(t=b(this)[e.getName()]){var r;if(!(t=t.attributes))return!0;for(n=0;n<t.length;n++){r=t[n][0];if(r=e.getAttribute(r)){var i=t[n][1];if(i===null)return!0;if(typeof i=="string"){if(r==i)return!0}else if(i.test(r))return!0}}}return!1},buildPreview:function(e){var t=this._.definition,n=[],r=t.element;r=="bdo"&&(r="span");var n=["<",r],i=t.attributes;if(i)for(var s in i)n.push(" ",s,'="',i[s],'"');return(i=CKEDITOR.style.getStyleText(t))&&n.push(' style="',i,'"'),n.push(">",e||t.name,"</",r,">"),n.join("")},getDefinition:function(){return this._.definition}},CKEDITOR.style.getStyleText=function(e){var t=e._ST;if(t)return t;var t=e.styles,n=e.attributes&&e.attributes.style||"",r="";n.length&&(n=n.replace(T,";"));for(var i in t){var s=t[i],o=(i+":"+s).replace(T,";");s=="inherit"?r+=o:n+=o}return n.length&&(n=CKEDITOR.tools.normalizeCssText(n,!0)),e._ST=n+r},CKEDITOR.style.customHandlers={},CKEDITOR.style.addCustomHandler=function(e){var t=function(e){this._={definition:e},this.setup&&this.setup(e)};return t.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.style.prototype),{assignedTo:CKEDITOR.STYLE_OBJECT},e,!0),this.customHandlers[e.type]=t};var L=CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED,A=CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED}(),CKEDITOR.styleCommand=function(e,t){this.requiredContent=this.allowedContent=this.style=e,CKEDITOR.tools.extend(this,t,!0)},CKEDITOR.styleCommand.prototype.exec=function(e){e.focus(),this.state==CKEDITOR.TRISTATE_OFF?e.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&e.removeStyle(this.style)},CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet"),CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet),CKEDITOR.loadStylesSet=function(e,t,n){CKEDITOR.stylesSet.addExternal(e,t,""),CKEDITOR.stylesSet.load(e,n)},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{attachStyleStateChange:function(e,t){var n=this._.styleStateChangeCallbacks;n||(n=this._.styleStateChangeCallbacks=[],this.on("selectionChange",function(e){for(var t=0;t<n.length;t++){var r=n[t],i=r.style.checkActive(e.data.path,this)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;r.fn.call(this,i)}})),n.push({style:e,fn:t})},applyStyle:function(e){e.apply(this)},removeStyle:function(e){e.remove(this)},getStylesSet:function(e){if(this._.stylesDefinitions)e(this._.stylesDefinitions);else{var t=this,n=t.config.stylesCombo_stylesSet||t.config.stylesSet;if(n===!1)e(null);else if(n instanceof Array)t._.stylesDefinitions=n,e(n);else{n||(n="default");var n=n.split(":"),r=n[0];CKEDITOR.stylesSet.addExternal(r,n[1]?n.slice(1).join(":"):CKEDITOR.getUrl("styles.js"),""),CKEDITOR.stylesSet.load(r,function(n){t._.stylesDefinitions=n[r],e(t._.stylesDefinitions)})}}}}),CKEDITOR.dom.comment=function(e,t){typeof e=="string"&&(e=(t?t.$:document).createComment(e)),CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"<!--"+this.$.nodeValue+"-->"}}),"use strict",function(){var e={},t={},n;for(n in CKEDITOR.dtd.$blockLimit)n in CKEDITOR.dtd.$list||(e[n]=1);for(n in CKEDITOR.dtd.$block)n in CKEDITOR.dtd.$blockLimit||n in CKEDITOR.dtd.$empty||(t[n]=1);CKEDITOR.dom.elementPath=function(n,r){var i=null,s=null,o=[],u=n,f,r=r||n.getDocument().getBody();do if(u.type==CKEDITOR.NODE_ELEMENT){o.push(u);if(!this.lastElement){this.lastElement=u;if(u.is(CKEDITOR.dtd.$object)||u.getAttribute("contenteditable")=="false")continue}if(u.equals(r))break;if(!s){f=u.getName(),u.getAttribute("contenteditable")=="true"?s=u:!i&&t[f]&&(i=u);if(e[f]){var l;if(l=!i){if(f=f=="div"){e:{f=u.getChildren(),l=0;for(var c=f.count();l<c;l++){var h=f.getItem(l);if(h.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[h.getName()]){f=!0;break e}}f=!1}f=!f}l=f}l?i=u:s=u}}}while(u=u.getParent());s||(s=r),this.block=i,this.blockLimit=s,this.root=r,this.elements=o}}(),CKEDITOR.dom.elementPath.prototype={compare:function(e){var t=this.elements,e=e&&e.elements;if(!e||t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0},contains:function(e,t,n){var r;typeof e=="string"&&(r=function(t){return t.getName()==e}),e instanceof CKEDITOR.dom.element?r=function(t){return t.equals(e)}:CKEDITOR.tools.isArray(e)?r=function(t){return CKEDITOR.tools.indexOf(e,t.getName())>-1}:typeof e=="function"?r=e:typeof e=="object"&&(r=function(t){return t.getName()in e});var i=this.elements,s=i.length;t&&s--,n&&(i=Array.prototype.slice.call(i,0),i.reverse());for(t=0;t<s;t++)if(r(i[t]))return i[t];return null},isContextFor:function(e){var t;return e in CKEDITOR.dtd.$block?(t=this.contains(CKEDITOR.dtd.$intermediate)||this.root.equals(this.block)&&this.block||this.blockLimit,!!t.getDtd()[e]):!0},direction:function(){return(this.block||this.blockLimit||this.root).getDirection(1)}},CKEDITOR.dom.text=function(e,t){typeof e=="string"&&(e=(t?t.$:document).createTextNode(e)),this.$=e},CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function(e){this.$.nodeValue=e},split:function(e){var t=this.$.parentNode,n=t.childNodes.length,r=this.getLength(),i=this.getDocument(),s=new CKEDITOR.dom.text(this.$.splitText(e),i);return t.childNodes.length==n&&(e>=r?(s=i.createText(""),s.insertAfter(this)):(e=i.createText(""),e.insertAfter(s),e.remove())),s},substring:function(e,t){return typeof t!="number"?this.$.nodeValue.substr(e):this.$.nodeValue.substring(e,t)}}),function(){function e(e,t,n){var r=e.serializable,i=t[n?"endContainer":"startContainer"],s=n?"endOffset":"startOffset",o=r?t.document.getById(e.startNode):e.startNode,e=r?t.document.getById(e.endNode):e.endNode;return i.equals(o.getPrevious())?(t.startOffset=t.startOffset-i.getLength()-e.getPrevious().getLength(),i=e.getNext()):i.equals(e.getPrevious())&&(t.startOffset=t.startOffset-i.getLength(),i=e.getNext()),i.equals(o.getParent())&&t[s]++,i.equals(e.getParent())&&t[s]++,t[n?"endContainer":"startContainer"]=i,t}CKEDITOR.dom.rangeList=function(e){return e instanceof CKEDITOR.dom.rangeList?e:(e?e instanceof CKEDITOR.dom.range&&(e=[e]):e=[],CKEDITOR.tools.extend(e,t))};var t={createIterator:function(){var e=this,t=CKEDITOR.dom.walker.bookmark(),n=[],r;return{getNextRange:function(i){r=r===void 0?0:r+1;var s=e[r];if(s&&e.length>1){if(!r)for(var o=e.length-1;o>=0;o--)n.unshift(e[o].createBookmark(!0));if(i)for(var u=0;e[r+u+1];){for(var l=s.document,i=0,o=l.getById(n[u].endNode),l=l.getById(n[u+1].startNode);;){o=o.getNextSourceNode(!1);if(l.equals(o))i=1;else if(t(o)||o.type==CKEDITOR.NODE_ELEMENT&&o.isBlockBoundary())continue;break}if(!i)break;u++}for(s.moveToBookmark(n.shift());u--;)o=e[++r],o.moveToBookmark(n.shift()),s.setEnd(o.endContainer,o.endOffset)}return s}}},createBookmarks:function(t){for(var n=[],r,i=0;i<this.length;i++){n.push(r=this[i].createBookmark(t,!0));for(var s=i+1;s<this.length;s++)this[s]=e(r,this[s]),this[s]=e(r,this[s],!0)}return n},createBookmarks2:function(e){for(var t=[],n=0;n<this.length;n++)t.push(this[n].createBookmark2(e));return t},moveToBookmarks:function(e){for(var t=0;t<this.length;t++)this[t].moveToBookmark(e[t])}}}(),function(){function e(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1]||"skins/"+CKEDITOR.skinName.split(",")[0]+"/")}function t(t){var n=CKEDITOR.skin["ua_"+t],r=CKEDITOR.env;if(n)for(var n=n.split(",").sort(function(e,t){return e>t?-1:1}),i=0,s;i<n.length;i++){s=n[i],r.ie&&(s.replace(/^ie/,"")==r.version||r.quirks&&s=="iequirks")&&(s="ie");if(r[s]){t+="_"+n[i];break}}return CKEDITOR.getUrl(e()+t+".css")}function n(e,n){s[e]||(CKEDITOR.document.appendStyleSheet(t(e)),s[e]=1),n&&n()}function r(e){var t=e.getById(o);return t||(t=e.getHead().append("style"),t.setAttribute("id",o),t.setAttribute("type","text/css")),t}function i(e,t,n){var r,i,s;if(CKEDITOR.env.webkit){t=t.split("}").slice(0,-1);for(i=0;i<t.length;i++)t[i]=t[i].split("{")}for(var o=0;o<e.length;o++)if(CKEDITOR.env.webkit)for(i=0;i<t.length;i++){s=t[i][1];for(r=0;r<n.length;r++)s=s.replace(n[r][0],n[r][1]);e[o].$.sheet.addRule(t[i][0],s)}else{s=t;for(r=0;r<n.length;r++)s=s.replace(n[r][0],n[r][1]);CKEDITOR.env.ie&&CKEDITOR.env.version<11?e[o].$.styleSheet.cssText=e[o].$.styleSheet.cssText+s:e[o].$.innerHTML=e[o].$.innerHTML+s}}var s={};CKEDITOR.skin={path:e,loadPart:function(t,r){CKEDITOR.skin.name!=CKEDITOR.skinName.split(",")[0]?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(e()+"skin.js"),function(){n(t,r)}):n(t,r)},getPath:function(e){return CKEDITOR.getUrl(t(e))},icons:{},addIcon:function(e,t,n,r){e=e.toLowerCase(),this.icons[e]||(this.icons[e]={path:t,offset:n||0,bgsize:r||"16px"})},getIconStyle:function(e,t,n,r,i){var s;return e&&(e=e.toLowerCase(),t&&(s=this.icons[e+"-rtl"]),s||(s=this.icons[e])),e=n||s&&s.path||"",r=r||s&&s.offset,i=i||s&&s.bgsize||"16px",e&&"background-image:url("+CKEDITOR.getUrl(e)+");background-position:0 "+r+"px;background-size:"+i+";"}},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function(){return this.uiColor},setUiColor:function(e){var t=r(CKEDITOR.document);return(this.setUiColor=function(e){this.uiColor=e;var n=CKEDITOR.skin.chameleon,r="",s="";typeof n=="function"&&(r=n(this,"editor"),s=n(this,"panel")),e=[[a,e]],i([t],r,e),i(u,s,e)}).call(this,e)}});var o="cke_ui_color",u=[],a=/\$color/g;CKEDITOR.on("instanceLoaded",function(e){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var t=e.editor,e=function(e){e=(e.data[0]||e.data).element.getElementsByTag("iframe").getItem(0).getFrameDocument();if(!e.getById("cke_ui_color")){e=r(e),u.push(e);var n=t.getUiColor();n&&i([e],CKEDITOR.skin.chameleon(t,"panel"),[[a,n]])}};t.on("panelShow",e),t.on("menuShow",e),t.config.uiColor&&t.setUiColor(t.config.uiColor)}})}(),function(){if(CKEDITOR.env.webkit)CKEDITOR.env.hc=!1;else{var e=CKEDITOR.dom.element.createFromHtml('<div style="width:0;height:0;position:absolute;left:-10000px;border:1px solid;border-color:red blue"></div>',CKEDITOR.document);e.appendTo(CKEDITOR.document.getHead());try{var t=e.getComputedStyle("border-top-color"),n=e.getComputedStyle("border-right-color");CKEDITOR.env.hc=!!t&&t==n}catch(r){CKEDITOR.env.hc=!1}e.remove()}CKEDITOR.env.hc&&(CKEDITOR.env.cssClass=CKEDITOR.env.cssClass+" cke_hc"),CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}"),CKEDITOR.status="loaded",CKEDITOR.fireOnce("loaded");if(e=CKEDITOR._.pending){delete CKEDITOR._.pending;for(t=0;t<e.length;t++)CKEDITOR.editor.prototype.constructor.apply(e[t][0],e[t][1]),CKEDITOR.add(e[t][0])}}(),CKEDITOR.skin.name="moono",CKEDITOR.skin.ua_editor="ie,iequirks,ie7,ie8,gecko",CKEDITOR.skin.ua_dialog="ie,iequirks,ie7,ie8",CKEDITOR.skin.chameleon=function(){var e=function(){return function(e,t){for(var n=e.match(/[^#]./g),r=0;3>r;r++){var i=n,s=r,o;o=parseInt(n[r],16),o=("0"+(0>t?0|o*(1+t):0|o+(255-o)*t).toString(16)).slice(-2),i[s]=o}return"#"+n.join("")}}(),t=function(){var e=new CKEDITOR.template("background:#{to};background-image:linear-gradient(to bottom,{from},{to});filter:progid:DXImageTransform.Microsoft.gradient(gradientType=0,startColorstr='{from}',endColorstr='{to}');");return function(t,n){return e.output({from:t,to:n})}}(),n={editor:new CKEDITOR.template("{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ {defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_bottom [{defaultGradient}border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [{defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [{defaultGradient}outline-color:{defaultBorder};border-top-color:{defaultBorder};] {id} .cke_dialog_tab [{lightGradient}border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [{mediumGradient}] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} .cke_toolgroup [{lightGradient}border-color:{defaultBorder};] {id} a.cke_button_off:hover, {id} a.cke_button_off:focus, {id} a.cke_button_off:active [{mediumGradient}] {id} .cke_button_on [{ckeButtonOn}] {id} .cke_toolbar_separator [background-color: {ckeToolbarSeparator};] {id} .cke_combo_button [border-color:{defaultBorder};{lightGradient}] {id} a.cke_combo_button:hover, {id} a.cke_combo_button:focus, {id} .cke_combo_on a.cke_combo_button [border-color:{defaultBorder};{mediumGradient}] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover, {id} a.cke_path_item:focus, {id} a.cke_path_item:active [background-color:{elementsPathBg};] {id}.cke_panel [border-color:{defaultBorder};] "),panel:new CKEDITOR.template(".cke_panel_grouptitle [{lightGradient}border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:focus.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:focus.cke_colorauto, a:focus.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")};return function(r,i){var s=r.uiColor,s={id:"."+r.id,defaultBorder:e(s,-0.1),defaultGradient:t(e(s,.9),s),lightGradient:t(e(s,1),e(s,.7)),mediumGradient:t(e(s,.8),e(s,.5)),ckeButtonOn:t(e(s,.6),e(s,.7)),ckeResizer:e(s,-0.4),ckeToolbarSeparator:e(s,.5),ckeColorauto:e(s,.8),dialogBody:e(s,.7),dialogTabSelected:t("#FFFFFF","#FFFFFF"),dialogTabSelectedBorder:"#FFF",elementsPathColor:e(s,-0.6),elementsPathBg:s,menubuttonIcon:e(s,.5),menubuttonIconHover:e(s,.3)};return n[i].output(s).replace(/\[/g,"{").replace(/\]/g,"}")}}(),CKEDITOR.plugins.add("dialogui",{onLoad:function(){var e=function(e){this._||(this._={}),this._["default"]=this._.initValue=e["default"]||"",this._.required=e.required||!1;for(var t=[this._],n=1;n<arguments.length;n++)t.push(arguments[n]);return t.push(!0),CKEDITOR.tools.extend.apply(CKEDITOR.tools,t),this._},t={build:function(e,t,n){return new CKEDITOR.ui.dialog.textInput(e,t,n)}},n={build:function(e,t,n){return new CKEDITOR.ui.dialog[t.type](e,t,n)}},r={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(e){this.setValue(this.getInitValue(),e)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._["default"]},getInitValue:function(){return this._.initValue}},i=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(e,t){this._.domOnChangeRegistered||(e.on("load",function(){this.getInputElement().on("change",function(){e.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",t)}},!0),s=/^on([A-Z]\w+)/,o=function(e){for(var t in e)(s.test(t)||"title"==t||"type"==t)&&delete e[t];return e},u=function(e){e=e.data.getKeystroke(),e==CKEDITOR.SHIFT+CKEDITOR.ALT+36?this.setDirectionMarker("ltr"):e==CKEDITOR.SHIFT+CKEDITOR.ALT+35&&this.setDirectionMarker("rtl")};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(t,n,r,i){if(!(4>arguments.length)){var s=e.call(this,n);s.labelId=CKEDITOR.tools.getNextId()+"_label",this._.children=[];var o={role:n.role||"presentation"};n.includeLabel&&(o["aria-labelledby"]=s.labelId),CKEDITOR.ui.dialog.uiElement.call(this,t,n,r,"div",null,o,function(){var e=[],r=n.required?" cke_required":"";return n.labelLayout!="horizontal"?e.push('<label class="cke_dialog_ui_labeled_label'+r+'" ',' id="'+s.labelId+'"',s.inputId?' for="'+s.inputId+'"':"",(n.labelStyle?' style="'+n.labelStyle+'"':"")+">",n.label,"</label>",'<div class="cke_dialog_ui_labeled_content"',n.controlStyle?' style="'+n.controlStyle+'"':"",' role="presentation">',i.call(this,t,n),"</div>"):(r={type:"hbox",widths:n.widths,padding:0,children:[{type:"html",html:'<label class="cke_dialog_ui_labeled_label'+r+'" id="'+s.labelId+'" for="'+s.inputId+'"'+(n.labelStyle?' style="'+n.labelStyle+'"':"")+">"+CKEDITOR.tools.htmlEncode(n.label)+"</label>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content"'+(n.controlStyle?' style="'+n.controlStyle+'"':"")+">"+i.call(this,t,n)+"</span>"}]},CKEDITOR.dialog._.uiElementBuilders.hbox.build(t,r,e)),e.join("")})}},textInput:function(t,n,r){if(!(3>arguments.length)){e.call(this,n);var i=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",s={"class":"cke_dialog_ui_input_"+n.type,id:i,type:n.type};n.validate&&(this.validate=n.validate),n.maxLength&&(s.maxlength=n.maxLength),n.size&&(s.size=n.size),n.inputStyle&&(s.style=n.inputStyle);var o=this,a=!1;t.on("load",function(){o.getInputElement().on("keydown",function(e){e.data.getKeystroke()==13&&(a=!0)}),o.getInputElement().on("keyup",function(e){e.data.getKeystroke()==13&&a&&(t.getButton("ok")&&setTimeout(function(){t.getButton("ok").click()},0),a=!1),o.bidi&&u.call(o,e)},null,null,1e3)}),CKEDITOR.ui.dialog.labeledElement.call(this,t,n,r,function(){var e=['<div class="cke_dialog_ui_input_',n.type,'" role="presentation"'];n.width&&e.push('style="width:'+n.width+'" '),e.push("><input "),s["aria-labelledby"]=this._.labelId,this._.required&&(s["aria-required"]=this._.required);for(var t in s)e.push(t+'="'+s[t]+'" ');return e.push(" /></div>"),e.join("")})}},textarea:function(t,n,r){if(!(3>arguments.length)){e.call(this,n);var i=this,s=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",o={};n.validate&&(this.validate=n.validate),o.rows=n.rows||5,o.cols=n.cols||20,o["class"]="cke_dialog_ui_input_textarea "+(n["class"]||""),"undefined"!=typeof n.inputStyle&&(o.style=n.inputStyle),n.dir&&(o.dir=n.dir),i.bidi&&t.on("load",function(){i.getInputElement().on("keyup",u)},i),CKEDITOR.ui.dialog.labeledElement.call(this,t,n,r,function(){o["aria-labelledby"]=this._.labelId,this._.required&&(o["aria-required"]=this._.required);var e=['<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea id="',s,'" '],t;for(t in o)e.push(t+'="'+CKEDITOR.tools.htmlEncode(o[t])+'" ');return e.push(">",CKEDITOR.tools.htmlEncode(i._["default"]),"</textarea></div>"),e.join("")})}},checkbox:function(t,n,r){if(!(3>arguments.length)){var i=e.call(this,n,{"default":!!n["default"]});n.validate&&(this.validate=n.validate),CKEDITOR.ui.dialog.uiElement.call(this,t,n,r,"span",null,null,function(){var e=CKEDITOR.tools.extend({},n,{id:n.id?n.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},!0),r=[],s=CKEDITOR.tools.getNextId()+"_label",u={"class":"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":s};return o(e),n["default"]&&(u.checked="checked"),typeof e.inputStyle!="undefined"&&(e.style=e.inputStyle),i.checkbox=new CKEDITOR.ui.dialog.uiElement(t,e,r,"input",null,u),r.push(' <label id="',s,'" for="',u.id,'"'+(n.labelStyle?' style="'+n.labelStyle+'"':"")+">",CKEDITOR.tools.htmlEncode(n.label),"</label>"),r.join("")})}},radio:function(t,n,r){if(!(3>arguments.length)){e.call(this,n),this._["default"]||(this._["default"]=this._.initValue=n.items[0][1]),n.validate&&(this.validate=n.validate);var i=[],s=this;n.role="radiogroup",n.includeLabel=!0,CKEDITOR.ui.dialog.labeledElement.call(this,t,n,r,function(){for(var e=[],r=[],u=(n.id?n.id:CKEDITOR.tools.getNextId())+"_radio",l=0;l<n.items.length;l++){var h=n.items[l],d=h[2]!==void 0?h[2]:h[0],v=h[1]!==void 0?h[1]:h[0],m=CKEDITOR.tools.getNextId()+"_radio_input",g=m+"_label",m=CKEDITOR.tools.extend({},n,{id:m,title:null,type:null},!0),d=CKEDITOR.tools.extend({},m,{title:d},!0),y={type:"radio","class":"cke_dialog_ui_radio_input",name:u,value:v,"aria-labelledby":g},w=[];s._["default"]==v&&(y.checked="checked"),o(m),o(d),typeof m.inputStyle!="undefined"&&(m.style=m.inputStyle),m.keyboardFocusable=!0,i.push(new CKEDITOR.ui.dialog.uiElement(t,m,w,"input",null,y)),w.push(" "),new CKEDITOR.ui.dialog.uiElement(t,d,w,"label",null,{id:g,"for":y.id},h[0]),e.push(w.join(""))}return new CKEDITOR.ui.dialog.hbox(t,i,e,r),r.join("")}),this._.children=i}},button:function(t,n,r){if(arguments.length){"function"==typeof n&&(n=n(t.getParentEditor())),e.call(this,n,{disabled:n.disabled||!1}),CKEDITOR.event.implementOn(this);var i=this;t.on("load",function(){var e=this.getElement();(function(){e.on("click",function(e){i.click(),e.data.preventDefault()}),e.on("keydown",function(e){e.data.getKeystroke()in{32:1}&&(i.click(),e.data.preventDefault())})})(),e.unselectable()},this);var s=CKEDITOR.tools.extend({},n);delete s.style;var o=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,t,s,r,"a",null,{style:n.style,href:"javascript:void(0)",title:n.label,hidefocus:"true","class":n["class"],role:"button","aria-labelledby":o},'<span id="'+o+'" class="cke_dialog_ui_button">'+CKEDITOR.tools.htmlEncode(n.label)+"</span>")}},select:function(t,n,r){if(!(3>arguments.length)){var i=e.call(this,n);n.validate&&(this.validate=n.validate),i.inputId=CKEDITOR.tools.getNextId()+"_select",CKEDITOR.ui.dialog.labeledElement.call(this,t,n,r,function(){var e=CKEDITOR.tools.extend({},n,{id:n.id?n.id+"_select":CKEDITOR.tools.getNextId()+"_select"},!0),r=[],s=[],u={id:i.inputId,"class":"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};r.push('<div class="cke_dialog_ui_input_',n.type,'" role="presentation"'),n.width&&r.push('style="width:'+n.width+'" '),r.push(">"),n.size!==void 0&&(u.size=n.size),n.multiple!==void 0&&(u.multiple=n.multiple),o(e);for(var l=0,c;l<n.items.length&&(c=n.items[l]);l++)s.push('<option value="',CKEDITOR.tools.htmlEncode(c[1]!==void 0?c[1]:c[0]).replace(/"/g,"&quot;"),'" /> ',CKEDITOR.tools.htmlEncode(c[0]));return typeof e.inputStyle!="undefined"&&(e.style=e.inputStyle),i.select=new CKEDITOR.ui.dialog.uiElement(t,e,r,"select",null,u,s.join("")),r.push("</div>"),r.join("")})}},file:function(t,n,r){if(!(3>arguments.length)){void 0===n["default"]&&(n["default"]="");var i=CKEDITOR.tools.extend(e.call(this,n),{definition:n,buttons:[]});n.validate&&(this.validate=n.validate),t.on("load",function(){CKEDITOR.document.getById(i.frameId).getParent().addClass("cke_dialog_ui_input_file")}),CKEDITOR.ui.dialog.labeledElement.call(this,t,n,r,function(){i.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var e=
['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" role="presentation" id="',i.frameId,'" title="',n.label,'" src="javascript:void('];return e.push(CKEDITOR.env.ie?"(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})()":"0"),e.push(')"></iframe>'),e.join("")})}},fileButton:function(t,n,r){var i=this;if(!(3>arguments.length)){e.call(this,n),n.validate&&(this.validate=n.validate);var s=CKEDITOR.tools.extend({},n),o=s.onClick;s.className=(s.className?s.className+" ":"")+"cke_dialog_ui_button",s.onClick=function(e){var r=n["for"];if(!o||o.call(this,e)!==!1)t.getContentElement(r[0],r[1]).submit(),this.disable()},t.on("load",function(){t.getContentElement(n["for"][0],n["for"][1])._.buttons.push(i)}),CKEDITOR.ui.dialog.button.call(this,t,s,r)}},html:function(){var e=/^\s*<[\w:]+\s+([^>]*)?>/,t=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,n=/\/$/;return function(r,i,s){if(!(3>arguments.length)){var o=[],u=i.html;"<"!=u.charAt(0)&&(u="<span>"+u+"</span>");var f=i.focus;if(f){var l=this.focus;this.focus=function(){("function"==typeof f?f:l).call(this),this.fire("focus")},i.isFocusable&&(this.isFocusable=this.isFocusable),this.keyboardFocusable=!0}CKEDITOR.ui.dialog.uiElement.call(this,r,i,o,"span",null,null,""),o=o.join("").match(e),u=u.match(t)||["","",""],n.test(u[1])&&(u[1]=u[1].slice(0,-1),u[2]="/"+u[2]),s.push([u[1]," ",o[1]||"",u[2]].join(""))}}}(),fieldset:function(e,t,n,r,i){var s=i.label;this._={children:t},CKEDITOR.ui.dialog.uiElement.call(this,e,i,r,"fieldset",null,null,function(){var e=[];s&&e.push("<legend"+(i.labelStyle?' style="'+i.labelStyle+'"':"")+">"+s+"</legend>");for(var t=0;t<n.length;t++)e.push(n[t]);return e.join("")})}},!0),CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement,CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setLabel:function(e){var t=CKEDITOR.document.getById(this._.labelId);return 1>t.getChildCount()?(new CKEDITOR.dom.text(e,CKEDITOR.document)).appendTo(t):t.getChild(0).$.nodeValue=e,this},getLabel:function(){var e=CKEDITOR.document.getById(this._.labelId);return!e||1>e.getChildCount()?"":e.getChild(0).getText()},eventProcessors:i},!0),CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){return this._.disabled?!1:this.fire("click",{dialog:this._.dialog})},enable:function(){this._.disabled=!1;var e=this.getElement();e&&e.removeClass("cke_disabled")},disable:function(){this._.disabled=!0,this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(e,t){this.on("click",function(){t.apply(this,arguments)})}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},focus:function(){var e=this.selectParentTab();setTimeout(function(){var t=e.getInputElement();t&&t.$.focus()},0)},select:function(){var e=this.selectParentTab();setTimeout(function(){var t=e.getInputElement();t&&(t.$.focus(),t.$.select())},0)},accessKeyUp:function(){this.select()},setValue:function(e){if(this.bidi){var t=e&&e.charAt(0);(t="‪"==t?"ltr":"‫"==t?"rtl":null)&&(e=e.slice(1)),this.setDirectionMarker(t)}return e||(e=""),CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},getValue:function(){var e=CKEDITOR.ui.dialog.uiElement.prototype.getValue.call(this);if(this.bidi&&e){var t=this.getDirectionMarker();t&&(e=("ltr"==t?"‪":"‫")+e)}return e},setDirectionMarker:function(e){var t=this.getInputElement();e?t.setAttributes({dir:e,"data-cke-dir-marker":e}):this.getDirectionMarker()&&t.removeAttributes(["dir","data-cke-dir-marker"])},getDirectionMarker:function(){return this.getInputElement().data("cke-dir-marker")},keyboardFocusable:!0},r,!0),CKEDITOR.ui.dialog.textarea.prototype=new CKEDITOR.ui.dialog.textInput,CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(e,t,n){var r=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),i=this.getInputElement().$;return r.$.text=e,r.$.value=void 0===t||null===t?e:t,void 0===n||null===n?CKEDITOR.env.ie?i.add(r.$):i.add(r.$,null):i.add(r.$,n),this},remove:function(e){return this.getInputElement().$.remove(e),this},clear:function(){for(var e=this.getInputElement().$;0<e.length;)e.remove(0);return this},keyboardFocusable:!0},r,!0),CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(e,t){this.getInputElement().$.checked=e,!t&&this.fire("change",{value:e})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(e,t){return!CKEDITOR.env.ie||8<CKEDITOR.env.version?i.onChange.apply(this,arguments):(e.on("load",function(){var e=this._.checkbox.getElement();e.on("propertychange",function(t){t=t.data.$,"checked"==t.propertyName&&this.fire("change",{value:e.$.checked})},this)},this),this.on("change",t),null)}},keyboardFocusable:!0},r,!0),CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(e,t){for(var n=this._.children,r,i=0;i<n.length&&(r=n[i]);i++)r.getElement().$.checked=r.getValue()==e;!t&&this.fire("change",{value:e})},getValue:function(){for(var e=this._.children,t=0;t<e.length;t++)if(e[t].getElement().$.checked)return e[t].getValue();return null},accessKeyUp:function(){var e=this._.children,t;for(t=0;t<e.length;t++)if(e[t].getElement().$.checked){e[t].getElement().focus();return}e[0].getElement().focus()},eventProcessors:{onChange:function(e,t){return CKEDITOR.env.ie?(e.on("load",function(){for(var e=this._.children,t=this,n=0;n<e.length;n++)e[n].getElement().on("propertychange",function(e){e=e.data.$,"checked"==e.propertyName&&this.$.checked&&t.fire("change",{value:this.getAttribute("value")})})},this),this.on("change",t),null):i.onChange.apply(this,arguments)}}},r,!0),CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,r,{getInputElement:function(){var e=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return 0<e.$.forms.length?new CKEDITOR.dom.element(e.$.forms[0].elements[0]):this.getElement()},submit:function(){return this.getInputElement().getParent().$.submit(),this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(e){var t=/^on([A-Z]\w+)/,n,r=function(e,t,n,r){e.on("formLoaded",function(){e.getInputElement().on(n,r,e)})},i;for(i in e)if(n=i.match(t))this.eventProcessors[i]?this.eventProcessors[i].call(this,this._.dialog,e[i]):r(this,this._.dialog,n[1].toLowerCase(),e[i]);return this},reset:function(){function e(){n.$.open();var e="";r.size&&(e=r.size-(CKEDITOR.env.ie?7:0));var l=t.frameId+"_input";n.$.write(['<html dir="'+u+'" lang="'+a+'"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" dir="'+u+'" lang="'+a+'" action="',CKEDITOR.tools.htmlEncode(r.action),'"><label id="',t.labelId,'" for="',l,'" style="display:none">',CKEDITOR.tools.htmlEncode(r.label),'</label><input style="width:100%" id="',l,'" aria-labelledby="',t.labelId,'" type="file" name="',CKEDITOR.tools.htmlEncode(r.id||"cke_upload"),'" size="',CKEDITOR.tools.htmlEncode(0<e?e:""),'" /></form></body></html><script>',CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"","window.parent.CKEDITOR.tools.callFunction("+s+");","window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction("+o+")}","</script>"].join("")),n.$.close();for(e=0;e<i.length;e++)i[e].enable()}var t=this._,n=CKEDITOR.document.getById(t.frameId).getFrameDocument(),r=t.definition,i=t.buttons,s=this.formLoadedNumber,o=this.formUnloadNumber,u=t.dialog._.editor.lang.dir,a=t.dialog._.editor.langCode;s||(s=this.formLoadedNumber=CKEDITOR.tools.addFunction(function(){this.fire("formLoaded")},this),o=this.formUnloadNumber=CKEDITOR.tools.addFunction(function(){this.getInputElement().clearCustomData()},this),this.getDialog()._.editor.on("destroy",function(){CKEDITOR.tools.removeFunction(s),CKEDITOR.tools.removeFunction(o)})),CKEDITOR.env.gecko?setTimeout(e,500):e()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=""},eventProcessors:{onChange:function(e,t){this._.domOnChangeRegistered||(this.on("formLoaded",function(){this.getInputElement().on("change",function(){this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",t)}},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.fileButton.prototype=new CKEDITOR.ui.dialog.button,CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype),CKEDITOR.dialog.addUIElement("text",t),CKEDITOR.dialog.addUIElement("password",t),CKEDITOR.dialog.addUIElement("textarea",n),CKEDITOR.dialog.addUIElement("checkbox",n),CKEDITOR.dialog.addUIElement("radio",n),CKEDITOR.dialog.addUIElement("button",n),CKEDITOR.dialog.addUIElement("select",n),CKEDITOR.dialog.addUIElement("file",n),CKEDITOR.dialog.addUIElement("fileButton",n),CKEDITOR.dialog.addUIElement("html",n),CKEDITOR.dialog.addUIElement("fieldset",{build:function(e,t,n){for(var r=t.children,i,s=[],o=[],u=0;u<r.length&&(i=r[u]);u++){var a=[];s.push(a),o.push(CKEDITOR.dialog._.uiElementBuilders[i.type].build(e,i,a))}return new CKEDITOR.ui.dialog[t.type](e,o,s,n,t)}})}}),CKEDITOR.DIALOG_RESIZE_NONE=0,CKEDITOR.DIALOG_RESIZE_WIDTH=1,CKEDITOR.DIALOG_RESIZE_HEIGHT=2,CKEDITOR.DIALOG_RESIZE_BOTH=3,CKEDITOR.DIALOG_STATE_IDLE=1,CKEDITOR.DIALOG_STATE_BUSY=2,function(){function e(){for(var e=this._.tabIdList.length,t=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+e,n=t-1;n>t-e;n--)if(this._.tabs[this._.tabIdList[n%e]][0].$.offsetHeight)return this._.tabIdList[n%e];return null}function t(){for(var e=this._.tabIdList.length,t=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),n=t+1;n<t+e;n++)if(this._.tabs[this._.tabIdList[n%e]][0].$.offsetHeight)return this._.tabIdList[n%e];return null}function n(e,t){for(var n=e.$.getElementsByTagName("input"),r=0,i=n.length;r<i;r++){var s=new CKEDITOR.dom.element(n[r]);"text"==s.getAttribute("type").toLowerCase()&&(t?(s.setAttribute("value",s.getCustomData("fake_value")||""),s.removeCustomData("fake_value")):(s.setCustomData("fake_value",s.getAttribute("value")),s.setAttribute("value","")))}}function r(e,t){var n=this.getInputElement();n&&(e?n.removeAttribute("aria-invalid"):n.setAttribute("aria-invalid",!0)),e||(this.select?this.select():this.focus()),t&&alert(t),this.fire("validated",{valid:e,msg:t})}function i(){var e=this.getInputElement();e&&e.removeAttribute("aria-invalid")}function s(e){var t=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog",v).output({id:CKEDITOR.tools.getNextNumber(),editorId:e.id,langDir:e.lang.dir,langCode:e.langCode,editorDialogClass:"cke_editor_"+e.name.replace(/\./g,"\\.")+"_dialog",closeTitle:e.lang.common.close,hidpi:CKEDITOR.env.hidpi?"cke_hidpi":""})),n=t.getChild([0,0,0,0,0]),r=n.getChild(0),i=n.getChild(1);return e.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(n),CKEDITOR.env.ie&&!CKEDITOR.env.quirks&&!CKEDITOR.env.edge&&(e="javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())",CKEDITOR.dom.element.createFromHtml('<iframe frameBorder="0" class="cke_iframe_shim" src="'+e+'" tabIndex="-1"></iframe>').appendTo(n.getParent())),r.unselectable(),i.unselectable(),{element:t,parts:{dialog:t.getChild(0),title:r,close:i,tabs:n.getChild(2),contents:n.getChild([3,0,0,0]),footer:n.getChild([3,0,1,0])}}}function o(e,t,n){this.element=t,this.focusIndex=n,this.tabIndex=0,this.isFocusable=function(){return!t.getAttribute("disabled")&&t.isVisible()},this.focus=function(){e._.currentFocusIndex=this.focusIndex,this.element.focus()},t.on("keydown",function(e){e.data.getKeystroke()in{32:1,13:1}&&this.fire("click")}),t.on("focus",function(){this.fire("mouseover")}),t.on("blur",function(){this.fire("mouseout")})}function u(e){function t(){e.layout()}var n=CKEDITOR.document.getWindow();n.on("resize",t),e.on("hide",function(){n.removeListener("resize",t)})}function a(e,t){this._={dialog:e},CKEDITOR.tools.extend(this,t)}function f(e){function t(t){var n=e.getSize(),a=CKEDITOR.document.getWindow().getViewPaneSize(),f=t.data.$.screenX,l=t.data.$.screenY,c=f-r.x,h=l-r.y;r={x:f,y:l},i.x+=c,i.y+=h,e.move(i.x+u[3]<o?-u[3]:i.x-u[1]>a.width-n.width-o?a.width-n.width+("rtl"==s.lang.dir?0:u[1]):i.x,i.y+u[0]<o?-u[0]:i.y-u[2]>a.height-n.height-o?a.height-n.height+u[2]:i.y,1),t.data.preventDefault()}function n(){CKEDITOR.document.removeListener("mousemove",t),CKEDITOR.document.removeListener("mouseup",n);if(CKEDITOR.env.ie6Compat){var e=x.getChild(0).getFrameDocument();e.removeListener("mousemove",t),e.removeListener("mouseup",n)}}var r=null,i=null,s=e.getParentEditor(),o=s.config.dialog_magnetDistance,u=CKEDITOR.skin.margins||[0,0,0,0];"undefined"==typeof o&&(o=20),e.parts.title.on("mousedown",function(s){r={x:s.data.$.screenX,y:s.data.$.screenY},CKEDITOR.document.on("mousemove",t),CKEDITOR.document.on("mouseup",n),i=e.getPosition();if(CKEDITOR.env.ie6Compat){var o=x.getChild(0).getFrameDocument();o.on("mousemove",t),o.on("mouseup",n)}s.data.preventDefault()},e)}function l(e){function r(r){var i="rtl"==u.lang.dir,h=c.width,p=c.height,d=h+(r.data.$.screenX-t)*(i?-1:1)*(e._.moved?1:2),v=p+(r.data.$.screenY-n)*(e._.moved?1:2),m=e._.element.getFirst(),m=i&&m.getComputedStyle("right"),g=e.getPosition();g.y+v>l.height&&(v=l.height-g.y),(i?m:g.x)+d>l.width&&(d=l.width-(i?m:g.x));if(o==CKEDITOR.DIALOG_RESIZE_WIDTH||o==CKEDITOR.DIALOG_RESIZE_BOTH)h=Math.max(s.minWidth||0,d-a);if(o==CKEDITOR.DIALOG_RESIZE_HEIGHT||o==CKEDITOR.DIALOG_RESIZE_BOTH)p=Math.max(s.minHeight||0,v-f);e.resize(h,p),e._.moved||e.layout(),r.data.preventDefault()}function i(){CKEDITOR.document.removeListener("mouseup",i),CKEDITOR.document.removeListener("mousemove",r),h&&(h.remove(),h=null);if(CKEDITOR.env.ie6Compat){var e=x.getChild(0).getFrameDocument();e.removeListener("mouseup",i),e.removeListener("mousemove",r)}}var t,n,s=e.definition,o=s.resizable;if(o!=CKEDITOR.DIALOG_RESIZE_NONE){var u=e.getParentEditor(),a,f,l,c,h,p=CKEDITOR.tools.addFunction(function(s){c=e.getSize();var o=e.parts.contents;o.$.getElementsByTagName("iframe").length&&(h=CKEDITOR.dom.element.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>'),o.append(h)),f=c.height-e.parts.contents.getSize("height",!(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.quirks)),a=c.width-e.parts.contents.getSize("width",1),t=s.screenX,n=s.screenY,l=CKEDITOR.document.getWindow().getViewPaneSize(),CKEDITOR.document.on("mousemove",r),CKEDITOR.document.on("mouseup",i),CKEDITOR.env.ie6Compat&&(o=x.getChild(0).getFrameDocument(),o.on("mousemove",r),o.on("mouseup",i)),s.preventDefault&&s.preventDefault()});e.on("load",function(){var t="";o==CKEDITOR.DIALOG_RESIZE_WIDTH?t=" cke_resizer_horizontal":o==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(t=" cke_resizer_vertical"),t=CKEDITOR.dom.element.createFromHtml('<div class="cke_resizer'+t+" cke_resizer_"+u.lang.dir+'" title="'+CKEDITOR.tools.htmlEncode(u.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+p+', event )">'+("ltr"==u.lang.dir?"◢":"◣")+"</div>"),e.parts.footer.append(t,1)}),u.on("destroy",function(){CKEDITOR.tools.removeFunction(p)})}}function c(e){e.data.preventDefault(1)}function h(e){var t=CKEDITOR.document.getWindow(),n=e.config,r=n.dialog_backgroundCoverColor||"white",i=n.dialog_backgroundCoverOpacity,s=n.baseFloatZIndex,n=CKEDITOR.tools.genKey(r,i,s),o=S[n];o?o.show():(s=['<div tabIndex="-1" style="position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",s,"; top: 0px; left: 0px; ",CKEDITOR.env.ie6Compat?"":"background-color: "+r,'" class="cke_dialog_background_cover">'],CKEDITOR.env.ie6Compat&&(r="<html><body style=\\'background-color:"+r+";\\'></body></html>",s.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'),s.push("void((function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.write( '"+r+"' );document.close();")+"})())"),s.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')),s.push("</div>"),o=CKEDITOR.dom.element.createFromHtml(s.join("")),o.setOpacity(void 0!==i?i:.5),o.on("keydown",c),o.on("keypress",c),o.on("keyup",c),o.appendTo(CKEDITOR.document.getBody()),S[n]=o),e.focusManager.add(o),x=o;var e=function(){var e=t.getViewPaneSize();o.setStyles({width:e.width+"px",height:e.height+"px"})},u=function(){var e=t.getScrollPosition(),n=CKEDITOR.dialog._.currentTop;o.setStyles({left:e.x+"px",top:e.y+"px"});if(n)do e=n.getPosition(),n.move(e.x,e.y);while(n=n._.parentDialog)};E=e,t.on("resize",e),e(),(!CKEDITOR.env.mac||!CKEDITOR.env.webkit)&&o.focus();if(CKEDITOR.env.ie6Compat){var a=function(){u(),arguments.callee.prevScrollHandler.apply(this,arguments)};t.$.setTimeout(function(){a.prevScrollHandler=window.onscroll||function(){},window.onscroll=a},0),u()}}function p(e){x&&(e.focusManager.remove(x),e=CKEDITOR.document.getWindow(),x.hide(),e.removeListener("resize",E),CKEDITOR.env.ie6Compat&&e.$.setTimeout(function(){window.onscroll=window.onscroll&&window.onscroll.prevScrollHandler||null},0),E=null)}var d=CKEDITOR.tools.cssLength,v='<div class="cke_reset_all {editorId} {editorDialogClass} {hidpi}" dir="{langDir}" lang="{langCode}" role="dialog" aria-labelledby="cke_dialog_title_{id}"><table class="cke_dialog '+CKEDITOR.env.cssClass+' cke_{langDir}" style="position:absolute" role="presentation"><tr><td role="presentation"><div class="cke_dialog_body" role="presentation"><div id="cke_dialog_title_{id}" class="cke_dialog_title" role="presentation"></div><a id="cke_dialog_close_button_{id}" class="cke_dialog_close_button" href="javascript:void(0)" title="{closeTitle}" role="button"><span class="cke_label">X</span></a><div id="cke_dialog_tabs_{id}" class="cke_dialog_tabs" role="tablist"></div><table class="cke_dialog_contents" role="presentation"><tr><td id="cke_dialog_contents_{id}" class="cke_dialog_contents_body" role="presentation"></td></tr><tr><td id="cke_dialog_footer_{id}" class="cke_dialog_footer" role="presentation"></td></tr></table></div></td></tr></table></div>';CKEDITOR.dialog=function(n,o){function u(){var e=x._.focusList;e.sort(function(e,t){return e.tabIndex!=t.tabIndex?t.tabIndex-e.tabIndex:e.focusIndex-t.focusIndex});for(var t=e.length,n=0;n<t;n++)e[n].focusIndex=n}function a(e){var t=x._.focusList,e=e||0;if(!(1>t.length)){var n=x._.currentFocusIndex;x._.tabBarMode&&0>e&&(n=0);try{t[n].getInputElement().$.blur()}catch(r){}var i=n,s=1<x._.pageCount;do{i+=e;if(s&&!x._.tabBarMode&&(i==t.length||-1==i)){x._.tabBarMode=!0,x._.tabs[x._.currentTabId][0].focus(),x._.currentFocusIndex=-1;return}i=(i+t.length)%t.length;if(i==n)break}while(e&&!t[i].isFocusable());t[i].focus(),"text"==t[i].type&&t[i].select()}}function c(r){if(x==CKEDITOR.dialog._.currentTop){var i=r.data.getKeystroke(),s="rtl"==n.lang.dir,o=[37,38,39,40];b=E=0;if(9==i||i==CKEDITOR.SHIFT+9)a(i==CKEDITOR.SHIFT+9?-1:1),b=1;else if(i==CKEDITOR.ALT+121&&!x._.tabBarMode&&1<x.getPageCount())x._.tabBarMode=!0,x._.tabs[x._.currentTabId][0].focus(),x._.currentFocusIndex=-1,b=1;else if(-1!=CKEDITOR.tools.indexOf(o,i)&&x._.tabBarMode)i=-1!=CKEDITOR.tools.indexOf([s?39:37,38],i)?e.call(x):t.call(x),x.selectPage(i),x._.tabs[i][0].focus(),b=1;else if(13!=i&&32!=i||!x._.tabBarMode)if(13==i)i=r.data.getTarget(),!i.is("a","button","select","textarea")&&(!i.is("input")||"button"!=i.$.type)&&((i=this.getButton("ok"))&&CKEDITOR.tools.setTimeout(i.click,0,i),b=1),E=1;else{if(27!=i)return;(i=this.getButton("cancel"))?CKEDITOR.tools.setTimeout(i.click,0,i):!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),E=1}else this.selectPage(this._.currentTabId),this._.tabBarMode=!1,this._.currentFocusIndex=-1,a(1),b=1;h(r)}}function h(e){b?e.data.preventDefault(1):E&&e.data.stopPropagation()}var p=CKEDITOR.dialog._.dialogDefinitions[o],d=CKEDITOR.tools.clone(m),v=n.config.dialog_buttonsOrder||"OS",g=n.lang.dir,y={},b,E;("OS"==v&&CKEDITOR.env.mac||"rtl"==v&&"ltr"==g||"ltr"==v&&"rtl"==g)&&d.buttons.reverse(),p=CKEDITOR.tools.extend(p(n),d),p=CKEDITOR.tools.clone(p),p=new w(this,p),d=s(n),this._={editor:n,element:d.element,name:o,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1},this.parts=d.parts,CKEDITOR.tools.setTimeout(function(){n.fire("ariaWidget",this.parts.contents)},0,this),d={position:CKEDITOR.env.ie6Compat?"absolute":"fixed",top:0,visibility:"hidden"},d["rtl"==g?"right":"left"]=0,this.parts.dialog.setStyles(d),CKEDITOR.event.call(this),this.definition=p=CKEDITOR.fire("dialogDefinition",{name:o,definition:p},n).definition;if(!("removeDialogTabs"in n._)&&n.config.removeDialogTabs){d=n.config.removeDialogTabs.split(";");for(g=0;g<d.length;g++)if(v=d[g].split(":"),2==v.length){var S=v[0];y[S]||(y[S]=[]),y[S].push(v[1])}n._.removeDialogTabs=y}if(n._.removeDialogTabs&&(y=n._.removeDialogTabs[o]))for(g=0;g<y.length;g++)p.removeContents(y[g]);p.onLoad&&this.on("load",p.onLoad),p.onShow&&this.on("show",p.onShow),p.onHide&&this.on("hide",p.onHide),p.onOk&&this.on("ok",function(e){n.fire("saveSnapshot"),setTimeout(function(){n.fire("saveSnapshot")},0),!1===p.onOk.call(this,e)&&(e.data.hide=!1)}),this.state=CKEDITOR.DIALOG_STATE_IDLE,p.onCancel&&this.on("cancel",function(e){!1===p.onCancel.call(this,e)&&(e.data.hide=!1)});var x=this,T=function(e){var t=x._.contents,n=!1,r;for(r in t)for(var i in t[r])if(n=e.call(this,t[r][i]))return};this.on("ok",function(e){T(function(t){if(t.validate){var n=t.validate(this),i="string"==typeof n||!1===n;return i&&(e.data.hide=!1,e.stop()),r.call(t,!i,"string"==typeof n?n:void 0),i}})},this,null,0),this.on("cancel",function(e){T(function(t){if(t.isChanged())return!n.config.dialog_noConfirmCancel&&!confirm(n.lang.common.confirmCancel)&&(e.data.hide=!1),!0})},this,null,0),this.parts.close.on("click",function(e){!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),e.data.preventDefault()},this),this.changeFocus=a;var N=this._.element;n.focusManager.add(N,1),this.on("show",function(){N.on("keydown",c,this),CKEDITOR.env.gecko&&N.on("keypress",h,this)}),this.on("hide",function(){N.removeListener("keydown",c),CKEDITOR.env.gecko&&N.removeListener("keypress",h),T(function(e){i.apply(e)})}),this.on("iframeAdded",function(e){(new CKEDITOR.dom.document(e.data.iframe.$.contentWindow.document)).on("keydown",c,this,null,0)}),this.on("show",function(){u();var e=1<x._.pageCount;n.config.dialog_startupFocusTab&&e?(x._.tabBarMode=!0,x._.tabs[x._.currentTabId][0].focus(),x._.currentFocusIndex=-1):this._.hasFocus||(this._.currentFocusIndex=e?-1:this._.focusList.length-1,p.onFocus?(e=p.onFocus.call(this))&&e.focus():a(1))},this,null,4294967295),CKEDITOR.env.ie6Compat&&this.on("load",function(){var e=this.getElement(),t=e.getFirst();t.remove(),t.appendTo(e)},this),f(this),l(this),(new CKEDITOR.dom.text(p.title,CKEDITOR.document)).appendTo(this.parts.title);for(g=0;g<p.contents.length;g++)(y=p.contents[g])&&this.addPage(y);this.parts.tabs.on("click",function(e){var t=e.data.getTarget();t.hasClass("cke_dialog_tab")&&(t=t.$.id,this.selectPage(t.substring(4,t.lastIndexOf("_"))),this._.tabBarMode&&(this._.tabBarMode=!1,this._.currentFocusIndex=-1,a(1)),e.data.preventDefault())},this),g=[],y=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:p.buttons},g).getChild(),this.parts.footer.setHtml(g.join(""));for(g=0;g<y.length;g++)this._.buttons[y[g].id]=y[g]},CKEDITOR.dialog.prototype={destroy:function(){this.hide(),this._.element.remove()},resize:function(){return function(e,t){if(!this._.contentSize||this._.contentSize.width!=e||this._.contentSize.height!=t)CKEDITOR.dialog.fire("resize",{dialog:this,width:e,height:t},this._.editor),this.fire("resize",{width:e,height:t},this._.editor),this.parts.contents.setStyles({width:e+"px",height:t+"px"}),"rtl"==this._.editor.lang.dir&&this._.position&&(this._.position.x=CKEDITOR.document.getWindow().getViewPaneSize().width-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)),this._.contentSize={width:e,height:t}}}(),getSize:function(){var e=this._.element.getFirst();return{width:e.$.offsetWidth||0,height:e.$.offsetHeight||0}},move:function(e,t,n){var r=this._.element.getFirst(),i="rtl"==this._.editor.lang.dir,s="fixed"==r.getComputedStyle("position");CKEDITOR.env.ie&&r.setStyle("zoom","100%");if(!s||!this._.position||this._.position.x!=e||this._.position.y!=t)this._.position={x:e,y:t},s||(s=CKEDITOR.document.getWindow().getScrollPosition(),e+=s.x,t+=s.y),i&&(s=this.getSize(),e=CKEDITOR.document.getWindow().getViewPaneSize().width-s.width-e),t={top:(0<t?t:0)+"px"},t[i?"right":"left"]=(0<e?e:0)+"px",r.setStyles(t),n&&(this._.moved=1)},getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var e=this._.element,t=this.definition;!e.getParent()||!e.getParent().equals(CKEDITOR.document.getBody())?e.appendTo(CKEDITOR.document.getBody()):e.setStyle("display","block"),this.resize(this._.contentSize&&this._.contentSize.width||t.width||t.minWidth,this._.contentSize&&this._.contentSize.height||t.height||t.minHeight),this.reset(),this.selectPage(this.definition.contents[0].id),null===CKEDITOR.dialog._.currentZIndex&&(CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex),this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex+=10),null===CKEDITOR.dialog._.currentTop?(CKEDITOR.dialog._.currentTop=this,this._.parentDialog=null,h(this._.editor)):(this._.parentDialog=CKEDITOR.dialog._.currentTop,this._.parentDialog.getElement().getFirst().$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2),CKEDITOR.dialog._.currentTop=this),e.on("keydown",N),e.on("keyup",C),this._.hasFocus=!1;for(var n in t.contents)if(t.contents[n]){var e=t.contents[n],r=this._.tabs[e.id],i=e.requiredContent,s=0;if(r){for(var o in this._.contents[e.id]){var a=this._.contents[e.id][o];"hbox"==a.type||"vbox"==a.type||!a.getInputElement()||(a.requiredContent&&!this._.editor.activeFilter.check(a.requiredContent)?a.disable():(a.enable(),s++))}!s||i&&!this._.editor.activeFilter.check(i)?r[0].addClass("cke_dialog_tab_disabled"):r[0].removeClass("cke_dialog_tab_disabled")}}CKEDITOR.tools.setTimeout(function(){this.layout(),u(this),this.parts.dialog.setStyle("visibility",""),this.fireOnce("load",{}),CKEDITOR.ui.fire("ready",this),this.fire("show",{}),this._.editor.fire("dialogShow",this),this._.parentDialog||this._.editor.focusManager.lock(),this.foreach(function(e){e.setInitValue&&e.setInitValue()})},100,this)},layout:function(){var e=this.parts.dialog,t=this.getSize(),n=CKEDITOR.document.getWindow().getViewPaneSize(),r=(n.width-t.width)/2,i=(n.height-t.height)/2;CKEDITOR.env.ie6Compat||(t.height+(0<i?i:0)>n.height||t.width+(0<r?r:0)>n.width?e.setStyle("position","absolute"):e.setStyle("position","fixed")),this.move(this._.moved?this._.position.x:r,this._.moved?this._.position.y:i)},foreach:function(e){for(var t in this._.contents)for(var n in this._.contents[t])e.call(this,this._.contents[t][n]);return this},reset:function(){var e=function(e){e.reset&&e.reset(1)};return function(){return this.foreach(e),this}}(),setupContent:function(){var e=arguments;this.foreach(function(t){t.setup&&t.setup.apply(t,e)})},commitContent:function(){var e=arguments;this.foreach(function(t){CKEDITOR.env.ie&&this._.currentFocusIndex==t.focusIndex&&t.getInputElement().$.blur(),t.commit&&t.commit.apply(t,e)})},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{}),this._.editor.fire("dialogHide",this),this.selectPage(this._.tabIdList[0]);var e=this._.element;e.setStyle("display","none"),this.parts.dialog.setStyle("visibility","hidden");for(L(this);CKEDITOR.dialog._.currentTop!=this;)CKEDITOR.dialog._.currentTop.hide();if(this._.parentDialog){var t=this._.parentDialog.getElement().getFirst();t.setStyle("z-index",parseInt(t.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}else p(this._.editor);if(CKEDITOR.dialog._.currentTop=this._.parentDialog)CKEDITOR.dialog._.currentZIndex-=10;else{CKEDITOR.dialog._.currentZIndex=null,e.removeListener("keydown",N),e.removeListener("keyup",C);var n=this._.editor;n.focus(),setTimeout(function(){n.focusManager.unlock(),CKEDITOR.env.iOS&&n.window.focus()},0)}delete this._.parentDialog,this.foreach(function(e){e.resetInitValue&&e.resetInitValue()}),this.setState(CKEDITOR.DIALOG_STATE_IDLE)}},addPage:function(e){if(!e.requiredContent||this._.editor.filter.check(e.requiredContent)){for(var t=[],n=e.label?' title="'+CKEDITOR.tools.htmlEncode(e.label)+'"':"",r=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:e.elements,expand:!!e.expand,padding:e.padding,style:e.style||"width: 100%;"},t),i=this._.contents[e.id]={},s=r.getChild(),o=0;r=s.shift();)!r.notAllowed&&"hbox"!=r.type&&"vbox"!=r.type&&o++,i[r.id]=r,"function"==typeof r.getChild&&s.push.apply(s,r.getChild());o||(e.hidden=!0),t=CKEDITOR.dom.element.createFromHtml(t.join("")),t.setAttribute("role","tabpanel"),r=CKEDITOR.env,i="cke_"+e.id+"_"+CKEDITOR.tools.getNextNumber(),n=CKEDITOR.dom.element.createFromHtml(['<a class="cke_dialog_tab"',0<this._.pageCount?" cke_last":"cke_first",n,e.hidden?' style="display:none"':"",' id="',i,'"',r.gecko&&!r.hc?"":' href="javascript:void(0)"',' tabIndex="-1" hidefocus="true" role="tab">',e.label,"</a>"].join("")),t.setAttribute("aria-labelledby",i),this._.tabs[e.id]=[n,t],this._.tabIdList.push(e.id),!e.hidden&&this._.pageCount++,this._.lastTab=n,this.updateStyle(),t.setAttribute("name",e.id),t.appendTo(this.parts.contents),n.unselectable(),this.parts.tabs.append(n),e.accessKey&&(k(this,this,"CTRL+"+e.accessKey,O,A),this._.accessKeyMap["CTRL+"+e.accessKey]=e.id)}},selectPage:function(e){if(this._.currentTabId!=e&&!this._.tabs[e][0].hasClass("cke_dialog_tab_disabled")&&!1!==this.fire("selectPage",{page:e,currentPage:this._.currentTabId})){for(var t in this._.tabs){var r=this._.tabs[t][0],i=this._.tabs[t][1];t!=e&&(r.removeClass("cke_dialog_tab_selected"),i.hide()),i.setAttribute("aria-hidden",t!=e)}var s=this._.tabs[e];s[0].addClass("cke_dialog_tab_selected"),CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(n(s[1]),s[1].show(),setTimeout(function(){n(s[1],1)},0)):s[1].show(),this._.currentTabId=e,this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,e)}},updateStyle:function(){this.parts.dialog[(1===this._.pageCount?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(t){var n=this._.tabs[t]&&this._.tabs[t][0];n&&1!=this._.pageCount&&n.isVisible()&&(t==this._.currentTabId&&this.selectPage(e.call(this)),n.hide(),this._.pageCount--,this.updateStyle())},showPage:function(e){if(e=this._.tabs[e]&&this._.tabs[e][0])e.show(),this._.pageCount++,this.updateStyle()},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(e,t){var n=this._.contents[e];return n&&n[t]},getValueOf:function(e,t){return this.getContentElement(e,t).getValue()},setValueOf:function(e,t,n){return this.getContentElement(e,t).setValue(n)},getButton:function(e){return this._.buttons[e]},click:function(e){return this._.buttons[e].click()},disableButton:function(e){return this._.buttons[e].disable()},enableButton:function(e){return this._.buttons[e].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(e,t){if("undefined"==typeof t)t=this._.focusList.length,this._.focusList.push(new o(this,e,t));else{this._.focusList.splice(t,0,new o(this,e
,t));for(var n=t+1;n<this._.focusList.length;n++)this._.focusList[n].focusIndex++}},setState:function(e){if(this.state!=e){this.state=e;if(e==CKEDITOR.DIALOG_STATE_BUSY){if(!this.parts.spinner){var t=this.getParentEditor().lang.dir,n={attributes:{"class":"cke_dialog_spinner"},styles:{"float":"rtl"==t?"right":"left"}};n.styles["margin-"+("rtl"==t?"left":"right")]="8px",this.parts.spinner=CKEDITOR.document.createElement("div",n),this.parts.spinner.setHtml("&#8987;"),this.parts.spinner.appendTo(this.parts.title,1)}this.parts.spinner.show(),this.getButton("ok").disable()}else e==CKEDITOR.DIALOG_STATE_IDLE&&(this.parts.spinner&&this.parts.spinner.hide(),this.getButton("ok").enable());this.fire("state",e)}}},CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(e,t){if(!this._.dialogDefinitions[e]||"function"==typeof t)this._.dialogDefinitions[e]=t},exists:function(e){return!!this._.dialogDefinitions[e]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},isTabEnabled:function(e,t,n){return e=e.config.removeDialogTabs,!e||!e.match(RegExp("(?:^|;)"+t+":"+n+"(?:$|;)","i"))},okButton:function(){var e=function(e,t){return t=t||{},CKEDITOR.tools.extend({id:"ok",type:"button",label:e.lang.common.ok,"class":"cke_dialog_ui_button_ok",onClick:function(e){e=e.data.dialog,!1!==e.fire("ok",{hide:!0}).hide&&e.hide()}},t,!0)};return e.type="button",e.override=function(t){return CKEDITOR.tools.extend(function(n){return e(n,t)},{type:"button"},!0)},e}(),cancelButton:function(){var e=function(e,t){return t=t||{},CKEDITOR.tools.extend({id:"cancel",type:"button",label:e.lang.common.cancel,"class":"cke_dialog_ui_button_cancel",onClick:function(e){e=e.data.dialog,!1!==e.fire("cancel",{hide:!0}).hide&&e.hide()}},t,!0)};return e.type="button",e.override=function(t){return CKEDITOR.tools.extend(function(n){return e(n,t)},{type:"button"},!0)},e}(),addUIElement:function(e,t){this._.uiElementBuilders[e]=t}}),CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null},CKEDITOR.event.implementOn(CKEDITOR.dialog),CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype);var m={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]},g=function(e,t,n){for(var r=0,i;i=e[r];r++)if(i.id==t||n&&i[n]&&(i=g(i[n],t,n)))return i;return null},y=function(e,t,n,r,i){if(n){for(var s=0,o;o=e[s];s++){if(o.id==n)return e.splice(s,0,t),t;if(r&&o[r]&&(o=y(o[r],t,n,r,!0)))return o}if(i)return null}return e.push(t),t},b=function(e,t,n){for(var r=0,i;i=e[r];r++){if(i.id==t)return e.splice(r,1);if(n&&i[n]&&(i=b(i[n],t,n)))return i}return null},w=function(e,t){this.dialog=e;for(var n=t.contents,r=0,i;i=n[r];r++)n[r]=i&&new a(e,i);CKEDITOR.tools.extend(this,t)};w.prototype={getContents:function(e){return g(this.contents,e)},getButton:function(e){return g(this.buttons,e)},addContents:function(e,t){return y(this.contents,e,t)},addButton:function(e,t){return y(this.buttons,e,t)},removeContents:function(e){b(this.contents,e)},removeButton:function(e){b(this.buttons,e)}},a.prototype={get:function(e){return g(this.elements,e,"children")},add:function(e,t){return y(this.elements,e,t,"children")},remove:function(e){b(this.elements,e,"children")}};var E,S={},x,T={},N=function(e){var t=e.data.$.ctrlKey||e.data.$.metaKey,n=e.data.$.altKey,r=e.data.$.shiftKey,i=String.fromCharCode(e.data.$.keyCode);(t=T[(t?"CTRL+":"")+(n?"ALT+":"")+(r?"SHIFT+":"")+i])&&t.length&&(t=t[t.length-1],t.keydown&&t.keydown.call(t.uiElement,t.dialog,t.key),e.data.preventDefault())},C=function(e){var t=e.data.$.ctrlKey||e.data.$.metaKey,n=e.data.$.altKey,r=e.data.$.shiftKey,i=String.fromCharCode(e.data.$.keyCode);(t=T[(t?"CTRL+":"")+(n?"ALT+":"")+(r?"SHIFT+":"")+i])&&t.length&&(t=t[t.length-1],t.keyup&&(t.keyup.call(t.uiElement,t.dialog,t.key),e.data.preventDefault()))},k=function(e,t,n,r,i){(T[n]||(T[n]=[])).push({uiElement:e,dialog:t,key:n,keyup:i||e.accessKeyUp,keydown:r||e.accessKeyDown})},L=function(e){for(var t in T){for(var n=T[t],r=n.length-1;0<=r;r--)(n[r].dialog==e||n[r].uiElement==e)&&n.splice(r,1);0===n.length&&delete T[t]}},A=function(e,t){e._.accessKeyMap[t]&&e.selectPage(e._.accessKeyMap[t])},O=function(){};(function(){CKEDITOR.ui.dialog={uiElement:function(e,t,n,r,i,s,o){if(!(4>arguments.length)){var u=(r.call?r(t):r)||"div",a=["<",u," "],f=(i&&i.call?i(t):i)||{},l=(s&&s.call?s(t):s)||{},c=(o&&o.call?o.call(this,e,t):o)||"",h=this.domId=l.id||CKEDITOR.tools.getNextId()+"_uiElement";t.requiredContent&&!e.getParentEditor().filter.check(t.requiredContent)&&(f.display="none",this.notAllowed=!0),l.id=h;var p={};t.type&&(p["cke_dialog_ui_"+t.type]=1),t.className&&(p[t.className]=1),t.disabled&&(p.cke_disabled=1);for(var d=l["class"]&&l["class"].split?l["class"].split(" "):[],h=0;h<d.length;h++)d[h]&&(p[d[h]]=1);d=[];for(h in p)d.push(h);l["class"]=d.join(" "),t.title&&(l.title=t.title),p=(t.style||"").split(";"),t.align&&(d=t.align,f["margin-left"]="left"==d?0:"auto",f["margin-right"]="right"==d?0:"auto");for(h in f)p.push(h+":"+f[h]);t.hidden&&p.push("display:none");for(h=p.length-1;0<=h;h--)""===p[h]&&p.splice(h,1);0<p.length&&(l.style=(l.style?l.style+"; ":"")+p.join("; "));for(h in l)a.push(h+'="'+CKEDITOR.tools.htmlEncode(l[h])+'" ');a.push(">",c,"</",u,">"),n.push(a.join("")),(this._||(this._={})).dialog=e,"boolean"==typeof t.isChanged&&(this.isChanged=function(){return t.isChanged}),"function"==typeof t.isChanged&&(this.isChanged=t.isChanged),"function"==typeof t.setValue&&(this.setValue=CKEDITOR.tools.override(this.setValue,function(e){return function(n){e.call(this,t.setValue.call(this,n))}})),"function"==typeof t.getValue&&(this.getValue=CKEDITOR.tools.override(this.getValue,function(e){return function(){return t.getValue.call(this,e.call(this))}})),CKEDITOR.event.implementOn(this),this.registerEvents(t),this.accessKeyUp&&this.accessKeyDown&&t.accessKey&&k(this,e,"CTRL+"+t.accessKey);var v=this;e.on("load",function(){var t=v.getInputElement();if(t){var n=v.type in{checkbox:1,ratio:1}&&CKEDITOR.env.ie&&CKEDITOR.env.version<8?"cke_dialog_ui_focused":"";t.on("focus",function(){e._.tabBarMode=!1,e._.hasFocus=!0,v.fire("focus"),n&&this.addClass(n)}),t.on("blur",function(){v.fire("blur"),n&&this.removeClass(n)})}}),CKEDITOR.tools.extend(this,t),this.keyboardFocusable&&(this.tabIndex=t.tabIndex||0,this.focusIndex=e._.focusList.push(this)-1,this.on("focus",function(){e._.currentFocusIndex=v.focusIndex}))}},hbox:function(e,t,n,r,i){if(!(4>arguments.length)){this._||(this._={});var s=this._.children=t,o=i&&i.widths||null,u=i&&i.height||null,a,f={role:"presentation"};i&&i.align&&(f.align=i.align),CKEDITOR.ui.dialog.uiElement.call(this,e,i||{type:"hbox"},r,"table",{},f,function(){var e=['<tbody><tr class="cke_dialog_ui_hbox">'];for(a=0;a<n.length;a++){var t="cke_dialog_ui_hbox_child",r=[];0===a&&(t="cke_dialog_ui_hbox_first"),a==n.length-1&&(t="cke_dialog_ui_hbox_last"),e.push('<td class="',t,'" role="presentation" '),o?o[a]&&r.push("width:"+d(o[a])):r.push("width:"+Math.floor(100/n.length)+"%"),u&&r.push("height:"+d(u)),i&&void 0!==i.padding&&r.push("padding:"+d(i.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&s[a].align&&r.push("text-align:"+s[a].align),0<r.length&&e.push('style="'+r.join("; ")+'" '),e.push(">",n[a],"</td>")}return e.push("</tr></tbody>"),e.join("")})}},vbox:function(e,t,n,r,i){if(!(3>arguments.length)){this._||(this._={});var s=this._.children=t,o=i&&i.width||null,u=i&&i.heights||null;CKEDITOR.ui.dialog.uiElement.call(this,e,i||{type:"vbox"},r,"div",null,{role:"presentation"},function(){var t=['<table role="presentation" cellspacing="0" border="0" '];t.push('style="'),i&&i.expand&&t.push("height:100%;"),t.push("width:"+d(o||"100%"),";"),CKEDITOR.env.webkit&&t.push("float:none;"),t.push('"'),t.push('align="',CKEDITOR.tools.htmlEncode(i&&i.align||("ltr"==e.getParentEditor().lang.dir?"left":"right")),'" '),t.push("><tbody>");for(var r=0;r<n.length;r++){var a=[];t.push('<tr><td role="presentation" '),o&&a.push("width:"+d(o||"100%")),u?a.push("height:"+d(u[r])):i&&i.expand&&a.push("height:"+Math.floor(100/n.length)+"%"),i&&void 0!==i.padding&&a.push("padding:"+d(i.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&s[r].align&&a.push("text-align:"+s[r].align),0<a.length&&t.push('style="',a.join("; "),'" '),t.push(' class="cke_dialog_ui_vbox_child">',n[r],"</td></tr>")}return t.push("</tbody></table>"),t.join("")})}}}})(),CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(e,t){return this.getInputElement().setValue(e),!t&&this.fire("change",{value:e}),this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){for(var e=this.getInputElement();(e=e.getParent())&&-1==e.$.className.search("cke_dialog_page_contents"););return e?(e=e.getAttribute("name"),this._.dialog._.currentTabId!=e&&this._.dialog.selectPage(e),this):this},focus:function(){return this.selectParentTab().getInputElement().focus(),this},registerEvents:function(e){var t=/^on([A-Z]\w+)/,n,r=function(e,t,n,r){t.on("load",function(){e.getInputElement().on(n,r,e)})},i;for(i in e)if(n=i.match(t))this.eventProcessors[i]?this.eventProcessors[i].call(this,this._.dialog,e[i]):r(this,this._.dialog,n[1].toLowerCase(),e[i]);return this},eventProcessors:{onLoad:function(e,t){e.on("load",t,this)},onShow:function(e,t){e.on("show",t,this)},onHide:function(e,t){e.on("hide",t,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var e=this.getElement();this.getInputElement().setAttribute("disabled","true"),e.addClass("cke_disabled")},enable:function(){var e=this.getElement();this.getInputElement().removeAttribute("disabled"),e.removeClass("cke_disabled")},isEnabled:function(){return!this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return!this.isEnabled()||!this.isVisible()?!1:!0}},CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(e){return 1>arguments.length?this._.children.concat():(e.splice||(e=[e]),2>e.length?this._.children[e[0]]:this._.children[e[0]]&&this._.children[e[0]].getChild?this._.children[e[0]].getChild(e.slice(1,e.length)):null)}},!0),CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox,function(){var e={build:function(e,t,n){for(var r=t.children,i,s=[],o=[],u=0;u<r.length&&(i=r[u]);u++){var a=[];s.push(a),o.push(CKEDITOR.dialog._.uiElementBuilders[i.type].build(e,i,a))}return new CKEDITOR.ui.dialog[t.type](e,o,s,n,t)}};CKEDITOR.dialog.addUIElement("hbox",e),CKEDITOR.dialog.addUIElement("vbox",e)}(),CKEDITOR.dialogCommand=function(e,t){this.dialogName=e,CKEDITOR.tools.extend(this,t,!0)},CKEDITOR.dialogCommand.prototype={exec:function(e){e.openDialog(this.dialogName)},canUndo:!1,editorFocus:1},function(){var e=/^([a]|[^a])+$/,t=/^\d*$/,n=/^\d*(?:\.\d+)?$/,r=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,i=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,s=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;CKEDITOR.VALIDATE_OR=1,CKEDITOR.VALIDATE_AND=2,CKEDITOR.dialog.validate={functions:function(){var e=arguments;return function(){var t=this&&this.getValue?this.getValue():e[0],n,r=CKEDITOR.VALIDATE_AND,i=[],s;for(s=0;s<e.length;s++){if("function"!=typeof e[s])break;i.push(e[s])}s<e.length&&"string"==typeof e[s]&&(n=e[s],s++),s<e.length&&"number"==typeof e[s]&&(r=e[s]);var o=r==CKEDITOR.VALIDATE_AND?!0:!1;for(s=0;s<i.length;s++)o=r==CKEDITOR.VALIDATE_AND?o&&i[s](t):o||i[s](t);return o?!0:n}},regex:function(e,t){return function(n){return n=this&&this.getValue?this.getValue():n,e.test(n)?!0:t}},notEmpty:function(t){return this.regex(e,t)},integer:function(e){return this.regex(t,e)},number:function(e){return this.regex(n,e)},cssLength:function(e){return this.functions(function(e){return i.test(CKEDITOR.tools.trim(e))},e)},htmlLength:function(e){return this.functions(function(e){return r.test(CKEDITOR.tools.trim(e))},e)},inlineStyle:function(e){return this.functions(function(e){return s.test(CKEDITOR.tools.trim(e))},e)},equals:function(e,t){return this.functions(function(t){return t==e},t)},notEqual:function(e,t){return this.functions(function(t){return t!=e},t)}},CKEDITOR.on("instanceDestroyed",function(e){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var t;t=CKEDITOR.dialog._.currentTop;)t.hide();for(var n in S)S[n].remove();S={}}var e=e.editor._.storedDialogs,r;for(r in e)e[r].destroy()})}(),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(e,t){var n=null,r=CKEDITOR.dialog._.dialogDefinitions[e];null===CKEDITOR.dialog._.currentTop&&h(this);if("function"==typeof r)n=this._.storedDialogs||(this._.storedDialogs={}),n=n[e]||(n[e]=new CKEDITOR.dialog(this,e)),t&&t.call(n,n),n.show();else{if("failed"==r)throw p(this),Error('[CKEDITOR.dialog.openDialog] Dialog "'+e+'" failed when loading definition.');"string"==typeof r&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(r),function(){"function"!=typeof CKEDITOR.dialog._.dialogDefinitions[e]&&(CKEDITOR.dialog._.dialogDefinitions[e]="failed"),this.openDialog(e,t)},this,0,1)}return CKEDITOR.skin.loadPart("dialog"),n}})}(),CKEDITOR.plugins.add("dialog",{requires:"dialogui",init:function(e){e.on("doubleclick",function(n){n.data.dialog&&e.openDialog(n.data.dialog)},null,null,999)}}),CKEDITOR.plugins.add("about",{requires:"dialog",init:function(e){var t=e.addCommand("about",new CKEDITOR.dialogCommand("about"));t.modes={wysiwyg:1,source:1},t.canUndo=!1,t.readOnly=1,e.ui.addButton&&e.ui.addButton("About",{label:e.lang.about.title,command:"about",toolbar:"about"}),CKEDITOR.dialog.add("about",this.path+"dialogs/about.js")}}),function(){CKEDITOR.plugins.add("a11yhelp",{requires:"dialog",availableLangs:{af:1,ar:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,en:1,"en-gb":1,eo:1,es:1,et:1,fa:1,fi:1,fo:1,fr:1,"fr-ca":1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},init:function(e){var t=this;e.addCommand("a11yHelp",{exec:function(){var n=e.langCode,n=t.availableLangs[n]?n:t.availableLangs[n.replace(/-.*/,"")]?n.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(t.path+"dialogs/lang/"+n+".js"),function(){e.lang.a11yhelp=t.langEntries[n],e.openDialog("a11yHelp")})},modes:{wysiwyg:1,source:1},readOnly:1,canUndo:!1}),e.setKeystroke(CKEDITOR.ALT+48,"a11yHelp"),CKEDITOR.dialog.add("a11yHelp",this.path+"dialogs/a11yhelp.js"),e.on("ariaEditorHelpLabel",function(t){t.data.label=e.lang.common.editorHelp})}})}(),function(){function e(e){var t=this.att,e=e&&e.hasAttribute(t)&&e.getAttribute(t)||"";void 0!==e&&this.setValue(e)}function t(){for(var e,t=0;t<arguments.length;t++)if(arguments[t]instanceof CKEDITOR.dom.element){e=arguments[t];break}if(e){var t=this.att,n=this.getValue();n?e.setAttribute(t,n):e.removeAttribute(t,n)}}var n={id:1,dir:1,classes:1,styles:1};CKEDITOR.plugins.add("dialogadvtab",{requires:"dialog",allowedContent:function(e){e||(e=n);var t=[];e.id&&t.push("id"),e.dir&&t.push("dir");var r="";return t.length&&(r+="["+t.join(",")+"]"),e.classes&&(r+="(*)"),e.styles&&(r+="{*}"),r},createAdvancedTab:function(r,s,o){s||(s=n);var u=r.lang.common,a={id:"advanced",label:u.advancedTab,title:u.advancedTab,elements:[{type:"vbox",padding:1,children:[]}]},l=[];if(s.id||s.dir)s.id&&l.push({id:"advId",att:"id",type:"text",requiredContent:o?o+"[id]":null,label:u.id,setup:e,commit:t}),s.dir&&l.push({id:"advLangDir",att:"dir",type:"select",requiredContent:o?o+"[dir]":null,label:u.langDir,"default":"",style:"width:100%",items:[[u.notSet,""],[u.langDirLTR,"ltr"],[u.langDirRTL,"rtl"]],setup:e,commit:t}),a.elements[0].children.push({type:"hbox",widths:["50%","50%"],children:[].concat(l)});if(s.styles||s.classes)l=[],s.styles&&l.push({id:"advStyles",att:"style",type:"text",requiredContent:o?o+"{cke-xyz}":null,label:u.styles,"default":"",validate:CKEDITOR.dialog.validate.inlineStyle(u.invalidInlineStyle),onChange:function(){},getStyle:function(e,t){var n=this.getValue().match(RegExp("(?:^|;)\\s*"+e+"\\s*:\\s*([^;]*)","i"));return n?n[1]:t},updateStyle:function(e,t){var n=this.getValue(),i=r.document.createElement("span");i.setAttribute("style",n),i.setStyle(e,t),n=CKEDITOR.tools.normalizeCssText(i.getAttribute("style")),this.setValue(n,1)},setup:e,commit:t}),s.classes&&l.push({type:"hbox",widths:["45%","55%"],children:[{id:"advCSSClasses",att:"class",type:"text",requiredContent:o?o+"(cke-xyz)":null,label:u.cssClasses,"default":"",setup:e,commit:t}]}),a.elements[0].children.push({type:"hbox",widths:["50%","50%"],children:[].concat(l)});return a}})}(),CKEDITOR.plugins.add("basicstyles",{init:function(e){var t=0,n=function(n,i,s,o){if(o){var o=new CKEDITOR.style(o),u=r[s];u.unshift(o),e.attachStyleStateChange(o,function(t){!e.readOnly&&e.getCommand(s).setState(t)}),e.addCommand(s,new CKEDITOR.styleCommand(o,{contentForms:u})),e.ui.addButton&&e.ui.addButton(n,{label:i,command:s,toolbar:"basicstyles,"+(t+=10)})}},r={bold:["strong","b",["span",function(e){return e=e.styles["font-weight"],"bold"==e||700<=+e}]],italic:["em","i",["span",function(e){return"italic"==e.styles["font-style"]}]],underline:["u",["span",function(e){return"underline"==e.styles["text-decoration"]}]],strike:["s","strike",["span",function(e){return"line-through"==e.styles["text-decoration"]}]],subscript:["sub"],superscript:["sup"]},i=e.config,s=e.lang.basicstyles;n("Bold",s.bold,"bold",i.coreStyles_bold),n("Italic",s.italic,"italic",i.coreStyles_italic),n("Underline",s.underline,"underline",i.coreStyles_underline),n("Strike",s.strike,"strike",i.coreStyles_strike),n("Subscript",s.subscript,"subscript",i.coreStyles_subscript),n("Superscript",s.superscript,"superscript",i.coreStyles_superscript),e.setKeystroke([[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"]])}}),CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"},CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"},CKEDITOR.config.coreStyles_underline={element:"u"},CKEDITOR.config.coreStyles_strike={element:"s",overrides:"strike"},CKEDITOR.config.coreStyles_subscript={element:"sub"},CKEDITOR.config.coreStyles_superscript={element:"sup"},function(){function e(e,t,n,r){if(!e.isReadOnly()&&!e.equals(n.editable())){CKEDITOR.dom.element.setMarker(r,e,"bidi_processed",1);for(var r=e,i=n.editable();(r=r.getParent())&&!r.equals(i);)if(r.getCustomData("bidi_processed")){e.removeStyle("direction"),e.removeAttribute("dir");return}r="useComputedState"in n.config?n.config.useComputedState:1,(r?e.getComputedStyle("direction"):e.getStyle("direction")||e.hasAttribute("dir"))!=t&&(e.removeStyle("direction"),r?(e.removeAttribute("dir"),t!=e.getComputedStyle("direction")&&e.setAttribute("dir",t)):e.setAttribute("dir",t),n.forceNextSelectionCheck())}}function t(e,t,n){var r=e.getCommonAncestor(!1,!0),e=e.clone();e.enlarge(n==CKEDITOR.ENTER_BR?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS);if(e.checkBoundaryOfElement(r,CKEDITOR.START)&&e.checkBoundaryOfElement(r,CKEDITOR.END)){for(var i;r&&r.type==CKEDITOR.NODE_ELEMENT&&(i=r.getParent())&&1==i.getChildCount()&&!(r.getName()in t);)r=i;return r.type==CKEDITOR.NODE_ELEMENT&&r.getName()in t&&r}}function n(n){return{context:"p",allowedContent:{"h1 h2 h3 h4 h5 h6 table ul ol blockquote div tr p div li td":{propertiesOnly:!0,attributes:"dir"}},requiredContent:"p[dir]",refresh:function(e,t){var n=e.config.useComputedState,r,n=void 0===n||n;if(!n){r=t.lastElement;for(var i=e.editable();r&&!(r.getName()in o||r.equals(i));){var s=r.getParent();if(!s)break;r=s}}r=r||t.block||t.blockLimit,r.equals(e.editable())&&(i=e.getSelection().getRanges()[0].getEnclosedNode())&&i.type==CKEDITOR.NODE_ELEMENT&&(r=i),r&&(n=n?r.getComputedStyle("direction"):r.getStyle("direction")||r.getAttribute("dir"),e.getCommand("bidirtl").setState("rtl"==n?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),e.getCommand("bidiltr").setState("ltr"==n?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)),n=(t.block||t.blockLimit||e.editable()).getDirection(1),n!=(e._.selDir||e.lang.dir)&&(e._.selDir=n,e.fire("contentDirChanged",n))},exec:function(r){var o=r.getSelection(),u=r.config.enterMode,a=o.getRanges();if(a&&a.length){for(var f={},l=o.createBookmarks(),a=a.createIterator(),c,h=0;c=a.getNextRange(1);){var d=c.getEnclosedNode();if(!d||d&&!(d.type==CKEDITOR.NODE_ELEMENT&&d.getName()in s))d=t(c,i,u);d&&e(d,n,r,f);var v=new CKEDITOR.dom.walker(c),m=l[h].startNode,g=l[h++].endNode;v.evaluator=function(e){var t=u==CKEDITOR.ENTER_P?"p":"div",n;if(!(n=!e||e.type!=CKEDITOR.NODE_ELEMENT)){if(n=e.getName()in i)(t=!e.is(t))||(t=e.getParent(),t=!t||t.type!=CKEDITOR.NODE_ELEMENT||!e.getParent().is("blockquote")),n=t&&e.getPosition(m)&CKEDITOR.POSITION_FOLLOWING&&(e.getPosition(g)&CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_CONTAINS)==CKEDITOR.POSITION_PRECEDING;n=!n}return!n};for(;d=v.next();)e(d,n,r,f);c=c.createIterator();for(c.enlargeBr=u!=CKEDITOR.ENTER_BR;d=c.getNextParagraph(u==CKEDITOR.ENTER_P?"p":"div");)e(d,n,r,f)}CKEDITOR.dom.element.clearAllMarkers(f),r.forceNextSelectionCheck(),o.selectBookmarks(l),r.focus()}}}}function r(e){var t=e==u.setAttribute,n=e==u.removeAttribute,r=/\bdirection\s*:\s*(.*?)\s*(:?$|;)/;return function(i,s){if(!this.isReadOnly()){var o;if(o=i==(t||n?"dir":"direction")||"style"==i&&(n||r.test(s))){e:{o=this;for(var u=o.getDocument().getBody().getParent();o;){if(o.equals(u)){o=!1;break e}o=o.getParent()}o=!0}o=!o}if(o&&(o=this.getDirection(1),u=e.apply(this,arguments),o!=this.getDirection(1)))return this.getDocument().fire("dirChanged",this),u}return e.apply(this,arguments)}}var i={table:1,ul:1,ol:1,blockquote:1,div:1},s={},o={};CKEDITOR.tools.extend(s,i,{tr:1,p:1,div:1,li:1}),CKEDITOR.tools.extend(o,s,{td:1}),CKEDITOR.plugins.add("bidi",{init:function(e){function t(t,n,r,i,s){e.addCommand(r,new CKEDITOR.command(e,i)),e.ui.addButton&&e.ui.addButton(t,{label:n,command:r,toolbar:"bidi,"+s})}if(!e.blockless){var r=e.lang.bidi;t("BidiLtr",r.ltr,"bidiltr",n("ltr"),10),t("BidiRtl",r.rtl,"bidirtl",n("rtl"),20),e.on("contentDom",function(){e.document.on("dirChanged",function(t){e.fire("dirChanged",{node:t.data,dir:t.data.getDirection(1)})})}),e.on("contentDirChanged",function(t){var t=(e.lang.dir!=t.data?"add":"remove")+"Class",n=e.ui.space(e.config.toolbarLocation);n&&n[t]("cke_mixed_dir_content")})}}});for(var u=CKEDITOR.dom.element.prototype,a=["setStyle","removeStyle","setAttribute","removeAttribute"],f=0;f<a.length;f++)u[a[f]]=CKEDITOR.tools.override(u[a[f]],r)}(),function(){var e={exec:function(e){var t=e.getCommand("blockquote").state,n=e.getSelection(),r=n&&n.getRanges()[0];if(r){var i=n.createBookmarks();if(CKEDITOR.env.ie){var s=i[0].startNode,o=i[0].endNode,u;if(s&&"blockquote"==s.getParent().getName())for(u=s;u=u.getNext();)if(u.type==CKEDITOR.NODE_ELEMENT&&u.isBlockBoundary()){s.move(u,!0);break}if(o&&"blockquote"==o.getParent().getName())for(u=o;u=u.getPrevious();)if(u.type==CKEDITOR.NODE_ELEMENT&&u.isBlockBoundary()){o.move(u);break}}var a=r.createIterator();a.enlargeBr=e.config.enterMode!=CKEDITOR.ENTER_BR;if(t==CKEDITOR.TRISTATE_OFF){for(s=[];t=a.getNextParagraph();)s.push(t);1>s.length&&(t=e.document.createElement(e.config.enterMode==CKEDITOR.ENTER_P?"p":"div"),o=i.shift(),r.insertNode(t),t.append(new CKEDITOR.dom.text("﻿",e.document)),r.moveToBookmark(o),r.selectNodeContents(t),r.collapse(!0),o=r.createBookmark(),s.push(t),i.unshift(o)),u=s[0].getParent(),r=[];for(o=0;o<s.length;o++)t=s[o],u=u.getCommonAncestor(t.getParent());for(t={table:1,tbody:1,tr:1,ol:1,ul:1};t[u.getName()];)u=u.getParent();for(o=null;0<s.length;){for(t=s.shift();!t.getParent().equals(u);)t=t.getParent();t.equals(o)||r.push(t),o=t}for(;0<r.length;)if(t=r.shift(),"blockquote"==t.getName()){for(o=new CKEDITOR.dom.documentFragment(e.document);t.getFirst();)o.append(t.getFirst().remove()),s.push(o.getLast());o.replace(t)}else s.push(t);r=e.document.createElement("blockquote");for(r.insertBefore(s[0]);0<s.length;)t=s.shift(),r.append(t)}else if(t==CKEDITOR.TRISTATE_ON){o=[];for(u={};t=a.getNextParagraph();){for(s=r=null;t.getParent();){if("blockquote"==t.getParent().getName()){r=t.getParent(),s=t;break}t=t.getParent()}r&&s&&!s.getCustomData("blockquote_moveout")&&(o.push(s),CKEDITOR.dom.element.setMarker(u,s,"blockquote_moveout",!0))}CKEDITOR.dom.element.clearAllMarkers(u),t=[],s=[];for(u={};0<o.length;)a=o.shift(),r=a.getParent(),a.getPrevious()?a.getNext()?(a.breakParent(a.getParent()),s.push(a.getNext())):a.remove().insertAfter(r):a.remove().insertBefore(r),r.getCustomData("blockquote_processed")||(s.push(r),CKEDITOR.dom.element.setMarker(u,r,"blockquote_processed",!0)),t.push(a);CKEDITOR.dom.element.clearAllMarkers(u);for(o=s.length-1;0<=o;o--){r=s[o];e:{u=r;for(var a=0,f=u.getChildCount(),l=void 0;a<f&&(l=u.getChild(a));a++)if(l.type==CKEDITOR.NODE_ELEMENT&&l.isBlockBoundary()){u=!1;break e}u=!0}u&&r.remove()}if(e.config.enterMode==CKEDITOR.ENTER_BR)for(r=!0;t.length;)if(a=t.shift(),"div"==a.getName()){o=new CKEDITOR.dom.documentFragment(e.document),r&&a.getPrevious()&&(a.getPrevious().type!=CKEDITOR.NODE_ELEMENT||!a.getPrevious().isBlockBoundary())&&o.append(e.document.createElement("br"));for(r=a.getNext()&&(a.getNext().type!=CKEDITOR.NODE_ELEMENT||!a.getNext().isBlockBoundary());a.getFirst();)a.getFirst().remove().appendTo(o);r&&o.append(e.document.createElement("br")),o.replace(a),r=!1}}n.selectBookmarks(i),e.focus()}},refresh:function(e,t){this.setState(e.elementPath(t.block||t.blockLimit).contains("blockquote",1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},context:"blockquote",allowedContent:"blockquote",requiredContent:"blockquote"};CKEDITOR.plugins.add("blockquote",{init:function(t){t.blockless||(t.addCommand("blockquote",e),t.ui.addButton&&t.ui.addButton("Blockquote",{label:t.lang.blockquote.toolbar,command:"blockquote",toolbar:"blocks,10"}))}})}(),function(){function e(e,t,n){return t.type||(t.type="auto"),n&&!1===e.fire("beforePaste",t)||!t.dataValue&&t.dataTransfer.isEmpty()?!1:(t.dataValue||(t.dataValue=""),CKEDITOR.env.gecko&&"drop"==t.method&&e.toolbox&&e.once("afterPaste",function(){e.toolbox.focus()}),e.fire("paste",t))}function t(t){function n(){var e=t.editable();if(CKEDITOR.plugins.clipboard.isCustomCopyCutSupported){var n=function(e){v.initPasteDataTransfer(e,t),e.data.preventDefault()};e.on("copy",n),e.on("cut",n),e.on("cut",function(){t.extractSelectedHtml()},null,null,999)}e.on(v.mainPasteEvent,function(e){"beforepaste"==v.mainPasteEvent&&m||h(e)}),"beforepaste"==v.mainPasteEvent&&(e.on("paste",function(e){g||(s(),e.data.preventDefault(),h(e),u("paste")||t.openDialog("paste"))}),e.on("contextmenu",o,null,null,0),e.on("beforepaste",function(e){e.data&&!e.data.$.ctrlKey&&!e.data.$.shiftKey&&o()},null,null,0)),e.on("beforecut",function(){!m&&a(t)});var r;e.attachListener(CKEDITOR.env.ie?e:t.document.getDocumentElement(),"mouseup",function(){r=setTimeout(function(){p()},0)}),t.on("destroy",function(){clearTimeout(r)}),e.on("keyup",p)}function r(e){return{type:e,canUndo:"cut"==e,startDisabled:!0,exec:function(){"cut"==this.type&&a();var e,n=this.type;if(CKEDITOR.env.ie)e=u(n);else try{e=t.document.$.execCommand(n,!1,null)}catch(r){e=!1}return e||t.showNotification(t.lang.clipboard[this.type+"Error"]),e}}}function i(){return{canUndo:!1,async:!0,exec:function(t,n){var r=function(n,r){n&&e(t,n,!!r),t.fire("afterCommandExec",{name:"paste",command:i,returnValue:!!n})},i=this;"string"==typeof n?r({dataValue:n,method:"paste",dataTransfer:v.initPasteDataTransfer()},1):t.getClipboardData(r)}}}function s(){g=1,setTimeout(function(){g=0},100)}function o(){m=1,setTimeout(function(){m=0},10)}function u(e){var n=t.document,r=n.getBody(),i=!1,s=function(){i=!0};return r.on(e,s),7<CKEDITOR.env.version?n.$.execCommand(e):n.$.selection.createRange().execCommand(e),r.removeListener(e,s),i}function a(){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var e=t.getSelection(),n,r,i;e.getType()==CKEDITOR.SELECTION_ELEMENT&&(n=e.getSelectedElement())&&(r=e.getRanges()[0],i=t.document.createText(""),i.insertBefore(n),r.setStartBefore(i),r.setEndAfter(n),e.selectRanges([r]),setTimeout(function(){n.getParent()&&(i.remove(),e.selectElement(n))},0))}}function f(e,n){var r=t.document,i=t.editable(),s=function(e){e.cancel()},o;if(!r.getById("cke_pastebin")){var u=t.getSelection(),a=u.createBookmarks();CKEDITOR.env.ie&&u.root.fire("selectionchange");var f=new CKEDITOR.dom.element((CKEDITOR.env.webkit||i.is("body"))&&!CKEDITOR.env.ie?"body":"div",r);f.setAttributes({id:"cke_pastebin","data-cke-temp":"1"});var l=0,r=r.getWindow();CKEDITOR.env.webkit?(i.append(f),f.addClass("cke_editable"),i.is("body")||(l="static"!=i.getComputedStyle("position")?i:CKEDITOR.dom.element.get(i.$.offsetParent),l=l.getDocumentPosition().y)):i.getAscendant(CKEDITOR.env.ie?"body":"html",1).append(f),f.setStyles({position:"absolute",top:r.getScrollPosition().y-l+10+"px",width:"1px",height:Math.max(1,r.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0}),CKEDITOR.env.safari&&f.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","text")),(l=f.getParent().isReadOnly())?(f.setOpacity(0),f.setAttribute("contenteditable",!0)):f.setStyle("ltr"==t.config.contentsLangDirection?"left":"right","-1000px"),t.on("selectionChange",s,null,null,0);if(CKEDITOR.env.webkit||CKEDITOR.env.gecko)o=i.once("blur",s,null,null,-100);l&&f.focus(),l=new CKEDITOR.dom.range(f),l.selectNodeContents(f);var c=l.select();CKEDITOR.env.ie&&(o=i.once("blur",function(){t.lockSelection(c)}));var h=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout(function(){CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=h),o&&o.removeListener(),CKEDITOR.env.ie&&i.focus(),u.selectBookmarks(a),f.remove();var e;CKEDITOR.env.webkit&&(e=f.getFirst())&&e.is&&e.hasClass("Apple-style-span")&&(f=e),t.removeListener("selectionChange",s),n(f.getHtml())},0)}}function l(){if("paste"==v.mainPasteEvent)return t.fire("beforePaste",{type:"auto",method:"paste"}),!1;t.focus(),s();var e=t.focusManager;return e.lock(),t.editable().fire(v.mainPasteEvent)&&!u("paste")?(e.unlock(),!1):(e.unlock(),!0)}function c(e){if("wysiwyg"==t.mode)switch(e.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:e=t.editable(),s(),"paste"==v.mainPasteEvent&&e.fire("beforepaste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:t.fire("saveSnapshot"),setTimeout(function(){t.fire("saveSnapshot")},50)}}function h(n){var r={type:"auto",method:"paste",dataTransfer:v.initPasteDataTransfer(n)};r.dataTransfer.cacheData();var i=!1!==t.fire("beforePaste",r);i&&v.canClipboardApiBeTrusted(r.dataTransfer,t)?(n.data.preventDefault(),setTimeout(function(){e(t,r)},0)):f(n,function(n){r.dataValue=n.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/ig,""),i&&e(t,r)})}function p(){if("wysiwyg"==t.mode){var e=d("paste");t.getCommand("cut").setState(d("cut")),t.getCommand("copy").setState(d("copy")),t.getCommand("paste").setState(e),t.fire("pasteState",e)}}function d(e){if(y&&e in{paste:1,cut:1})return CKEDITOR.TRISTATE_DISABLED;if("paste"==e)return CKEDITOR.TRISTATE_OFF;var e=t.getSelection(),n=e.getRanges();return e.getType()==CKEDITOR.SELECTION_NONE||1==n.length&&n[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF}var v=CKEDITOR.plugins.clipboard,m=0,g=0,y=0;(function(){t.on("key",c),t.on("contentDom",n),t.on("selectionChange",function(e){y=e.data.selection.getRanges()[0].checkReadOnly(),p()}),t.contextMenu&&t.contextMenu.addListener(function(e,t){return y=t.getRanges()[0].checkReadOnly(),{cut:d("cut"),copy:d("copy"),paste:d("paste")}})})(),function(){function e(e,n,r,i,s){var o=t.lang.clipboard[n];t.addCommand(n,r),t.ui.addButton&&t.ui.addButton(e,{label:o,command:n,toolbar:"clipboard,"+i}),t.addMenuItems&&t.addMenuItem(n,{label:o,command:n,group:"clipboard",order:s})}e("Cut","cut",r("cut"),10,1),e("Copy","copy",r("copy"),20,4),e("Paste","paste",i(),30,8)}(),t.getClipboardData=function(e,n){function r(e){e.removeListener(),e.cancel(),n(e.data)}function i(e){e.removeListener(),e.cancel(),a=!0,n({type:u,dataValue:e.data,method:"paste"})}function s(){this.customTitle=e&&e.title}var o=!1,u="auto",a=!1;n||(n=e,e=null),t.on("paste",r,null,null,0),t.on("beforePaste",function(e){e.removeListener(),o=!0,u=e.data.type},null,null,1e3),!1===l()&&(t.removeListener("paste",r),o&&t.fire("pasteDialog",s)?(t.on("pasteDialogCommit",i),t.on("dialogHide",function(e){e.removeListener(),e.data.removeListener("pasteDialogCommit",i),setTimeout(function(){a||n(null)},10)})):n(null))}}function n(
e){if(CKEDITOR.env.webkit){if(!e.match(/^[^<]*$/g)&&!e.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi))return"html"}else if(CKEDITOR.env.ie){if(!e.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!e.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi))return"html"}else{if(!CKEDITOR.env.gecko)return"html";if(!e.match(/^([^<]|<br( ?\/)?>)*$/gi))return"html"}return"htmlifiedtext"}function r(e,t){function n(e){return CKEDITOR.tools.repeat("</p><p>",~~(e/2))+(1==e%2?"<br>":"")}return t=t.replace(/\s+/g," ").replace(/> +</g,"><").replace(/<br ?\/>/gi,"<br>"),t=t.replace(/<\/?[A-Z]+>/g,function(e){return e.toLowerCase()}),t.match(/^[^<]$/)?t:(CKEDITOR.env.webkit&&-1<t.indexOf("<div>")&&(t=t.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"<br>").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"<div></div>"),t.match(/<div>(<br>|)<\/div>/)&&(t="<p>"+t.replace(/(<div>(<br>|)<\/div>)+/g,function(e){return n(e.split("</div><div>").length+1)})+"</p>"),t=t.replace(/<\/div><div>/g,"<br>"),t=t.replace(/<\/?div>/g,"")),CKEDITOR.env.gecko&&e.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(t=t.replace(/^<br><br>$/,"<br>")),-1<t.indexOf("<br><br>")&&(t="<p>"+t.replace(/(<br>){2,}/g,function(e){return n(e.length/4)})+"</p>")),o(e,t))}function i(){function e(){var e={},t;for(t in CKEDITOR.dtd)"$"!=t.charAt(0)&&"div"!=t&&"span"!=t&&(e[t]=1);return e}var t,n;return{get:function(r){return"plain-text"==r?t||(t=new CKEDITOR.filter("br")):"semantic-content"==r?((r=n)||(r=new CKEDITOR.filter,r.allow({$1:{elements:e(),attributes:!0,styles:!1,classes:!1}}),r=n=r),r):r?new CKEDITOR.filter(r):null}}}function s(e,t,n){var t=CKEDITOR.htmlParser.fragment.fromHtml(t),r=new CKEDITOR.htmlParser.basicWriter;return n.applyTo(t,!0,!1,e.activeEnterMode),t.writeHtml(r),r.getHtml()}function o(e,t){return e.enterMode==CKEDITOR.ENTER_BR?t=t.replace(/(<\/p><p>)+/g,function(e){return CKEDITOR.tools.repeat("<br>",2*(e.length/7))}).replace(/<\/?p>/g,""):e.enterMode==CKEDITOR.ENTER_DIV&&(t=t.replace(/<(\/)?p>/g,"<$1div>")),t}function u(e){e.data.preventDefault(),e.data.$.dataTransfer.dropEffect="none"}function a(t){var n=CKEDITOR.plugins.clipboard;t.on("contentDom",function(){function r(n,r,i){r.select(),e(t,{dataTransfer:i,method:"drop"},1),i.sourceEditor.fire("saveSnapshot"),i.sourceEditor.editable().extractHtmlFromRange(n),i.sourceEditor.getSelection().selectRanges([n]),i.sourceEditor.fire("saveSnapshot")}function i(r,i){r.select(),e(t,{dataTransfer:i,method:"drop"},1),n.resetDragDataTransfer()}function s(e,n,r){var i={$:e.data.$,target:e.data.getTarget()};n&&(i.dragRange=n),r&&(i.dropRange=r),!1===t.fire(e.name,i)&&e.data.preventDefault()}function o(e){return e.type!=CKEDITOR.NODE_ELEMENT&&(e=e.getParent()),e.getChildCount()}var u=t.editable(),a=CKEDITOR.plugins.clipboard.getDropTarget(t),f=t.ui.space("top"),l=t.ui.space("bottom");n.preventDefaultDropOnElement(f),n.preventDefaultDropOnElement(l),u.attachListener(a,"dragstart",s),u.attachListener(t,"dragstart",n.resetDragDataTransfer,n,null,1),u.attachListener(t,"dragstart",function(e){n.initDragDataTransfer(e,t),e=n.dragRange=t.getSelection().getRanges()[0],CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(n.dragStartContainerChildCount=e?o(e.startContainer):null,n.dragEndContainerChildCount=e?o(e.endContainer):null)},null,null,2),u.attachListener(a,"dragend",s),u.attachListener(t,"dragend",n.initDragDataTransfer,n,null,1),u.attachListener(t,"dragend",n.resetDragDataTransfer,n,null,100),u.attachListener(a,"dragover",function(e){var t=e.data.getTarget();t&&t.is&&t.is("html")?e.data.preventDefault():CKEDITOR.env.ie&&CKEDITOR.plugins.clipboard.isFileApiSupported&&e.data.$.dataTransfer.types.contains("Files")&&e.data.preventDefault()}),u.attachListener(a,"drop",function(e){e.data.preventDefault();var r=e.data.getTarget();if(!r.isReadOnly()||r.type==CKEDITOR.NODE_ELEMENT&&r.is("html")){var r=n.getRangeAtDropPosition(e,t),i=n.dragRange;r&&s(e,i,r)}}),u.attachListener(t,"drop",n.initDragDataTransfer,n,null,1),u.attachListener(t,"drop",function(e){if(e=e.data){var s=e.dropRange,o=e.dragRange,u=e.dataTransfer;u.getTransferType(t)==CKEDITOR.DATA_TRANSFER_INTERNAL?setTimeout(function(){n.internalDrop(o,s,u,t)},0):u.getTransferType(t)==CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?r(o,s,u):i(s,u)}},null,null,9999)})}CKEDITOR.plugins.add("clipboard",{requires:"dialog",init:function(e){var o,u=i();e.config.forcePasteAsPlainText?o="plain-text":e.config.pasteFilter?o=e.config.pasteFilter:CKEDITOR.env.webkit&&!("pasteFilter"in e.config)&&(o="semantic-content"),e.pasteFilter=u.get(o),t(e),a(e),CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js")),e.on("paste",function(t){t.data.dataTransfer||(t.data.dataTransfer=new CKEDITOR.plugins.clipboard.dataTransfer);if(!t.data.dataValue){var n=t.data.dataTransfer,r=n.getData("text/html");if(r)t.data.dataValue=r,t.data.type="html";else if(r=n.getData("text/plain"))t.data.dataValue=e.editable().transformPlainTextToHtml(r),t.data.type="text"}},null,null,1),e.on("paste",function(e){var t=e.data.dataValue,n=CKEDITOR.dtd.$block;-1<t.indexOf("Apple-")&&(t=t.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),"html"!=e.data.type&&(t=t.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,function(e,t){return t.replace(/\t/g,"&nbsp;&nbsp; &nbsp;")})),-1<t.indexOf('<br class="Apple-interchange-newline">')&&(e.data.startsWithEOL=1,e.data.preSniffing="html",t=t.replace(/<br class="Apple-interchange-newline">/,"")),t=t.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1"));if(t.match(/^<[^<]+cke_(editable|contents)/i)){var r,i,s=new CKEDITOR.dom.element("div");for(s.setHtml(t);1==s.getChildCount()&&(r=s.getFirst())&&r.type==CKEDITOR.NODE_ELEMENT&&(r.hasClass("cke_editable")||r.hasClass("cke_contents"));)s=i=r;i&&(t=i.getHtml().replace(/<br>$/i,""))}CKEDITOR.env.ie?t=t.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,function(t,r){return r.toLowerCase()in n?(e.data.preSniffing="html","<"+r):t}):CKEDITOR.env.webkit?t=t.replace(/<\/(\w+)><div><br><\/div>$/,function(t,r){return r in n?(e.data.endsWithEOL=1,"</"+r+">"):t}):CKEDITOR.env.gecko&&(t=t.replace(/(\s)<br>$/,"$1")),e.data.dataValue=t},null,null,3),e.on("paste",function(t){var t=t.data,i=t.type,o=t.dataValue,a,f=e.config.clipboard_defaultContentType||"html",l=t.dataTransfer.getTransferType(e);a="html"==i||"html"==t.preSniffing?"html":n(o),"htmlifiedtext"==a&&(o=r(e.config,o)),"text"==i&&"html"==a?o=s(e,o,u.get("plain-text")):l==CKEDITOR.DATA_TRANSFER_EXTERNAL&&e.pasteFilter&&!t.dontFilter&&(o=s(e,o,e.pasteFilter)),t.startsWithEOL&&(o='<br data-cke-eol="1">'+o),t.endsWithEOL&&(o+='<br data-cke-eol="1">'),"auto"==i&&(i="html"==a||"html"==f?"html":"text"),t.type=i,t.dataValue=o,delete t.preSniffing,delete t.startsWithEOL,delete t.endsWithEOL},null,null,6),e.on("paste",function(t){t=t.data,t.dataValue&&(e.insertHtml(t.dataValue,t.type,t.range),setTimeout(function(){e.fire("afterPaste")},0))},null,null,1e3),e.on("pasteDialog",function(t){setTimeout(function(){e.openDialog("paste",t.data)},0)})}}),CKEDITOR.plugins.clipboard={isCustomCopyCutSupported:!CKEDITOR.env.ie&&!CKEDITOR.env.iOS,isCustomDataTypesSupported:!CKEDITOR.env.ie,isFileApiSupported:!CKEDITOR.env.ie||9<CKEDITOR.env.version,mainPasteEvent:CKEDITOR.env.ie&&!CKEDITOR.env.edge?"beforepaste":"paste",canClipboardApiBeTrusted:function(e,t){return e.getTransferType(t)!=CKEDITOR.DATA_TRANSFER_EXTERNAL||CKEDITOR.env.chrome&&!e.isEmpty()||CKEDITOR.env.gecko&&(e.getData("text/html")||e.getFilesCount())?!0:!1},getDropTarget:function(e){var t=e.editable();return CKEDITOR.env.ie&&9>CKEDITOR.env.version||t.isInline()?t:e.document},fixSplitNodesAfterDrop:function(e,t,n,r){function i(e,n,r){var i=e;i.type==CKEDITOR.NODE_TEXT&&(i=e.getParent());if(i.equals(n)&&r!=n.getChildCount())return e=t,n=e.startContainer.getChild(e.startOffset-1),r=e.startContainer.getChild(e.startOffset),n&&n.type==CKEDITOR.NODE_TEXT&&r&&r.type==CKEDITOR.NODE_TEXT&&(i=n.getLength(),n.setText(n.getText()+r.getText()),r.remove(),e.setStart(n,i),e.collapse(!0)),!0}var s=t.startContainer;"number"==typeof r&&"number"==typeof n&&s.type==CKEDITOR.NODE_ELEMENT&&!i(e.startContainer,s,n)&&i(e.endContainer,s,r)},isDropRangeAffectedByDragRange:function(e,t){var n=t.startContainer,r=t.endOffset;return e.endContainer.equals(n)&&e.endOffset<=r||e.startContainer.getParent().equals(n)&&e.startContainer.getIndex()<r||e.endContainer.getParent().equals(n)&&e.endContainer.getIndex()<r?!0:!1},internalDrop:function(t,n,r,i){var s=CKEDITOR.plugins.clipboard,o=i.editable(),u,a;i.fire("saveSnapshot"),i.fire("lockSnapshot",{dontUpdate:1}),CKEDITOR.env.ie&&10>CKEDITOR.env.version&&this.fixSplitNodesAfterDrop(t,n,s.dragStartContainerChildCount,s.dragEndContainerChildCount),(a=this.isDropRangeAffectedByDragRange(t,n))||(u=t.createBookmark(!1)),s=n.clone().createBookmark(!1),a&&(u=t.createBookmark(!1)),t=u.startNode,a=u.endNode;var f=s.startNode;a&&t.getPosition(f)==CKEDITOR.POSITION_PRECEDING&&a.getPosition(f)==CKEDITOR.POSITION_FOLLOWING?(i.getSelection().selectRanges([n]),t.remove(),a.remove(),f.remove()):(t=i.createRange(),t.moveToBookmark(u),o.extractHtmlFromRange(t,1),n=i.createRange(),n.moveToBookmark(s),e(i,{dataTransfer:r,method:"drop",range:n},1)),i.fire("unlockSnapshot")},getRangeAtDropPosition:function(e,t){var n=e.data.$,r=n.clientX,i=n.clientY,s=t.getSelection(!0).getRanges()[0],o=t.createRange();if(e.data.testRange)return e.data.testRange;if(document.caretRangeFromPoint)n=t.document.$.caretRangeFromPoint(r,i),o.setStart(CKEDITOR.dom.node(n.startContainer),n.startOffset),o.collapse(!0);else if(n.rangeParent)o.setStart(CKEDITOR.dom.node(n.rangeParent),n.rangeOffset),o.collapse(!0);else{if(CKEDITOR.env.ie&&8<CKEDITOR.env.version&&s&&t.editable().hasFocus)return s;if(!document.body.createTextRange)return null;t.focus(),n=t.document.getBody().$.createTextRange();try{for(var u=!1,a=0;20>a&&!u;a++){if(!u)try{n.moveToPoint(r,i-a),u=!0}catch(f){}if(!u)try{n.moveToPoint(r,i+a),u=!0}catch(l){}}if(u){var c="cke-temp-"+(new Date).getTime();n.pasteHTML('<span id="'+c+'">​</span>');var h=t.document.getById(c);o.moveToPosition(h,CKEDITOR.POSITION_BEFORE_START),h.remove()}else{var p=t.document.$.elementFromPoint(r,i),d=new CKEDITOR.dom.element(p),v;if(!!d.equals(t.editable())||"html"==d.getName())return s&&s.startContainer&&!s.startContainer.equals(t.editable())?s:null;v=d.getClientRect(),r<v.left?o.setStartAt(d,CKEDITOR.POSITION_AFTER_START):o.setStartAt(d,CKEDITOR.POSITION_BEFORE_END),o.collapse(!0)}}catch(m){return null}}return o},initDragDataTransfer:function(e,t){var n=e.data.$?e.data.$.dataTransfer:null,r=new this.dataTransfer(n,t);n?this.dragData&&r.id==this.dragData.id?r=this.dragData:this.dragData=r:this.dragData?r=this.dragData:this.dragData=r,e.data.dataTransfer=r},resetDragDataTransfer:function(){this.dragData=null},initPasteDataTransfer:function(e,t){if(this.isCustomCopyCutSupported&&e&&e.data&&e.data.$){var n=new this.dataTransfer(e.data.$.clipboardData,t);return this.copyCutData&&n.id==this.copyCutData.id?(n=this.copyCutData,n.$=e.data.$.clipboardData):this.copyCutData=n,n}return new this.dataTransfer(null,t)},preventDefaultDropOnElement:function(e){e&&e.on("dragover",u)}};var f=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?"cke/id":"Text";CKEDITOR.plugins.clipboard.dataTransfer=function(e,t){e&&(this.$=e),this._={metaRegExp:/^<meta.*?>/,bodyRegExp:/<body(?:[\s\S]*?)>([\s\S]*)<\/body>/,fragmentRegExp:/<\!--(?:Start|End)Fragment--\>/g,data:{},files:[],normalizeType:function(e){return e=e.toLowerCase(),e=="text"||e=="text/plain"?"Text":e=="url"?"URL":e}},this.id=this.getData(f),this.id||(this.id="Text"==f?"":"cke-"+CKEDITOR.tools.getUniqueId());if("Text"!=f)try{this.$.setData(f,this.id)}catch(n){}t&&(this.sourceEditor=t,this.setData("text/html",t.getSelectedHtml(1)),"Text"!=f&&!this.getData("text/plain")&&this.setData("text/plain",t.getSelection().getSelectedText()))},CKEDITOR.DATA_TRANSFER_INTERNAL=1,CKEDITOR.DATA_TRANSFER_CROSS_EDITORS=2,CKEDITOR.DATA_TRANSFER_EXTERNAL=3,CKEDITOR.plugins.clipboard.dataTransfer.prototype={getData:function(e){var e=this._.normalizeType(e),t=this._.data[e];if(void 0===t||null===t||""===t)try{t=this.$.getData(e)}catch(n){}if(void 0===t||null===t||""===t)t="";if("text/html"==e){if(t=t.replace(this._.metaRegExp,""),(e=this._.bodyRegExp.exec(t))&&e.length)t=e[1],t=t.replace(this._.fragmentRegExp,"")}else"Text"==e&&CKEDITOR.env.gecko&&this.getFilesCount()&&"file://"==t.substring(0,7)&&(t="");return t},setData:function(e,t){e=this._.normalizeType(e),this._.data[e]=t;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported||"URL"==e||"Text"==e){"Text"==f&&"Text"==e&&(this.id=t);try{this.$.setData(e,t)}catch(n){}}},getTransferType:function(e){return this.sourceEditor?this.sourceEditor==e?CKEDITOR.DATA_TRANSFER_INTERNAL:CKEDITOR.DATA_TRANSFER_CROSS_EDITORS:CKEDITOR.DATA_TRANSFER_EXTERNAL},cacheData:function(){function e(e){var e=t._.normalizeType(e),n=t.getData(e);n&&(t._.data[e]=n)}if(this.$){var t=this,n,r;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(n=0;n<this.$.types.length;n++)e(this.$.types[n])}else e("Text"),e("URL");r=this._getImageFromClipboard();if(this.$&&this.$.files||r){this._.files=[];for(n=0;n<this.$.files.length;n++)this._.files.push(this.$.files[n]);0===this._.files.length&&r&&this._.files.push(r)}}},getFilesCount:function(){return this._.files.length?this._.files.length:this.$&&this.$.files&&this.$.files.length?this.$.files.length:this._getImageFromClipboard()?1:0},getFile:function(e){return this._.files.length?this._.files[e]:this.$&&this.$.files&&this.$.files.length?this.$.files[e]:0===e?this._getImageFromClipboard():void 0},isEmpty:function(){var e={},t;if(this.getFilesCount())return!1;for(t in this._.data)e[t]=1;if(this.$)if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(var n=0;n<this.$.types.length;n++)e[this.$.types[n]]=1}else e.Text=1,e.URL=1;"Text"!=f&&(e[f]=0);for(t in e)if(e[t]&&""!==this.getData(t))return!1;return!0},_getImageFromClipboard:function(){var e;if(this.$&&this.$.items&&this.$.items[0])try{if((e=this.$.items[0].getAsFile())&&e.type)return e}catch(t){}}}}(),function(){var e='<a id="{id}" class="cke_button cke_button__{name} cke_button_{state} {cls}"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' title="{title}" tabindex="-1" hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="{hasArrow}" aria-disabled="{ariaDisabled}"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(e+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(e+=' onblur="this.style.cssText = this.style.cssText;"');var e=e+(' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span class="cke_button_icon cke_button__{iconName}_icon" style="{style}"'),e=e+'>&nbsp;</span><span id="{id}_label" class="cke_button_label cke_button__{name}_label" aria-hidden="false">{label}</span>{arrowHtml}</a>',t=CKEDITOR.addTemplate("buttonArrow",'<span class="cke_button_arrow">'+(CKEDITOR.env.hc?"&#9660;":"")+"</span>"),n=CKEDITOR.addTemplate("button",e);CKEDITOR.plugins.add("button",{beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}}),CKEDITOR.UI_BUTTON="button",CKEDITOR.ui.button=function(e){CKEDITOR.tools.extend(this,e,{title:e.label,click:e.click||function(t){t.execCommand(e.command)}}),this._={}},CKEDITOR.ui.button.handler={create:function(e){return new CKEDITOR.ui.button(e)}},CKEDITOR.ui.button.prototype={render:function(e,r){function i(){var t=e.mode;t&&(t=this.modes[t]?void 0!==m[t]?m[t]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,t=e.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:t,this.setState(t),this.refresh&&this.refresh())}var s=CKEDITOR.env,u=this._.id=CKEDITOR.tools.getNextId(),a="",f=this.command,l;this._.editor=e;var c={id:u,button:this,editor:e,focus:function(){CKEDITOR.document.getById(u).focus()},execute:function(){this.button.click(e)},attach:function(e){this.button.attach(e)}},h=CKEDITOR.tools.addFunction(function(e){if(c.onkey)return e=new CKEDITOR.dom.event(e),!1!==c.onkey(c,e.getKeystroke())}),d=CKEDITOR.tools.addFunction(function(e){var t;return c.onfocus&&(t=!1!==c.onfocus(c,new CKEDITOR.dom.event(e))),t}),v=0;c.clickFn=l=CKEDITOR.tools.addFunction(function(){v&&(e.unlockSelection(1),v=0),c.execute(),s.iOS&&e.focus()});if(this.modes){var m={};e.on("beforeModeUnload",function(){e.mode&&this._.state!=CKEDITOR.TRISTATE_DISABLED&&(m[e.mode]=this._.state)},this),e.on("activeFilterChange",i,this),e.on("mode",i,this),!this.readOnly&&e.on("readOnly",i,this)}else f&&(f=e.getCommand(f))&&(f.on("state",function(){this.setState(f.state)},this),a+=f.state==CKEDITOR.TRISTATE_ON?"on":f.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off");this.directional&&e.on("contentDirChanged",function(t){var n=CKEDITOR.document.getById(this._.id),r=n.getFirst(),t=t.data;t!=e.lang.dir?n.addClass("cke_"+t):n.removeClass("cke_ltr").removeClass("cke_rtl"),r.setAttribute("style",CKEDITOR.skin.getIconStyle(y,"rtl"==t,this.icon,this.iconOffset))},this),f||(a+="off");var g=this.name||this.command,y=g;return this.icon&&!/\./.test(this.icon)&&(y=this.icon,this.icon=null),a={id:u,name:g,iconName:y,label:this.label,cls:this.className||"",state:a,ariaDisabled:"disabled"==a?"true":"false",title:this.title,titleJs:s.gecko&&!s.hc?"":(this.title||"").replace("'",""),hasArrow:this.hasArrow?"true":"false",keydownFn:h,focusFn:d,clickFn:l,style:CKEDITOR.skin.getIconStyle(y,"rtl"==e.lang.dir,this.icon,this.iconOffset),arrowHtml:this.hasArrow?t.output():""},n.output(a,r),this.onRender&&this.onRender(),c},setState:function(e){if(this._.state==e)return!1;this._.state=e;var t=CKEDITOR.document.getById(this._.id);return t?(t.setState(e,"cke_button"),e==CKEDITOR.TRISTATE_DISABLED?t.setAttribute("aria-disabled",!0):t.removeAttribute("aria-disabled"),this.hasArrow?(e=e==CKEDITOR.TRISTATE_ON?this._.editor.lang.button.selectedLabel.replace(/%1/g,this.label):this.label,CKEDITOR.document.getById(this._.id+"_label").setText(e)):e==CKEDITOR.TRISTATE_ON?t.setAttribute("aria-pressed",!0):t.removeAttribute("aria-pressed"),!0):!1},getState:function(){return this._.state},toFeature:function(e){if(this._.feature)return this._.feature;var t=this;return!this.allowedContent&&!this.requiredContent&&this.command&&(t=e.getCommand(this.command)||t),this._.feature=t}},CKEDITOR.ui.prototype.addButton=function(e,t){this.add(e,CKEDITOR.UI_BUTTON,t)}}(),CKEDITOR.plugins.add("panelbutton",{requires:"button",onLoad:function(){function e(e){var t=this._;t.state!=CKEDITOR.TRISTATE_DISABLED&&(this.createPanel(e),t.on?t.panel.hide():t.panel.showBlock(this._.id,this.document.getById(this._.id),4))}CKEDITOR.ui.panelButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(t){var n=t.panel||{};delete t.panel,this.base(t),this.document=n.parent&&n.parent.getDocument()||CKEDITOR.document,n.block={attributes:n.attributes},this.hasArrow=n.toolbarRelated=!0,this.click=e,this._={panelDefinition:n}},statics:{handler:{create:function(e){return new CKEDITOR.ui.panelButton(e)}}},proto:{createPanel:function(e){var t=this._;if(!t.panel){var n=this._.panelDefinition,r=this._.panelDefinition.block,i=n.parent||CKEDITOR.document.getBody(),s=this._.panel=new CKEDITOR.ui.floatPanel(e,i,n),n=s.addBlock(t.id,r),o=this;s.onShow=function(){o.className&&this.element.addClass(o.className+"_panel"),o.setState(CKEDITOR.TRISTATE_ON),t.on=1,o.editorFocus&&e.focus(),o.onOpen&&o.onOpen()},s.onHide=function(n){o.className&&this.element.getFirst().removeClass(o.className+"_panel"),o.setState(o.modes&&o.modes[e.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),t.on=0,!n&&o.onClose&&o.onClose()},s.onEscape=function(){s.hide(1),o.document.getById(t.id).focus()},this.onBlock&&this.onBlock(s,n),n.onHide=function(){t.on=0,o.setState(CKEDITOR.TRISTATE_OFF)}}}}})},beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_PANELBUTTON,CKEDITOR.ui.panelButton.handler)}}),CKEDITOR.UI_PANELBUTTON="panelbutton",function(){CKEDITOR.plugins.add("panel",{beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler)}}),CKEDITOR.UI_PANEL="panel",CKEDITOR.ui.panel=function(e,t){t&&CKEDITOR.tools.extend(this,t),CKEDITOR.tools.extend(this,{className:"",css:[]}),this.id=CKEDITOR.tools.getNextId(),this.document=e,this.isFramed=this.forceIFrame||this.css.length,this._={blocks:{}}},CKEDITOR.ui.panel.handler={create:function(e){return new CKEDITOR.ui.panel(e)}};var e=CKEDITOR.addTemplate("panel",'<div lang="{langCode}" id="{id}" dir={dir} class="cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}" style="z-index:{z-index}" role="presentation">{frame}</div>'),t=CKEDITOR.addTemplate("panel-frame",'<iframe id="{id}" class="cke_panel_frame" role="presentation" frameborder="0" src="{src}"></iframe>'),n=CKEDITOR.addTemplate("panel-frame-inner",'<!DOCTYPE html><html class="cke_panel_container {env}" dir="{dir}" lang="{langCode}"><head>{css}</head><body class="cke_{dir}" style="margin:0;padding:0" onload="{onload}"></body></html>');CKEDITOR.ui.panel.prototype={render:function(r,i){this.getHolderElement=function(){var e=this._.holder;if(!e){if(this.isFramed){var e=this.document.getById(this.id+"_frame"),t=e.getParent(),e=e.getFrameDocument();CKEDITOR.env.iOS&&t.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"}),t=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind(function(){this.isLoaded=!0,this.onLoad&&this.onLoad()},this)),e.write(n.output(CKEDITOR.tools.extend({css:CKEDITOR.tools.buildStyleHtml(this.css),onload:"window.parent.CKEDITOR.tools.callFunction("+t+");"},s))),e.getWindow().$.CKEDITOR=CKEDITOR,e.on("keydown",function(e){var t=e.data.getKeystroke(),n=this.document.getById(this.id).getAttribute("dir");this._.onKeyDown&&!1===this._.onKeyDown(t)?e.data.preventDefault():(27==t||t==("rtl"==n?39:37))&&this.onEscape&&!1===this.onEscape(t)&&e.data.preventDefault()},this),e=e.getBody(),e.unselectable(),CKEDITOR.env.air&&CKEDITOR.tools.callFunction(t)}else e=this.document.getById(this.id);this._.holder=e}return e};var s={editorId:r.id,id:this.id,langCode:r.langCode,dir:r.lang.dir,cls:this.className,frame:"",env:CKEDITOR.env.cssClass,"z-index":r.config.baseFloatZIndex+1};if(this.isFramed){var o=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())":"";s.frame=t.output({id:this.id+"_frame",src:o})}return o=e.output(s),i&&i.push(o),o},addBlock:function(e,t){return t=this._.blocks[e]=t instanceof CKEDITOR.ui.panel.block?t:new CKEDITOR.ui.panel.block(this.getHolderElement(),t),this._.currentBlock||this.showBlock(e),t},getBlock:function(e){return this._.blocks[e]},showBlock:function(e){var e=this._.blocks[e],t=this._.currentBlock,n=!this.forceIFrame||CKEDITOR.env.ie?this._.holder:this.document.getById(this.id+"_frame");return t&&t.hide(),this._.currentBlock=e,CKEDITOR.fire("ariaWidget",n),e._.focusIndex=-1,this._.onKeyDown=e.onKeyDown&&CKEDITOR.tools.bind(e.onKeyDown,e),e.show(),e},destroy:function(){this.element&&this.element.remove()}},CKEDITOR.ui.panel.block=CKEDITOR.tools.createClass({$:function(e,t){this.element=e.append(e.getDocument().createElement("div",{attributes:{tabindex:-1,"class":"cke_panel_block"},styles:{display:"none"}})),t&&CKEDITOR.tools.extend(this,t),this.element.setAttributes({role:this.attributes.role||"presentation","aria-label":this.attributes["aria-label"],title:this.attributes.title||this.attributes["aria-label"]}),this.keys={},this._.focusIndex=-1,this.element.disableContextMenu()},_:{markItem:function(e){-1!=e&&(e=this.element.getElementsByTag("a").getItem(this._.focusIndex=e),CKEDITOR.env.webkit&&e.getDocument().getWindow().focus(),e.focus(),this.onMark&&this.onMark(e))}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){(!this.onHide||!0!==this.onHide.call(this))&&this.element.setStyle("display","none")},onKeyDown:function(e,t){var n=this.keys[e];switch(n){case"next":for(var r=this._.focusIndex,n=this.element.getElementsByTag("a"),i;i=n.getItem(++r);)if(i.getAttribute("_cke_focus")&&i.$.offsetWidth){this._.focusIndex=r,i.focus();break}return!i&&!t?(this._.focusIndex=-1,this.onKeyDown(e,1)):!1;case"prev":r=this._.focusIndex;for(n=this.element.getElementsByTag("a");0<r&&(i=n.getItem(--r));){if(i.getAttribute("_cke_focus")&&i.$.offsetWidth){this._.focusIndex=r,i.focus();break}i=null}return!i&&!t?(this._.focusIndex=n.count(),this.onKeyDown(e,1)):!1;case"click":case"mouseup":return r=this._.focusIndex,(i=0<=r&&this.element.getElementsByTag("a").getItem(r))&&(i.$[n]?i.$[n]():i.$["on"+n]()),!1}return!0}}})}(),CKEDITOR.plugins.add("floatpanel",{requires:"panel"}),function(){function e(e,n,r,i,s){var s=CKEDITOR.tools.genKey(n.getUniqueId(),r.getUniqueId(),e.lang.dir,e.uiColor||"",i.css||"",s||""),o=t[s];return o||(o=t[s]=new CKEDITOR.ui.panel(n,i),o.element=r.append(CKEDITOR.dom.element.createFromHtml(o.render(e),n)),o.element.setStyles({display:"none",position:"absolute"})),o}var t={};CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(t,n,i,s){function o(){l.hide()}i.forceIFrame=1,i.toolbarRelated&&t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(n=CKEDITOR.document.getById("cke_"+t.name));var u=n.getDocument(),s=e(t,u,n,i,s||0),a=s.element,f=a.getFirst(),l=this;a.disableContextMenu(),this.element=a,this._={editor:t,panel:s,parentElement:n,definition:i,document:u,iframe:f,children:[],dir:t.lang.dir},t.on("mode",o),t.on("resize",o),CKEDITOR.env.iOS||u.getWindow().on("resize",o)},proto:{addBlock:function(e,t){return this._.panel.addBlock(e,t)},addListBlock:function(e,t){return this._.panel.addListBlock(e,t)},getBlock:function(e){return this._.panel.getBlock(e)},showBlock:function(e,t,n,r,i,s){var o=this._.panel,u=o.showBlock(e);this.allowBlur(!1),e=this._.editor.editable(),this._.returnFocus=e.hasFocus?e:new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement),this._.hideTimeout=0;var a=this.element,e=this._.iframe,e=CKEDITOR.env.ie&&!CKEDITOR.env.edge?e:new CKEDITOR.dom.window(e.$.contentWindow),f=a.getDocument(),l=this._.parentElement.getPositionedAncestor(),c=t.getDocumentPosition(f),f=l?l.getDocumentPosition(f):{x:0,y:0},h="rtl"==this._.dir,p=c.x+(r||0)-f.x,d=c.y+(i||0)-f.y;!h||1!=n&&4!=n?!h&&(2==n||3==n)&&(p+=t.$.offsetWidth-1):p+=t.$.offsetWidth;if(3==n||4==n)d+=t.$.offsetHeight-1;this._.panel._.offsetParentId=t.getId(),a.setStyles({top:d+"px",left:0,display:""}),a.setOpacity(0),a.getFirst().removeStyle("width"),this._.editor.focusManager.add(e),this._.blurSet||(CKEDITOR.event.useCapture=!0,e.on("blur",function(e){function t(){delete this._.returnFocus,this.hide()}this.allowBlur()&&e.data.getPhase()==CKEDITOR.EVENT_PHASE_AT_TARGET&&this.visible&&!this._.activeChild&&(CKEDITOR.env.iOS?this._.hideTimeout||(this._.hideTimeout=CKEDITOR.tools.setTimeout(t,0,this)):t.call(this))},this),e.on("focus",function(){this._.focused=!0,this.hideChild(),this.allowBlur(!0)},this),CKEDITOR.env.iOS&&(e.on("touchstart",function(){clearTimeout(this._.hideTimeout)},this),e.on("touchend",function(){this._.hideTimeout=0,this.focus()},this)),CKEDITOR.event.useCapture=!1,this._.blurSet=1),o.onEscape=CKEDITOR.tools.bind(function(e){if(this.onEscape&&this.onEscape(e)===!1)return!1},this),CKEDITOR.tools.setTimeout(function(){var e=CKEDITOR.tools.bind(function(){a.removeStyle("width");if(u.autoSize){var e=u.element.getDocument(),e=(CKEDITOR.env.webkit?u.element:e.getBody()).$.scrollWidth;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&e>0&&(e+=(a.$.offsetWidth||0)-(a.$.clientWidth||0)+3),a.setStyle("width",e+10+"px"),e=u.element.$.scrollHeight,CKEDITOR.env.ie&&CKEDITOR.env.quirks&&e>0&&(e+=(a.$.offsetHeight||0)-(a.$.clientHeight||0)+3),a.setStyle("height",e+"px"),o._.currentBlock.element.setStyle("display","none").removeStyle("display")}else a.removeStyle("height");h&&(p-=a.$.offsetWidth),a.setStyle("left",p+"px");var t=o.element.getWindow(),e=a.$.getBoundingClientRect(),t=t.getViewPaneSize(),n=e.width||e.right-e.left,r=e.height||e.bottom-e.top,i=h?e.right:t.width-e.left,f=h?t.width-e.right:e.left;h?i<n&&(p=f>n?p+n:t.width>n?p-e.left:p-e.right+t.width):i<n&&(p=f>n?p-n:t.width>n?p-e.right+t.width:p-e.left),n=e.top,t.height-e.top<r&&(d=n>r?d-r:t.height>r?d-e.bottom+t.height:d-e.top),CKEDITOR.env.ie&&(t=e=new CKEDITOR.dom.element(a.$.offsetParent),t.getName()=="html"&&(t=t.getDocument().getBody()),t.getComputedStyle("direction")=="rtl"&&(p=CKEDITOR.env.ie8Compat?p-a.getDocument().getDocumentElement().$.scrollLeft*2:p-(e.$.scrollWidth-e.$.clientWidth)));var e=a.getFirst(),l;(l=e.getCustomData("activePanel"))&&l.onHide&&l.onHide.call(this,1),e.setCustomData("activePanel",this),a.setStyles({top:d+"px",left:p+"px"}),a.setOpacity(1),s&&s()},this);o.isLoaded?e():o.onLoad=e,CKEDITOR.tools.setTimeout(function(){var e=CKEDITOR.env.webkit&&CKEDITOR.document.getWindow().getScrollPosition().y;this.focus(),u.element.focus(),CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=e),this.allowBlur(!0),this._.editor.fire("panelShow",this)},0,this)},CKEDITOR.env.air?200:0,this),this.visible=1,this.onShow&&this.onShow.call(this)},focus:function(){if(CKEDITOR.env.webkit){var e=CKEDITOR.document.getActive();e&&!e.equals(this._.iframe)&&e.$.blur()}(this._.lastFocused||this._.iframe.getFrameDocument().getWindow()).focus()},blur:function(){var e=this._.iframe.getFrameDocument().getActive();e&&e.is("a")&&(this._.lastFocused=e)},hide:function(e){if(this.visible&&(!this.onHide||!0!==this.onHide.call(this))){this.hideChild(),CKEDITOR.env.gecko&&this._.iframe.getFrameDocument().$.activeElement.blur(),this.element.setStyle("display","none"),this.visible=0,this.element.getFirst().removeCustomData("activePanel");if(e=e&&this._.returnFocus)CKEDITOR.env.webkit&&e.type&&e.getWindow().$.focus(),e.focus();delete this._.lastFocused,this._.editor.fire("panelHide",this)}},allowBlur:function(e){var t=this._.panel;return void 0!==e&&(t.allowBlur=e),t.allowBlur},showAsChild:function(e,t,n,r,i,s){this._.activeChild==e&&e._.panel._.offsetParentId==n.getId()||(this.hideChild(),e.onHide=CKEDITOR.tools.bind(function(){CKEDITOR.tools.setTimeout(function(){this._.focused||this.hide()},0,this)},this),this._.activeChild=e,this._.focused=!1,e.showBlock(t,n,r,i,s),this.blur(),(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&setTimeout(function(){e.element.getChild(0).$.style.cssText+=""},100))},hideChild:function(e){var t=this._.activeChild;t&&(delete t.onHide,delete this._.activeChild,t.hide(),e&&this.focus())}}}),CKEDITOR.on("instanceDestroyed",function(){var e=CKEDITOR.tools.isEmpty(CKEDITOR.instances),n;for(n in t){var r=t[n];e?r.destroy():r.element.hide()}e&&(t={})})}(),CKEDITOR.plugins.add("colorbutton",{requires:"panelbutton,floatpanel",init:function(e){function t(t,r,o,u){var a=new CKEDITOR.style(i["colorButton_"+r+"Style"]),l=CKEDITOR.tools.getNextId()+"_colorBox";e.ui.add(t,CKEDITOR.UI_PANELBUTTON,{label:o,title:o,modes:{wysiwyg:1},editorFocus:0,toolbar:"colors,"+u,allowedContent:a,requiredContent:a,panel:{css:CKEDITOR.skin.getPath("editor"),attributes:{role:"listbox","aria-label":s.panelTitle}},onBlock:function(t,i){i.autoSize=!0,i.element.addClass("cke_colorblock"),i.element.setHtml(n(t,r,l)),i.element.getDocument().getBody().setStyle("overflow","hidden"),CKEDITOR.ui.fire("ready",this);var s=i.keys,o="rtl"==e.lang.dir;s[o?37:39]="next",s[40]="next",s[9]="next",s[o?39:37]="prev",s[38]="prev",s[CKEDITOR.SHIFT+9]="prev",s[32]="click"},refresh:function(){e.activeFilter.check(a)||this.setState(CKEDITOR.TRISTATE_DISABLED)},onOpen:function(){var t=e.getSelection(),t=t&&t.getStartElement(),t=e.elementPath(t),n;if(t){t=t.block||t.blockLimit||e.document.getBody();do n=t&&t.getComputedStyle("back"==r?"background-color":"color")||"transparent";while("back"==r&&"transparent"==n&&t&&(t=t.getParent()));if(!n||"transparent"==n)n="#ffffff";return this._.panel._.iframe.getFrameDocument().getById(l).setStyle("background-color",n),n}}})}function n(t,n,o){var u=[],a=i.colorButton_colors.split(","),l=e.plugins.colordialog&&!1!==i.colorButton_enableMore,h=a.length+(l?2:1),d=CKEDITOR.tools.addFunction(function(n,s){function o(e){this.removeListener("ok",o),this.removeListener("cancel",o),"ok"==e.name&&u(this.getContentElement("picker","selectedColor").getValue(),s)}var u=arguments.callee;if("?"==n)e.openDialog("colordialog",function(){this.on("ok",o),this.on("cancel",o)});else{e.focus(),t.hide(),e.fire("saveSnapshot"),e.removeStyle(new CKEDITOR.style(i["colorButton_"+s+"Style"],{color:"inherit"}));if(n){var a=i["colorButton_"+s+"Style"];a.childRule="back"==s?function(e){return r
(e)}:function(e){return!e.is("a")&&!e.getElementsByTag("a").count()||r(e)},e.applyStyle(new CKEDITOR.style(a,{color:n}))}e.fire("saveSnapshot")}});u.push('<a class="cke_colorauto" _cke_focus=1 hidefocus=true title="',s.auto,'" onclick="CKEDITOR.tools.callFunction(',d,",null,'",n,"');return false;\" href=\"javascript:void('",s.auto,'\')" role="option" aria-posinset="1" aria-setsize="',h,'"><table role="presentation" cellspacing=0 cellpadding=0 width="100%"><tr><td><span class="cke_colorbox" id="',o,'"></span></td><td colspan=7 align=center>',s.auto,'</td></tr></table></a><table role="presentation" cellspacing=0 cellpadding=0 width="100%">');for(o=0;o<a.length;o++){0===o%8&&u.push("</tr><tr>");var v=a[o].split("/"),m=v[0],g=v[1]||m;v[1]||(m="#"+m.replace(/^(.)(.)(.)$/,"$1$1$2$2$3$3")),v=e.lang.colorbutton.colors[g]||g,u.push('<td><a class="cke_colorbox" _cke_focus=1 hidefocus=true title="',v,'" onclick="CKEDITOR.tools.callFunction(',d,",'",m,"','",n,"'); return false;\" href=\"javascript:void('",v,'\')" role="option" aria-posinset="',o+2,'" aria-setsize="',h,'"><span class="cke_colorbox" style="background-color:#',g,'"></span></a></td>')}return l&&u.push('</tr><tr><td colspan=8 align=center><a class="cke_colormore" _cke_focus=1 hidefocus=true title="',s.more,'" onclick="CKEDITOR.tools.callFunction(',d,",'?','",n,"');return false;\" href=\"javascript:void('",s.more,"')\"",' role="option" aria-posinset="',h,'" aria-setsize="',h,'">',s.more,"</a></td>"),u.push("</tr></table>"),u.join("")}function r(e){return"false"==e.getAttribute("contentEditable")||e.getAttribute("data-nostyle")}var i=e.config,s=e.lang.colorbutton;CKEDITOR.env.hc||(t("TextColor","fore",s.textColorTitle,10),t("BGColor","back",s.bgColorTitle,20))}}),CKEDITOR.config.colorButton_colors="000,800000,8B4513,2F4F4F,008080,000080,4B0082,696969,B22222,A52A2A,DAA520,006400,40E0D0,0000CD,800080,808080,F00,FF8C00,FFD700,008000,0FF,00F,EE82EE,A9A9A9,FFA07A,FFA500,FFFF00,00FF00,AFEEEE,ADD8E6,DDA0DD,D3D3D3,FFF0F5,FAEBD7,FFFFE0,F0FFF0,F0FFFF,F0F8FF,E6E6FA,FFF",CKEDITOR.config.colorButton_foreStyle={element:"span",styles:{color:"#(color)"},overrides:[{element:"font",attributes:{color:null}}]},CKEDITOR.config.colorButton_backStyle={element:"span",styles:{"background-color":"#(color)"}},CKEDITOR.plugins.colordialog={requires:"dialog",init:function(e){var t=new CKEDITOR.dialogCommand("colordialog");t.editorFocus=!1,e.addCommand("colordialog",t),CKEDITOR.dialog.add("colordialog",this.path+"dialogs/colordialog.js"),e.getColorFromDialog=function(t,n){var r=function(e){this.removeListener("ok",r),this.removeListener("cancel",r),e="ok"==e.name?this.getValueOf("picker","selectedColor"):null,t.call(n,e)},i=function(e){e.on("ok",r),e.on("cancel",r)};e.execCommand("colordialog"),e._.storedDialogs&&e._.storedDialogs.colordialog?i(e._.storedDialogs.colordialog):CKEDITOR.on("dialogDefinition",function(e){if("colordialog"==e.data.name){var t=e.data.definition;e.removeListener(),t.onLoad=CKEDITOR.tools.override(t.onLoad,function(e){return function(){i(this),t.onLoad=e,"function"==typeof e&&e.call(this)}})}})}}},CKEDITOR.plugins.add("colordialog",CKEDITOR.plugins.colordialog),function(){CKEDITOR.plugins.add("templates",{requires:"dialog",init:function(e){CKEDITOR.dialog.add("templates",CKEDITOR.getUrl(this.path+"dialogs/templates.js")),e.addCommand("templates",new CKEDITOR.dialogCommand("templates")),e.ui.addButton&&e.ui.addButton("Templates",{label:e.lang.templates.button,command:"templates",toolbar:"doctools,10"})}});var e={},t={};CKEDITOR.addTemplates=function(t,n){e[t]=n},CKEDITOR.getTemplates=function(t){return e[t]},CKEDITOR.loadTemplates=function(e,n){for(var r=[],i=0,s=e.length;i<s;i++)t[e[i]]||(r.push(e[i]),t[e[i]]=1);r.length?CKEDITOR.scriptLoader.load(r,n):setTimeout(n,0)}}(),CKEDITOR.config.templates_files=[CKEDITOR.getUrl("plugins/templates/templates/default.js")],CKEDITOR.config.templates_replaceContent=!0,CKEDITOR.plugins.add("menu",{requires:"floatpanel",beforeInit:function(e){for(var t=e.config.menu_groups.split(","),n=e._.menuGroups={},r=e._.menuItems={},i=0;i<t.length;i++)n[t[i]]=i+1;e.addMenuGroup=function(e,t){n[e]=t||100},e.addMenuItem=function(e,t){n[t.group]&&(r[e]=new CKEDITOR.menuItem(this,e,t))},e.addMenuItems=function(e){for(var t in e)this.addMenuItem(t,e[t])},e.getMenuItem=function(e){return r[e]},e.removeMenuItem=function(e){delete r[e]}}}),function(){function e(e){e.sort(function(e,t){return e.group<t.group?-1:e.group>t.group?1:e.order<t.order?-1:e.order>t.order?1:0})}var t='<span class="cke_menuitem"><a id="{id}" class="cke_menubutton cke_menubutton__{name} cke_menubutton_{state} {cls}" href="{href}" title="{title}" tabindex="-1"_cke_focus=1 hidefocus="true" role="{role}" aria-haspopup="{hasPopup}" aria-disabled="{disabled}" {ariaChecked}';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(t+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(t+=' onblur="this.style.cssText = this.style.cssText;"');var t=t+(' onmouseover="CKEDITOR.tools.callFunction({hoverFn},{index});" onmouseout="CKEDITOR.tools.callFunction({moveOutFn},{index});" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},{index}); return false;">'),n=CKEDITOR.addTemplate("menuItem",t+'<span class="cke_menubutton_inner"><span class="cke_menubutton_icon"><span class="cke_button_icon cke_button__{iconName}_icon" style="{iconStyle}"></span></span><span class="cke_menubutton_label">{label}</span>{arrowHtml}</span></a></span>'),r=CKEDITOR.addTemplate("menuArrow",'<span class="cke_menuarrow"><span>{label}</span></span>');CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(e,t){t=this._.definition=t||{},this.id=CKEDITOR.tools.getNextId(),this.editor=e,this.items=[],this._.listeners=[],this._.level=t.level||1;var n=CKEDITOR.tools.extend({},t.panel,{css:[CKEDITOR.skin.getPath("editor")],level:this._.level-1,block:{}}),r=n.block.attributes=n.attributes||{};!r.role&&(r.role="menu"),this._.panelDefinition=n},_:{onShow:function(){var e=this.editor.getSelection(),t=e&&e.getStartElement(),n=this.editor.elementPath(),r=this._.listeners;this.removeAll();for(var i=0;i<r.length;i++){var s=r[i](t,e,n);if(s)for(var o in s){var u=this.editor.getMenuItem(o);u&&(!u.command||this.editor.getCommand(u.command).state)&&(u.state=s[o],this.add(u))}}},onClick:function(e){this.hide(),e.onClick?e.onClick():e.command&&this.editor.execCommand(e.command)},onEscape:function(e){var t=this.parent;return t?t._.panel.hideChild(1):27==e&&this.hide(1),!1},onHide:function(){this.onHide&&this.onHide()},showSubMenu:function(e){var t=this._.subMenu,n=this.items[e];if(n=n.getItems&&n.getItems()){t?t.removeAll():(t=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+1},!0)),t.parent=this,t._.onClick=CKEDITOR.tools.bind(this._.onClick,this));for(var r in n){var i=this.editor.getMenuItem(r);i&&(i.state=n[r],t.add(i))}var s=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+(""+e));setTimeout(function(){t.show(s,2)},0)}else this._.panel.hideChild(1)}},proto:{add:function(e){e.order||(e.order=this.items.length),this.items.push(e)},removeAll:function(){this.items=[]},show:function(t,n,r,i){if(!this.parent&&(this._.onShow(),!this.items.length))return;var n=n||("rtl"==this.editor.lang.dir?2:1),s=this.items,o=this.editor,u=this._.panel,a=this._.element;if(!u){u=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level),u.onEscape=CKEDITOR.tools.bind(function(e){if(!1===this._.onEscape(e))return!1},this),u.onShow=function(){u._.panel.getHolderElement().getParent().addClass("cke").addClass("cke_reset_all")},u.onHide=CKEDITOR.tools.bind(function(){this._.onHide&&this._.onHide()},this),a=u.addBlock(this.id,this._.panelDefinition.block),a.autoSize=!0;var f=a.keys;f[40]="next",f[9]="next",f[38]="prev",f[CKEDITOR.SHIFT+9]="prev",f["rtl"==o.lang.dir?37:39]=CKEDITOR.env.ie?"mouseup":"click",f[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(f[13]="mouseup"),a=this._.element=a.element,f=a.getDocument(),f.getBody().setStyle("overflow","hidden"),f.getElementsByTag("html").getItem(0).setStyle("overflow","hidden"),this._.itemOverFn=CKEDITOR.tools.addFunction(function(e){clearTimeout(this._.showSubTimeout),this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,o.config.menu_subMenuDelay||400,this,[e])},this),this._.itemOutFn=CKEDITOR.tools.addFunction(function(){clearTimeout(this._.showSubTimeout)},this),this._.itemClickFn=CKEDITOR.tools.addFunction(function(e){var t=this.items[e];t.state==CKEDITOR.TRISTATE_DISABLED?this.hide(1):t.getItems?this._.showSubMenu(e):this._.onClick(t)},this)}e(s);for(var f=o.elementPath(),f=['<div class="cke_menu'+(f&&f.direction()!=o.lang.dir?" cke_mixed_dir_content":"")+'" role="presentation">'],l=s.length,c=l&&s[0].group,h=0;h<l;h++){var p=s[h];c!=p.group&&(f.push('<div class="cke_menuseparator" role="separator"></div>'),c=p.group),p.render(this,h,f)}f.push("</div>"),a.setHtml(f.join("")),CKEDITOR.ui.fire("ready",this),this.parent?this.parent._.panel.showAsChild(u,this.id,t,n,r,i):u.showBlock(this.id,t,n,r,i),o.fire("menuShow",[u])},addListener:function(e){this._.listeners.push(e)},hide:function(e){this._.onHide&&this._.onHide(),this._.panel&&this._.panel.hide(e)}}}),CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(e,t,n){CKEDITOR.tools.extend(this,n,{order:0,className:"cke_menubutton__"+t}),this.group=e._.menuGroups[this.group],this.editor=e,this.name=t},proto:{render:function(e,t,i){var s=e.id+(""+t),o="undefined"==typeof this.state?CKEDITOR.TRISTATE_OFF:this.state,u="",a=o==CKEDITOR.TRISTATE_ON?"on":o==CKEDITOR.TRISTATE_DISABLED?"disabled":"off";this.role in{menuitemcheckbox:1,menuitemradio:1}&&(u=' aria-checked="'+(o==CKEDITOR.TRISTATE_ON?"true":"false")+'"');var f=this.getItems,c="&#"+("rtl"==this.editor.lang.dir?"9668":"9658")+";",h=this.name;this.icon&&!/\./.test(this.icon)&&(h=this.icon),e={id:s,name:this.name,iconName:h,label:this.label,cls:this.className||"",state:a,hasPopup:f?"true":"false",disabled:o==CKEDITOR.TRISTATE_DISABLED,title:this.label,href:"javascript:void('"+(this.label||"").replace("'")+"')",hoverFn:e._.itemOverFn,moveOutFn:e._.itemOutFn,clickFn:e._.itemClickFn,index:t,iconStyle:CKEDITOR.skin.getIconStyle(h,"rtl"==this.editor.lang.dir,h==this.icon?null:this.icon,this.iconOffset),arrowHtml:f?r.output({label:c}):"",role:this.role?this.role:"menuitem",ariaChecked:u},n.output(e,i)}}})}(),CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div",CKEDITOR.plugins.add("contextmenu",{requires:"menu",onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function(e){this.base.call(this,e,{panel:{className:"cke_menu_panel",attributes:{"aria-label":e.lang.contextmenu.options}}})},proto:{addTarget:function(e,t){e.on("contextmenu",function(e){var e=e.data,r=CKEDITOR.env.webkit?n:CKEDITOR.env.mac?e.$.metaKey:e.$.ctrlKey;if(!t||!r){e.preventDefault();if(CKEDITOR.env.mac&&CKEDITOR.env.webkit){var r=this.editor,i=(new CKEDITOR.dom.elementPath(e.getTarget(),r.editable())).contains(function(e){return e.hasAttribute("contenteditable")},!0);i&&"false"==i.getAttribute("contenteditable")&&r.getSelection().fake(i)}var i=e.getTarget().getDocument(),s=e.getTarget().getDocument().getDocumentElement(),r=!i.equals(CKEDITOR.document),i=i.getWindow().getScrollPosition(),o=r?e.$.clientX:e.$.pageX||i.x+e.$.clientX,u=r?e.$.clientY:e.$.pageY||i.y+e.$.clientY;CKEDITOR.tools.setTimeout(function(){this.open(s,null,o,u)},CKEDITOR.env.ie?200:0,this)}},this);if(CKEDITOR.env.webkit){var n,r=function(){n=0};e.on("keydown",function(e){n=CKEDITOR.env.mac?e.data.$.metaKey:e.data.$.ctrlKey}),e.on("keyup",r),e.on("contextmenu",r)}},open:function(e,t,n,r){this.editor.focus(),e=e||CKEDITOR.document.getDocumentElement(),this.editor.selectionChange(1),this.show(e,t,n,r)}}})},beforeInit:function(e){var t=e.contextMenu=new CKEDITOR.plugins.contextMenu(e);e.on("contentDom",function(){t.addTarget(e.editable(),!1!==e.config.browserContextMenuOnCtrl)}),e.addCommand("contextMenu",{exec:function(){e.contextMenu.open(e.document.getBody())}}),e.setKeystroke(CKEDITOR.SHIFT+121,"contextMenu"),e.setKeystroke(CKEDITOR.CTRL+CKEDITOR.SHIFT+121,"contextMenu")}}),function(){CKEDITOR.plugins.add("div",{requires:"dialog",init:function(e){if(!e.blockless){var t=e.lang.div,n="div(*)";CKEDITOR.dialog.isTabEnabled(e,"editdiv","advanced")&&(n+=";div[dir,id,lang,title]{*}"),e.addCommand("creatediv",new CKEDITOR.dialogCommand("creatediv",{allowedContent:n,requiredContent:"div",contextSensitive:!0,refresh:function(e,t){this.setState("div"in(e.config.div_wrapTable?t.root:t.blockLimit).getDtd()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})),e.addCommand("editdiv",new CKEDITOR.dialogCommand("editdiv",{requiredContent:"div"})),e.addCommand("removediv",{requiredContent:"div",exec:function(e){function t(t){(t=CKEDITOR.plugins.div.getSurroundDiv(e,t))&&!t.data("cke-div-added")&&(o.push(t),t.data("cke-div-added"))}for(var n=e.getSelection(),r=n&&n.getRanges(),i,s=n.createBookmarks(),o=[],u=0;u<r.length;u++)i=r[u],i.collapsed?t(n.getStartElement()):(i=new CKEDITOR.dom.walker(i),i.evaluator=t,i.lastForward());for(u=0;u<o.length;u++)o[u].remove(!0);n.selectBookmarks(s)}}),e.ui.addButton&&e.ui.addButton("CreateDiv",{label:t.toolbar,command:"creatediv",toolbar:"blocks,50"}),e.addMenuItems&&(e.addMenuItems({editdiv:{label:t.edit,command:"editdiv",group:"div",order:1},removediv:{label:t.remove,command:"removediv",group:"div",order:5}}),e.contextMenu&&e.contextMenu.addListener(function(t){return!t||t.isReadOnly()?null:CKEDITOR.plugins.div.getSurroundDiv(e)?{editdiv:CKEDITOR.TRISTATE_OFF,removediv:CKEDITOR.TRISTATE_OFF}:null})),CKEDITOR.dialog.add("creatediv",this.path+"dialogs/div.js"),CKEDITOR.dialog.add("editdiv",this.path+"dialogs/div.js")}}}),CKEDITOR.plugins.div={getSurroundDiv:function(e,t){var n=e.elementPath(t);return e.elementPath(n.blockLimit).contains(function(e){return e.is("div")&&!e.isReadOnly()},1)}}}(),CKEDITOR.plugins.add("resize",{init:function(e){function s(s){var o=t,a=n,l=o+(s.data.$.screenX-r)*("rtl"==f?-1:1),s=a+(s.data.$.screenY-i);c&&(o=Math.max(u.resize_minWidth,Math.min(l,u.resize_maxWidth))),h&&(a=Math.max(u.resize_minHeight,Math.min(s,u.resize_maxHeight))),e.resize(c?o:null,a)}function o(){CKEDITOR.document.removeListener("mousemove",s),CKEDITOR.document.removeListener("mouseup",o),e.document&&(e.document.removeListener("mousemove",s),e.document.removeListener("mouseup",o))}var t,n,r,i,u=e.config,a=e.ui.spaceId("resizer"),f=e.element?e.element.getDirection(1):"ltr";!u.resize_dir&&(u.resize_dir="vertical"),void 0===u.resize_maxWidth&&(u.resize_maxWidth=3e3),void 0===u.resize_maxHeight&&(u.resize_maxHeight=3e3),void 0===u.resize_minWidth&&(u.resize_minWidth=750),void 0===u.resize_minHeight&&(u.resize_minHeight=250);if(!1!==u.resize_enabled){var l=null,c=("both"==u.resize_dir||"horizontal"==u.resize_dir)&&u.resize_minWidth!=u.resize_maxWidth,h=("both"==u.resize_dir||"vertical"==u.resize_dir)&&u.resize_minHeight!=u.resize_maxHeight,p=CKEDITOR.tools.addFunction(function(a){l||(l=e.getResizable()),t=l.$.offsetWidth||0,n=l.$.offsetHeight||0,r=a.screenX,i=a.screenY,u.resize_minWidth>t&&(u.resize_minWidth=t),u.resize_minHeight>n&&(u.resize_minHeight=n),CKEDITOR.document.on("mousemove",s),CKEDITOR.document.on("mouseup",o),e.document&&(e.document.on("mousemove",s),e.document.on("mouseup",o)),a.preventDefault&&a.preventDefault()});e.on("destroy",function(){CKEDITOR.tools.removeFunction(p)}),e.on("uiSpace",function(t){if("bottom"==t.data.space){var n="";c&&!h&&(n=" cke_resizer_horizontal"),!c&&h&&(n=" cke_resizer_vertical");var r='<span id="'+a+'" class="cke_resizer'+n+" cke_resizer_"+f+'" title="'+CKEDITOR.tools.htmlEncode(e.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+p+', event)">'+("ltr"==f?"◢":"◣")+"</span>";"ltr"==f&&"ltr"==n?t.data.html+=r:t.data.html=r+t.data.html}},e,null,100),e.on("maximize",function(t){e.ui.space("resizer")[t.data==CKEDITOR.TRISTATE_ON?"hide":"show"]()})}}}),function(){function e(e){function n(){for(var n=r(),s=CKEDITOR.tools.clone(e.config.toolbarGroups)||t(e),o=0;o<s.length;o++){var u=s[o];if("/"!=u){"string"==typeof u&&(u=s[o]={name:u});var f,l=u.groups;if(l)for(var h=0;h<l.length;h++)f=l[h],(f=n[f])&&i(u,f);(f=n[u.name])&&i(u,f)}}return s}function r(){var t={},n,r,i;for(n in e.ui.items)r=e.ui.items[n],i=r.toolbar||"others",i=i.split(","),r=i[0],i=parseInt(i[1]||-1,10),t[r]||(t[r]=[]),t[r].push({name:n,order:i});for(r in t)t[r]=t[r].sort(function(e,t){return e.order==t.order?0:0>t.order?-1:0>e.order?1:e.order<t.order?-1:1});return t}function i(t,n){if(n.length){t.items?t.items.push(e.ui.create("-")):t.items=[];for(var r;r=n.shift();)(r="string"==typeof r?r:r.name,!o||-1==CKEDITOR.tools.indexOf(o,r))&&(r=e.ui.create(r))&&e.addFeature(r)&&t.items.push(r)}}function s(e){var t=[],n,r,s;for(n=0;n<e.length;++n)r=e[n],s={},"/"==r?t.push(r):CKEDITOR.tools.isArray(r)?(i(s,CKEDITOR.tools.clone(r)),t.push(s)):r.items&&(i(s,CKEDITOR.tools.clone(r.items)),s.name=r.name,t.push(s));return t}var o=e.config.removeButtons,o=o&&o.split(","),u=e.config.toolbar;return"string"==typeof u&&(u=e.config["toolbar_"+u]),e.toolbar=u?s(u):n()}function t(e){return e._.toolbarGroups||(e._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}])}var n=function(){this.toolbars=[],this.focusCommandExecuted=!1};n.prototype.focus=function(){for(var e=0,t;t=this.toolbars[e++];)for(var n=0,r;r=t.items[n++];)if(r.focus){r.focus();return}};var r={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(e){e.toolbox&&(e.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout(function(){e.toolbox.focus()},100):e.toolbox.focus())}};CKEDITOR.plugins.add("toolbar",{requires:"button",init:function(t){var i,s=function(e,n){var r,o="rtl"==t.lang.dir,u=t.config.toolbarGroupCycling,f=o?37:39,o=o?39:37,u=void 0===u||u;switch(n){case 9:case CKEDITOR.SHIFT+9:for(;!r||!r.items.length;)if(r=9==n?(r?r.next:e.toolbar.next)||t.toolbox.toolbars[0]:(r?r.previous:e.toolbar.previous)||t.toolbox.toolbars[t.toolbox.toolbars.length-1],r.items.length)for(e=r.items[i?r.items.length-1:0];e&&!e.focus;)(e=i?e.previous:e.next)||(r=0);return e&&e.focus(),!1;case f:r=e;do r=r.next,!r&&u&&(r=e.toolbar.items[0]);while(r&&!r.focus);return r?r.focus():s(e,9),!1;case 40:return e.button&&e.button.hasArrow?(t.once("panelShow",function(e){e.data._.panel._.currentBlock.onKeyDown(40)}),e.execute()):s(e,40==n?f:o),!1;case o:case 38:r=e;do r=r.previous,!r&&u&&(r=e.toolbar.items[e.toolbar.items.length-1]);while(r&&!r.focus);return r?r.focus():(i=1,s(e,CKEDITOR.SHIFT+9),i=0),!1;case 27:return t.focus(),!1;case 13:case 32:return e.execute(),!1}return!0};t.on("uiSpace",function(r){if(r.data.space==t.config.toolbarLocation){r.removeListener(),t.toolbox=new n;var i=CKEDITOR.tools.getNextId(),o=['<span id="',i,'" class="cke_voice_label">',t.lang.toolbar.toolbars,"</span>",'<span id="'+t.ui.spaceId("toolbox")+'" class="cke_toolbox" role="group" aria-labelledby="',i,'" onmousedown="return false;">'],i=!1!==t.config.toolbarStartupExpanded,f,l;t.config.toolbarCanCollapse&&t.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&o.push('<span class="cke_toolbox_main"'+(i?">":' style="display:none">'));for(var c=t.toolbox.toolbars,h=e(t),p=0;p<h.length;p++){var d,v=0,m,y=h[p],b;if(y)if(f&&(o.push("</span>"),l=f=0),"/"===y)o.push('<span class="cke_toolbar_break"></span>');else{b=y.items||y;for(var E=0;E<b.length;E++){var S=b[E],x;if(S)if(S.type==CKEDITOR.UI_SEPARATOR)l=f&&S;else{x=!1!==S.canGroup;if(!v){d=CKEDITOR.tools.getNextId(),v={id:d,items:[]},m=y.name&&(t.lang.toolbar.toolbarGroups[y.name]||y.name),o.push('<span id="',d,'" class="cke_toolbar"',m?' aria-labelledby="'+d+'_label"':"",' role="toolbar">'),m&&o.push('<span id="',d,'_label" class="cke_voice_label">',m,"</span>"),o.push('<span class="cke_toolbar_start"></span>');var T=c.push(v)-1;0<T&&(v.previous=c[T-1],v.previous.next=v)}x?f||(o.push('<span class="cke_toolgroup" role="presentation">'),f=1):f&&(o.push("</span>"),f=0),d=function(e){e=e.render(t,o),T=v.items.push(e)-1,T>0&&(e.previous=v.items[T-1],e.previous.next=e),e.toolbar=v,e.onkey=s,e.onfocus=function(){t.toolbox.focusCommandExecuted||t.focus()}},l&&(d(l),l=0),d(S)}}f&&(o.push("</span>"),l=f=0),v&&o.push('<span class="cke_toolbar_end"></span></span>')}}t.config.toolbarCanCollapse&&o.push("</span>");if(t.config.toolbarCanCollapse&&t.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var N=CKEDITOR.tools.addFunction(function(){t.execCommand("toolbarCollapse")});t.on("destroy",function(){CKEDITOR.tools.removeFunction(N)}),t.addCommand("toolbarCollapse",{readOnly:1,exec:function(e){var t=e.ui.space("toolbar_collapser"),n=t.getPrevious(),r=e.ui.space("contents"),i=n.getParent(),s=parseInt(r.$.style.height,10),o=i.$.offsetHeight,u=t.hasClass("cke_toolbox_collapser_min");u?(n.show(),t.removeClass("cke_toolbox_collapser_min"),t.setAttribute("title",e.lang.toolbar.toolbarCollapse)):(n.hide(),t.addClass("cke_toolbox_collapser_min"),t.setAttribute("title",e.lang.toolbar.toolbarExpand)),t.getFirst().setText(u?"▲":"◀"),r.setStyle("height",s-(i.$.offsetHeight-o)+"px"),e.fire("resize",{outerHeight:e.container.$.offsetHeight,contentsHeight:r.$.offsetHeight,outerWidth:e.container.$.offsetWidth})},modes:{wysiwyg:1,source:1}}),t.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse"),o.push('<a title="'+(i?t.lang.toolbar.toolbarCollapse:t.lang.toolbar.toolbarExpand)+'" id="'+t.ui.spaceId("toolbar_collapser")+'" tabIndex="-1" class="cke_toolbox_collapser'),i||o.push(" cke_toolbox_collapser_min"),o.push('" onclick="CKEDITOR.tools.callFunction('+N+')">','<span class="cke_arrow">&#9650;</span>',"</a>")}o.push("</span>"),r.data.html+=o.join("")}}),t.on("destroy",function(){if(this.toolbox){var e,t=0,n,r,i;for(e=this.toolbox.toolbars;t<e.length;t++){r=e[t].items;for(n=0;n<r.length;n++)i=r[n],i.clickFn&&CKEDITOR.tools.removeFunction(i.clickFn),i.keyDownFn&&CKEDITOR.tools.removeFunction(i.keyDownFn)}}}),t.on("uiReady",function(){var e=t.ui.space("toolbox");e&&t.focusManager.add(e,1)}),t.addCommand("toolbarFocus",r),t.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus"),t.ui.add("-",CKEDITOR.UI_SEPARATOR,{}),t.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(e,t){return t.push('<span class="cke_toolbar_separator" role="separator"></span>'),{}}}}})}}),CKEDITOR.ui.prototype.addToolbarGroup=function(e,n,r){var i=t(this.editor),s=0===n,o={name:e};if(r){if(r=CKEDITOR.tools.search(i,function(e){return e.name==r})){!r.groups&&(r.groups=[]);if(n&&(n=CKEDITOR.tools.indexOf(r.groups,n),0<=n)){r.groups.splice(n+1,0,e);return}s?r.groups.splice(0,0,e):r.groups.push(e);return}n=null}n&&(n=CKEDITOR.tools.indexOf(i,function(e){return e.name==n})),s?i.splice(0,0,e):"number"==typeof n?i.splice(n+1,0,o):i.push(e)}}(),CKEDITOR.UI_SEPARATOR="separator",CKEDITOR.config.toolbarLocation="top",function(){function t(t,r){function s(e){e=l.list[e];if(e.equals(t.editable())||"true"==e.getAttribute("contenteditable")){var n=t.createRange();n.selectNodeContents(e),n.select()}else t.getSelection().selectElement(e);t.focus()}function u(){f&&f.setHtml(n),delete l.list}var a=t.ui.spaceId("path"),f,l=t._.elementsPath,c=l.idBase;r.html+='<span id="'+a+'_label" class="cke_voice_label">'+t.lang.elementspath.eleLabel+'</span><span id="'+a+'" class="cke_path" role="group" aria-labelledby="'+a+'_label">'+n+"</span>",t.on("uiReady",function(){var e=t.ui.space("path");e&&t.focusManager.add(e,1)}),l.onClick=s;var h=CKEDITOR.tools.addFunction(s),p=CKEDITOR.tools.addFunction(function(e,n){var r=l.idBase,i,n=new CKEDITOR.dom.event(n);i="rtl"==t.lang.dir;switch(n.getKeystroke()){case i?39:37:case 9:return(i=CKEDITOR.document.getById(r+(e+1)))||(i=CKEDITOR.document.getById(r+"0")),i.focus(),!1;case i?37:39:case CKEDITOR.SHIFT+9:return(i=CKEDITOR.document.getById(r+(e-1)))||(i=CKEDITOR.document.getById(r+(l.list.length-1))),i.focus(),!1;case 27:return t.focus(),!1;case 13:case 32:return s(e),!1}return!0});t.on("selectionChange",function(){for(var e=[],r=l.list=[],s=[],u=l.filters,d=!0,g=t.elementPath().elements,y,b=g.length;b--;){var w=g[b],E=0;y=w.data("cke-display-name")?w.data("cke-display-name"):w.data("cke-real-element-type")?w.data("cke-real-element-type"):w.getName(),d=w.hasAttribute("contenteditable")?"true"==w.getAttribute("contenteditable"):d,!d&&!w.hasAttribute("contenteditable")&&(E=1);for(var S=0;S<u.length;S++){var x=u[S](w,y);if(!1===x){E=1;break}y=x||y}E||(r.unshift(w),s.unshift(y))}r=r.length;for(u=0;u<r;u++)y=s[u],d=t.lang.elementspath.eleTitle.replace(/%1/,y),y=i.output({id:c+u,label:d,text:y,jsTitle:"javascript:void('"+y+"')",index:u,keyDownFn:p,clickFn:h}),e.unshift(y);f||(f=CKEDITOR.document.getById(a)),s=f,s.setHtml(e.join("")+n),t.fire("elementsPathUpdate",{space:s})}),t.on("readOnly",u),t.on("contentDomUnload",u),t.addCommand("elementsPathFocus",e),t.setKeystroke(CKEDITOR.ALT+122,"elementsPathFocus")}var e;e={editorFocus:!1,readOnly:1,exec:function(e){(e=CKEDITOR.document.getById(e._.elementsPath.idBase+"0"))&&e.focus(CKEDITOR.env.ie||CKEDITOR.env.air)}};var n='<span class="cke_path_empty">&nbsp;</span>',r="";CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(r+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(r+=' onblur="this.style.cssText = this.style.cssText;"');var i=CKEDITOR.addTemplate("pathItem",'<a id="{id}" href="{jsTitle}" tabindex="-1" class="cke_path_item" title="{label}"'+r+' hidefocus="true"  onkeydown="return CKEDITOR.tools.callFunction({keyDownFn},{index}, event );" onclick="CKEDITOR.tools.callFunction({clickFn},{index}); return false;" role="button" aria-label="{label}">{text}</a>');CKEDITOR.plugins.add("elementspath",{init:function(e){e._.elementsPath={idBase:"cke_elementspath_"+CKEDITOR.tools.getNextNumber()+"_",filters:[]},e.on("uiSpace",function(n){"bottom"==n.data.space&&t(e,n.data)})}})}(),function(){function e(e,t,n){n=e.config.forceEnterMode||n,"wysiwyg"==e.mode&&(t||(t=e.activeEnterMode),e.elementPath().isContextFor("p")||(t=CKEDITOR.ENTER_BR,n=1),e.fire("saveSnapshot"),t==CKEDITOR.ENTER_BR?o(e,t,null,n):u(e,t,null,n),e.fire("saveSnapshot"))}function t(e){for(var e=e.getSelection().getRanges(!0),t=e.length-1;0<t;t--)e[t].deleteContents();return e[0]}function n(e){var t=e.startContainer.getAscendant(function(e){return e.type==CKEDITOR.NODE_ELEMENT&&"true"==e.getAttribute("contenteditable")},!0);return e.root.equals(t)?e:(t=new CKEDITOR.dom.range(t),t.moveToRange(e),t)}CKEDITOR.plugins.add("enterkey",{init:function(t){t.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(t){e(t)}}),t.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(t){e(t,t.activeShiftEnterMode,1)}}),t.setKeystroke([[13,"enter"],[CKEDITOR.SHIFT+13,"shiftEnter"]])}});var r=CKEDITOR.dom.walker.whitespaces(),i=CKEDITOR.dom.walker.bookmark();CKEDITOR.plugins.enterkey={enterBlock:function(e,s,u,f){if(u=u||t(e)){var u=n(u),l=u.document,c=u.checkStartOfBlock(),h=u.checkEndOfBlock(),d=e.elementPath(u.startContainer),m=d.block,g=s==CKEDITOR.ENTER_DIV?"div":"p",y;if(c&&h){if(m&&(m.is("li")||m.getParent().is("li"))){m.is("li")||(m=m.getParent()),u=m.getParent(),y=u.getParent();var f=!m.hasPrevious(),b=!m.hasNext(),g=e.getSelection(),E=g.createBookmarks(),c=m.getDirection(1),h=m.getAttribute("class"),S=m.getAttribute("style"),x=y.getDirection(1)!=c,e=e.enterMode!=CKEDITOR.ENTER_BR||x||S||h;if(y.is("li"))f||b?(f&&b&&u.remove(),m[b?"insertAfter":"insertBefore"](y)):m.breakParent(y);else{if(e)(d.block.is("li")?(y=l.createElement(s==CKEDITOR.ENTER_P?"p":"div"),x&&y.setAttribute("dir",c),S&&y.setAttribute("style",S),h&&y.setAttribute("class",h),m.moveChildren(y)):y=d.block,f||b)?y[f?"insertBefore":"insertAfter"](u):(m.breakParent(u),y.insertAfter(u));else if(m.appendBogus(!0),f||b)for(;l=m[f?"getFirst":"getLast"]();)l[f?"insertBefore":"insertAfter"](u);else for(m.breakParent(u);l=m.getLast();)l.insertAfter(u);m.remove()}g.selectBookmarks(E);return}if(m&&m.getParent().is("blockquote")){m.breakParent(m.getParent()),m.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1))||m.getPrevious().remove(),m.getNext().getFirst(CKEDITOR.dom.walker.invisible(1))||m.getNext().remove(),u.moveToElementEditStart(m),u.select();return}}else if(m&&m.is("pre")&&!h){o(e,s,u,f);return}if(c=u.splitBlock(g)){s=c.previousBlock,m=c.nextBlock,d=c.wasStartOfBlock,e=c.wasEndOfBlock,m?(E=m.getParent(),E.is("li")&&(m.breakParent(E),m.move(m.getNext(),1))):s&&(E=s.getParent())&&E.is("li")&&(s.breakParent(E),E=s.getNext(),u.moveToElementEditStart(E),s.move(s.getPrevious()));if(!d&&!e)m.is("li")&&(y=u.clone(),y.selectNodeContents(m),y=new CKEDITOR.dom.walker(y),y.evaluator=function(e){return!(i(e)||r(e)||e.type==CKEDITOR.NODE_ELEMENT&&e.getName()in CKEDITOR.dtd.$inline&&!(e.getName()in CKEDITOR.dtd.$empty))},(E=y.next())&&E.type==CKEDITOR.NODE_ELEMENT&&E.is("ul","ol")&&(CKEDITOR.env.needsBrFiller?l.createElement("br"):l.createText(" ")).insertBefore(E)),m&&u.moveToElementEditStart(m);else{if(s){if(s.is("li")||!a.test(s.getName())&&!s.is("pre"))y=s.clone()}else m&&(y=m.clone());y?f&&!y.is("li")&&y.renameNode(g):E&&E.is("li")?y=E:(y=l.createElement(g),s&&(b=s.getDirection())&&y.setAttribute("dir",b));if(l=c.elementPath){f=0;for(g=l.elements.length;f<g;f++){E=l.elements[f];if(E.equals(l.block)||E.equals(l.blockLimit))break;CKEDITOR.dtd.$removeEmpty[E.getName()]&&(E=E.clone(),y.moveChildren(E),y.append(E))}}y.appendBogus(),y.getParent()||u.insertNode(y),y.is("li")&&y.removeAttribute("value"),CKEDITOR.env.ie&&d&&(!e||!s.getChildCount())&&(u.moveToElementEditStart(e?s:y),u.select()),u.moveToElementEditStart(d&&!e?m:y)}u.select(),u.scrollIntoView()}}},enterBr:function(e,n,r,i){if(r=r||t(e)){var s=r.document,o=r.checkEndOfBlock(),f=new CKEDITOR.dom.elementPath(e.getSelection().getStartElement()),l=f.block,c=l&&f.block.getName();!i&&"li"==c?u(e,n,r,i):(!i&&o&&a.test(c)?(o=l.getDirection())?(s=s.createElement("div"),s.setAttribute("dir",o),s.insertAfter(l),r.setStart(s,0)):(s.createElement("br").insertAfter(l),CKEDITOR.env.gecko&&s.createText("").insertAfter(l),r.setStartAt(l.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)):(e="pre"==c&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?s.createText("\r"):s.createElement("br"),r.deleteContents(),r.insertNode(e),CKEDITOR.env.needsBrFiller?(s.createText("﻿").insertAfter(e),o&&(l||f.blockLimit).appendBogus(),e.getNext().$.nodeValue="",r.setStartAt(e.getNext(),CKEDITOR.POSITION_AFTER_START)):r.setStartAt(e,CKEDITOR.POSITION_AFTER_END)),r.collapse(!0),r.select(),r.scrollIntoView())}}};var s=CKEDITOR.plugins.enterkey,o=s.enterBr,u=s.enterBlock,a=/^h[1-6]$/}(),function(){function e(e,t){var n={},r=[],i={nbsp:" ",shy:"­",gt:">",lt:"<",amp:"&",apos:"'",quot:'"'},e=e.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,function(e,s){var o=t?"&"+s+";":i[s];return n[o]=t?i[s]:"&"+s+";",r.push(o),""});if(!t&&e){var e=e.split(","),s=document.createElement("div"),o;s.innerHTML="&"+e.join(";&")+";",o=s.innerHTML,s=null;for(s=0;s<o.length;s++){var u=o.charAt(s);n[u]="&"+e[s]+";",r.push(u)}}return n.regex=r.join(t?"|":""),n}CKEDITOR.plugins.add("entities",{afterInit:function(t){function n(e){return f[e]}function r(e){return"force"==s.entities_processNumerical||!u[e]?"&#"+e.charCodeAt(0)+";":u[e]}var s=t.config;if(t=(t=t.dataProcessor)&&t.htmlFilter){var o=[];!1!==s.basicEntities&&o.push("nbsp,gt,lt,amp"),s.entities&&(o.length&&o.push("quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro"),s.entities_latin&&o.push("Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml"
),s.entities_greek&&o.push("Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv"),s.entities_additional&&o.push(s.entities_additional));var u=e(o.join(",")),a=u.regex?"["+u.regex+"]":"a^";delete u.regex,s.entities&&s.entities_processNumerical&&(a="[^ -~]|"+a);var a=RegExp(a,"g"),f=e("nbsp,gt,lt,amp,shy",!0),l=RegExp(f.regex,"g");t.addRules({text:function(e){return e.replace(l,n).replace(a,r)}},{applyToAll:!0,excludeNestedEditable:!0})}}})}(),CKEDITOR.config.basicEntities=!0,CKEDITOR.config.entities=!0,CKEDITOR.config.entities_latin=!0,CKEDITOR.config.entities_greek=!0,CKEDITOR.config.entities_additional="#39",CKEDITOR.plugins.add("popup"),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{popup:function(e,t,n,r){t=t||"80%",n=n||"70%","string"==typeof t&&1<t.length&&"%"==t.substr(t.length-1,1)&&(t=parseInt(window.screen.width*parseInt(t,10)/100,10)),"string"==typeof n&&1<n.length&&"%"==n.substr(n.length-1,1)&&(n=parseInt(window.screen.height*parseInt(n,10)/100,10)),640>t&&(t=640),420>n&&(n=420);var i=parseInt((window.screen.height-n)/2,10),s=parseInt((window.screen.width-t)/2,10),r=(r||"location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes")+",width="+t+",height="+n+",top="+i+",left="+s,o=window.open("",null,r,!0);if(!o)return!1;try{-1==navigator.userAgent.toLowerCase().indexOf(" chrome/")&&(o.moveTo(s,i),o.resizeTo(t,n)),o.focus(),o.location.href=e}catch(u){window.open(e,null,r,!0)}return!0}}),function(){function e(e,t){var n=[];if(!t)return e;for(var r in t)n.push(r+"="+encodeURIComponent(t[r]));return e+(-1!=e.indexOf("?")?"&":"?")+n.join("&")}function t(e){return e+="",e.charAt(0).toUpperCase()+e.substr(1)}function n(){var n=this.getDialog(),r=n.getParentEditor();r._.filebrowserSe=this;var i=r.config["filebrowser"+t(n.getName())+"WindowWidth"]||r.config.filebrowserWindowWidth||"80%",n=r.config["filebrowser"+t(n.getName())+"WindowHeight"]||r.config.filebrowserWindowHeight||"70%",s=this.filebrowser.params||{};s.CKEditor=r.name,s.CKEditorFuncNum=r._.filebrowserFn,s.langCode||(s.langCode=r.langCode),s=e(this.filebrowser.url,s),r.popup(s,i,n,r.config.filebrowserWindowFeatures||r.config.fileBrowserWindowFeatures)}function r(){var e=this.getDialog();return e.getParentEditor()._.filebrowserSe=this,!e.getContentElement(this["for"][0],this["for"][1]).getInputElement().$.value||!e.getContentElement(this["for"][0],this["for"][1]).getAction()?!1:!0}function i(t,n,r){var i=r.params||{};i.CKEditor=t.name,i.CKEditorFuncNum=t._.filebrowserFn,i.langCode||(i.langCode=t.langCode),n.action=e(r.url,i),n.filebrowser=r}function s(e,o,u,a){if(a&&a.length)for(var f,c=a.length;c--;)if(f=a[c],("hbox"==f.type||"vbox"==f.type||"fieldset"==f.type)&&s(e,o,u,f.children),f.filebrowser)if("string"==typeof f.filebrowser&&(f.filebrowser={action:"fileButton"==f.type?"QuickUpload":"Browse",target:f.filebrowser}),"Browse"==f.filebrowser.action){var h=f.filebrowser.url;void 0===h&&(h=e.config["filebrowser"+t(o)+"BrowseUrl"],void 0===h&&(h=e.config.filebrowserBrowseUrl)),h&&(f.onClick=n,f.filebrowser.url=h,f.hidden=!1)}else if("QuickUpload"==f.filebrowser.action&&f["for"]&&(h=f.filebrowser.url,void 0===h&&(h=e.config["filebrowser"+t(o)+"UploadUrl"],void 0===h&&(h=e.config.filebrowserUploadUrl)),h)){var p=f.onClick;f.onClick=function(e){var t=e.sender;return p&&p.call(t,e)===!1?!1:r.call(t,e)},f.filebrowser.url=h,f.hidden=!1,i(e,u.getContents(f["for"][0]).get(f["for"][1]),f.filebrowser)}}function o(e,t,n){if(-1!==n.indexOf(";")){for(var n=n.split(";"),r=0;r<n.length;r++)if(o(e,t,n[r]))return!0;return!1}return(e=e.getContents(t).get(n).filebrowser)&&e.url}function u(e,t){var n=this._.filebrowserSe.getDialog(),r=this._.filebrowserSe["for"],i=this._.filebrowserSe.filebrowser.onSelect;r&&n.getContentElement(r[0],r[1]).reset(),("function"!=typeof t||!1!==t.call(this._.filebrowserSe))&&(!i||!1!==i.call(this._.filebrowserSe,e,t))&&("string"==typeof t&&t&&alert(t),e&&(r=this._.filebrowserSe,n=r.getDialog(),r=r.filebrowser.target||null))&&(r=r.split(":"),i=n.getContentElement(r[0],r[1]))&&(i.setValue(e),n.selectPage(r[0]))}CKEDITOR.plugins.add("filebrowser",{requires:"popup",init:function(e){e._.filebrowserFn=CKEDITOR.tools.addFunction(u,e),e.on("destroy",function(){CKEDITOR.tools.removeFunction(this._.filebrowserFn)})}}),CKEDITOR.on("dialogDefinition",function(e){if(e.editor.plugins.filebrowser)for(var t=e.data.definition,n,r=0;r<t.contents.length;++r)if(n=t.contents[r])s(e.editor,e.data.name,t,n.elements),n.hidden&&n.filebrowser&&(n.hidden=!o(t,n.id,n.filebrowser))})}(),CKEDITOR.plugins.add("find",{requires:"dialog",init:function(e){var t=e.addCommand("find",new CKEDITOR.dialogCommand("find"));t.canUndo=!1,t.readOnly=1,e.addCommand("replace",new CKEDITOR.dialogCommand("replace")).canUndo=!1,e.ui.addButton&&(e.ui.addButton("Find",{label:e.lang.find.find,command:"find",toolbar:"find,10"}),e.ui.addButton("Replace",{label:e.lang.find.replace,command:"replace",toolbar:"find,20"})),CKEDITOR.dialog.add("find",this.path+"dialogs/find.js"),CKEDITOR.dialog.add("replace",this.path+"dialogs/find.js")}}),CKEDITOR.config.find_highlight={element:"span",styles:{"background-color":"#004",color:"#fff"}},function(){function e(e,t){var n=r.exec(e),i=r.exec(t);if(n){if(!n[2]&&"px"==i[2])return i[1];if("px"==n[2]&&!i[2])return i[1]+"px"}return t}var t=CKEDITOR.htmlParser.cssStyle,n=CKEDITOR.tools.cssLength,r=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,i={elements:{$:function(n){var r=n.attributes;if((r=(r=(r=r&&r["data-cke-realelement"])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(r)))&&r.children[0])&&n.attributes["data-cke-resizable"]){var i=(new t(n)).rules,n=r.attributes,s=i.width,i=i.height;s&&(n.width=e(n.width,s)),i&&(n.height=e(n.height,i))}return r}}};CKEDITOR.plugins.add("fakeobjects",{init:function(e){e.filter.allow("img[!data-cke-realelement,src,alt,title](*){*}","fakeobjects")},afterInit:function(e){(e=(e=e.dataProcessor)&&e.htmlFilter)&&e.addRules(i,{applyToAll:!0})}}),CKEDITOR.editor.prototype.createFakeElement=function(e,r,i,s){var o=this.lang.fakeobjects,o=o[i]||o.unknown,r={"class":r,"data-cke-realelement":encodeURIComponent(e.getOuterHtml()),"data-cke-real-node-type":e.type,alt:o,title:o,align:e.getAttribute("align")||""};return CKEDITOR.env.hc||(r.src=CKEDITOR.tools.transparentImageData),i&&(r["data-cke-real-element-type"]=i),s&&(r["data-cke-resizable"]=s,i=new t,s=e.getAttribute("width"),e=e.getAttribute("height"),s&&(i.rules.width=n(s)),e&&(i.rules.height=n(e)),i.populate(r)),this.document.createElement("img",{attributes:r})},CKEDITOR.editor.prototype.createFakeParserElement=function(e,r,i,s){var o=this.lang.fakeobjects,o=o[i]||o.unknown,u;return u=new CKEDITOR.htmlParser.basicWriter,e.writeHtml(u),u=u.getHtml(),r={"class":r,"data-cke-realelement":encodeURIComponent(u),"data-cke-real-node-type":e.type,alt:o,title:o,align:e.attributes.align||""},CKEDITOR.env.hc||(r.src=CKEDITOR.tools.transparentImageData),i&&(r["data-cke-real-element-type"]=i),s&&(r["data-cke-resizable"]=s,s=e.attributes,e=new t,i=s.width,s=s.height,void 0!==i&&(e.rules.width=n(i)),void 0!==s&&(e.rules.height=n(s)),e.populate(r)),new CKEDITOR.htmlParser.element("img",r)},CKEDITOR.editor.prototype.restoreRealElement=function(t){if(t.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT)return null;var n=CKEDITOR.dom.element.createFromHtml(decodeURIComponent(t.data("cke-realelement")),this.document);if(t.data("cke-resizable")){var r=t.getStyle("width"),t=t.getStyle("height");r&&n.setAttribute("width",e(n.getAttribute("width"),r)),t&&n.setAttribute("height",e(n.getAttribute("height"),t))}return n}}(),function(){function e(e){return e=e.attributes,"application/x-shockwave-flash"==e.type||n.test(e.src||"")}function t(e,t){return e.createFakeParserElement(t,"cke_flash","flash",!0)}var n=/\.swf(?:$|\?)/i;CKEDITOR.plugins.add("flash",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss("img.cke_flash{background-image: url("+CKEDITOR.getUrl(this.path+"images/placeholder.png")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}")},init:function(e){var t="object[classid,codebase,height,hspace,vspace,width];param[name,value];embed[height,hspace,pluginspage,src,type,vspace,width]";CKEDITOR.dialog.isTabEnabled(e,"flash","properties")&&(t+=";object[align]; embed[allowscriptaccess,quality,scale,wmode]"),CKEDITOR.dialog.isTabEnabled(e,"flash","advanced")&&(t+=";object[id]{*}; embed[bgcolor]{*}(*)"),e.addCommand("flash",new CKEDITOR.dialogCommand("flash",{allowedContent:t,requiredContent:"embed"})),e.ui.addButton&&e.ui.addButton("Flash",{label:e.lang.common.flash,command:"flash",toolbar:"insert,20"}),CKEDITOR.dialog.add("flash",this.path+"dialogs/flash.js"),e.addMenuItems&&e.addMenuItems({flash:{label:e.lang.flash.properties,command:"flash",group:"flash"}}),e.on("doubleclick",function(e){var t=e.data.element;t.is("img")&&"flash"==t.data("cke-real-element-type")&&(e.data.dialog="flash")}),e.contextMenu&&e.contextMenu.addListener(function(e){if(e&&e.is("img")&&!e.isReadOnly()&&"flash"==e.data("cke-real-element-type"))return{flash:CKEDITOR.TRISTATE_OFF}})},afterInit:function(n){var r=n.dataProcessor;(r=r&&r.dataFilter)&&r.addRules({elements:{"cke:object":function(r){var i=r.attributes;if((!i.classid||!(""+i.classid).toLowerCase())&&!e(r)){for(i=0;i<r.children.length;i++)if("cke:embed"==r.children[i].name){if(!e(r.children[i]))break;return t(n,r)}return null}return t(n,r)},"cke:embed":function(r){return e(r)?t(n,r):null}}},5)}})}(),CKEDITOR.tools.extend(CKEDITOR.config,{flashEmbedTagOnly:!1,flashAddEmbedTag:!0,flashConvertOnEdit:!1}),function(){function e(e){var r=e.config,i=e.fire("uiSpace",{space:"top",html:""}).html,o=function(){function i(e,t,r){a.setStyle(t,n(r)),a.setStyle("position",e)}function u(e){var t=l.getDocumentPosition();switch(e){case"top":i("absolute","top",t.y-v-w);break;case"pin":i("fixed","top",S);break;case"bottom":i("absolute","top",t.y+(h.height||h.bottom-h.top)+w)}f=e}var f,l,c,h,d,v,m,y=r.floatSpaceDockedOffsetX||0,w=r.floatSpaceDockedOffsetY||0,E=r.floatSpacePinnedOffsetX||0,S=r.floatSpacePinnedOffsetY||0;return function(i){if(l=e.editable()){var S=i&&"focus"==i.name;S&&a.show(),e.fire("floatingSpaceLayout",{show:S}),a.removeStyle("left"),a.removeStyle("right"),c=a.getClientRect(),h=l.getClientRect(),d=t.getViewPaneSize(),v=c.height,m="pageXOffset"in t.$?t.$.pageXOffset:CKEDITOR.document.$.documentElement.scrollLeft,f?(v+w<=h.top?u("top"):v+w>d.height-h.bottom?u("pin"):u("bottom"),i=d.width/2,i=r.floatSpacePreferRight?"right":0<h.left&&h.right<d.width&&h.width>c.width?"rtl"==r.contentsLangDirection?"right":"left":i-h.left>h.right-i?"left":"right",c.width>d.width?(i="left",S=0):(S="left"==i?0<h.left?h.left:0:h.right<d.width?d.width-h.right:0,S+c.width>d.width&&(i="left"==i?"right":"left",S=0)),a.setStyle(i,n(("pin"==f?E:y)+S+("pin"==f?0:"left"==i?m:-m)))):(f="pin",u("pin"),o(i))}}}();if(i){var u=new CKEDITOR.template('<div id="cke_{name}" class="cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} '+CKEDITOR.env.cssClass+'" dir="{langDir}" title="'+(CKEDITOR.env.gecko?" ":"")+'" lang="{langCode}" role="application" style="{style}"'+(e.title?' aria-labelledby="cke_{name}_arialbl"':" ")+">"+(e.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':" ")+'<div class="cke_inner"><div id="{topId}" class="cke_top" role="presentation">{content}</div></div></div>'),a=CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml(u.output({content:i,id:e.id,langDir:e.lang.dir,langCode:e.langCode,name:e.name,style:"display:none;z-index:"+(r.baseFloatZIndex-1),topId:e.ui.spaceId("top"),voiceLabel:e.title}))),f=CKEDITOR.tools.eventsBuffer(500,o),l=CKEDITOR.tools.eventsBuffer(100,o);a.unselectable(),a.on("mousedown",function(e){e=e.data,e.getTarget().hasAscendant("a",1)||e.preventDefault()}),e.on("focus",function(n){o(n),e.on("change",f.input),t.on("scroll",l.input),t.on("resize",l.input)}),e.on("blur",function(){a.hide(),e.removeListener("change",f.input),t.removeListener("scroll",l.input),t.removeListener("resize",l.input)}),e.on("destroy",function(){t.removeListener("scroll",l.input),t.removeListener("resize",l.input),a.clearCustomData(),a.remove()}),e.focusManager.hasFocus&&a.show(),e.focusManager.add(a,1)}}var t=CKEDITOR.document.getWindow(),n=CKEDITOR.tools.cssLength;CKEDITOR.plugins.add("floatingspace",{init:function(t){t.on("loaded",function(){e(this)},null,null,20)}})}(),CKEDITOR.plugins.add("listblock",{requires:"panel",onLoad:function(){var e=CKEDITOR.addTemplate("panel-list",'<ul role="presentation" class="cke_panel_list">{items}</ul>'),t=CKEDITOR.addTemplate("panel-list-item",'<li id="{id}" class="cke_panel_listItem" role=presentation><a id="{id}_option" _cke_focus=1 hidefocus=true title="{title}" href="javascript:void(\'{val}\')"  {onclick}="CKEDITOR.tools.callFunction({clickFn},\'{val}\'); return false;" role="option">{text}</a></li>'),n=CKEDITOR.addTemplate("panel-list-group",'<h1 id="{id}" class="cke_panel_grouptitle" role="presentation" >{label}</h1>'),r=/\'/g;CKEDITOR.ui.panel.prototype.addListBlock=function(e,t){return this.addBlock(e,new CKEDITOR.ui.listBlock(this.getHolderElement(),t))},CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(e,t){var t=t||{},n=t.attributes||(t.attributes={});(this.multiSelect=!!t.multiSelect)&&(n["aria-multiselectable"]=!0),!n.role&&(n.role="listbox"),this.base.apply(this,arguments),this.element.setAttribute("role",n.role),n=this.keys,n[40]="next",n[9]="next",n[38]="prev",n[CKEDITOR.SHIFT+9]="prev",n[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(n[13]="mouseup"),this._.pendingHtml=[],this._.pendingList=[],this._.items={},this._.groups={}},_:{close:function(){if(this._.started){var t=e.output({items:this._.pendingList.join("")});this._.pendingList=[],this._.pendingHtml.push(t),delete this._.started}},getClick:function(){return this._.click||(this._.click=CKEDITOR.tools.addFunction(function(e){var t=this.toggle(e);this.onClick&&this.onClick(e,t)},this)),this._.click}},proto:{add:function(e,n,s){var o=CKEDITOR.tools.getNextId();this._.started||(this._.started=1,this._.size=this._.size||0),this._.items[e]=o;var u;u=CKEDITOR.tools.htmlEncodeAttr(e).replace(r,"\\'"),e={id:o,val:u,onclick:CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick",clickFn:this._.getClick(),title:CKEDITOR.tools.htmlEncodeAttr(s||e),text:n||e},this._.pendingList.push(t.output(e))},startGroup:function(e){this._.close();var t=CKEDITOR.tools.getNextId();this._.groups[e]=t,this._.pendingHtml.push(n.output({id:t,label:e}))},commit:function(){this._.close(),this.element.appendHtml(this._.pendingHtml.join("")),delete this._.size,this._.pendingHtml=[]},toggle:function(e){var t=this.isMarked(e);return t?this.unmark(e):this.mark(e),!t},hideGroup:function(e){var t=(e=this.element.getDocument().getById(this._.groups[e]))&&e.getNext();e&&(e.setStyle("display","none"),t&&"ul"==t.getName()&&t.setStyle("display","none"))},hideItem:function(e){this.element.getDocument().getById(this._.items[e]).setStyle("display","none")},showAll:function(){var e=this._.items,t=this._.groups,n=this.element.getDocument(),r;for(r in e)n.getById(e[r]).setStyle("display","");for(var i in t)e=n.getById(t[i]),r=e.getNext(),e.setStyle("display",""),r&&"ul"==r.getName()&&r.setStyle("display","")},mark:function(e){this.multiSelect||this.unmarkAll();var e=this._.items[e],t=this.element.getDocument().getById(e);t.addClass("cke_selected"),this.element.getDocument().getById(e+"_option").setAttribute("aria-selected",!0),this.onMark&&this.onMark(t)},unmark:function(e){var t=this.element.getDocument(),e=this._.items[e],n=t.getById(e);n.removeClass("cke_selected"),t.getById(e+"_option").removeAttribute("aria-selected"),this.onUnmark&&this.onUnmark(n)},unmarkAll:function(){var e=this._.items,t=this.element.getDocument(),n;for(n in e){var r=e[n];t.getById(r).removeClass("cke_selected"),t.getById(r+"_option").removeAttribute("aria-selected")}this.onUnmark&&this.onUnmark()},isMarked:function(e){return this.element.getDocument().getById(this._.items[e]).hasClass("cke_selected")},focus:function(e){this._.focusIndex=-1;var t=this.element.getElementsByTag("a"),n,r=-1;if(e){for(n=this.element.getDocument().getById(this._.items[e]).getFirst();e=t.getItem(++r);)if(e.equals(n)){this._.focusIndex=r;break}}else this.element.focus();n&&setTimeout(function(){n.focus()},0)}}})}}),CKEDITOR.plugins.add("richcombo",{requires:"floatpanel,listblock,button",beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)}}),function(){var e='<span id="{id}" class="cke_combo cke_combo__{name} {cls}" role="presentation"><span id="{id}_label" class="cke_combo_label">{label}</span><a class="cke_combo_button" title="{title}" tabindex="-1"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="true"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(e+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(e+=' onblur="this.style.cssText = this.style.cssText;"');var e=e+(' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event,this);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span id="{id}_text" class="cke_combo_text cke_combo_inlinelabel">{label}</span><span class="cke_combo_open"><span class="cke_combo_arrow">'+(CKEDITOR.env.hc?"&#9660;":CKEDITOR.env.air?"&nbsp;":"")+"</span></span></a></span>"),t=CKEDITOR.addTemplate("combo",e);CKEDITOR.UI_RICHCOMBO="richcombo",CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(e){CKEDITOR.tools.extend(this,e,{canGroup:!1,title:e.label,modes:{wysiwyg:1},editorFocus:1}),e=this.panel||{},delete this.panel,this.id=CKEDITOR.tools.getNextNumber(),this.document=e.parent&&e.parent.getDocument()||CKEDITOR.document,e.className="cke_combopanel",e.block={multiSelect:e.multiSelect,attributes:e.attributes},e.toolbarRelated=!0,this._={panelDefinition:e,items:{}}},proto:{renderHtml:function(e){var t=[];return this.render(e,t),t.join("")},render:function(e,n){function r(){if(this.getState()!=CKEDITOR.TRISTATE_ON){var t=this.modes[e.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;e.readOnly&&!this.readOnly&&(t=CKEDITOR.TRISTATE_DISABLED),this.setState(t),this.setValue(""),t!=CKEDITOR.TRISTATE_DISABLED&&this.refresh&&this.refresh()}}var s=CKEDITOR.env,o="cke_"+this.id,u=CKEDITOR.tools.addFunction(function(t){h&&(e.unlockSelection(1),h=0),f.execute(t)},this),a=this,f={id:o,combo:this,focus:function(){CKEDITOR.document.getById(o).getChild(1).focus()},execute:function(t){var n=a._;if(n.state!=CKEDITOR.TRISTATE_DISABLED)if(a.createPanel(e),n.on)n.panel.hide();else{a.commit();var r=a.getValue();r?n.list.mark(r):n.list.unmarkAll(),n.panel.showBlock(a.id,new CKEDITOR.dom.element(t),4)}},clickFn:u};e.on("activeFilterChange",r,this),e.on("mode",r,this),e.on("selectionChange",r,this),!this.readOnly&&e.on("readOnly",r,this);var l=CKEDITOR.tools.addFunction(function(t,n){var t=new CKEDITOR.dom.event(t),r=t.getKeystroke();40==r&&e.once("panelShow",function(e){e.data._.panel._.currentBlock.onKeyDown(40)});switch(r){case 13:case 32:case 40:CKEDITOR.tools.callFunction(u,n);break;default:f.onkey(f,r)}t.preventDefault()}),c=CKEDITOR.tools.addFunction(function(){f.onfocus&&f.onfocus()}),h=0;return f.keyDownFn=l,s={id:o,name:this.name||this.command,label:this.label,title:this.title,cls:this.className||"",titleJs:s.gecko&&!s.hc?"":(this.title||"").replace("'",""),keydownFn:l,focusFn:c,clickFn:u},t.output(s,n),this.onRender&&this.onRender(),f},createPanel:function(e){if(!this._.panel){var t=this._.panelDefinition,n=this._.panelDefinition.block,r=t.parent||CKEDITOR.document.getBody(),i="cke_combopanel__"+this.name,s=new CKEDITOR.ui.floatPanel(e,r,t),o=s.addListBlock(this.id,n),u=this;s.onShow=function(){this.element.addClass(i),u.setState(CKEDITOR.TRISTATE_ON),u._.on=1,u.editorFocus&&!e.focusManager.hasFocus&&e.focus(),u.onOpen&&u.onOpen(),e.once("panelShow",function(){o.focus(!o.multiSelect&&u.getValue())})},s.onHide=function(t){this.element.removeClass(i),u.setState(u.modes&&u.modes[e.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),u._.on=0,!t&&u.onClose&&u.onClose()},s.onEscape=function(){s.hide(1)},o.onClick=function(e,t){u.onClick&&u.onClick.call(u,e,t),s.hide()},this._.panel=s,this._.list=o,s.getBlock(this.id).onHide=function(){u._.on=0,u.setState(CKEDITOR.TRISTATE_OFF)},this.init&&this.init()}},setValue:function(e,t){this._.value=e;var n=this.document.getById("cke_"+this.id+"_text");n&&(!e&&!t?(t=this.label,n.addClass("cke_combo_inlinelabel")):n.removeClass("cke_combo_inlinelabel"),n.setText("undefined"!=typeof t?t:e))},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(e){this._.list.mark(e)},hideItem:function(e){this._.list.hideItem(e)},hideGroup:function(e){this._.list.hideGroup(e)},showAll:function(){this._.list.showAll()},add:function(e,t,n){this._.items[e]=n||e,this._.list.add(e,t,n)},startGroup:function(e){this._.list.startGroup(e)},commit:function(){this._.committed||(this._.list.commit(),this._.committed=1,CKEDITOR.ui.fire("ready",this)),this._.committed=1},setState:function(e){if(this._.state!=e){var t=this.document.getById("cke_"+this.id);t.setState(e,"cke_combo"),e==CKEDITOR.TRISTATE_DISABLED?t.setAttribute("aria-disabled",!0):t.removeAttribute("aria-disabled"),this._.state=e}},getState:function(){return this._.state},enable:function(){this._.state==CKEDITOR.TRISTATE_DISABLED&&this.setState(this._.lastState)},disable:function(){this._.state!=CKEDITOR.TRISTATE_DISABLED&&(this._.lastState=this._.state,this.setState(CKEDITOR.TRISTATE_DISABLED))}},statics:{handler:{create:function(e){return new CKEDITOR.ui.richCombo(e)}}}}),CKEDITOR.ui.prototype.addRichCombo=function(e,t){this.add(e,CKEDITOR.UI_RICHCOMBO,t)}}(),function(){function e(e,n,r,i,s,u,a,f){for(var l=e.config,c=new CKEDITOR.style(a),h=s.split(";"),s=[],p={},d=0;d<h.length;d++){var v=h[d];if(v){var v=v.split("/"),m={},g=h[d]=v[0];m[r]=s[d]=v[1]||g,p[g]=new CKEDITOR.style(a,m),p[g]._.definition.name=g}else h.splice(d--,1)}e.ui.addRichCombo(n,{label:i.label,title:i.panelTitle,toolbar:"styles,"+f,allowedContent:c,requiredContent:c,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(l.contentsCss),multiSelect:!1,attributes:{"aria-label":i.panelTitle}},init:function(){this.startGroup(i.panelTitle);for(var e=0;e<h.length;e++){var t=h[e];this.add(t,p[t].buildPreview(),t)}},onClick:function(n){e.focus(),e.fire("saveSnapshot");var r=this.getValue(),i=p[n];if(r&&n!=r){var s=p[r],u=e.getSelection().getRanges()[0];if(u.collapsed){var a=e.elementPath(),f=a.contains(function(e){return s.checkElementRemovable(e)});if(f){var l=u.checkBoundaryOfElement(f,CKEDITOR.START),c=u.checkBoundaryOfElement(f,CKEDITOR.END);if(l&&c){for(l=u.createBookmark();a=f.getFirst();)a.insertBefore(f);f.remove(),u.moveToBookmark(l)}else l?u.moveToPosition(f,CKEDITOR.POSITION_BEFORE_START):c?u.moveToPosition(f,CKEDITOR.POSITION_AFTER_END):(u.splitElement(f),u.moveToPosition(f,CKEDITOR.POSITION_AFTER_END),t(u,a.elements.slice(),f));e.getSelection().selectRanges([u])}}else e.removeStyle(s)}e[r==n?"removeStyle":"applyStyle"](i),e.fire("saveSnapshot")},onRender:function(){e.on("selectionChange",function(t){for(var n=this.getValue(),t=t.data.path.elements,r=0,i;r<t.length;r++){i=t[r];for(var s in p)if(p[s].checkElementMatch(i,!0,e)){s!=n&&this.setValue(s);return}}this.setValue("",u)},this)},refresh:function(){e.activeFilter.check(c)||this.setState(CKEDITOR.TRISTATE_DISABLED)}})}function t(e,n,r){var i=n.pop();if(i){if(r)return t(e,n,i.equals(r)?null:r);r=i.clone(),e.insertNode(r),e.moveToPosition(r,CKEDITOR.POSITION_AFTER_START),t(e,n)}}CKEDITOR.plugins.add("font",{requires:"richcombo",init:function(t){var n=t.config;e(t,"Font","family",t.lang.font,n.font_names,n.font_defaultLabel,n.font_style,30),e(t,"FontSize","size",t.lang.font.fontSize,n.fontSize_sizes,n.fontSize_defaultLabel,n.fontSize_style,40)}})}(),CKEDITOR.config.font_names="Arial/Arial, Helvetica, sans-serif;Comic Sans MS/Comic Sans MS, cursive;Courier New/Courier New, Courier, monospace;Georgia/Georgia, serif;Lucida Sans Unicode/Lucida Sans Unicode, Lucida Grande, sans-serif;Tahoma/Tahoma, Geneva, sans-serif;Times New Roman/Times New Roman, Times, serif;Trebuchet MS/Trebuchet MS, Helvetica, sans-serif;Verdana/Verdana, Geneva, sans-serif",CKEDITOR.config.font_defaultLabel="",CKEDITOR.config.font_style={element:"span",styles:{"font-family":"#(family)"},overrides:[{element:"font",attributes:{face:null}}]},CKEDITOR.config.fontSize_sizes="8/8px;9/9px;10/10px;11/11px;12/12px;14/14px;16/16px;18/18px;20/20px;22/22px;24/24px;26/26px;28/28px;36/36px;48/48px;72/72px",CKEDITOR.config.fontSize_defaultLabel="",CKEDITOR.config.fontSize_style={element:"span",styles:{"font-size":"#(size)"},overrides:[{element:"font",attributes:{size:null}}]},CKEDITOR.plugins.add("forms",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss(".cke_editable form{border: 1px dotted #FF0000;padding: 2px;}\n"),CKEDITOR.addCss("img.cke_hidden{background-image: url("+CKEDITOR.getUrl(this.path+"images/hiddenfield.gif")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 16px !important;height: 16px !important;}")},init:function(e){var t=e.lang,n=0,r={email:1,password:1,search:1,tel:1,text:1,url:1},i={checkbox:"input[type,name,checked,required]",radio:"input[type,name,checked,required]",textfield:"input[type,name,value,size,maxlength,required]",textarea:"textarea[cols,rows,name,required]",select:"select[name,size,multiple,required]; option[value,selected]",button:"input[type,name,value]",form:"form[action,name,id,enctype,target,method]",hiddenfield:"input[type,name,value]",imagebutton:"input[type,alt,src]{width,height,border,border-width,border-style,margin,float}"},s={checkbox:"input",radio:"input",textfield:"input",textarea:"textarea",select:"select",button:"input",form:"form",hiddenfield:"input",imagebutton:"input"},o=function(r,o,u){var a={allowedContent:i[o],requiredContent:s[o]};"form"==o&&(a.context="form"),e.addCommand(o,new CKEDITOR.dialogCommand(o,a)),e.ui.addButton&&e.ui.addButton(r,{label:t.common[r.charAt(0).toLowerCase()+r.slice(1)],command:o,toolbar:"forms,"+(n+=10)}),CKEDITOR.dialog.add(o,u)},u=this.path+"dialogs/";!e.blockless&&o("Form","form",u+"form.js"),o("Checkbox","checkbox",u+"checkbox.js"),o("Radio","radio",u+"radio.js"),o("TextField","textfield",u+"textfield.js"),o("Textarea","textarea",u+"textarea.js"),o("Select","select",u+"select.js"),o("Button","button",u+"button.js");var a=e.plugins.image;a&&!e.plugins.image2&&o("ImageButton","imagebutton",CKEDITOR.plugins.getPath("image")+"dialogs/image.js"),o("HiddenField","hiddenfield",u+"hiddenfield.js"),e.addMenuItems&&(o={checkbox:{label:t.forms.checkboxAndRadio.checkboxTitle,command:"checkbox",group:"checkbox"},radio:{label:t.forms.checkboxAndRadio.radioTitle,command:"radio",group:"radio"},textfield:{label:t.forms.textfield.title,command:"textfield",group:"textfield"},hiddenfield:{label:t.forms.hidden.title,command:"hiddenfield",group:"hiddenfield"},button:{label:t.forms.button.title,command:"button",group:"button"},select:{label:t.forms.select.title,command:"select",group:"select"},textarea:{label:t.forms.textarea.title,command:"textarea",group:"textarea"}},a&&(o.imagebutton={label:t.image.titleButton,command:"imagebutton",group:"imagebutton"}),!e.blockless&&(o.form={label:t.forms.form.menu,command:"form",group:"form"}),e.addMenuItems(o)),e.contextMenu&&(!e.blockless&&e.contextMenu.addListener(function(e,t,n){if((e=n.contains("form",1))&&!e.isReadOnly())return{form:CKEDITOR.TRISTATE_OFF}}),e.contextMenu.addListener(function(e){if(e&&!e.isReadOnly()){var t=e.getName();if(t=="select")return{select:CKEDITOR.TRISTATE_OFF};if(t=="textarea")return{textarea:CKEDITOR.TRISTATE_OFF};if(t=="input"){var n=e.getAttribute("type")||"text";switch(n){case"button":case"submit":case"reset":return{button:CKEDITOR.TRISTATE_OFF};case"checkbox":return{checkbox:CKEDITOR.TRISTATE_OFF};case"radio":return{radio:CKEDITOR.TRISTATE_OFF};case"image":return a?{imagebutton:CKEDITOR.TRISTATE_OFF}:null}if(r[n])return{textfield:CKEDITOR.TRISTATE_OFF}}if(t=="img"&&e.data("cke-real-element-type")=="hiddenfield")return{hiddenfield:CKEDITOR.TRISTATE_OFF}}})),e.on("doubleclick",function(t){var n=t.data.element;if(!e.blockless&&n.is("form"))t.data.dialog="form";else if(n.is("select"))t.data.dialog="select";else if(n.is("textarea"))t.data.dialog="textarea";else if(n.is("img")&&n.data("cke-real-element-type")=="hiddenfield")t.data.dialog="hiddenfield";else if(n.is("input")){n=n.getAttribute("type")||"text";switch(n){case"button":case"submit":case"reset":t.data.dialog="button";break;case"checkbox":t.data.dialog="checkbox";break;case"radio":t.data.dialog="radio";break;case"image":t.data.dialog="imagebutton"}r[n]&&(t.data.dialog="textfield")}})},afterInit:function(e){var t=e.dataProcessor,n=t&&t.htmlFilter,t=t&&t.dataFilter;CKEDITOR.env.ie&&n&&n.addRules({elements:{input:function(e){var e=e.attributes,t=e.type;t||(e.type="text"),("checkbox"==t||"radio"==t)&&"on"==e.value&&delete e.value}}},{applyToAll:!0}),t&&t.addRules({elements:{input:function(t){if("hidden"==t.attributes.type)return e.createFakeParserElement(t,"cke_hidden","hiddenfield")}}},{applyToAll:!0})}}),CKEDITOR.plugins.add("format",{requires:"richcombo",init:function(e){if(!e.blockless){for(var t=e.config,n=e.lang.format,r=t.format_tags.split(";"),i={},s=0,o=[],u=0;u<r.length;u++){var a=r[u],f=new CKEDITOR.style(t["format_"+a]);if(!e.filter.customConfig||e.filter.check(f))s++,i[a]=f,i[a]._.enterMode=e.config.enterMode,o.push(f)}0!==s&&e.ui.addRichCombo("Format",{label:n.label,title:n.panelTitle,toolbar:"styles,20",allowedContent:o,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(t.contentsCss),multiSelect:!1,attributes:{"aria-label":n.panelTitle}},init:function(){this.startGroup(n.panelTitle);for(var e in i){var t=n["tag_"+e];this.add(e,i[e].buildPreview(t),t)}},onClick:function(t){e.focus(),e.fire("saveSnapshot");var t=i[t],n=e.elementPath();e[t.checkActive(n,e)?"removeStyle":"applyStyle"](t),setTimeout(function(){e.fire("saveSnapshot")},0)},onRender:function(){e.on("selectionChange",function(t){var n=this.getValue(),t=t.data.path;this.refresh();for(var r in i)if(i[r].checkActive(t,e)){r!=n&&this.setValue(r,e.lang.format["tag_"+r]);return}this.setValue("")},this)},onOpen:function(){this.showAll();for(var t in i)e.activeFilter.check(i[t])||this.hideItem(t)},refresh:function(){var t=e.elementPath();if(t){if(t.isContextFor("p"))for(var n in i)if(e.activeFilter.check(i[n]))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}}})}}}),CKEDITOR.config.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div",CKEDITOR.config.format_p={element:"p"},CKEDITOR.config.format_div={element:"div"},CKEDITOR.config.format_pre={element:"pre"},CKEDITOR.config.format_address={element:"address"},CKEDITOR.config.format_h1={element:"h1"},CKEDITOR.config.format_h2={element:"h2"},CKEDITOR.config.format_h3={element:"h3"},CKEDITOR.config.format_h4={element:"h4"},CKEDITOR.config.format_h5={element:"h5"},CKEDITOR.config.format_h6={element:"h6"},function(){var e={canUndo:!1,exec:function(e){var t=e.document.createElement("hr");e.insertElement(t)},allowedContent:"hr",requiredContent:"hr"};CKEDITOR.plugins.add("horizontalrule",{init:function(t){t.blockless||(t.addCommand("horizontalrule",e),t.ui.addButton&&t.ui.addButton("HorizontalRule",{label:t.lang.horizontalrule.toolbar,command:"horizontalrule",toolbar:"insert,40"}))}})}(),CKEDITOR.plugins.add("htmlwriter",{init:function(e){var t=new CKEDITOR.htmlWriter;t.forceSimpleAmpersand=e.config.forceSimpleAmpersand,t.indentationChars=e.config.dataIndentationChars||"	",e.dataProcessor.writer=t}}),CKEDITOR.htmlWriter=CKEDITOR.tools.createClass({base:CKEDITOR.htmlParser.basicWriter,$:function(){this.base(),this.indentationChars="	",this.selfClosingEnd=" />",this.lineBreakChars="\n",this.sortAttributes=1,this._.indent=0,this._.indentation="",this._.inPre=0,this._.rules={};var e=CKEDITOR.dtd,t;for(t in CKEDITOR.tools.extend({},e.$nonBodyContent,e.$block,e.$listItem,e.$tableContent))this.setRules(t,{indent:!e[t]["#"],breakBeforeOpen:1,breakBeforeClose:!e[t]["#"],breakAfterClose
:1,needsSpace:t in e.$block&&!(t in{li:1,dt:1,dd:1})});this.setRules("br",{breakAfterOpen:1}),this.setRules("title",{indent:0,breakAfterOpen:0}),this.setRules("style",{indent:0,breakBeforeClose:1}),this.setRules("pre",{breakAfterOpen:1,indent:0})},proto:{openTag:function(e){var t=this._.rules[e];this._.afterCloser&&t&&t.needsSpace&&this._.needsSpace&&this._.output.push("\n"),this._.indent?this.indentation():t&&t.breakBeforeOpen&&(this.lineBreak(),this.indentation()),this._.output.push("<",e),this._.afterCloser=0},openTagClose:function(e,t){var n=this._.rules[e];t?(this._.output.push(this.selfClosingEnd),n&&n.breakAfterClose&&(this._.needsSpace=n.needsSpace)):(this._.output.push(">"),n&&n.indent&&(this._.indentation+=this.indentationChars)),n&&n.breakAfterOpen&&this.lineBreak(),"pre"==e&&(this._.inPre=1)},attribute:function(e,t){"string"==typeof t&&(this.forceSimpleAmpersand&&(t=t.replace(/&amp;/g,"&")),t=CKEDITOR.tools.htmlEncodeAttr(t)),this._.output.push(" ",e,'="',t,'"')},closeTag:function(e){var t=this._.rules[e];t&&t.indent&&(this._.indentation=this._.indentation.substr(this.indentationChars.length)),this._.indent?this.indentation():t&&t.breakBeforeClose&&(this.lineBreak(),this.indentation()),this._.output.push("</",e,">"),"pre"==e&&(this._.inPre=0),t&&t.breakAfterClose&&(this.lineBreak(),this._.needsSpace=t.needsSpace),this._.afterCloser=1},text:function(e){this._.indent&&(this.indentation(),!this._.inPre&&(e=CKEDITOR.tools.ltrim(e))),this._.output.push(e)},comment:function(e){this._.indent&&this.indentation(),this._.output.push("<!--",e,"-->")},lineBreak:function(){!this._.inPre&&0<this._.output.length&&this._.output.push(this.lineBreakChars),this._.indent=1},indentation:function(){!this._.inPre&&this._.indentation&&this._.output.push(this._.indentation),this._.indent=0},reset:function(){this._.output=[],this._.indent=0,this._.indentation="",this._.afterCloser=0,this._.inPre=0},setRules:function(e,t){var n=this._.rules[e];n?CKEDITOR.tools.extend(n,t,!0):this._.rules[e]=t}}}),function(){CKEDITOR.plugins.add("iframe",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss("img.cke_iframe{background-image: url("+CKEDITOR.getUrl(this.path+"images/placeholder.png")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}")},init:function(e){var t=e.lang.iframe,n="iframe[align,longdesc,frameborder,height,name,scrolling,src,title,width]";e.plugins.dialogadvtab&&(n+=";iframe"+e.plugins.dialogadvtab.allowedContent({id:1,classes:1,styles:1})),CKEDITOR.dialog.add("iframe",this.path+"dialogs/iframe.js"),e.addCommand("iframe",new CKEDITOR.dialogCommand("iframe",{allowedContent:n,requiredContent:"iframe"})),e.ui.addButton&&e.ui.addButton("Iframe",{label:t.toolbar,command:"iframe",toolbar:"insert,80"}),e.on("doubleclick",function(e){var t=e.data.element;t.is("img")&&"iframe"==t.data("cke-real-element-type")&&(e.data.dialog="iframe")}),e.addMenuItems&&e.addMenuItems({iframe:{label:t.title,command:"iframe",group:"image"}}),e.contextMenu&&e.contextMenu.addListener(function(e){if(e&&e.is("img")&&"iframe"==e.data("cke-real-element-type"))return{iframe:CKEDITOR.TRISTATE_OFF}})},afterInit:function(e){var t=e.dataProcessor;(t=t&&t.dataFilter)&&t.addRules({elements:{iframe:function(t){return e.createFakeParserElement(t,"cke_iframe","iframe",!0)}}})}})}(),function(){function e(e){var n=this.editor,r=e.document,i=r.body,s=r.getElementById("cke_actscrpt");s&&s.parentNode.removeChild(s),(s=r.getElementById("cke_shimscrpt"))&&s.parentNode.removeChild(s),(s=r.getElementById("cke_basetagscrpt"))&&s.parentNode.removeChild(s),i.contentEditable=!0,CKEDITOR.env.ie&&(i.hideFocus=!0,i.disabled=!0,i.removeAttribute("disabled")),delete this._.isLoadingData,this.$=i,r=new CKEDITOR.dom.document(r),this.setup(),this.fixInitialSelection(),CKEDITOR.env.ie&&(r.getDocumentElement().addClass(r.$.compatMode),n.config.enterMode!=CKEDITOR.ENTER_P&&this.attachListener(r,"selectionchange",function(){var e=r.getBody(),t=n.getSelection(),i=t&&t.getRanges()[0];i&&e.getHtml().match(/^<p>(?:&nbsp;|<br>)<\/p>$/i)&&i.startContainer.equals(e)&&setTimeout(function(){i=n.getSelection().getRanges()[0],i.startContainer.equals("body")||(e.getFirst().remove(1),i.moveToElementEditEnd(e),i.select())},0)})),(CKEDITOR.env.webkit||CKEDITOR.env.ie&&10<CKEDITOR.env.version)&&r.getDocumentElement().on("mousedown",function(e){e.data.getTarget().is("html")&&setTimeout(function(){n.editable().focus()})}),t(n);try{n.document.$.execCommand("2D-position",!1,!0)}catch(o){}(CKEDITOR.env.gecko||CKEDITOR.env.ie&&"CSS1Compat"==n.document.$.compatMode)&&this.attachListener(this,"keydown",function(e){var t=e.data.getKeystroke();if(t==33||t==34)if(CKEDITOR.env.ie)setTimeout(function(){n.getSelection().scrollIntoView()},0);else if(n.window.$.innerHeight>this.$.offsetHeight){var r=n.createRange();r[t==33?"moveToElementEditStart":"moveToElementEditEnd"](this),r.select(),e.data.preventDefault()}}),CKEDITOR.env.ie&&this.attachListener(r,"blur",function(){try{r.$.selection.empty()}catch(e){}}),CKEDITOR.env.iOS&&this.attachListener(r,"touchend",function(){e.focus()}),i=n.document.getElementsByTag("title").getItem(0),i.data("cke-title",i.getText()),CKEDITOR.env.ie&&(n.document.$.title=this._.docTitle),CKEDITOR.tools.setTimeout(function(){this.status=="unloaded"&&(this.status="ready"),n.fire("contentDom"),this._.isPendingFocus&&(n.focus(),this._.isPendingFocus=!1),setTimeout(function(){n.fire("dataReady")},0)},0,this)}function t(e){function t(){var t;e.editable().attachListener(e,"selectionChange",function(){var r=e.getSelection().getSelectedElement();r&&(t&&(t.detachEvent("onresizestart",n),t=null),r.$.attachEvent("onresizestart",n),t=r.$)})}function n(e){e.returnValue=!1}if(CKEDITOR.env.gecko)try{var r=e.document.$;r.execCommand("enableObjectResizing",!1,!e.config.disableObjectResizing),r.execCommand("enableInlineTableEditing",!1,!e.config.disableNativeTableHandles)}catch(i){}else CKEDITOR.env.ie&&11>CKEDITOR.env.version&&e.config.disableObjectResizing&&t(e)}function n(){var e=[];if(8<=CKEDITOR.document.$.documentMode){e.push("html.CSS1Compat [contenteditable=false]{min-height:0 !important}");var t=[],n;for(n in CKEDITOR.dtd.$removeEmpty)t.push("html.CSS1Compat "+n+"[contenteditable=false]");e.push(t.join(",")+"{display:inline-block}")}else CKEDITOR.env.gecko&&(e.push("html{height:100% !important}"),e.push("img:-moz-broken{-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"));return e.push("html{cursor:text;*cursor:auto}"),e.push("img,input,textarea{cursor:default}"),e.join("\n")}CKEDITOR.plugins.add("wysiwygarea",{init:function(e){e.config.fullPage&&e.addFeature({allowedContent:"html head title; style [media,type]; body (*)[id]; meta link [*]",requiredContent:"body"}),e.addMode("wysiwyg",function(t){function n(n){n&&n.removeListener(),e.editable(new r(e,s.$.contentWindow.document.body)),e.setData(e.getData(1),t)}var i="document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"")+"document.close();",i=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie&&!CKEDITOR.env.edge?"javascript:void(function(){"+encodeURIComponent(i)+"}())":"",s=CKEDITOR.dom.element.createFromHtml('<iframe src="'+i+'" frameBorder="0"></iframe>');s.setStyles({width:"100%",height:"100%"}),s.addClass("cke_wysiwyg_frame").addClass("cke_reset"),i=e.ui.space("contents"),i.append(s);var o=CKEDITOR.env.ie&&!CKEDITOR.env.edge||CKEDITOR.env.gecko;o&&s.on("load",n);var u=e.title,f=e.fire("ariaEditorHelpLabel",{}).label;u&&(CKEDITOR.env.ie&&f&&(u+=", "+f),s.setAttribute("title",u));if(f){var u=CKEDITOR.tools.getNextId(),l=CKEDITOR.dom.element.createFromHtml('<span id="'+u+'" class="cke_voice_label">'+f+"</span>");i.append(l,1),s.setAttribute("aria-describedby",u)}e.on("beforeModeUnload",function(e){e.removeListener(),l&&l.remove()}),s.setAttributes({tabIndex:e.tabIndex,allowTransparency:"true"}),!o&&n(),e.fire("ariaWidget",s)})}}),CKEDITOR.editor.prototype.addContentsCss=function(e){var t=this.config,n=t.contentsCss;CKEDITOR.tools.isArray(n)||(t.contentsCss=n?[n]:[]),t.contentsCss.push(e)};var r=CKEDITOR.tools.createClass({$:function(){this.base.apply(this,arguments),this._.frameLoadedHandler=CKEDITOR.tools.addFunction(function(t){CKEDITOR.tools.setTimeout(e,0,this,t)},this),this._.docTitle=this.getWindow().getFrame().getAttribute("title")},base:CKEDITOR.editable,proto:{setData:function(e,t){var r=this.editor;if(t)this.setHtml(e),this.fixInitialSelection(),r.fire("dataReady");else{this._.isLoadingData=!0,r._.dataStore={id:1};var i=r.config,s=i.fullPage,o=i.docType,u=CKEDITOR.tools.buildStyleHtml(n()).replace(/<style>/,'<style data-cke-temp="1">');s||(u+=CKEDITOR.tools.buildStyleHtml(r.config.contentsCss));var a=i.baseHref?'<base href="'+i.baseHref+'" data-cke-temp="1" />':"";s&&(e=e.replace(/<!DOCTYPE[^>]*>/i,function(e){return r.docType=o=e,""}).replace(/<\?xml\s[^\?]*\?>/i,function(e){return r.xmlDeclaration=e,""})),e=r.dataProcessor.toHtml(e),s?(/<body[\s|>]/.test(e)||(e="<body>"+e),/<html[\s|>]/.test(e)||(e="<html>"+e+"</html>"),/<head[\s|>]/.test(e)?/<title[\s|>]/.test(e)||(e=e.replace(/<head[^>]*>/,"$&<title></title>")):e=e.replace(/<html[^>]*>/,"$&<head><title></title></head>"),a&&(e=e.replace(/<head[^>]*?>/,"$&"+a)),e=e.replace(/<\/head\s*>/,u+"$&"),e=o+e):e=i.docType+'<html dir="'+i.contentsLangDirection+'" lang="'+(i.contentsLanguage||r.langCode)+'"><head><title>'+this._.docTitle+"</title>"+a+u+"</head><body"+(i.bodyId?' id="'+i.bodyId+'"':"")+(i.bodyClass?' class="'+i.bodyClass+'"':"")+">"+e+"</body></html>",CKEDITOR.env.gecko&&(e=e.replace(/<body/,'<body contenteditable="true" '),2e4>CKEDITOR.env.version&&(e=e.replace(/<body[^>]*>/,"$&<!-- cke-content-start -->"))),i='<script id="cke_actscrpt" type="text/javascript"'+(CKEDITOR.env.ie?' defer="defer" ':"")+">var wasLoaded=0;function onload(){if(!wasLoaded)window.parent.CKEDITOR.tools.callFunction("+this._.frameLoadedHandler+",window);wasLoaded=1;}"+(CKEDITOR.env.ie?"onload();":'document.addEventListener("DOMContentLoaded", onload, false );')+"</script>",CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(i+='<script id="cke_shimscrpt">window.parent.CKEDITOR.tools.enableHtml5Elements(document)</script>'),a&&CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(i+='<script id="cke_basetagscrpt">var baseTag = document.querySelector( "base" );baseTag.href = baseTag.href;</script>'),e=e.replace(/(?=\s*<\/(:?head)>)/,i),this.clearCustomData(),this.clearListeners(),r.fire("contentDomUnload");var f=this.getDocument();try{f.write(e)}catch(l){setTimeout(function(){f.write(e)},0)}}},getData:function(e){if(e)return this.getHtml();var e=this.editor,t=e.config,n=t.fullPage,r=n&&e.docType,i=n&&e.xmlDeclaration,s=this.getDocument(),n=n?s.getDocumentElement().getOuterHtml():s.getBody().getHtml();return CKEDITOR.env.gecko&&t.enterMode!=CKEDITOR.ENTER_BR&&(n=n.replace(/<br>(?=\s*(:?$|<\/body>))/,"")),n=e.dataProcessor.toDataFormat(n),i&&(n=i+"\n"+n),r&&(n=r+"\n"+n),n},focus:function(){this._.isLoadingData?this._.isPendingFocus=!0:r.baseProto.focus.call(this)},detach:function(){var e=this.editor,t=e.document,e=e.window.getFrame();r.baseProto.detach.call(this),this.clearCustomData(),t.getDocumentElement().clearCustomData(),e.clearCustomData(),CKEDITOR.tools.removeFunction(this._.frameLoadedHandler),(t=e.removeCustomData("onResize"))&&t.removeListener(),e.remove()}}})}(),CKEDITOR.config.disableObjectResizing=!1,CKEDITOR.config.disableNativeTableHandles=!0,CKEDITOR.config.disableNativeSpellChecker=!0,CKEDITOR.config.contentsCss=CKEDITOR.getUrl("contents.css"),function(){function e(e,t){t||(t=e.getSelection().getSelectedElement());if(t&&t.is("img")&&!t.data("cke-realelement")&&!t.isReadOnly())return t}function t(e){var t=e.getStyle("float");if("inherit"==t||"none"==t)t=0;return t||(t=e.getAttribute("align")),t}CKEDITOR.plugins.add("image",{requires:"dialog",init:function(t){if(!t.plugins.image2){CKEDITOR.dialog.add("image",this.path+"dialogs/image.js");var n="img[alt,!src]{border-style,border-width,float,height,margin,margin-bottom,margin-left,margin-right,margin-top,width}";CKEDITOR.dialog.isTabEnabled(t,"image","advanced")&&(n="img[alt,dir,id,lang,longdesc,!src,title]{*}(*)"),t.addCommand("image",new CKEDITOR.dialogCommand("image",{allowedContent:n,requiredContent:"img[alt,src]",contentTransformations:[["img{width}: sizeToStyle","img[width]: sizeToAttribute"],["img{float}: alignmentToStyle","img[align]: alignmentToAttribute"]]})),t.ui.addButton&&t.ui.addButton("Image",{label:t.lang.common.image,command:"image",toolbar:"insert,10"}),t.on("doubleclick",function(e){var t=e.data.element;t.is("img")&&!t.data("cke-realelement")&&!t.isReadOnly()&&(e.data.dialog="image")}),t.addMenuItems&&t.addMenuItems({image:{label:t.lang.image.menu,command:"image",group:"image"}}),t.contextMenu&&t.contextMenu.addListener(function(n){if(e(t,n))return{image:CKEDITOR.TRISTATE_OFF}})}},afterInit:function(n){function r(r){var i=n.getCommand("justify"+r);i&&(("left"==r||"right"==r)&&i.on("exec",function(i){var s=e(n),o;s&&(o=t(s),o==r?(s.removeStyle("float"),r==t(s)&&s.removeAttribute("align")):s.setStyle("float",r),i.cancel())}),i.on("refresh",function(i){var s=e(n);s&&(s=t(s),this.setState(s==r?CKEDITOR.TRISTATE_ON:"right"==r||"left"==r?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),i.cancel())}))}n.plugins.image2||(r("left"),r("right"),r("center"),r("block"))}})}(),CKEDITOR.config.image_removeLinkByEmptyURL=!0,function(){function e(e,r){var s,o;r.on("refresh",function(e){var r=[t],s;for(s in e.data.states)r.push(e.data.states[s]);this.setState(CKEDITOR.tools.search(r,n)?n:t)},r,null,100),r.on("exec",function(t){s=e.getSelection(),o=s.createBookmarks(1),t.data||(t.data={}),t.data.done=!1},r,null,0),r.on("exec",function(){e.forceNextSelectionCheck(),s.selectBookmarks(o)},r,null,100)}var t=CKEDITOR.TRISTATE_DISABLED,n=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indent",{init:function(t){var n=CKEDITOR.plugins.indent.genericDefinition;e(t,t.addCommand("indent",new n(!0))),e(t,t.addCommand("outdent",new n)),t.ui.addButton&&(t.ui.addButton("Indent",{label:t.lang.indent.indent,command:"indent",directional:!0,toolbar:"indent,20"}),t.ui.addButton("Outdent",{label:t.lang.indent.outdent,command:"outdent",directional:!0,toolbar:"indent,10"})),t.on("dirChanged",function(e){var n=t.createRange(),r=e.data.node;n.setStartBefore(r),n.setEndAfter(r);for(var i=new CKEDITOR.dom.walker(n),s;s=i.next();)if(s.type==CKEDITOR.NODE_ELEMENT)if(!s.equals(r)&&s.getDirection())n.setStartAfter(s),i=new CKEDITOR.dom.walker(n);else{var o=t.config.indentClasses;if(o)for(var u=e.data.dir=="ltr"?["_rtl",""]:["","_rtl"],f=0;f<o.length;f++)s.hasClass(o[f]+u[0])&&(s.removeClass(o[f]+u[0]),s.addClass(o[f]+u[1]));o=s.getStyle("margin-right"),u=s.getStyle("margin-left"),o?s.setStyle("margin-left",o):s.removeStyle("margin-left"),u?s.setStyle("margin-right",u):s.removeStyle("margin-right")}})}}),CKEDITOR.plugins.indent={genericDefinition:function(e){this.isIndent=!!e,this.startDisabled=!this.isIndent},specificDefinition:function(e,t,n){this.name=t,this.editor=e,this.jobs={},this.enterBr=e.config.enterMode==CKEDITOR.ENTER_BR,this.isIndent=!!n,this.relatedGlobal=n?"indent":"outdent",this.indentKey=n?9:CKEDITOR.SHIFT+9,this.database={}},registerCommands:function(e,t){e.on("pluginsLoaded",function(){for(var e in t)(function(e,t){var n=e.getCommand(t.relatedGlobal),r;for(r in t.jobs)n.on("exec",function(n){n.data.done||(e.fire("lockSnapshot"),t.execJob(e,r)&&(n.data.done=!0),e.fire("unlockSnapshot"),CKEDITOR.dom.element.clearAllMarkers(t.database))},this,null,r),n.on("refresh",function(n){n.data.states||(n.data.states={}),n.data.states[t.name+"@"+r]=t.refreshJob(e,r,n.data.path)},this,null,r);e.addFeature(t)})(this,t[e])})}},CKEDITOR.plugins.indent.genericDefinition.prototype={context:"p",exec:function(){}},CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function(e,n){var r=this.jobs[n];if(r.state!=t)return r.exec.call(this,e)},refreshJob:function(e,n,r){return n=this.jobs[n],n.state=e.activeFilter.checkFeature(this)?n.refresh.call(this,e,r):t,n.state},getContext:function(e){return e.contains(this.context)}}}(),function(){function e(e,n,r){if(!e.getCustomData("indent_processed")){var i=this.editor,s=this.isIndent;if(n){i=e.$.className.match(this.classNameRegex),r=0,i&&(i=i[1],r=CKEDITOR.tools.indexOf(n,i)+1);if(0>(r+=s?1:-1))return;r=Math.min(r,n.length),r=Math.max(r,0),e.$.className=CKEDITOR.tools.ltrim(e.$.className.replace(this.classNameRegex,"")),0<r&&e.addClass(n[r-1])}else{var n=t(e,r),r=parseInt(e.getStyle(n),10),o=i.config.indentOffset||40;isNaN(r)&&(r=0),r+=(s?1:-1)*o;if(0>r)return;r=Math.max(r,0),r=Math.ceil(r/o)*o,e.setStyle(n,r?r+(i.config.indentUnit||"px"):""),""===e.getAttribute("style")&&e.removeAttribute("style")}CKEDITOR.dom.element.setMarker(this.database,e,"indent_processed",1)}}function t(e,t){return"ltr"==(t||e.getComputedStyle("direction"))?"margin-left":"margin-right"}var n=CKEDITOR.dtd.$listItem,r=CKEDITOR.dtd.$list,i=CKEDITOR.TRISTATE_DISABLED,s=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentblock",{requires:"indent",init:function(o){function u(){a.specificDefinition.apply(this,arguments),this.allowedContent={"div h1 h2 h3 h4 h5 h6 ol p pre ul":{propertiesOnly:!0,styles:c?null:"margin-left,margin-right",classes:c||null}},this.enterBr&&(this.allowedContent.div=!0),this.requiredContent=(this.enterBr?"div":"p")+(c?"("+c.join(",")+")":"{margin-left}"),this.jobs={20:{refresh:function(e,r){var o=r.block||r.blockLimit;if(!o.is(n))var u=o.getAscendant(n),o=u&&r.contains(u)||o;o.is(n)&&(o=o.getParent());if(!this.enterBr&&!this.getContext(r))return i;if(c){var u=c,o=o.$.className.match(this.classNameRegex),a=this.isIndent,u=o?a?o[1]!=u.slice(-1):!0:a;return u?s:i}return this.isIndent?s:o?CKEDITOR[(parseInt(o.getStyle(t(o)),10)||0)<=0?"TRISTATE_DISABLED":"TRISTATE_OFF"]:i},exec:function(t){var n=t.getSelection(),n=n&&n.getRanges()[0],i;if(i=t.elementPath().contains(r))e.call(this,i,c);else{n=n.createIterator(),t=t.config.enterMode,n.enforceRealBlocks=!0;for(n.enlargeBr=t!=CKEDITOR.ENTER_BR;i=n.getNextParagraph(t==CKEDITOR.ENTER_P?"p":"div");)i.isReadOnly()||e.call(this,i,c)}return!0}}}}var a=CKEDITOR.plugins.indent,c=o.config.indentClasses;a.registerCommands(o,{indentblock:new u(o,"indentblock",!0),outdentblock:new u(o,"outdentblock")}),CKEDITOR.tools.extend(u.prototype,a.specificDefinition.prototype,{context:{div:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,p:1,pre:1,table:1},classNameRegex:c?RegExp("(?:^|\\s+)("+c.join("|")+")(?=$|\\s)"):null})}})}(),function(){function e(e){function r(t){for(var r=a.startContainer,u=a.endContainer;r&&!r.getParent().equals(t);)r=r.getParent();for(;u&&!u.getParent().equals(t);)u=u.getParent();if(!r||!u)return!1;for(var f=r,r=[],l=!1;!l;)f.equals(u)&&(l=!0),r.push(f),f=f.getNext();if(1>r.length)return!1;f=t.getParents(!0);for(u=0;u<f.length;u++)if(f[u].getName&&o[f[u].getName()]){t=f[u];break}for(var f=i.isIndent?1:-1,u=r[0],r=r[r.length-1],l=CKEDITOR.plugins.list.listToArray(t,s),h=l[r.getCustomData("listarray_index")].indent,u=u.getCustomData("listarray_index");u<=r.getCustomData("listarray_index");u++)if(l[u].indent+=f,0<f){var p=l[u].parent;l[u].parent=new CKEDITOR.dom.element(p.getName(),p.getDocument())}for(u=r.getCustomData("listarray_index")+1;u<l.length&&l[u].indent>h;u++)l[u].indent+=f;r=CKEDITOR.plugins.list.arrayToList(l,s,null,e.config.enterMode,t.getDirection());if(!i.isIndent){var v;if((v=t.getParent())&&v.is("li"))for(var f=r.listNode.getChildren(),g=[],y,u=f.count()-1;0<=u;u--)(y=f.getItem(u))&&y.is&&y.is("li")&&g.push(y)}r&&r.listNode.replace(t);if(g&&g.length)for(u=0;u<g.length;u++){for(y=t=g[u];(y=y.getNext())&&y.is&&y.getName()in o;)CKEDITOR.env.needsNbspFiller&&!t.getFirst(n)&&t.append(a.document.createText(" ")),t.append(y);t.insertAfter(v)}return r&&e.fire("contentDomInvalidated"),!0}for(var i=this,s=this.database,o=this.context,u=e.getSelection(),u=(u&&u.getRanges()).createIterator(),a;a=u.getNextRange();){for(var f=a.getCommonAncestor();f&&(f.type!=CKEDITOR.NODE_ELEMENT||!o[f.getName()]);){if(e.editable().equals(f)){f=!1;break}f=f.getParent()}f||(f=a.startPath().contains(o))&&a.setEndAt(f,CKEDITOR.POSITION_BEFORE_END);if(!f){var l=a.getEnclosedNode();l&&l.type==CKEDITOR.NODE_ELEMENT&&l.getName()in o&&(a.setStartAt(l,CKEDITOR.POSITION_AFTER_START),a.setEndAt(l,CKEDITOR.POSITION_BEFORE_END),f=l)}f&&a.startContainer.type==CKEDITOR.NODE_ELEMENT&&a.startContainer.getName()in o&&(l=new CKEDITOR.dom.walker(a),l.evaluator=t,a.startContainer=l.next()),f&&a.endContainer.type==CKEDITOR.NODE_ELEMENT&&a.endContainer.getName()in o&&(l=new CKEDITOR.dom.walker(a),l.evaluator=t,a.endContainer=l.previous());if(f)return r(f)}return 0}function t(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.is("li")}function n(e){return r(e)&&i(e)}var r=CKEDITOR.dom.walker.whitespaces(!0),i=CKEDITOR.dom.walker.bookmark(!1,!0),s=CKEDITOR.TRISTATE_DISABLED,o=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function(t){function n(t){r.specificDefinition.apply(this,arguments),this.requiredContent=["ul","ol"],t.on("key",function(e){if("wysiwyg"==t.mode&&e.data.keyCode==this.indentKey){var n=this.getContext(t.elementPath());n&&(!this.isIndent||!CKEDITOR.plugins.indentList.firstItemInPath(this.context,t.elementPath(),n))&&(t.execCommand(this.relatedGlobal),e.cancel())}},this),this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(e,t){var n=this.getContext(t),r=CKEDITOR.plugins.indentList.firstItemInPath(this.context,t,n);return!n||!this.isIndent||r?s:o}:function(e,t){return!this.getContext(t)||this.isIndent?s:o},exec:CKEDITOR.tools.bind(e,this)}}var r=CKEDITOR.plugins.indent;r.registerCommands(t,{indentlist:new n(t,"indentlist",!0),outdentlist:new n(t,"outdentlist")}),CKEDITOR.tools.extend(n.prototype,r.specificDefinition.prototype,{context:{ol:1,ul:1}})}}),CKEDITOR.plugins.indentList={},CKEDITOR.plugins.indentList.firstItemInPath=function(e,n,r){var i=n.contains(t);return r||(r=n.contains(e)),r&&i&&i.equals(r.getFirst(t))}}(),CKEDITOR.plugins.add("smiley",{requires:"dialog",init:function(e){e.config.smiley_path=e.config.smiley_path||this.path+"images/",e.addCommand("smiley",new CKEDITOR.dialogCommand("smiley",{allowedContent:"img[alt,height,!src,title,width]",requiredContent:"img"})),e.ui.addButton&&e.ui.addButton("Smiley",{label:e.lang.smiley.toolbar,command:"smiley",toolbar:"insert,50"}),CKEDITOR.dialog.add("smiley",this.path+"dialogs/smiley.js")}}),CKEDITOR.config.smiley_images="regular_smile.png sad_smile.png wink_smile.png teeth_smile.png confused_smile.png tongue_smile.png embarrassed_smile.png omg_smile.png whatchutalkingabout_smile.png angry_smile.png angel_smile.png shades_smile.png devil_smile.png cry_smile.png lightbulb.png thumbs_down.png thumbs_up.png heart.png broken_heart.png kiss.png envelope.png".split(" "),CKEDITOR.config.smiley_descriptions="smiley;sad;wink;laugh;frown;cheeky;blush;surprise;indecision;angry;angel;cool;devil;crying;enlightened;no;yes;heart;broken heart;kiss;mail".split(";"),function(){function e(e,t){var t=void 0===t||t,n;if(t)n=e.getComputedStyle("text-align");else{for(;!e.hasAttribute||!e.hasAttribute("align")&&!e.getStyle("text-align");){n=e.getParent();if(!n)break;e=n}n=e.getStyle("text-align")||e.getAttribute("align")||""}return n&&(n=n.replace(/(?:-(?:moz|webkit)-)?(?:start|auto)/i,"")),!n&&t&&(n="rtl"==e.getComputedStyle("direction")?"right":"left"),n}function t(e,t,n){this.editor=e,this.name=t,this.value=n,this.context="p";var t=e.config.justifyClasses,r=e.config.enterMode==CKEDITOR.ENTER_P?"p":"div";if(t){switch(n){case"left":this.cssClassName=t[0];break;case"center":this.cssClassName=t[1];break;case"right":this.cssClassName=t[2];break;case"justify":this.cssClassName=t[3]}this.cssClassRegex=RegExp("(?:^|\\s+)(?:"+t.join("|")+")(?=$|\\s)"),this.requiredContent=r+"("+this.cssClassName+")"}else this.requiredContent=r+"{text-align}";this.allowedContent={"caption div h1 h2 h3 h4 h5 h6 p pre td th li":{propertiesOnly:!0,styles:this.cssClassName?null:"text-align",classes:this.cssClassName||null}},e.config.enterMode==CKEDITOR.ENTER_BR&&(this.allowedContent.div=!0)}function n(e){var t=e.editor,n=t.createRange();n.setStartBefore(e.data.node),n.setEndAfter(e.data.node);for(var r=new CKEDITOR.dom.walker(n),i;i=r.next();)if(i.type==CKEDITOR.NODE_ELEMENT)if(!i.equals(e.data.node)&&i.getDirection())n.setStartAfter(i),r=new CKEDITOR.dom.walker(n);else{var s=t.config.justifyClasses;s&&(i.hasClass(s[0])?(i.removeClass(s[0]),i.addClass(s[2])):i.hasClass(s[2])&&(i.removeClass(s[2]),i.addClass(s[0]))),s=i.getStyle("text-align"),"left"==s?i.setStyle("text-align","right"):"right"==s&&i.setStyle("text-align","left")}}t.prototype={exec:function(t){var n=t.getSelection(),r=t.config.enterMode;if(n){for(var i=n.createBookmarks(),s=n.getRanges(),o=this.cssClassName,u,a,f=t.config.useComputedState,f=void 0===f||f,c=s.length-1;0<=c;c--){u=s[c].createIterator();for(u.enlargeBr=r!=CKEDITOR.ENTER_BR;a=u.getNextParagraph(r==CKEDITOR.ENTER_P?"p":"div");)if(!a.isReadOnly()){a.removeAttribute("align"),a.removeStyle("text-align");var h=o&&(a.$.className=CKEDITOR.tools.ltrim(a.$.className.replace(this.cssClassRegex,""))),p=this.state==CKEDITOR.TRISTATE_OFF&&(!f||e(a,!0)!=this.value);o?p?a.addClass(o):h||a.removeAttribute("class"):p&&a.setStyle("text-align",this.value)}}t.focus(),t.forceNextSelectionCheck(),n.selectBookmarks(i)}},refresh:function(t,n){var r=n.block||n.blockLimit;this.setState("body"!=r.getName()&&e(r,this.editor.config.useComputedState)==this.value?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}},CKEDITOR.plugins.add("justify",{init:function(e){if(!e.blockless){var r=new t(e,"justifyleft","left"),i=new t(e,"justifycenter","center"),s=new t(e,"justifyright","right"),o=new t(e,"justifyblock","justify");e.addCommand("justifyleft",r),e.addCommand("justifycenter",i),e.addCommand("justifyright",s),e.addCommand("justifyblock",o),e.ui.addButton&&(e.ui.addButton("JustifyLeft",{label:e.lang.justify.left,command:"justifyleft",toolbar:"align,10"}),e.ui.addButton("JustifyCenter",{label:e.lang.justify.center,command:"justifycenter",toolbar:"align,20"}),e.ui.addButton("JustifyRight",{label:e.lang.justify.right,command:"justifyright",toolbar:"align,30"}),e.ui.addButton("JustifyBlock",{label:e.lang.justify.block,command:"justifyblock",toolbar:"align,40"})),e.on("dirChanged",n)}}})}(),CKEDITOR.plugins.add("menubutton",{requires:"button,menu",onLoad:function(){var e=function(e){var t=this._,n=t.menu;t.state!==CKEDITOR.TRISTATE_DISABLED&&(t.on&&n?n.hide():(t.previousState=t.state,n||(n=t.menu=new CKEDITOR.menu(e,{panel:{className:"cke_menu_panel",attributes:{"aria-label":e.lang.common.options}}}),n.onHide=CKEDITOR.tools.bind(function(){var n=this.command?e.getCommand(this.command).modes:this.modes;this.setState(!n||n[e.mode]?t.previousState:CKEDITOR.TRISTATE_DISABLED),t.on=0},this),this.onMenu&&n.addListener(this.onMenu)),this.setState(CKEDITOR.TRISTATE_ON),t.on=1,setTimeout(function(){n.show(CKEDITOR.document.getById(t.id),4)},0)))};CKEDITOR.ui.menuButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(t){delete t.panel,this.base(t),this.hasArrow=!0,this.click=e},statics:{handler:{create:function(e){return new CKEDITOR.ui.menuButton(e)}}}})},beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_MENUBUTTON,CKEDITOR.ui.menuButton.handler)}}),CKEDITOR.UI_MENUBUTTON="menubutton",function(){CKEDITOR.plugins.add("language",{requires:"menubutton",init:function(e){var t=e.config.language_list||["ar:Arabic:rtl","fr:French","es:Spanish"],n=this,r=e.lang.language,i={},s,o,u,a;e.addCommand("language",{allowedContent:"span[!lang,!dir]",requiredContent:"span[lang,dir]",contextSensitive:!0,exec:function(e,t){var n=i["language_"+t];n&&e[n.style.checkActive(e.elementPath(),e)?"removeStyle":"applyStyle"](n.style)},refresh:function(e){this.setState(n.getCurrentLangElement(e)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}});for(a=0;a<t.length;a++)s=t[a].split(":"),o=s[0],u="language_"+o,i[u]={label:s[1],langId:o,group:"language",order:a,ltr:"rtl"!=(""+s[2]).toLowerCase(),onClick:function(){e.execCommand("language",this.langId)},role:"menuitemcheckbox"},i[u].style=new CKEDITOR.style({element:"span",attributes:{lang:o,dir:i[u].ltr?"ltr":"rtl"}});i.language_remove={label:r.remove,group:"language_remove",state:CKEDITOR.TRISTATE_DISABLED,order:i.length,onClick:function(){var t=n.getCurrentLangElement(e);t&&e.execCommand("language",t.getAttribute("lang"))}},e.addMenuGroup("language",1),e.addMenuGroup("language_remove"),e.addMenuItems(i),e.ui.add("Language",CKEDITOR.UI_MENUBUTTON,{label:r.button,allowedContent:"span[!lang,!dir]",requiredContent:"span[lang,dir]",toolbar:"bidi,30",command:"language",onMenu:function(){var t={},r=n.getCurrentLangElement(e),s;for(s in i)t[s]=CKEDITOR.TRISTATE_OFF;return t.language_remove=r?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,r&&(t["language_"+r.getAttribute("lang")]=CKEDITOR.TRISTATE_ON),t}})},getCurrentLangElement:function(e){var t=e.elementPath(),e=t&&t.elements,n;if(t)for(var r=0;r<e.length;r++)t=e[r],!n&&"span"==t.getName()&&t.hasAttribute("dir")&&t.hasAttribute("lang")&&(n=t);return n}})}(),function(){function e(e){return e.replace(/'/g,"\\$&")}function t(e){for(var t,n=e.length,r=[],i=0;i<n;i++)t=e.charCodeAt(i),r.push(t);return"String.fromCharCode("+r.join(",")+")"}function n(t,n){var r=t.plugins.link,i=r.compiledProtectionFunction.params,s,o;o=[r.compiledProtectionFunction.name,"("];for(var u=0;u<i.length;u++)r=i[u].toLowerCase(),s=n[r],0<u&&o.push(","),o.push("'",s?e(encodeURIComponent(n[r])):"","'");return o.push(")"),o.join("")}function r(e){var e=e.config.emailProtection||"",t;return e&&"encode"!=e&&(t={},e.replace(/^([^(]+)\(([^)]+)\)$/,function(e,n,r){t.name=n,t.params=[],r.replace(/[^,\s]+/g,function(e){t.params.push(e)})})),t}CKEDITOR.plugins.add("link",{requires:"dialog,fakeobjects",onLoad:function(){function e(e){return n.replace(/%1/g,"rtl"==e?"right":"left").replace(/%2/g,"cke_contents_"+e)}var t="background:url("+CKEDITOR.getUrl(this.path+"images"+(CKEDITOR.env.hidpi?"/hidpi":"")+"/anchor.png")+") no-repeat %1 center;border:1px dotted #00f;background-size:16px;",n=".%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{"+t+"padding-%1:18px;cursor:auto;}.%2 img.cke_anchor{"+t+"width:16px;min-height:15px;height:1.15em;vertical-align:text-bottom;}";CKEDITOR.addCss(e("ltr")+e("rtl"))},init:function(e){var t="a[!href]";CKEDITOR.dialog.isTabEnabled(e,"link","advanced")&&(t=t.replace("]",",accesskey,charset,dir,id,lang,name,rel,tabindex,title,type]{*}(*)")),CKEDITOR.dialog.isTabEnabled(e,"link","target")&&(t=t.replace("]",",target,onclick]")),e.addCommand("link",new CKEDITOR.dialogCommand("link",{allowedContent:t,requiredContent:"a[href]"})),e.addCommand("anchor",new CKEDITOR.dialogCommand("anchor",{allowedContent:"a[!name,id]",requiredContent:"a[name]"})),e.addCommand("unlink",new CKEDITOR.unlinkCommand),e.addCommand("removeAnchor",new CKEDITOR.removeAnchorCommand),e.setKeystroke(CKEDITOR.CTRL+76,"link"),e.ui.addButton&&(e.ui.addButton("Link",{label:e.lang.link.toolbar,command:"link",toolbar:"links,10"}),e.ui.addButton("Unlink",{label:e.lang.link.unlink,command:"unlink",toolbar:"links,20"}),e.ui.addButton("Anchor",{label:e.lang.link.anchor.toolbar,command:"anchor",toolbar:"links,30"})),CKEDITOR.dialog.add("link",this.path+"dialogs/link.js"),CKEDITOR.dialog.add("anchor",this.path+"dialogs/anchor.js"),e.on("doubleclick",function(t){var n=CKEDITOR.plugins.link.getSelectedLink(e)||t.data.element;n.isReadOnly()||(n.is("a")?(t.data.dialog=n.getAttribute("name")&&(!n.getAttribute("href")||!n.getChildCount())?"anchor":"link",t.data.link=n):CKEDITOR.plugins.link.tryRestoreFakeAnchor(e,n)&&(t.data.dialog="anchor"))},null,null,0),e.on("doubleclick",function(t){t.data.dialog in{link:1,anchor:1}&&t.data.link&&e.getSelection().selectElement(t.data.link)},null,null,20),e.addMenuItems&&e.addMenuItems({anchor:{label:e.lang.link.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:e.lang.link.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:e.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:e.lang.link.unlink,command:"unlink",group:"link",order:5}}),e.contextMenu&&e.contextMenu.addListener(function(t){if(!t||t.isReadOnly())return null;t=CKEDITOR.plugins.link.tryRestoreFakeAnchor(e,t);if(!t&&!(t=CKEDITOR.plugins.link.getSelectedLink(e)))return null;var n={};return t.getAttribute("href")&&t.getChildCount()&&(n={link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF}),t&&t.hasAttribute("name")&&(n.anchor=n.removeAnchor=CKEDITOR.TRISTATE_OFF),n}),this.compiledProtectionFunction=r(e)},afterInit:function(
e){e.dataProcessor.dataFilter.addRules({elements:{a:function(t){return t.attributes.name?t.children.length?null:e.createFakeParserElement(t,"cke_anchor","anchor"):null}}});var t=e._.elementsPath&&e._.elementsPath.filters;t&&t.push(function(t,n){if("a"==n&&(CKEDITOR.plugins.link.tryRestoreFakeAnchor(e,t)||t.getAttribute("name")&&(!t.getAttribute("href")||!t.getChildCount())))return"anchor"})}});var i=/^javascript:/,s=/^mailto:([^?]+)(?:\?(.+))?$/,o=/subject=([^;?:@&=$,\/]*)/,u=/body=([^;?:@&=$,\/]*)/,a=/^#(.*)$/,f=/^((?:http|https|ftp|news):\/\/)?(.*)$/,l=/^(_(?:self|top|parent|blank))$/,c=/^javascript:void\(location\.href='mailto:'\+String\.fromCharCode\(([^)]+)\)(?:\+'(.*)')?\)$/,h=/^javascript:([^(]+)\(([^)]+)\)$/,p=/\s*window.open\(\s*this\.href\s*,\s*(?:'([^']*)'|null)\s*,\s*'([^']*)'\s*\)\s*;\s*return\s*false;*\s*/,d=/(?:^|,)([^=]+)=(\d+|yes|no)/gi,v={id:"advId",dir:"advLangDir",accessKey:"advAccessKey",name:"advName",lang:"advLangCode",tabindex:"advTabIndex",title:"advTitle",type:"advContentType","class":"advCSSClasses",charset:"advCharset",style:"advStyles",rel:"advRel"};CKEDITOR.plugins.link={getSelectedLink:function(e){var t=e.getSelection(),n=t.getSelectedElement();return n&&n.is("a")?n:(t=t.getRanges()[0])?(t.shrink(CKEDITOR.SHRINK_TEXT),e.elementPath(t.getCommonAncestor()).contains("a",1)):null},getEditorAnchors:function(e){for(var t=e.editable(),n=t.isInline()&&!e.plugins.divarea?e.document:t,t=n.getElementsByTag("a"),n=n.getElementsByTag("img"),r=[],i=0,s;s=t.getItem(i++);)(s.data("cke-saved-name")||s.hasAttribute("name"))&&r.push({name:s.data("cke-saved-name")||s.getAttribute("name"),id:s.getAttribute("id")});for(i=0;s=n.getItem(i++);)(s=this.tryRestoreFakeAnchor(e,s))&&r.push({name:s.getAttribute("name"),id:s.getAttribute("id")});return r},fakeAnchor:!0,tryRestoreFakeAnchor:function(e,t){if(t&&t.data("cke-real-element-type")&&"anchor"==t.data("cke-real-element-type")){var n=e.restoreRealElement(t);if(n.data("cke-saved-name"))return n}},parseLinkAttributes:function(e,t){var n=t&&(t.data("cke-saved-href")||t.getAttribute("href"))||"",r=e.plugins.link.compiledProtectionFunction,m=e.config.emailProtection,g,b={};n.match(i)&&("encode"==m?n=n.replace(c,function(e,t,n){return"mailto:"+String.fromCharCode.apply(String,t.split(","))+(n&&n.replace(/\\'/g,"'"))}):m&&n.replace(h,function(e,t,n){if(t==r.name){b.type="email";for(var e=b.email={},t=/(^')|('$)/g,n=n.match(/[^,\s]+/g),i=n.length,s,o,u=0;u<i;u++)s=decodeURIComponent,o=n[u].replace(t,"").replace(/\\'/g,"'"),o=s(o),s=r.params[u].toLowerCase(),e[s]=o;e.address=[e.name,e.domain].join("@")}}));if(!b.type)if(m=n.match(a))b.type="anchor",b.anchor={},b.anchor.name=b.anchor.id=m[1];else if(m=n.match(s)){g=n.match(o),n=n.match(u),b.type="email";var E=b.email={};E.address=m[1],g&&(E.subject=decodeURIComponent(g[1])),n&&(E.body=decodeURIComponent(n[1]))}else n&&(g=n.match(f))&&(b.type="url",b.url={},b.url.protocol=g[1],b.url.url=g[2]);if(t){if(n=t.getAttribute("target"))b.target={type:n.match(l)?n:"frame",name:n};else if(n=(n=t.data("cke-pa-onclick")||t.getAttribute("onclick"))&&n.match(p))for(b.target={type:"popup",name:n[1]};m=d.exec(n[2]);)"yes"!=m[2]&&"1"!=m[2]||m[1]in{height:1,width:1,top:1,left:1}?isFinite(m[2])&&(b.target[m[1]]=m[2]):b.target[m[1]]=!0;var n={},S;for(S in v)(m=t.getAttribute(S))&&(n[v[S]]=m);if(S=t.data("cke-saved-name")||n.advName)n.advName=S;CKEDITOR.tools.isEmpty(n)||(b.advanced=n)}return b},getLinkAttributes:function(r,i){var s=r.config.emailProtection||"",o={};switch(i.type){case"url":var s=i.url&&void 0!==i.url.protocol?i.url.protocol:"http://",u=i.url&&CKEDITOR.tools.trim(i.url.url)||"";o["data-cke-saved-href"]=0===u.indexOf("/")?u:s+u;break;case"anchor":s=i.anchor&&i.anchor.id,o["data-cke-saved-href"]="#"+(i.anchor&&i.anchor.name||s||"");break;case"email":var a=i.email,u=a.address;switch(s){case"":case"encode":var f=encodeURIComponent(a.subject||""),l=encodeURIComponent(a.body||""),a=[];f&&a.push("subject="+f),l&&a.push("body="+l),a=a.length?"?"+a.join("&"):"","encode"==s?(s=["javascript:void(location.href='mailto:'+",t(u)],a&&s.push("+'",e(a),"'"),s.push(")")):s=["mailto:",u,a];break;default:s=u.split("@",2),a.name=s[0],a.domain=s[1],s=["javascript:",n(r,a)]}o["data-cke-saved-href"]=s.join("")}if(i.target)if("popup"==i.target.type){for(var s=["window.open(this.href, '",i.target.name||"","', '"],c="resizable status location toolbar menubar fullscreen scrollbars dependent".split(" "),u=c.length,f=function(e){i.target[e]&&c.push(e+"="+i.target[e])},a=0;a<u;a++)c[a]+=i.target[c[a]]?"=yes":"=no";f("width"),f("left"),f("height"),f("top"),s.push(c.join(","),"'); return false;"),o["data-cke-pa-onclick"]=s.join("")}else"notSet"!=i.target.type&&i.target.name&&(o.target=i.target.name);if(i.advanced){for(var h in v)(s=i.advanced[v[h]])&&(o[h]=s);o.name&&(o["data-cke-saved-name"]=o.name)}o["data-cke-saved-href"]&&(o.href=o["data-cke-saved-href"]),h={target:1,onclick:1,"data-cke-pa-onclick":1,"data-cke-saved-name":1},i.advanced&&CKEDITOR.tools.extend(h,v);for(var p in o)delete h[p];return{set:o,removed:CKEDITOR.tools.objectKeys(h)}}},CKEDITOR.unlinkCommand=function(){},CKEDITOR.unlinkCommand.prototype={exec:function(e){var t=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1});e.removeStyle(t)},refresh:function(e,t){var n=t.lastElement&&t.lastElement.getAscendant("a",!0);n&&"a"==n.getName()&&n.getAttribute("href")&&n.getChildCount()?this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)},contextSensitive:1,startDisabled:1,requiredContent:"a[href]"},CKEDITOR.removeAnchorCommand=function(){},CKEDITOR.removeAnchorCommand.prototype={exec:function(e){var t=e.getSelection(),n=t.createBookmarks(),r;if(t&&(r=t.getSelectedElement())&&(r.getChildCount()?r.is("a"):CKEDITOR.plugins.link.tryRestoreFakeAnchor(e,r)))r.remove(1);else if(r=CKEDITOR.plugins.link.getSelectedLink(e))r.hasAttribute("href")?(r.removeAttributes({name:1,"data-cke-saved-name":1}),r.removeClass("cke_anchor")):r.remove(1);t.selectBookmarks(n)},requiredContent:"a[name]"},CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:!0,linkShowTargetTab:!0})}(),function(){function e(e,t,n){function r(n){(f=a[n?"getFirst":"getLast"]())&&(!f.is||!f.isBlockBoundary())&&(l=t.root[n?"getPrevious":"getNext"](CKEDITOR.dom.walker.invisible(!0)))&&(!l.is||!l.isBlockBoundary({br:1}))&&e.document.createElement("br")[n?"insertBefore":"insertAfter"](f)}for(var i=CKEDITOR.plugins.list.listToArray(t.root,n),s=[],o=0;o<t.contents.length;o++){var u=t.contents[o];(u=u.getAscendant("li",!0))&&!u.getCustomData("list_item_processed")&&(s.push(u),CKEDITOR.dom.element.setMarker(n,u,"list_item_processed",!0))}u=null;for(o=0;o<s.length;o++)u=s[o].getCustomData("listarray_index"),i[u].indent=-1;for(o=u+1;o<i.length;o++)if(i[o].indent>i[o-1].indent+1){s=i[o-1].indent+1-i[o].indent;for(u=i[o].indent;i[o]&&i[o].indent>=u;)i[o].indent+=s,o++;o--}var a=CKEDITOR.plugins.list.arrayToList(i,n,null,e.config.enterMode,t.root.getAttribute("dir")).listNode,f,l;r(!0),r(),a.replace(t.root),e.fire("contentDomInvalidated")}function t(e,t){this.name=e,this.context=this.type=t,this.allowedContent=t+" li",this.requiredContent=t}function n(e,t,n,r){for(var i,s;i=e[r?"getLast":"getFirst"](p);)(s=i.getDirection(1))!==t.getDirection(1)&&i.setAttribute("dir",s),i.remove(),n?i[r?"insertBefore":"insertAfter"](n):t.append(i,r)}function r(e){function t(t){var r=e[t?"getPrevious":"getNext"](l);r&&r.type==CKEDITOR.NODE_ELEMENT&&r.is(e.getName())&&(n(e,r,null,!t),e.remove(),e=r)}t(),t(1)}function i(e){return e.type==CKEDITOR.NODE_ELEMENT&&(e.getName()in CKEDITOR.dtd.$block||e.getName()in CKEDITOR.dtd.$listItem)&&CKEDITOR.dtd[e.getName()]["#"]}function s(e,t,i){e.fire("saveSnapshot"),i.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var s=i.extractContents();t.trim(!1,!0);var u=t.createBookmark(),a=new CKEDITOR.dom.elementPath(t.startContainer),f=a.block,a=a.lastElement.getAscendant("li",1)||f,h=new CKEDITOR.dom.elementPath(i.startContainer),p=h.contains(CKEDITOR.dtd.$listItem),h=h.contains(CKEDITOR.dtd.$list);f?(f=f.getBogus())&&f.remove():h&&(f=h.getPrevious(l))&&c(f)&&f.remove(),(f=s.getLast())&&f.type==CKEDITOR.NODE_ELEMENT&&f.is("br")&&f.remove(),(f=t.startContainer.getChild(t.startOffset))?s.insertBefore(f):t.startContainer.append(s),p&&(s=o(p))&&(a.contains(p)?(n(s,p.getParent(),p),s.remove()):a.append(s));for(;i.checkStartOfBlock()&&i.checkEndOfBlock();){h=i.startPath(),s=h.block;if(!s)break;s.is("li")&&(a=s.getParent(),s.equals(a.getLast(l))&&s.equals(a.getFirst(l))&&(s=a)),i.moveToPosition(s,CKEDITOR.POSITION_BEFORE_START),s.remove()}i=i.clone(),s=e.editable(),i.setEndAt(s,CKEDITOR.POSITION_BEFORE_END),i=new CKEDITOR.dom.walker(i),i.evaluator=function(e){return l(e)&&!c(e)},(i=i.next())&&i.type==CKEDITOR.NODE_ELEMENT&&i.getName()in CKEDITOR.dtd.$list&&r(i),t.moveToBookmark(u),t.select(),e.fire("saveSnapshot")}function o(e){return(e=e.getLast(l))&&e.type==CKEDITOR.NODE_ELEMENT&&e.getName()in u?e:null}var u={ol:1,ul:1},a=CKEDITOR.dom.walker.whitespaces(),f=CKEDITOR.dom.walker.bookmark(),l=function(e){return!a(e)&&!f(e)},c=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function(e,t,n,r,i){if(!u[e.getName()])return[];r||(r=0),n||(n=[]);for(var s=0,o=e.getChildCount();s<o;s++){var a=e.getChild(s);a.type==CKEDITOR.NODE_ELEMENT&&a.getName()in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(a,t,n,r+1);if("li"==a.$.nodeName.toLowerCase()){var f={parent:e,indent:r,element:a,contents:[]};i?f.grandparent=i:(f.grandparent=e.getParent(),f.grandparent&&"li"==f.grandparent.$.nodeName.toLowerCase()&&(f.grandparent=f.grandparent.getParent())),t&&CKEDITOR.dom.element.setMarker(t,a,"listarray_index",n.length),n.push(f);for(var l=0,c=a.getChildCount(),h;l<c;l++)h=a.getChild(l),h.type==CKEDITOR.NODE_ELEMENT&&u[h.getName()]?CKEDITOR.plugins.list.listToArray(h,t,n,r+1,f.grandparent):f.contents.push(h)}}return n},arrayToList:function(e,t,n,r,i){n||(n=0);if(!e||e.length<n+1)return null;for(var s,o=e[n].parent.getDocument(),a=new CKEDITOR.dom.documentFragment(o),c=null,h=n,p=Math.max(e[n].indent,0),d=null,v,m,g=r==CKEDITOR.ENTER_P?"p":"div";;){var y=e[h];s=y.grandparent,v=y.element.getDirection(1);if(y.indent==p){if(!c||e[h].parent.getName()!=c.getName())c=e[h].parent.clone(!1,1),i&&c.setAttribute("dir",i),a.append(c);d=c.append(y.element.clone(0,1)),v!=c.getDirection(1)&&d.setAttribute("dir",v);for(s=0;s<y.contents.length;s++)d.append(y.contents[s].clone(1,1));h++}else if(y.indent==Math.max(p,0)+1)y=e[h-1].element.getDirection(1),h=CKEDITOR.plugins.list.arrayToList(e,null,h,r,y!=v?v:null),!d.getChildCount()&&CKEDITOR.env.needsNbspFiller&&7>=o.$.documentMode&&d.append(o.createText(" ")),d.append(h.listNode),h=h.nextIndex;else{if(-1!=y.indent||!!n||!s)return null;u[s.getName()]?(d=y.element.clone(!1,!0),v!=s.getDirection(1)&&d.setAttribute("dir",v)):d=new CKEDITOR.dom.documentFragment(o);var c=s.getDirection(1)!=v,b=y.element,w=b.getAttribute("class"),E=b.getAttribute("style"),S=d.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(r!=CKEDITOR.ENTER_BR||c||E||w),x,T=y.contents.length,N;for(s=0;s<T;s++)if(x=y.contents[s],f(x)&&1<T)S?N=x.clone(1,1):d.append(x.clone(1,1));else if(x.type==CKEDITOR.NODE_ELEMENT&&x.isBlockBoundary()){c&&!x.getDirection()&&x.setAttribute("dir",v),m=x;var C=b.getAttribute("style");C&&m.setAttribute("style",C.replace(/([^;])$/,"$1;")+(m.getAttribute("style")||"")),w&&x.addClass(w),m=null,N&&(d.append(N),N=null),d.append(x.clone(1,1))}else S?(m||(m=o.createElement(g),d.append(m),c&&m.setAttribute("dir",v)),E&&m.setAttribute("style",E),w&&m.setAttribute("class",w),N&&(m.append(N),N=null),m.append(x.clone(1,1))):d.append(x.clone(1,1));N&&((m||d).append(N),N=null),d.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&h!=e.length-1&&(CKEDITOR.env.needsBrFiller&&(v=d.getLast())&&v.type==CKEDITOR.NODE_ELEMENT&&v.is("br")&&v.remove(),v=d.getLast(l),(!v||v.type!=CKEDITOR.NODE_ELEMENT||!v.is(CKEDITOR.dtd.$block))&&d.append(o.createElement("br"))),v=d.$.nodeName.toLowerCase(),("div"==v||"p"==v)&&d.appendBogus(),a.append(d),c=null,h++}m=null;if(e.length<=h||Math.max(e[h].indent,0)<p)break}if(t)for(e=a.getFirst();e;){if(e.type==CKEDITOR.NODE_ELEMENT&&(CKEDITOR.dom.element.clearMarkers(t,e),e.getName()in CKEDITOR.dtd.$listItem&&(n=e,o=i=r=void 0,r=n.getDirection()))){for(i=n.getParent();i&&!(o=i.getDirection());)i=i.getParent();r==o&&n.removeAttribute("dir")}e=e.getNextSourceNode()}return{listNode:a,nextIndex:h}}};var h=/^h[1-6]$/,p=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);t.prototype={exec:function(t){this.refresh(t,t.elementPath());var n=t.config,i=t.getSelection(),s=i&&i.getRanges();if(this.state==CKEDITOR.TRISTATE_OFF){var o=t.editable();if(o.getFirst(l)){var a=1==s.length&&s[0];(n=a&&a.getEnclosedNode())&&n.is&&this.type==n.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}else n.enterMode==CKEDITOR.ENTER_BR?o.appendBogus():s[0].fixBlock(1,n.enterMode==CKEDITOR.ENTER_P?"p":"div"),i.selectRanges(s)}for(var n=i.createBookmarks(!0),o=[],f={},s=s.createIterator(),c=0;(a=s.getNextRange())&&++c;){var p=a.getBoundaryNodes(),d=p.startNode,v=p.endNode;d.type==CKEDITOR.NODE_ELEMENT&&"td"==d.getName()&&a.setStartAt(p.startNode,CKEDITOR.POSITION_AFTER_START),v.type==CKEDITOR.NODE_ELEMENT&&"td"==v.getName()&&a.setEndAt(p.endNode,CKEDITOR.POSITION_BEFORE_END),a=a.createIterator();for(a.forceBrBreak=this.state==CKEDITOR.TRISTATE_OFF;p=a.getNextParagraph();)if(!p.getCustomData("list_block")){CKEDITOR.dom.element.setMarker(f,p,"list_block",1);for(var m=t.elementPath(p),d=m.elements,v=0,m=m.blockLimit,g,y=d.length-1;0<=y&&(g=d[y]);y--)if(u[g.getName()]&&m.contains(g)){m.removeCustomData("list_group_object_"+c),(d=g.getCustomData("list_group_object"))?d.contents.push(p):(d={root:g,contents:[p]},o.push(d),CKEDITOR.dom.element.setMarker(f,g,"list_group_object",d)),v=1;break}v||(v=m,v.getCustomData("list_group_object_"+c)?v.getCustomData("list_group_object_"+c).contents.push(p):(d={root:v,contents:[p]},CKEDITOR.dom.element.setMarker(f,v,"list_group_object_"+c,d),o.push(d)))}}for(g=[];0<o.length;)if(d=o.shift(),this.state==CKEDITOR.TRISTATE_OFF)if(u[d.root.getName()]){s=t,c=d,d=f,a=g,v=CKEDITOR.plugins.list.listToArray(c.root,d),m=[];for(p=0;p<c.contents.length;p++)if(y=c.contents[p],(y=y.getAscendant("li",!0))&&!y.getCustomData("list_item_processed"))m.push(y),CKEDITOR.dom.element.setMarker(d,y,"list_item_processed",!0);for(var y=c.root.getDocument(),b=void 0,w=void 0,p=0;p<m.length;p++){var S=m[p].getCustomData("listarray_index"),b=v[S].parent;b.is(this.type)||(w=y.createElement(this.type),b.copyAttributes(w,{start:1,type:1}),w.removeStyle("list-style-type"),v[S].parent=w)}d=CKEDITOR.plugins.list.arrayToList(v,d,null,s.config.enterMode),v=void 0,m=d.listNode.getChildCount();for(p=0;p<m&&(v=d.listNode.getChild(p));p++)v.getName()==this.type&&a.push(v);d.listNode.replace(c.root),s.fire("contentDomInvalidated")}else{v=t,p=d,a=g,m=p.contents,s=p.root.getDocument(),c=[],1==m.length&&m[0].equals(p.root)&&(d=s.createElement("div"),m[0].moveChildren&&m[0].moveChildren(d),m[0].append(d),m[0]=d),p=p.contents[0].getParent();for(y=0;y<m.length;y++)p=p.getCommonAncestor(m[y].getParent());b=v.config.useComputedState,v=d=void 0,b=void 0===b||b;for(y=0;y<m.length;y++)for(w=m[y];S=w.getParent();){if(S.equals(p)){c.push(w),!v&&w.getDirection()&&(v=1),w=w.getDirection(b),null!==d&&(d=d&&d!=w?null:w);break}w=S}if(!(1>c.length)){m=c[c.length-1].getNext(),y=s.createElement(this.type),a.push(y);for(b=a=void 0;c.length;)a=c.shift(),b=s.createElement("li"),a.is("pre")||h.test(a.getName())||"false"==a.getAttribute("contenteditable")?a.appendTo(b):(a.copyAttributes(b),d&&a.getDirection()&&(b.removeStyle("direction"),b.removeAttribute("dir")),a.moveChildren(b),a.remove()),b.appendTo(y);d&&v&&y.setAttribute("dir",d),m?y.insertBefore(m):y.appendTo(p)}}else this.state==CKEDITOR.TRISTATE_ON&&u[d.root.getName()]&&e.call(this,t,d,f);for(y=0;y<g.length;y++)r(g[y]);CKEDITOR.dom.element.clearAllMarkers(f),i.selectBookmarks(n),t.focus()},refresh:function(e,t){var n=t.contains(u,1),r=t.blockLimit||t.root;n&&r.contains(n)?this.setState(n.is(this.type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.plugins.add("list",{requires:"indentlist",init:function(e){e.blockless||(e.addCommand("numberedlist",new t("numberedlist","ol")),e.addCommand("bulletedlist",new t("bulletedlist","ul")),e.ui.addButton&&(e.ui.addButton("NumberedList",{label:e.lang.list.numberedlist,command:"numberedlist",directional:!0,toolbar:"list,10"}),e.ui.addButton("BulletedList",{label:e.lang.list.bulletedlist,command:"bulletedlist",directional:!0,toolbar:"list,20"})),e.on("key",function(t){var n=t.data.domEvent.getKey(),r;if(e.mode=="wysiwyg"&&n in{8:1,46:1}){var a=e.getSelection().getRanges()[0],f=a&&a.startPath();if(a&&a.collapsed){var h=n==8,p=e.editable(),d=new CKEDITOR.dom.walker(a.clone());d.evaluator=function(e){return l(e)&&!c(e)},d.guard=function(e,t){return!t||e.type!=CKEDITOR.NODE_ELEMENT||!e.is("table")},n=a.clone();if(h){var m;(m=f.contains(u))&&a.checkBoundaryOfElement(m,CKEDITOR.START)&&(m=m.getParent())&&m.is("li")&&(m=o(m))?(r=m,m=m.getPrevious(l),n.moveToPosition(m&&c(m)?m:r,CKEDITOR.POSITION_BEFORE_START)):(d.range.setStartAt(p,CKEDITOR.POSITION_AFTER_START),d.range.setEnd(a.startContainer,a.startOffset),(m=d.previous())&&m.type==CKEDITOR.NODE_ELEMENT&&(m.getName()in u||m.is("li"))&&(m.is("li")||(d.range.selectNodeContents(m),d.reset(),d.evaluator=i,m=d.previous()),r=m,n.moveToElementEditEnd(r),n.moveToPosition(n.endPath().block,CKEDITOR.POSITION_BEFORE_END)));if(r)s(e,n,a),t.cancel();else{var g=f.contains(u);g&&a.checkBoundaryOfElement(g,CKEDITOR.START)&&(r=g.getFirst(l),a.checkBoundaryOfElement(r,CKEDITOR.START)&&(m=g.getPrevious(l),o(r)?m&&(a.moveToElementEditEnd(m),a.select()):e.execCommand("outdent"),t.cancel()))}}else if(r=f.contains("li")){d.range.setEndAt(p,CKEDITOR.POSITION_BEFORE_END),h=(p=r.getLast(l))&&i(p)?p:r,f=0,(m=d.next())&&m.type==CKEDITOR.NODE_ELEMENT&&m.getName()in u&&m.equals(p)?(f=1,m=d.next()):a.checkBoundaryOfElement(h,CKEDITOR.END)&&(f=2);if(f&&m){a=a.clone(),a.moveToElementEditStart(m);if(f==1){n.optimize();if(!n.startContainer.equals(r)){for(r=n.startContainer;r.is(CKEDITOR.dtd.$inline);)g=r,r=r.getParent();g&&n.moveToPosition(g,CKEDITOR.POSITION_AFTER_END)}}f==2&&(n.moveToPosition(n.endPath().block,CKEDITOR.POSITION_BEFORE_END),a.endPath().block&&a.moveToPosition(a.endPath().block,CKEDITOR.POSITION_AFTER_START)),s(e,n,a),t.cancel()}}else d.range.setEndAt(p,CKEDITOR.POSITION_BEFORE_END),(m=d.next())&&m.type==CKEDITOR.NODE_ELEMENT&&m.is(u)&&(m=m.getFirst(l),f.block&&a.checkStartOfBlock()&&a.checkEndOfBlock()?(f.block.remove(),a.moveToElementEditStart(m),a.select()):o(m)?(a.moveToElementEditStart(m),a.select()):(a=a.clone(),a.moveToElementEditStart(m),s(e,n,a)),t.cancel());setTimeout(function(){e.selectionChange(1)})}}}))}})}(),function(){CKEDITOR.plugins.liststyle={requires:"dialog,contextmenu",init:function(e){if(!e.blockless){var t;t=new CKEDITOR.dialogCommand("numberedListStyle",{requiredContent:"ol",allowedContent:"ol{list-style-type}[start]"}),t=e.addCommand("numberedListStyle",t),e.addFeature(t),CKEDITOR.dialog.add("numberedListStyle",this.path+"dialogs/liststyle.js"),t=new CKEDITOR.dialogCommand("bulletedListStyle",{requiredContent:"ul",allowedContent:"ul{list-style-type}"}),t=e.addCommand("bulletedListStyle",t),e.addFeature(t),CKEDITOR.dialog.add("bulletedListStyle",this.path+"dialogs/liststyle.js"),e.addMenuGroup("list",108),e.addMenuItems({numberedlist:{label:e.lang.liststyle.numberedTitle,group:"list",command:"numberedListStyle"},bulletedlist:{label:e.lang.liststyle.bulletedTitle,group:"list",command:"bulletedListStyle"}}),e.contextMenu.addListener(function(e){if(!e||e.isReadOnly())return null;for(;e;){var t=e.getName();if("ol"==t)return{numberedlist:CKEDITOR.TRISTATE_OFF};if("ul"==t)return{bulletedlist:CKEDITOR.TRISTATE_OFF};e=e.getParent()}return null})}}},CKEDITOR.plugins.add("liststyle",CKEDITOR.plugins.liststyle)}(),function(){function e(e,t,n){return l(t)&&l(n)&&n.equals(t.getNext(function(e){return!(J(e)||K(e)||c(e))}))}function t(e){this.upper=e[0],this.lower=e[1],this.set.apply(this,e.slice(2))}function n(e){var t=e.element;if(t&&l(t)&&(t=t.getAscendant(e.triggers,!0))&&e.editable.contains(t)){var n=s(t);if("true"==n.getAttribute("contenteditable"))return t;if(n.is(e.triggers))return n}return null}function r(e,t,n){return b(e,t),b(e,n),e=t.size.bottom,n=n.size.top,e&&n?0|(e+n)/2:e||n}function i(e,t,n){return t=t[n?"getPrevious":"getNext"](function(t){return t&&t.type==CKEDITOR.NODE_TEXT&&!J(t)||l(t)&&!c(t)&&!f(e,t)})}function s(e,t){if(e.data("cke-editable"))return null;for(t||(e=e.getParent());e&&!e.data("cke-editable");){if(e.hasAttribute("contenteditable"))return e;e=e.getParent()}return null}function o(e){var t=e.doc,n=N('<span contenteditable="false" style="'+W+"position:absolute;border-top:1px dashed "+e.boxColor+'"></span>',t),r=CKEDITOR.getUrl(this.path+"images/"+(C.hidpi?"hidpi/":"")+"icon"+(e.rtl?"-rtl":"")+".png");x(n,{attach:function(){return this.wrap.getParent()||this.wrap.appendTo(e.editable,!0),this},lineChildren:[x(N('<span title="'+e.editor.lang.magicline.title+'" contenteditable="false">&#8629;</span>',t),{base:W+"height:17px;width:17px;"+(e.rtl?"left":"right")+":17px;background:url("+r+") center no-repeat "+e.boxColor+";cursor:pointer;"+(C.hc?"font-size: 15px;line-height:14px;border:1px solid #fff;text-align:center;":"")+(C.hidpi?"background-size: 9px 10px;":""),looks:["top:-8px; border-radius: 2px;","top:-17px; border-radius: 2px 2px 0px 0px;","top:-1px; border-radius: 0px 0px 2px 2px;"]}),x(N(V,t),{base:X+"left:0px;border-left-color:"+e.boxColor+";",looks:["border-width:8px 0 8px 8px;top:-8px","border-width:8px 0 0 8px;top:-8px","border-width:0 0 8px 8px;top:0px"]}),x(N(V,t),{base:X+"right:0px;border-right-color:"+e.boxColor+";",looks:["border-width:8px 8px 8px 0;top:-8px","border-width:8px 8px 0 0;top:-8px","border-width:0 8px 8px 0;top:0px"]})],detach:function(){return this.wrap.getParent()&&this.wrap.remove(),this},mouseNear:function(){b(e,this);var t=e.holdDistance,n=this.size;return n&&e.mouse.y>n.top-t&&e.mouse.y<n.bottom+t&&e.mouse.x>n.left-t&&e.mouse.x<n.right+t?!0:!1},place:function(){var t=e.view,n=e.editable,r=e.trigger,i=r.upper,s=r.lower,o=i||s,u=o.getParent(),a={};this.trigger=r,i&&b(e,i,!0),s&&b(e,s,!0),b(e,u,!0),e.inInlineMode&&w(e,!0),u.equals(n)?(a.left=t.scroll.x,a.right=-t.scroll.x,a.width=""):(a.left=o.size.left-o.size.margin.left+t.scroll.x-(e.inInlineMode?t.editable.left+t.editable.border.left:0),a.width=o.size.outerWidth+o.size.margin.left+o.size.margin.right+t.scroll.x,a.right=""),i&&s?a.top=i.size.margin.bottom===s.size.margin.top?0|i.size.bottom+i.size.margin.bottom/2:i.size.margin.bottom<s.size.margin.top?i.size.bottom+i.size.margin.bottom:i.size.bottom+i.size.margin.bottom-s.size.margin.top:i?s||(a.top=i.size.bottom+i.size.margin.bottom):a.top=s.size.top-s.size.margin.top,r.is(H)||a.top>t.scroll.y-15&&a.top<t.scroll.y+5?(a.top=e.inInlineMode?0:t.scroll.y,this.look(H)):r.is(B)||a.top>t.pane.bottom-5&&a.top<t.pane.bottom+15?(a.top=e.inInlineMode?t.editable.height+t.editable.padding.top+t.editable.padding.bottom:t.pane.bottom-1,this.look(B)):(e.inInlineMode&&(a.top-=t.editable.top+t.editable.border.top),this.look(j)),e.inInlineMode&&(a.top--,a.top+=t.editable.scroll.top,a.left+=t.editable.scroll.left);for(var f in a)a[f]=CKEDITOR.tools.cssLength(a[f]);this.setStyles(a)},look:function(e){if(this.oldLook!=e){for(var t=this.lineChildren.length,n;t--;)(n=this.lineChildren[t]).setAttribute("style",n.base+n.looks[0|e/2]);this.oldLook=e}},wrap:new T("span",e.doc)});for(t=n.lineChildren.length;t--;)n.lineChildren[t].appendTo(n);n.look(j),n.appendTo(n.wrap),n.unselectable(),n.lineChildren[0].on("mouseup",function(t){n.detach(),u(e,function(t){var n=e.line.trigger;t[n.is(O)?"insertBefore":"insertAfter"](n.is(O)?n.lower:n.upper)},!0),e.editor.focus(),!C.ie&&e.enterMode!=CKEDITOR.ENTER_BR&&e.hotNode.scrollIntoView(),t.data.preventDefault(!0)}),n.on("mousedown",function(e){e.data.preventDefault(!0)}),e.line=n}function u(e,t,n){var r=new CKEDITOR.dom.range(e.doc),i=e.editor,o;C.ie&&e.enterMode==CKEDITOR.ENTER_BR?o=e.doc.createText(F):(o=(o=s(e.element,!0))&&o.data("cke-enter-mode")||e.enterMode,o=new T(A[o],e.doc),o.is("br")||e.doc.createText(F).appendTo(o)),n&&i.fire("saveSnapshot"),t(o),r.moveToPosition(o,CKEDITOR.POSITION_AFTER_START),i.getSelection().selectRanges([r]),e.hotNode=o,n&&i.fire("saveSnapshot")}function a(e,t){return{canUndo:!0,modes:{wysiwyg:1},exec:function(){function r(n){var r=C.ie&&9>C.version?" ":F,i=e.hotNode&&e.hotNode.getText()==r&&e.element.equals(e.hotNode)&&e.lastCmdDirection===!!t;u(e,function(r){i&&e.hotNode&&e.hotNode.remove(),r[t?"insertAfter":"insertBefore"](n),r.setAttributes({"data-cke-magicline-hot":1,"data-cke-magicline-dir":!!t}),e.lastCmdDirection=!!t}),!C.ie&&e.enterMode!=CKEDITOR.ENTER_BR&&e.hotNode.scrollIntoView(),e.line.detach()}return function(o){var o=o.getSelection().getStartElement(),u,o=o.getAscendant(U,1);if(!d(e,o)&&o&&!o.equals(e.editable)&&!o.contains(e.editable)){(u=s(o))&&"false"==u.getAttribute("contenteditable")&&(o=u),e.element=o,u=i(e,o,!t);var a;l(u)&&u.is(e.triggers)&&u.is(R)&&(!i(e,u,!t)||(a=i(e,u,!t))&&l(a)&&a.is(e.triggers))?r(u):(a=n(e,o),l(a)&&(i(e,a,!t)?(o=i(e,a,!t))&&l(o)&&o.is(e.triggers)&&r(a):r(a)))}}}()}}function f(e,t){if(!t||t.type!=CKEDITOR.NODE_ELEMENT||!t.$)return!1;var n=e.line;return n.wrap.equals(t)||n.wrap.contains(t)}function l(e){return e&&e.type==CKEDITOR.NODE_ELEMENT&&e.$}function c(e){if(!l(e))return!1;var t;return(t=h(e))||(l(e)?(t={left:1,right:1,center:1},t=!!t[e.getComputedStyle("float")]||!!t[e.getAttribute("align")]):t=!1),t}function h(e){return!!{absolute:1,fixed:1}[e.getComputedStyle("position")]}function p(e,t){return l(t)?t.is(e.triggers):null}function d(e,t){if(!t)return!1;for(var n=t.getParents(1),r=n.length;r--;)for(var i=e.tabuList.length;i--;)if(n[r].hasAttribute(e.tabuList[i]))return!0;return!1}function v(e,t,n){return t=t[n?"getLast":"getFirst"](function(t){return e.isRelevant(t)&&!t.is(q)}),t?(b(e,t),n?t.size.top>e.mouse.y:t.size.bottom<e.mouse.y):!1}function m(e){var n=e.editable,r=e.mouse,i=e.view,s=e.triggerOffset;w(e);var o=r.y>(e.inInlineMode?i.editable.top+i.editable.height/2:Math.min(i.editable.height,i.pane.height)/2),n=n[o?"getLast":"getFirst"](function(e){return!J(e)&&!K(e)});return n?(f(e,n)&&(n=e.line.wrap[o?"getPrevious":"getNext"](function(e){return!J(e)&&!K(e)})),!l(n)||c(n)||!p(e,n)?null:(b(e,n),!o&&0<=n.size.top&&0<r.y&&r.y<n.size.top+s?(e=e.inInlineMode||0===i.scroll.y?H:j,new t([null,n,O,D,e])):o&&n.size.bottom<=i.pane.height&&r.y>n.size.bottom-s&&r.y<i.pane.height?(e=e.inInlineMode||n.size.bottom>i.pane.height-s&&n.size.bottom<i.pane.height?B:j,new t([n,null,M,D,e])):null)):null}function g(e){var r=e.mouse,s=e.view,o=e.triggerOffset,u=n(e);if(!u)return null;b(e,u);var o=Math.min(o,0|u.size.outerHeight/2),a=[],f,h;if(r.y>u.size.top-1&&r.y<u.size.top+o)h=!1;else{if(!(r.y>u.size.bottom-o&&r.y<u.size.bottom+1))return null;h=!0}if(c(u)||v(e,u,h)||u.getParent().is(I))return null;var d=i(e,u,!h);if(d){if(d&&d.type==CKEDITOR.NODE_TEXT)return null;if(l(d)){if(c(d)||!p(e,d)||d.getParent().is(I))return null;a=[d,u][h?"reverse":"concat"]().concat([_,D])}}else u.equals(e.editable[h?"getLast":"getFirst"](e.isRelevant))?(w(e),h&&r.y>u.size.bottom-o&&r.y<s.pane.height&&u.size.bottom>s.pane.height-o&&u.size.bottom<s.pane.height?f=B:0<r.y&&r.y<u.size.top+o&&(f=H)):f=j,a=[null,u][h?"reverse":"concat"]().concat([h?M:O,D,f,u.equals(e.editable[h?"getLast":"getFirst"](e.isRelevant))?h?B:H:j]);return 0 in a?new t(a):null}function y(e,t,n,r){for(var i=t.getDocumentPosition(),s={},o={},u={},a={},f=G.length;f--;)s[G[f]]=parseInt(t.getComputedStyle.call(t,"border-"+G[f]+"-width"),10)||0,u[G[f]]=parseInt(t.getComputedStyle.call(t,"padding-"+G[f]),10)||0,o[G[f]]=parseInt(t.getComputedStyle.call(t,"margin-"+G[f]),10)||0;return(!n||r)&&E(e,r),a.top=i.y-(n?0:e.view.scroll.y),a.left=i.x-(n?0:e.view.scroll.x),a.outerWidth=t.$.offsetWidth,a.outerHeight=t.$.offsetHeight,a.height=a.outerHeight-(u.top+u.bottom+s.top+s.bottom),a.width=a.outerWidth-(u.left+u.right+s.left+s.right),a.bottom=a.top+a.outerHeight,a.right=a.left+a.outerWidth,e.inInlineMode&&(a.scroll={top:t.$.scrollTop,left:t.$.scrollLeft}),x({border:s,padding:u,margin:o,ignoreScroll:n},a,!0)}function b(e,t,n){if(!l(t))return t.size=null;if(t.size){if(t.size.ignoreScroll==n&&t.size.date>new Date-z)return null}else t.size={};return x(t.size,y(e,t,n),{date:+(new Date)},!0)}function w(e,t){e.view.editable=y(e,e.editable,t,!0)}function E(e,t){e.view||(e.view={});var n=e.view;if(t||!(n&&n.date>new Date-z)){var r=e.win,n=r.getScrollPosition(),r=r.getViewPaneSize();x(e.view,{scroll:{x:n.x,y:n.y,width:e.doc.$.documentElement.scrollWidth-r.width,height:e.doc.$.documentElement.scrollHeight-r.height},pane:{width:r.width,height:r.height,bottom:r.height+n.y},date:+(new Date)},!0)}}function S(e,n,r,i){for(var s=i,o=i,u=0,a=!1,f=!1,l=e.view.pane.height,c=e.mouse;c.y+u<l&&0<c.y-u;){a||(a=n(s,i)),f||(f=n(o,i)),!a&&0<c.y-u&&(s=r(e,{x:c.x,y:c.y-u})),!f&&c.y+u<l&&(o=r(e,{x:c.x,y:c.y+u}));if(a&&f)break;u+=2}return new t([s,o,null,null])}CKEDITOR.plugins.add("magicline",{init:function(e){var r=e.config,s=r.magicline_triggerOffset||30,p={editor:e,enterMode:r.enterMode,triggerOffset:s,holdDistance:0|s*(r.magicline_holdDistance||.5),boxColor:r.magicline_color||"#ff0000",rtl:"rtl"==r.contentsLangDirection,tabuList:["data-cke-hidden-sel"].concat(r.magicline_tabuList||[]),triggers:r.magicline_everywhere?U:{table:1,hr:1,div:1,ul:1,ol:1,dl:1,form:1,blockquote:1}},v,b,S;p.isRelevant=function(e){return l(e)&&!f(p,e)&&!c(e)},e.on("contentDom",function(){var s=e.editable(),l=e.document,c=e.window;x(p,{editable:s,inInlineMode:s.isInline(),doc:l,win:c,hotNode:null},!0),p.boundary=p.inInlineMode?p.editable:p.doc.getDocumentElement(),s.is(L.$inline)||(p.inInlineMode&&!h(s)&&s.setStyles({position:"relative",top:null,left:null}),o.call(this,p),E(p),s.attachListener(e,"beforeUndoImage",function(){p.line.detach()}),s.attachListener(e,"beforeGetData",function(){p.line.wrap.getParent()&&(p.line.detach(),e.once("getData",function(){p.line.attach()},null,null,1e3))},null,null,0),s.attachListener(p.inInlineMode?l:l.getWindow().getFrame(),"mouseout",function(t){if("wysiwyg"==e.mode)if(p.inInlineMode){var n=t.data.$.clientX,t=t.data.$.clientY;E(p),w(p,!0);var r=p.view.editable,i=p.view.scroll;if(!(n>r.left-i.x&&n<r.right-i.x)||!(t>r.top-i.y&&t<r.bottom-i.y))clearTimeout(S),S=null,p.line.detach()}else clearTimeout(S),S=null,p.line.detach()}),s.attachListener(s,"keyup",function(){p.hiddenMode=0}),s.attachListener(s,"keydown",function(t){if("wysiwyg"==e.mode)switch(t.data.getKeystroke()){case 2228240:case 16:p.hiddenMode=1,p.line.detach()}}),s.attachListener(p.inInlineMode?s:l,"mousemove",function(t){b=!0;if("wysiwyg"==e.mode&&!e.readOnly&&!S){var n={x:t.data.$.clientX,y:t.data.$.clientY};S=setTimeout(function(){p.mouse=n,S=p.trigger=null,E(p),b&&!p.hiddenMode&&e.focusManager.hasFocus&&!p.line.mouseNear()&&(p.element=$(p,!0))&&((p.trigger=m(p)||g(p)||Q(p))&&!d(p,p.trigger.upper||p.trigger.lower)?p.line.attach().place():(p.trigger=null,p.line.detach()),b=!1)},30)}}),s.attachListener(c,"scroll",function(){"wysiwyg"==e.mode&&(p.line.detach(),C.webkit&&(p.hiddenMode=1,clearTimeout(v),v=setTimeout(function(){p.mouseDown||(p.hiddenMode=0)},50)))}),s.attachListener(k?l:c,"mousedown",function(){"wysiwyg"==e.mode&&(p.line.detach(),p.hiddenMode=1,p.mouseDown=1)}),s.attachListener(k?l:c,"mouseup",function(){p.hiddenMode=0,p.mouseDown=0}),e.addCommand("accessPreviousSpace",a(p)),e.addCommand("accessNextSpace",a(p,!0)),e.setKeystroke([[r.magicline_keystrokePrevious,"accessPreviousSpace"],[r.magicline_keystrokeNext,"accessNextSpace"]]),e.on("loadSnapshot",function(){var t,n,r,i;for(i in{p:1,br:1,div:1}){t=e.document.getElementsByTag(i);for(r=t.count();r--;)if((n=t.getItem(r)).data("cke-magicline-hot")){p.hotNode=n,p.lastCmdDirection="true"===n.data("cke-magicline-dir")?!0:!1;return}}}),this.backdoor={accessFocusSpace:u,boxTrigger:t,isLine:f,getAscendantTrigger:n,getNonEmptyNeighbour:i,getSize:y,that:p,triggerEdge:g,triggerEditable:m,triggerExpand:Q})},this)}});var x=CKEDITOR.tools.extend,T=CKEDITOR.dom.element,N=T.createFromHtml,C=CKEDITOR.env,k=CKEDITOR.env.ie&&9>CKEDITOR.env.version,L=CKEDITOR.dtd,A={},O=128,M=64,_=32,D=16,P=8,H=4,B=2,j=1,F=" ",I=L.$listItem,q=L.$tableContent,R=x({},L.$nonEditable,L.$empty),U=L.$block,z=100,W="width:0px;height:0px;padding:0px;margin:0px;display:block;z-index:9999;color:#fff;position:absolute;font-size: 0px;line-height:0px;",X=W+"border-color:transparent;display:block;border-style:solid;"
,V="<span>"+F+"</span>";A[CKEDITOR.ENTER_BR]="br",A[CKEDITOR.ENTER_P]="p",A[CKEDITOR.ENTER_DIV]="div",t.prototype={set:function(e,t,n){return this.properties=e+t+(n||j),this},is:function(e){return(this.properties&e)==e}};var $=function(){function e(e,t){var n=e.$.elementFromPoint(t.x,t.y);return n&&n.nodeType?new CKEDITOR.dom.element(n):null}return function(t,n,r){if(!t.mouse)return null;var i=t.doc,s=t.line.wrap,r=r||t.mouse,o=e(i,r);return n&&f(t,o)&&(s.hide(),o=e(i,r),s.show()),!o||o.type!=CKEDITOR.NODE_ELEMENT||!o.$||C.ie&&9>C.version&&!t.boundary.equals(o)&&!t.boundary.contains(o)?null:o}}(),J=CKEDITOR.dom.walker.whitespaces(),K=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_COMMENT),Q=function(){function t(t){var i=t.element,s,o,u;if(!l(i)||i.contains(t.editable)||i.isReadOnly())return null;u=S(t,function(e,t){return!t.equals(e)},function(e,t){return $(e,!0,t)},i),s=u.upper,o=u.lower;if(e(t,s,o))return u.set(_,P);if(s&&i.contains(s))for(;!s.getParent().equals(i);)s=s.getParent();else s=i.getFirst(function(e){return n(t,e)});if(o&&i.contains(o))for(;!o.getParent().equals(i);)o=o.getParent();else o=i.getLast(function(e){return n(t,e)});if(!s||!o)return null;b(t,s),b(t,o);if(t.mouse.y>s.size.top&&t.mouse.y<o.size.bottom){for(var i=Number.MAX_VALUE,a,f,c,h;o&&!o.equals(s)&&(f=s.getNext(t.isRelevant));)a=Math.abs(r(t,s,f)-t.mouse.y),a<i&&(i=a,c=s,h=f),s=f,b(t,s);return!!c&&!!h&&t.mouse.y>c.size.top&&t.mouse.y<h.size.bottom?(u.upper=c,u.lower=h,u.set(_,P)):null}return null}function n(e,t){return!(t&&t.type==CKEDITOR.NODE_TEXT||K(t)||c(t)||f(e,t)||t.type==CKEDITOR.NODE_ELEMENT&&t.$&&t.is("br"))}return function(n){var r=t(n),i;if(i=r){i=r.upper;var s=r.lower;i=!i||!s||c(s)||c(i)||s.equals(i)||i.equals(s)||s.contains(i)||i.contains(s)?!1:p(n,i)&&p(n,s)&&e(n,i,s)?!0:!1}return i?r:null}}(),G=["top","left","right","bottom"]}(),CKEDITOR.config.magicline_keystrokePrevious=CKEDITOR.CTRL+CKEDITOR.SHIFT+51,CKEDITOR.config.magicline_keystrokeNext=CKEDITOR.CTRL+CKEDITOR.SHIFT+52,function(){function e(e){if(!e||e.type!=CKEDITOR.NODE_ELEMENT||"form"!=e.getName())return[];for(var t=[],n=["style","className"],r=0;r<n.length;r++){var i=e.$.elements.namedItem(n[r]);i&&(i=new CKEDITOR.dom.element(i),t.push([i,i.nextSibling]),i.remove())}return t}function t(e,t){if(e&&e.type==CKEDITOR.NODE_ELEMENT&&"form"==e.getName()&&0<t.length)for(var n=t.length-1;0<=n;n--){var r=t[n][0],i=t[n][1];i?r.insertBefore(i):r.appendTo(e)}}function n(n,r){var i=e(n),s={},o=n.$;return r||(s["class"]=o.className||"",o.className=""),s.inline=o.style.cssText||"",r||(o.style.cssText="position: static; overflow: visible"),t(i),s}function r(n,r){var i=e(n),s=n.$;"class"in r&&(s.className=r["class"]),"inline"in r&&(s.style.cssText=r.inline),t(i)}function i(e){if(!e.editable().isInline()){var t=CKEDITOR.instances,n;for(n in t){var r=t[n];"wysiwyg"==r.mode&&!r.readOnly&&(r=r.document.getBody(),r.setAttribute("contentEditable",!1),r.setAttribute("contentEditable",!0))}e.editable().hasFocus&&(e.toolbox.focus(),e.focus())}}CKEDITOR.plugins.add("maximize",{init:function(e){function t(){var t=a.getViewPaneSize();e.resize(t.width,t.height,null,!0)}if(e.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var s=e.lang,u=CKEDITOR.document,a=u.getWindow(),f,l,c,h=CKEDITOR.TRISTATE_OFF;e.addCommand("maximize",{modes:{wysiwyg:!CKEDITOR.env.iOS,source:!CKEDITOR.env.iOS},readOnly:1,editorFocus:!1,exec:function(){var p=e.container.getFirst(function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasClass("cke_inner")}),d=e.ui.space("contents");if("wysiwyg"==e.mode){var v=e.getSelection();f=v&&v.getRanges(),l=a.getScrollPosition()}else{var g=e.editable().$;f=!CKEDITOR.env.ie&&[g.selectionStart,g.selectionEnd],l=[g.scrollLeft,g.scrollTop]}if(this.state==CKEDITOR.TRISTATE_OFF){a.on("resize",t),c=a.getScrollPosition();for(v=e.container;v=v.getParent();)v.setCustomData("maximize_saved_styles",n(v)),v.setStyle("z-index",e.config.baseFloatZIndex-5);d.setCustomData("maximize_saved_styles",n(d,!0)),p.setCustomData("maximize_saved_styles",n(p,!0)),d={overflow:CKEDITOR.env.webkit?"":"hidden",width:0,height:0},u.getDocumentElement().setStyles(d),!CKEDITOR.env.gecko&&u.getDocumentElement().setStyle("position","fixed"),(!CKEDITOR.env.gecko||!CKEDITOR.env.quirks)&&u.getBody().setStyles(d),CKEDITOR.env.ie?setTimeout(function(){a.$.scrollTo(0,0)},0):a.$.scrollTo(0,0),p.setStyle("position",CKEDITOR.env.gecko&&CKEDITOR.env.quirks?"fixed":"absolute"),p.$.offsetLeft,p.setStyles({"z-index":e.config.baseFloatZIndex-5,left:"0px",top:"0px"}),p.addClass("cke_maximized"),t(),d=p.getDocumentPosition(),p.setStyles({left:-1*d.x+"px",top:-1*d.y+"px"}),CKEDITOR.env.gecko&&i(e)}else if(this.state==CKEDITOR.TRISTATE_ON){a.removeListener("resize",t);for(var v=[d,p],y=0;y<v.length;y++)r(v[y],v[y].getCustomData("maximize_saved_styles")),v[y].removeCustomData("maximize_saved_styles");for(v=e.container;v=v.getParent();)r(v,v.getCustomData("maximize_saved_styles")),v.removeCustomData("maximize_saved_styles");CKEDITOR.env.ie?setTimeout(function(){a.$.scrollTo(c.x,c.y)},0):a.$.scrollTo(c.x,c.y),p.removeClass("cke_maximized"),CKEDITOR.env.webkit&&(p.setStyle("display","inline"),setTimeout(function(){p.setStyle("display","block")},0)),e.fire("resize",{outerHeight:e.container.$.offsetHeight,contentsHeight:d.$.offsetHeight,outerWidth:e.container.$.offsetWidth})}this.toggleState();if(v=this.uiItems[0])d=this.state==CKEDITOR.TRISTATE_OFF?s.maximize.maximize:s.maximize.minimize,v=CKEDITOR.document.getById(v._.id),v.getChild(1).setHtml(d),v.setAttribute("title",d),v.setAttribute("href",'javascript:void("'+d+'");');"wysiwyg"==e.mode?f?(CKEDITOR.env.gecko&&i(e),e.getSelection().selectRanges(f),(g=e.getSelection().getStartElement())&&g.scrollIntoView(!0)):a.$.scrollTo(l.x,l.y):(f&&(g.selectionStart=f[0],g.selectionEnd=f[1]),g.scrollLeft=l[0],g.scrollTop=l[1]),f=l=null,h=this.state,e.fire("maximize",this.state)},canUndo:!1}),e.ui.addButton&&e.ui.addButton("Maximize",{label:s.maximize.maximize,command:"maximize",toolbar:"tools,10"}),e.on("mode",function(){var t=e.getCommand("maximize");t.setState(t.state==CKEDITOR.TRISTATE_DISABLED?CKEDITOR.TRISTATE_DISABLED:h)},null,null,100)}}})}(),CKEDITOR.plugins.add("newpage",{init:function(e){e.addCommand("newpage",{modes:{wysiwyg:1,source:1},exec:function(e){var t=this;e.setData(e.config.newpage_html||"",function(){e.focus(),setTimeout(function(){e.fire("afterCommandExec",{name:"newpage",command:t}),e.selectionChange()},200)})},async:!0}),e.ui.addButton&&e.ui.addButton("NewPage",{label:e.lang.newpage.toolbar,command:"newpage",toolbar:"document,20"})}}),function(){function e(e){return{"aria-label":e,"class":"cke_pagebreak",contenteditable:"false","data-cke-display-name":"pagebreak","data-cke-pagebreak":1,style:"page-break-after: always",title:e}}CKEDITOR.plugins.add("pagebreak",{requires:"fakeobjects",onLoad:function(){var e=("background:url("+CKEDITOR.getUrl(this.path+"images/pagebreak.gif")+") no-repeat center center;clear:both;width:100%;border-top:#999 1px dotted;border-bottom:#999 1px dotted;padding:0;height:7px;cursor:default;").replace(/;/g," !important;");CKEDITOR.addCss("div.cke_pagebreak{"+e+"}")},init:function(e){e.blockless||(e.addCommand("pagebreak",CKEDITOR.plugins.pagebreakCmd),e.ui.addButton&&e.ui.addButton("PageBreak",{label:e.lang.pagebreak.toolbar,command:"pagebreak",toolbar:"insert,70"}),CKEDITOR.env.webkit&&e.on("contentDom",function(){e.document.on("click",function(t){t=t.data.getTarget(),t.is("div")&&t.hasClass("cke_pagebreak")&&e.getSelection().selectElement(t)})}))},afterInit:function(t){function n(n){CKEDITOR.tools.extend(n.attributes,e(t.lang.pagebreak.alt),!0),n.children.length=0}var r=t.dataProcessor,i=r&&r.dataFilter,r=r&&r.htmlFilter,s=/page-break-after\s*:\s*always/i,o=/display\s*:\s*none/i;r&&r.addRules({attributes:{"class":function(e,t){var n=e.replace("cke_pagebreak","");if(n!=e){var r=CKEDITOR.htmlParser.fragment.fromHtml('<span style="display: none;">&nbsp;</span>').children[0];t.children.length=0,t.add(r),r=t.attributes,delete r["aria-label"],delete r.contenteditable,delete r.title}return n}}},{applyToAll:!0,priority:5}),i&&i.addRules({elements:{div:function(e){if(e.attributes["data-cke-pagebreak"])n(e);else if(s.test(e.attributes.style)){var t=e.children[0];t&&"span"==t.name&&o.test(t.attributes.style)&&n(e)}}}})}}),CKEDITOR.plugins.pagebreakCmd={exec:function(t){var n=t.document.createElement("div",{attributes:e(t.lang.pagebreak.alt)});t.insertElement(n)},context:"div",allowedContent:{div:{styles:"!page-break-after"},span:{match:function(e){return(e=e.parent)&&"div"==e.name&&e.styles&&e.styles["page-break-after"]},styles:"display"}},requiredContent:"div{page-break-after}"}}(),function(){var e={canUndo:!1,async:!0,exec:function(t){t.getClipboardData({title:t.lang.pastetext.title},function(n){n&&t.fire("paste",{type:"text",dataValue:n.dataValue,method:"paste",dataTransfer:CKEDITOR.plugins.clipboard.initPasteDataTransfer()}),t.fire("afterCommandExec",{name:"pastetext",command:e,returnValue:!!n})})}};CKEDITOR.plugins.add("pastetext",{requires:"clipboard",init:function(t){t.addCommand("pastetext",e),t.ui.addButton&&t.ui.addButton("PasteText",{label:t.lang.pastetext.button,command:"pastetext",toolbar:"clipboard,40"}),t.config.forcePasteAsPlainText&&t.on("beforePaste",function(e){"html"!=e.data.type&&(e.data.type="text")}),t.on("pasteState",function(e){t.getCommand("pastetext").setState(e.data)})}})}(),function(){function e(e,t,n){var r=CKEDITOR.cleanWord;return r?n():(e=CKEDITOR.getUrl(e.config.pasteFromWordCleanupFile||t+"filter/default.js"),CKEDITOR.scriptLoader.load(e,n,null,!0)),!r}function t(e){e.data.type="html"}CKEDITOR.plugins.add("pastefromword",{requires:"clipboard",init:function(n){var r=0,s=this.path;n.addCommand("pastefromword",{canUndo:!1,async:!0,exec:function(e){var n=this;r=1,e.once("beforePaste",t),e.getClipboardData({title:e.lang.pastefromword.title},function(t){t&&e.fire("paste",{type:"html",dataValue:t.dataValue,method:"paste",dataTransfer:CKEDITOR.plugins.clipboard.initPasteDataTransfer()}),e.fire("afterCommandExec",{name:"pastefromword",command:n,returnValue:!!t})})}}),n.ui.addButton&&n.ui.addButton("PasteFromWord",{label:n.lang.pastefromword.toolbar,command:"pastefromword",toolbar:"clipboard,50"}),n.on("pasteState",function(e){n.getCommand("pastefromword").setState(e.data)}),n.on("paste",function(t){var i=t.data,o=i.dataValue;if(o&&(r||/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/.test(o))){i.dontFilter=!0;var u=e(n,s,function(){if(u)n.fire("paste",i);else if(!n.config.pasteFromWordPromptCleanup||r||confirm(n.lang.pastefromword.confirmCleanup))i.dataValue=CKEDITOR.cleanWord(o,n);r=0});u&&t.cancel()}},null,null,3)}})}(),function(){var e,t={modes:{wysiwyg:1,source:1},canUndo:!1,readOnly:1,exec:function(t){var n,r=t.config,i=r.baseHref?'<base href="'+r.baseHref+'"/>':"";if(r.fullPage)n=t.getData().replace(/<head>/,"$&"+i).replace(/[^>]*(?=<\/title>)/,"$& &mdash; "+t.lang.preview.preview);else{var r="<body ",s=t.document&&t.document.getBody();s&&(s.getAttribute("id")&&(r+='id="'+s.getAttribute("id")+'" '),s.getAttribute("class")&&(r+='class="'+s.getAttribute("class")+'" ')),n=t.config.docType+'<html dir="'+t.config.contentsLangDirection+'"><head>'+i+"<title>"+t.lang.preview.preview+"</title>"+CKEDITOR.tools.buildStyleHtml(t.config.contentsCss)+"</head>"+(r+">")+t.getData()+"</body></html>"}i=640,r=420,s=80;try{var o=window.screen,i=Math.round(.8*o.width),r=Math.round(.7*o.height),s=Math.round(.1*o.width)}catch(u){}if(!1===t.fire("contentPreview",t={dataValue:n}))return!1;var o="",a;return CKEDITOR.env.ie&&(window._cke_htmlToLoad=t.dataValue,a="javascript:void( (function(){document.open();"+("("+CKEDITOR.tools.fixDomain+")();").replace(/\/\/.*?\n/g,"").replace(/parent\./g,"window.opener.")+"document.write( window.opener._cke_htmlToLoad );document.close();window.opener._cke_htmlToLoad = null;})() )",o=""),CKEDITOR.env.gecko&&(window._cke_htmlToLoad=t.dataValue,o=CKEDITOR.getUrl(e+"preview.html")),o=window.open(o,null,"toolbar=yes,location=no,status=yes,menubar=yes,scrollbars=yes,resizable=yes,width="+i+",height="+r+",left="+s),CKEDITOR.env.ie&&o&&(o.location=a),!CKEDITOR.env.ie&&!CKEDITOR.env.gecko&&(a=o.document,a.open(),a.write(t.dataValue),a.close()),!0}};CKEDITOR.plugins.add("preview",{init:function(n){n.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&(e=this.path,n.addCommand("preview",t),n.ui.addButton&&n.ui.addButton("Preview",{label:n.lang.preview.preview,command:"preview",toolbar:"document,40"}))}})}(),CKEDITOR.plugins.add("print",{init:function(e){e.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&(e.addCommand("print",CKEDITOR.plugins.print),e.ui.addButton&&e.ui.addButton("Print",{label:e.lang.print.toolbar,command:"print",toolbar:"document,50"}))}}),CKEDITOR.plugins.print={exec:function(e){CKEDITOR.env.gecko?e.window.$.print():e.document.$.execCommand("Print")},canUndo:!1,readOnly:1,modes:{wysiwyg:1}},CKEDITOR.plugins.add("removeformat",{init:function(e){e.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat),e.ui.addButton&&e.ui.addButton("RemoveFormat",{label:e.lang.removeformat.toolbar,command:"removeFormat",toolbar:"cleanup,10"})}}),CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function(e){for(var t=e._.removeFormatRegex||(e._.removeFormatRegex=RegExp("^(?:"+e.config.removeFormatTags.replace(/,/g,"|")+")$","i")),n=e._.removeAttributes||(e._.removeAttributes=e.config.removeFormatAttributes.split(",")),r=CKEDITOR.plugins.removeformat.filter,i=e.getSelection().getRanges(),s=i.createIterator(),o=function(e){return e.type==CKEDITOR.NODE_ELEMENT},u;u=s.getNextRange();){u.collapsed||u.enlarge(CKEDITOR.ENLARGE_ELEMENT);var a=u.createBookmark(),f=a.startNode,l=a.endNode,c=function(n){for(var i=e.elementPath(n),s=i.elements,o=1,u;(u=s[o])&&!u.equals(i.block)&&!u.equals(i.blockLimit);o++)t.test(u.getName())&&r(e,u)&&n.breakParent(u)};c(f);if(l){c(l);for(f=f.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT);f&&!f.equals(l);)if(f.isReadOnly()){if(f.getPosition(l)&CKEDITOR.POSITION_CONTAINS)break;f=f.getNext(o)}else c=f.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT),("img"!=f.getName()||!f.data("cke-realelement"))&&r(e,f)&&(t.test(f.getName())?f.remove(1):(f.removeAttributes(n),e.fire("removeFormatCleanup",f))),f=c}u.moveToBookmark(a)}e.forceNextSelectionCheck(),e.getSelection().selectRanges(i)}}},filter:function(e,t){for(var n=e._.removeFormatFilters||[],r=0;r<n.length;r++)if(!1===n[r](t))return!1;return!0}},CKEDITOR.editor.prototype.addRemoveFormatFilter=function(e){this._.removeFormatFilters||(this._.removeFormatFilters=[]),this._.removeFormatFilters.push(e)},CKEDITOR.config.removeFormatTags="b,big,cite,code,del,dfn,em,font,i,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var",CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign",function(){var e={readOnly:1,exec:function(e){if(e.fire("save")&&(e=e.element.$.form))try{e.submit()}catch(t){e.submit.click&&e.submit.click()}}};CKEDITOR.plugins.add("save",{init:function(t){t.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(t.addCommand("save",e).modes={wysiwyg:!!t.element.$.form},t.ui.addButton&&t.ui.addButton("Save",{label:t.lang.save.toolbar,command:"save",toolbar:"document,10"}))}})}(),function(){CKEDITOR.plugins.add("selectall",{init:function(e){e.addCommand("selectAll",{modes:{wysiwyg:1,source:1},exec:function(e){var t=e.editable();if(t.is("textarea"))e=t.$,CKEDITOR.env.ie?e.createTextRange().execCommand("SelectAll"):(e.selectionStart=0,e.selectionEnd=e.value.length),e.focus();else{if(t.is("body"))e.document.$.execCommand("SelectAll",!1,null);else{var n=e.createRange();n.selectNodeContents(t),n.select()}e.forceNextSelectionCheck(),e.selectionChange()}},canUndo:!1}),e.ui.addButton&&e.ui.addButton("SelectAll",{label:e.lang.selectall.toolbar,command:"selectAll",toolbar:"selection,10"})}})}(),function(){var e={readOnly:1,preserveState:!0,editorFocus:!1,exec:function(e){this.toggleState(),this.refresh(e)},refresh:function(e){if(e.document){var t=this.state!=CKEDITOR.TRISTATE_ON||e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&!e.focusManager.hasFocus?"removeClass":"attachClass";e.editable()[t]("cke_show_blocks")}}};CKEDITOR.plugins.add("showblocks",{onLoad:function(){var e="p div pre address blockquote h1 h2 h3 h4 h5 h6".split(" "),t,n,r,i,s=CKEDITOR.getUrl(this.path),o=!(CKEDITOR.env.ie&&9>CKEDITOR.env.version),u=o?":not([contenteditable=false]):not(.cke_show_blocks_off)":"",a,f;for(t=n=r=i="";a=e.pop();)f=e.length?",":"",t+=".cke_show_blocks "+a+u+f,r+=".cke_show_blocks.cke_contents_ltr "+a+u+f,i+=".cke_show_blocks.cke_contents_rtl "+a+u+f,n+=".cke_show_blocks "+a+u+"{background-image:url("+CKEDITOR.getUrl(s+"images/block_"+a+".png")+")}";CKEDITOR.addCss((t+"{background-repeat:no-repeat;border:1px dotted gray;padding-top:8px}").concat(n,r+"{background-position:top left;padding-left:8px}",i+"{background-position:top right;padding-right:8px}")),o||CKEDITOR.addCss(".cke_show_blocks [contenteditable=false],.cke_show_blocks .cke_show_blocks_off{border:none;padding-top:0;background-image:none}.cke_show_blocks.cke_contents_rtl [contenteditable=false],.cke_show_blocks.cke_contents_rtl .cke_show_blocks_off{padding-right:0}.cke_show_blocks.cke_contents_ltr [contenteditable=false],.cke_show_blocks.cke_contents_ltr .cke_show_blocks_off{padding-left:0}")},init:function(t){function n(){r.refresh(t)}if(!t.blockless){var r=t.addCommand("showblocks",e);r.canUndo=!1,t.config.startupOutlineBlocks&&r.setState(CKEDITOR.TRISTATE_ON),t.ui.addButton&&t.ui.addButton("ShowBlocks",{label:t.lang.showblocks.toolbar,command:"showblocks",toolbar:"tools,20"}),t.on("mode",function(){r.state!=CKEDITOR.TRISTATE_DISABLED&&r.refresh(t)}),t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(t.on("focus",n),t.on("blur",n)),t.on("contentDom",function(){r.state!=CKEDITOR.TRISTATE_DISABLED&&r.refresh(t)})}}})}(),function(){var e={preserveState:!0,editorFocus:!1,readOnly:1,exec:function(e){this.toggleState(),this.refresh(e)},refresh:function(e){if(e.document){var t=this.state==CKEDITOR.TRISTATE_ON?"attachClass":"removeClass";e.editable()[t]("cke_show_borders")}}};CKEDITOR.plugins.add("showborders",{modes:{wysiwyg:1},onLoad:function(){var e;e=(CKEDITOR.env.ie6Compat?[".%1 table.%2,",".%1 table.%2 td, .%1 table.%2 th","{","border : #d3d3d3 1px dotted","}"]:".%1 table.%2,;.%1 table.%2 > tr > td, .%1 table.%2 > tr > th,;.%1 table.%2 > tbody > tr > td, .%1 table.%2 > tbody > tr > th,;.%1 table.%2 > thead > tr > td, .%1 table.%2 > thead > tr > th,;.%1 table.%2 > tfoot > tr > td, .%1 table.%2 > tfoot > tr > th;{;border : #d3d3d3 1px dotted;}".split(";")).join("").replace(/%2/g,"cke_show_border").replace(/%1/g,"cke_show_borders "),CKEDITOR.addCss(e)},init:function(t){var n=t.addCommand("showborders",e);n.canUndo=!1,!1!==t.config.startupShowBorders&&n.setState(CKEDITOR.TRISTATE_ON),t.on("mode",function(){n.state!=CKEDITOR.TRISTATE_DISABLED&&n.refresh(t)},null,null,100),t.on("contentDom",function(){n.state!=CKEDITOR.TRISTATE_DISABLED&&n.refresh(t)}),t.on("removeFormatCleanup",function(e){e=e.data,t.getCommand("showborders").state==CKEDITOR.TRISTATE_ON&&e.is("table")&&(!e.hasAttribute("border")||0>=parseInt(e.getAttribute("border"),10))&&e.addClass("cke_show_border")})},afterInit:function(e){var t=e.dataProcessor,e=t&&t.dataFilter,t=t&&t.htmlFilter;e&&e.addRules({elements:{table:function(e){var e=e.attributes,t=e["class"],n=parseInt(e.border,10);(!n||0>=n)&&(!t||-1==t.indexOf("cke_show_border"))&&(e["class"]=(t||"")+" cke_show_border")}}}),t&&t.addRules({elements:{table:function(e){var e=e.attributes,t=e["class"];t&&(e["class"]=t.replace("cke_show_border","").replace(/\s{2}/," ").replace(/^\s+|\s+$/,""))}}})}}),CKEDITOR.on("dialogDefinition",function(e){var t=e.data.name;if("table"==t||"tableProperties"==t)if(e=e.data.definition,t=e.getContents("info").get("txtBorder"),t.commit=CKEDITOR.tools.override(t.commit,function(e){return function(t,n){e.apply(this,arguments);var r=parseInt(this.getValue(),10);n[!r||0>=r?"addClass":"removeClass"]("cke_show_border")}}),e=(e=e.getContents("advanced"))&&e.get("advCSSClasses"))e.setup=CKEDITOR.tools.override(e.setup,function(e){return function(){e.apply(this,arguments),this.setValue(this.getValue().replace(/cke_show_border/,""))}}),e.commit=CKEDITOR.tools.override(e.commit,function(e){return function(t,n){e.apply(this,arguments),parseInt(n.getAttribute("border"),10)||n.addClass("cke_show_border")}})})}(),function(){CKEDITOR.plugins.add("sourcearea",{init:function(t){function n(){var e=i&&this.equals(CKEDITOR.document.getActive());this.hide(),this.setStyle("height",this.getParent().$.clientHeight+"px"),this.setStyle("width",this.getParent().$.clientWidth+"px"),this.show(),e&&this.focus()}if(t.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var r=CKEDITOR.plugins.sourcearea;t.addMode("source",function(r){var i=t.ui.space("contents").getDocument().createElement("textarea");i.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},CKEDITOR.tools.cssVendorPrefix("tab-size",t.config.sourceAreaTabSize||4))),i.setAttribute("dir","ltr"),i.addClass("cke_source").addClass("cke_reset").addClass("cke_enable_context_menu"),t.ui.space("contents").append(i),i=t.editable(new e(t,i)),i.setData(t.getData(1)),CKEDITOR.env.ie&&(i.attachListener(t,"resize",n,i),i.attachListener(CKEDITOR.document.getWindow(),"resize",n,i),CKEDITOR.tools.setTimeout(n,0,i)),t.fire("ariaWidget",this),r()}),t.addCommand("source",r.commands.source),t.ui.addButton&&t.ui.addButton("Source",{label:t.lang.sourcearea.toolbar,command:"source",toolbar:"mode,10"}),t.on("mode",function(){t.getCommand("source").setState("source"==t.mode?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)});var i=CKEDITOR.env.ie&&9==CKEDITOR.env.version}}});var e=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function(e){this.setValue(e),this.status="ready",this.editor.fire("dataReady")},getData:function(){return this.getValue()},insertHtml:function(){},insertElement:function(){},insertText:function(){},setReadOnly:function(e){this[(e?"set":"remove")+"Attribute"]("readOnly","readonly")},detach:function(){e.baseProto.detach.call(this),this.clearCustomData(),this.remove()}}})}(),CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(e){"wysiwyg"==e.mode&&e.fire("saveSnapshot"),e.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED),e.setMode("source"==e.mode?"wysiwyg":"source")},canUndo:!1}}},CKEDITOR.plugins.add("specialchar",{availableLangs:{af:1,ar:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,en:1,"en-gb":1,eo:1,es:1,et:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,he:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ru:1,si:1,sk:1,sl:1,sq:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},requires:"dialog",init:function(e){var t=this;CKEDITOR.dialog.add("specialchar",this.path+"dialogs/specialchar.js"),e.addCommand("specialchar",{exec:function(){var n=e.langCode,n=t.availableLangs[n]?n:t.availableLangs[n.replace(/-.*/,"")]?n.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(t.path+"dialogs/lang/"+n+".js"),function(){CKEDITOR.tools.extend(e.lang.specialchar,t.langEntries[n]),e.openDialog("specialchar")})},modes:{wysiwyg:1},canUndo:!1}),e.ui.addButton&&e.ui.addButton("SpecialChar",{label:e.lang.specialchar.toolbar,command:"specialchar",toolbar:"insert,50"})}}),CKEDITOR.config.specialChars="! &quot; # $ % &amp; ' ( ) * + - . / 0 1 2 3 4 5 6 7 8 9 : ; &lt; = &gt; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~ &euro; &lsquo; &rsquo; &ldquo; &rdquo; &ndash; &mdash; &iexcl; &cent; &pound; &curren; &yen; &brvbar; &sect; &uml; &copy; &ordf; &laquo; &not; &reg; &macr; &deg; &sup2; &sup3; &acute; &micro; &para; &middot; &cedil; &sup1; &ordm; &raquo; &frac14; &frac12; &frac34; &iquest; &Agrave; &Aacute; &Acirc; &Atilde; &Auml; &Aring; &AElig; &Ccedil; &Egrave; &Eacute; &Ecirc; &Euml; &Igrave; &Iacute; &Icirc; &Iuml; &ETH; &Ntilde; &Ograve; &Oacute; &Ocirc; &Otilde; &Ouml; &times; &Oslash; &Ugrave; &Uacute; &Ucirc; &Uuml; &Yacute; &THORN; &szlig; &agrave; &aacute; &acirc; &atilde; &auml; &aring; &aelig; &ccedil; &egrave; &eacute; &ecirc; &euml; &igrave; &iacute; &icirc; &iuml; &eth; &ntilde; &ograve; &oacute; &ocirc; &otilde; &ouml; &divide; &oslash; &ugrave; &uacute; &ucirc; &uuml; &yacute; &thorn; &yuml; &OElig; &oelig; &#372; &#374 &#373 &#375; &sbquo; &#8219; &bdquo; &hellip; &trade; &#9658; &bull; &rarr; &rArr; &hArr; &diams; &asymp;".split(" "),CKEDITOR.plugins.add("scayt",{requires:"menubutton,dialog",tabToOpen:null,dialogName:"scaytDialog",init:function(e){var t=this,n=CKEDITOR.plugins.scayt;this.bindEvents(e),this.parseConfig(e),this.addRule(e),CKEDITOR.dialog.add(this.dialogName,CKEDITOR.getUrl(this.path+"dialogs/options.js")),this.addMenuItems(e);var r=e.lang.scayt,i=CKEDITOR.env;e.ui.add("Scayt",CKEDITOR.UI_MENUBUTTON,{label:r.text_title,title:e.plugins.wsc?e.lang.wsc.title:r.text_title,modes:{wysiwyg:!i.ie||!(8>i.version||i.quirks)},toolbar:"spellchecker,20",refresh:function(){var t=e.ui.instances.Scayt.getState();e.scayt&&(t=n.state[e.name]?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),e.fire("scaytButtonState",t)},onRender:function(){var t=this;e.on("scaytButtonState",function(e){void 0!==typeof e.data&&t.setState(e.data)})},onMenu:function(){var t=e.scayt;return e.getMenuItem("scaytToggle").label=e.lang.scayt[t&&n.state[e.name]?"btn_disable":"btn_enable"],t={scaytToggle:CKEDITOR.TRISTATE_OFF,scaytOptions:t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytLangs:t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytDict:t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytAbout:t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,WSC:e.plugins.wsc?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED},e.config.scayt_uiTabs[0]||delete t.scaytOptions,e.config.scayt_uiTabs[1]||delete t.scaytLangs,e.config.scayt_uiTabs[2]||delete t.scaytDict,t}}),e.contextMenu&&e.addMenuItems&&(e.contextMenu.addListener(function(){var n=e.scayt,r;if(n){var i=n.getSelectionNode();if(i=i?i.getAttribute(n.getNodeAttribute()):i)r=t.menuGenerator(e,i,t),n.showBanner("."+e.contextMenu._.definition.panel.className.split(" ").join(" ."))}return r}),e.contextMenu._.onHide=CKEDITOR.tools.override(e.contextMenu._.onHide,function(t){return function(){var n=e.scayt;return n&&n.hideBanner(),t.apply(this)}}))},addMenuItems:function(e){var t=this,n=CKEDITOR.plugins.scayt;e.addMenuGroup("scaytButton");var r=e.config.scayt_contextMenuItemsOrder.split("|");if(r&&r.length)for(var i=0;i<r.length;i++)e.addMenuGroup("scayt_"+r[i],i-10);e.addCommand("scaytToggle",{exec:function(e){var t=e.scayt;n.state[e.name]=!n.state[e.name],!0===n.state[e.name]?t||n.createScayt(e):t&&n.destroy(e)}}),e.addCommand("scaytAbout",{exec:function(e){e.scayt.tabToOpen="about",e.lockSelection(),e.openDialog(t.dialogName)}}),e.addCommand("scaytOptions",{exec:function(e){e.scayt.tabToOpen="options",e.lockSelection(),e.openDialog(t.dialogName)}}),e.addCommand("scaytLangs",{exec:function(e){e.scayt.tabToOpen="langs",e.lockSelection(),e.openDialog(t.dialogName)}}),e.addCommand("scaytDict",{exec:function(e){e.scayt.tabToOpen="dictionaries",e.lockSelection(),e.openDialog(t.dialogName)}}),r={scaytToggle:{label:e.lang.scayt.btn_enable,group:"scaytButton",command:"scaytToggle"},scaytAbout:{label:e.lang.scayt.btn_about,group:"scaytButton",command:"scaytAbout"},scaytOptions:{label:e.lang.scayt.btn_options,group:"scaytButton",command:"scaytOptions"},scaytLangs:{label:e.lang.scayt.btn_langs,group:"scaytButton",command:"scaytLangs"},scaytDict:{label:e.lang.scayt.btn_dictionaries,group:"scaytButton",command:"scaytDict"}},e.plugins.wsc&&(r.WSC={label:e.lang.wsc.toolbar,group:"scaytButton",onClick:function(){var t=CKEDITOR.plugins.scayt,n=e.scayt,r=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.container.getText():e.document.getBody().getText();(r=r.replace(/\s/g,""))?(n&&t.state[e.name]&&n.setMarkupPaused&&n.setMarkupPaused(!0),e.lockSelection(),e.execCommand("checkspell")):alert("Nothing to check!")}}),e.addMenuItems(r)},bindEvents:function(e){function t(){var t=e.scayt;t&&(t.removeMarkupInSelectionNode(),t.fire("startSpellCheck"))}var n=CKEDITOR.plugins.scayt,r=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE,i=function(){n.destroy(e)},s=function(){n.state[e.name]&&!e.readOnly&&!e.scayt&&n.createScayt(e)},o=function(){var t=e.editable();t.attachListener(t,"focus",function(){CKEDITOR.plugins.scayt&&!e.scayt&&setTimeout(s,0);var t=CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state[e.name]&&e.scayt,n,i;if((r||t)&&e._.savedSelection)for(var t=e._.savedSelection.getSelectedElement(),t=!t&&e._.savedSelection.getRanges(),o=0;o<t.length;o++)i=t[o],"string"==typeof i.startContainer.$.nodeValue&&(n=i.startContainer.getText().length,(n<i.startOffset||n<i.endOffset)&&e.unlockSelection(!1))},this,null,-10)},u=function(){r?(e.on("blur",i),e.on("focus",s),e.focusManager.hasFocus&&s()):s(),o()};e.on("contentDom",u),e.on("beforeCommandExec",function(t){var r;if(t.data.name in n.options.disablingCommandExec&&"wysiwyg"==e.mode){if(r=e.scayt)n.destroy(e),e.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)}else if("bold"===t.data.name||"italic"===t.data.name||"underline"===t.data.name||"strike"===t.data.name||"subscript"===t.data.name||"superscript"===t.data.name||"enter"===t.data.name)if(r=e.scayt)r.removeMarkupInSelectionNode(),setTimeout(function(){r.fire("startSpellCheck")},0)}),e.on("beforeSetMode",function(t){if("source"==t.data){if(t=e.scayt)n.destroy(e),e.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED);e.document&&e.document.getBody().removeAttribute("_jquid")}}),e.on("afterCommandExec",function(t){var n;"wysiwyg"==e.mode&&("undo"==t.data.name||"redo"==t.data.name)&&(n=e.scayt)&&setTimeout(function(){n.fire("startSpellCheck")},250)}),e.on("readOnly",function(t){var r;t&&(r=e.scayt,!0===t.editor.readOnly?r&&r.fire("removeMarkupInDocument",{}):r?r.fire("startSpellCheck"):"wysiwyg"==t.editor.mode&&!0===n.state[t.editor.name]&&(n.createScayt(e),t.editor.fire("scaytButtonState",CKEDITOR.TRISTATE_ON)))}),e.on("beforeDestroy",i),e.on("setData",function(){i(),(e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE||e.plugins.divarea)&&u()},this,null,50),e.on("insertElement",function(){CKEDITOR.env.ie?setTimeout(function(){t()},50):t()},this,null,50),e.on("insertHtml",function(){t()},this,null,50),e.on("insertText",function(){t()},this,null,50),e.on("scaytDialogShown",function(t){t.data.selectPage(e.scayt.tabToOpen)}),e.on("paste",function(){var t=e.scayt;t&&t.removeMarkupInSelectionNode()},null,null,0)},parseConfig:function(e){var t=CKEDITOR.plugins.scayt;t.replaceOldOptionsNames(e.config),"boolean"!=typeof e.config.scayt_autoStartup&&(e.config.scayt_autoStartup=!1),t.state[e.name]=e.config.scayt_autoStartup,e.config.scayt_contextCommands||(e.config.scayt_contextCommands="ignore|ignoreall|add"),e.config.scayt_contextMenuItemsOrder||(e.config.scayt_contextMenuItemsOrder="suggest|moresuggest|control"),e.config.scayt_sLang||(e.config.scayt_sLang="en_US");if(void 0===e.config.scayt_maxSuggestions||"number"!=typeof e.config.scayt_maxSuggestions||0>e.config.scayt_maxSuggestions)e.config.scayt_maxSuggestions=5;if(void 0===e.config.scayt_minWordLength||"number"!=typeof e.config.scayt_minWordLength||1>e.config.scayt_minWordLength)e.config.scayt_minWordLength=4;if(void 0===e.config.scayt_customDictionaryIds||"string"!=typeof e.config.scayt_customDictionaryIds)e.config.scayt_customDictionaryIds="";if(void 0===e.config.scayt_userDictionaryName||"string"!=typeof e.config.scayt_userDictionaryName)e.config.scayt_userDictionaryName=null;if("string"==typeof e.config.scayt_uiTabs&&3===e.config.scayt_uiTabs.split(",").length){var n=[],r=[];e.config.scayt_uiTabs=e.config.scayt_uiTabs.split(","),CKEDITOR.tools.search(e.config.scayt_uiTabs,function(e){Number(e)===1||Number(e)===0?(r.push(!0),n.push(Number(e))):r.push(!1)}),e.config.scayt_uiTabs=null===CKEDITOR.tools.search(r,!1)?n:[1,1,1]}else e.config.scayt_uiTabs=[1,1,1];"string"!=typeof e.config.scayt_serviceProtocol&&(e.config.scayt_serviceProtocol=null),"string"!=typeof e.config.scayt_serviceHost&&(e.config.scayt_serviceHost=null),"string"!=typeof e.config.scayt_servicePort&&(e.config.scayt_servicePort=null),"string"!=typeof e.config.scayt_servicePath&&(e.config.scayt_servicePath=null),e.config.scayt_moreSuggestions||(e.config.scayt_moreSuggestions="on"),"string"!=typeof e.config.scayt_customerId&&(e.config.scayt_customerId="1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2"),"string"!=typeof e.config.scayt_srcUrl&&(t=document.location.protocol,t=-1!=t.
search(/https?:/)?t:"http:",e.config.scayt_srcUrl=t+"//svc.webspellchecker.net/spellcheck31/lf/scayt3/ckscayt/ckscayt.js"),"boolean"!=typeof CKEDITOR.config.scayt_handleCheckDirty&&(CKEDITOR.config.scayt_handleCheckDirty=!0),"boolean"!=typeof CKEDITOR.config.scayt_handleUndoRedo&&(CKEDITOR.config.scayt_handleUndoRedo=!0);if(e.config.scayt_disableOptionsStorage){var t=CKEDITOR.tools.isArray(e.config.scayt_disableOptionsStorage)?e.config.scayt_disableOptionsStorage:"string"==typeof e.config.scayt_disableOptionsStorage?[e.config.scayt_disableOptionsStorage]:void 0,i="all options lang ignore-all-caps-words ignore-domain-names ignore-words-with-mixed-cases ignore-words-with-numbers".split(" "),s=["lang","ignore-all-caps-words","ignore-domain-names","ignore-words-with-mixed-cases","ignore-words-with-numbers"],o=CKEDITOR.tools.search,u=CKEDITOR.tools.indexOf;e.config.scayt_disableOptionsStorage=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],a=!!o(e,"options");if(!o(i,r)||a&&o(s,function(e){if(e==="lang")return!1}))return;o(s,r)&&s.splice(u(s,r),1);if(r==="all"||a&&o(e,"lang"))return[];r==="options"&&(s=["lang"])}return t=t.concat(s)}(t)}},addRule:function(e){var t=e.dataProcessor,n=t&&t.htmlFilter,r=e._.elementsPath&&e._.elementsPath.filters,t=t&&t.dataFilter,i=e.addRemoveFormatFilter,s=function(t){var n=CKEDITOR.plugins.scayt;if(e.scayt&&t.hasAttribute(n.options.data_attribute_name))return!1},o=function(t){var n=CKEDITOR.plugins.scayt,r=!0;return e.scayt&&t.hasAttribute(n.options.data_attribute_name)&&(r=!1),r};r&&r.push(s),t&&t.addRules({elements:{span:function(t){var n=CKEDITOR.plugins.scayt;return n&&n.state[e.name]&&t.classes&&CKEDITOR.tools.search(t.classes,n.options.misspelled_word_class)&&(t.classes&&t.parent.type===CKEDITOR.NODE_DOCUMENT_FRAGMENT?(delete t.attributes.style,delete t.name):delete t.classes[CKEDITOR.tools.indexOf(t.classes,n.options.misspelled_word_class)]),t}}}),n&&n.addRules({elements:{span:function(t){var n=CKEDITOR.plugins.scayt;return n&&n.state[e.name]&&t.hasClass(n.options.misspelled_word_class)&&t.attributes[n.options.data_attribute_name]&&(t.removeClass(n.options.misspelled_word_class),delete t.attributes[n.options.data_attribute_name],delete t.name),t}}}),i&&i.call(e,o)},scaytMenuDefinition:function(e){var t=this,e=e.scayt;return{scayt_ignore:{label:e.getLocal("btn_ignore"),group:"scayt_control",order:1,exec:function(e){e.scayt.ignoreWord()}},scayt_ignoreall:{label:e.getLocal("btn_ignoreAll"),group:"scayt_control",order:2,exec:function(e){e.scayt.ignoreAllWords()}},scayt_add:{label:e.getLocal("btn_addWord"),group:"scayt_control",order:3,exec:function(e){var t=e.scayt;setTimeout(function(){t.addWordToUserDictionary()},10)}},option:{label:e.getLocal("btn_options"),group:"scayt_control",order:4,exec:function(e){e.scayt.tabToOpen="options",e.lockSelection(),e.openDialog(t.dialogName)},verification:function(e){return 1==e.config.scayt_uiTabs[0]?!0:!1}},language:{label:e.getLocal("btn_langs"),group:"scayt_control",order:5,exec:function(e){e.scayt.tabToOpen="langs",e.lockSelection(),e.openDialog(t.dialogName)},verification:function(e){return 1==e.config.scayt_uiTabs[1]?!0:!1}},dictionary:{label:e.getLocal("btn_dictionaries"),group:"scayt_control",order:6,exec:function(e){e.scayt.tabToOpen="dictionaries",e.lockSelection(),e.openDialog(t.dialogName)},verification:function(e){return 1==e.config.scayt_uiTabs[2]?!0:!1}},about:{label:e.getLocal("btn_about"),group:"scayt_control",order:7,exec:function(e){e.scayt.tabToOpen="about",e.lockSelection(),e.openDialog(t.dialogName)}}}},buildSuggestionMenuItems:function(e,t){var n={},r={},i=e.scayt;if(0<t.length&&"no_any_suggestions"!==t[0])for(var s=0;s<t.length;s++){var o="scayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[s].replace(" ","_");e.addCommand(o,this.createCommand(CKEDITOR.plugins.scayt.suggestions[s])),s<e.config.scayt_maxSuggestions?(e.addMenuItem(o,{label:t[s],command:o,group:"scayt_suggest",order:s+1}),n[o]=CKEDITOR.TRISTATE_OFF):(e.addMenuItem(o,{label:t[s],command:o,group:"scayt_moresuggest",order:s+1}),r[o]=CKEDITOR.TRISTATE_OFF,"on"===e.config.scayt_moreSuggestions&&(e.addMenuItem("scayt_moresuggest",{label:i.getLocal("btn_moreSuggestions"),group:"scayt_moresuggest",order:10,getItems:function(){return r}}),n.scayt_moresuggest=CKEDITOR.TRISTATE_OFF))}else n.no_scayt_suggest=CKEDITOR.TRISTATE_DISABLED,e.addCommand("no_scayt_suggest",{exec:function(){}}),e.addMenuItem("no_scayt_suggest",{label:i.getLocal("btn_noSuggestions")||"no_scayt_suggest",command:"no_scayt_suggest",group:"scayt_suggest",order:0});return n},menuGenerator:function(e,t){var n=e.scayt,r=this.scaytMenuDefinition(e),i={},s=e.config.scayt_contextCommands.split("|");n.fire("getSuggestionsList",{lang:n.getLang(),word:t}),i=this.buildSuggestionMenuItems(e,CKEDITOR.plugins.scayt.suggestions);if("off"==e.config.scayt_contextCommands)return i;for(var o in r)-1==CKEDITOR.tools.indexOf(s,o.replace("scayt_",""))&&"all"!=e.config.scayt_contextCommands||(i[o]=CKEDITOR.TRISTATE_OFF,"function"==typeof r[o].verification&&!r[o].verification(e)&&delete i[o],e.addCommand(o,{exec:r[o].exec}),e.addMenuItem(o,{label:e.lang.scayt[r[o].label]||r[o].label,command:o,group:r[o].group,order:r[o].order}));return i},createCommand:function(e){return{exec:function(t){t.scayt.replaceSelectionNode({word:e})}}}}),CKEDITOR.plugins.scayt={state:{},suggestions:[],loadingHelper:{loadOrder:[]},isLoading:!1,options:{disablingCommandExec:{source:!0,newpage:!0,templates:!0},data_attribute_name:"data-scayt-word",misspelled_word_class:"scayt-misspell-word"},backCompatibilityMap:{scayt_service_protocol:"scayt_serviceProtocol",scayt_service_host:"scayt_serviceHost",scayt_service_port:"scayt_servicePort",scayt_service_path:"scayt_servicePath",scayt_customerid:"scayt_customerId"},replaceOldOptionsNames:function(e){for(var t in e)t in this.backCompatibilityMap&&(e[this.backCompatibilityMap[t]]=e[t],delete e[t])},createScayt:function(e){var t=this;this.loadScaytLibrary(e,function(e){var n={lang:e.config.scayt_sLang,container:"BODY"==e.editable().$.nodeName?e.document.getWindow().$.frameElement:e.editable().$,customDictionary:e.config.scayt_customDictionaryIds,userDictionaryName:e.config.scayt_userDictionaryName,localization:e.langCode,customer_id:e.config.scayt_customerId,debug:e.config.scayt_debug,data_attribute_name:t.options.data_attribute_name,misspelled_word_class:t.options.misspelled_word_class,"options-to-restore":e.config.scayt_disableOptionsStorage,focused:e.editable().hasFocus,ignoreElementsRegex:e.config.scayt_elementsToIgnore,minWordLength:e.config.scayt_minWordLength};e.config.scayt_serviceProtocol&&(n.service_protocol=e.config.scayt_serviceProtocol),e.config.scayt_serviceHost&&(n.service_host=e.config.scayt_serviceHost),e.config.scayt_servicePort&&(n.service_port=e.config.scayt_servicePort),e.config.scayt_servicePath&&(n.service_path=e.config.scayt_servicePath),n=new SCAYT.CKSCAYT(n,function(){},function(){}),n.subscribe("suggestionListSend",function(e){for(var t={},n=[],r=0;r<e.suggestionList.length;r++)t["word_"+e.suggestionList[r]]||(t["word_"+e.suggestionList[r]]=e.suggestionList[r],n.push(e.suggestionList[r]));CKEDITOR.plugins.scayt.suggestions=n}),n.subscribe("selectionIsChanged",function(){e.getSelection().isLocked&&e.lockSelection()}),e.scayt=n,e.fire("scaytButtonState",e.readOnly?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_ON)})},destroy:function(e){e.scayt&&e.scayt.destroy(),delete e.scayt,e.fire("scaytButtonState",CKEDITOR.TRISTATE_OFF)},loadScaytLibrary:function(e,t){var n=this,r;"undefined"==typeof window.SCAYT||"function"!=typeof window.SCAYT.CKSCAYT?this.loadingHelper[e.name]||(this.loadingHelper[e.name]=t,this.loadingHelper.loadOrder.push(e.name),r=new Date,r=r.getTime(),r=e.config.scayt_srcUrl+"?"+r,CKEDITOR.scriptLoader.load(r,function(){var e;CKEDITOR.fireOnce("scaytReady");for(var t=0;t<n.loadingHelper.loadOrder.length;t++)e=n.loadingHelper.loadOrder[t],"function"==typeof n.loadingHelper[e]&&n.loadingHelper[e](CKEDITOR.instances[e]),delete n.loadingHelper[e];n.loadingHelper.loadOrder=[]})):window.SCAYT&&"function"==typeof window.SCAYT.CKSCAYT&&(CKEDITOR.fireOnce("scaytReady"),e.scayt||"function"==typeof t&&t(e))}},CKEDITOR.on("dialogDefinition",function(e){"scaytDialog"===e.data.name&&e.data.definition.dialog.on("cancel",function(){return!1},this,null,-1)}),CKEDITOR.on("scaytReady",function(){if(!0===CKEDITOR.config.scayt_handleCheckDirty){var e=CKEDITOR.editor.prototype;e.checkDirty=CKEDITOR.tools.override(e.checkDirty,function(e){return function(){var t=null,n=this.scayt;if(!CKEDITOR.plugins.scayt||!CKEDITOR.plugins.scayt.state[this.name]||!this.scayt)t=e.call(this);else if(t="ready"==this.status)var r=n.removeMarkupFromString(this.getSnapshot()),n=n.removeMarkupFromString(this._.previousValue),t=t&&n!==r;return t}}),e.resetDirty=CKEDITOR.tools.override(e.resetDirty,function(e){return function(){var t=this.scayt;!CKEDITOR.plugins.scayt||!CKEDITOR.plugins.scayt.state[this.name]||!this.scayt?e.call(this):this._.previousValue=t.removeMarkupFromString(this.getSnapshot())}})}if(!0===CKEDITOR.config.scayt_handleUndoRedo){var e=CKEDITOR.plugins.undo.Image.prototype,t="function"==typeof e.equalsContent?"equalsContent":"equals";e[t]=CKEDITOR.tools.override(e[t],function(e){return function(t){var n=t.editor.scayt,r=this.contents,i=t.contents,s=null;return CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state[t.editor.name]&&t.editor.scayt&&(this.contents=n.removeMarkupFromString(r)||"",t.contents=n.removeMarkupFromString(i)||""),s=e.apply(this,arguments),this.contents=r,t.contents=i,s}})}}),function(){CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",init:function(e){var t=e.config,n=e.lang.stylescombo,r={},i=[],s=[];e.on("stylesSet",function(n){if(n=n.data.styles){for(var o,u,a,l=0,h=n.length;l<h;l++)if(o=n[l],!(e.blockless&&o.element in CKEDITOR.dtd.$block)&&(u=o.name,o=new CKEDITOR.style(o),!e.filter.customConfig||e.filter.check(o)))o._name=u,o._.enterMode=t.enterMode,o._.type=a=o.assignedTo||o.type,o._.weight=l+1e3*(a==CKEDITOR.STYLE_OBJECT?1:a==CKEDITOR.STYLE_BLOCK?2:3),r[u]=o,i.push(o),s.push(o);i.sort(function(e,t){return e._.weight-t._.weight})}}),e.ui.addRichCombo("Styles",{label:n.label,title:n.panelTitle,toolbar:"styles,10",allowedContent:s,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(t.contentsCss),multiSelect:!0,attributes:{"aria-label":n.panelTitle}},init:function(){var e,t,r,s,o,u;o=0;for(u=i.length;o<u;o++)e=i[o],t=e._name,s=e._.type,s!=r&&(this.startGroup(n["panelTitle"+s]),r=s),this.add(t,e.type==CKEDITOR.STYLE_OBJECT?t:e.buildPreview(),t);this.commit()},onClick:function(t){e.focus(),e.fire("saveSnapshot");var t=r[t],n=e.elementPath();e[t.checkActive(n,e)?"removeStyle":"applyStyle"](t),e.fire("saveSnapshot")},onRender:function(){e.on("selectionChange",function(t){for(var n=this.getValue(),t=t.data.path.elements,i=0,s=t.length,o;i<s;i++){o=t[i];for(var u in r)if(r[u].checkElementRemovable(o,!0,e)){u!=n&&this.setValue(u);return}}this.setValue("")},this)},onOpen:function(){var t=e.getSelection().getSelectedElement(),t=e.elementPath(t),i=[0,0,0,0];this.showAll(),this.unmarkAll();for(var s in r){var o=r[s],u=o._.type;o.checkApplicable(t,e,e.activeFilter)?i[u]++:this.hideItem(s),o.checkActive(t,e)&&this.mark(s)}i[CKEDITOR.STYLE_BLOCK]||this.hideGroup(n["panelTitle"+CKEDITOR.STYLE_BLOCK]),i[CKEDITOR.STYLE_INLINE]||this.hideGroup(n["panelTitle"+CKEDITOR.STYLE_INLINE]),i[CKEDITOR.STYLE_OBJECT]||this.hideGroup(n["panelTitle"+CKEDITOR.STYLE_OBJECT])},refresh:function(){var t=e.elementPath();if(t){for(var n in r)if(r[n].checkApplicable(t,e,e.activeFilter))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}},reset:function(){r={},i=[]}})}})}(),function(){function e(e){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(t){if(t.editable().hasFocus){var n=t.getSelection(),r;if(r=(new CKEDITOR.dom.elementPath(n.getCommonAncestor(),n.root)).contains({td:1,th:1},1)){var n=t.createRange(),i=CKEDITOR.tools.tryThese(function(){var t=r.getParent().$.cells[r.$.cellIndex+(e?-1:1)];return t.parentNode.parentNode,t},function(){var t=r.getParent(),t=t.getAscendant("table").$.rows[t.$.rowIndex+(e?-1:1)];return t.cells[e?t.cells.length-1:0]});if(!i&&!e){for(var s=r.getAscendant("table").$,i=r.getParent().$.cells,s=new CKEDITOR.dom.element(s.insertRow(-1),t.document),o=0,u=i.length;o<u;o++)s.append((new CKEDITOR.dom.element(i[o],t.document)).clone(!1,!1)).appendBogus();n.moveToElementEditStart(s)}else{if(!i)return!0;i=new CKEDITOR.dom.element(i),n.moveToElementEditStart(i),(!n.checkStartOfBlock()||!n.checkEndOfBlock())&&n.selectNodeContents(i)}return n.select(!0),!0}}return!1}}}var t={editorFocus:!1,modes:{wysiwyg:1,source:1}},n={exec:function(e){e.container.focusNext(!0,e.tabIndex)}},r={exec:function(e){e.container.focusPrevious(!0,e.tabIndex)}};CKEDITOR.plugins.add("tab",{init:function(s){for(var o=!1!==s.config.enableTabKeyTools,u=s.config.tabSpaces||0,a="";u--;)a+=" ";a&&s.on("key",function(e){9==e.data.keyCode&&(s.insertText(a),e.cancel())}),o&&s.on("key",function(e){(9==e.data.keyCode&&s.execCommand("selectNextCell")||e.data.keyCode==CKEDITOR.SHIFT+9&&s.execCommand("selectPreviousCell"))&&e.cancel()}),s.addCommand("blur",CKEDITOR.tools.extend(n,t)),s.addCommand("blurBack",CKEDITOR.tools.extend(r,t)),s.addCommand("selectNextCell",e()),s.addCommand("selectPreviousCell",e(!0))}})}(),CKEDITOR.dom.element.prototype.focusNext=function(e,t){var n=void 0===t?this.getTabIndex():t,r,i,s,o,u,a;if(0>=n)for(u=this.getNextSourceNode(e,CKEDITOR.NODE_ELEMENT);u;){if(u.isVisible()&&0===u.getTabIndex()){s=u;break}u=u.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT)}else for(u=this.getDocument().getBody().getFirst();u=u.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!r)if(!i&&u.equals(this)){if(i=!0,e){if(!(u=u.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;r=1}}else i&&!this.contains(u)&&(r=1);if(u.isVisible()&&!(0>(a=u.getTabIndex()))){if(r&&a==n){s=u;break}a>n&&(!s||!o||a<o)?(s=u,o=a):!s&&0===a&&(s=u,o=a)}}s&&s.focus()},CKEDITOR.dom.element.prototype.focusPrevious=function(e,t){for(var n=void 0===t?this.getTabIndex():t,r,i,s,o=0,u,a=this.getDocument().getBody().getLast();a=a.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!r)if(!i&&a.equals(this)){if(i=!0,e){if(!(a=a.getPreviousSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;r=1}}else i&&!this.contains(a)&&(r=1);if(a.isVisible()&&!(0>(u=a.getTabIndex())))if(0>=n){if(r&&0===u){s=a;break}u>o&&(s=a,o=u)}else{if(r&&u==n){s=a;break}u<n&&(!s||u>o)&&(s=a,o=u)}}s&&s.focus()},CKEDITOR.plugins.add("table",{requires:"dialog",init:function(e){function t(e){return CKEDITOR.tools.extend(e||{},{contextSensitive:1,refresh:function(e,t){this.setState(t.contains("table",1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}if(!e.blockless){var n=e.lang.table;e.addCommand("table",new CKEDITOR.dialogCommand("table",{context:"table",allowedContent:"table{width,height}[align,border,cellpadding,cellspacing,summary];caption tbody thead tfoot;th td tr[scope];"+(e.plugins.dialogadvtab?"table"+e.plugins.dialogadvtab.allowedContent():""),requiredContent:"table",contentTransformations:[["table{width}: sizeToStyle","table[width]: sizeToAttribute"]]})),e.addCommand("tableProperties",new CKEDITOR.dialogCommand("tableProperties",t())),e.addCommand("tableDelete",t({exec:function(e){var t=e.elementPath().contains("table",1);if(t){var n=t.getParent(),r=e.editable();1==n.getChildCount()&&!n.is("td","th")&&!n.equals(r)&&(t=n),e=e.createRange(),e.moveToPosition(t,CKEDITOR.POSITION_BEFORE_START),t.remove(),e.select()}}})),e.ui.addButton&&e.ui.addButton("Table",{label:n.toolbar,command:"table",toolbar:"insert,30"}),CKEDITOR.dialog.add("table",this.path+"dialogs/table.js"),CKEDITOR.dialog.add("tableProperties",this.path+"dialogs/table.js"),e.addMenuItems&&e.addMenuItems({table:{label:n.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:n.deleteTable,command:"tableDelete",group:"table",order:1}}),e.on("doubleclick",function(e){e.data.element.is("table")&&(e.data.dialog="tableProperties")}),e.contextMenu&&e.contextMenu.addListener(function(){return{tabledelete:CKEDITOR.TRISTATE_OFF,table:CKEDITOR.TRISTATE_OFF}})}}}),function(){function e(e){function t(e){!(0<n.length)&&e.type==CKEDITOR.NODE_ELEMENT&&h.test(e.getName())&&!e.getCustomData("selected_cell")&&(CKEDITOR.dom.element.setMarker(r,e,"selected_cell",!0),n.push(e))}for(var e=e.getRanges(),n=[],r={},i=0;i<e.length;i++){var s=e[i];if(s.collapsed)s=s.getCommonAncestor(),(s=s.getAscendant("td",!0)||s.getAscendant("th",!0))&&n.push(s);else{var s=new CKEDITOR.dom.walker(s),o;for(s.guard=t;o=s.next();)(o.type!=CKEDITOR.NODE_ELEMENT||!o.is(CKEDITOR.dtd.table))&&(o=o.getAscendant("td",!0)||o.getAscendant("th",!0))&&!o.getCustomData("selected_cell")&&(CKEDITOR.dom.element.setMarker(r,o,"selected_cell",!0),n.push(o))}}return CKEDITOR.dom.element.clearAllMarkers(r),n}function t(t,n){for(var r=e(t),i=r[0],s=i.getAscendant("table"),i=i.getDocument(),o=r[0].getParent(),u=o.$.rowIndex,r=r[r.length-1],a=r.getParent().$.rowIndex+r.$.rowSpan-1,r=new CKEDITOR.dom.element(s.$.rows[a]),u=n?u:a,o=n?o:r,r=CKEDITOR.tools.buildTableMap(s),s=r[u],u=n?r[u-1]:r[u+1],r=r[0].length,i=i.createElement("tr"),a=0;s[a]&&a<r;a++){var f;1<s[a].rowSpan&&u&&s[a]==u[a]?(f=s[a],f.rowSpan+=1):(f=(new CKEDITOR.dom.element(s[a])).clone(),f.removeAttribute("rowSpan"),f.appendBogus(),i.append(f),f=f.$),a+=f.colSpan-1}n?i.insertBefore(o):i.insertAfter(o)}function n(t){if(t instanceof CKEDITOR.dom.selection){for(var r=e(t),i=r[0].getAscendant("table"),s=CKEDITOR.tools.buildTableMap(i),t=r[0].getParent().$.rowIndex,r=r[r.length-1],o=r.getParent().$.rowIndex+r.$.rowSpan-1,r=[],u=t;u<=o;u++){for(var a=s[u],f=new CKEDITOR.dom.element(i.$.rows[u]),l=0;l<a.length;l++){var c=new CKEDITOR.dom.element(a[l]),h=c.getParent().$.rowIndex;1==c.$.rowSpan?c.remove():(c.$.rowSpan-=1,h==u&&(h=s[u+1],h[l-1]?c.insertAfter(new CKEDITOR.dom.element(h[l-1])):(new CKEDITOR.dom.element(i.$.rows[u+1])).append(c,1))),l+=c.$.colSpan-1}r.push(f)}s=i.$.rows,i=new CKEDITOR.dom.element(s[o+1]||(0<t?s[t-1]:null)||i.$.parentNode);for(u=r.length;0<=u;u--)n(r[u]);return i}return t instanceof CKEDITOR.dom.element&&(i=t.getAscendant("table"),1==i.$.rows.length?i.remove():t.remove()),null}function r(e,t){for(var n=t?Infinity:0,r=0;r<e.length;r++){var i;i=e[r];for(var s=t,o=i.getParent().$.cells,u=0,a=0;a<o.length;a++){var f=o[a],u=u+(s?1:f.colSpan);if(f==i.$)break}i=u-1;if(t?i<n:i>n)n=i}return n}function i(t,n){for(var i=e(t),s=i[0].getAscendant("table"),o=r(i,1),i=r(i),o=n?o:i,u=CKEDITOR.tools.buildTableMap(s),s=[],i=[],a=u.length,f=0;f<a;f++)s.push(u[f][o]),i.push(n?u[f][o-1]:u[f][o+1]);for(f=0;f<a;f++)s[f]&&(1<s[f].colSpan&&i[f]==s[f]?(o=s[f],o.colSpan+=1):(o=(new CKEDITOR.dom.element(s[f])).clone(),o.removeAttribute("colSpan"),o.appendBogus(),o[n?"insertBefore":"insertAfter"].call(o,new CKEDITOR.dom.element(s[f])),o=o.$),f+=o.rowSpan-1)}function s(e,t){var n=e.getStartElement();if(n=n.getAscendant("td",1)||n.getAscendant("th",1)){var r=n.clone();r.appendBogus(),t?r.insertBefore(n):r.insertAfter(n)}}function o(t){if(t instanceof CKEDITOR.dom.selection){var t=e(t),n=t[0]&&t[0].getAscendant("table"),r;e:{var i=0;r=t.length-1;for(var s={},a,f;a=t[i++];)CKEDITOR.dom.element.setMarker(s,a,"delete_cell",!0);for(i=0;a=t[i++];)if((f=a.getPrevious())&&!f.getCustomData("delete_cell")||(f=a.getNext())&&!f.getCustomData("delete_cell")){CKEDITOR.dom.element.clearAllMarkers(s),r=f;break e}CKEDITOR.dom.element.clearAllMarkers(s),f=t[0].getParent(),(f=f.getPrevious())?r=f.getLast():(f=t[r].getParent(),r=(f=f.getNext())?f.getChild(0):null)}for(f=t.length-1;0<=f;f--)o(t[f]);r?u(r,!0):n&&n.remove()}else t instanceof CKEDITOR.dom.element&&(n=t.getParent(),1==n.getChildCount()?n.remove():t.remove())}function u(e,t){var n=e.getDocument(),r=CKEDITOR.document;CKEDITOR.env.ie&&10==CKEDITOR.env.version&&(r.focus(),n.focus()),n=new CKEDITOR.dom.range(n),n["moveToElementEdit"+(t?"End":"Start")](e)||(n.selectNodeContents(e),n.collapse(t?!1:!0)),n.select(!0)}function a(e,t,n){e=e[t];if("undefined"==typeof n)return e;for(t=0;e&&t<e.length;t++){if(n.is&&e[t]==n.$)return t;if(t==n)return new CKEDITOR.dom.element(e[t])}return n.is?-1:null}function f(t,n,r){var i=e(t),s;if((n?1!=i.length:2>i.length)||(s=t.getCommonAncestor())&&s.type==CKEDITOR.NODE_ELEMENT&&s.is("table"))return!1;var o,t=i[0];s=t.getAscendant("table");var u=CKEDITOR.tools.buildTableMap(s),f=u.length,l=u[0].length,c=t.getParent().$.rowIndex,h=a(u,c,t);if(n){var d;try{var m=parseInt(t.getAttribute("rowspan"),10)||1;o=parseInt(t.getAttribute("colspan"),10)||1,d=u["up"==n?c-m:"down"==n?c+m:c]["left"==n?h-o:"right"==n?h+o:h]}catch(g){return!1}if(!d||t.$==d)return!1;i["up"==n||"left"==n?"unshift":"push"](new CKEDITOR.dom.element(d))}for(var n=t.getDocument(),y=c,m=d=0,b=!r&&new CKEDITOR.dom.documentFragment(n),w=0,n=0;n<i.length;n++){o=i[n];var E=o.getParent(),S=o.getFirst(),x=o.$.colSpan,T=o.$.rowSpan,E=E.$.rowIndex,N=a(u,E,o),w=w+x*T,m=Math.max(m,N-h+x);d=Math.max(d,E-c+T),r||(x=o,(T=x.getBogus())&&T.remove(),x.trim(),o.getChildren().count()&&(E!=y&&S&&(!S.isBlockBoundary||!S.isBlockBoundary({br:1}))&&(y=b.getLast(CKEDITOR.dom.walker.whitespaces(!0)))&&(!y.is||!y.is("br"))&&b.append("br"),o.moveChildren(b)),n?o.remove():o.setHtml("")),y=E}if(r)return d*m==w;b.moveChildren(t),t.appendBogus(),m>=l?t.removeAttribute("rowSpan"):t.$.rowSpan=d,d>=f?t.removeAttribute("colSpan"):t.$.colSpan=m,r=new CKEDITOR.dom.nodeList(s.$.rows),i=r.count();for(n=i-1;0<=n;n--)s=r.getItem(n),s.$.cells.length||(s.remove(),i++);return t}function l(t,n){var r=e(t);if(1<r.length)return!1;if(n)return!0;var r=r[0],i=r.getParent(),s=i.getAscendant("table"),o=CKEDITOR.tools.buildTableMap(s),u=i.$.rowIndex,f=a(o,u,r),l=r.$.rowSpan,c;if(1<l){c=Math.ceil(l/2);for(var l=Math.floor(l/2),i=u+c,s=new CKEDITOR.dom.element(s.$.rows[i]),o=a(o,i),h,i=r.clone(),u=0;u<o.length;u++){if(h=o[u],h.parentNode==s.$&&u>f){i.insertBefore(new CKEDITOR.dom.element(h));break}h=null}h||s.append(i)}else{l=c=1,s=i.clone(),s.insertAfter(i),s.append(i=r.clone()),h=a(o,u);for(f=0;f<h.length;f++)h[f].rowSpan++}return i.appendBogus(),r.$.rowSpan=c,i.$.rowSpan=l,1==c&&r.removeAttribute("rowSpan"),1==l&&i.removeAttribute("rowSpan"),i}function c(t,n){var r=e(t);if(1<r.length)return!1;if(n)return!0;var r=r[0],i=r.getParent(),s=i.getAscendant("table"),s=CKEDITOR.tools.buildTableMap(s),o=a(s,i.$.rowIndex,r),u=r.$.colSpan;if(1<u)i=Math.ceil(u/2),u=Math.floor(u/2);else{for(var u=i=1,f=[],l=0;l<s.length;l++){var c=s[l];f.push(c[o]),1<c[o].rowSpan&&(l+=c[o].rowSpan-1)}for(s=0;s<f.length;s++)f[s].colSpan++}return s=r.clone(),s.insertAfter(r),s.appendBogus(),r.$.colSpan=i,s.$.colSpan=u,1==i&&r.removeAttribute("colSpan"),1==u&&s.removeAttribute("colSpan"),s}var h=/^(?:td|th)$/;CKEDITOR.plugins.tabletools={requires:"table,dialog,contextmenu",init:function(r){function a(e){return CKEDITOR.tools.extend(e||{},{contextSensitive:1,refresh:function(e,t){this.setState(t.contains({td:1,th:1},1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}function h(e,t){var n=r.addCommand(e,t);r.addFeature(n)}var d=r.lang.table;h("cellProperties",new CKEDITOR.dialogCommand("cellProperties",a({allowedContent:"td th{width,height,border-color,background-color,white-space,vertical-align,text-align}[colspan,rowspan]",requiredContent:"table"}))),CKEDITOR.dialog.add("cellProperties",this.path+"dialogs/tableCell.js"),h("rowDelete",a({requiredContent:"table",exec:function(e){e=e.getSelection(),u(n(e))}})),h("rowInsertBefore",a({requiredContent:"table",exec:function(e){e=e.getSelection(),t(e,!0)}})),h("rowInsertAfter",a({requiredContent:"table",exec:function(e){e=e.getSelection(),t(e)}})),h("columnDelete",a({requiredContent:"table",exec:function(t){for(var t=t.getSelection(),t=e(t),n=t[0],r=t[t.length-1],t=n.getAscendant("table"),i=CKEDITOR.tools.buildTableMap(t),s,o,a=[],f=0,l=i.length;f<l;f++)for(var c=0,h=i[f].length;c<h;c++)i[f][c]==n.$&&(s=c),i[f][c]==r.$&&(o=c);for(f=s;f<=o;f++)for(c=0;c<i.length;c++)r=i[c],n=new CKEDITOR.dom.element(t.$.rows[c]),r=new CKEDITOR.dom.element(r[f]),r.$&&(1==r.$.colSpan?r.remove():r.$.colSpan-=1,c+=r.$.rowSpan-1,n.$.cells.length||a.push(n));o=t.$.rows[0]&&t.$.rows[0].cells,s=new CKEDITOR.dom.element(o[s]||(s?o[s-1]:t.$.parentNode)),a.length==l&&t.remove(),s&&u(s,!0)}})),h("columnInsertBefore",a({requiredContent:"table",exec:function(e){e=e.getSelection(),i(e,!0)}})),h("columnInsertAfter",a({requiredContent:"table",exec:function(e){e=e.getSelection(),i(e)}})),h("cellDelete",a({requiredContent:"table",exec:function(e){e=e.getSelection(),o(e)}})),h("cellMerge",a({allowedContent:"td[colspan,rowspan]",requiredContent:"td[colspan,rowspan]",exec:function(e){u(f(e.getSelection()),!0)}})),h("cellMergeRight",a({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(e){u(f(e.getSelection(),"right"),!0)}})),h("cellMergeDown",a({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(e){u(f(e.getSelection(),"down"),!0)}})),h("cellVerticalSplit",a({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(e){u(c(e.getSelection()))}})),h("cellHorizontalSplit",a({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(e){u(l(e.getSelection()))}})),h("cellInsertBefore",a({requiredContent:"table",exec:function(e){e=e.getSelection(),s(e,!0)}})),h("cellInsertAfter",a({requiredContent:"table",exec:function(e){e=e.getSelection(),s(e)}})),r.addMenuItems&&r.addMenuItems({tablecell:{label:d.cell.menu,group:"tablecell",order:1,getItems:function(){var t=r.getSelection(),n=e(t);return{tablecell_insertBefore:CKEDITOR.TRISTATE_OFF,tablecell_insertAfter:CKEDITOR.TRISTATE_OFF,tablecell_delete:CKEDITOR.TRISTATE_OFF,tablecell_merge:f(t,null,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_right:f(t,"right",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_down:f(t,"down",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_vertical:c(t,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_horizontal:l(t,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_properties:0<n.length?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED}}},tablecell_insertBefore:{label:d.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:d.cell.insertAfter,group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:d.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:d.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:d.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:d.cell.mergeDown,group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:d.cell.splitHorizontal,group:"tablecell",command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:d.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:d.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:d.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:CKEDITOR.TRISTATE_OFF,tablerow_insertAfter:CKEDITOR.TRISTATE_OFF,tablerow_delete:CKEDITOR.TRISTATE_OFF}}},tablerow_insertBefore:{label:d.row.insertBefore,group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:d.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:d.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:d.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:CKEDITOR.TRISTATE_OFF,tablecolumn_insertAfter:CKEDITOR.TRISTATE_OFF,tablecolumn_delete:CKEDITOR.TRISTATE_OFF}}},tablecolumn_insertBefore:{label:d.column.insertBefore,group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:d.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:d.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}}),r.contextMenu&&r.contextMenu.addListener(function(e,t,n){return(e=n.contains({td:1,th:1},1))&&!e.isReadOnly()?{tablecell:CKEDITOR.TRISTATE_OFF,tablerow:CKEDITOR.TRISTATE_OFF,tablecolumn:CKEDITOR.TRISTATE_OFF}:null})},getSelectedCells:e},CKEDITOR.plugins.add("tabletools",CKEDITOR.plugins.tabletools)}(),CKEDITOR.tools.buildTableMap=function(e){for(var e=e.$.rows,t=-1,n=[],r=0;r<e.length;r++){t++,!n[t]&&(n[t]=[]);for(var i=-1,s=0;s<e[r].cells.length;s++){var o=e[r].cells[s];for(i++;n[t][i];)i++;for(var u=isNaN(o.colSpan)?1:o.colSpan,o=isNaN(o.rowSpan)?1:o.rowSpan,a=0;a<o;a++){n[t+a]||(n[t+a]=[]);for(var f=0;f<u;f++)n[t+a][i+f]=e[r].cells[s]}i+=u-1}}return n},function(){var e=[CKEDITOR.CTRL+90,CKEDITOR.CTRL+89,CKEDITOR.CTRL+CKEDITOR.SHIFT+90],t={8:1,46:1};CKEDITOR.plugins.add("undo",{init:function(t){function r(e){o.enabled&&!1!==e.data.command.canUndo&&o.save()}function i(){o.enabled=t.readOnly?!1:"wysiwyg"==t.mode,o.onChange()}var o=t.undoManager=new n(t),u=o.editingHandler=new s(o),a=t.addCommand("undo",{exec:function(){o.undo()&&(t.selectionChange(),this.fire("afterUndo"))},startDisabled:!0,canUndo:!1}),f=t.addCommand("redo",{exec:function(){o.redo()&&(t.selectionChange(),this.fire("afterRedo"))},startDisabled:!0,canUndo:!1});t.setKeystroke([[e[0],"undo"],[e[1],"redo"],[e[2],"redo"]]),o.onChange=function(){a.setState(o.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),f.setState(o.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)},t.on("beforeCommandExec",r),t.on("afterCommandExec",r),t.on("saveSnapshot",function(e){o.save(e.data&&e.data.contentOnly)}),t.on("contentDom",u.attachListeners,u),t.on("instanceReady",function(){t.fire("saveSnapshot")}),t.on("beforeModeUnload",function(){"wysiwyg"==t.mode&&o.save(!0)}),t.on("mode",i),t.on("readOnly",i),t.ui.addButton&&(t.ui.addButton("Undo",{label:t.lang.undo.undo,command:"undo",toolbar:"undo,10"}),t.ui.addButton("Redo",{label:t.lang.undo.redo,command:"redo",toolbar:"undo,20"})),t.resetUndo=function(){o.reset(),t.fire("saveSnapshot")},t.on("updateSnapshot",function(){o.currentImage&&o.update()}),t.on("lockSnapshot",function(e){e=e.data,o.lock(e&&e.dontUpdate,e&&e.forceUpdate)}),t.on("unlockSnapshot",o.unlock,o)}}),CKEDITOR.plugins.undo={};var n=CKEDITOR.plugins.undo.UndoManager=function(e){this.strokesRecorded=[0,0],this.locked=null,this.previousKeyGroup=-1,this.limit=e.config.undoStackSize||20,this.strokesLimit=25,this.editor=e,this.reset()};n.prototype={type:function(e,t){var r=n.getKeyGroup(e),i=this.strokesRecorded[r]+1,t=t||i>=this.strokesLimit;this.typing||(this.hasUndo=this.typing=!0,this.hasRedo=!1,this.onChange()),t?(i=0,this.editor.fire("saveSnapshot")):this.editor.fire("change"),this.strokesRecorded[r]=i,this.previousKeyGroup=r},keyGroupChanged:function(e){return n.getKeyGroup(e)!=this.previousKeyGroup},reset:function(){this.snapshots=[],this.index=-1,this.currentImage=null,this.hasRedo=this.hasUndo=!1,this.locked=null,this.resetType()},resetType:function(){this.strokesRecorded=[0,0],this.typing=!1,this.previousKeyGroup=-1},refreshState:function(){this.hasUndo=!!this.getNextImage(!0),this.hasRedo=!!this.getNextImage(!1),this.resetType(),this.onChange()},save:function(e,t,n){var i=this.editor;if(this.locked||"ready"!=i.status||"wysiwyg"!=i.mode)return!1;var s=i.editable();if(!s||"ready"!=s.status)return!1;s=this.snapshots,t||(t=new r(i));if(!1===t.contents)return!1;if(this.currentImage)if(t.equalsContent(this.currentImage)){if(e||t.equalsSelection(this.currentImage))return!1}else!1!==n&&i.fire("change");return s.splice(this.index+1,s.length-this.index-1),s.length==this.limit&&s.shift(),this.index=s.push(t)-1,this.currentImage=t,!1!==n&&this.refreshState(),!0},restoreImage:function(e){var t=this.editor,n;e.bookmarks&&(t.focus(),n=t.getSelection()),this.locked={level:999},this.editor.loadSnapshot(e.contents),e.bookmarks?n.selectBookmarks(e.bookmarks):CKEDITOR.env.ie&&(n=this.editor.document.getBody().$.createTextRange(),n.collapse(!0),n.select()),this.locked=null,this.index=e.index,this.currentImage=this.snapshots[this.index],this.update(),this.refreshState(),t.fire("change")},getNextImage:function(e){var t=this.snapshots,n=this.currentImage,r;if(n)if(e){for(r=this.index-1;0<=r;r--)if(e=t[r],!n.equalsContent(e))return e.index=r,e}else for(r=this.index+1;r<t.length;r++)if(e=t[r],!n.equalsContent(e))return e.index=r,e;return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(!0);var e=this.getNextImage(!0);if(e)return this
.restoreImage(e),!0}return!1},redo:function(){if(this.redoable()&&(this.save(!0),this.redoable())){var e=this.getNextImage(!1);if(e)return this.restoreImage(e),!0}return!1},update:function(e){if(!this.locked){e||(e=new r(this.editor));for(var t=this.index,n=this.snapshots;0<t&&this.currentImage.equalsContent(n[t-1]);)t-=1;n.splice(t,this.index-t+1,e),this.index=t,this.currentImage=e}},updateSelection:function(e){if(!this.snapshots.length)return!1;var t=this.snapshots,n=t[t.length-1];return n.equalsContent(e)&&!n.equalsSelection(e)?(this.currentImage=t[t.length-1]=e,!0):!1},lock:function(e,t){if(this.locked)this.locked.level++;else if(e)this.locked={level:1};else{var n=null;if(t)n=!0;else{var i=new r(this.editor,!0);this.currentImage&&this.currentImage.equalsContent(i)&&(n=i)}this.locked={update:n,level:1}}},unlock:function(){if(this.locked&&!--this.locked.level){var e=this.locked.update;this.locked=null;if(!0===e)this.update();else if(e){var t=new r(this.editor,!0);e.equalsContent(t)||this.update()}}}},n.navigationKeyCodes={37:1,38:1,39:1,40:1,36:1,35:1,33:1,34:1},n.keyGroups={PRINTABLE:0,FUNCTIONAL:1},n.isNavigationKey=function(e){return!!n.navigationKeyCodes[e]},n.getKeyGroup=function(e){var r=n.keyGroups;return t[e]?r.FUNCTIONAL:r.PRINTABLE},n.getOppositeKeyGroup=function(e){var t=n.keyGroups;return e==t.FUNCTIONAL?t.PRINTABLE:t.FUNCTIONAL},n.ieFunctionalKeysBug=function(e){return CKEDITOR.env.ie&&n.getKeyGroup(e)==n.keyGroups.FUNCTIONAL};var r=CKEDITOR.plugins.undo.Image=function(e,t){this.editor=e,e.fire("beforeUndoImage");var n=e.getSnapshot();CKEDITOR.env.ie&&n&&(n=n.replace(/\s+data-cke-expando=".*?"/g,"")),this.contents=n,t||(this.bookmarks=(n=n&&e.getSelection())&&n.createBookmarks2(!0)),e.fire("afterUndoImage")},i=/\b(?:href|src|name)="[^"]*?"/gi;r.prototype={equalsContent:function(e){var t=this.contents,e=e.contents;return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)&&(t=t.replace(i,""),e=e.replace(i,"")),t!=e?!1:!0},equalsSelection:function(e){var t=this.bookmarks,e=e.bookmarks;if(t||e){if(!t||!e||t.length!=e.length)return!1;for(var n=0;n<t.length;n++){var r=t[n],i=e[n];if(r.startOffset!=i.startOffset||r.endOffset!=i.endOffset||!CKEDITOR.tools.arrayCompare(r.start,i.start)||!CKEDITOR.tools.arrayCompare(r.end,i.end))return!1}}return!0}};var s=CKEDITOR.plugins.undo.NativeEditingHandler=function(e){this.undoManager=e,this.ignoreInputEvent=!1,this.keyEventsStack=new o,this.lastKeydownImage=null};s.prototype={onKeydown:function(t){var i=t.data.getKey();if(229!==i)if(-1<CKEDITOR.tools.indexOf(e,t.data.getKeystroke()))t.data.preventDefault();else if(this.keyEventsStack.cleanUp(t),t=this.undoManager,this.keyEventsStack.getLast(i)||this.keyEventsStack.push(i),this.lastKeydownImage=new r(t.editor),n.isNavigationKey(i)||this.undoManager.keyGroupChanged(i))if(t.strokesRecorded[0]||t.strokesRecorded[1])t.save(!1,this.lastKeydownImage,!1),t.resetType()},onInput:function(){if(this.ignoreInputEvent)this.ignoreInputEvent=!1;else{var e=this.keyEventsStack.getLast();e||(e=this.keyEventsStack.push(0)),this.keyEventsStack.increment(e.keyCode),this.keyEventsStack.getTotalInputs()>=this.undoManager.strokesLimit&&(this.undoManager.type(e.keyCode,!0),this.keyEventsStack.resetInputs())}},onKeyup:function(e){var t=this.undoManager,e=e.data.getKey(),i=this.keyEventsStack.getTotalInputs();this.keyEventsStack.remove(e);if(!n.ieFunctionalKeysBug(e)||!this.lastKeydownImage||!this.lastKeydownImage.equalsContent(new r(t.editor,!0)))0<i?t.type(e):n.isNavigationKey(e)&&this.onNavigationKey(!0)},onNavigationKey:function(e){var t=this.undoManager;(e||!t.save(!0,null,!1))&&t.updateSelection(new r(t.editor)),t.resetType()},ignoreInputEventListener:function(){this.ignoreInputEvent=!0},attachListeners:function(){var e=this.undoManager.editor,t=e.editable(),r=this;t.attachListener(t,"keydown",function(e){r.onKeydown(e),n.ieFunctionalKeysBug(e.data.getKey())&&r.onInput()},null,null,999),t.attachListener(t,CKEDITOR.env.ie?"keypress":"input",r.onInput,r,null,999),t.attachListener(t,"keyup",r.onKeyup,r,null,999),t.attachListener(t,"paste",r.ignoreInputEventListener,r,null,999),t.attachListener(t,"drop",r.ignoreInputEventListener,r,null,999),t.attachListener(t.isInline()?t:e.document.getDocumentElement(),"click",function(){r.onNavigationKey()},null,null,999),t.attachListener(this.undoManager.editor,"blur",function(){r.keyEventsStack.remove(9)},null,null,999)}};var o=CKEDITOR.plugins.undo.KeyEventsStack=function(){this.stack=[]};o.prototype={push:function(e){return this.stack[this.stack.push({keyCode:e,inputs:0})-1]},getLastIndex:function(e){if("number"!=typeof e)return this.stack.length-1;for(var t=this.stack.length;t--;)if(this.stack[t].keyCode==e)return t;return-1},getLast:function(e){return e=this.getLastIndex(e),-1!=e?this.stack[e]:null},increment:function(e){this.getLast(e).inputs++},remove:function(e){e=this.getLastIndex(e),-1!=e&&this.stack.splice(e,1)},resetInputs:function(e){if("number"==typeof e)this.getLast(e).inputs=0;else for(e=this.stack.length;e--;)this.stack[e].inputs=0},getTotalInputs:function(){for(var e=this.stack.length,t=0;e--;)t+=this.stack[e].inputs;return t},cleanUp:function(e){e=e.data.$,!e.ctrlKey&&!e.metaKey&&this.remove(17),e.shiftKey||this.remove(16),e.altKey||this.remove(18)}}}(),CKEDITOR.plugins.add("wsc",{requires:"dialog",parseApi:function(e){e.config.wsc_onFinish="function"==typeof e.config.wsc_onFinish?e.config.wsc_onFinish:function(){},e.config.wsc_onClose="function"==typeof e.config.wsc_onClose?e.config.wsc_onClose:function(){}},parseConfig:function(e){e.config.wsc_customerId=e.config.wsc_customerId||CKEDITOR.config.wsc_customerId||"1:ua3xw1-2XyGJ3-GWruD3-6OFNT1-oXcuB1-nR6Bp4-hgQHc-EcYng3-sdRXG3-NOfFk",e.config.wsc_customDictionaryIds=e.config.wsc_customDictionaryIds||CKEDITOR.config.wsc_customDictionaryIds||"",e.config.wsc_userDictionaryName=e.config.wsc_userDictionaryName||CKEDITOR.config.wsc_userDictionaryName||"",e.config.wsc_customLoaderScript=e.config.wsc_customLoaderScript||CKEDITOR.config.wsc_customLoaderScript,CKEDITOR.config.wsc_cmd=e.config.wsc_cmd||CKEDITOR.config.wsc_cmd||"spell",CKEDITOR.config.wsc_version="v4.3.0-master-d769233",CKEDITOR.config.wsc_removeGlobalVariable=!0},init:function(e){var t=CKEDITOR.env;this.parseConfig(e),this.parseApi(e),e.addCommand("checkspell",new CKEDITOR.dialogCommand("checkspell")).modes={wysiwyg:!CKEDITOR.env.opera&&!CKEDITOR.env.air&&document.domain==window.location.hostname&&(!t.ie||!(8>t.version||t.quirks))},"undefined"==typeof e.plugins.scayt&&e.ui.addButton&&e.ui.addButton("SpellChecker",{label:e.lang.wsc.toolbar,click:function(e){var t=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.container.getText():e.document.getBody().getText();(t=t.replace(/\s/g,""))?e.execCommand("checkspell"):alert("Nothing to check!")},toolbar:"spellchecker,10"}),CKEDITOR.dialog.add("checkspell",this.path+(CKEDITOR.env.ie&&7>=CKEDITOR.env.version?"dialogs/wsc_ie.js":window.postMessage?"dialogs/wsc.js":"dialogs/wsc_ie.js"))}}),CKEDITOR.config.plugins="dialogui,dialog,about,a11yhelp,dialogadvtab,basicstyles,bidi,blockquote,clipboard,button,panelbutton,panel,floatpanel,colorbutton,colordialog,templates,menu,contextmenu,div,resize,toolbar,elementspath,enterkey,entities,popup,filebrowser,find,fakeobjects,flash,floatingspace,listblock,richcombo,font,forms,format,horizontalrule,htmlwriter,iframe,wysiwygarea,image,indent,indentblock,indentlist,smiley,justify,menubutton,language,link,list,liststyle,magicline,maximize,newpage,pagebreak,pastetext,pastefromword,preview,print,removeformat,save,selectall,showblocks,showborders,sourcearea,specialchar,scayt,stylescombo,tab,table,tabletools,undo,wsc",CKEDITOR.config.skin="moono",function(){var e=function(e,t){var n=CKEDITOR.getUrl("plugins/"+t);e=e.split(",");for(var r=0;r<e.length;r++)CKEDITOR.skin.icons[e[r]]={path:n,offset:-e[++r],bgsize:e[++r]}};CKEDITOR.env.hidpi?e("about,0,,bold,24,,italic,48,,strike,72,,subscript,96,,superscript,120,,underline,144,,bidiltr,168,,bidirtl,192,,blockquote,216,,copy-rtl,240,,copy,264,,cut-rtl,288,,cut,312,,paste-rtl,336,,paste,360,,bgcolor,384,,textcolor,408,,templates-rtl,432,,templates,456,,creatediv,480,,find-rtl,504,,find,528,,replace,552,,flash,576,,button,600,,checkbox,624,,form,648,,hiddenfield,672,,imagebutton,696,,radio,720,,select-rtl,744,,select,768,,textarea-rtl,792,,textarea,816,,textfield-rtl,840,,textfield,864,,horizontalrule,888,,iframe,912,,image,936,,indent-rtl,960,,indent,984,,outdent-rtl,1008,,outdent,1032,,smiley,1056,,justifyblock,1080,,justifycenter,1104,,justifyleft,1128,,justifyright,1152,,language,1176,,anchor-rtl,1200,,anchor,1224,,link,1248,,unlink,1272,,bulletedlist-rtl,1296,,bulletedlist,1320,,numberedlist-rtl,1344,,numberedlist,1368,,maximize,1392,,newpage-rtl,1416,,newpage,1440,,pagebreak-rtl,1464,,pagebreak,1488,,pastetext-rtl,1512,,pastetext,1536,,pastefromword-rtl,1560,,pastefromword,1584,,preview-rtl,1608,,preview,1632,,print,1656,,removeformat,1680,,save,1704,,selectall,1728,,showblocks-rtl,1752,,showblocks,1776,,source-rtl,1800,,source,1824,,specialchar,1848,,scayt,1872,,table,1896,,redo-rtl,1920,,redo,1944,,undo-rtl,1968,,undo,1992,,spellchecker,2016,","icons_hidpi.png"):e("about,0,auto,bold,24,auto,italic,48,auto,strike,72,auto,subscript,96,auto,superscript,120,auto,underline,144,auto,bidiltr,168,auto,bidirtl,192,auto,blockquote,216,auto,copy-rtl,240,auto,copy,264,auto,cut-rtl,288,auto,cut,312,auto,paste-rtl,336,auto,paste,360,auto,bgcolor,384,auto,textcolor,408,auto,templates-rtl,432,auto,templates,456,auto,creatediv,480,auto,find-rtl,504,auto,find,528,auto,replace,552,auto,flash,576,auto,button,600,auto,checkbox,624,auto,form,648,auto,hiddenfield,672,auto,imagebutton,696,auto,radio,720,auto,select-rtl,744,auto,select,768,auto,textarea-rtl,792,auto,textarea,816,auto,textfield-rtl,840,auto,textfield,864,auto,horizontalrule,888,auto,iframe,912,auto,image,936,auto,indent-rtl,960,auto,indent,984,auto,outdent-rtl,1008,auto,outdent,1032,auto,smiley,1056,auto,justifyblock,1080,auto,justifycenter,1104,auto,justifyleft,1128,auto,justifyright,1152,auto,language,1176,auto,anchor-rtl,1200,auto,anchor,1224,auto,link,1248,auto,unlink,1272,auto,bulletedlist-rtl,1296,auto,bulletedlist,1320,auto,numberedlist-rtl,1344,auto,numberedlist,1368,auto,maximize,1392,auto,newpage-rtl,1416,auto,newpage,1440,auto,pagebreak-rtl,1464,auto,pagebreak,1488,auto,pastetext-rtl,1512,auto,pastetext,1536,auto,pastefromword-rtl,1560,auto,pastefromword,1584,auto,preview-rtl,1608,auto,preview,1632,auto,print,1656,auto,removeformat,1680,auto,save,1704,auto,selectall,1728,auto,showblocks-rtl,1752,auto,showblocks,1776,auto,source-rtl,1800,auto,source,1824,auto,specialchar,1848,auto,scayt,1872,auto,table,1896,auto,redo-rtl,1920,auto,redo,1944,auto,undo-rtl,1968,auto,undo,1992,auto,spellchecker,2016,auto","icons.png")}(),CKEDITOR.lang.languages={af:1,sq:1,ar:1,eu:1,bn:1,bs:1,bg:1,ca:1,"zh-cn":1,zh:1,hr:1,cs:1,da:1,nl:1,en:1,"en-au":1,"en-ca":1,"en-gb":1,eo:1,et:1,fo:1,fi:1,fr:1,"fr-ca":1,gl:1,ka:1,de:1,el:1,gu:1,he:1,hi:1,hu:1,is:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lv:1,lt:1,mk:1,ms:1,mn:1,no:1,nb:1,fa:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,sr:1,"sr-latn":1,si:1,sk:1,sl:1,es:1,sv:1,tt:1,th:1,tr:1,ug:1,uk:1,vi:1,cy:1}})(),function(){CKEDITOR.config.jqueryOverrideVal=typeof CKEDITOR.config.jqueryOverrideVal=="undefined"?!0:CKEDITOR.config.jqueryOverrideVal;var e=window.jQuery;if(typeof e=="undefined")return;e.extend(e.fn,{ckeditorGet:function(){var e=this.eq(0).data("ckeditorInstance");if(!e)throw"CKEditor not yet initialized, use ckeditor() with callback.";return e},ckeditor:function(t,n){if(!CKEDITOR.env.isCompatible)return this;if(!e.isFunction(t)){var r=n;n=t,t=r}return n=n||{},this.filter("textarea, div, p").each(function(){var r=e(this),i=r.data("ckeditorInstance"),s=r.data("_ckeditorInstanceLock"),o=this;if(i&&!s)t&&t.apply(i,[this]);else if(!s){if(n.autoUpdateElement||typeof n.autoUpdateElement=="undefined"&&CKEDITOR.config.autoUpdateElement)n.autoUpdateElementJquery=!0;n.autoUpdateElement=!1,r.data("_ckeditorInstanceLock",!0),i=CKEDITOR.replace(o,n),r.data("ckeditorInstance",i),i.on("instanceReady",function(e){var n=e.editor;setTimeout(function(){if(!n.element){setTimeout(arguments.callee,100);return}e.removeListener("instanceReady",this.callee),n.on("dataReady",function(){r.trigger("setData.ckeditor",[n])}),n.on("getData",function(e){r.trigger("getData.ckeditor",[n,e.data])},999),n.on("destroy",function(){r.trigger("destroy.ckeditor",[n])});if(n.config.autoUpdateElementJquery&&r.is("textarea")&&r.parents("form").length){var i=function(){r.ckeditor(function(){n.updateElement()})};r.parents("form").submit(i),r.parents("form").bind("form-pre-serialize",i),r.bind("destroy.ckeditor",function(){r.parents("form").unbind("submit",i),r.parents("form").unbind("form-pre-serialize",i)})}n.on("destroy",function(){r.data("ckeditorInstance",null)}),r.data("_ckeditorInstanceLock",null),r.trigger("instanceReady.ckeditor",[n]),t&&t.apply(n,[o])},0)},null,null,9999)}else CKEDITOR.on("instanceReady",function(e){var n=e.editor;setTimeout(function(){if(!n.element){setTimeout(arguments.callee,100);return}n.element.$==o&&t&&t.apply(n,[o])},0)},null,null,9999)}),this}}),CKEDITOR.config.jqueryOverrideVal&&(e.fn.val=CKEDITOR.tools.override(e.fn.val,function(t){return function(n,r){var i=typeof n!="undefined",s;return this.each(function(){var o=e(this),u=o.data("ckeditorInstance");if(!r&&o.is("textarea")&&u){if(!i)return s=u.getData(),null;u.setData(n)}else{if(!i)return s=t.call(o),null;t.call(o,n)}return!0}),i?this:s}}))}(),CKEDITOR.lang["zh-cn"]={editor:"所见即所得编辑器",editorPanel:"所见即所得编辑器面板",common:{editorHelp:"按 ALT+0 获得帮助",browseServer:"浏览服务器",url:"URL",protocol:"协议",upload:"上传",uploadSubmit:"上传到服务器",image:"图像",flash:"Flash",form:"表单",checkbox:"复选框",radio:"单选按钮",textField:"单行文本",textarea:"多行文本",hiddenField:"隐藏域",button:"按钮",select:"列表/菜单",imageButton:"图像按钮",notSet:"<没有设置>",id:"ID",name:"名称",langDir:"语言方向",langDirLtr:"从左到右 (LTR)",langDirRtl:"从右到左 (RTL)",langCode:"语言代码",longDescr:"详细说明 URL",cssClass:"样式类名称",advisoryTitle:"标题",cssStyle:"行内样式",ok:"确定",cancel:"取消",close:"关闭",preview:"预览",resize:"拖拽以改变大小",generalTab:"常规",advancedTab:"高级",validateNumberFailed:"需要输入数字格式",confirmNewPage:"当前文档内容未保存，是否确认新建文档？",confirmCancel:"部分修改尚未保存，是否确认关闭对话框？",options:"选项",target:"目标窗口",targetNew:"新窗口 (_blank)",targetTop:"整页 (_top)",targetSelf:"本窗口 (_self)",targetParent:"父窗口 (_parent)",langDirLTR:"从左到右 (LTR)",langDirRTL:"从右到左 (RTL)",styles:"样式",cssClasses:"样式类",width:"宽度",height:"高度",align:"对齐方式",alignLeft:"左对齐",alignRight:"右对齐",alignCenter:"居中",alignJustify:"两端对齐",alignTop:"顶端",alignMiddle:"居中",alignBottom:"底部",alignNone:"无",invalidValue:"无效的值。",invalidHeight:"高度必须为数字格式",invalidWidth:"宽度必须为数字格式",invalidCssLength:"此“%1”字段的值必须为正数，可以包含或不包含一个有效的 CSS 长度单位(px, %, in, cm, mm, em, ex, pt 或 pc)",invalidHtmlLength:"此“%1”字段的值必须为正数，可以包含或不包含一个有效的 HTML 长度单位(px 或 %)",invalidInlineStyle:"内联样式必须为格式是以分号分隔的一个或多个“属性名 : 属性值”。",cssLengthTooltip:"输入一个表示像素值的数字，或加上一个有效的 CSS 长度单位(px, %, in, cm, mm, em, ex, pt 或 pc)。",unavailable:'%1<span class="cke_accessibility">，不可用</span>'},about:{copy:"版权所有 &copy; $1。<br />保留所有权利。",dlgTitle:"关于 CKEditor",help:"访问 $1 以获取帮助。",moreInfo:"相关授权许可信息请访问我们的网站：",title:"关于 CKEditor",userGuide:"CKEditor 用户向导"},basicstyles:{bold:"加粗",italic:"倾斜",strike:"删除线",subscript:"下标",superscript:"上标",underline:"下划线"},bidi:{ltr:"文字方向为从左至右",rtl:"文字方向为从右至左"},blockquote:{toolbar:"块引用"},clipboard:{copy:"复制",copyError:"您的浏览器安全设置不允许编辑器自动执行复制操作，请使用键盘快捷键(Ctrl/Cmd+C)来完成。",cut:"剪切",cutError:"您的浏览器安全设置不允许编辑器自动执行剪切操作，请使用键盘快捷键(Ctrl/Cmd+X)来完成。",paste:"粘贴",pasteArea:"粘贴区域",pasteMsg:"请使用键盘快捷键(<STRONG>Ctrl/Cmd+V</STRONG>)把内容粘贴到下面的方框里，再按 <STRONG>确定</STRONG>",securityMsg:"因为您的浏览器的安全设置原因，本编辑器不能直接访问您的剪贴板内容，你需要在本窗口重新粘贴一次。",title:"粘贴"},button:{selectedLabel:"已选中 %1 项"},colorbutton:{auto:"自动",bgColorTitle:"背景颜色",colors:{"000":"黑",8e5:"褐红","8B4513":"深褐","2F4F4F":"墨绿","008080":"绿松石","000080":"海军蓝","4B0082":"靛蓝",696969:"暗灰",B22222:"砖红",A52A2A:"褐",DAA520:"金黄","006400":"深绿","40E0D0":"蓝绿","0000CD":"中蓝",800080:"紫",808080:"灰",F00:"红",FF8C00:"深橙",FFD700:"金","008000":"绿","0FF":"青","00F":"蓝",EE82EE:"紫罗兰",A9A9A9:"深灰",FFA07A:"亮橙",FFA500:"橙",FFFF00:"黄","00FF00":"水绿",AFEEEE:"粉蓝",ADD8E6:"亮蓝",DDA0DD:"梅红",D3D3D3:"淡灰",FFF0F5:"淡紫红",FAEBD7:"古董白",FFFFE0:"淡黄",F0FFF0:"蜜白",F0FFFF:"天蓝",F0F8FF:"淡蓝",E6E6FA:"淡紫",FFF:"白"},more:"其它颜色...",panelTitle:"颜色",textColorTitle:"文本颜色"},colordialog:{clear:"清除",highlight:"高亮",options:"颜色选项",selected:"选择颜色",title:"选择颜色"},templates:{button:"模板",emptyListMsg:"(没有模板)",insertOption:"替换当前内容",options:"模板选项",selectPromptMsg:"请选择要在编辑器中使用的模板：",title:"内容模板"},contextmenu:{options:"快捷菜单选项"},div:{IdInputLabel:"ID",advisoryTitleInputLabel:"标题",cssClassInputLabel:"样式类名称",edit:"编辑 DIV",inlineStyleInputLabel:"行内样式",langDirLTRLabel:"从左到右 (LTR)",langDirLabel:"语言方向",langDirRTLLabel:"从右到左 (RTL)",languageCodeInputLabel:"语言代码",remove:"移除 DIV",styleSelectLabel:"样式",title:"创建 DIV 容器",toolbar:"创建 DIV 容器"},toolbar:{toolbarCollapse:"折叠工具栏",toolbarExpand:"展开工具栏",toolbarGroups:{document:"文档",clipboard:"剪贴板/撤销",editing:"编辑",forms:"表单",basicstyles:"基本格式",paragraph:"段落",links:"链接",insert:"插入",styles:"样式",colors:"颜色",tools:"工具"},toolbars:"工具栏"},elementspath:{eleLabel:"元素路径",eleTitle:"%1 元素"},find:{find:"查找",findOptions:"查找选项",findWhat:"查找:",matchCase:"区分大小写",matchCyclic:"循环匹配",matchWord:"全字匹配",notFoundMsg:"指定的文本没有找到。",replace:"替换",replaceAll:"全部替换",replaceSuccessMsg:"共完成 %1 处替换。",replaceWith:"替换:",title:"查找和替换"},fakeobjects:{anchor:"锚点",flash:"Flash 动画",hiddenfield:"隐藏域",iframe:"IFrame",unknown:"未知对象"},flash:{access:"允许脚本访问",accessAlways:"总是",accessNever:"从不",accessSameDomain:"同域",alignAbsBottom:"绝对底部",alignAbsMiddle:"绝对居中",alignBaseline:"基线",alignTextTop:"文本上方",bgcolor:"背景颜色",chkFull:"启用全屏",chkLoop:"循环",chkMenu:"启用 Flash 菜单",chkPlay:"自动播放",flashvars:"Flash 变量",hSpace:"水平间距",properties:"Flash 属性",propertiesTab:"属性",quality:"质量",qualityAutoHigh:"高(自动)",qualityAutoLow:"低(自动)",qualityBest:"最好",qualityHigh:"高",qualityLow:"低",qualityMedium:"中(自动)",scale:"缩放",scaleAll:"全部显示",scaleFit:"严格匹配",scaleNoBorder:"无边框",title:"标题",vSpace:"垂直间距",validateHSpace:"水平间距必须为数字格式",validateSrc:"请输入源文件地址",validateVSpace:"垂直间距必须为数字格式",windowMode:"窗体模式",windowModeOpaque:"不透明",windowModeTransparent:"透明",windowModeWindow:"窗体"},font:{fontSize:{label:"大小",voiceLabel:"文字大小",panelTitle:"大小"},label:"字体",panelTitle:"字体",voiceLabel:"字体"},forms:{button:{title:"按钮属性",text:"标签(值)",type:"类型",typeBtn:"按钮",typeSbm:"提交",typeRst:"重设"},checkboxAndRadio:{checkboxTitle:"复选框属性",radioTitle:"单选按钮属性",value:"选定值",selected:"已勾选",required:"必选"},form:{title:"表单属性",menu:"表单属性",action:"动作",method:"方法",encoding:"表单编码"},hidden:{title:"隐藏域属性",name:"名称",value:"初始值"},select:{title:"菜单/列表属性",selectInfo:"选择信息",opAvail:"可选项",value:"值",size:"高度",lines:"行",chkMulti:"允许多选",required:"必选",opText:"选项文本",opValue:"选项值",btnAdd:"添加",btnModify:"修改",btnUp:"上移",btnDown:"下移",btnSetValue:"设为初始选定",btnDelete:"删除"},textarea:{title:"多行文本属性",cols:"字符宽度",rows:"行数"},textfield:{title:"单行文本属性",name:"名称",value:"初始值",charWidth:"字符宽度",maxChars:"最多字符数",required:"必填",type:"类型",typeText:"文本",typePass:"密码",typeEmail:"Email",typeSearch:"搜索",typeTel:"电话号码",typeUrl:"地址"}},format:{label:"格式",panelTitle:"格式",tag_address:"地址",tag_div:"段落(DIV)",tag_h1:"标题 1",tag_h2:"标题 2",tag_h3:"标题 3",tag_h4:"标题 4",tag_h5:"标题 5",tag_h6:"标题 6",tag_p:"普通",tag_pre:"已编排格式"},horizontalrule:{toolbar:"插入水平线"},iframe:{border:"显示框架边框",noUrl:"请输入框架的 URL",scrolling:"允许滚动条",title:"IFrame 属性",toolbar:"IFrame"},image:{alt:"替换文本",border:"边框大小",btnUpload:"上传到服务器",button2Img:"确定要把当前图像按钮转换为普通图像吗？",hSpace:"水平间距",img2Button:"确定要把当前图像改变为图像按钮吗？",infoTab:"图像信息",linkTab:"链接",lockRatio:"锁定比例",menu:"图像属性",resetSize:"原始尺寸",title:"图像属性",titleButton:"图像域属性",upload:"上传",urlMissing:"缺少图像源文件地址",vSpace:"垂直间距",validateBorder:"边框大小必须为整数格式",validateHSpace:"水平间距必须为整数格式",validateVSpace:"垂直间距必须为整数格式"},indent:{indent:"增加缩进量",outdent:"减少缩进量"},smiley:{options:"表情图标选项",title:"插入表情图标",toolbar:"表情符"},justify:{block:"两端对齐",center:"居中",left:"左对齐",right:"右对齐"},language:{button:"设置语言",remove:"移除语言"},link:{acccessKey:"访问键",advanced:"高级",advisoryContentType:"内容类型",advisoryTitle:"标题",anchor:{toolbar:"插入/编辑锚点链接",menu:"锚点链接属性",title:"锚点链接属性",name:"锚点名称",errorName:"请输入锚点名称",remove:"删除锚点"},anchorId:"按锚点 ID",anchorName:"按锚点名称",charset:"字符编码",cssClasses:"样式类名称",emailAddress:"地址",emailBody:"内容",emailSubject:"主题",id:"ID",info:"超链接信息",langCode:"语言代码",langDir:"语言方向",langDirLTR:"从左到右 (LTR)",langDirRTL:"从右到左 (RTL)",menu:"编辑超链接",name:"名称",noAnchors:"(此文档没有可用的锚点)",noEmail:"请输入电子邮件地址",noUrl:"请输入超链接地址",other:"<其他>",popupDependent:"依附 (NS)",popupFeatures:"弹出窗口属性",popupFullScreen:"全屏 (IE)",popupLeft:"左",popupLocationBar:"地址栏",popupMenuBar:"菜单栏",popupResizable:"可缩放",popupScrollBars:"滚动条",popupStatusBar:"状态栏",popupToolbar:"工具栏",popupTop:"右",rel:"关联",selectAnchor:"选择一个锚点",styles:"行内样式",tabIndex:"Tab 键次序",target:"目标",targetFrame:"<框架>",targetFrameName:"目标框架名称",targetPopup:"<弹出窗口>",targetPopupName:"弹出窗口名称",title:"超链接",toAnchor:"页内锚点链接",toEmail:"电子邮件",toUrl:"地址",toolbar:"插入/编辑超链接",type:"超链接类型",unlink:"取消超链接",upload:"上传"},list:{bulletedlist:"项目列表",numberedlist:"编号列表"},liststyle:{armenian:"传统的亚美尼亚编号方式",bulletedTitle:"项目列表属性",circle:"空心圆",decimal:"数字 (1, 2, 3, 等)",decimalLeadingZero:"0开头的数字标记(01, 02, 03, 等)",disc:"实心圆",georgian:"传统的乔治亚编号方式(an, ban, gan, 等)",lowerAlpha:"小写英文字母(a, b, c, d, e, 等)",lowerGreek:"小写希腊字母(alpha, beta, gamma, 等)",lowerRoman:"小写罗马数字(i, ii, iii, iv, v, 等)",none:"无标记",notset:"<没有设置>",numberedTitle:"编号列表属性",square:"实心方块",start:"开始序号",type:"标记类型",upperAlpha:"大写英文字母(A, B, C, D, E, 等)",upperRoman:"大写罗马数字(I, II, III, IV, V, 等)",validateStartNumber:"列表开始序号必须为整数格式"},magicline:{title:"在这插入段落"},maximize:{maximize:"全屏",minimize:"最小化"},newpage:{toolbar:"新建"},pagebreak:{alt:"分页符",toolbar:"插入打印分页符"},pastetext:{button:"粘贴为无格式文本",title:"粘贴为无格式文本"},pastefromword:{confirmCleanup:"您要粘贴的内容好像是来自 MS Word，是否要清除 MS Word 格式后再粘贴？",error:"由于内部错误无法清理要粘贴的数据",title:"从 MS Word 粘贴",toolbar:"从 MS Word 粘贴"},preview:{preview:"预览"},print:{toolbar:"打印"},removeformat:{toolbar:"清除格式"},save:{toolbar:"保存"},selectall:{toolbar:"全选"},showblocks:{toolbar:"显示区块"},sourcearea:{toolbar:"源码"},specialchar:{options:"特殊符号选项",title:"选择特殊符号",toolbar:"插入特殊符号"},scayt:{btn_about:"关于即时拼写检查",btn_dictionaries:"字典",btn_disable:"禁用即时拼写检查",btn_enable:"启用即时拼写检查",btn_langs:"语言",btn_options:"选项",text_title:"即时拼写检查"},stylescombo:{label:"样式",panelTitle:"样式",panelTitle1:"块级元素样式",panelTitle2:"内联元素样式",panelTitle3:"对象元素样式"},table:{border:"边框",caption:"标题",cell:{menu:"单元格",insertBefore:"在左侧插入单元格",insertAfter:"在右侧插入单元格",deleteCell:"删除单元格",merge:"合并单元格",mergeRight:"向右合并单元格",mergeDown:"向下合并单元格",splitHorizontal:"水平拆分单元格",splitVertical:"垂直拆分单元格",title:"单元格属性",cellType:"单元格类型",rowSpan:"纵跨行数",colSpan:"横跨列数",wordWrap:"自动换行",hAlign:"水平对齐",vAlign:"垂直对齐",alignBaseline:"基线",bgColor:"背景颜色",borderColor:"边框颜色",data:"数据",header:"表头",yes:"是",no:"否",invalidWidth:"单元格宽度必须为数字格式",invalidHeight:"单元格高度必须为数字格式",invalidRowSpan:"行跨度必须为整数格式",invalidColSpan:"列跨度必须为整数格式",chooseColor:"选择"},cellPad:"边距",cellSpace:"间距",column:{menu:"列",insertBefore:"在左侧插入列",insertAfter:"在右侧插入列",deleteColumn:"删除列"},columns:"列数",deleteTable:"删除表格",headers:"标题单元格",headersBoth:"第一列和第一行",headersColumn:"第一列",headersNone:"无",headersRow:"第一行",invalidBorder:"边框粗细必须为数字格式",invalidCellPadding:"单元格填充必须为数字格式",invalidCellSpacing:"单元格间距必须为数字格式",invalidCols:"指定的行数必须大于零",invalidHeight:"表格高度必须为数字格式",invalidRows:"指定的列数必须大于零",invalidWidth:"表格宽度必须为数字格式",menu:"表格属性",row:{menu:"行",insertBefore:"在上方插入行",insertAfter:"在下方插入行",deleteRow:"删除行"},rows:"行数",summary:"摘要",title:"表格属性",toolbar:"表格",widthPc:"百分比",widthPx:"像素",widthUnit:"宽度单位"},undo:{redo:"重做",undo:"撤消"},wsc:{btnIgnore:"忽略",btnIgnoreAll:"全部忽略",btnReplace:"替换",btnReplaceAll:"全部替换",btnUndo:"撤消",changeTo:"更改为",errorLoading:"加载应该服务主机时出错: %s.",ieSpellDownload:"拼写检查插件还没安装, 您是否想现在就下载?",manyChanges:"拼写检查完成: 更改了 %1 个单词",noChanges:"拼写检查完成: 没有更改任何单词",noMispell:"拼写检查完成: 没有发现拼写错误",noSuggestions:"- 没有建议 -",notAvailable:"抱歉, 服务目前暂不可用",notInDic:"没有在字典里",oneChange:"拼写检查完成: 更改了一个单词",progress:"正在进行拼写检查...",title:"拼写检查",toolbar:"拼写检查"}},CKEDITOR.stylesSet.add("default",[{name:"Italic Title",element:"h2",styles:{"font-style":"italic"}},{name:"Subtitle",element:"h3",styles:{color:"#aaa","font-style":"italic"}},{name:"Special Container",element:"div",styles:{padding:"5px 10px",background:"#eee",border:"1px solid #ccc"}},{name:"Marker",element:"span",attributes:{"class":"marker"}},{name:"Big",element:"big"},{name:"Small",element:"small"},{name:"Typewriter",element:"tt"},{name:"Computer Code",element:"code"},{name:"Keyboard Phrase",element:"kbd"},{name:"Sample Text",element:"samp"},{name:"Variable",element:"var"},{name:"Deleted Text",element:"del"},{name:"Inserted Text",element:"ins"},{name:"Cited Work",element:"cite"},{name:"Inline Quotation",element:"q"},{name:"Language: RTL",element:"span",attributes:{dir:"rtl"}},{name:"Language: LTR",element:"span",attributes:{dir:"ltr"}},{name:"Styled image (left)",element:"img",attributes:{"class":"left"}},{name:"Styled image (right)",element:"img",attributes:{"class":"right"}},{name:"Compact table",element:"table",attributes:{cellpadding:"5",cellspacing:"0",border:"1",bordercolor:"#ccc"},styles:{"border-collapse":"collapse"}},{name:"Borderless Table",element:"table",styles:{"border-style":"hidden","background-color":"#E6E6FA"}},{name:"Square Bulleted List",element:"ul",styles:{"list-style-type":"square"}}]),function(){var e;CKEDITOR.plugins.add("gdlink",{requires:"dialog",lang:"en,zh-cn",icons:"link,unlink",hidpi:!0,init:function(e){var t,n;t="a[!href,title,target]",n="a[href]",e.addCommand("gdlink",new CKEDITOR.dialogCommand("gdlink",{allowedContent:t,requiredContent:n})),e.addCommand("gdunlink",{exec:function(e){var t;return t=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1}),e.removeStyle(t)},refresh:function(e,t){var n,r;return n=(r=t.lastElement)!=null?r.getAscendant("a",!0):void 0,(n!=null?n.getName():void 0)==="a"&&(n!=null?n.getAttribute("href"):void 0)&&(n!=null?n.getChildCount():void 0)?this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)},contextSensitive:1,startDisabled:1,requiredContent:"a[href]"}),e.setKeystroke(CKEDITOR.CTRL+76,"gdlink"),e.ui.addButton&&(e.ui.addButton("Link",{label:e.lang.gdlink.toolbar,command:"gdlink",toolbar:"links,10"}),e.ui.addButton("Unlink",{label:e.lang.gdlink.unlink,command:"gdunlink",toolbar:"links,20"})),CKEDITOR.dialog.add("gdlink",this.path+"dialogs/gdlink.js"),e.on("doubleclick",function(t){var n;n=CKEDITOR.plugins.gdlink.getSelectedLink(e)||t.data.element;if(!n.isReadOnly()&&n.is("a"))return t.data.dialog="gdlink",t.data.link=n},null,null,0),e.on("doubleclick",function(t){if(t.data.dialog==="gdlink"&&t.data.link)return e.getSelection().selectElement(t.data.link)},null,null,20),e.addMenuItems&&e.addMenuItems({link:{label:e.lang.gdlink.menu,command:"gdlink",group:"link",order:1},unlink:{label:e.lang.gdlink.unlink,command:"gdunlink",group:"link",order:5}});if(e.contextMenu)return e.contextMenu.addListener(function(e){if(!e||e.isReadOnly())return null})}}),e=/^(http|https|ftp|news):\/\/(.*)$/,CKEDITOR.plugins.gdlink={getSelectedLink:function(e){var t,n,r;r=e.getSelection(),n=r.getSelectedElement();if(n!=null?n.is("a"):void 0)return n;t=r.getRanges()[0];if(t)return t.shrink(CKEDITOR.SHRINK_TEXT),e.elementPath(t.getCommonAncestor()).contains("a",1)},parseLinkAttributes:function(t,n){var r,i;return r=(n!=null?n.data("cke-saved-href"):void 0)||(n!=null?n.getAttribute("href"):void 0)||"",i={},r&&(i.url=r,e.test(r)&&(i.target=(n!=null?n.getAttribute("target"):void 0)||"_blank"),i.text=n!=null?n.getText():void 0,i.title=(n!=null?n.getAttribute("title"):void 0)||""),i},getLinkAttributes:function(t,n){var r,i,s,o,u,a;u={},a=n.url&&CKEDITOR.tools.trim(n.url)||"",a.indexOf("/")!==0&&a.indexOf("#")!==0&&!e.test(a)&&(a="http://"+a),u["data-cke-saved-href"]=a,n.target&&(u.target=n.target),u["data-cke-saved-href"]&&(u.href=u["data-cke-saved-href"]),n.title&&(u.title=n.title),s={onclick:1,"data-cke-pa-onclick":1,"data-cke-saved-name":1};for(r=0,i=u.length;r<i;r++)o=u[r],delete s[o];return{text:n.text&&CKEDITOR.tools.trim(n.text)||u["data-cke-saved-href"],set:u,removed:CKEDITOR.tools.objectKeys(s)}}}}.call(this),CKEDITOR.plugins.setLang("gdlink","zh-cn",{menu:"编辑超链接",noUrl:"请输入超链接地址",text:"显示文字",title:"插入/编辑超链接",toolbar:"插入/编辑超链接",url:"链接地址",unlink:"取消超链接",target:"在新窗口打开",tip:"提示文字"}),function(){CKEDITOR.dialog.add("gdlink",function(e){var t,n,r,i,s,o,u;return r=CKEDITOR.plugins.gdlink,t=e.lang.common,n=e.lang.gdlink,u={type:"text",id:"url",label:n.url,validate:function(){var e,r;return e=this.getDialog(),/javascript\:/.test(this.getValue())?(alert(t.invalidValue),!1):(r=CKEDITOR.dialog.validate.notEmpty(n.noUrl),r.apply(this))},setup:function(e){return this.setValue(e.url)},commit:function(e){return e.url=this.getValue()}},s={type:"text",id:"text",label:n.text,setup:function(e){return this.setValue(e.text)},commit:function(e){return e.text=this.getValue()}},o={type:"text",id:"title",label:n.tip,setup:function(e){return this.setValue(e.title)},commit:function(e){return e.title=this.getValue()}},i={type:"checkbox",id:"target",label:n.target,setup:function(e){return e.target||(e.target="_blank"),this.setValue(e.target==="_blank")},commit:function(e){return e.target=this.getValue()?"_blank":"_self"}},{title:n.title,minWidth:400,minHeight:100,resizable:CKEDITOR.DIALOG_RESIZE_NONE,contents:[{id:"info",elements:[u,s,o,i]}],onShow:function(){var t,n,i;return e=this.getParentEditor(),i=e.getSelection(),n=r.getSelectedLink(e),n&&n.hasAttribute("href")?i.getSelectedElement()||i.selectElement(n):n=null,t=r.parseLinkAttributes(e,n),t.text||(t.text=i.getSelectedText()),this._.selectedElement=n,this._.isImage=t.text===null||t.text.replace("​","")==="",this.setupContent(t)},onOk:function(){var t,n,i,s,o,u,a,f;i={},this.commitContent(i),u=e.getSelection(),t=r.getLinkAttributes(e,i),n=e.getSelection().getType();if(!this._.selectedElement){o=u.getRanges()[0];if(n===CKEDITOR.SELECTION_TEXT||o.collapsed)o.deleteContents(),f=new CKEDITOR.dom.text(t.text,e.document),o.insertNode(f),o.selectNodeContents(f);return a=new CKEDITOR.style({element:"a",attributes:t.set}),a.type=CKEDITOR.STYLE_INLINE,a.applyToRange(o,e),o.select()}return s=this._.selectedElement,s.setAttributes(t.set),s.removeAttributes(t.removed),t.text&&!this._.isImage&&s.setText(t.text),delete this._.selectedElement}}})}.call(this),"use strict",function(){function i(t){function a(){if(this.deflated)return;t.widgets.focused==this.widget&&(this.focused=!0),t.widgets.destroy(this.widget),this.deflated=!0}function f(){var e=t.editable(),n=t.document;if(this.deflated){this.widget=t.widgets.initOn(this.element,"image",this.widget.data);if(this.widget.inline&&!(new CKEDITOR.dom.elementPath(this.widget.wrapper,e)).block){var i=n.createElement(t.activeEnterMode==CKEDITOR.ENTER_P?"p":"div");i.replace(this.widget.wrapper),this.widget.wrapper.move(i)}this.focused&&(this.widget.focus(),delete this.focused),delete this.deflated}else s(this.widget,r)}var r=t.config.gdimage_alignClasses,i=t.config.gdimage_captionedClass;return{allowedContent:v(t),requiredContent:"img[src,alt]",features:m(t),styleableElements:"img figure",contentTransformations:[["img[width]: sizeToAttribute"]],editables:{caption:{selector:"figcaption",allowedContent:"br em strong sub sup u s; a[!href]"}},parts:{image:"img",caption:"figcaption"},dialog:"gdimage",template:e,data:function(){var e=this.features;this.data.hasCaption&&!t.filter.checkFeature(e.caption)&&(this.data.hasCaption=!1),this.data.align!="none"&&!t.filter.checkFeature(e.align)&&(this.data.align="none"),this.shiftState({widget:this,element:this.element,oldData:this.oldData,newData:this.data,deflate:a,inflate:f}),this.data.link?this.parts.link||(this.parts.link=this.parts.image.getParent()):this.parts.link&&delete this.parts.link,this.parts.image.setAttributes({src:this.data.src,"data-cke-saved-src":this.data.src,alt:this.data.alt});if(this.oldData&&!this.oldData.hasCaption&&this.data.hasCaption)for(var n in this.data.classes)this.parts.image.removeClass(n);t.filter.checkFeature(e.dimension)&&l(this),this.oldData=CKEDITOR.tools.extend({},this.data)},init:function(){var e=CKEDITOR.plugins.gdimage,i=this.parts.image,s={hasCaption:!!this.parts.caption,src:i.getAttribute("src"),alt:i.getAttribute("alt")||"",width:i.getAttribute("width")||"",height:i.getAttribute("height")||"",lock:this.ready?e.checkHasNaturalRatio(i):!0},o=i.getAscendant("a");o&&this.wrapper.contains(o)&&(this.parts.link=o);if(!s.align){var u=s.hasCaption?this.element:i;r?(u.hasClass(r[0])?s.align="left":u.hasClass(r[2])&&(s.align="right"),s.align?u.removeClass(r[n[s.align]]):s.align="none"):(s.align=u.getStyle("float")||"none",u.removeStyle("float"))}if(t.plugins.link&&this.parts.link
){s.link=CKEDITOR.plugins.link.parseLinkAttributes(t,this.parts.link);var a=s.link.advanced;a&&a.advCSSClasses&&(a.advCSSClasses=CKEDITOR.tools.trim(a.advCSSClasses.replace(/cke_\S+/,"")))}this.wrapper[(s.hasCaption?"remove":"add")+"Class"]("cke_image_nocaption"),this.setData(s),t.filter.checkFeature(this.features.dimension)&&t.config.gdimage_disableResizer!==!0&&c(this),this.shiftState=e.stateShifter(this.editor),this.on("contextMenu",function(e){e.data.image=CKEDITOR.TRISTATE_OFF;if(this.parts.link||this.wrapper.getAscendant("a"))e.data.link=e.data.unlink=CKEDITOR.TRISTATE_OFF}),this.on("dialog",function(e){e.data.widget=this},this)},addClass:function(e){g(this).addClass(e)},hasClass:function(e){return g(this).hasClass(e)},removeClass:function(e){g(this).removeClass(e)},getClasses:function(){var e=new RegExp("^("+[].concat(i,r).join("|")+")$");return function(){var t=this.repository.parseElementClasses(g(this).getAttribute("class"));for(var n in t)e.test(n)&&delete t[n];return t}}(),upcast:o(t),downcast:u(t)}}function s(e,t){var r=e.wrapper,i=e.data.align,s=e.data.hasCaption;if(t){for(var o=3;o--;)r.removeClass(t[o]);i=="center"?s&&r.addClass(t[1]):i!="none"&&r.addClass(t[n[i]])}else i=="center"?(s?r.setStyle("text-align","center"):r.removeStyle("text-align"),r.removeStyle("float")):(i=="none"?r.removeStyle("float"):r.setStyle("float",i),r.removeStyle("text-align"))}function o(e){var t=a(e),n=e.config.gdimage_captionedClass;return function(e,i){var s={width:1,height:1},o=e.name,u;if(e.attributes["data-cke-realelement"])return;if(t(e)){if(o=="div"){var a=e.getFirst("figure");a&&(e.replaceWith(a),e=a)}i.align="center",u=e.getFirst("img")||e.getFirst("a").getFirst("img")}else o=="figure"&&e.hasClass(n)?u=e.getFirst("img")||e.getFirst("a").getFirst("img"):f(e)&&(u=e.name=="a"?e.children[0]:e);if(!u)return;for(var l in s){var c=u.attributes[l];c&&c.match(r)&&delete u.attributes[l]}return e}}function u(e){var t=e.config.gdimage_alignClasses;return function(e){var r=e.name=="a"?e.getFirst():e,i=r.attributes,s=this.data.align;if(!this.inline){var o=e.getFirst("span");o&&o.replaceWith(o.getFirst({img:1,a:1}))}if(s&&s!="none"){var u=CKEDITOR.tools.parseCssText(i.style||"");s=="center"&&e.name=="figure"?e=e.wrapWith(new CKEDITOR.htmlParser.element("div",t?{"class":t[1]}:{style:"text-align:center"})):s in{left:1,right:1}&&(t?r.addClass(t[n[s]]):u["float"]=s),!t&&!CKEDITOR.tools.isEmpty(u)&&(i.style=CKEDITOR.tools.writeCssText(u))}return e}}function a(e){var t=e.config.gdimage_captionedClass,n=e.config.gdimage_alignClasses,r={figure:1,a:1,img:1};return function(i){if(i.name in{div:1,p:1}){var s=i.children;if(s.length!==1)return!1;var o=s[0];if(o.name in r){if(i.name=="p"){if(!f(o))return!1}else if(o.name=="figure"){if(!o.hasClass(t))return!1}else{if(e.enterMode==CKEDITOR.ENTER_P)return!1;if(!f(o))return!1}return(n?i.hasClass(n[1]):CKEDITOR.tools.parseCssText(i.attributes.style||"",true)["text-align"]=="center")?!0:!1}return!1}return!1}}function f(e){return e.name=="img"?!0:e.name=="a"?e.children.length==1&&e.getFirst("img"):!1}function l(e){var t=e.data,n={width:t.width,height:t.height},r=e.parts.image;for(var i in n)n[i]?r.setAttribute(i,n[i]):r.removeAttribute(i)}function c(e){var t=e.editor,n=t.editable(),r=t.document,i=e.resizer=r.createElement("span");i.addClass("cke_image_resizer"),i.setAttribute("title",t.lang.gdimage.resizer),i.append(new CKEDITOR.dom.text("​",r));if(!e.inline){var s=e.parts.link||e.parts.image,o=s.getParent(),u=r.createElement("span");u.addClass("cke_image_resizer_wrapper"),u.append(s),u.append(i),e.element.append(u,!0),o.is("span")&&o.remove()}else e.wrapper.append(i);i.on("mousedown",function(s){function S(e,t,n){var i=CKEDITOR.document,s=[];r.equals(i)||s.push(i.on(e,t)),s.push(r.on(e,t));if(n)for(var o=s.length;o--;)n.push(s.pop())}function x(){m=l+u*b,g=Math.round(m/h)}function T(){g=c-w,m=Math.round(g*h)}function N(e){v=e.data.$,b=v.screenX-a,w=f-v.screenY,E=Math.abs(b/w),u==1?b<=0?w<=0?x():E>=h?x():T():w<=0?E>=h?T():x():T():b<=0?w<=0?E>=h?T():x():T():w<=0?x():E>=h?x():T(),m>=15&&g>=15?(o.setAttributes({width:m,height:g}),y=!0):y=!1}function C(){var r;while(r=p.pop())r.removeListener();n.removeClass(d),i.removeClass("cke_image_resizing"),y&&(e.setData({width:m,height:g}),t.fire("saveSnapshot")),y=!1}var o=e.parts.image,u=e.data.align=="right"?-1:1,a=s.data.$.screenX,f=s.data.$.screenY,l=o.$.clientWidth,c=o.$.clientHeight,h=l/c,p=[],d="cke_image_s"+(~u?"e":"w"),v,m,g,y,b,w,E;t.fire("saveSnapshot"),S("mousemove",N,p),S("mouseup",C,p),n.addClass(d),i.addClass("cke_image_resizing")}),e.on("data",function(){i[e.data.align=="right"?"addClass":"removeClass"]("cke_image_resizer_left")})}function h(e){var t=[],n;return function(r){var i=e.getCommand("justify"+r);if(!i)return;t.push(function(){i.refresh(e,e.elementPath())}),r in{right:1,left:1,center:1}&&i.on("exec",function(n){var i=d(e);if(i){i.setData("align",r);for(var s=t.length;s--;)t[s]();n.cancel()}}),i.on("refresh",function(t){var i=d(e),s={right:1,left:1,center:1};if(!i)return;n===undefined&&(n=e.filter.checkFeature(e.widgets.registered.image.features.align)),n?this.setState(i.data.align==r?CKEDITOR.TRISTATE_ON:r in s?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED):this.setState(CKEDITOR.TRISTATE_DISABLED),t.cancel()})}}function p(e){if(!e.plugins.link)return;CKEDITOR.on("dialogDefinition",function(t){var n=t.data;if(n.name=="link"){var r=n.definition,i=r.onShow,s=r.onOk;r.onShow=function(){var t=d(e);t&&(t.inline?!t.wrapper.getAscendant("a"):1)?this.setupContent(t.data.link||{}):i.apply(this,arguments)},r.onOk=function(){var t=d(e);if(t&&(t.inline?!t.wrapper.getAscendant("a"):1)){var n={};this.commitContent(n),t.setData("link",n)}else s.apply(this,arguments)}}}),e.getCommand("unlink").on("exec",function(t){var n=d(e);if(!n||!n.parts.link)return;n.setData("link",null),this.refresh(e,e.elementPath()),t.cancel()}),e.getCommand("unlink").on("refresh",function(t){var n=d(e);if(!n)return;this.setState(n.data.link||n.wrapper.getAscendant("a")?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),t.cancel()})}function d(e){var t=e.widgets.focused;return t&&t.name=="image"?t:null}function v(e){var t=e.config.gdimage_alignClasses,n={div:{match:a(e)},p:{match:a(e)},img:{attributes:"!src,alt,width,height"},figure:{classes:"!"+e.config.gdimage_captionedClass},figcaption:!0};return t?(n.div.classes=t[1],n.p.classes=n.div.classes,n.img.classes=t[0]+","+t[2],n.figure.classes+=","+n.img.classes):(n.div.styles="text-align",n.p.styles="text-align",n.img.styles="float",n.figure.styles="float,display"),n}function m(e){var t=e.config.gdimage_alignClasses,n={dimension:{requiredContent:"img[width,height]"},align:{requiredContent:"img"+(t?"("+t[0]+")":"{float}")},caption:{requiredContent:"figcaption"}};return n}function g(e){return e.data.hasCaption?e.element:e.parts.image}var e='<img alt="" src="" />',t=new CKEDITOR.template('<figure class="{captionedClass}">'+e+"<figcaption>{captionPlaceholder}</figcaption>"+"</figure>"),n={left:0,center:1,right:2},r=/^\s*(\d+\%)\s*$/i;CKEDITOR.plugins.add("gdimage",{lang:"en,zh-cn",requires:"widget,dialog",icons:"image",hidpi:!0,onLoad:function(){CKEDITOR.addCss(".cke_image_nocaption{line-height:0}.cke_editable.cke_image_sw, .cke_editable.cke_image_sw *{cursor:sw-resize !important}.cke_editable.cke_image_se, .cke_editable.cke_image_se *{cursor:se-resize !important}.cke_image_resizer{display:none;position:absolute;width:10px;height:10px;bottom:-5px;right:-5px;background:#000;outline:1px solid #fff;line-height:0;cursor:se-resize;}.cke_image_resizer_wrapper{position:relative;display:inline-block;line-height:0;}.cke_image_resizer.cke_image_resizer_left{right:auto;left:-5px;cursor:sw-resize;}.cke_widget_wrapper:hover .cke_image_resizer,.cke_image_resizer.cke_image_resizing{display:block}.cke_widget_wrapper>a{display:inline-block}")},init:function(e){var t=e.config,n=e.lang.gdimage,r=i(e);t.filebrowserGDImageBrowseUrl=t.filebrowserImageBrowseUrl,t.filebrowserGDImageUploadUrl=t.filebrowserImageUploadUrl,r.pathName=n.pathName,r.editables.caption.pathName=n.pathNameCaption,e.widgets.add("image",r),e.ui.addButton&&e.ui.addButton("Image",{label:e.lang.common.image,command:"image",toolbar:"insert,10"}),e.contextMenu&&(e.addMenuGroup("image",10),e.addMenuItem("image",{label:n.menu,command:"image",group:"image"})),CKEDITOR.dialog.add("gdimage",this.path+"dialogs/gdimage.js")},afterInit:function(e){var t={left:1,right:1,center:1,block:1},n=h(e);for(var r in t)n(r);p(e)}}),CKEDITOR.plugins.gdimage={stateShifter:function(e){function a(e,t){var i={};r?i.attributes={"class":r[1]}:i.styles={"text-align":"center"};var s=n.createElement(e.activeEnterMode==CKEDITOR.ENTER_P?"p":"div",i);return h(s,t),t.move(s),s}function f(e){var t=e.findOne("a,img");return t.replace(e),t}function l(e,t){var r=n.createElement("a",{attributes:{href:t.url}});return r.replace(e),e.move(r),r}function c(e){var t=e.findOne("img");return t.replace(e),t}function h(t,n){if(n.getParent()){var r=e.createRange();r.moveToPosition(n,CKEDITOR.POSITION_BEFORE_START),n.remove(),s.insertElementIntoRange(t,r)}else t.replace(n)}var n=e.document,r=e.config.gdimage_alignClasses,i=e.config.gdimage_captionedClass,s=e.editable(),o=["hasCaption","align","link"],u={align:function(t,n,i){var s=t.element;t.changed.align?t.newData.hasCaption||(i=="center"&&(t.deflate(),t.element=a(e,s)),!t.changed.hasCaption&&n=="center"&&i!="center"&&(t.deflate(),t.element=f(s))):i=="center"&&t.changed.hasCaption&&!t.newData.hasCaption&&(t.deflate(),t.element=a(e,s)),!r&&s.is("figure")&&(i=="center"?s.setStyle("display","inline-block"):s.removeStyle("display"))},hasCaption:function(r,s,o){if(!r.changed.hasCaption)return;var u;r.element.is({img:1,a:1})?u=r.element:u=r.element.findOne("a,img"),r.deflate();if(o){var a=CKEDITOR.dom.element.createFromHtml(t.output({captionedClass:i,captionPlaceholder:e.lang.gdimage.captionPlaceholder}),n);h(a,r.element),u.replace(a.findOne("img")),r.element=a}else u.replace(r.element),r.element=u},link:function(t,n,r){if(t.changed.link){var i=t.element.is("img")?t.element:t.element.findOne("img"),s=t.element.is("a")?t.element:t.element.findOne("a"),o=t.element.is("a")&&!r||t.element.is("img")&&r,u;o&&t.deflate();if(!r)u=c(s);else{n||(u=l(i,t.newData.link));var a=CKEDITOR.plugins.link.getLinkAttributes(e,r);CKEDITOR.tools.isEmpty(a.set)||(u||s).setAttributes(a.set),a.removed.length&&(u||s).removeAttributes(a.removed)}o&&(t.element=u)}}};return function(e){var t,n;e.changed={};for(n=0;n<o.length;n++)t=o[n],e.changed[t]=e.oldData?e.oldData[t]!==e.newData[t]:!1;for(n=0;n<o.length;n++)t=o[n],u[t](e,e.oldData?e.oldData[t]:null,e.newData[t]);e.inflate()}},checkHasNaturalRatio:function(e){var t=e.$,n=this.getNatural(e);return Math.round(t.clientWidth/n.width*n.height)==t.clientHeight||Math.round(t.clientHeight/n.height*n.width)==t.clientWidth},getNatural:function(e){var t;if(e.$.naturalWidth)t={width:e.$.naturalWidth,height:e.$.naturalHeight};else{var n=new Image;n.src=e.getAttribute("src"),t={width:n.width,height:n.height}}return t}}}(),CKEDITOR.config.gdimage_captionedClass="image",CKEDITOR.plugins.setLang("gdimage","zh-cn",{infoTab:"图像信息",title:"图像属性",uploadTab:"上传",urlMissing:"缺少图像源文件地址",menu:"编辑"}),function(){CKEDITOR.dialog.add("gdimage",function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p;return u=e.lang.gdimage,n=e.lang.common,r=e.config,s=e.widgets.registered.image.features,l=null,a=function(){var e;return e=this.getValue(),l.getElement().setHtml(c(e)||"在此预览")},o='<form data-callback-url="'+r.gdimage_imageUploadCallbackUrl+'" data-token-url="'+r.gdimage_imageuploadTokenUrl+'" enctype="multipart/form-data" action="'+r.gdimage_imageUploadUrl+'" accept-charset="UTF-8" method="post">\n    <span class="fileinput-button">\n      <span>上传本地图片</span>\n      <input type="file" accept="image/jpeg,image/png,image/gif" name="file">\n    </span>\n    <span>或 在下面输入框中填写图片外链地址</span>\n</form>',c=function(e){var t;if(e)return t=document.createElement("img"),t.onerror=function(){return l.getElement().setText("输入的网址无效，请重新输入")},t.src=e,t.outerHTML},h={id:"src",type:"text",className:"gdimage-src",onChange:a,setup:function(e){return this.setValue(e.data.src),this.getInputElement().setAttribute("placeholder","请填写外链图片网址")},commit:function(e){return e.setData("src",this.getValue())},validate:CKEDITOR.dialog.validate.notEmpty(u.urlMissing)},p={type:"html",className:"gdimage-upload",html:o},f={type:"html",id:"preview",className:"gdimage-preview",html:"<div></div>",onLoad:function(){return l=this},setup:function(e){return this.getElement().setHtml(c(e.data.src)||"在此预览")}},t={type:"hbox",id:"alignment",requiredContent:s.align.requiredContent,children:[{id:"align",type:"radio",items:[[n.alignNone,"none"],[n.alignLeft,"left"],[n.alignCenter,"center"],[n.alignRight,"right"]],label:n.align,setup:function(e){return this.setValue(e.data.align)},commit:function(e){return e.setData("align",this.getValue())}}]},i=[],r.gdimage_imageUploadUrl&&i.push(p),i=i.concat([h,f,t]),{title:u.title,minWidth:400,minHeight:100,resizable:CKEDITOR.DIALOG_RESIZE_NONE,contents:[{id:"info",label:u.infoTab,elements:i}]}})}.call(this),CKEDITOR.plugins.add("divarea",{afterInit:function(e){e.addMode("wysiwyg",function(t){var n=CKEDITOR.dom.element.createFromHtml('<div class="cke_wysiwyg_div cke_reset" hidefocus="true"></div>'),r=e.ui.space("contents");r.append(n),n=e.editable(n),n.detach=CKEDITOR.tools.override(n.detach,function(e){return function(){e.apply(this,arguments),this.remove()}}),e.setData(e.getData(1),t),e.fire("contentDom")})}}),"use strict",function(){function e(e){function h(){n=e.document,r=n[CKEDITOR.env.ie?"getBody":"getDocumentElement"](),i=CKEDITOR.env.quirks?n.getBody():n.getDocumentElement(),s=CKEDITOR.dom.element.createFromHtml('<span style="margin:0;padding:0;border:0;clear:both;width:1px;height:1px;display:block;">'+(CKEDITOR.env.webkit?"&nbsp;":"")+"</span>",n)}function p(){var t=e.getCommand("maximize");return!e.window||t&&t.state==CKEDITOR.TRISTATE_ON}function d(){r.append(s);var e=s.getDocumentPosition(n).y+s.$.offsetHeight;return s.remove(),e}function v(){f&&i.setStyle("overflow-y","hidden");var n=e.window.getViewPaneSize().height,r=d();r+=o,r=Math.max(r,u),r=Math.min(r,a),r!=n&&t!=r&&(r=e.fire("autoGrow",{currentHeight:n,newHeight:r}).newHeight,e.resize(e.container.getStyle("width"),r,!0),t=r),f||(r<a&&i.$.scrollHeight>i.$.clientHeight?i.setStyle("overflow-y","hidden"):i.removeStyle("overflow-y"))}var t,n,r,i,s,o=e.config.autoGrow_bottomSpace||0,u=e.config.autoGrow_minHeight!==undefined?e.config.autoGrow_minHeight:200,a=e.config.autoGrow_maxHeight||Infinity,f=!e.config.autoGrow_maxHeight;e.addCommand("autogrow",{exec:v,modes:{wysiwyg:1},readOnly:1,canUndo:!1,editorFocus:!1});var l={contentDom:1,key:1,selectionChange:1,insertElement:1,mode:1};for(var c in l)e.on(c,function(e){e.editor.mode=="wysiwyg"&&setTimeout(function(){if(p()){t=null;return}v(),f||v()},100)});e.on("afterCommandExec",function(e){e.data.name=="maximize"&&e.editor.mode=="wysiwyg"&&(e.data.command.state==CKEDITOR.TRISTATE_ON?i.removeStyle("overflow-y"):v())}),e.on("contentDom",h),h(),e.config.autoGrow_onStartup&&e.execCommand("autogrow")}CKEDITOR.plugins.add("autogrow",{init:function(t){if(t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE)return;t.on("instanceReady",function(){t.editable().isInline()?t.ui.space("contents").setStyle("height","auto"):e(t)})}})}(),"use strict",function(){CKEDITOR.plugins.add("placeholder",{requires:"widget,dialog",lang:"af,ar,bg,ca,cs,cy,da,de,el,en,en-gb,eo,es,et,eu,fa,fi,fr,fr-ca,gl,he,hr,hu,id,it,ja,km,ko,ku,lv,nb,nl,no,pl,pt,pt-br,ru,si,sk,sl,sq,sv,th,tr,tt,ug,uk,vi,zh,zh-cn",icons:"placeholder",hidpi:!0,onLoad:function(){CKEDITOR.addCss(".cke_placeholder{background-color:#ff0}")},init:function(e){var t=e.lang.placeholder;CKEDITOR.dialog.add("placeholder",this.path+"dialogs/placeholder.js"),e.widgets.add("placeholder",{dialog:"placeholder",pathName:t.pathName,template:'<span class="cke_placeholder">[[]]</span>',downcast:function(){return new CKEDITOR.htmlParser.text(this.data.name)},init:function(){this.setData("name",this.element.getText())},data:function(){this.element.setText(this.data.name)}}),e.ui.addButton&&e.ui.addButton("CreatePlaceholder",{label:t.toolbar,command:"placeholder",toolbar:"insert,5",icon:"placeholder"})},afterInit:function(e){var t=GD.PLACEHOLDER_REPLACE_REGEX;e.dataProcessor.dataFilter.addRules({text:function(n,r){var i=r.parent&&CKEDITOR.dtd[r.parent.name];if(i&&!i.span)return;return n.replace(t,function(t){var n=null,r=new CKEDITOR.htmlParser.element("span",{"class":"cke_placeholder tag label label-info"});return r.add(new CKEDITOR.htmlParser.text(t)),n=e.widgets.wrapElement(r,"placeholder"),n.getOuterHtml()})}})}})}(),CKEDITOR.plugins.setLang("placeholder","zh-cn",{title:"占位符属性",toolbar:"占位符",name:"占位符名称",invalidName:"占位符名称不能为空，并且不能包含以下字符：[、]、<、>",pathName:"占位符"}),function(){"use strict";function t(e){if(!e)return!0;if(e.length>20)return!1;var t=e.replace(/[\n|\t]*/g,"").toLowerCase();return!t||t=="<br>"||t=="<p>&nbsp;<br></p>"||t=="<p><br></p>"||t=="<p>&nbsp;</p>"||t=="&nbsp;"||t==" "||t=="&nbsp;<br>"||t==" <br>"?!0:!1}function n(n){var r=n.editor,i=r.editable?r.editable():r.mode=="wysiwyg"?r.document&&r.document.getBody():r.textarea,s=n.listenerData;if(!i)return;if(r.mode=="wysiwyg"){if(CKEDITOR.dialog._.currentTop)return;if(!i)return;t(i.getHtml())&&(i.setHtml(s),i.addClass("placeholder"))}if(r.mode=="source"){if(e){n.name=="mode"&&i.setAttribute("placeholder",s);return}t(i.getValue())&&(i.setValue(s),i.addClass("placeholder"))}}function r(e){var t=e.editor,n=t.editable?t.editable():t.mode=="wysiwyg"?t.document&&t.document.getBody():t.textarea;if(!n)return;if(t.mode=="wysiwyg"){if(!n.hasClass("placeholder"))return;n.removeClass("placeholder");if(CKEDITOR.dtd[n.getName()].p){n.setHtml("<p><br/></p>");var r=new CKEDITOR.dom.range(t.document);r.moveToElementEditablePosition(n.getFirst(),!0),t.getSelection().selectRanges([r])}else n.setHtml(" ")}if(t.mode=="source"){if(!n.hasClass("placeholder"))return;n.removeClass("placeholder"),n.setValue("")}}function i(e){return e?e.getAttribute("lang")||i(e.getParent()):null}var e="placeholder"in document.createElement("textarea");CKEDITOR.plugins.add("confighelper",{getPlaceholderCss:function(){return".placeholder{ color: #999; }"},onLoad:function(){CKEDITOR.addCss&&CKEDITOR.addCss(this.getPlaceholderCss())},init:function(s){s.on("mode",function(e){e.editor.focusManager.hasFocus=!1});var o=s.element.getAttribute("placeholder")||s.config.placeholder;if(o){s.addCss&&s.addCss(this.getPlaceholderCss());var u=CKEDITOR.document.getHead().append("style");u.setAttribute("type","text/css");var a="textarea.placeholder { color: #999; font-style: italic; }";CKEDITOR.env.ie&&CKEDITOR.env.version<11?u.$.styleSheet.cssText=a:u.$.innerHTML=a,s.on("getData",function(e){var t=s.editable?s.editable():s.mode=="wysiwyg"?s.document&&s.document.getBody():s.textarea;t&&t.hasClass("placeholder")&&(e.data.dataValue="")}),s.on("setData",function(r){if(CKEDITOR.dialog._.currentTop)return;if(s.mode=="source"&&e)return;var i=s.editable?s.editable():s.mode=="wysiwyg"?s.document&&s.document.getBody():s.textarea;if(!i)return;t(r.data.dataValue)?n(r):i.hasClass("placeholder")&&i.removeClass("placeholder")}),s.on("blur",n,null,o),s.on("mode",n,null,o),s.on("contentDom",n,null,o),s.on("focus",r),s.on("beforeModeUnload",r)}var f=s.config.contentsLanguage||i(s.element);if(f&&!s.config.scayt_sLang){localStorage&&localStorage.removeItem("scayt_0_lang");var l={en:"en_US","en-us":"en_US","en-gb":"en_GB","pt-br":"pt_BR",da:"da_DK","da-dk":"da_DK","nl-nl":"nl_NL","en-ca":"en_CA","fi-fi":"fi_FI",fr:"fr_FR","fr-fr":"fr_FR","fr-ca":"fr_CA",de:"de_DE","de-de":"de_DE","el-gr":"el_GR",it:"it_IT","it-it":"it_IT","nb-no":"nb_NO",pt:"pt_PT","pt-pt":"pt_PT",es:"es_ES","es-es":"es_ES","sv-se":"sv_SE"};s.config.scayt_sLang=l[f.toLowerCase()]}var c=function(e){if(typeof e=="object")return e;var t=e.split(";"),n={},r;for(r=0;r<t.length;r++){var i=t[r].split(":");if(i.length==3){var s=i[0],o=i[1],u=i[2];n[s]||(n[s]={}),n[s][o]||(n[s][o]=[]),n[s][o].push(u)}}return n};CKEDITOR.on("dialogDefinition",function(e){if(s!=e.editor)return;var t=e.data.name,n=e.data.definition,r,i,o,u,a;t=="tableProperties"&&t=="table",!("removeDialogFields"in s._)&&s.config.removeDialogFields&&(s._.removeDialogFields=c(s.config.removeDialogFields));if(s._.removeDialogFields&&(r=s._.removeDialogFields[t]))for(o in r){u=r[o],a=n.getContents(o);for(i=0;i<u.length;i++)a.remove(u[i])}!("hideDialogFields"in s._)&&s.config.hideDialogFields&&(s._.hideDialogFields=c(s.config.hideDialogFields));if(s._.hideDialogFields&&(r=s._.hideDialogFields[t]))for(o in r){u=r[o],a=n.getContents(o);for(i=0;i<u.length;i++)a.get(u[i]).hidden=!0}if(s.config.dialogFieldsDefaultValues&&(r=s.config.dialogFieldsDefaultValues[t]))for(o in r){u=r[o],a=n.getContents(o);for(var f in u){var l=a.get(f);l&&(l["default"]=u[f])}}})}})}(),"use strict",function(){function t(e){this.editor=e,this.registered={},this.instances={},this.selected=[],this.focused=null,this.widgetHoldingFocusedEditable=null,this._={nextId:0,upcasts:[],upcastCallbacks:[],filters:{}},L(this),k(this),T(this),N(this),x(this),C(this)}function n(e,t,r,i,s){var o=e.editor;CKEDITOR.tools.extend(this,i,{editor:o,id:t,inline:r.getParent().getName()=="span",element:r,data:CKEDITOR.tools.extend({},typeof i.defaults=="function"?i.defaults():i.defaults),dataReady:!1,inited:!1,ready:!1,edit:n.prototype.edit,focusedEditable:null,definition:i,repository:e,draggable:i.draggable!==!1,_:{downcastFn:i.downcast&&typeof i.downcast=="string"?i.downcasts[i.downcast]:i.downcast}},!0),e.fire("instanceCreated",this),V(this,i),this.init&&this.init(),this.inited=!0,$(this,s),this.isInited()&&o.editable().contains(this.wrapper)&&(this.ready=!0,this.fire("ready"))}function r(e,t,n){CKEDITOR.dom.element.call(this,t.$),this.editor=e,this._={};var r=this.filter=n.filter;CKEDITOR.dtd[this.getName()].p?(this.enterMode=r?r.getAllowedEnterMode(e.enterMode):e.enterMode,this.shiftEnterMode=r?r.getAllowedEnterMode(e.shiftEnterMode,!0):e.shiftEnterMode):this.enterMode=this.shiftEnterMode=CKEDITOR.ENTER_BR}function i(e){var t=e.widgets.registered,n,r,i;for(r in t)n=t[r],i=n.button,i&&e.ui.addButton&&e.ui.addButton(CKEDITOR.tools.capitalize(n.name,!0),{label:i,command:n.name,toolbar:"insert,10"})}function s(e,t){e.addCommand(t.name,{exec:function(e,n){function l(){e.widgets.finalizeCreation(a)}var r=e.widgets.focused;if(r&&r.name==t.name)r.edit();else if(t.insert)t.insert();else if(t.template){var i=typeof t.defaults=="function"?t.defaults():t.defaults,s=CKEDITOR.dom.element.createFromHtml(t.template.output(i)),o,u=e.widgets.wrapElement(s,t.name),a=new CKEDITOR.dom.documentFragment(u.getDocument());a.append(u),o=e.widgets.initOn(s,t,n&&n.startupData);if(!o){l();return}var f=o.once("edit",function(t){t.data.dialog?o.once("dialog",function(t){var n=t.data,r,i;r=n.once("ok",l,null,null,20),i=n.once("cancel",function(t){(!t.data||t.data.hide!==!1)&&e.widgets.destroy(o,!0)}),n.once("hide",function(){r.removeListener(),i.removeListener()})}):l()},null,null,999);o.edit(),f.removeListener()}},allowedContent:t.allowedContent,requiredContent:t.requiredContent,contentForms:t.contentForms,contentTransformations:t.contentTransformations})}function o(e,t){function s(t,n,r){var i=CKEDITOR.tools.getIndex(e._.upcasts,function(e){return e[2]>r});i<0&&(i=e._.upcasts.length),e._.upcasts.splice(i,0,[t,n,r])}var n=t.upcast,r,i=t.upcastPriority||10;if(!n)return;if(typeof n=="string"){r=n.split(",");while(r.length)s(t.upcasts[r.pop()],t.name,i)}else s(n,t.name,i)}function u(e,t){e.focused=null;if(t.isInited()){var n=t.editor.checkDirty();e.fire("widgetBlurred",{widget:t}),t.setFocused(!1),!n&&t.editor.resetDirty()}}function a(e){var t=e.data;if(this.editor.mode!="wysiwyg")return;var r=this.editor.editable(),i=this.instances,s,o,u,a,f;if(!r)return;for(o in i)i[o].isReady()&&!r.contains(i[o].wrapper)&&this.destroy(i[o],!0);if(t&&t.initOnlyNew)s=this.initOnAll();else{var l=r.find(".cke_widget_wrapper");s=[];for(o=0,u=l.count();o<u;o++)a=l.getItem(o),f=!this.getByElement(a,!0),f&&!p(a,g)&&r.contains(a)&&(a.addClass("cke_widget_new"),s.push(this.initOn(a.getFirst(n.isDomWidgetElement))))}t&&t.focusInited&&s.length==1&&s[0].focus()}function f(e){var t=e.parent;t.type==CKEDITOR.NODE_ELEMENT&&t.attributes["data-cke-widget-wrapper"]&&t.replaceWith(e)}function l(e,t){var r=t.find(".cke_widget_wrapper"),i,s,o=0,u=r.count();for(;o<u;++o)i=r.getItem(o),s=i.getFirst(n.isDomWidgetElement),s.type==CKEDITOR.NODE_ELEMENT&&s.data("widget")?(s.replace(i),e.wrapElement(s)):i.remove()}function c(e,t,n){if(!n.allowedContent)return null;var r=this._.filters[e];r||(this._.filters[e]=r={});var i=r[t];return i||(r[t]=i=new CKEDITOR.filter(n.allowedContent)),i}function h(e){var t=[],r=e._.upcasts,i=e._.upcastCallbacks;return{toBeWrapped:t,iterator:function(e){var s,o,u,a,f,l;if("data-cke-widget-wrapper"in e.attributes)return e=e.getFirst(n.isParserWidgetElement),e&&t.push([e]),!1;if("data-widget"in e.attributes)return t.push([e]),!1;if(f=r.length){if(e.attributes["data-cke-widget-upcasted"])return!1;for(a=0,l=i.length;a<l;++a)if(i[a](e)===!1)return;for(a=0;a<f;++a){s=r[a],u={};if(o=s[0](e,u))return o instanceof CKEDITOR.htmlParser.element&&(e=o),e.attributes["data-cke-widget-data"]=encodeURIComponent(JSON.stringify(u)),e.attributes["data-cke-widget-upcasted"]=1,t.push([e,s[1]]),!1}}}}}function p(e,t){var n=e;while(n=n.getParent())if(t(n))return!0;return!1}function d(e){return{tabindex:-1,contenteditable:"false","data-cke-widget-wrapper":1,"data-cke-filter":"off","class":"cke_widget_wrapper cke_widget_new cke_widget_"+(e?"inline":"block")}}function v(e,t,n){if(e.type==CKEDITOR.NODE_ELEMENT){var r=CKEDITOR.dtd[e.name];if(r&&!r[n.name]){var i=e.split(t),s=e.parent;return t=i.getIndex(),e.children.length||(t-=1,e.remove()),i.children.length||i.remove(),v(s,t,n)}}e.add(n,t)}function m(e,t){return typeof e.inline=="boolean"?e.inline:!!CKEDITOR.dtd.$inline[t]}function g(e){return e.hasAttribute("data-cke-temp")}function y(e,t){var n=e.focusedEditable,r;if(t==CKEDITOR.CTRL+65){var i=n.getBogus();return r=e.editor.createRange(),r.selectNodeContents(n),i&&r.setEndAt(i,CKEDITOR.POSITION_BEFORE_START),r.select(),!1}if(t==8||t==46){var s=e.editor.getSelection().getRanges();return r=s[0],s.length!=1||!r.collapsed||!r.checkBoundaryOfElement(n,CKEDITOR[t==8?"START":"END"])}}function b(e,t,n,r){var i=e.editor;i.fire("lockSnapshot");if(n){var s=n.data("cke-widget-editable"),o=t.editables[s];e.widgetHoldingFocusedEditable=t,t.focusedEditable=o,n.addClass("cke_widget_editable_focused"),o.filter&&i.setActiveFilter(o.filter),i.setActiveEnterMode(o.enterMode,o.shiftEnterMode)}else r||t.focusedEditable.removeClass("cke_widget_editable_focused"),t.focusedEditable=null,e.widgetHoldingFocusedEditable=null,i.setActiveFilter(null),i.setActiveEnterMode(null,null);i.fire("unlockSnapshot")}function w(e){if(!e.contextMenu)return;e.contextMenu.addListener(function(t){var n=e.widgets.getByElement(t,!0);if(n)return n.fire("contextMenu",{})})}function S(e,t){return CKEDITOR.tools.trim(t)}function x(e){var t=e.editor,r=CKEDITOR.plugins.lineutils;t.on("dragstart",function(r){var i=r.data.target;if(n.isDomDragHandler(i)){var s=e.getByElement(i);r.data.dataTransfer.setData("cke/widget-id",s.id),t.focus(),s.focus()}}),t.on("drop",function(n){var r=n.data.dataTransfer,i=r.getData("cke/widget-id"),s=t.createRange(),o;if(i===""||r.getTransferType(t)!=CKEDITOR.DATA_TRANSFER_INTERNAL)return;o=e.instances[i];if(!o)return;s.setStartBefore(o.wrapper),s.setEndAfter(o.wrapper),n.data.dragRange=s,delete CKEDITOR.plugins.clipboard.dragStartContainerChildCount,delete CKEDITOR.plugins.clipboard.dragEndContainerChildCount,n.data.dataTransfer.setData("text/html",t.editable().getHtmlFromRange(s).getHtml()),t.widgets.destroy(o,!0)}),t.on("contentDom",function(){var i=t.editable();CKEDITOR.tools.extend(e,{finder:new r.finder(t,{lookups:{"default":function(t){if(t.is(CKEDITOR.dtd.$listItem))return;if(!t.is(CKEDITOR.dtd.$block))return;if(n.isDomNestedEditable(t))return;if(e._.draggedWidget.wrapper.contains(t))return;var r=n.getNestedEditable(i,t);if(r){var s=e._.draggedWidget;if(e.getByElement(r)==s)return;var o=CKEDITOR.filter.instances[r.data("cke-filter")],u=s.requiredContent;if(o&&u&&!o.check(u))return}return CKEDITOR.LINEUTILS_BEFORE|CKEDITOR.LINEUTILS_AFTER}}}),locator:new r.locator(t),liner:new r.liner(t,{lineStyle:{cursor:"move !important","border-top-color":"#666"},tipLeftStyle:{"border-left-color":"#666"},tipRightStyle:{"border-right-color":"#666"}})},!0)})}function T(e){var t=e.editor;t.on("contentDom",function(){var r=t.editable(),i=r.isInline()?r:t.document,s,o;r.attachListener(i,"mousedown",function(t){var r=t.data.getTarget();if(!r.type)return!1;s=e.getByElement(r),o=0;if(s){if(s.inline&&r.type==CKEDITOR.NODE_ELEMENT&&r.hasAttribute("data-cke-widget-drag-handler")){o=1;return}n.getNestedEditable(s.wrapper,r)?s=null:(t.data.preventDefault(),CKEDITOR.env.ie||s.focus())}}),r.attachListener(i,"mouseup",function(){o&&s&&s.wrapper&&(o=0,s.focus())}),CKEDITOR.env.ie&&r.attachListener(i,"mouseup",function(){setTimeout(function(){s&&s.wrapper&&r.contains(s.wrapper)&&(s.focus(),s=null)})})}),t.on("doubleclick",function(t){var r=e.getByElement(t.data.element);if(!r||n.getNestedEditable(r.wrapper,t.data.element))return;return r.fire("doubleclick",{element:t.data.element})},null,null,1)}function N(e){var t=e.editor;t.on("key",function(t){var n=e.focused,r=e.widgetHoldingFocusedEditable,i;return n?i=n.fire("key",{keyCode:t.data.keyCode}):r&&(i=y(r,t.data.keyCode)),i},null,null,1)}function C(e){function n(t){e.focused&&H(e.focused,t.name=="cut")}var t=e.editor;t.on("contentDom",function(){var e=t.editable();e.attachListener(e,"copy",n),e.attachListener(e,"cut",n)})}function k(e){var t=e.editor;t.on("selectionCheck",function(){e.fire("checkSelection")}),e.on("checkSelection",e.checkSelection,e),t.on("selectionChange",function(r){var i=n.getNestedEditable(t.editable(),r.data.selection.getStartElement()),s=i&&e.getByElement(i),o=e.widgetHoldingFocusedEditable;if(o){if(o!==s||!o.focusedEditable.equals(i))b(e,o,null),s&&i&&b(e,s,i)}else s&&i&&b(e,s,i)}),t.on("dataReady",function(){M(e).commit()}),t.on("blur",function(){var t;(t=e.focused)&&u(e,t),(t=e.widgetHoldingFocusedEditable)&&b(e,t,null)})}function L(e){O(e),A(e),e.on("checkWidgets",a),e.editor.on("contentDomInvalidated",e.checkWidgets,e)}function A(e){var t=e.editor,r={};t.on("toDataFormat",function(t){var i=CKEDITOR.tools.getNextNumber(),s=[];t.data.downcastingSessionId=i,r[i]=s,t.data.dataValue.forEach(function(t){var r=t.attributes,i,o;if("data-cke-widget-id"in r)i=e.instances[r["data-cke-widget-id"]],i&&(o=t.getFirst(n.isParserWidgetElement),s.push({wrapper:t,element:o,widget:i,editables:{}}),o.attributes["data-cke-widget-keep-attr"]!="1"&&delete o.attributes["data-widget"]);else if("data-cke-widget-editable"in r)return s[s.length-1].editables[r["data-cke-widget-editable"]]=t,!1},CKEDITOR.NODE_ELEMENT,!0)},null,null,8),t.on("toDataFormat",function(e){if(!e.data.downcastingSessionId)return;var t=r[e.data.downcastingSessionId],n,i,s,o,u,a;while(n=t.shift()){i=n.widget,s=n.element,o=i._.downcastFn&&i._.downcastFn.call(i,s);for(a in n.editables)u=n.editables[a],delete u.attributes.contenteditable,u.setHtml(i.editables[a].getData());o||(o=s),n.wrapper.replaceWith(o)}},null,null,13),t.on("contentDomUnload",function(){e.destroyAll(!0)})}function O(e){var t=e.editor,r,i;t.on("toHtml",function(t){var i=h(e),s;t.data.dataValue.forEach(i.iterator,CKEDITOR.NODE_ELEMENT,!0);while(s=i.toBeWrapped.pop())f(s[0]),e.wrapElement(s[0],s[1]);t.data.protectedWhitespaces?r=t.data.dataValue.children.length==3&&n.isParserWidgetWrapper(t.data.dataValue.children[1]):r=t.data.dataValue.children.length==1&&n.isParserWidgetWrapper(t.data.dataValue.children[0])},null,null,8),t.on("dataReady",function(){i&&l(e,t.editable()),i=0,e.destroyAll(!0),e.initOnAll()}),t.on("loadSnapshot",function(t){/data-cke-widget/.test(t.data)&&(i=1),e.destroyAll(!0)},null,null,9),t.on("paste",function(e){var r=e.data;r.dataValue=r.dataValue.replace(E,S);if(r.range){var i=n.getNestedEditable(t.editable(),r.range.startContainer);if(i){var s=CKEDITOR.filter.instances[i.data("cke-filter")];s&&t.setActiveFilter(s)}}}),t.on("afterInsertHtml",function(n){n.data.intoRange?e.checkWidgets({initOnlyNew:!0}):(t.fire("lockSnapshot"),e.checkWidgets({initOnlyNew:!0,focusInited:r}),t.fire("unlockSnapshot"))})}function M(e){var t=e.selected,n=[],r=t.slice(0),i=null;return{select:function(e){CKEDITOR.tools.indexOf(t,e)<0&&n.push(e);var i=CKEDITOR.tools.indexOf(r,e);return i>=0&&r.splice(i,1),this},focus:function(
e){return i=e,this},commit:function(){var s=e.focused!==i,o,a;e.editor.fire("lockSnapshot"),s&&(o=e.focused)&&u(e,o);while(o=r.pop())t.splice(CKEDITOR.tools.indexOf(t,o),1),o.isInited()&&(a=o.editor.checkDirty(),o.setSelected(!1),!a&&o.editor.resetDirty());s&&i&&(a=e.editor.checkDirty(),e.focused=i,e.fire("widgetFocused",{widget:i}),i.setFocused(!0),!a&&e.editor.resetDirty());while(o=n.pop())t.push(o),o.setSelected(!0);e.editor.fire("unlockSnapshot")}}}function D(e,t,n){var r=0,i=B(t),s=e.data.classes||{},o;if(!i)return;s=CKEDITOR.tools.clone(s);while(o=i.pop())n?s[o]||(r=s[o]=1):s[o]&&(delete s[o],r=1);r&&e.setData("classes",s)}function P(e){e.cancel()}function H(e,t){var n=e.editor,r=n.document;if(r.getById("cke_copybin"))return;var i=n.blockless||CKEDITOR.env.ie?"span":"div",s=r.createElement(i),o=r.createElement(i),u=CKEDITOR.env.ie&&CKEDITOR.env.version<9;o.setAttributes({id:"cke_copybin","data-cke-temp":"1"}),s.setStyles({position:"absolute",width:"1px",height:"1px",overflow:"hidden"}),s.setStyle(n.config.contentsLangDirection=="ltr"?"left":"right","-5000px");var a=n.createRange();a.setStartBefore(e.wrapper),a.setEndAfter(e.wrapper),s.setHtml('<span data-cke-copybin-start="1">​</span>'+n.editable().getHtmlFromRange(a).getHtml()+'<span data-cke-copybin-end="1">​</span>'),n.fire("saveSnapshot"),n.fire("lockSnapshot"),o.append(s),n.editable().append(o);var f=n.on("selectionChange",P,null,null,0),l=e.repository.on("checkSelection",P,null,null,0);if(u)var c=r.getDocumentElement().$,h=c.scrollTop;a=n.createRange(),a.selectNodeContents(s),a.select(),u&&(c.scrollTop=h),setTimeout(function(){t||e.focus(),o.remove(),f.removeListener(),l.removeListener(),n.fire("unlockSnapshot"),t&&(e.repository.del(e),n.fire("saveSnapshot"))},100)}function B(e){var t=e.getDefinition().attributes,n=t&&t["class"];return n?n.split(/\s+/):null}function j(){var e=CKEDITOR.document.getActive(),t=this.editor,n=t.editable();(n.isInline()?n:t.document.getWindow().getFrame()).equals(e)&&t.focusManager.focus(n)}function F(){CKEDITOR.env.gecko&&this.editor.unlockSelection(),CKEDITOR.env.webkit||(this.editor.forceNextSelectionCheck(),this.editor.selectionChange(1))}function I(e){var t=null;e.on("data",function(){var e=this.data.classes,n;if(t==e)return;for(n in t)(!e||!e[n])&&this.removeClass(n);for(n in e)this.addClass(n);t=e})}function q(t){if(!t.draggable)return;var r=t.editor,i=t.wrapper.getLast(n.isDomDragHandlerContainer),s;i?s=i.findOne("img"):(i=new CKEDITOR.dom.element("span",r.document),i.setAttributes({"class":"cke_reset cke_widget_drag_handler_container",style:"background:rgba(220,220,220,0.5);background-image:url("+r.plugins.widget.path+"images/handle.png)"}),s=new CKEDITOR.dom.element("img",r.document),s.setAttributes({"class":"cke_reset cke_widget_drag_handler","data-cke-widget-drag-handler":"1",src:CKEDITOR.tools.transparentImageData,width:e,title:r.lang.widget.move,height:e}),t.inline&&s.setAttribute("draggable","true"),i.append(s),t.wrapper.append(i)),t.wrapper.on("dragover",function(e){e.data.preventDefault()}),t.wrapper.on("mouseenter",t.updateDragHandlerPosition,t),setTimeout(function(){t.on("data",t.updateDragHandlerPosition,t)},50),t.inline||(s.on("mousedown",R,t),CKEDITOR.env.ie&&CKEDITOR.env.version<9&&s.on("dragstart",function(e){e.data.preventDefault(!0)})),t.dragHandlerContainer=i}function R(e){function h(){var t;f.reset();while(t=o.pop())t.removeListener();U.call(this,u,e.sender)}var t=this.repository.finder,n=this.repository.locator,r=this.repository.liner,i=this.editor,s=i.editable(),o=[],u=[];this.repository._.draggedWidget=this;var a=t.greedySearch(),f=CKEDITOR.tools.eventsBuffer(50,function(){l=n.locate(a),u=n.sort(c,1),u.length&&(r.prepare(a,l),r.placeLine(u[0]),r.cleanup())}),l,c;s.addClass("cke_widget_dragging"),o.push(s.on("mousemove",function(e){c=e.data.$.clientY,f.input()})),i.fire("dragstart",{target:e.sender}),o.push(i.document.once("mouseup",h,this)),s.isInline()||o.push(CKEDITOR.document.once("mouseup",h,this))}function U(e,t){var n=this.repository.finder,r=this.repository.liner,i=this.editor,s=this.editor.editable();if(!CKEDITOR.tools.isEmpty(r.visible)){var o=n.getRange(e[0]);this.focus(),i.fire("drop",{dropRange:o,target:o.startContainer})}s.removeClass("cke_widget_dragging"),r.hideVisible(),i.fire("dragend",{target:t})}function z(e){var t,n,r=e.editables;e.editables={};if(!e.editables)return;for(t in r)n=r[t],e.initEditable(t,typeof n=="string"?{selector:n}:n)}function W(e){if(!e.mask)return;var t=e.wrapper.findOne(".cke_widget_mask");t||(t=new CKEDITOR.dom.element("img",e.editor.document),t.setAttributes({src:CKEDITOR.tools.transparentImageData,"class":"cke_reset cke_widget_mask"}),e.wrapper.append(t)),e.mask=t}function X(e){if(e.parts){var t={},n,r;for(r in e.parts)n=e.wrapper.findOne(e.parts[r]),t[r]=n;e.parts=t}}function V(e,t){J(e),X(e),z(e),W(e),q(e),I(e),CKEDITOR.env.ie&&CKEDITOR.env.version<9&&e.wrapper.on("dragstart",function(t){var r=t.data.getTarget();!n.getNestedEditable(e,r)&&(!e.inline||!n.isDomDragHandler(r))&&t.data.preventDefault()}),e.wrapper.removeClass("cke_widget_new"),e.element.addClass("cke_widget_element"),e.on("key",function(t){var n=t.data.keyCode;if(n==13)e.edit();else{if(n==CKEDITOR.CTRL+67||n==CKEDITOR.CTRL+88){H(e,n==CKEDITOR.CTRL+88);return}if(n in _||CKEDITOR.CTRL&n||CKEDITOR.ALT&n)return}return!1},null,null,999),e.on("doubleclick",function(t){e.edit()&&t.cancel()}),t.data&&e.on("data",t.data),t.edit&&e.on("edit",t.edit)}function $(e,t){var n=e.element.data("cke-widget-data");n&&e.setData(JSON.parse(decodeURIComponent(n))),t&&e.setData(t),e.data.classes||e.setData("classes",e.getClasses()),e.dataReady=!0,K(e),e.fire("data",e.data)}function J(e){var t=e.wrapper=e.element.getParent();t.setAttribute("data-cke-widget-id",e.id)}function K(e){e.element.data("cke-widget-data",encodeURIComponent(JSON.stringify(e.data)))}var e=15;CKEDITOR.plugins.add("widget",{lang:"af,ar,bg,ca,cs,cy,da,de,el,en,en-gb,eo,es,fa,fi,fr,gl,he,hr,hu,it,ja,km,ko,ku,lv,nb,nl,no,pl,pt,pt-br,ru,sk,sl,sq,sv,tr,tt,uk,vi,zh,zh-cn",requires:"lineutils,clipboard",onLoad:function(){CKEDITOR.addCss(".cke_widget_wrapper{position:relative;outline:none}.cke_widget_inline{display:inline-block}.cke_widget_wrapper:hover>.cke_widget_element{outline:2px solid yellow;cursor:default}.cke_widget_wrapper:hover .cke_widget_editable{outline:2px solid yellow}.cke_widget_wrapper.cke_widget_focused>.cke_widget_element,.cke_widget_wrapper .cke_widget_editable.cke_widget_editable_focused{outline:2px solid #ace}.cke_widget_editable{cursor:text}.cke_widget_drag_handler_container{position:absolute;width:"+e+"px;"+"height:0;"+"display:none;"+"opacity:0.75;"+"transition:height 0s 0.2s;"+"line-height:0"+"}"+".cke_widget_wrapper:hover>.cke_widget_drag_handler_container{"+"height:"+e+"px;"+"transition:none"+"}"+".cke_widget_drag_handler_container:hover{"+"opacity:1"+"}"+"img.cke_widget_drag_handler{"+"cursor:move;"+"width:"+e+"px;"+"height:"+e+"px;"+"display:inline-block"+"}"+".cke_widget_mask{"+"position:absolute;"+"top:0;"+"left:0;"+"width:100%;"+"height:100%;"+"display:block"+"}"+".cke_editable.cke_widget_dragging, .cke_editable.cke_widget_dragging *{"+"cursor:move !important"+"}")},beforeInit:function(e){e.widgets=new t(e)},afterInit:function(e){i(e),w(e)}}),t.prototype={MIN_SELECTION_CHECK_INTERVAL:500,add:function(e,t){return t=CKEDITOR.tools.prototypedCopy(t),t.name=e,t._=t._||{},this.editor.fire("widgetDefinition",t),t.template&&(t.template=new CKEDITOR.template(t.template)),s(this.editor,t),o(this,t),this.registered[e]=t,t},addUpcastCallback:function(e){this._.upcastCallbacks.push(e)},checkSelection:function(){var e=this.editor.getSelection(),t=e.getSelectedElement(),r=M(this),i;if(t&&(i=this.getByElement(t,!0)))return r.focus(i).select(i).commit();var s=e.getRanges()[0];if(!s||s.collapsed)return r.commit();var o=new CKEDITOR.dom.walker(s),u;o.evaluator=n.isDomWidgetWrapper;while(u=o.next())r.select(this.getByElement(u));r.commit()},checkWidgets:function(e){this.fire("checkWidgets",CKEDITOR.tools.copy(e||{}))},del:function(e){if(this.focused===e){var t=e.editor,n=t.createRange(),r;(r=n.moveToClosestEditablePosition(e.wrapper,!0))||(r=n.moveToClosestEditablePosition(e.wrapper,!1)),r&&t.getSelection().selectRanges([n])}e.wrapper.remove(),this.destroy(e,!0)},destroy:function(e,t){this.widgetHoldingFocusedEditable===e&&b(this,e,null,t),e.destroy(t),delete this.instances[e.id],this.fire("instanceDestroyed",e)},destroyAll:function(e,t){var n,r,i=this.instances;if(t&&!e){var s=t.find(".cke_widget_wrapper"),o=s.count(),u=0;for(;u<o;++u)n=this.getByElement(s.getItem(u),!0),n&&this.destroy(n);return}for(r in i)n=i[r],this.destroy(n,e)},finalizeCreation:function(e){var t=e.getFirst();if(t&&n.isDomWidgetWrapper(t)){this.editor.insertElement(t);var r=this.getByElement(t);r.ready=!0,r.fire("ready"),r.focus()}},getByElement:function(){function t(t){return t.is(e)&&t.data("cke-widget-id")}var e={div:1,span:1};return function(e,n){if(!e)return null;var r=t(e);if(!n&&!r){var i=this.editor.editable();do e=e.getParent();while(e&&!e.equals(i)&&!(r=t(e)))}return this.instances[r]||null}}(),initOn:function(e,t,r){t?typeof t=="string"&&(t=this.registered[t]):t=this.registered[e.data("widget")];if(!t)return null;var i=this.wrapElement(e,t.name);if(i){if(i.hasClass("cke_widget_new")){var s=new n(this,this._.nextId++,e,t,r);return s.isInited()?(this.instances[s.id]=s,s):null}return this.getByElement(e)}return null},initOnAll:function(e){var t=(e||this.editor.editable()).find(".cke_widget_new"),r=[],i;for(var s=t.count();s--;)i=this.initOn(t.getItem(s).getFirst(n.isDomWidgetElement)),i&&r.push(i);return r},onWidget:function(e){var t=Array.prototype.slice.call(arguments);t.shift();for(var n in this.instances){var r=this.instances[n];r.name==e&&r.on.apply(r,t)}this.on("instanceCreated",function(n){var r=n.data;r.name==e&&r.on.apply(r,t)})},parseElementClasses:function(e){if(!e)return null;e=CKEDITOR.tools.trim(e).split(/\s+/);var t,n={},r=0;while(t=e.pop())t.indexOf("cke_")==-1&&(n[t]=r=1);return r?n:null},wrapElement:function(e,t){var n=null,r,i;if(e instanceof CKEDITOR.dom.element){r=this.registered[t||e.data("widget")];if(!r)return null;n=e.getParent();if(n&&n.type==CKEDITOR.NODE_ELEMENT&&n.data("cke-widget-wrapper"))return n;e.hasAttribute("data-cke-widget-keep-attr")||e.data("cke-widget-keep-attr",e.data("widget")?1:0),t&&e.data("widget",t),i=m(r,e.getName()),n=new CKEDITOR.dom.element(i?"span":"div"),n.setAttributes(d(i)),n.data("cke-display-name",r.pathName?r.pathName:e.getName()),e.getParent(!0)&&n.replace(e),e.appendTo(n)}else if(e instanceof CKEDITOR.htmlParser.element){r=this.registered[t||e.attributes["data-widget"]];if(!r)return null;n=e.parent;if(n&&n.type==CKEDITOR.NODE_ELEMENT&&n.attributes["data-cke-widget-wrapper"])return n;"data-cke-widget-keep-attr"in e.attributes||(e.attributes["data-cke-widget-keep-attr"]=e.attributes["data-widget"]?1:0),t&&(e.attributes["data-widget"]=t),i=m(r,e.name),n=new CKEDITOR.htmlParser.element(i?"span":"div",d(i)),n.attributes["data-cke-display-name"]=r.pathName?r.pathName:e.name;var s=e.parent,o;s&&(o=e.getIndex(),e.remove()),n.add(e),s&&v(s,o,n)}return n},_tests_createEditableFilter:c},CKEDITOR.event.implementOn(t.prototype),n.prototype={addClass:function(e){this.element.addClass(e)},applyStyle:function(e){D(this,e,1)},checkStyleActive:function(e){var t=B(e),n;if(!t)return!1;while(n=t.pop())if(!this.hasClass(n))return!1;return!0},destroy:function(e){this.fire("destroy");if(this.editables)for(var t in this.editables)this.destroyEditable(t,e);e||(this.element.data("cke-widget-keep-attr")=="0"&&this.element.removeAttribute("data-widget"),this.element.removeAttributes(["data-cke-widget-data","data-cke-widget-keep-attr"]),this.element.removeClass("cke_widget_element"),this.element.replace(this.wrapper)),this.wrapper=null},destroyEditable:function(e,t){var n=this.editables[e];n.removeListener("focus",F),n.removeListener("blur",j),this.editor.focusManager.remove(n),t||(this.repository.destroyAll(!1,n),n.removeClass("cke_widget_editable"),n.removeClass("cke_widget_editable_focused"),n.removeAttributes(["contenteditable","data-cke-widget-editable","data-cke-enter-mode"])),delete this.editables[e]},edit:function(){var e={dialog:this.dialog},t=this;return this.fire("edit",e)===!1||!e.dialog?!1:(this.editor.openDialog(e.dialog,function(e){var n,r;if(t.fire("dialog",e)===!1)return;n=e.on("show",function(){e.setupContent(t)}),r=e.on("ok",function(){var n,r=t.on("data",function(e){n=1,e.cancel()},null,null,0);t.editor.fire("saveSnapshot"),e.commitContent(t),r.removeListener(),n&&(t.fire("data",t.data),t.editor.fire("saveSnapshot"))}),e.once("hide",function(){n.removeListener(),r.removeListener()})}),!0)},getClasses:function(){return this.repository.parseElementClasses(this.element.getAttribute("class"))},hasClass:function(e){return this.element.hasClass(e)},initEditable:function(e,t){var n=this._findOneNotNested(t.selector);return n&&n.is(CKEDITOR.dtd.$editable)?(n=new r(this.editor,n,{filter:c.call(this.repository,this.name,e,t)}),this.editables[e]=n,n.setAttributes({contenteditable:"true","data-cke-widget-editable":e,"data-cke-enter-mode":n.enterMode}),n.filter&&n.data("cke-filter",n.filter.id),n.addClass("cke_widget_editable"),n.removeClass("cke_widget_editable_focused"),t.pathName&&n.data("cke-display-name",t.pathName),this.editor.focusManager.add(n),n.on("focus",F,this),CKEDITOR.env.ie&&n.on("blur",j,this),n._.initialSetData=!0,n.setData(n.getHtml()),!0):!1},_findOneNotNested:function(e){var t=this.wrapper.find(e),r,i;for(var s=0;s<t.count();s++){r=t.getItem(s),i=r.getAscendant(n.isDomWidgetWrapper);if(this.wrapper.equals(i))return r}return null},isInited:function(){return!!this.wrapper&&!!this.inited},isReady:function(){return this.isInited()&&this.ready},focus:function(){var e=this.editor.getSelection();if(e){var t=this.editor.checkDirty();e.fake(this.wrapper),!t&&this.editor.resetDirty()}this.editor.focus()},removeClass:function(e){this.element.removeClass(e)},removeStyle:function(e){D(this,e,0)},setData:function(e,t){var n=this.data,r=0;if(typeof e=="string")n[e]!==t&&(n[e]=t,r=1);else{var i=e;for(e in i)n[e]!==i[e]&&(r=1,n[e]=i[e])}return r&&this.dataReady&&(K(this),this.fire("data",n)),this},setFocused:function(e){return this.wrapper[e?"addClass":"removeClass"]("cke_widget_focused"),this.fire(e?"focus":"blur"),this},setSelected:function(e){return this.wrapper[e?"addClass":"removeClass"]("cke_widget_selected"),this.fire(e?"select":"deselect"),this},updateDragHandlerPosition:function(){var t=this.editor,n=this.element.$,r=this._.dragHandlerOffset,i={x:n.offsetLeft,y:n.offsetTop-e};if(r&&i.x==r.x&&i.y==r.y)return;var s=t.checkDirty();t.fire("lockSnapshot"),this.dragHandlerContainer.setStyles({top:i.y+"px",left:i.x+"px",display:"block"}),t.fire("unlockSnapshot"),!s&&t.resetDirty(),this._.dragHandlerOffset=i}},CKEDITOR.event.implementOn(n.prototype),n.getNestedEditable=function(e,t){return!t||t.equals(e)?null:n.isDomNestedEditable(t)?t:n.getNestedEditable(e,t.getParent())},n.isDomDragHandler=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("data-cke-widget-drag-handler")},n.isDomDragHandlerContainer=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasClass("cke_widget_drag_handler_container")},n.isDomNestedEditable=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("data-cke-widget-editable")},n.isDomWidgetElement=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("data-widget")},n.isDomWidgetWrapper=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("data-cke-widget-wrapper")},n.isParserWidgetElement=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&!!e.attributes["data-widget"]},n.isParserWidgetWrapper=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&!!e.attributes["data-cke-widget-wrapper"]},r.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.dom.element.prototype),{setData:function(e){this._.initialSetData||this.editor.widgets.destroyAll(!1,this),this._.initialSetData=!1,e=this.editor.dataProcessor.toHtml(e,{context:this.getName(),filter:this.filter,enterMode:this.enterMode}),this.setHtml(e),this.editor.widgets.initOnAll(this)},getData:function(){return this.editor.dataProcessor.toDataFormat(this.getHtml(),{context:this.getName(),filter:this.filter,enterMode:this.enterMode})}});var E=new RegExp('^(?:<(?:div|span)(?: data-cke-temp="1")?(?: id="cke_copybin")?(?: data-cke-temp="1")?>)?(?:<(?:div|span)(?: style="[^"]+")?>)?<span [^>]*data-cke-copybin-start="1"[^>]*>.?</span>([\\s\\S]+)<span [^>]*data-cke-copybin-end="1"[^>]*>.?</span>(?:</(?:div|span)>)?(?:</(?:div|span)>)?$',"i"),_={37:1,38:1,39:1,40:1,8:1,46:1};(function(){function e(){}function t(e,t,n){if(!n)return!1;if(!this.checkElement(e))return!1;var r=n.widgets.getByElement(e,!0);return r&&r.checkStyleActive(this)}CKEDITOR.style.addCustomHandler({type:"widget",setup:function(e){this.widget=e.widget},apply:function(e){if(!(e instanceof CKEDITOR.editor))return;this.checkApplicable(e.elementPath(),e)&&e.widgets.focused.applyStyle(this)},remove:function(e){if(!(e instanceof CKEDITOR.editor))return;this.checkApplicable(e.elementPath(),e)&&e.widgets.focused.removeStyle(this)},checkActive:function(e,t){return this.checkElementMatch(e.lastElement,0,t)},checkApplicable:function(e,t){return t instanceof CKEDITOR.editor?this.checkElement(e.lastElement):!1},checkElementMatch:t,checkElementRemovable:t,checkElement:function(e){if(!n.isDomWidgetWrapper(e))return!1;var t=e.getFirst(n.isDomWidgetElement);return t&&t.data("widget")==this.widget},buildPreview:function(e){return e||this._.definition.name},toAllowedContentRules:function(e){if(!e)return null;var t=e.widgets.registered[this.widget],n,r={};return t?t.styleableElements?(n=this.getClassesArray(),n?(r[t.styleableElements]={classes:n,propertiesOnly:!0},r):null):t.styleToAllowedContentRules?t.styleToAllowedContentRules(this):null:null},getClassesArray:function(){var e=this._.definition.attributes&&this._.definition.attributes["class"];return e?CKEDITOR.tools.trim(e).split(/\s+/):null},applyToRange:e,removeFromRange:e,applyToObject:e})})(),CKEDITOR.plugins.widget=n,n.repository=t,n.nestedEditable=r}(),CKEDITOR.plugins.setLang("widget","zh-cn",{move:"点击并拖拽以移动"}),"use strict",function(){function e(e,t){CKEDITOR.tools.extend(this,{editor:e,editable:e.editable(),doc:e.document,win:e.window},t,!0),this.inline=this.editable.isInline(),this.inline||(this.frame=this.win.getFrame()),this.target=this[this.inline?"editable":"doc"]}function t(e,t){CKEDITOR.tools.extend(this,t,{editor:e},!0)}function s(e,t){var s=e.editable();CKEDITOR.tools.extend(this,{editor:e,editable:s,inline:s.isInline(),doc:e.document,win:e.window,container:CKEDITOR.document.getBody(),winTop:CKEDITOR.document.getWindow()},t,!0),this.hidden={},this.visible={},this.inline||(this.frame=this.win.getFrame()),this.queryViewport();var o=CKEDITOR.tools.bind(this.queryViewport,this),u=CKEDITOR.tools.bind(this.hideVisible,this),a=CKEDITOR.tools.bind(this.removeAll,this);s.attachListener(this.winTop,"resize",o),s.attachListener(this.winTop,"scroll",o),s.attachListener(this.winTop,"resize",u),s.attachListener(this.win,"scroll",u),s.attachListener(this.inline?s:this.frame,"mouseout",function(e){var t=e.data.$.clientX,n=e.data.$.clientY;this.queryViewport(),(t<=this.rect.left||t>=this.rect.right||n<=this.rect.top||n>=this.rect.bottom)&&this.hideVisible(),(t<=0||t>=this.winTopPane.width||n<=0||n>=this.winTopPane.height)&&this.hideVisible()},this),s.attachListener(e,"resize",o),s.attachListener(e,"mode",a),e.on("destroy",a),this.lineTpl=(new CKEDITOR.template(i)).output({lineStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},r,this.lineStyle,!0)),tipLeftStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},n,{left:"0px","border-left-color":"red","border-width":"6px 0 6px 6px"},this.tipCss,this.tipLeftStyle,!0)),tipRightStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},n,{right:"0px","border-right-color":"red","border-width":"6px 6px 6px 0"},this.tipCss,this.tipRightStyle,!0))})}function o(e,t){return e&t}function f(e){return e&&e.type==CKEDITOR.NODE_ELEMENT}function l(e){return!!u[e.getComputedStyle("float")]||!!u[e.getAttribute("align")]}function c(e){return!!a[e.getComputedStyle("position")]}function h(e){return f(e)&&e.getAttribute("contenteditable")=="true"}function p(e){return f(e)&&!l(e)&&!c(e)}CKEDITOR.plugins.add("lineutils"),CKEDITOR.LINEUTILS_BEFORE=1,CKEDITOR.LINEUTILS_AFTER=2,CKEDITOR.LINEUTILS_INSIDE=4,e.prototype={start:function(e){var t=this,n=this.editor,r=this.doc,i,s,o,u,a=CKEDITOR.tools.eventsBuffer(50,function(){if(n.readOnly||n.mode!="wysiwyg")return;t.relations={};if(!(s=r.$.elementFromPoint(o,u))||!s.nodeType)return;i=new CKEDITOR.dom.element(s),t.traverseSearch(i),isNaN(o+u)||t.pixelSearch(i,o,u),e&&e(t.relations,o,u)});this.listener=this.editable.attachListener(this.target,"mousemove",function(e){o=e.data.$.clientX,u=e.data.$.clientY,a.input()}),this.editable.attachListener(this.inline?this.editable:this.frame,"mouseout",function(){a.reset()})},stop:function(){this.listener&&this.listener.removeListener()},getRange:function(){var e={};return e[CKEDITOR.LINEUTILS_BEFORE]=CKEDITOR.POSITION_BEFORE_START,e[CKEDITOR.LINEUTILS_AFTER]=CKEDITOR.POSITION_AFTER_END,e[CKEDITOR.LINEUTILS_INSIDE]=CKEDITOR.POSITION_AFTER_START,function(t){var n=this.editor.createRange();return n.moveToPosition(this.relations[t.uid].element,e[t.type]),n}}(),store:function(){function e(e,t,n){var r=e.getUniqueId();r in n?n[r].type|=t:n[r]={element:e,type:t}}return function(t,n){var r;o(n,CKEDITOR.LINEUTILS_AFTER)&&p(r=t.getNext())&&r.isVisible()&&(e(r,CKEDITOR.LINEUTILS_BEFORE,this.relations),n^=CKEDITOR.LINEUTILS_AFTER),o(n,CKEDITOR.LINEUTILS_INSIDE)&&p(r=t.getFirst())&&r.isVisible()&&(e(r,CKEDITOR.LINEUTILS_BEFORE,this.relations),n^=CKEDITOR.LINEUTILS_INSIDE),e(t,n,this.relations)}}(),traverseSearch:function(e){var t,n,r;do{r=e.$["data-cke-expando"];if(r&&r in this.relations)continue;if(e.equals(this.editable))return;if(p(e))for(t in this.lookups)(n=this.lookups[t](e))&&this.store(e,n)}while(!h(e)&&(e=e.getParent()))},pixelSearch:function(){function t(t,n,r,i,s){var o=r,u=0,a;while(s(o)){o+=i;if(++u==25)return;a=this.doc.$.elementFromPoint(n,o);if(!a)continue;if(a==t){u=0;continue}if(!e(t,a))continue;u=0;if(p(a=new CKEDITOR.dom.element(a)))return a}}var e=CKEDITOR.env.ie||CKEDITOR.env.webkit?function(e,t){return e.contains(t)}:function(e,t){return!!(e.compareDocumentPosition(t)&16)};return function(e,n,r){var i=this.win.getViewPaneSize().height,s=t.call(this,e.$,n,r,-1,function(e){return e>0}),o=t.call(this,e.$,n,r,1,function(e){return e<i});if(s){this.traverseSearch(s);while(!s.getParent().equals(e))s=s.getParent()}if(o){this.traverseSearch(o);while(!o.getParent().equals(e))o=o.getParent()}while(s||o){s&&(s=s.getNext(p));if(!s||s.equals(o))break;this.traverseSearch(s),o&&(o=o.getPrevious(p));if(!o||o.equals(s))break;this.traverseSearch(o)}}}(),greedySearch:function(){this.relations={};var e=this.editable.getElementsByTag("*"),t=0,n,r,i;while(n=e.getItem(t++)){if(n.equals(this.editable))continue;if(n.type!=CKEDITOR.NODE_ELEMENT)continue;if(!n.hasAttribute("contenteditable")&&n.isReadOnly())continue;if(p(n)&&n.isVisible())for(i in this.lookups)(r=this.lookups[i](n))&&this.store(n,r)}return this.relations}},t.prototype={locate:function(){function e(e,t){var n=e.element[t===CKEDITOR.LINEUTILS_BEFORE?"getPrevious":"getNext"]();return n&&p(n)?(e.siblingRect=n.getClientRect(),t==CKEDITOR.LINEUTILS_BEFORE?(e.siblingRect.bottom+e.elementRect.top)/2:(e.elementRect.bottom+e.siblingRect.top)/2):t==CKEDITOR.LINEUTILS_BEFORE?e.elementRect.top:e.elementRect.bottom}return function(t){var n;this.locations={};for(var r in t)n=t[r],n.elementRect=n.element.getClientRect(),o(n.type,CKEDITOR.LINEUTILS_BEFORE)&&this.store(r,CKEDITOR.LINEUTILS_BEFORE,e(n,CKEDITOR.LINEUTILS_BEFORE)),o(n.type,CKEDITOR.LINEUTILS_AFTER)&&this.store(r,CKEDITOR.LINEUTILS_AFTER,e(n,CKEDITOR.LINEUTILS_AFTER)),o(n.type,CKEDITOR.LINEUTILS_INSIDE)&&this.store(r,CKEDITOR.LINEUTILS_INSIDE,(n.elementRect.top+n.elementRect.bottom)/2);return this.locations}}(),sort:function(){function i(t,n,r){return Math.abs(t-e[n][r])}var e,t,n,r;return function(s,o){e=this.locations,t=[];for(var u in e)for(var a in e[u]){n=i(s,u,a);if(!t.length)t.push({uid:+u,type:a,dist:n});else{for(r=0;r<t.length;r++)if(n<t[r].dist){t.splice(r,0,{uid:+u,type:a,dist:n});break}r==t.length&&t.push({uid:+u,type:a,dist:n})}}return typeof o!="undefined"?t.slice(0,o):t}}(),store:function(e,t,n){this.locations[e]||(this.locations[e]={}),this.locations[e][t]=n}};var n={display:"block",width:"0px",height:"0px","border-color":"transparent","border-style":"solid",position:"absolute",top:"-6px"},r={height:"0px","border-top":"1px dashed red",position:"absolute","z-index":9999},i='<div data-cke-lineutils-line="1" class="cke_reset_all" style="{lineStyle}"><span style="{tipLeftStyle}">&nbsp;</span><span style="{tipRightStyle}">&nbsp;</span></div>';s.prototype={removeAll:function(){var e;for(e in this.hidden)this.hidden[e].remove(),delete this.hidden[e];for(e in this.visible)this.visible[e].remove(),delete this.visible[e]},hideLine:function(e){var t=e.getUniqueId();e.hide(),this.hidden[t]=e,delete this.visible[t]},showLine:function(e){var t=e.getUniqueId();e.show(),this.visible[t]=e,delete this.hidden[t]},hideVisible:function(){for(var e in this.visible)this.hideLine(this.visible[e])},placeLine:function(e,t){var n,r,i;if(!(n=this.getStyle(e.uid,e.type)))return;for(i in this.visible)if(this.visible[i].getCustomData("hash")!==this.hash){r=this.visible[i];break}if(!r)for(i in this.hidden)if(this.hidden[i].getCustomData("hash")!==this.hash){this.showLine(r=this.hidden[i]);break}r||this.showLine(r=this.addLine()),r.setCustomData("hash",this.hash),this.visible[r.getUniqueId()]=r,r.setStyles(n),t&&t(r)},getStyle:function(e,t){var n=this.relations[e],r=this.locations[e][t],i={},s;n.siblingRect?i.width=Math.max(n.siblingRect.width,n.elementRect.width):i.width=n.elementRect.width,this.inline?i.top=r+this.winTopScroll.y-this.rect.relativeY:i.top=this.rect.top+this.winTopScroll.y+r;if(i.top-this.winTopScroll.y<this.rect.top||i.top-this.winTopScroll.y>this.rect.bottom)return!1;this.inline?i.left=n.elementRect.left-this.rect.relativeX:(n.elementRect.left>0?i.left=this.rect.left+n.elementRect.left:(i.width+=n.elementRect.left,i.left=this.rect.left),(s=i.left+i.width-(this.rect.left+this.winPane.width))>0&&(i.width-=s)),i.left+=this.winTopScroll.x;for(var o in i)i[o]=CKEDITOR.tools.cssLength(i[o]);return i},addLine:function(){var e=CKEDITOR.dom.element.createFromHtml(this.lineTpl);return e.appendTo(this.container),e},prepare:function(e,t){this.relations=e,this.locations=t,this.hash=Math.random()},cleanup:function(){var e;for(var t in this.visible)e=this.visible[t],e.getCustomData("hash")!==this.hash&&this.hideLine(e)},queryViewport:function(){this.winPane=this.win.getViewPaneSize(),this.winTopScroll=this.winTop.getScrollPosition(),this.winTopPane=this.winTop.getViewPaneSize(),this.rect=this.getClientRect(this.inline?this.editable:this.frame)},getClientRect:function(e){var t=e.getClientRect(),n=this.container.getDocumentPosition(),r=this.container.getComputedStyle("position");return t.relativeX=t.relativeY=0,r!="static"&&(t.relativeY=n.y,t.relativeX=n.x,t.top-=t.relativeY,t.bottom-=t.relativeY,t.left-=t.relativeX,t.right-=t.relativeX),t}};var u={left:1,right:1,center:1},a={absolute:1,fixed:1};CKEDITOR.plugins.lineutils={finder:e,locator:t,liner:s}}(),function(){var e;e=CKEDITOR.config,e.customConfig="",e.language="zh-cn",e.uiColor="#FFFFFF",e.title=!1,e.toolbar=[{name:"styles",items:["FontSize","Bold","Italic","Underline","-","TextColor","BGColor","-","RemoveFormat"]},{name:"paragraph",items:["NumberedList","BulletedList","-","Outdent","Indent"]},{name:"insert",items:["Link","Unlink","Image"]},{name:"document",items:["Maximize"]}],e.resize_enabled=!1,e.dialog_backgroundCoverColor="rgba(0, 0, 0, 0.2)",e.dialog_backgroundCoverOpacity=1,e.fontSize_sizes="12/1.000em;14/1.167em;16/1.333em;18/1.500em;20/1.667em;22/1.833em",e.colorButton_enableMore=!1,e.dialog_noConfirmCancel=!0,e.dialog_buttonsOrder="ltr",e.extraPlugins="divarea,autogrow,gdimage,gdlink,placeholder,confighelper",e.autoGrow_onStartup=!0,e.autoGrow_minHeight=100,e.autoGrow_maxHeight=600,e.autoGrow_bottomSpace=10,e.pasteFilter=null,e.allowedContent={$1:{elements:CKEDITOR.dtd,attributes:!0,styles:!0,classes:!0}},e.disallowedContent="script; *[on*]; iframe",e.removePlugins="elementspath,resize,link"}.call(this),function(){GD.initCKEditor=function(e,t){return t||(t={}),e.ckeditor(function(t){return this.on("change",function(t){return e.trigger("change")}),this.on("mode",function(e){if(e.editor.mode==="source")return autosize($(e.editor.container.$).find("textarea"))}),this.on("maximize",function(e){return e.data===CKEDITOR.TRISTATE_ON?$(document).off("keyup.gd.cke.esc").on("keyup.gd.cke.esc",function(t){if(t.keyCode===27)return e.editor.execCommand("maximize")}):$(document).off("keyup.gd.cke.esc")})},t)},GD.miniCKEditorToolbar=[{name:"styles",items:["FontSize","Bold","Italic","Underline","TextColor","RemoveFormat"]},{name:"insert",items:["Link","Image"]},{name:"document",items:["Maximize"]}],$(document).on("focusin",".cke_dialog",function(e){return e.stopImmediatePropagation()})}.call(this),function(e,t,n,r){"use strict";function l(e,t,n){return setTimeout(m(e,n),t)}function c(e,t,n){return Array.isArray(e)?(h(e,n[t],n),!0):!1}function h(e,t,n){var i;if(!e)return;if(e.forEach)e.forEach(t,n);else if(e.length!==r){i=0;while(i<e.length)t.call(n,e[i],i,e),i++}else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)}function p(e,t,n){var i=Object.keys(t),s=0;while(s<i.length){if(!n||n&&e[i[s]]===r)e[i[s]]=t[i[s]];s++}return e}function d(e,t){return p(e,t,!0)}function v(e,t,n){var r=t.prototype,i;i=e.prototype=Object.create(r),i.constructor=e,i._super=r,n&&p(i,n)}function m(e,t){return function(){return e.apply(t,arguments)}}function g(e,t){return typeof e==o?e.apply(t?t[0]||r:r,t):e}function y(e,t){return e===r?t:e}function b(e,t,n){h(x(t),function(t){e.addEventListener(t,n,!1)})}function w(e,t,n){h(x(t),function(t){e.removeEventListener(t,n,!1)})}function E(e,t){while(e){if(e==t)return!0;e=e.parentNode}return!1}function S(e,t){return e.indexOf(t)>-1}function x(e){return e.trim().split(/\s+/g)}function T(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);var r=0;while(r<e.length){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function N(e){return Array.prototype.slice.call(e,0)}function C(e,t,n){var r=[],i=[],s=0;while(s<e.length){var o=t?e[s][t]:e[s];T(i,o)<0&&r.push(e[s]),i[s]=o,s++}return n&&(t?r=r.sort(function(n,r){return n[t]>r[t]}):r=r.sort()),r}function k(e,t){var n,s,o=t[0].toUpperCase()+t.slice(1),u=0;while(u<i.length){n=i[u],s=n?n+o:t;if(s in e)return s;u++}return r}function A(){return L++}function O(e){var t=e.ownerDocument;return t.defaultView||t.parentWindow}function et(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){g(e.options.enable,[e])&&n.handler(t)},this.init()}function tt(e){var t,n=e.options.inputClass;return n?t=n:D?t=St:P?t=Ot:_?t=_t:t=gt,new t(e,nt)}function nt(e,t,n){var r=n.pointers.length,i=n.changedPointers.length,s=t&q&&r-i===0,o=t&(U|z)&&r-i===0;n.isFirst=!!s,n.isFinal=!!o,s&&(e.session={}),n.eventType=t,rt(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function rt(e,t){var n=e.session,r=t.pointers,i=r.length;n.firstInput||(n.firstInput=ot(t)),i>1&&!n.firstMultiple?n.firstMultiple=ot(t):i===1&&(n.firstMultiple=!1);var s=n.firstInput,o=n.firstMultiple,u=o?o.center:s.center,a=t.center=ut(r);t.timeStamp=f(),t.deltaTime=t.timeStamp-s.timeStamp,t.angle=ct(u,a),t.distance=lt(u,a),it(n,t),t.offsetDirection=ft(t.deltaX,t.deltaY),t.scale=o?pt(o.pointers,r):1,t.rotation=o?ht(o.pointers,r):0,st(n,t);var l=e.element;E(t.srcEvent.target,l)&&(l=t.srcEvent.target),t.target=l}function it(e,t){var n=t.center,r=e.offsetDelta||{},i=e.prevDelta||{},s=e.prevInput||{};if(t.eventType===q||s.eventType===U)i=e.prevDelta={x:s.deltaX||0,y:s.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y};t.deltaX=i.x+(n.x-r.x),t.deltaY=i.y+(n.y-r.y)}function st(e,t){var n=e.lastInterval||t,i=t.timeStamp-n.timeStamp,s,o,u,f;if(t.eventType!=z&&(i>I||n.velocity===r)){var l=n.deltaX-t.deltaX,c=n.deltaY-t.deltaY,h=at(i,l,c);o=h.x,u=h.y,s=a(h.x)>a(h.y)?h.x:h.y,f=ft(l,c),e.lastInterval=t}else s=n.velocity,o=n.velocityX,u=n.velocityY,f=n.direction;t.velocity=s,t.velocityX=o,t.velocityY=u,t.direction=f}function ot(e){var t=[],n=0;while(n<e.pointers.length)t[n]={clientX:u(e.pointers[n].clientX)
,clientY:u(e.pointers[n].clientY)},n++;return{timeStamp:f(),pointers:t,center:ut(t),deltaX:e.deltaX,deltaY:e.deltaY}}function ut(e){var t=e.length;if(t===1)return{x:u(e[0].clientX),y:u(e[0].clientY)};var n=0,r=0,i=0;while(i<t)n+=e[i].clientX,r+=e[i].clientY,i++;return{x:u(n/t),y:u(r/t)}}function at(e,t,n){return{x:t/e||0,y:n/e||0}}function ft(e,t){return e===t?W:a(e)>=a(t)?e>0?X:V:t>0?$:J}function lt(e,t,n){n||(n=Y);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.sqrt(r*r+i*i)}function ct(e,t,n){n||(n=Y);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.atan2(i,r)*180/Math.PI}function ht(e,t){return ct(t[1],t[0],Z)-ct(e[1],e[0],Z)}function pt(e,t){return lt(t[0],t[1],Z)/lt(e[0],e[1],Z)}function gt(){this.evEl=vt,this.evWin=mt,this.allow=!0,this.pressed=!1,et.apply(this,arguments)}function St(){this.evEl=wt,this.evWin=Et,et.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function Ct(){this.evTarget=Tt,this.evWin=Nt,this.started=!1,et.apply(this,arguments)}function kt(e,t){var n=N(e.touches),r=N(e.changedTouches);return t&(U|z)&&(n=C(n.concat(r),"identifier",!0)),[n,r]}function Ot(){this.evTarget=At,this.targetIds={},et.apply(this,arguments)}function Mt(e,t){var n=N(e.touches),r=this.targetIds;if(t&(q|R)&&n.length===1)return r[n[0].identifier]=!0,[n,n];var i,s,o=N(e.changedTouches),u=[],a=this.target;s=n.filter(function(e){return E(e.target,a)});if(t===q){i=0;while(i<s.length)r[s[i].identifier]=!0,i++}i=0;while(i<o.length)r[o[i].identifier]&&u.push(o[i]),t&(U|z)&&delete r[o[i].identifier],i++;if(!u.length)return;return[C(s.concat(u),"identifier",!0),u]}function _t(){et.apply(this,arguments);var e=m(this.handler,this);this.touch=new Ot(this.manager,e),this.mouse=new gt(this.manager,e)}function Rt(e,t){this.manager=e,this.set(t)}function Ut(e){if(S(e,Ft))return Ft;var t=S(e,It),n=S(e,qt);return t&&n?It+" "+qt:t||n?t?It:qt:S(e,jt)?jt:Bt}function Qt(e){this.id=A(),this.manager=null,this.options=d(e||{},this.defaults),this.options.enable=y(this.options.enable,!0),this.state=zt,this.simultaneous={},this.requireFail=[]}function Gt(e){return e&Jt?"cancel":e&Vt?"end":e&Xt?"move":e&Wt?"start":""}function Yt(e){return e==J?"down":e==$?"up":e==X?"left":e==V?"right":""}function Zt(e,t){var n=t.manager;return n?n.get(e):e}function en(){Qt.apply(this,arguments)}function tn(){en.apply(this,arguments),this.pX=null,this.pY=null}function nn(){en.apply(this,arguments)}function rn(){Qt.apply(this,arguments),this._timer=null,this._input=null}function sn(){en.apply(this,arguments)}function on(){en.apply(this,arguments)}function un(){Qt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function an(e,t){return t=t||{},t.recognizers=y(t.recognizers,an.defaults.preset),new cn(e,t)}function cn(e,t){t=t||{},this.options=d(t,an.defaults),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.element=e,this.input=tt(this),this.touchAction=new Rt(this,this.options.touchAction),hn(this,!0),h(t.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function hn(e,t){var n=e.element;h(e.options.cssProps,function(e,r){n.style[k(n.style,r)]=t?e:""})}function pn(e,n){var r=t.createEvent("Event");r.initEvent(e,!0,!0),r.gesture=n,n.target.dispatchEvent(r)}var i=["","webkit","moz","MS","ms","o"],s=t.createElement("div"),o="function",u=Math.round,a=Math.abs,f=Date.now,L=1,M=/mobile|tablet|ip(ad|hone|od)|android/i,_="ontouchstart"in e,D=k(e,"PointerEvent")!==r,P=_&&M.test(navigator.userAgent),H="touch",B="pen",j="mouse",F="kinect",I=25,q=1,R=2,U=4,z=8,W=1,X=2,V=4,$=8,J=16,K=X|V,Q=$|J,G=K|Q,Y=["x","y"],Z=["clientX","clientY"];et.prototype={handler:function(){},init:function(){this.evEl&&b(this.element,this.evEl,this.domHandler),this.evTarget&&b(this.target,this.evTarget,this.domHandler),this.evWin&&b(O(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&w(this.element,this.evEl,this.domHandler),this.evTarget&&w(this.target,this.evTarget,this.domHandler),this.evWin&&w(O(this.element),this.evWin,this.domHandler)}};var dt={mousedown:q,mousemove:R,mouseup:U},vt="mousedown",mt="mousemove mouseup";v(gt,et,{handler:function(t){var n=dt[t.type];n&q&&t.button===0&&(this.pressed=!0),n&R&&t.which!==1&&(n=U);if(!this.pressed||!this.allow)return;n&U&&(this.pressed=!1),this.callback(this.manager,n,{pointers:[t],changedPointers:[t],pointerType:j,srcEvent:t})}});var yt={pointerdown:q,pointermove:R,pointerup:U,pointercancel:z,pointerout:z},bt={2:H,3:B,4:j,5:F},wt="pointerdown",Et="pointermove pointerup pointercancel";e.MSPointerEvent&&(wt="MSPointerDown",Et="MSPointerMove MSPointerUp MSPointerCancel"),v(St,et,{handler:function(t){var n=this.store,r=!1,i=t.type.toLowerCase().replace("ms",""),s=yt[i],o=bt[t.pointerType]||t.pointerType,u=o==H,a=T(n,t.pointerId,"pointerId");s&q&&(t.button===0||u)?a<0&&(n.push(t),a=n.length-1):s&(U|z)&&(r=!0);if(a<0)return;n[a]=t,this.callback(this.manager,s,{pointers:n,changedPointers:[t],pointerType:o,srcEvent:t}),r&&n.splice(a,1)}});var xt={touchstart:q,touchmove:R,touchend:U,touchcancel:z},Tt="touchstart",Nt="touchstart touchmove touchend touchcancel";v(Ct,et,{handler:function(t){var n=xt[t.type];n===q&&(this.started=!0);if(!this.started)return;var r=kt.call(this,t,n);n&(U|z)&&r[0].length-r[1].length===0&&(this.started=!1),this.callback(this.manager,n,{pointers:r[0],changedPointers:r[1],pointerType:H,srcEvent:t})}});var Lt={touchstart:q,touchmove:R,touchend:U,touchcancel:z},At="touchstart touchmove touchend touchcancel";v(Ot,et,{handler:function(t){var n=Lt[t.type],r=Mt.call(this,t,n);if(!r)return;this.callback(this.manager,n,{pointers:r[0],changedPointers:r[1],pointerType:H,srcEvent:t})}}),v(_t,et,{handler:function(t,n,r){var i=r.pointerType==H,s=r.pointerType==j;if(i)this.mouse.allow=!1;else if(s&&!this.mouse.allow)return;n&(U|z)&&(this.mouse.allow=!0),this.callback(t,n,r)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Dt=k(s.style,"touchAction"),Pt=Dt!==r,Ht="compute",Bt="auto",jt="manipulation",Ft="none",It="pan-x",qt="pan-y";Rt.prototype={set:function(e){e==Ht&&(e=this.compute()),Pt&&(this.manager.element.style[Dt]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return h(this.manager.recognizers,function(t){g(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),Ut(e.join(" "))},preventDefaults:function(e){if(Pt)return;var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented){t.preventDefault();return}var r=this.actions,i=S(r,Ft),s=S(r,qt),o=S(r,It);if(i||s&&n&K||o&&n&Q)return this.preventSrc(t)},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var zt=1,Wt=2,Xt=4,Vt=8,$t=Vt,Jt=16,Kt=32;Qt.prototype={defaults:{},set:function(e){return p(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(c(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=Zt(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return c(e,"dropRecognizeWith",this)?this:(e=Zt(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(c(e,"requireFailure",this))return this;var t=this.requireFail;return e=Zt(e,this),T(t,e)===-1&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(c(e,"dropRequireFailure",this))return this;e=Zt(e,this);var t=T(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function r(r){t.manager.emit(t.options.event+(r?Gt(n):""),e)}var t=this,n=this.state;n<Vt&&r(!0),r(),n>=Vt&&r(!0)},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=Kt},canEmit:function(){var e=0;while(e<this.requireFail.length){if(!(this.requireFail[e].state&(Kt|zt)))return!1;e++}return!0},recognize:function(e){var t=p({},e);if(!g(this.options.enable,[this,t])){this.reset(),this.state=Kt;return}this.state&($t|Jt|Kt)&&(this.state=zt),this.state=this.process(t),this.state&(Wt|Xt|Vt|Jt)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},v(en,Qt,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return t===0||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=t&(Wt|Xt),i=this.attrTest(e);if(r&&(n&z||!i))return t|Jt;if(r||i)return n&U?t|Vt:t&Wt?t|Xt:Wt;return Kt}}),v(tn,en,{defaults:{event:"pan",threshold:10,pointers:1,direction:G},getTouchAction:function(){var e=this.options.direction,t=[];return e&K&&t.push(qt),e&Q&&t.push(It),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,i=e.direction,s=e.deltaX,o=e.deltaY;return i&t.direction||(t.direction&K?(i=s===0?W:s<0?X:V,n=s!=this.pX,r=Math.abs(e.deltaX)):(i=o===0?W:o<0?$:J,n=o!=this.pY,r=Math.abs(e.deltaY))),e.direction=i,n&&r>t.threshold&&i&t.direction},attrTest:function(e){return en.prototype.attrTest.call(this,e)&&(this.state&Wt||!(this.state&Wt)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Yt(e.direction);t&&this.manager.emit(this.options.event+t,e),this._super.emit.call(this,e)}}),v(nn,en,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ft]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&Wt)},emit:function(e){this._super.emit.call(this,e);if(e.scale!==1){var t=e.scale<1?"in":"out";this.manager.emit(this.options.event+t,e)}}}),v(rn,Qt,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[Bt]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime>t.time;this._input=e;if(!r||!n||e.eventType&(U|z)&&!i)this.reset();else if(e.eventType&q)this.reset(),this._timer=l(function(){this.state=$t,this.tryEmit()},t.time,this);else if(e.eventType&U)return $t;return Kt},reset:function(){clearTimeout(this._timer)},emit:function(e){if(this.state!==$t)return;e&&e.eventType&U?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input))}}),v(sn,en,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ft]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&Wt)}}),v(on,en,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:K|Q,pointers:1},getTouchAction:function(){return tn.prototype.getTouchAction.call(this)},attrTest:function(e){var t=this.options.direction,n;return t&(K|Q)?n=e.velocity:t&K?n=e.velocityX:t&Q&&(n=e.velocityY),this._super.attrTest.call(this,e)&&t&e.direction&&e.distance>this.options.threshold&&a(n)>this.options.velocity&&e.eventType&U},emit:function(e){var t=Yt(e.direction);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),v(un,Qt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[jt]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime<t.time;this.reset();if(e.eventType&q&&this.count===0)return this.failTimeout();if(r&&i&&n){if(e.eventType!=U)return this.failTimeout();var s=this.pTime?e.timeStamp-this.pTime<t.interval:!0,o=!this.pCenter||lt(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,!o||!s?this.count=1:this.count+=1,this._input=e;var u=this.count%t.taps;if(u===0)return this.hasRequireFailures()?(this._timer=l(function(){this.state=$t,this.tryEmit()},t.interval,this),Wt):$t}return Kt},failTimeout:function(){return this._timer=l(function(){this.state=Kt},this.options.interval,this),Kt},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==$t&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),an.VERSION="2.0.4",an.defaults={domEvents:!1,touchAction:Ht,enable:!0,inputTarget:null,inputClass:null,preset:[[sn,{enable:!1}],[nn,{enable:!1},["rotate"]],[on,{direction:K}],[tn,{direction:K},["swipe"]],[un],[un,{event:"doubletap",taps:2},["tap"]],[rn]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var fn=1,ln=2;cn.prototype={set:function(e){return p(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?ln:fn},recognize:function(e){var t=this.session;if(t.stopped)return;this.touchAction.preventDefaults(e);var n,r=this.recognizers,i=t.curRecognizer;if(!i||i&&i.state&$t)i=t.curRecognizer=null;var s=0;while(s<r.length)n=r[s],t.stopped!==ln&&(!i||n==i||n.canRecognizeWith(i))?n.recognize(e):n.reset(),!i&&n.state&(Wt|Xt|Vt)&&(i=t.curRecognizer=n),s++},get:function(e){if(e instanceof Qt)return e;var t=this.recognizers;for(var n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(c(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(c(e,"remove",this))return this;var t=this.recognizers;return e=this.get(e),t.splice(T(t,e),1),this.touchAction.update(),this},on:function(e,t){var n=this.handlers;return h(x(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this},off:function(e,t){var n=this.handlers;return h(x(e),function(e){t?n[e].splice(T(n[e],t),1):delete n[e]}),this},emit:function(e,t){this.options.domEvents&&pn(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(!n||!n.length)return;t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};var r=0;while(r<n.length)n[r](t),r++},destroy:function(){this.element&&hn(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},p(an,{INPUT_START:q,INPUT_MOVE:R,INPUT_END:U,INPUT_CANCEL:z,STATE_POSSIBLE:zt,STATE_BEGAN:Wt,STATE_CHANGED:Xt,STATE_ENDED:Vt,STATE_RECOGNIZED:$t,STATE_CANCELLED:Jt,STATE_FAILED:Kt,DIRECTION_NONE:W,DIRECTION_LEFT:X,DIRECTION_RIGHT:V,DIRECTION_UP:$,DIRECTION_DOWN:J,DIRECTION_HORIZONTAL:K,DIRECTION_VERTICAL:Q,DIRECTION_ALL:G,Manager:cn,Input:et,TouchAction:Rt,TouchInput:Ot,MouseInput:gt,PointerEventInput:St,TouchMouseInput:_t,SingleTouchInput:Ct,Recognizer:Qt,AttrRecognizer:en,Tap:un,Pan:tn,Swipe:on,Pinch:nn,Rotate:sn,Press:rn,on:b,off:w,each:h,merge:d,extend:p,inherit:v,bindFn:m,prefixed:k}),typeof define==o&&define.amd?define(function(){return an}):typeof module!="undefined"&&module.exports?module.exports=an:e[n]=an}(window,document,"Hammer"),function(e,t){typeof define=="function"&&define.amd?define(["jquery"],t):typeof exports=="object"?module.exports=t(require("jquery")):e.GD.lightbox=t(e.jQuery)}(this,function(e){function t(t){this.album=[],this.currentImageIndex=void 0,this.init(),this.options=e.extend({},this.constructor.defaults),this.option(t)}return t.defaults={albumLabel:"Image %1 of %2",alwaysShowNavOnTouchDevices:!1,fadeDuration:500,fitImagesInViewport:!0,positionFromTop:50,resizeDuration:700,showImageNumberLabel:!0,wrapAround:!1},t.prototype.option=function(t){e.extend(this.options,t)},t.prototype.imageCountLabel=function(e,t){return this.options.albumLabel.replace(/%1/g,e).replace(/%2/g,t)},t.prototype.init=function(){this.enable(),this.build()},t.prototype.enable=function(){var t=this;e("body").on("click","a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]",function(n){return t.start(e(n.currentTarget)),!1})},t.prototype.build=function(){var t=this;e('<div id="lightboxOverlay" class="lightboxOverlay"></div><div id="lightbox" class="lightbox"><div class="lb-outerContainer"><div class="lb-container"><img class="lb-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" /><div class="lb-nav"><a class="lb-prev" href="" ></a><a class="lb-next" href="" ></a></div><div class="lb-loader"><a class="lb-cancel"></a></div></div></div><div class="lb-dataContainer"><div class="lb-data"><div class="lb-details"><span class="lb-caption"></span><span class="lb-number"></span></div><div class="lb-closeContainer"><a class="lb-close"></a></div></div></div></div>').appendTo(e("body")),this.$lightbox=e("#lightbox"),this.$overlay=e("#lightboxOverlay"),this.$outerContainer=this.$lightbox.find(".lb-outerContainer"),this.$container=this.$lightbox.find(".lb-container"),this.containerTopPadding=parseInt(this.$container.css("padding-top"),10),this.containerRightPadding=parseInt(this.$container.css("padding-right"),10),this.containerBottomPadding=parseInt(this.$container.css("padding-bottom"),10),this.containerLeftPadding=parseInt(this.$container.css("padding-left"),10),this.$overlay.hide().on("click",function(){return t.end(),!1}),this.$lightbox.hide().on("click",function(n){return e(n.target).attr("id")==="lightbox"&&t.end(),!1}),this.$outerContainer.on("click",function(n){return e(n.target).attr("id")==="lightbox"&&t.end(),!1}),this.$lightbox.find(".lb-prev").on("click",function(){return t.currentImageIndex===0?t.changeImage(t.album.length-1):t.changeImage(t.currentImageIndex-1),!1}),this.$lightbox.find(".lb-next").on("click",function(){return t.currentImageIndex===t.album.length-1?t.changeImage(0):t.changeImage(t.currentImageIndex+1),!1}),this.$lightbox.find(".lb-loader, .lb-close").on("click",function(){return t.end(),!1})},t.prototype.start=function(t){function s(e){n.album.push({link:e.attr("href"),title:e.attr("data-title")||e.attr("title")})}var n=this,r=e(window);r.on("resize",e.proxy(this.sizeOverlay,this)),e("/*select, */object, embed").css({visibility:"hidden"}),this.sizeOverlay(),this.album=[];var i=0,o=t.attr("data-lightbox"),u;if(o){u=e(t.prop("tagName")+'[data-lightbox="'+o+'"]');for(var a=0;a<u.length;a=++a)s(e(u[a])),u[a]===t[0]&&(i=a)}else if(t.attr("rel")==="lightbox")s(t);else{u=e(t.prop("tagName")+'[rel="'+t.attr("rel")+'"]');for(var f=0;f<u.length;f=++f)s(e(u[f])),u[f]===t[0]&&(i=f)}var l=r.scrollTop()+this.options.positionFromTop,c=r.scrollLeft();this.$lightbox.css({top:l+"px",left:c+"px"}).fadeIn(this.options.fadeDuration),this.changeImage(i)},t.prototype.changeImage=function(t){var n=this;this.disableKeyboardNav();var r=this.$lightbox.find(".lb-image");this.$overlay.fadeIn(this.options.fadeDuration),e(".lb-loader").fadeIn("slow"),this.$lightbox.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide(),this.$outerContainer.addClass("animating");var i=new Image;i.onload=function(){var s,o,u,a,f,l,c;r.attr("src",n.album[t].link),s=e(i),r.width(i.width),r.height(i.height);if(n.options.fitImagesInViewport){c=e(window).width(),l=e(window).height(),f=c-n.containerLeftPadding-n.containerRightPadding-20,a=l-n.containerTopPadding-n.containerBottomPadding-120,n.options.maxWidth&&n.options.maxWidth<f&&(f=n.options.maxWidth),n.options.maxHeight&&n.options.maxHeight<f&&(a=n.options.maxHeight);if(i.width>f||i.height>a)i.width/f>i.height/a?(u=f,o=parseInt(i.height/(i.width/u),10),r.width(u),r.height(o)):(o=a,u=parseInt(i.width/(i.height/o),10),r.width(u),r.height(o))}n.sizeContainer(r.width(),r.height())},i.src=this.album[t].link,this.currentImageIndex=t},t.prototype.sizeOverlay=function(){this.$overlay.width(e(window).width()).height(e(document).height())},t.prototype.sizeContainer=function(e,t){function u(){n.$lightbox.find(".lb-dataContainer").width(s),n.$lightbox.find(".lb-prevLink").height(o),n.$lightbox.find(".lb-nextLink").height(o),n.showImage()}var n=this,r=this.$outerContainer.outerWidth(),i=this.$outerContainer.outerHeight(),s=e+this.containerLeftPadding+this.containerRightPadding,o=t+this.containerTopPadding+this.containerBottomPadding;r!==s||i!==o?this.$outerContainer.animate({width:s,height:o},this.options.resizeDuration,"swing",function(){u()}):u()},t.prototype.showImage=function(){this.$lightbox.find(".lb-loader").stop(!0).hide(),this.$lightbox.find(".lb-image").fadeIn("slow"),this.updateNav(),this.updateDetails(),this.preloadNeighboringImages(),this.enableKeyboardNav()},t.prototype.updateNav=function(){var e=!1;try{document.createEvent("TouchEvent"),e=this.options.alwaysShowNavOnTouchDevices?!0:!1}catch(t){}this.$lightbox.find(".lb-nav").show(),this.album.length>1&&(this.options.wrapAround?(e&&this.$lightbox.find(".lb-prev, .lb-next").css("opacity","1"),this.$lightbox.find(".lb-prev, .lb-next").show()):(this.currentImageIndex>0&&(this.$lightbox.find(".lb-prev").show(),e&&this.$lightbox.find(".lb-prev").css("opacity","1")),this.currentImageIndex<this.album.length-1&&(this.$lightbox.find(".lb-next").show(),e&&this.$lightbox.find(".lb-next").css("opacity","1"))))},t.prototype.updateDetails=function(){var t=this;typeof this.album[this.currentImageIndex].title!="undefined"&&this.album[this.currentImageIndex].title!==""&&this.$lightbox.find(".lb-caption").html(this.album[this.currentImageIndex].title).fadeIn("fast").find("a").on("click",function(t){e(this).attr("target")!==undefined?window.open(e(this).attr("href"),e(this).attr("target")):location.href=e(this).attr("href")});if(this.album.length>1&&this.options.showImageNumberLabel){var n=this.imageCountLabel(this.currentImageIndex+1,this.album.length);this.$lightbox.find(".lb-number").text(n).fadeIn("fast")}else this.$lightbox.find(".lb-number").hide();this.$outerContainer.removeClass("animating"),this.$lightbox.find(".lb-dataContainer").fadeIn(this.options.resizeDuration,function(){return t.sizeOverlay()})},t.prototype.preloadNeighboringImages=function(){if(this.album.length>this.currentImageIndex+1){var e=new Image;e.src=this.album[this.currentImageIndex+1].link}if(this.currentImageIndex>0){var t=new Image;t.src=this.album[this.currentImageIndex-1].link}},t.prototype.enableKeyboardNav=function(){e(document).on("keyup.keyboard",e.proxy(this.keyboardAction,this))},t.prototype.disableKeyboardNav=function(){e(document).off(".keyboard")},t.prototype.keyboardAction=function(e){var t=27,n=37,r=39,i=e.keyCode,s=String.fromCharCode(i).toLowerCase();if(i===t||s.match(/x|o|c/))this.end();else if(s==="p"||i===n)this.currentImageIndex!==0?this.changeImage(this.currentImageIndex-1):this.options.wrapAround&&this.album.length>1&&this.changeImage(this.album.length-1);else if(s==="n"||i===r)this.currentImageIndex!==this.album.length-1?this.changeImage(this.currentImageIndex+1):this.options.wrapAround&&this.album.length>1&&this.changeImage(0)},t.prototype.end=function(){this.disableKeyboardNav(),e(window).off("resize",this.sizeOverlay),this.$lightbox.fadeOut(this.options.fadeDuration),this.$overlay.fadeOut(this.options.fadeDuration),e("select, object, embed").css({visibility:"visible"})},new t}),function(){GD.lightbox.option({fadeDuration:200,resizeDuration:100}),GD.initLightbox=function(){return $(".lightbox-image-link").each(function(){var e,t;e=$(this).find(".image-loading"),t=e.data("url");if(t)return $(this).append("<img src="+t+" class='hide'>"),$(this).find("img").load(function(){return $(this).removeClass("hide"),e.remove()})}),$("#lightboxOverlay").length===0?GD.lightbox.init():GD.lightbox.enable()},$(document).on("page:load ready",function(){return GD.initLightbox()}),$(function(){return $(".mobile-device #lightbox").livequery(function(){var e,t,n;return e=new Hammer.Manager($(".lb-container")[0],{recognizers:[[Hammer.Pinch,{enable:!0}],[Hammer.Swipe,{direction:Hammer.DIRECTION_HORIZONTAL}]]}),t=1,n=function(e){return $(".lb-container .lb-image").css({transform:"scale("+e+", "+e+")"})},e.on("swiperight",function(){var e;return e=GD.lightbox.currentImageIndex,e!==0&&GD.lightbox.changeImage(e-1),t=1,n(t)}),e.on("swipeleft",function(){var e;return e=GD.lightbox.currentImageIndex,e!==GD.lightbox.album.length-1&&GD.lightbox.changeImage(e+1),t=1,n(t)}),e.on("pinch",function(e){return n(Math.max(1,Math.min(t*e.scale,10)))}),e.on("pinchend",function(e){return t=Math.max(1,Math.min(t*e.scale,10)),n(t)})})})}.call(this),function(){$(function(){return $(document).on("click",".modal .modal-footer .submit:not(.disabled), .modal.dialog .submit-container .submit:not(.disabled)",function(){return $(this).closest(".modal").find("form").submit()}),$(document).on("ajax:complete",".modal.dialog",function(e,t,n){var r,i,s,o;return t.status===200?($(this).modal("hide"),GD.isEmpty(t.responseText)&&$(this).hasClass("reload-page")&&(GD.showFlashNotification("保存设置成功"),GD.turbolinksReloadWithCurrentPosition()),$($(this).data("target")).html(t.responseText),i=$($(this).data("target")).find(".flash-notification"),r=i.data("message"),s=i.data("show-type"),s==="static"?r&&GD.showTooltipFlashMessage(i,"success",r):r&&GD.showFlashNotification(r),ReactRailsUJS.mountComponents()):(o=$(this).data("error-update-target")||".modal-content",$(this).find(o).html(t.responseText),$(this).trigger("loaded.bs.modal"),GD.showFlashNotification("保存设置失败","danger"))}),$(document).on("hidden.bs.modal",".modal.dialog",function(e){e.stopPropagation();if($(e.target).is(".modal"))return $(this).removeData("bs.modal").find(".modal-body").html("<h5 class='text-center'>加载中...</h5>")}),$(document).on("shown.bs.modal loaded.bs.modal",".modal.auto-height",function(e){return GD.updateModalHeight($(this))}),$(document).on("shown.bs.modal",".modal.dialog",function(e){var t;t=$(this).data("url");if(t)return $(this).find(".modal-body").load(t,function(e){return function(){return $(e).trigger("loaded.gd")}}(this))})})}.call(this),function(){var e,t;e=function(e){var t,n;return t=$('<form method="post" action="'+e.data("url")+'"></form>'),n='<input name="_method" value="'+e.data("gd-method")+'" type="hidden" />',n+='<input name="'+$.rails.csrfParam()+'" value="'+$.rails.csrfToken()+'" type="hidden" />',t.hide().append(n).appendTo("body")},t=function(e){return $("#gd_confirm .modal-header .modal-title").text(e.data("gd-confirm").title),$("#gd_confirm .modal-body").html(e.data("gd-confirm").content),$("#gd_confirm").modal("show")},$(document).on("click","[data-gd-confirm]",function(n){return n.preventDefault(),t($(this)),$("#gd_confirm .modal-footer #gd_confrim_ok").off("click").on("click",function(t){return function(n){return e($(t)).submit()}}(this))})}.call(this),function(e,t){typeof exports=="object"?t(exports):typeof define=="function"&&define.amd?define(["exports"],t):t(e)}(this,function(e){function n(e){this._targetElement=e,this._introItems=[],this._options={nextLabel:"Next &rarr;",prevLabel:"&larr; Back",skipLabel:"Skip",doneLabel:"Done",tooltipPosition:"bottom",tooltipClass:"",highlightClass:"",exitOnEsc:!0,exitOnOverlayClick:!0,showStepNumbers:!0,keyboardNavigation:!0,showButtons:!0,showBullets:!0,showProgress:!1,scrollToElement:!0,overlayOpacity:1,positionPrecedence:["bottom","top","right","left"],disableInteraction:!1,hintPosition:"top-middle",hintButtonLabel:"Got it"}}function r(e){var t=[],n=this;if(this._options.steps)for(var r=0,s=this._options.steps.length;r<s;r++){var f=i(this._options.steps[r]);f.step=t.length+1,typeof f.element=="string"&&(f.element=document.querySelector(f.element));if(typeof f.element=="undefined"||f.element==null){var l=document.querySelector(".introjsFloatingElement");l==null&&(l=document.createElement("div"),l.className="introjsFloatingElement",document.body.appendChild(l)),f.element=l,f.position="floating"}f.element!=null&&t.push(f)}else{var c=e.querySelectorAll("*[data-intro]");if(c.length<1)return!1;for(var r=0,h=c.length;r<h;r++){var p=c[r],v=parseInt(p.getAttribute("data-step"),10);v>0&&(t[v-1]={element:p,intro:p.getAttribute("data-intro"),detail:p.getAttribute("data-detail"),step:parseInt(p.getAttribute("data-step"),10),tooltipClass:p.getAttribute("data-tooltipClass"),highlightClass:p.getAttribute("data-highlightClass"),position:p.getAttribute("data-position")||this._options.tooltipPosition})}var m=0;for(var r=0,h=c.length;r<h;r++){var p=c[r];if(p.getAttribute("data-step")==null){for(;;){if(typeof t[m]=="undefined")break;m++}t[m]={element:p,intro:p.getAttribute("data-intro"),detail:p.getAttribute("data-detail"),step:m+1,tooltipClass:p.getAttribute("data-tooltipClass"),highlightClass:p.getAttribute("data-highlightClass"),position:p.getAttribute("data-position")||this._options.tooltipPosition}}}}var g=[];for(var y=0;y<t.length;y++)t[y]&&g.push(t[y]);t=g,t.sort(function(e,t){return e.step-t.step}),n._introItems=t;if(E.call(n,e)){o.call(n);var b=e.querySelector(".introjs-skipbutton"),w=e.querySelector(".introjs-nextbutton");n._onKeyDown=function(t){if(t.keyCode===27&&n._options.exitOnEsc==1)n._introExitCallback!=undefined&&n._introExitCallback.call(n),a.call(n,e);else if(t.keyCode===37)u.call(n);else if(t.keyCode===39)o.call(n);else if(t.keyCode===13){var r=t.target||t.srcElement;r&&r.className.indexOf("introjs-prevbutton")>0?u.call(n):r&&r.className.indexOf("introjs-skipbutton")>0?(n._introItems.length-1==n._currentStep&&typeof n._introCompleteCallback=="function"&&n._introCompleteCallback.call(n),n._introExitCallback!=undefined&&n._introExitCallback.call(n),a.call(n,e)):o.call(n),t.preventDefault?t.preventDefault():t.returnValue=!1}},n._onResize=function(e){d.call(n,document.querySelector(".introjs-helperLayer")),d.call(n,document.querySelector(".introjs-tooltipReferenceLayer"))},window.addEventListener?(this._options.keyboardNavigation&&window.addEventListener("keydown",n._onKeyDown,!0),window.addEventListener("resize",n._onResize,!0)):document.attachEvent&&(this._options.keyboardNavigation&&document.attachEvent("onkeydown",n._onKeyDown),document.attachEvent("onresize",n._onResize))}return!1}function i(e){if(e==null||typeof e!="object"||typeof e.nodeType!="undefined")return e;var t={};for(var n in e)typeof jQuery!="undefined"&&e[n]instanceof jQuery?t[n]=e[n]:t[n]=i(e[n]);return t}function s(e){this._currentStep=e-2,typeof this._introItems!="undefined"&&o.call(this)}function o(){this._direction="forward",typeof this._currentStep=="undefined"?this._currentStep=0:++this._currentStep;if(this._introItems.length<=this._currentStep){typeof this._introCompleteCallback=="function"&&this._introCompleteCallback.call(this),a.call(this,this._targetElement);return}var e=this._introItems[this._currentStep];typeof this._introBeforeChangeCallback!="undefined"&&this._introBeforeChangeCallback.call(this,e.element),m.call(this,e)}function u(){this._direction="backward";if(this._currentStep===0)return!1;var e=this._introItems[--this._currentStep];typeof this._introBeforeChangeCallback!="undefined"&&this._introBeforeChangeCallback.call(this,e.element),m.call(this,e)}function a(e){var t=e.querySelector(".introjs-overlay");if(t==null)return;t.style.opacity=0,setTimeout(function(){t.parentNode&&t.parentNode.removeChild(t)},500);var n=e.querySelector(".introjs-helperLayer");n&&n.parentNode.removeChild(n);var r=e.querySelector(".introjs-tooltipReferenceLayer");r&&r.parentNode.removeChild(r);var i=e.querySelector(".introjs-disableInteraction");i&&i.parentNode.removeChild(i);var s=document.querySelector(".introjsFloatingElement");s&&s.parentNode.removeChild(s);var o=document.querySelector(".introjs-showElement");o&&(o.className=o.className.replace(/introjs-[a-zA-Z]+/g,"").replace(/^\s+|\s+$/g,""));var u=document.querySelectorAll(".introjs-fixParent");if(u&&u.length>0)for(var a=u.length-1;a>=0;a--)u[a].className=u[a].className.replace(/introjs-fixParent/g,"").replace(/^\s+|\s+$/g,"");window.removeEventListener?window.removeEventListener("keydown",this._onKeyDown,!0):document.detachEvent&&document.detachEvent("onkeydown",this._onKeyDown),this._currentStep=undefined}function f(e,t,n,r,i){var s="",o,u,a,f,p;i=i||!1,t.style.top=null,t.style.right=null,t.style.bottom=null,t.style.left=null,t.style.marginLeft=null,t.style.marginTop=null,n.style.display="inherit",typeof r!="undefined"&&r!=null&&(r.style.top=null,r.style.left=null);if(!this._introItems[this._currentStep])return;o=this._introItems[this._currentStep],typeof o.tooltipClass=="string"?s=o.tooltipClass:s=this._options.tooltipClass,t.className=("introjs-tooltip "+s).replace(/^\s+|\s+$/g,""),p=this._introItems[this._currentStep].position,(p=="auto"||this._options.tooltipPosition=="auto")&&p!="floating"&&(p=h.call(this,e,t,p)),a=A(e),u=A(t),f=b();switch(p){case"top":n.className="introjs-arrow bottom";if(i)var d=0;else var d=15;l(a,d,u,f,t),t.style.bottom=a.height+20+"px";break;case"right":t.style.left=a.width+20+"px",a.top+u.height>f.height?(n.className="introjs-arrow left-bottom",t.style.top="-"+(u.height-a.height-20)+"px"):n.className="introjs-arrow left";break;case"left":!i&&this._options.showStepNumbers==1&&(t.style.top="15px"
),a.top+u.height>f.height?(t.style.top="-"+(u.height-a.height-20)+"px",n.className="introjs-arrow right-bottom"):n.className="introjs-arrow right",t.style.right=a.width+20+"px";break;case"floating":n.style.display="none",t.style.left="50%",t.style.top="50%",t.style.marginLeft="-"+u.width/2+"px",t.style.marginTop="-"+u.height/2+"px",typeof r!="undefined"&&r!=null&&(r.style.left="-"+(u.width/2+18)+"px",r.style.top="-"+(u.height/2+18)+"px");break;case"bottom-right-aligned":n.className="introjs-arrow top-right";var v=0;c(a,v,u,t),t.style.top=a.height+20+"px";break;case"bottom-middle-aligned":n.className="introjs-arrow top-middle";var m=a.width/2-u.width/2;i&&(m+=5),c(a,m,u,t)&&(t.style.right=null,l(a,m,u,f,t)),t.style.top=a.height+20+"px";break;case"bottom-left-aligned":case"bottom":default:n.className="introjs-arrow top";var d=0;l(a,d,u,f,t),t.style.top=a.height+20+"px"}}function l(e,t,n,r,i){return e.left+t+n.width>r.width?(i.style.left=r.width-n.width-e.left+"px",!1):(i.style.left=t+"px",!0)}function c(e,t,n,r){return e.left+e.width-t-n.width<0?(r.style.left=-e.left+"px",!1):(r.style.right=t+"px",!0)}function h(e,t,n){var r=this._options.positionPrecedence.slice(),i=b(),s=A(t).height+10,o=A(t).width+20,u=A(e),a="floating";return u.left+o>i.width||u.left+u.width/2-o<0?(p(r,"bottom"),p(r,"top")):(u.height+u.top+s>i.height&&p(r,"bottom"),u.top-s<0&&p(r,"top")),u.width+u.left+o>i.width&&p(r,"right"),u.left-o<0&&p(r,"left"),r.length>0&&(a=r[0]),n&&n!="auto"&&r.indexOf(n)>-1&&(a=n),a}function p(e,t){e.indexOf(t)>-1&&e.splice(e.indexOf(t),1)}function d(e){if(e){if(!this._introItems[this._currentStep])return;var t=this._introItems[this._currentStep],n=A(t.element),r=10;y(t.element)&&(e.className+=" introjs-fixedTooltip"),t.position=="floating"&&(r=0),e.setAttribute("style","width: "+(n.width+r)+"px; "+"height:"+(n.height+r)+"px; "+"top:"+(n.top-5)+"px;"+"left: "+(n.left-5)+"px;")}}function v(){var e=document.querySelector(".introjs-disableInteraction");e===null&&(e=document.createElement("div"),e.className="introjs-disableInteraction",this._targetElement.appendChild(e)),d.call(this,e)}function m(e){typeof this._introChangeCallback!="undefined"&&this._introChangeCallback.call(this,e.element);var t=this,n=document.querySelector(".introjs-helperLayer"),r=document.querySelector(".introjs-tooltipReferenceLayer"),i="introjs-helperLayer",s=A(e.element);typeof e.highlightClass=="string"&&(i+=" "+e.highlightClass),typeof this._options.highlightClass=="string"&&(i+=" "+this._options.highlightClass);if(n!=null){var l=r.querySelector(".introjs-helperNumberLayer"),c=r.querySelector(".introjs-tooltiptext"),h=r.querySelector(".introjs-tooltipdetail"),p=r.querySelector(".introjs-arrow"),m=r.querySelector(".introjs-tooltip"),y=r.querySelector(".introjs-closebutton");W=r.querySelector(".introjs-skipbutton"),z=r.querySelector(".introjs-prevbutton"),U=r.querySelector(".introjs-nextbutton"),n.className=i,m.style.opacity=0,m.style.display="none";if(l!=null){var E=this._introItems[e.step-2>=0?e.step-2:0];if(E!=null&&this._direction=="forward"&&E.position=="floating"||this._direction=="backward"&&e.position=="floating")l.style.opacity=0}d.call(t,n),d.call(t,r);var S=document.querySelectorAll(".introjs-fixParent");if(S&&S.length>0)for(var x=S.length-1;x>=0;x--)S[x].className=S[x].className.replace(/introjs-fixParent/g,"").replace(/^\s+|\s+$/g,"");var T=document.querySelector(".introjs-showElement");T.className=T.className.replace(/introjs-[a-zA-Z]+/g,"").replace(/^\s+|\s+$/g,""),t._lastShowElementTimer&&clearTimeout(t._lastShowElementTimer),t._lastShowElementTimer=setTimeout(function(){l!=null&&(l.innerHTML=e.step),c.innerHTML=e.intro,c.appendChild(y),h.innerHTML=e.detail,m.style.display="block",f.call(t,e.element,m,p,l),r.querySelector(".introjs-bullets li > a.active").className="",r.querySelector('.introjs-bullets li > a[data-stepnumber="'+e.step+'"]').className="active",r.querySelector(".introjs-progress .introjs-progressbar").setAttribute("style","width:"+O.call(t)+"%;"),m.style.opacity=1,l&&(l.style.opacity=1),U.tabIndex===-1?W.focus():U.focus()},350)}else{var N=document.createElement("div"),C=document.createElement("div"),k=document.createElement("div"),L=document.createElement("div"),M=document.createElement("div"),_=document.createElement("div"),D=document.createElement("div"),P=document.createElement("div"),H=document.createElement("div");N.className=i,C.className="introjs-tooltipReferenceLayer",d.call(t,N),d.call(t,C),this._targetElement.appendChild(N),this._targetElement.appendChild(C),k.className="introjs-arrow",M.className="introjs-tooltiptext",M.innerHTML=e.intro;var y=document.createElement("a");y.className="close introjs-closebutton",y.href="javascript:void(0);",y.innerHTML="<span>×</span>",y.onclick=function(){a.call(t,t._targetElement)},M.appendChild(y),_.className="introjs-tooltipdetail",_.innerHTML=e.detail,D.className="introjs-bullets",this._options.showBullets===!1&&(D.style.display="none");var B=document.createElement("ul");for(var x=0,j=this._introItems.length;x<j;x++){var F=document.createElement("li"),I=document.createElement("a");I.onclick=function(){t.goToStep(this.getAttribute("data-stepnumber"))},x===e.step-1&&(I.className="active"),I.href="javascript:void(0);",I.innerHTML="&nbsp;",I.setAttribute("data-stepnumber",this._introItems[x].step),F.appendChild(I),B.appendChild(F)}D.appendChild(B),P.className="introjs-progress",this._options.showProgress===!1&&(P.style.display="none");var q=document.createElement("div");q.className="introjs-progressbar",q.setAttribute("style","width:"+O.call(this)+"%;"),P.appendChild(q),H.className="introjs-tooltipbuttons",this._options.showButtons===!1&&(H.style.display="none"),L.className="introjs-tooltip",L.appendChild(M),L.appendChild(_),L.appendChild(P);if(this._options.showStepNumbers==1){var R=document.createElement("span");R.className="introjs-helperNumberLayer",R.innerHTML=e.step,C.appendChild(R)}L.appendChild(k),C.appendChild(L);var U=document.createElement("a");U.onclick=function(){t._introItems.length-1!=t._currentStep&&o.call(t)},U.href="javascript:void(0);",U.innerHTML=this._options.nextLabel;var z=document.createElement("a");z.onclick=function(){t._currentStep!=0&&u.call(t)},z.href="javascript:void(0);",z.innerHTML=this._options.prevLabel;var W=document.createElement("a");W.className="gd-btn gd-btn-primary gd-btn-small introjs-skipbutton",W.href="javascript:void(0);",W.innerHTML=this._options.skipLabel,W.onclick=function(){t._introItems.length-1==t._currentStep&&typeof t._introCompleteCallback=="function"&&t._introCompleteCallback.call(t),t._introItems.length-1!=t._currentStep&&typeof t._introExitCallback=="function"&&t._introExitCallback.call(t),a.call(t,t._targetElement)},H.appendChild(W),this._introItems.length>1&&(H.appendChild(z),H.appendChild(U)),H.appendChild(D),L.appendChild(H),f.call(t,e.element,L,k,R)}this._options.disableInteraction===!0&&v.call(t),z.removeAttribute("tabIndex"),U.removeAttribute("tabIndex"),this._currentStep==0&&this._introItems.length>1?(z.className="introjs-button introjs-prevbutton introjs-disabled",z.tabIndex="-1",U.className="gd-btn gd-btn-info gd-btn-small introjs-nextbutton",W.className="gd-btn gd-btn-primary gd-btn-small introjs-skipbutton button-hide",W.innerHTML=this._options.skipLabel):this._introItems.length-1==this._currentStep||this._introItems.length==1?(W.className="gd-btn gd-btn-primary gd-btn-small introjs-skipbutton",W.innerHTML=this._options.doneLabel,z.className="introjs-button introjs-prevbutton",U.className="gd-btn gd-btn-info gd-btn-small introjs-nextbutton button-hide",U.tabIndex="-1"):(z.className="introjs-button introjs-prevbutton",U.className="gd-btn gd-btn-info gd-btn-small introjs-nextbutton",W.className="gd-btn gd-btn-primary gd-btn-small introjs-skipbutton button-hide",W.innerHTML=this._options.skipLabel),U.focus(),e.element.className+=" introjs-showElement";var X=g(e.element,"position");X!=="absolute"&&X!=="relative"&&(e.element.className+=" introjs-relativePosition");var V=e.element.parentNode;while(V!=null){if(V.tagName.toLowerCase()==="body")break;var $=g(V,"z-index"),J=parseFloat(g(V,"opacity")),K=g(V,"transform")||g(V,"-webkit-transform")||g(V,"-moz-transform")||g(V,"-ms-transform")||g(V,"-o-transform");if(/[0-9]+/.test($)||J<1||K!=="none"&&K!==undefined)V.className+=" introjs-fixParent";V=V.parentNode}if(!w(e.element)&&this._options.scrollToElement===!0){var Q=e.element.getBoundingClientRect(),G=b().height,Y=Q.bottom-(Q.bottom-Q.top),Z=Q.bottom-G;Y<0||e.element.clientHeight>G?window.scrollBy(0,Y-30):window.scrollBy(0,Z+100)}typeof this._introAfterChangeCallback!="undefined"&&this._introAfterChangeCallback.call(this,e.element)}function g(e,t){var n="";return e.currentStyle?n=e.currentStyle[t]:document.defaultView&&document.defaultView.getComputedStyle&&(n=document.defaultView.getComputedStyle(e,null).getPropertyValue(t)),n&&n.toLowerCase?n.toLowerCase():n}function y(e){var t=e.parentNode;return t.nodeName==="HTML"?!1:g(e,"position")=="fixed"?!0:y(t)}function b(){if(window.innerWidth!=undefined)return{width:window.innerWidth,height:window.innerHeight};var e=document.documentElement;return{width:e.clientWidth,height:e.clientHeight}}function w(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom+80<=window.innerHeight&&t.right<=window.innerWidth}function E(e){var t=document.createElement("div"),n="",r=this;t.className="introjs-overlay";if(e.tagName.toLowerCase()==="body")n+="top: 0;bottom: 0; left: 0;right: 0;position: fixed;",t.setAttribute("style",n);else{var i=A(e);i&&(n+="width: "+i.width+"px; height:"+i.height+"px; top:"+i.top+"px;left: "+i.left+"px;",t.setAttribute("style",n))}return e.appendChild(t),t.onclick=function(){r._options.exitOnOverlayClick==1&&(r._introExitCallback!=undefined&&r._introExitCallback.call(r),a.call(r,e))},setTimeout(function(){n+="opacity: "+r._options.overlayOpacity.toString()+";",t.setAttribute("style",n)},10),!0}function S(){var e=this._targetElement.querySelector(".introjs-hintReference");if(e){var t=e.getAttribute("data-step");return e.parentNode.removeChild(e),t}}function x(e){var t=this;this._introItems=[];if(this._options.hints)for(var n=0,r=this._options.hints.length;n<r;n++){var s=i(this._options.hints[n]);typeof s.element=="string"&&(s.element=document.querySelector(s.element)),s.hintPosition=s.hintPosition||"top-middle",s.element!=null&&this._introItems.push(s)}else{var o=e.querySelectorAll("*[data-hint]");if(o.length<1)return!1;for(var n=0,r=o.length;n<r;n++){var u=o[n];this._introItems.push({element:u,hint:u.getAttribute("data-hint"),hintPosition:u.getAttribute("data-hintPosition")||this._options.hintPosition,tooltipClass:u.getAttribute("data-tooltipClass"),position:u.getAttribute("data-position")||this._options.tooltipPosition})}}C.call(this),document.addEventListener?(document.addEventListener("click",S.bind(this),!1),window.addEventListener("resize",T.bind(this),!0)):document.attachEvent&&(document.attachEvent("onclick",S.bind(this)),document.attachEvent("onresize",T.bind(this)))}function T(){for(var e=0,t=this._introItems.length;e<t;e++){var n=this._introItems[e];k.call(this,n.hintPosition,n.element,n.targetElement)}}function N(e){S.call(this);var t=this._targetElement.querySelector('.introjs-hint[data-step="'+e+'"]');t&&(t.className+=" introjs-hidehint"),typeof this._hintCloseCallback!="undefined"&&this._hintCloseCallback.call(this,e)}function C(){var e=this,t=document.querySelector(".introjs-hints");if(t!=null)n=t;else{var n=document.createElement("div");n.className="introjs-hints"}for(var r=0,i=this._introItems.length;r<i;r++){var s=this._introItems[r];if(document.querySelector('.introjs-hint[data-step="'+r+'"]'))continue;var o=document.createElement("a");o.href="javascript:void(0);",function(t,n,r){t.onclick=function(i){var s=i?i:window.event;s.stopPropagation&&s.stopPropagation(),s.cancelBubble!=null&&(s.cancelBubble=!0),L.call(e,t,n,r)}}(o,s,r),o.className="introjs-hint",y(s.element)&&(o.className+=" introjs-fixedhint");var u=document.createElement("div");u.className="introjs-hint-dot";var a=document.createElement("div");a.className="introjs-hint-pulse",o.appendChild(u),o.appendChild(a),o.setAttribute("data-step",r),s.targetElement=s.element,s.element=o,k.call(this,s.hintPosition,o,s.targetElement),n.appendChild(o)}document.body.appendChild(n),typeof this._hintsAddedCallback!="undefined"&&this._hintsAddedCallback.call(this)}function k(e,t,n){var r=A.call(this,n);switch(e){default:case"top-left":t.style.left=r.left+"px",t.style.top=r.top+"px";break;case"top-right":t.style.left=r.left+r.width+"px",t.style.top=r.top+"px";break;case"bottom-left":t.style.left=r.left+"px",t.style.top=r.top+r.height+"px";break;case"bottom-right":t.style.left=r.left+r.width+"px",t.style.top=r.top+r.height+"px";break;case"bottom-middle":t.style.left=r.left+r.width/2+"px",t.style.top=r.top+r.height+"px";break;case"top-middle":t.style.left=r.left+r.width/2+"px",t.style.top=r.top+"px"}}function L(e,t,n){typeof this._hintClickCallback!="undefined"&&this._hintClickCallback.call(this,e,t,n);var r=S.call(this);if(parseInt(r,10)==n)return;var i=document.createElement("div"),s=document.createElement("div"),o=document.createElement("div"),u=document.createElement("div");i.className="introjs-tooltip",i.onclick=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},s.className="introjs-tooltiptext";var a=document.createElement("p");a.innerHTML=t.hint;var l=document.createElement("a");l.className="introjs-button",l.innerHTML=this._options.hintButtonLabel,l.onclick=N.bind(this,n),s.appendChild(a),s.appendChild(l),o.className="introjs-arrow",i.appendChild(o),i.appendChild(s),this._currentStep=e.getAttribute("data-step"),u.className="introjs-tooltipReferenceLayer introjs-hintReference",u.setAttribute("data-step",e.getAttribute("data-step")),d.call(this,u),u.appendChild(i),document.body.appendChild(u),f.call(this,e,i,o,null,!0)}function A(e){var t={};t.width=e.offsetWidth,t.height=e.offsetHeight;var n=0,r=0;while(e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop))n+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;return t.top=r,t.left=n,t}function O(){var e=parseInt(this._currentStep+1,10);return e/this._introItems.length*100}function M(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n}var t="2.0",_=function(e){if(typeof e=="object")return new n(e);if(typeof e=="string"){var t=document.querySelector(e);if(t)return new n(t);throw new Error("There is no element with given selector.")}return new n(document.body)};return _.version=t,_.fn=n.prototype={clone:function(){return new n(this)},setOption:function(e,t){return this._options[e]=t,this},setOptions:function(e){return this._options=M(this._options,e),this},start:function(){return r.call(this,this._targetElement),this},goToStep:function(e){return s.call(this,e),this},nextStep:function(){return o.call(this),this},previousStep:function(){return u.call(this),this},exit:function(){return a.call(this,this._targetElement),this},refresh:function(){return d.call(this,document.querySelector(".introjs-helperLayer")),d.call(this,document.querySelector(".introjs-tooltipReferenceLayer")),this},onbeforechange:function(e){if(typeof e!="function")throw new Error("Provided callback for onbeforechange was not a function");return this._introBeforeChangeCallback=e,this},onchange:function(e){if(typeof e!="function")throw new Error("Provided callback for onchange was not a function.");return this._introChangeCallback=e,this},onafterchange:function(e){if(typeof e!="function")throw new Error("Provided callback for onafterchange was not a function");return this._introAfterChangeCallback=e,this},oncomplete:function(e){if(typeof e!="function")throw new Error("Provided callback for oncomplete was not a function.");return this._introCompleteCallback=e,this},onhintsadded:function(e){if(typeof e!="function")throw new Error("Provided callback for onhintsadded was not a function.");return this._hintsAddedCallback=e,this},onhintclick:function(e){if(typeof e!="function")throw new Error("Provided callback for onhintclick was not a function.");return this._hintClickCallback=e,this},onhintclose:function(e){if(typeof e!="function")throw new Error("Provided callback for onhintclose was not a function.");return this._hintCloseCallback=e,this},onexit:function(e){if(typeof e!="function")throw new Error("Provided callback for onexit was not a function.");return this._introExitCallback=e,this},addHints:function(){return x.call(this,this._targetElement),this}},e.introJs=_,_}),function(){var e;e={showStepNumbers:!1,exitOnOverlayClick:!1,scrollToElement:!0,disableInteraction:!0},GD.needOnboardingUserGuideCookieKey="need_onboarding_user_guide",GD.userGuideDashboard=function(){var t,n;return GD.dashboardGuidePrepare(),t=$(".form.dashboard-item").first().find("a").attr("href")+"/edit#userGuideFormEdit",n=$.extend({doneLabel:"开始学习",showBullets:!1},e),introJs().setOptions(n).oncomplete(function(){return Turbolinks.visit(t)})},GD.userGuideFormEdit=function(){var t,n;return GD.FormEditGuidePrepare(),t=$("#entries_nav").attr("href")+"#userGuideFormData",n=$.extend({nextLabel:"下一步",doneLabel:"查看数据"},e),introJs().setOptions(n).oncomplete(function(){return Turbolinks.visit(t)})},GD.userGuideFormData=function(){var t,n;return GD.FormDataGuidePrepare(),t="<span class='new-entry-count gd-red-badge'>3</span>",$("ul.header-nav.menu-nav li").first().append(t),n=$.extend({nextLabel:"下一步",doneLabel:"开始使用",showBullets:!1,highlightClass:"introjs-transparent"},e),introJs().setOptions(n)},GD.dashboardGuidePrepare=function(){var e;return e=$(".form.dashboard-item").first(),e.attr("data-step",1),e.attr("data-intro","点击查看你的表单"),e.attr("data-detail","这是你的专属表单，你可以经过简单地编辑后直接使用，也可以研究它的结构，学习如何制作一个表单。")},GD.FormEditGuidePrepare=function(){var e,t,n,r,i;return r=$(".field.field-section-break").first(),r.attr("data-step",1),r.attr("data-intro","使用小技巧"),r.attr("data-detail","我为你准备的每个表单都包含了表单技巧提示，在正式发布之前，请删除这个字段。"),n=$("div.sidebar").first(),n.attr("data-step",2),n.attr("data-position","left"),n.attr("data-intro","表单编辑器"),n.attr("data-detail",'在这里你可以添加字段。例如，为了收集填表者的联系方式，可添加"手机"、“邮箱”等字段。'),i=$(".form-design-footer").first(),i.attr("data-step",3),i.attr("data-position","left"),i.attr("data-intro","保存表单"),i.attr("data-detail","完成设计后，不要忘记保存表单。点击下一步，让我告诉你一键超快发布表单。"),t=$("div#copy_published_form_link"),t.attr("data-step",4),t.attr("data-intro","快速发布表单"),e='<p style="margin-bottom: 10px">你可以通过这里快速发布表单<br></p><p style="margin-bottom: 10px"><i class="gd-icon-copy" style="font-size: 16px"></i><span style="margin-left: 5px">一键复制表单链接</span></p><p style="margin-bottom: 10px"><i class="gd-icon-qrcode" style="font-size: 16px"></i><span style="margin-left: 5px">微信扫码即可分享</span></p><p style="margin-bottom: 0px"><i class="gd-icon-publish" style="font-size: 16px"></i><span style="margin-left: 5px">直接访问表单地址</span></p>',t.attr("data-detail",e)},GD.FormDataGuidePrepare=function(){var e;return e=$(".form-menu-item"),e.attr("data-step",1),e.attr("data-intro","来查看你的数据"),e.attr("data-detail","当收集到新的数据，金数据会贴心提醒你：你有新的数据，请不要忘记查收哦<br>现在去发布你的第一个表单把！")},$(document).on("ready page:load",function(){var e;e=url("#");if(e==="userGuideDashboard"||e==="userGuideFormData")return window.GD[e]().start()}),CKEDITOR.on("instanceReady",function(e){var t;t=url("#");if(t==="userGuideFormEdit")return window.GD[t]().start()})}.call(this),function(){GD.logoutLink=function(){var e;return e=function(e){return e.click(function(e){return e.preventDefault(),$.ajax({url:$(this).attr("href"),type:"delete",complete:function(e){return function(t){if(t.status===200)return typeof localStorage!="undefined"&&localStorage!==null&&localStorage.clear(),window.location.href=$(e).data("login-path")}}(this)})})},e}()}.call(this),function(){(function(e){var t,n,r,i,s,o;return n={},o='<div class="token-input">\n  <div class="inner">\n    <div class="dib-table">\n      <div class="token-list"></div>\n      <input type="text" class="token-new" />\n    </div>\n  </div>\n</div>',s="<span></span>",r='<div class="place-holder"></div>',i=function(e,t){return t.val(e.join(";"))},t=function(t){return e(t).find("span").map(function(){return e(this).text()}).toArray()},e.fn.gdtokeninput=function(u){var a;return a=e.extend({},n,u||{}),this.each(function(){var n,u,f,l,c,h,p,d,v,m;h=e(this).hide(),p=e(o).insertAfter(h),c=p.find(".dib-table"),f=p.find(".token-new"),u=p.find(".token-list"),n=p.find(".inner"),v=function(){if(!u.find("span").length&&!f.val().length)return p.addClass("has-placeholder");if(!u.find("span").length&&f.val().length)return p.removeClass("has-placeholder")},m=function(){return i(t(u),h),a.afterSyncCallback&&a.afterSyncCallback(u)},d=function(n){var r;return r=t(u),e.inArray(n,r)},h.val().replace(/\s+/g,"").split(";").forEach(function(t){if(t!=="")return e(s).text(t).appendTo(u)}),n.on("mousewheel",function(t){var n;if(t.deltaX!==0||t.deltaFactor<=1)return;return n=e(this).scrollLeft(),e(this).scrollLeft(n-t.deltaY*t.deltaFactor),t.preventDefault()}),f.on("keypress",function(t){var n;if(t.which===13||t.which===59){t.preventDefault();if(t.target.value==="")return;return d(t.target.value)>=0&&a.errorCallback!=null?a.errorCallback():(n=e(s).text(t.target.value).appendTo(u),a.addingCallback&&a.addingCallback(n,t.target.value),t.target.value="",m())}}),f.on("keydown",function(e){if((e.which===8||e.which===46)&&this.value==="")return u.find("span").last().remove(),m()}),f.on("focus",function(){return p.addClass("input-focus")}),f.on("blur",function(){return p.removeClass("input-focus")}),u.on("click","span",function(){return e(this).remove(),m()});if(a.placeHolder)return l=e(r).appendTo(p),l.text(a.placeHolder),v(),f.on("keyup blur",v),u.on("click","span",v)})}})(jQuery)}.call(this),_.templateSettings={evaluate:/\[\[(.+?)\]\]/g,interpolate:/\{\{(.+?)\}\}/g},String.toLocaleString({en:{"%no_result":"No results found","%rechoose":"rechoose","%delete":"delete","%warn_system_file":"system file is not allowed","%attachment_media_type_support":"support: ","%warn_exec_file":"EXE/BAT format file is not allowed","%file_name_too_long":"file name is too long","%warn_oversize":"file size is over {{maxSize}}","%warn_invalid_filetype":"file type is not allowed","%warn_wrong_mobile_number":"<i class='gd-icon-times-circle'></i> please enter correct mobile number of mainland China","%total":"total: ","%download":"download","%sold_out":"sold out","%select_spec":"Please select {{labels}} first","%common_separator":", ","%send_sms_verification":"Send Code","%resend":"resend SMS","%sendingSMS":"sending SMS","%warn_geo_cannot_get_location":"Can't get your location!","%warn_geo_permission_denied":"You denied the request for Geolocation.","%warn_geo_position_unavailable":"Location information is unavailable.","%warn_geo_timeout":"The request to get your location timed out.","%warn_geo_unknown_error":"An unknown error occurred.","%geo_coord":"Longitude:{{long}},Latitude:{{lat}}","%geo_long":"Longitude:{{long}}","%geo_lat":"Latitude:{{lat}}","%geo_address":"{{address}}","%geo_choose":"Choose location","%geo_locate":"Get current location","%geo_locating":"Locating...","%geo_no_address":"No address information. ","%select_prompt":"Please select","%no_geo_data":"There is no data for this field currently.","%bracket":" ({{content}})","%upload_failed":"failed {{status}}, please contact system admin","%upload_failed_400":"failed, changed to standard mode, please try again","%upload_failed_401":"failed, please refresh page and try again","%uploading":"Uploading...","%upload_done":"Uploading finished!","%max_file_quantity":"File quantity is over {{maxFileQuantity}}","%page_number":"Page {{currentPage}}/{{totalPage}}","%presence_error":"{{label}} is required","%white_list_limit_error":"{{label}} [{{fieldValue}}] is not allowed to submit","%format_error":"format is wrong","%email_format_error":"Please enter a valid email address, such as support@jinshuju.net"},"zh-CN":{"%no_result":"没有匹配的搜索结果","%rechoose":"请重新选择","%delete":"刪除","%warn_system_file":"禁止上传系统文件","%attachment_media_type_support":"仅支持：","%warn_exec_file":"禁止上传EXE、BAT格式的文件","%file_name_too_long":"文件名过长","%warn_oversize":"文件超过了{{maxSize}}","%warn_invalid_filetype":"该类型文件不允许上传","%warn_wrong_mobile_number":"<i class='gd-icon-times-circle'></i> 请输入正确的中国大陆手机号码","%total":"合计：","%download":"下载","%sold_out":"已售空","%select_spec":"请先选择{{labels}}","%common_separator":"、","%send_sms_verification":"发送验证短信","%resend":"重新发送","%sendingSMS":"正在发送短信","%warn_geo_cannot_get_location":"无法定位您的位置！","%warn_geo_permission_denied":"无法定位您的位置！请打开浏览器的位置共享权限","%warn_geo_position_unavailable":"无法定位您的位置！位置信息不可用","%warn_geo_timeout":"无法定位您的位置！获取经纬度超时","%warn_geo_unknown_error":"无法定位您的位置！未知错误","%geo_coord":"经度:{{long}}，纬度:{{lat}}","%geo_long":"经度:{{long}}","%geo_lat":"纬度:{{lat}}","%geo_address":"{{address}}","%geo_choose":"获取地理位置","%geo_locate":"获取当前位置","%geo_locating":"获取位置中...","%geo_no_address":"无法获取地址。","%select_prompt":"请选择","%no_geo_data":"该地理位置字段暂无数据。","%bracket":"({{content}})","%upload_failed":"上传失败{{status}}，请联系管理员","%upload_failed_400":"该浏览器不支持极速上传模式，现已调整为传统模式。请选择文件重新上传。","%upload_failed_401":"上传失败，请刷新页面，并在1小时内重新上传","%uploading":"上传中...","%upload_done":"上传成功！","%max_file_quantity":"最多只能上传{{maxFileQuantity}}个文件","%page_number":"第{{currentPage}}页/共{{totalPage}}页","%presence_error":"请填写{{label}}","%white_list_limit_error":"{{label}} [{{fieldValue}}] 不能提交","%format_error":"格式不对","%email_format_error":"请输入正确的邮箱地址，如support@jinshuju.net"},"zh-TW":{"%no_result":"沒有匹配的搜索結果","%rechoose":"請重新選擇","%delete":"刪除","%warn_system_file":"禁止上傳系統檔案","%attachment_media_type_support":"僅支持：","%warn_exec_file":"禁止上傳EXE、BAT格式的檔案","%file_name_too_long":"檔案名過長","%warn_oversize":"檔案超過了{{maxSize}}","%warn_invalid_filetype":"該檔案類型不允許上傳","%warn_wrong_mobile_number":"請輸入正確的中國大陸手機號碼","%total":"合計：","%download":"下載","%sold_out":"已售罄","%select_spec":"請先選擇{{labels}}","%common_separator":"、","%send_sms_verification":"發送驗證簡訊","%resend":"重新發送","%sendingSMS":"正在發送簡訊","%warn_geo_cannot_get_location":"無法定位您的位置！","%warn_geo_permission_denied":"無法定位您的位置！請打開瀏覽器的位置共用許可權","%warn_geo_position_unavailable":"無法定位您的位置！位置資訊不可用","%warn_geo_timeout":"無法定位您的位置！獲取經緯度超時","%warn_geo_unknown_error":"無法定位您的位置！未知錯誤","%geo_coord":"經度:{{long}}，緯度:{{lat}}","%geo_address":"{{address}}","%geo_choose":"獲取地理位置","%geo_locate":"獲取當前位置","%geo_locating":"獲取位置中...","%geo_no_address":"無法獲取地址。","%select_prompt":"請選擇","%no_geo_data":"該地理位置字段暫無數據。","%bracket":"（{{content}}）","%upload_failed":"上傳失敗{{status}}，請聯繫管理員","%upload_failed_400":"該瀏覽器不支援極速上傳模式，現已調整為傳統模式。請選擇檔案重新上傳。","%upload_failed_401":"上傳失敗，請刷新頁面，並在1小時內重新上傳","%uploading":"上傳中...","%upload_done":"上傳成功！","%max_file_quantity":"最多只能上傳{{maxFileQuantity}}個檔案","%page_number":"第{{currentPage}}頁/共{{totalPage}}頁","%presence_error":"請填寫{{label}}","%white_list_limit_error":"{{label}} [{{fieldValue}}] 不能提交","%format_error":"格式不對","%email_format_error":"請輸入正確的電郵地址，如support@jinshuju.net"}});var l=function(e,t){return t==null&&(t={}),_.template(e.toLocaleString())(t)};String.locale="zh-CN",function(){window.GD||(window.GD={}),GD.showFlashNotification=function(e,t){t==null&&(t="success");if($.trim(e)==="")return;return $(".flash-notifications").empty().notify({message:{html:""+e},type:t,closable:!1,fadeOut:{enabled:!0,delay:2e3}}).show()},$(document).on("page:load ready",function(){var e;e=$(".flash-notifications").data("message"),e&&!_.isEmpty(e)&&(!e.notice||GD.showFlashNotification(_.escape(e.notice)),!e.success||GD.showFlashNotification(_.escape(e.success)),!e.warning||GD.showFlashNotification(_.escape(e.warning),"warning"),!e.alert||GD.showFlashNotification(_.escape(e.alert),"danger"),!e.error||GD.showFlashNotification(_.escape(e.error),"danger"));if($(".system-warnings").length>0)return $(".system-warnings").on("click","a",function(){var e,t;return t=$(this).closest(".system-warning"),e=$(".system-warnings"),e.slick("slickRemove",t.data("slick-index"),!1),$(".system-warning").length===0&&$(".system-warnings").slideUp(),$.ajax({url:e.data("dismiss-path"),data:{type:t.data("type"),media:"system",id:t.data("message-id")},type:"patch"}).always(function(){e.slick("unslick");if(e.text()!=="")return e.slick({dots:!0,autoplay:!0,fade:!0,speed:500,arrows:!1})})})})}.call(this),function(){window.GD||(window.GD={}),GD.ShareIt=function(){function e(){}return e.prototype.setEntry=function(e){return this.title=encodeURIComponent(e.title||document.title),this.url=encodeURIComponent((e.url||document.location).replace("https://","http://")),this.pic=encodeURIComponent(e.pic||""),this.description=encodeURIComponent(e.description||"")},e.prototype.weibo=function(){var e,t,n;return e=1843447738,t="http://v.t.sina.com.cn/share/share.php?appkey="+e+"&title="+this.title+"&url="+this.url+"&pic="+this.pic,n="width=700,height=480, top="+(screen.height-430)/2+", left="+(screen.width-440)/2+", toolbar=no, menubar=no, scrollbars=no, location=yes, resizable=1, status=no",window.open(t,"分享到微博",n)},e.prototype.qqmb=function(){var e,t;return e="http://v.t.qq.com/share/share.php?title="+this.title+"&url="+this.url+"&pic="+this.pic,t="width=600, height=480, top="+(screen.height-700)/2+", left="+(screen.width-580)/2+", toolbar=no, menubar=no, scrollbars=no, location=yes, resizable=no, status=no",window.open(e,"转播到腾讯微博",t)},e.prototype.qzone=function(){var e,t,n;return e=this.title+" - "+this.description,t="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?title="+e+"&url="+this.url,n="width=700, height=600, top="+(screen.height-700)/2+", left="+(screen.width-600)/2+", toolbar=no, menubar=no, scrollbars=no, location=yes, resizable=no, status=no",window.open(t,"分享到QZONE",n)},e.prototype.renren=function(){var e,t;return e="http://widget.renren.com/dialog/share?title="+this.title+"&resourceUrl="+this.url+"&images="+this.pic+"&description="+this.description,t="width=700, height=600, top="+(screen.height-700)/2+", left="+(screen.width-600)/2+", toolbar=no, menubar=no, scrollbars=no, location=yes, resizable=no, status=no",window.open(e,"分享到人人",t)},e.prototype.mingdao=function(){var e,t,n;return e="76AE474AF1B8DC75A387FEC4EECF4CAB",t="http://www.mingdao.com/share?title="+this.title+"&url="+this.url+"&pic="+this.pic+"&appkey="+e,n="width=700, height=600, top="+(screen.height-700)/2+", left="+(screen.width-600)/2+", toolbar=no, menubar=no, scrollbars=no, location=yes, resizable=no, status=no",window.open(t,"分享到明道",n)},e}(),window.shareIt=new GD.ShareIt}.call(this),function(){GD.ImageUpload=function(){function e(e,t,n,r){this.fileInputSelector=e,this.$fileInput=t,this.context=n!=null?n:null,this.initOptions=r!=null?r:null,this.useXhrFileUpload=$.support.xhrFormDataFileUpload,this.uploadForm=this.$fileInput.closest("form"),this.tokenUrl=this.uploadForm.data("token-url"),this.uploadUrl=this.uploadForm.data("callback-url")}return e.prototype.onShowUploading=function(){},e.prototype.onShowNormalText=function(){},e.prototype.beforeAdd=function(e){return!0},e.prototype.validateOnFile=function(e){return GD.validateFile(e,5242880,/.*\.(jpg|jpeg|png|gif)$/gi)},e.prototype.getDataContext=function(e){},e.prototype.afterSubmit=function(e){return this.context.append(e.context)},e.prototype.fileUploadErrorMessage=function(e,t){return"图片上传："+t},e.prototype.onFileValidationFail=function(e){},e.prototype.onUploadFail=function(e){},e.prototype.onUploadSuccess=function(e,t){},e.prototype.progressBar=function(e){return $(".progress[data-filename='"+e.filename+"']")},e.prototype.messageContainer=function(){},e.prototype.showTagErrorMessage=function(e){if(this.messageContainer())return GD.showErrorMessageBelow(this.messageContainer(),e)},e.prototype._showUploading=function(){return $(this.fileInputSelector).attr("disabled",!0),this.onShowUploading()},e.prototype._showNormalText=function(){return $(this.fileInputSelector).removeAttr("disabled"),this.onShowNormalText()},e.prototype._onAddFail=function(e,t,n){return this._showNormalText(),this.showTagErrorMessage(this.fileUploadErrorMessage(e,t)),this.onFileValidationFail(n)},e.prototype._uploadFail=function(e,t){return this.showTagErrorMessage(t),this._showNormalText(),this.onUploadFail(e)},e.prototype._uploadSuccess=function(e,t){return e.find(".progress-bar").css("width","100%"),this._showNormalText(),this.onUploadSuccess(e,t)},e.prototype._createAttachmentFail=function(e,t,n){return n.errors.file?$.each(n.errors.file,function(n){return function(r,i){var s;return s=i.indexOf("已超")<0?n.fileUploadErrorMessage(t,i):i,n._uploadFail(e,s+"，请重选")}}(this)):this._uploadFail(e,n.errors+"，请重选")},e.prototype._createAttachment=function(e,t,n){return n==null&&(n=null),$.ajax({type:"POST",url:this.uploadUrl,data:t,dataType:"json"}).done(function(e){if(n!=null)return n(e)}).fail(function(n){return function(r){var i;return i=$.parseJSON
(r.responseText),n._createAttachmentFail(e,t.filename,i)}}(this))},e.prototype._createOptions=function(e){var t;return t=this.useXhrFileUpload?{}:{return_url:this.uploadUrl},e||(e={}),e.paramName="file",e.dataType="json",e.dropZone||(e.dropZone=null),e.add=function(e){return function(n,r){var i,s;return e._showUploading(),GD.clearErrorMessageBelow(e.messageContainer()),e.beforeAdd(r)?(s=r.files[0],i=e.validateOnFile(s),i.length===0?$.post(e.tokenUrl,t,function(t){var n;r.filename=s.name,r.formData={accept:"text/plain; charset=utf-8",token:t.token},n=e.getDataContext(s.name),n&&(r.context=n),r.submit(),e.afterSubmit(r);if(!e.useXhrFileUpload)return $(".progress[data-filename='"+r.filename+"'] .progress-bar").attr("data-transitiongoal","95").progressbar()},"json").fail(function(t){var n;return n=JSON.parse(t.responseText),e._onAddFail(s.name,n.errors,r)}):e._onAddFail(s.name,i,r)):!1}}(this),e.progress=function(e,t){var n;if(t.context)return n=parseInt(t.loaded/t.total*95,10),$(".progress[data-filename='"+t.filename+"'] .progress-bar").css("width",n+"%")},e.always=function(e){return function(t,n){var r,i;return r=e.progressBar(n),n.textStatus==="error"?(i=$.parseJSON(n.jqXHR.responseText),e._uploadFail(r,i.error)):(n.result.filename=n.filename,e.useXhrFileUpload?e._createAttachment(r,n.result,function(t){return e._uploadSuccess(r,t)}):n.result.errors?e._createAttachmentFail(r,n.result.filename,n.result):e._uploadSuccess(r,n.result))}}(this),e},e.prototype.fileUpload=function(){return this.$fileInput.fileupload(this._createOptions(this.initOptions))},e}()}.call(this),function(){var e,t=function(e,t){function i(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;e=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.showInPreview=function(e){var t;return t=typeof e=="string"?e:e.join("，"),this.context.find(".gdimage-preview").html(e)},n.prototype.onShowUploading=function(){return this.showInPreview(""),GD.disableBtn(this.context.find(".cke_dialog_ui_button_ok"))},n.prototype.onShowNormalText=function(){return GD.enableBtn(this.context.find(".cke_dialog_ui_button_ok"))},n.prototype.validateOnFile=function(e){return GD.validateFile(e,1048576,/.*\.(jpg|jpeg|png|gif)$/gi)},n.prototype.getDataContext=function(e){return this.context},n.prototype.showTagErrorMessage=function(e){return this.showInPreview(e)},n.prototype.afterSubmit=function(e){return this.showInPreview("<div class='progress-container'><div class='progress' data-filename='"+e.filename+"'><div class='progress-bar'></div></div></div>图片上传中...")},n.prototype.onUploadSuccess=function(e,t){return this.context.find(".gdimage-src input:text").val(t.image_large_path),this.showInPreview("<img src='"+t.image_large_path+"' />")},n}(GD.ImageUpload),$(function(){var t;return t=".cke_dialog .gdimage-upload input:file",$(t).livequery(function(){if(CKEDITOR.dialog.getCurrent())return(new e(t,$(this),$(CKEDITOR.dialog.getCurrent().getElement().$))).fileUpload()})})}.call(this),function(){var e,t;e=function(e){var t,n,r,i;return t=e.data(),r=$('<div class="help-document-popup"></div>'),n=$("<p>"+t.title+"<br />"+t.content+"</p>"),r.append(n),t.hyperlinkText&&t.hyperlinkTextUrl&&(i=$("<p class='footer'><a target='_blank' href='"+t.hyperlinkTextUrl+"'>"+t.hyperlinkText+"</a></p>"),r.append(i)),r},t=function(t){if(!t.data().title)return;return t.gdClickTooltip({content:e(t),maxWidth:400,minWidth:200,speed:600,theme:"gd-tooltip-help-document"}),t.attr("title",$.trim(t.data().title))},$(function(){return $(".help-document-tooltip").livequery(function(){return t($(this))})})}.call(this),function(){var e,t,n,r,i,s;r=function(){var e,t;return t=GD.currentUserId||"",e="presence_user_"+t,GD.currentOrganization&&(e=e+"_"+GD.currentOrganization),GD.channel=GD.pusher.subscribe(e)},s=function(e,t){var n,r;return r=localStorage[e],n=[],!r||(n=JSON.parse(r)),_.findWhere(n,{entry_id:t.entry_id})||n.push(t),localStorage[e]=JSON.stringify(n)},e=function(e){return $("<span class='new-entry-count gd-red-badge'>"+e+"</span>").insertAfter("ul.menu-nav li .form-menu-item")},i=function(e){return _.template("<li><span class='message-container'><i class='gd-icon-form'></i><a href='/forms/{{formData.token}}'>{{formData.name}}</a> 新增一条数据</span></li>")({formData:e})},t=function(){return GD.channel.bind("new_entry",function(t){var n,r,i,o,u,a;return a=$("ul.menu-nav li .new-entry-count"),a.length===0?e(1):a.text(parseInt(a.text())+1),o=t.message.form.name,u=t.message.form.token,r=t.message.form.entry_id,i="<li><span class='message-container'><i class='gd-icon-form'></i><a href='/forms/"+u+"'>"+o+"</a> 新增一条数据</span></li>",n="new_entry_bind_"+t.message.token,s("pusher_new_entries",{token:u,name:o,entry_id:r})})},$(document).on("ready",function(){if($(".menu-nav .form-menu-item").length!==0)return r(),t()}),n=function(){return GD.weixinBindChannel.bind("success",function(e){if($("#notification_setting .weixin-bind-content-section, #form_setting #notification").length===0)return;return Turbolinks.visit(window.location.pathname),setTimeout(function(){return GD.showFlashNotification("绑定微信提醒成功")},2e3)})},$(document).on("page:load ready",function(){var t;!localStorage.pusher_new_entries||(t=JSON.parse(localStorage.pusher_new_entries).length,e(t)),$(".menu-nav .form-menu-item").gdHoverTooltip({contentAsHTML:!0,offsetY:-10,offsetX:0,position:"bottom-left",interactiveTolerance:500,onlyOne:!0,theme:"header-pusher-messages gd-tooltip-list-over",functionBefore:function(e,t){return localStorage.pusher_new_entries?(_.each(JSON.parse(localStorage.pusher_new_entries),function(e){return $(".push-message-container ul.new-entries").append(i(e))}),e.tooltipster("content",$(".push-message-container ul.new-entries")),t()):$(this).tooltipster("hide")},functionAfter:function(e){return localStorage.removeItem("pusher_new_entries"),$("ul.menu-nav li .new-entry-count").remove(),$(".push-message-container ul.new-entries").empty()}});if($("#notification_setting").length||$("#notification .notification-setting").length)return GD.weixinBindChannel=GD.pusher.subscribe("weixin_bind_"+GD.currentUserId),$("#bind_gd_weixin_modal").on("shown.bs.modal",function(){return n()})})}.call(this),function(){$(function(){return $(document).on("page:load ready",function(){if(GD.isLowVersionIE()&&$(".goods-warning").length===0){$("body").prepend($('<div class="browser-version-warning">您使用的浏览器版本较低，请升级到IE10或使用<a href="http://rj.baidu.com/soft/detail/14744.html" target="_blank">谷歌浏览器</a>获得更佳体验。</div>')),$(".browser-version-warning").css("margin-bottom",$("body").css("padding-top")),$("body").css("padding-top","0");if($("header.navbar.home-page").length>0)return $("header.navbar.home-page").css("top",$(".browser-version-warning").outerHeight())}})})}.call(this),function(){$(document).on("page:load ready",function(){return $(".user-nav .top-settings").gdClickTooltip({offsetY:-10,content:$(".top-settings-popup").html(),theme:"gd-tooltip-menu-over",position:"bottom-right",minWidth:160,functionReady:function(e,t){return GD.logoutLink(t.find(".logout-link")),t.find(".follow-wechat-link").click(function(e){return $("#follow_wechat_modal").modal("show")}),t.find("a[data-method=post]").click(function(e){return e.preventDefault(),$.rails.handleMethod($(this))})}})})}.call(this),function(){var e,t,n;e=function(e){if(e.children("li").length===0)return e.after("<div class='no-notification'><i class='gd-icon-bell'></i>暂无新消息</div>")},t=function(t){var n;return n=$($(".notifications-popup").html()),n.find(".notification-list-container").html(t),e(n.find("ul")),n},n=function(){var e;return e=!1,$(".user-nav .notification-center").gdClickTooltip({offsetY:-10,theme:"header-notification-center gd-tooltip-list-over",functionBefore:function(e,n){if($("#notification_center_unread_count").length===0){e.tooltipster("content",t("<ul />")),n();return}return e.tooltipster("content",'<p class="loading-text">读取中...</p>'),$.get(e.data("url"),function(n){return e.tooltipster("content",t(n)),$("#notification_center_unread_count").remove()}),n()}})},$(document).on("page:load ready",function(){return n()})}.call(this),function(){$(function(){var e,t,n;return e=Backbone.Model.extend({idAttribute:"_id",defaults:{field_api_codes:[],_destroy:!1},fieldApiCodes:function(){var e;return e=this.get("field_api_codes"),e.length===0?[""]:e}}),t=Backbone.Collection.extend({model:e,undeleted:function(){return this.filter(function(e){return!e.get("_destroy")})}}),n=Backbone.View.extend({className:"field-combination-container",events:{"change select":"updateSelectedFields","click [data-role=add]":"addFieldToCombination","click [data-role=delete]":"deleteFieldFromCombination"},initialize:function(){return this.isAdvanced=null},render:function(e){var t,n,r,i,s,o,u,a,f,l;e==null&&(e=null),o=this.collection.indexOf(this.model),e!==null&&(this.isAdvanced=e),r=_.template(this.isAdvanced?this._resultSearchFieldCombinationAdvancedTemplate():this._resultSearchFieldCombinationSimpleTemplate()),i=_.template($("#result_search_criteria_field_"+(this.isAdvanced?"advanced":"simple")+"_template").html()),l=this.collection.undeleted(),a=this.model.toJSON(),a.index=o,!this.isAdvanced&&_.indexOf(l,this.model)>0&&(a._destroy=!0),this.$el.html(r(a)),a._destroy&&this.$el.addClass("gd-hide"),f=this.model.fieldApiCodes();for(n=s=0,u=f.length;s<u;n=++s){t=f[n];if(!this.isAdvanced&&n>0)break;this.$(".field-combination").append(i({fieldApiCode:t,fieldApiCodeIndex:n,fieldCombinationIndex:o}))}return this},_resultSearchFieldCombinationSimpleTemplate:function(){return'<div class="field-combination"></div>\n[[ if (typeof _id != \'undefined\') { ]]\n<input type="hidden" value="{{ _id }}" name="form_setting[result_search_field_combinations_attributes][{{ index }}][id]" data-role="id">\n[[ } ]]\n<input type="hidden" value="{{ _destroy }}" name="form_setting[result_search_field_combinations_attributes][{{ index }}][_destroy]" data-role="_destroy">'},_resultSearchFieldCombinationAdvancedTemplate:function(){return'<ul class="field-combination"></ul>\n[[ if (typeof _id != \'undefined\') { ]]\n<input type="hidden" value="{{ _id }}" name="form_setting[result_search_field_combinations_attributes][{{ index }}][id]" data-role="id">\n[[ } ]]\n<input type="hidden" value="{{ _destroy }}" name="form_setting[result_search_field_combinations_attributes][{{ index }}][_destroy]" data-role="_destroy">\n<p>或</p>'},updateSelectedFields:function(){var e,t;return t=function(){var t,n,r,i;r=this.$("select"),i=[];for(t=0,n=r.length;t<n;t++)e=r[t],i.push($(e).val());return i}.call(this),this.model.set({field_api_codes:t})},addFieldToCombination:function(e){var t,n,r;return n=$(e.target).closest("li"),t=this.$("li").index(n),r=this.model.fieldApiCodes(),r.splice(t+1,0,""),this.model.set({field_api_codes:r}),this.render(),this.collection.trigger("addRemoveCondition")},deleteFieldFromCombination:function(e){if($(e.target).closest("ul").children().length!==1)return $(e.target).closest("li").remove(),this.updateSelectedFields(),this.render(),this.collection.trigger("addRemoveCondition");if($(".field-combination-container:visible").length>1)return this.deleteFieldCombination()},deleteFieldCombination:function(){return this.model.set({_destroy:!0}),this.$("input[data-role=_destroy]").val(!0),this.$el.addClass("gd-hide"),this.collection.trigger("remove",this.model),this.collection.trigger("addRemoveCondition")}}),GD.ResultSearchSettingView=Backbone.View.extend({el:"#form_setting .result-search-fields",events:{"click [data-role=switch-setting]":"switchResultSearchSetting","click [data-role=add-field-combination]":"addFieldCombination"},initialize:function(){var e;return this.conditionLimit=this.$("[data-condition-limit]").data("condition-limit"),e=this.$("[data-field-combinations]").data("field-combinations"),this.collection=new t(e),this.collection.length===0&&this.collection.add({}),this.isAdvanced=_.flatten(this.collection.pluck("field_api_codes")).length>1,this.listenTo(this.collection,"add",this.render)},helpDocument:function(e){var t;return t=GD.helpDocumentJson[e]||{},"<div>"+t.content+"</div>"},render:function(e){var t,r;e==null&&(e=null),this.$(".content").empty(),this.$(".title").html("查询条件："),e!==null&&(this.isAdvanced=e),this.collection.each(function(e){return function(t){return e.$(".content").append((new n({model:t,collection:e.collection})).render(e.isAdvanced).$el)}}(this)),this.isAdvanced?(this.$(".title").append("<a data-role='switch-setting' href='javascript:void(0)'>切换到简单模式</a>"),this.$(".title").append(this.helpDocument("help_doc_advance_search_share")),this.$(".content").append('<a data-role="add-field-combination" class="gd-btn gd-btn-info gd-btn-small" href="javascript:void(0)">添加条件组</a>')):(t=!this.$(".title").data("advanced-search-available"),this.$(".title").append("<a data-role='switch-setting' href='javascript:void(0)' data-feature-name='advanced_search' data-need-upgrade='"+t+"'>切换到高级模式</a>"),this.$(".title").append(this.helpDocument("help_doc_simple_search_share"))),r=$("select[name='form_setting[result_search_authority]']").val();if(r==="public"||r==="protected")return $(".result-search-tip").show()},switchResultSearchSetting:function(e){if(!$(e.target).data("need-upgrade"))return this.render(!this.isAdvanced)},addFieldCombination:function(){return this.collection.add({field_api_codes:[""]}),this.collection.trigger("addRemoveCondition")},_updateAvailability:function(){var e,t,n,r,i,s,o,u,a;n=this.collection.reduce(function(e,t){return e+t.get("field_api_codes").length},0),e=this.$("[data-role=add-field-combination], .field-combination-container [data-role=add]");if(n>=this.conditionLimit){u=[];for(r=0,s=e.length;r<s;r++)t=e[r],u.push(GD.disableBtn(t));return u}a=[];for(i=0,o=e.length;i<o;i++)t=e[i],a.push(GD.enableBtn(t));return a}})})}.call(this),function(){window.GD||(window.GD={}),GD.adjustViewPosition=function(e,t){var n,r,i,s,o,u;u=$(t+" .editing:visible");if(u.length>0)return s=$(e).parents(".accordion"),o=$(t).offset().top+s.find(".accordion-heading").outerHeight()*2,n=u.offset().top-o-3,n<0&&(n=0),s.animate({marginTop:n},300),i=u.offset().top-$(t).offset().top+u.outerHeight()/2,r=$(".sidebar").find(".arrow-left-outer"),r.animate({marginTop:i},300,function(){return r.show()})},GD.resetButtonPosition=function(e){var t,n,r,i,s,o;t=$(e);if(t.length===0)return;return $(document).height()<=$(window).height()?t.removeClass("fixed"):(n=$(window).height()-t.outerHeight(),r=t.prev(":visible"),s=parseFloat(r.css("marginBottom"))||0,i=(r.offset()?r.offset().top:0)+r.outerHeight()+s,o=i>n+$(window).scrollTop(),t.toggleClass("fixed",o))}}.call(this),function(){var e,t,n,r,i,s,o,u,a;$(document).on("page:load ready",function(){if($("#rule_design").length===0)return;return $('#rule_design a[data-toggle="tab"]').on("shown.bs.tab",function(e){var t;return t=$(this).attr("href"),$(t+" .field.editing dl").click(),$(e.target).attr("href")==="#field_rule"?$(".sidebar.redirect-rule-setting").addClass("gd-hide"):$(".sidebar.field-rule-setting").addClass("gd-hide"),GD.resetButtonPosition("#rules_preview .buttons")}),$("#rule_design").on("click","#add_redirect_rule_toggle",function(){return GD.formRedirectRules.newRule({_type:"redirect_rule"})}),$("#rule_design").on("click","#save_redirect_rules",function(){return GD.formRedirectRules.save()}),$("#rule_design").on("click","#add_field_rule_toggle",function(){return GD.formFieldRules.newRule({_type:"field_rule"})}),$("#rule_design").on("click","#save_field_rules",function(){return GD.formFieldRules.save()})}),u=Backbone.Model.extend({defaults:{trigger:"",condition:"",condition_name:""},validateBase:function(e){if(e.target==="")return"请选择触发字段";if(e.condition==="")return"请选择触发条件"}}),e=u.extend({defaults:{targets:[]},constructor:function(e){return this.defaults=_.extend(this.defaults,u.prototype.defaults),u.prototype.constructor.apply(this,[e])},validate:function(e){var t;t=u.prototype.validateBase.apply(this,[e]);if(t)return t;if(e.targets.length<1)return"请选择被触发的字段"}}),i=u.extend({defaults:{redirect_url:""},constructor:function(e){return this.defaults=_.extend(this.defaults,u.prototype.defaults),u.prototype.constructor.apply(this,[e])},validate:function(e){var t;t=u.prototype.validateBase.apply(this,[e]);if(t)return t;if(e.redirect_url==="")return"请设置跳转的网址"}}),n=Backbone.Collection.extend({model:e}),o=Backbone.Collection.extend({model:i}),a=Backbone.View.extend({events:{"click .trigger li":"selectTrigger","click .condition li":"selectCondition"},_initTriggerViewBase:function(e,t){var n;return e==null&&(e=null),t==null&&(t=null),n=this.$(".trigger li[data-api-code='"+e+"']"),this.$(".trigger .selected").removeClass("selected"),n.addClass("selected"),this.$(".condition ul").empty(),_.each(n.data("choices"),function(e){return function(t){var n,r,i,s,o;return typeof t=="object"?(r=t.name,i=(o=t.value)!=null?o:r,n=t.hidden):(r=t,i=t,n=!1),s=e._buildHiddenChoice(r,i,n),e.$(".condition ul").append(s)}}(this)),this.$(".condition li[data-value='"+t+"']").addClass("selected")},_buildHiddenChoice:function(e,t,n){return n?"<li data-value='"+t+"' title='此选项已被隐藏' class='hidden-indicator with-tooltip' data-tooltip-position='top'>"+e+"</li>":"<li data-value='"+t+"'>"+e+"</li>"},selectCondition:function(e){var t;t=$(e.target);if(t.hasClass("hidden-indicator"))return;this.$(".condition .selected").removeClass("selected"),t.addClass("selected");if(this.model)return this.model.set({condition:t.data("value"),condition_name:t.text()})},renderBase:function(e){return this.$el.closest(".sidebar").removeClass("gd-hide"),this.model=e}}),t=a.extend({el:"#field_rule_setting",events:{"change .targets input:checkbox":"updateTargets"},constructor:function(e){return this.events=_.extend(this.events,a.prototype.events),a.prototype.constructor.apply(this,[e])},_hideTriggerFromTargets:function(e){var t;this.$(".targets li.no-targets-available").remove(),this.$(".targets li:hidden").show(),this.$(".targets input:disabled").removeAttr("disabled"),t=this.$(".targets input[value='"+e+"']").parents("li").prevAll().addBack(),t.hide(),t.find("input").attr("disabled",!0).attr("checked",!1);if(this.$(".targets li:visible").length===0)return this.$(".targets").append("<li class='no-targets-available'>没有可供控制的字段，因为“"+GD.formFieldRules.fields[e]+"”是该表单最后一个字段</li>")},_initTriggerView:function(e,t){return e==null&&(e=null),t==null&&(t=null),a.prototype._initTriggerViewBase.apply(this,[e,t]),this._hideTriggerFromTargets(e)},selectTrigger:function(e){var t,n;n=$(e.target).data("api-code"),this.model.set({trigger:n});if(this.model.hasChanged("trigger"))return this._initTriggerView(n),t=_.without(this.model.get("targets"),n),this.model.set({condition:"",targets:t})},updateTargets:function(){var e;return e=_.map(this.$(".targets input:checked"),function(e){return $(e).val()}),this.model.set({targets:e})},render:function(e){return a.prototype.renderBase.apply(this,[e]),this._initTriggerView(e.get("trigger"),e.get("condition")),this.$(".targets input:checked").attr("checked",!1),_.each(e.get("targets"),function(e){return this.$(".targets input[value='"+e+"']").prop("checked",!0)})}}),s=a.extend({el:"#redirect_rule_setting",events:{"change input[name=redirect_url]":"updateRedirectUrl"},constructor:function(e){return this.events=_.extend(this.events,a.prototype.events),a.prototype.constructor.apply(this,[e])},_initTriggerView:function(e,t){return e==null&&(e=null),t==null&&(t=null),a.prototype._initTriggerViewBase.apply(this,[e,t]),this.$("input[name=redirect_url]").val(this.model.get("redirect_url"))},selectTrigger:function(e){var t;t=$(e.target).data("api-code"),this.model.set({trigger:t});if(this.model.hasChanged("trigger"))return a.prototype._initTriggerViewBase.apply(this,[t])},updateRedirectUrl:function(e){return this.model.set({redirect_url:$(e.target).val()})},render:function(e){return a.prototype.renderBase.apply(this,[e]),this._initTriggerView(e.get("trigger"),e.get("condition"))}}),r=Backbone.View.extend({tagName:"div",className:"field",events:{"click dl":"edit","click .delete":"delete","click .duplicate":"duplicate"},_resetType:function(e){if(e==="field_rule"||e==="FieldRule")this.type="field_rule";if(e==="redirect_rule"||e==="RedirectRule")return this.type="redirect_rule"},initialize:function(e){return this.model.on("change",this.render,this),this.model.on("remove",this.remove,this),this.ruleList=e.ruleList,this._resetType(this.model.get("_type"))},render:function(){var e,t;return t=_.template($("#"+this.type+"_show_template").html()),e=this.model.toJSON(),e.triggerLabel=this.ruleList.fields[e.trigger],e.targetsLabels=_.map(e.targets,function(e){return function(t){return e.ruleList.fields[t]}}(this)).join("<br/>"),$(this.el).html(t(e)),this.$el.toggleClass("error",!this.model.isValid()),this},edit:function(){return $("#"+this.type+" .editing").removeClass("editing"),this.$el.addClass("editing"),this.ruleList.ruleEditView.render(this.model),GD.adjustViewPosition("#"+this.type+"_setting","#rules_preview")},"delete":function(){return this.ruleList.remove(this.model)},duplicate:function(){return this.ruleList.duplicate(this.model)}}),GD.FormFieldRules=function(){function e(e,i,u){this.formToken=e,this.fields=i,this.type=u,this.type==="field_rule"?(this.ruleList=new n,this.ruleEditView=new t):this.type==="redirect_rule"&&(this.ruleList=new o,this.ruleEditView=new s),this.ruleList.on("add",function(e){return function(t,n){var i,s;if(t.get("_type")==="field_rule"||t.get("_type")==="FieldRule")e.type="field_rule";if(t.get("_type")==="redirect_rule"||t.get("_type")==="RedirectRule")e.type="redirect_rule";$("#rules_preview ."+e.type+".no-field-alert:visible").hide(),$("#"+e.type+" .buttons:hidden").show(),e.type==="field_rule"?s=new r({model:t,ruleList:GD.formFieldRules}):e.type==="redirect_rule"&&(s=new r({model:t,ruleList:GD.formRedirectRules})),$("#"+e.type+" .rules .field").length===0?$("#"+e.type+" .rules").append(s.render().el):(i=n.indexOf(t),$("#"+e.type+" .rules .field:nth-child("+i+")").after(s.render().el));if(!t.get("_id"))return s.$("dl").trigger("click")}}(this)),this.ruleList.on("remove",function(e,t){return t.length===0&&$("#rules_preview .no-field-alert:hidden").show(),$(".sidebar").addClass("gd-hide")})}return e.prototype.newRule=function(e){return e==null&&(e={}),this.ruleList.push(e)},e.prototype.save=function(){var e;return e="/forms/"+this.formToken+"/rules/save_"+this.type+"s",$.ajax(e,{type:"patch",data:{rules:this.ruleList.toJSON()},success:function(e){return function(){return GD.showFlashNotification("规则保存成功！"),$("#save_"+e.type+"s").html($("#save_"+e.type+"s").data("enabled-with")),GD.enableBtn($("#save_"+e.type+"s"))}}(this)})},e.prototype.remove=function(e){return this.ruleList.remove(e)},e.prototype.duplicate=function(e){var t,n;return t=_.omit(e.attributes,["_id"]),n=this.ruleList.indexOf(e)+1,this.ruleList.add(t,{at:n})},e}()}.call(this),function(){var e,t,n;t=function(e,t,n){var r;return n==null&&(n=!0),r=this.$(e),t?(n?r.slideDown():r.show(),r.find("input, select").prop("disabled",!1),r.find(".copy-link").removeClass("disabled")):(n?r.slideUp():r.hide(),r.find("input, select").prop("disabled",!0),r.find(".copy-link").addClass("disabled"))},n=function(){var e,t,n;return t={},$("#payment_redirect_exception_rules [data-role=cascade]").each(function(){var e,n;n=$(this).find("[data-role=level_1]").val(),e=$(this).find("[data-role=level_2]").val();if(e)return t[n+":"+e]=$(this).find("[data-role=level_2] option:selected").text()}),n=$("#payment_redirect_exception_rules").next(".summary"),e=_.values(t),e.length>0?(n.show(),n.find(".content").text(e.join("、")),n.find(".count").text(e.length)):n.hide()},GD.TimePeriod=function(){function e(e){this.attrs=e}return e.prototype.validate=function(){var e,t;t=GD.parseDate(this.attrs.start_date),t&&(t.setHours(this.attrs.start_hour),t.setMinutes(this.attrs.start_minute)),e=GD.parseDate(this.attrs.end_date),e&&(e.setHours(this.attrs.end_hour),e.setMinutes(this.attrs.end_minute));if(t&&e&&t>e)return this.errorMessage="结束时间不能早于开始时间"},e.prototype.isValid=function(){return this.validate(),!this.errorMessage},e}(),e=Backbone.View.extend({el:"#form_setting form",events:{"change select[name='form_setting[entry_submit]']":"toggleSuccessConfig","change select[name='form_setting[result_authority]']":"toggleResultAuthorityConfig","change select[name='form_setting[result_search_authority]']":"toggleResultSearchAuthorityConfig","change input:checkbox[name='form_setting[send_entry_data]']":"toggleEntryPostConfig","change input:checkbox[name='form_setting[share_scope][]']":"toggleSharedFieldsStatus","change #form_setting_entry_post_url":"validateEntryPostUrl","change input:checkbox[name='form_setting[weixin_limited]'], input:checkbox[name='form_setting[weixin_followers_only]']":"toggleWeixinFollowerOnlyConfig"},initialize:function(){return this.errors={},this.$("textarea[data-counter-rel], input[data-counter-rel]").charLimiter(),this.resultSearchSettingView=new GD.ResultSearchSettingView,this.resultSearchSettingView.render()},_toggleConfig:function(e,t,n){var r;r=e.parents("label").next(".config");if(e.is(":checked")){r.slideDown();if(t)return t(r)}else{r.slideUp();if(n)return n(r)}},_updateSubmitBtn:function(e){return $.isEmptyObject(this.errors)?e.find("input:submit").attr("disabled",!1):e.find("input:submit").attr("disabled",!0)},_resetNumberFieldWhenInvalidOnHtml5:function(e){if(e.val()==="")return e.val("")},_clearErrorMessage:function(e){var t;return t=e.parents(".config"),t.find(".error").removeClass("error"),t.find(".error-message").remove()},_validateByEntryPostUrl:function(e){var t;return this._clearErrorMessage(e),GD.validateURL(e.val())?delete this.errors.EntryPostUrl:(t="请输入合法的URL地址，例如：http://jinshuju.net/callback",GD.showTooltipErrorIfHave(e,t,!0),this.errors.EntryPostUrl=t)},validateEntryPostUrl:function(e){var t;return t=$(e.target),this._validateByEntryPostUrl(t),this._updateSubmitBtn(t.closest("form"))},toggleSuccessConfig:function(){var e;e=this.$("select[name='form_setting[entry_submit]']").val();if($("#success_redirect_modal").length>0&&e==="redirect")return;return this.$(".config[data-value]").hide(),this.$(".config[data-value='"+e+"']").show()},toggleResultAuthorityConfig:function(e){var n,r;r=$(e.target),n=this.$(".share-fields input[value=entries], .share-fields input[value=reports]");switch(r.val()){case"public":return t("#result_view_password",!1),$(".visible-share-public:visible").length===0&&n.prop("checked",!0).trigger("change"),$(".results-link .copy-target, .results-link .copy-link").removeClass("disabled").prop("disabled",!1),this.$(".visible-share-public").slideDown(),this.toggleLinkContainer("#tab_results .results-link",!0);case"protected":return t("#result_view_password",!0),$(".visible-share-public:visible").length===0&&n.prop("checked",!0).trigger("change"),$(".results-link .copy-target, .results-link .copy-link").removeClass("disabled").prop("disabled",!1),this.$(".visible-share-public").slideDown(),this.toggleLinkContainer("#tab_results .results-link",!0);default:return t("#result_view_password",!1),$(".results-link .copy-target, .results-link .copy-link").addClass("disabled").prop("disabled",!0),this.$(".visible-share-public").slideUp(),n.prop("checked",!1).trigger("change"),this.toggleLinkContainer("#tab_results .results-link",!1)}},toggleFieldList:function(e){var t;return t=$(e.target),this._toggleConfig(t,null,null)},toggleLinkContainer:function(e,t){return t?$(e).children().prop("disabled",!1).removeClass("disabled"):$(e).children().prop("disabled",!0).addClass("disabled")},toggleResultSearchAuthorityConfig:function(e){var n,r;r=$(e.target).val(),n=$(".result-search-tip"),r==="private"?n.hide():n.show();switch(r){case"public":return t("#result_search_view_password",!1),t(".visible-search-public",!0),this.toggleLinkContainer("#tab_results .result-search-link",!0);case"protected":return t("#result_search_view_password",!0),t(".visible-search-public",!0),this.toggleLinkContainer("#tab_results .result-search-link",!0);default:return t("#result_search_view_password",!1),t(".visible-search-public",!1),this.toggleLinkContainer("#tab_results .result-search-link",!1)}},toggleWeixinFollowerOnlyConfig:function(e){if($("input[name='form_setting[weixin_collect_way]']:checked").val()==="own")return this._toggleConfig($(e.target))},toggleSharedFieldsStatus:function(e){var t,n;return t=$(e.target).val()==="entries"?$("#share_entry_fields .checkbox"):$("#share_report_fields .checkbox"),n=$(e.target).prop("checked"),t.toggleClass("disabled",!n),t.find("input").attr("disabled",!n)},toggleEntryPostConfig:function(e){var t;return t=$(e.target),this._toggleConfig(t,function(e){return function(){return e._validateByEntryPostUrl($("#form_setting_entry_post_url"))}}(this),function(e){return function(){return delete e.errors.EntryPostUrl}}(this)),this._updateSubmitBtn(t.closest("form"))}}),$(document).on("page:load ready",function(){if($("#form_setting").length===0)return;return GD.formSetting=new e,$("#form_setting").on("click",".need-switch[data-need-upgrade=true] + .switchery",function(){var e;return e=$(this).prev("[data-feature-name]").data("feature-name"),$("#paid_feature_"+e+"_modal").modal("show")}),$("#form_setting").on("change",".need-switch",function(){var e;if($(this).is(":checked")!==$(this).data("checked")){$(this).data("checked",$(this).is(":checked"));if($(this).data("url")&&!$(this).data("disabled"))return $.ajax({url:$(this).data("url"),data:(e={on:$(this).is(":checked")},e[""+$(this).attr("name")]=$(this).is(":checked"),e),type:$(this).data("method")||"post",complete:function(e){return function(t){var n,r,i;if(t.status===200){GD.updateSwitchText($(e)),r=$(e).data("target"),r?($(r).html(t.responseText),n=$(r).find(".switch-toggle-notification").data("message"),n&&GD.showFlashNotification(n.notice),$(e).trigger("ajax:complete")):GD.showFlashNotification(t.responseText||"设置保存成功"),i=$(e).data("toggle-content");if(i)return $(e).is(":checked")?$(i).slideDown():$(i).slideUp()}}}(this)})}}),$("#form_setting").on("ajax:complete","form",function(t,n,r){var i;if($(t.target).hasClass("repush-api"))return;if($(t.target).hasClass("weixin-info"))return;if($(t.target).hasClass("modal-form-setting")&&r!=="success")return;r==="success"?GD.showFlashNotification("设置保存成功"):GD.showFlashNotification("设置保存失败","danger"),i=$(this).find("[name='form_setting[target]']").val();if(!GD.isEmpty(n.responseText))return $("#"+i).html(n.responseText),GD.formSetting=new e}),$("#form_setting").on("change","input:checkbox[name='form_setting[success_redirect_fields][]']",function(){if($(this).is(":checked")&&$(this).closest(".fields-list").find("input:checked").length>3)return $(this).prop("checked",!1),GD.showFlashNotification("最多可以选择3个附加参数","danger")}),$("#form_setting").on("ajax:complete",".cancel-schedule",function(e,t,n){if(n==="success")return $(this).closest(".notification-setting").find(".schedule-history").html(t.responseText)}),$("#form_setting").on("click","#notification .email-notification-setting .entry-push-sample:not(.disabled)",function(){return GD.countDown($(this),60,"测试"),$.get($(this).data("url"),function(e){return GD.showFlashNotification("推送测试消息成功")})}),_.each($("#form_setting .field-placeholder"),function(e){return GD.insertFieldsBaseTooltip(e)}),$("#advanced_sms_notification_modal").find(".field-placeholder").livequery(function(){return GD.insertFieldsBaseTooltip(this)}),$("#advanced_email_notification_modal").find(".field-placeholder").livequery(function(){return GD.insertFieldsBaseTooltip(this)}),$(".advanced-notification-modal").on("loaded.bs.modal",function(){return ReactRailsUJS.mountComponents()}),$("#tab_pay").on("change","#payment_redirect_exception_rules select[data-role=level_1]",function(){return $(this).closest("li").find("select[data-role=level_2]").trigger("change")}),$("#tab_pay").on("change","#payment_redirect_exception_rules select[data-role=level_2]",n),$("#tab_pay").on("click","#payment_redirect_exception_rules .add-new",function(){var e,t,n;return n=_.template($("#payment_redirect_exception_rule_template").html()),e=$("#payment_redirect_exception_rules").data("number"),t=$(n({index:e})),$(this).closest("li").before(t),GD.initCascadeSelector(t),$("#payment_redirect_exception_rules").data("number",e+1)}),$("#tab_pay").on("click","#payment_redirect_exception_rules .delete",function(){return $(this).closest("li").remove(),n()})})}.call(this),function(){$(document).on("page:load ready",function(){var e;if($(".sms-notification-setting:visible").length>0)return url("?todo")==="open-notification-modal"&&(e=url("?what"),$("[data-what='"+e+"'").trigger("click"
)),$("#form_setting").on("ajax:complete",".notification-rule-action",function(e,t,n){return n==="success"?($(this).closest("li").remove(),GD.showFlashNotification("删除成功")):GD.showFlashNotification("删除失败","danger")});return}),$(document).on("shown.bs.modal","#email_rule_disabled_by_custom_smtp_without_ability_modal, #email_rule_disabled_with_smtp_auth_error_modal",function(){var e;e=$(this).data("element");if(e)return $(this).find(".sender-email").text(e.closest(".panel").find(".email-sender").text())}),$(function(){var e,t;return $(document).on("shown.bs.modal",".advanced-notification-modal",function(){if(!$(this).data("setting-view"))return new e({el:$(this)})}),t=function(e,t,n){var r;return n==null&&(n=!0),r=this.$(e),t?(n?r.slideDown():r.show(),r.find("input, select").prop("disabled",!1)):(n?r.slideUp():r.hide(),r.find("input, select").prop("disabled",!0))},e=Backbone.View.extend({events:{"change select[name='advanced_notifications_rule[is_all]']":"onIsAllChange","change [name='advanced_notifications_rule[send_timing]']":"onSendTimingChange","change select[name='advanced_notifications_rule[schedule_rule][date_offset_action]']":"onDateOffsetChange","change select[name='advanced_notifications_rule[is_specified_recipient]']":"onRecipientChange","change select[name='advanced_notifications_rule[condition_key]']":"onConditionKeyChange","loaded.bs.modal":"render"},initialize:function(){return this.$el.data("setting-view",this)},render:function(){var e;e=this.$("textarea[name='advanced_notifications_rule[content]']"),e.is(".rich-editor")?GD.initCKEditor($(".advanced-notification-modal textarea.rich-editor")):e.placeholder(),this._updateConditionValueField(this.$("select[name='advanced_notifications_rule[condition_key]']"));if(!this.$(".content").data("field-placeholder-initialized"))return new FieldPlaceholderInsertion({el:this.$(".content")})},onIsAllChange:function(e){var n;n=$(e.target).val()==="false",t(".condition-setting",n);if(n)return this._updateConditionValueField(this.$("select[name='advanced_notifications_rule[condition_key]']"))},onSendTimingChange:function(e){var n,r,i,s;n=$(e.target).closest(".form-group"),r=n.find("[name='advanced_notifications_rule[send_timing]']"),i=r.val(),t(n.find(".select-trigger-target[data-option="+i+"]"),!0),t(n.find(".select-trigger-target[data-option!="+i+"]"),!1),s=$(this).parents(".modal.dialog").find(".modal-footer .submit");if(i!=="scheduled_with_rule")return s.removeClass("disabled");if(r.data("need-upgrade"))return s.addClass("disabled")},onDateOffsetChange:function(e){return $(e.target).val()!=="that_day"?this.$(".scheduled-offset").show():this.$(".scheduled-offset").hide()},onRecipientChange:function(e){switch($(e.target).val()){case"true":return t(".recipient_input",!0,!1),t(".recipient_api_code_input",!1,!1);case"false":return t(".recipient_api_code_input",!0,!1),t(".recipient_input",!1,!1)}},onConditionKeyChange:function(e){return this._updateConditionValueField($(e.target))},_updateConditionValueField:function(e){var t,n,r,i,s,o,u,a;r=e.closest(".condition-setting"),i=$(r.find(".text-input.condition-value")),n=$(e.find("option:selected")).data("choices"),u=r.find(".select-input"),i.prop("disabled",!0).hide(),u.prop("disabled",!0).hide();if((n!=null?n.length:void 0)>0){u.prop("disabled",!1),u.html("");for(s=0,o=n.length;s<o;s++)t=n[s],a=t.value===i.val()?"selected":"",u.append("<option value='"+t.value+"' "+a+">"+t.name+"</option>");return u.show(),r.find(".text-input").val("")}return r.find(".text-input").prop("disabled",!1).show()}})}),GD.notificationRuleToggleSuccessCallback=function(e){var t,n;return t=e.parents(".panel").find(".rule-status"),e.is(":checked")?n=$('<span class="success"><i class="gd-icon-check-circle"></i> 推送中</span>'):n=$('<span class="highlight"><i class="gd-icon-pause"></i> 已暂停</span>'),t.html(n)}}.call(this),function(){GD.DashboardBreadcrumbsView=Backbone.View.extend({el:"#dashboard_breadcrumbs",events:{"click .breadcrumb-desktop-link":"_backToDesktop","click .folder-share-setting":"_showShareFolderModal"},initialize:function(){return this.ON_DESKTOP_CLASS="on-desktop",this.updateFolder()},updateFolder:function(e,t){return t==null&&(t=""),e?(this.breadcrumbFolderText(e,t),this.$el.fadeIn(GD.DASHBOARD_FADE_EFFECT_DURATION),this.$el.removeClass(this.ON_DESKTOP_CLASS)):(this.$el.fadeOut(GD.DASHBOARD_FADE_EFFECT_DURATION),this.$el.addClass(this.ON_DESKTOP_CLASS))},_backToDesktop:function(){return GD.formCoverListViewsManager.backToDesktop(),this.updateFolder("")},_isOnDesktop:function(){return this.$el.hasClass(this.ON_DESKTOP_CLASS)},currentFolderName:function(){return this.$(".breadcrumb-folder").text()},breadcrumbFolderText:function(e,t){var n;n=this.$(".breadcrumb-folder"),n.text(e);if(GD.isInOrganiztion())return n.prepend('<i class="gd-icon-shared"></i>'),n.append("  <i class='gd-icon-cog folder-share-setting' data-fid = "+t+" ></i>")},_showShareFolderModal:function(){var e;return this.model=new GD.FormFolderAuthority({fid:this.$el.find(".folder-share-setting").data("fid"),name:this.$el.find(".breadcrumb-folder").text().trim()}),e=new GD.FormFolderAuthorityCollectionView({model:this.model}),e.render()}})}.call(this),function(){GD.CoverSettingBaseView=Backbone.View.extend({_backToMainSettingView:function(){return this.$(".dashboard-settings-options").removeClass("gd-hide"),this.$(".content").addClass("gd-hide"),this.$tooltipTrigger.tooltipster("reposition")},_initEditTagsView:function(){var e;return e=new GD.FormTags({form_id:this.model.get("fid"),tag_ids:this.model.get("tags")}),this.tagsView=new GD.FormTagsEditView({model:e,el:this.$(".dashboard-form-tags")},{tooltipTrigger:this.$tooltipTrigger}),this.tagsView.on("tagCreated",function(e,t,n){return GD.userFormTagListView.addTag(e,t)}),this.tagsView.on("tagChanged",function(e){return function(t,n,r,i){return e.model.updateTag(t,r),GD.userFormTagListView.updateTagCount(t,r).updateUntaggedFormsCount(i),GD.formCoverListViewsManager.updateNeedReloadForTagView(t)}}(this))},_manageTags:function(){return this._showSettingSubView(".dashboard-form-tags"),this.tagsView.render(),this.trigger("contentChanged"),this.$tooltipTrigger.tooltipster("reposition")},_showSettingSubView:function(e){return this.$(".dashboard-settings-options").addClass("gd-hide"),this.$(e).removeClass("gd-hide")},_doTogglePin:function(e){var t,n,r,i;return r=$(e.target).closest(".pin-on-top"),r.addClass("working"),i=r.data("path"),n=this.model.get("pinned")?"取消置顶":"置顶",t=this.model.get("fid"),$.ajax({url:i,data:{base_file_id:t},type:"post",success:function(e){return function(r){return e.$tooltipTrigger.tooltipster("hide"),e.model.set("pinned",!e.model.get("pinned")),e.model.get("pinned")?GD.formCoverListViewsManager.getActive().pinCover(t):GD.formCoverListViewsManager.getActive().unpinCover(t),GD.formCoverListViewsManager.updateNeedReloadForViewsContain(t),GD.showFlashNotification(n+"成功")}}(this)}).fail(function(e){return function(t){return e.$tooltipTrigger.tooltipster("hide"),GD.showFlashNotification("{operationName}失败","danger")}}(this))}})}.call(this),function(){GD.FolderCoverSettingView=GD.CoverSettingBaseView.extend({events:{"click .rename-folder":"_renameFolder","click .delete-folder":"_deleteFolder","click .manage-tags":"_manageTags","click .back-to-settings":"_backToMainSettingView","click .pin-on-top":"_doTogglePin","click .share-folder":"_showShareFolderModal"},initialize:function(e,t){return this.$tooltipTrigger=t.tooltipTrigger,this.coverView=t.coverView},render:function(){return this._initEditFolderView(),this._initEditTagsView()},_initEditFolderView:function(){return this.folderEditView=new GD.FormFolderEditingView({model:this.model,el:this.el},{tooltipTrigger:this.$tooltipTrigger,titleText:"编辑",actionText:"确定",backToTargetDom:this.$el.find(".dashboard-settings-options")})},_renameFolder:function(){return this.folderEditView.render(),this.folderEditView.on("formFolderSaved.gd",function(e){return function(t){return e.coverView.updateNameAndSymbol(t),GD.formSettingFolderListView.updateFolder(t)}}(this))},_deleteFolder:function(){return this.model.get("count")>0?(this.$tooltipTrigger.tooltipster("hide"),GD.showConfirmBox("删除文件夹确认","<div>确认要删除文件夹 <span class='highlight'>"+this.model.get("name")+"</span> 吗？此文件夹包含<span class='highlight'>"+this.model.get("count")+"个表单</span>，一旦删除后这些表单将存放在桌面噢</div>",function(e){return function(){return e._doDelete(function(){return GD.formCoverListViewsManager.reloadCurrentView()})}}(this))):this._doDelete(function(e){return GD.formCoverListViewsManager.getActive().removeCover(e.folder_id)},function(e){return function(){return e.$tooltipTrigger.tooltipster("hide")}}(this))},_doDelete:function(e,t){var n;return n=this.$(".form-folder-destroy-link").data("destroy-folder-path"),$.ajax({url:n,data:{id:this.model.get("fid")},type:"delete",success:function(t){return function(n){return e&&e(n),GD.formSettingFolderListView.removeFolder(n.folder_id),GD.userFormTagListView.updateTagCount(GD.SYSTEM_TAGS.ALL_FOLDERS_TAG_ID,!1).addDesktopFormsCount(t.model.get("count")-1).updateTagsCount(t.model.get("tags"),!1),GD.showFlashNotification("删除文件夹成功")}}(this)}).fail(function(e){return function(e){return GD.showFlashNotification("删除文件夹失败","danger")}}(this)).always(function(e){return function(){if(t)return t()}}(this))},_showShareFolderModal:function(){var e;return this.$tooltipTrigger.tooltipster("hide"),e=new GD.FormFolderAuthorityCollectionView({model:this.model}),e.render()}})}.call(this),function(){GD.FormCoverListViewsManager=function(){function e(e){this.needUpdate=e!=null?e:!1,this.TYPE_TAG="tag",this.TYPE_FOLDER="folder",this.container={tag:{},folder:{}}}return e.prototype.addByTag=function(e,t){return this.container[this.TYPE_TAG][e]=t,this.updateActive(this.TYPE_TAG,e),this},e.prototype.addByFolder=function(e,t){return this.container[this.TYPE_FOLDER][e]=t,this.updateActive(this.TYPE_FOLDER,e),this},e.prototype.getBy=function(e,t){var n;return(n=this.container[e])!=null?n[t]:void 0},e.prototype.getByTag=function(e){return this.container[this.TYPE_TAG][e]},e.prototype.getByFolder=function(e){return this.container[this.TYPE_FOLDER][e]},e.prototype.updateActive=function(e,t){return t&&e&&(this.activeId=t,this.activeType=e),this},e.prototype.updateActiveTagId=function(e){return this.updateActive(this.TYPE_TAG,e)},e.prototype.updateActiveFolderId=function(e){return this.updateActive(this.TYPE_FOLDER,e)},e.prototype.getActive=function(){return this.getBy(this.activeType,this.activeId)},e.prototype.showByTag=function(e,t){var n;return t==null&&(t=!1),n=this.getByTag(e),!n||n.needReload?this.loadFormsByTag(e):(this.updateActiveTagId(e).showActive(t),this._pushState())},e.prototype.showByFolder=function(e,t){var n;return t==null&&(t=!1),n=this.getByFolder(e),!n||n.needReload?this.loadFormsByFolder(e):(this.updateActiveFolderId(e).showActive(t),this._pushState())},e.prototype.showActive=function(e){var t;return e==null&&(e=!1),t=this.getActive(),e?this.switchView(function(e){return function(){return t.render(!1),e.switchViewEnd()}}(this)):t.render(!1)},e.prototype.getActiveTagAndFolder=function(){var e;return e={},e.tagId=this.activeType===this.TYPE_TAG?this.activeId:"",e.folderId=this.activeType===this.TYPE_FOLDER?this.activeId:"",e},e.prototype.isInFolderMode=function(){return this.activeType===this.TYPE_FOLDER},e.prototype.isOnDesktop=function(){return this.activeType===this.TYPE_TAG&&this.activeId===GD.SYSTEM_TAGS.ALL_FORMS_TAG_ID},e.prototype.getFolderId=function(){return this.activeType!==this.TYPE_FOLDER?"":this.activeId},e.prototype.backToDesktop=function(){return this.showByTag(GD.SYSTEM_TAGS.ALL_FORMS_TAG_ID)},e.prototype.getListLoadPath=function(){return $("#cover_list").data("load-path")},e.prototype.getActiveTagAndFolderParams=function(){if(this.activeType===this.TYPE_TAG)return{tag_id:this.activeId};if(this.activeType===this.TYPE_FOLDER)return{folder_id:this.activeId}},e.prototype.reloadCurrentView=function(){var e;return e=this.getActiveTagAndFolder(),this.loadForms(e.tagId,e.folderId)},e.prototype.loadFormsByTag=function(e){return this.switchView(function(t){return function(){return t.loadForms(e)}}(this))},e.prototype.loadFormsByFolder=function(e){return this.switchView(function(t){return function(){return t.loadForms(null,e)}}(this))},e.prototype.switchView=function(e){var t;return t=$("#forms_section"),t.css("position","absolute"),t.animate({opacity:0},GD.DASHBOARD_FADE_EFFECT_DURATION,"linear",function(t){return function(){return e()}}(this))},e.prototype.switchViewEnd=function(){var e;return e=$("#forms_section"),e.css("position","relative"),e.css("left",""),e.animate({opacity:1},GD.DASHBOARD_FADE_EFFECT_DURATION,"easeOutQuart")},e.prototype.updateFolderCoverFormCount=function(e,t){var n,r,i,s;n=this.container[this.TYPE_TAG],r=[];for(i in n)s=n[i],s.increaseFolderFormCount(e),r.push(s.decreaseFolderFormCount(t));return r},e.prototype.updateNeedReloadForViewsContain=function(e){var t,n,r,i,s,o;n=this.container,r=[];for(s in n)i=n[s],r.push(function(){var n;n=[];for(t in i)o=i[t],o.containsCover(e)?n.push(o.needReload=!0):n.push(void 0);return n}());return r},e.prototype.updateNeedReloadForTagView=function(e){var t;t=this.getByTag(e);if(t)return t.needReload=!0},e.prototype.updateNeedReloadForTagViewWhenCoverChanged=function(e){var t,n,r,i,s,o;t=this.getActiveTagAndFolderParams().tag_id,t!==GD.SYSTEM_TAGS.ALL_FORMS_TAG_ID&&this.updateNeedReloadForTagView(GD.SYSTEM_TAGS.ALL_FORMS_TAG_ID),t!==GD.SYSTEM_TAGS.ALL_FOLDERS_TAG_ID&&this.updateNeedReloadForTagView(GD.SYSTEM_TAGS.ALL_FOLDERS_TAG_ID),i=_.without(e,t),s=[];for(n=0,r=i.length;n<r;n++)o=i[n],s.push(this.updateNeedReloadForTagView(o));return s},e.prototype.updateNeedReloadForFolderView=function(e){var t;e||this.updateNeedReloadForTagView(GD.SYSTEM_TAGS.ALL_FORMS_TAG_ID),t=this.getByFolder(e);if(t)return t.needReload=!0},e.prototype.loadForms=function(e,t){return e=e||GD.SYSTEM_TAGS.ALL_FORMS_TAG_ID,$.ajax({url:this.getListLoadPath(),dataType:"json",data:{tag_id:e,folder_id:t},beforeSend:function(){return GD.showLoading(".dashboard","dashboard_form_load")}}).done(function(n){return function(r){var i,s;$("#cover_list").empty(),n.switchViewEnd(),i=new GD.FormCoverListView({data:r,currentFolderId:t}),t?GD.formCoverListViewsManager.addByFolder(t,i).showActive():GD.formCoverListViewsManager.addByTag(e,i).showActive(),s=i.nextPage;if($(document).height()===$(window).height()&&s>1&&!i.loading)return n.loadMoreForms(s)}}(this)).always(function(e){return function(){GD.hideLoading(".dashboard","dashboard_form_load"),e._pushState();if($.cookie(GD.needOnboardingUserGuideCookieKey))return GD.userGuideDashboard().start(),$.removeCookie(GD.needOnboardingUserGuideCookieKey)}}(this))},e.prototype.loadMoreForms=function(e){var t;return t=this.getActive(),t.loading=!0,$.ajax({type:"get",url:this.getListLoadPath(),dataType:"json",data:_.extend(this.getActiveTagAndFolderParams(),{page:e}),beforeSend:function(){return $("#cover_list").append($(".dashboard .loading-placeholder").html()),GD.showLoading(".dashboard","dashboard_form_load")}}).done(function(n){t.loading=!1,t.append(n),e=t!=null?t.nextPage:void 0;if($(document).height()===$(window).height()&&e>1&&!t.loading)return this.loadMoreForms(e)}).always(function(){return GD.hideLoading(".dashboard","dashboard_form_load"),t.loading=!1})},e.prototype._pushState=function(){var e;return e=GD.dashboardBreadcrumbsView.currentFolderName(),history.pushState({gdState:!0,url:document.URL,activeType:this.activeType,activeId:this.activeId,activeName:e},"",document.URL)},e}()}.call(this),function(){GD.FormCoverMoveToFolderView=Backbone.View.extend({initialize:function(e){var t,n;this.currentFolderId=e.currentFolderId,this.$tooltipTrigger=e.tooltipTrigger,this.$(".form-folder-list-container").append($(GD.formSettingFolderListView.el).clone()),t=this.model.get("folder_ids"),_.each(t,function(e){if(e!==GD.DESKTOP_ID)return this.$(".folder-list [data-fid="+e+"]").remove()});if(!this._onDashbaord()&&!_.isEmpty(t)||((n=GD.formCoverListViewsManager)!=null?n.isInFolderMode():void 0))return this.$(".folder-list").prepend($("#form_setting_folder_list_desktop_template").html())},events:{"click .available-folder":"_moveFormToFolder"},render:function(){return this.$(".header .setting-title").html("移动到"),this.$(".folder-list").removeClass("gd-hide")},_moveFormToFolder:function(e){var t,n;return n=this.model.get("fid"),t=$(e.target).closest(".available-folder").data("fid"),this._doMove(n,t,this.currentFolderId)},_doMove:function(e,t,n){return $.post("/move_to_folder",{form_id:e,folder_id:t,original_folder_id:n}).done(function(e){return function(n){var r,i,s;return r=e.model.get("folder_ids"),i=_.without(r,e.currentFolderId||GD.DESKTOP_ID),s=_(i).concat(t),e.model.set("folder_ids",s),e._onDashbaord()&&(GD.formCoverListViewsManager.updateFolderCoverFormCount(t,e.currentFolderId),GD.formCoverListViewsManager.updateNeedReloadForFolderView(t),t&&!e.currentFolderId&&GD.userFormTagListView.addDesktopFormsCount(-1),!t&&e.currentFolderId&&GD.userFormTagListView.addDesktopFormsCount(1)),GD.showFlashNotification("表单移动成功")}}(this)).fail(function(e){return function(e){return e.status===401?GD.showFlashNotification(e.responseText,"danger"):GD.showFlashNotification("表单移动失败","danger")}}(this)).always(function(e){return function(){return e.$tooltipTrigger.tooltipster("hide")}}(this))},_onDashbaord:function(){return $(".dashboard").length>0}})}.call(this),function(){var e;e=GD.CoverSettingBaseView.extend({events:{"click .copy-form:not(.working)":"_copyForm","click .edit-symbol":"_editSymbol","click .move-to-folder:not(.disabled)":"_moveToFolder","click .manage-tags":"_manageTags","click .back-to-settings":"_backToMainSettingView","click .pin-on-top:not(.working)":"_doTogglePin"},initialize:function(e){return this.currentFolderId=e.currentFolderId,this.$tooltipTrigger=e.tooltipTrigger,this.managable=this.model.get("managable"),this.onDashboard=$(".dashboard").length>0},render:function(){return this.managable||this.$("li.edit-symbol").remove(),GD.formSettingFolderListView.isEmpty()&&this.$("li.move-to-folder").addClass("disabled"),this.onDashboard&&(this._initEditTagsView(),this.managable&&this._initEditSymbolView()),this._initMoveToFolderView()},_initEditSymbolView:function(){var e;return e=new GD.FormCoverSymbol({form_id:this.model.get("fid"),icon:this.model.get("icon"),background_color:this.model.get("color")},{url:"/forms/"+this.model.get("fid")+"/symbol",colorIndex:this.model.get("color_i")}),this.symbolView=new GD.FormCoverSymbolEditView({model:e,el:this.$(".dashboard-form-style")})},_initMoveToFolderView:function(){return this.moveToFolderView=new GD.FormCoverMoveToFolderView({model:this.model,el:this.$(".dashboard-form-move-to"),currentFolderId:this.currentFolderId,tooltipTrigger:this.$tooltipTrigger})},_editSymbol:function(){return this._showSettingSubView(".dashboard-form-style"),this.symbolView.render(),this.$tooltipTrigger.tooltipster("reposition")},_moveToFolder:function(){return this._showSettingSubView(".dashboard-form-move-to"),this.moveToFolderView.render(),this.$tooltipTrigger.tooltipster("reposition")},_copyForm:function(e){var t,n,r;return t=$(e.target).closest(".copy-form"),t.addClass("working"),r=this.onDashboard?(n=GD.formCoverListViewsManager)!=null?n.getActiveTagAndFolderParams():void 0:{},$.post(t.data("copy-path"),r).done(function(e){return function(t){var n;return e.$tooltipTrigger.tooltipster("hide"),GD.showFlashNotification("表单复制成功"),e.onDashboard?((n=GD.formCoverListViewsManager)!=null&&n.getActive().insertNextTo(e.model,t),e._updateUserFormTagListAfterCopy(t.tags)):Turbolinks.visit("/forms/"+t.token+"/edit")}}(this)).fail(function(e){return function(e){var t,n;return t=((n=e.responseJSON)!=null?n.message:void 0)||"表单复制失败",GD.showFlashNotification(t,"danger")}}(this)).always(function(e){return function(){return e.$tooltipTrigger.tooltipster("hide")}}(this))},_updateUserFormTagListAfterCopy:function(e){var t,n;return e.length>0?_.each(e,function(e){var t;return(t=GD.userFormTagListView)!=null?t.updateTagCount(e,!0):void 0}):(t=GD.userFormTagListView)!=null&&t.updateTagCount(GD.SYSTEM_TAGS.UNTAGGED_ID,!0),(n=GD.userFormTagListView)!=null?n.updateTagCount(GD.SYSTEM_TAGS.ALL_FORMS_TAG_ID,!0):void 0}}),GD.bindFormSettingTooltipster=function(t,n,r,i){return t.gdClickTooltip({theme:"gd-tooltip-menu-over gd-tooltip-has-subview",content:_.template($(n).html())(r.toJSON()),onlyOne:!0,backdrop:!0,offsetY:-6,functionReady:function(t){return function(t,n){var s;return s=new e({model:r,el:n,currentFolderId:i,tooltipTrigger:t}),GD.formSettingFolderListView?s.render():$.get("/user_form_folders",function(e){return GD.formSettingFolderListView=new GD.FormSettingFolderListView(e),s.render()})}}(this),functionAfter:function(e){return function(e,t){return r.trigger("coverChanged.gd")}}(this)})}}.call(this),function(){$(function(){return GD.FormCoverSymbol=Backbone.Model.extend({initialize:function(e,t){return this.url=t.url,this.set("colorIndex",t.colorIndex)}}),GD.FormCoverSymbolEditView=Backbone.View.extend({initialize:function(){return this.form_id=this.model.get("form_id"),this.colorIndex=this.model.get("colorIndex")},events:{"click .form-icon-box":"updateIcon","click .color-box":"updateColor"},updateIcon:function(e){return this._updateIcon($(e.target).closest(".form-icon-box"))},updateColor:function(e){return this._updateColor($(e.target))},_updateIcon:function(e){var t;return t=e.parents(".icon-boxes").find(".active"),t.removeClass("active"),e.addClass("active"),this._updateModel("icon",e.data("value")),this._updateFormCoverIcon(),this.save()},_updateColor:function(e){var t;return this.$(".color-boxes").find(".active").removeClass("active"),e.addClass("active"),t=e.data("index"),t&&this.$(".icon-boxes").removeClassRegExp(/form-color-/).addClass("form-color-"+t),this._updateModel("background_color",e.data("value")),this._updateFormCoverColor(t),this.save()},_updateFormCoverColor:function(e){var t;return t=$("#"+this.form_id),t.find(".symbol-color").attr("class","symbol-color form-color-"+e),t.data("symbol",this.model.toJSON())},_updateFormCoverIcon:function(){var e,t,n;return t=this.model.get("icon"),e=$("#"+this.form_id),t&&(n=e.find(".symbol-icon"),n.fadeOut(300,function(){return n.attr("class","symbol-icon "+t),n.fadeIn(500)})),e.data("symbol",this.model.toJSON())},_updateModel:function(e,t){var n;return n={},n[e]=t,this.model.set(n)},save:function(){var e;if(this.form_id)return this.model.save({symbol:this.model.toJSON()}),(e=GD.formCoverListViewsManager)!=null?e.updateNeedReloadForViewsContain(this.form_id):void 0},render:function(){var e,t;return t=this.model.get("icon"),e=this.colorIndex+1,this.$(".color-boxes .color-box[data-index='"+e+"']").addClass("active"),this.$(".icon-boxes .form-icon-box[data-value='"+t+"']").addClass("active"),this.$(".icon-boxes").addClass("form-color-"+e),this.$(".header .setting-title").html("样式")}})})}.call(this),function(){$(function(){var e,t,n,r;return $(document).on("ready page:load",function(){$(window).unbind("scroll.formCover");if($("#cover_list").size()>0)return $(window).on("scroll.formCover",function(){var e,t,n;e=GD.formCoverListViewsManager.getActive();if(e!=null?e.loading:void 0)return;n=(e!=null?e.nextPage:void 0)||1,t=$(window).scrollTop()===0;if($(window).scrollTop()>$(document).height()-$(window).height()-360&&n>1&&!e.loading)return GD.formCoverListViewsManager.loadMoreForms(n)})}),GD.DESKTOP_ID="DESKTOP",GD.BaseFileCover=Backbone.Model.extend({"default":{order:0},isFolder:function(){return this.get("type")==="Folder"},isForm:function(){return this.get("type")==="Form"},updateTag:function(e,t){var n;return n=this.get("tags"),t?_.contains(n,e)||n.push(e):n=_.without(n,e),this.set("tags",n)}}),t=Backbone.View.extend({initialize:function(e){return this.currentFolderId=e.currentFolderId,this.listenTo(this.model,"coverChanged.gd",this.updateView),this.listenTo(this.model,"change:count",this._updateDataCount),this.listenTo(this.model,"change:pinned",this.render)},dismiss:function(e){return this.$el.fadeOut(500,function(t){return function(){return t.$el.remove(),e()}}(this))},updateView:function(e){var t,n,r;return e==null&&(e=!0),n=GD.formCoverListViewsManager.getActiveTagAndFolder(),t=this.model.get("folder_ids")||[],!n.folderId&&n.tagId===GD.SYSTEM_TAGS.ALL_FORMS_TAG_ID&&this._easeOut(e,this.model.isForm()&&t.indexOf(GD.DESKTOP_ID)===-1),n.folderId?this._easeOut(e,t.indexOf(n.folderId)===-1):(r=n.tagId,r===GD.SYSTEM_TAGS.ALL_FORMS_TAG_ID||r===GD.SYSTEM_TAGS.ALL_FOLDERS_TAG_ID||r===GD.SYSTEM_TAGS.SHARED_FORMS_TAG_ID||!r?this.$el.removeClass("gd-hide"):r===GD.SYSTEM_TAGS.UNTAGGED_ID?this._easeOut(e,this.model.get("tags").length>0):this._easeOut(e,_.indexOf(this.model.get("tags"),r)===-1))},_easeOut:function(e,t){return t&&GD.formCoverListViewsManager.getActive().removeCover(this.model.get("fid")),t&&e?this.$el.fadeOut(500,function(e){return function(){return e.$el.toggleClass("gd-hide",t)}}(this)):this.$el.toggleClass("gd-hide",t)}}),r=t.extend({events:{"click .form-data":"goToEntriesPage"},goToEntriesPage:function(e){return Turbolinks.visit($(e.target).closest(".form-data").data("entries-url")),!1},render:function(e){var t;return e==null&&(e=!1),t=_.template($("#form_cover_template").html()),this.$el.html(t(this.model.toJSON())),this._updateDataCount(),this._bindFormSettingTooltipster(),this._trimLongName(),this.updateView(e),this},_updateDataCount:function(){var e,t;e=parseInt(this.model.get("count"));if(e>=1e4)return e=Math.round(e/1e4*10)/10,t="万数据",this.$(".form-data .count").html(e),this.$(".form-data .text").html(t)},_bindFormSettingTooltipster:function(){var e;return e=this.$(".settings"),e.on("click",function(e){return e.preventDefault(),e.stopPropagation()}),GD.bindFormSettingTooltipster(e,"#dashboard_form_settings_template",this.model,this.currentFolderId)},_trimLongName:function(){return this.$(".name").each(function(){return $clamp(this,{clamp:3})})}}),n=t.extend({events:{"click .folder-link":"_openFolder"},render:function(e){var t;return e==null&&(e=!1),t=_.template($("#folder_cover_template").html()),this.$el.html(t(this.model.toJSON())),this._bindFormSettingTooltipster(),this._trimLongName(),this.updateView(e),this},updateNameAndSymbol:function(e){if(!e)return;return this.model.set(_.pick(e,"name","color_i","color","icon")),this.render()},_openFolder:function(){var e;return e=this.model.get("fid"),GD.formCoverListViewsManager.showByFolder(e,!0),GD.dashboardBreadcrumbsView.updateFolder(this.model.get("name"),this.model.get("fid")),GD.userFormTagListView.setActiveTagId("")},_updateDataCount:function(e,t){return this.$(".form-data .count").text(t)},_bindFormSettingTooltipster:function(){var e;return e=this.$(".settings"),e.on("click",function(e){return e.preventDefault(),e.stopPropagation()}),e.gdClickTooltip({theme:"gd-tooltip-menu-over gd-tooltip-has-subview",content:_.template($("#dashboard_folder_settings_template").html())(this.model.toJSON()),onlyOne:!0,backdrop:!0,offsetY:-6,functionReady:function(e){return function(t,n){var r;return r=new GD.FolderCoverSettingView({model:e.model,el:n},{tooltipTrigger:t,coverView:e}),r.render()}}(this),functionAfter:function(e){return function(t,n){return e.model.trigger("coverChanged.gd")}}(this)})},_trimLongName:function(){return this.$(".name").each(function(){return $clamp(this,{clamp:2})})}}),e=Backbone.Collection.extend({model:GD.BaseFileCover}),GD.FormCoverListView=Backbone.View.extend({el:"#cover_list",className:"clearfix",initialize:function(t){return this.baseFileCoverList=new e(t.data.base_files),this.nextPage=t.data.next_page,this.currentFolderId=t.currentFolderId,this.coverViewList=[],this.unpinnedCoverIds=[]},render:function(e){return e==null&&(e=!1),this.$el.empty(),this.coverViewList=[],this._moveCoversAfterAllPinned(),_.each(this.baseFileCoverList.models,function(e){return function(t){var n;return n=e._createCoverView(t),e.coverViewList.push(n),e.$el.append(n.el),n.render()}}(this))},append:function(t){var n;return n=new e(t.base_files),this._removeDuplicateCovers(n),this.nextPage=t.next_page,this.baseFileCoverList.add(n.models),this.unpinnedCoverIds.length!==0&&n.findWhere({pinned:!0})?this.render():_.each(n.models,function(e){return function(t){var n;return n=e._createCoverView(t),e.coverViewList.push(n),e.$el.append(n.el),n.render()}}(this))},refreshFromOnboarding:function(e){return this.baseFileCoverList.each(function(t){var n,r;return n=t.get("token"),r=e[n],t.set({token:r.token,fid:r.fid})}),this.render()},increaseFolderFormCount:function(e){return this.updateFolderFormCount(e,1)},decreaseFolderFormCount:function(e){return this.updateFolderFormCount(e,-1)},updateFolderFormCount:function(e,t){var n;if(!e)return;n=this.baseFileCoverList.findWhere({fid:e});if(n&&n.isFolder())return n.set({count:n.get("count")+t})},insertNextTo:function(e,t){var n;return n=this.baseFileCoverList.indexOf(e),this.insertAt(n+1,t)},insertAt:function(e,t){var n,r,i,s;return i=new GD.BaseFileCover(t),this.baseFileCoverList.add(i,{at:e}),GD.formCoverListViewsManager.updateNeedReloadForTagViewWhenCoverChanged(i.get("tags")),s=this._createCoverView(i),this.coverViewList.splice(e,0,s),n=s.render().$el,e>0&&(r=this.$el.find(".dashboard-item:nth("+(e-1)+")")),this._showInsertedCover(r,n)},pinCover:function(e){var t;t=this.baseFileCoverList.findWhere({fid:e});if(!t)return;return this.baseFileCoverList.unshift(new GD.BaseFileCover(t.toJSON())),this.baseFileCoverList.remove(t),this.unpinnedCoverIds=_.without(this.unpinnedCoverIds,e),this.render()},unpinCover:function(e){return this.unpinnedCoverIds.push(e),this.render()},removeCover:function(e){var t,n;return t=this.baseFileCoverList.findWhere({fid:e}),GD.formCoverListViewsManager.updateNeedReloadForTagViewWhenCoverChanged(t.get("tags")),(n=_.findWhere(this.coverViewList,{model:t}))!=null?n.dismiss(function(e){return function(){return e.baseFileCoverList.remove(t)}}(this)):void 0},containsCover:function(e){return!!this.baseFileCoverList.findWhere({fid:e})},_moveCoversAfterAllPinned:function(e){return _.each(this.unpinnedCoverIds,function(e){return function(t){var n,r;n=e.baseFileCoverList.findWhere({fid:t});if(!n)return;return r=e.baseFileCoverList.where({pinned:!0}).length,e.baseFileCoverList.add(new GD.BaseFileCover(n.toJSON()),{at:r+1}),e.baseFileCoverList.remove(n)}}(this))},_createCoverView:function(e){var t;return t=e.isForm()?new r({model:e,currentFolderId:this.currentFolderId}):new n({model:e})},_showInsertedCover:function(e,t){var n,r,i,s;return s=$("<div class='dashboard-item placeholder'></div>"),t.css({position:"absolute",opacity:0}),e?(n=e.parent(),n.after(s),n.after(t),i=e.position()):(this.$el.prepend(s),this.$el.prepend(t),i=$(".dashboard-item.create-new").position()),t.css({left:i.left,top:i.top}),r=s.position(),t.animate({left:"+="+(r.left-i.left),top:"+="+(r.top-i.top),opacity:1},1e3,"easeOutQuart",function(){return s.remove(),t.css({position:"",left:"",top:""})})},_removeDuplicateCovers:function(e){var t;return t=[],e.models.every(function(e){return function(n){var r;r=e.baseFileCoverList.findWhere({fid:n.get("fid")});if(r)return t.push(n)}}(this)),e.remove(t)}})})}.call(this),function(){$(function(){var e,t,n,r,i,s,o,u,a,f;return i=null,r="columbusFormCreateModalCached",t="columbusCachedformCreateModal",u="cachedformCreateModal",f=function(e){return e&&$("#create_form_modal .modal-body").html(e),i!=null&&i.selectFirstTemplateCategoryAndItsTemplate(),$("#create_form_modal .modal-content").transition({opacity:1,duration:300})},n=function(e){return $.cookie(r,!0,{expires:GD.cookieExpireMinutes(e)})},GD.loadFormCreationModal=function(e){var i;e==null&&(e={forceReload:!1});if($("#create_form_modal").length===0||$("#on_boarding:visible").length===1)return;if(!e.forceReload&&$.cookie(r)){i=typeof localStorage!="undefined"&&localStorage!==null?localStorage.getItem(t):void 0;if(i)return f(i)}return $.ajax($("#create_form_modal").data("content-url"),{beforeSend:function(e){return $("#create_form_modal").data("jqXHR",e)},success:function(e,r){return f(e),GD.cacheToLocalStorage(t,e,!0),n(30)}})},s=function(){var e,t,n;return t=GD.formCoverListViewsManager.getActiveTagAndFolder(),n=t.tagId,n&&!_.contains(_.values(GD.SYSTEM_TAGS),n)?"?tag_id="+n:(e=t.folderId,e?"?folder_id="+e:"")},e=Backbone.View.extend({el:".create-form-modal",initialize:function(e){return this.needFadeOut=e.needFadeOut,this.needTransitInYDirection=e.needTransitInYDirection,this.viewedTemplateTopics=e.viewedTemplateTopics,this.$(".topics-list li").each(function(e){return function(t,n){var r;return r=$(n).data("template-recommendation-id"),$(n).toggleClass("new-topic",!_.contains(e.viewedTemplateTopics,r))}}(this))},events:{"click .categories ul li"
:"updateCategorysAndTemplates","keypress .categories .search-template input":"searchTemplates","click .templates ul li:not(.no-matched-template)":"updateTemplatePreivew","click [data-dismiss='modal']":"closeFormCreateModal"},render:function(){return this.selectFirstTemplateCategoryAndItsTemplate(),this.updateCreateLink()},updateCreateLink:function(){var e;return e=this.$(".blank-form-create .blank-form-create-link, .excel-form-create .excel-form-create-link"),e.each(function(){var e;return e=url("path",$(this).attr("href")),$(this).attr("href",e+s())})},updateCategorysAndTemplates:function(e){return this.highlightCurrentTemplateCategory(e),this.showCurrentCategorysTemplates(e),this.selectFirstVisibleTemplate(),this.setTopicAsViewed(e)},setTopicAsViewed:function(e){var t,n;t=$(e.currentTarget);if(!t.hasClass("new-topic"))return;return t.removeClass("new-topic"),n=t.data("template-recommendation-id"),this.viewedTemplateTopics.push(n),$.ajax({url:t.parent().data("update-viewed-template-topics-url"),type:"patch",data:"topic_id="+n})},searchTemplates:function(e){var t;if(e.keyCode&&e.keyCode!==13)return;t=this.$(".categories .search-template input").val().trim();if(t.length===0)return;return this.$(".templates > .templates-header").text("选择模板"),this.hightlightSearchResult(t),this.matchedTemplates(t).length!==0?(this.showMatchedTemplates(t),this.selectFirstVisibleTemplate()):this.onNoMatchedTemplate(e)},updateTemplatePreivew:function(e){return this.hightlightCurrentTemplate(e),this.showCurrentTemplatePreivew(e),this.updateTemplateUsableStatus(e)},highlightCurrentTemplateCategory:function(e){return this.$(".recommendation-list li").removeClass("active"),this.$(".search-result").hide(),this.$(".categories .search-template input").val(""),$(e.currentTarget).addClass("active")},hightlightSearchResult:function(e){return this.$(".categories ul li").removeClass("active"),this.$(".search-result .search-keyword").addClass("active").html(e),this.$(".search-result").show()},hightlightCurrentTemplate:function(e){return $(e.currentTarget).siblings().removeClass("active"),$(e.currentTarget).addClass("active")},showCurrentTemplatePreivew:function(e){var t,n,r,i,s;return n=$(e.currentTarget).data("template-id"),i=this.$(".template-preview-content[data-template-id='"+n+"']"),r=i.html(),this.$(".no-matched-template-preview").hide(),s=this.$(".template-preview-container"),s.html(r).scrollTop(0).show(),s.append(i.next(".script-template").val()),s.find("[data-role='attachment']").addClass("preview"),t=s[0],GD.initGoods(t),GD.initAddressSelector(t),GD.initRating(t),GD.initCascadeSelector(t),GD.initDatePicker(s),GD.transformAllFields(s),GD.initLightbox(),GD.adaptRetina()},updateApplyTemplateButton:function(e,t){var n;return n=this.$(".apply-template"),e?(n.attr("disabled",!1),n.attr("href",t)):n.attr("disabled",!0)},updateTemplateUsableStatus:function(e){var t,n;return t=$(e.currentTarget),n=t.data("use-path")+s(),this.updateApplyTemplateButton(!0,n)},showCurrentCategorysTemplates:function(e){var t;return this.updatetemplatesTitle(e),t=$(e.currentTarget).data("template-recommendation-id"),this.removeTemplateSearchResultStyle(t),this.$(".templates ul li, .no-matched-template").hide(),this.$(".templates ul li[data-template-recommendation-id="+t+"]").show()},updatetemplatesTitle:function(e){var t,n,r;return n=$(e.currentTarget).data("for-industry"),t=$(e.currentTarget).data("industry-name"),r=n?t:"选择模板",this.$(".templates > h6").text(r)},selectFirstTemplateCategoryAndItsTemplate:function(){return this.$(".categories ul.recommendation-list li:first").trigger("click")},selectFirstVisibleTemplate:function(){return this.$(".templates ul li:visible:first").trigger("click")},showMatchedTemplates:function(e){return this.$(".templates ul li, .no-matched-template").hide(),this.matchedTemplatesWithHighlightedKeyword(e).show()},matchedTemplates:function(e){var t;return t=$(".templates ul li"),this.filterdTemplateNames=[],t.filter(function(n){return function(r){var i;return i=$(t[r]).find("a").text(),!n.alreadyFilterd(i)&&i.indexOf(e)>-1}}(this))},onNoMatchedTemplate:function(e){return this.$(".templates ul li").hide(),this.$(".no-matched-template").show(),this.$(".template-preview-container").hide(),this.$(".no-matched-template-preview").show(),this.updateApplyTemplateButton(!1,"#")},alreadyFilterd:function(e){var t;return this.filterdTemplateNames.push(e),t=_.countBy(this.filterdTemplateNames,function(e){return e}),t[e]>1},matchedTemplatesWithHighlightedKeyword:function(e){return this.matchedTemplates(e).each(function(t,n){var r,i,s,o,u;return o=$(n).find("a"),s=o.html(),i=s.split(e),r="<span class='highlight'>"+e+"</span>",u="<div>"+i[0]+r+i[1]+"</div>",o.data("originalTemplateName",s).html($(u))})},removeTemplateSearchResultStyle:function(e){return this.$(".templates ul li[data-template-recommendation-id="+e+"]").each(function(e,t){var n,r;return r=$(t).find("a"),n=r.data("originalTemplateName"),r.html(n)})},closeFormCreateModal:function(){var e;return e=$("#create_form_modal"),e.transition({scale:.6,opacity:0,duration:300},"easeOutCubic"),setTimeout(function(t){return function(){return e.fadeOut(100),t.needTransitInYDirection.show().transition({y:0,opacity:1,duration:350},"easeInQuart"),t.needFadeOut.transition({opacity:1,duration:350},"easeInQuart"),t.closeView(),GD.formCreationViewIsShown=!1}}(this),300)},closeView:function(){return this.undelegateEvents(),this.off()}}),$(document).on("page:before-change",function(){var e;if($("#create_form_modal").length>0)return(e=$("#create_form_modal").data("jqXHR"))!=null?e.abort():void 0}),$(window).on("resize",function(){if($("#create_form_modal").is(":visible"))return GD.updateModalHeight("#create_form_modal",".modal-body",null,function(e){return $("#create_form_modal").find(".categories, .templates, .template-preview").outerHeight(e)})}),a=function(){return $(".dashboard-create-new-options").toggleClass("with-form-folder-create-trigger",!GD.formCoverListViewsManager.isInFolderMode())},o=function(){return $(document).on("mouseenter",".create-new.dashboard-item",function(){return a(),$(".plus-icon").stop(!0,!1).fadeOut(100,function(){return $(".dashboard-create-new-options").stop(!0,!1).fadeIn(200)})}),$(document).on("mouseleave",".create-new.dashboard-item",function(){return $(".dashboard-create-new-options").stop(!0,!1).fadeOut(200,function(){return $(".plus-icon").stop(!0,!1).fadeIn(100),$(".dashboard-create-new-options > .create-new-link").removeClass("gd-link-background-inverse")})}),$(document).on("mousemove",".create-new.dashboard-item",function(){return $(".dashboard-create-new-options:visible > .create-new-link").addClass("gd-link-background-inverse")})},$(document).on("page:load ready",function(){var t;if($(".dashboard").length===0)return;return o(),GD.loadFormCreationModal(),$(".template-form-create-link").click(function(){var t,n,r;return t=$("header, .user-feedback, .browser-version-warning"),n=$("body > .notifications, body > .container"),t.transition({opacity:0,duration:350},"easeOutQuint"),n.transition({y:80,opacity:0,duration:350},"easeOutQuint"),r=$(".viewed-template-topics").data("viewed-template-topics")||[],setTimeout(function(){var s,o;return n.hide(),s=$("#create_form_modal"),s.css({transform:"scale(0.6, 0.6)",opacity:"0.1"}).fadeIn(10).transition({scale:1,opacity:1,duration:400},"easeInExpo"),GD.updateModalHeight("#create_form_modal",".modal-body",null,function(e){return s.find(".categories, .templates, .template-preview").outerHeight(e)}),o=$(".template-form-create").data("can-use-entry-quota-vas"),s.find(".excel-form-create-link").toggleClass("disabled",!o),i=new e({needFadeOut:t,needTransitInYDirection:n,viewedTemplateTopics:r}),i.render()},300)}),t=null,$(".form-folder-create-trigger").gdClickTooltip({content:$(".create-new-popup-template").html(),position:"right",theme:"gd-tooltip-menu-over",functionReady:function(e,n){return t=new GD.FormFolderEditingView({el:n},{titleText:"创建新文件夹",actionText:"创建",tooltipTrigger:e}),t.render(),t.on("formFolderSaved.gd",function(t){return e.tooltipster("hide"),GD.formCoverListViewsManager.getActive().insertAt(0,t),GD.formSettingFolderListView.addNewFolder(t),GD.userFormTagListView.updateTagCount(GD.SYSTEM_TAGS.ALL_FORMS_TAG_ID,!0).updateTagCount(GD.SYSTEM_TAGS.ALL_FOLDERS_TAG_ID,!0).updateTagsCount(t.tags,!0)})},functionAfter:function(){return t.remove()}})})})}.call(this),function(){var e,t,n,r,i;GD.Org||(GD.Org={}),(e=GD.Org).Config||(e.Config={}),(t=GD.Org).AddressBook||(t.AddressBook={}),(n=GD.Org).Profile||(n.Profile={}),(r=GD.Org).Member||(r.Member={}),(i=GD.Org).Setup||(i.Setup={}),GD.PUBSUB||(GD.PUBSUB={}),_.extend(GD.PUBSUB,Backbone.Events)}.call(this),function(){GD.Org.BaseModel=Backbone.Model.extend({sync:function(){var e;return e=arguments[2],e.headers={Authorization:GD_ORG_CONFIG_AUTH_TOKEN},Backbone.Model.prototype.sync.apply(this,arguments)}})}.call(this),function(){GD.Org.Member=GD.Org.BaseModel.extend({initialize:function(e){return this.organizationSubdomain=e.organizationSubdomain},urlRoot:function(){return GD_ORG_CONFIG_API_HOST+"/organizations/"+this.orgSubdmain()+"/members"},orgSubdmain:function(){return this.get("subdomain")||this.organizationSubdomain},humanGender:function(){switch(this.get("gender")){case"male":return"男";case"female":return"女";default:return"未知"}},humanRole:function(){switch(this.get("role")){case"creator":return"创建者";case"admin":return"管理者";case"teamworker":return"协作者";default:return"普通员工"}},isCreator:function(){return this.get("role")==="creator"},isAdmin:function(){return this.isActive()&&(this.get("role")==="admin"||this.isCreator())},isTeamworker:function(){return this.isActive()&&this.get("role")==="teamworker"},isNormal:function(){return this.isActive()&&!this.isAdmin()&&!this.isTeamworker()},isActive:function(){return this.get("status")==="active"},isForbidden:function(){return this.get("status")==="forbidden"},isActived:function(){return this.isActive()||this.isForbidden()},canBeShownOnFolderAuthorityList:function(e){return this.isActive()||e.indexOf(this.get("user_id"))>0}})}.call(this),function(){GD.Org.MemberCollection=Backbone.Collection.extend({model:GD.Org.Member,initialize:function(e){return this.subdomain=e.subdomain},url:function(){return GD_ORG_CONFIG_API_HOST+"/organizations/"+this.subdomain+"/members"},sync:function(){var e;return e=arguments[2],e.headers={Authorization:GD_ORG_CONFIG_AUTH_TOKEN},Backbone.Model.prototype.sync.apply(this,arguments)},activeCount:function(){return this.filter(function(e){return e.isActive()}).length},adminCount:function(){return this.filter(function(e){return e.isAdmin()}).length},teamworkerCount:function(){return this.filter(function(e){return e.isTeamworker()}).length},normalCount:function(){return this.filter(function(e){return e.isNormal()}).length}})}.call(this),function(){GD.FormFolderAuthorityCollectionView=Backbone.View.extend({template:"form_folder_authorities_template",render:function(){var e,t;return e=new GD.FormFolderAuthority({form_folder_id:this.model.get("fid")}),t=new GD.Org.MemberCollection({subdomain:GD.currentOrganization}),$.when(e.fetch(),t.fetch()).then(function(n){return function(){var r;return r=_.template($("#"+n.template).html()),n.$el.html(r({model:n.model,membersCount:t.length})),n.renderAuthoritiesCount(e),n.renderAuthorityItem(t,e),n.listenTo(e,"change:manager_ids",n.renderAuthoritiesCount)}}(this)),$("#org-teamworkers-modal").html(this.el).modal(),this},renderAuthoritiesCount:function(e){return this.$el.find(".authorities-count-span").text(e.get("manager_ids").length)},renderAuthorityItem:function(e,t){var n;return n=this.$el.find("tbody"),_.chain(e.models).sortBy(function(e){return e.get("user_id")!==t.get("creator_id")}).each(function(e){return function(r){var i;if(r.canBeShownOnFolderAuthorityList(t.get("manager_ids")))return i=new GD.FormFolderAuthorityView({model:r,formFolderAuthority:t,form_folder_id:e.model.get("fid"),form_folder_name:e.model.get("name")}),n.append(i.render().el)}}(this))}}),GD.FormFolderAuthorityView=Backbone.View.extend({tagName:"tr",template:"form_folder_authority_template",initialize:function(e){return this.formFolderAuthority=e.formFolderAuthority,this.form_folder_id=e.form_folder_id,this.form_folder_name=e.form_folder_name,this.newFormFolderAuthority=new GD.FormFolderAuthority({form_folder_id:this.form_folder_id})},events:function(){return{"click .leave-manager":"leaveManager","click .start-sharing":"startSharing","click .stop-sharing":"stopSharing"}},render:function(){var e;return e=_.template($("#"+this.template).html()),this.$el.html(e({model:this.model,formFolderAuthority:this.formFolderAuthority,current_user:GD.currentUserId})),this.model.isForbidden()&&this.$el.addClass("forbidden"),this},leaveManager:function(){var e;e=this;if(confirm("你确定要解除对当前文件夹的权限吗？"))return this.newFormFolderAuthority.destroy({url:this.newFormFolderAuthority.url()+"?user_ids="+GD.currentUserId,success:function(t){return Turbolinks.visit("/home"),$(document).one("page:change",function(){return GD.showFlashNotification("你已不再是文件夹["+e.form_folder_name+"]管理员")})}})},startSharing:function(){var e,t;return t=this,e=this.model.get("user_id"),this.newFormFolderAuthority.save({user_ids:e},{success:function(e){return function(t){return e.formFolderAuthority.set("manager_ids",t.get("manager_ids")),e.render()}}(this)})},stopSharing:function(){var e;e=this;if(confirm("你确定要解除对当前文件夹的权限吗？"))return this.newFormFolderAuthority.destroy({url:this.newFormFolderAuthority.url()+"?user_ids="+this.model.get("user_id"),success:function(t){return function(n,r){return t.formFolderAuthority.set("manager_ids",r.manager_ids),t.render(),GD.showFlashNotification("该用户已不再是文件夹["+e.form_folder_name+"]管理员")}}(this)})}}),GD.FormFolderAuthority=Backbone.Model.extend({idAttribute:"form_folder_id",initialize:function(e){return this.form_folder_id=e.form_folder_id},url:function(){return"/form_folders/"+this.form_folder_id+"/authorities"},isManager:function(e){return this.get("manager_ids").includes(e.get("user_id"))},isCreator:function(e){return this.get("creator_id")===e.get("user_id")}})}.call(this),function(){GD.FormFolderEditingView=Backbone.View.extend({events:{"click .setting-action":"_saveFolder","click .form-icon-box":"_updateIcon","click .color-box":"_updateColor"},initialize:function(e,t){return this.$tooltipTrigger=t.tooltipTrigger,this.title_text=t.titleText,this.action_text=t.actionText,this.$backToTarget=t.backToTargetDom,this.$folderNameInput=this.$(".form-folder-name"),this.$colorBoxes=this.$(".color-box"),this.$iconBoxes=this.$(".form-icon-box"),this.$iconBoxeContainer=this.$(".icon-boxes"),this.$editFolder=this.$(".dashboard-edit-form-folder"),this.$saveFolderLink=this.$(".form-folder-save-link"),this._ensureSymbol(),this.$folderNameInput.on("keypress",function(e){return function(t){if(t.keyCode===13)return e._saveFolder()}}(this))},render:function(){return this.$(".header .setting-title").text(this.title_text),this.$(".header .setting-action").text(this.action_text),this._initSettingBackLink(),this._show()},_show:function(){var e,t;return(e=this.$backToTarget)!=null&&e.addClass("gd-hide"),this.$editFolder.removeClass("gd-hide"),this.model&&this.$folderNameInput.val(this.model.get("name")).select(),this.$folderNameInput.focus(),(t=this.$tooltipTrigger)!=null?t.tooltipster("reposition"):void 0},_initSettingBackLink:function(){return this.$(".back-to-settings").on("click",function(e){return function(t){var n,r;return(n=e.$backToTarget)!=null&&n.removeClass("gd-hide"),e.$editFolder.addClass("gd-hide"),e._reset(),(r=e.$tooltipTrigger)!=null?r.tooltipster("reposition"):void 0}}(this))},_ensureSymbol:function(){var e,t,n,r,i,s;return e=((r=this.model)!=null?r.get("color_i"):void 0)!==void 0?((i=this.model)!=null?i.get("color_i"):void 0)+1:_.random(1,this.$colorBoxes.length),this.$(".color-box:nth("+(e-1)+")").addClass("active"),this.$iconBoxeContainer.addClass("form-color-"+e),t=(s=this.model)!=null?s.get("icon"):void 0,n=t?this.$("[data-value="+t+"]"):this.$(".form-icon-box:nth("+(_.random(1,this.$iconBoxes.length)-1)+")"),n.addClass("active")},_reset:function(){return this.$folderNameInput.val(""),this.$iconBoxes.removeClass("active"),this.$colorBoxes.removeClass("active"),this.$iconBoxeContainer.removeClassRegExp(/form-color-/),this._ensureSymbol()},_updateIcon:function(e){var t,n;return n=$(e.target).closest(".form-icon-box"),t=n.parents(".icon-boxes").find(".active").removeClass("active"),n.addClass("active")},_updateColor:function(e){var t,n;n=$(e.target),this.$(".color-boxes").find(".active").removeClass("active"),n.addClass("active"),t=n.data("index");if(t)return this.$(".icon-boxes").removeClassRegExp(/form-color-/).addClass("form-color-"+t)},_getDataFromUI:function(){return{form_folder:{name:this.$folderNameInput.val(),symbol:{icon:this.$(".form-icon-box.active").data("value"),background_color:this.$(".color-box.active").data("value")}}}},_saveFolder:function(){var e,t,n,r,i;return i=this.$saveFolderLink.data("save-folder-path"),t=this.$saveFolderLink.data("save-folder-method"),r=GD.formCoverListViewsManager.getActiveTagAndFolder(),e=_.extend(this._getDataFromUI(),{tag_id:r.tagId,folder_id:r.folder_id}),n=this.$("input[name=share_enabled]").is(":checked"),$.ajax({url:i,data:e,type:t,success:function(e){return function(t){return e._saveFolderSuccess(t,n)}}(this)}).fail(function(e){return function(t){return GD.showFlashNotification(e.title_text+"失败","danger")}}(this)).always(function(e){return function(){var t;return(t=e.$tooltipTrigger)!=null&&t.tooltipster("hide"),e._reset()}}(this))},_saveFolderSuccess:function(e,t){var n,r,i;return GD.formCoverListViewsManager.updateNeedReloadForTagViewWhenCoverChanged((i=this.model)!=null?i.get("tags"):void 0),this.trigger("formFolderSaved.gd",e),GD.isInOrganiztion()&&t?(r=new GD.FormFolderAuthority(e),n=new GD.FormFolderAuthorityCollectionView({model:r}),n.render()):GD.showFlashNotification(this.title_text+"成功")}})}.call(this),function(){var e,t;t=Backbone.View.extend({el:"#global_search_container",events:{"focus .search-content":"activateSearch","blur .search-content":"deactivateSearch","keyup .search-content":"_acceptKeyUp","click .search-backdrop":"_forceDeactivateSearch"},initialize:function(){return this.searchInput=this.$(".search-content"),this.globalSearchTimeout=null,this.globalSearchTimestamp=(new Date).getTime(),this.searchTrigger=this.$(".search-trigger"),this.searchResultView=null,this._bindEvents()},activateSearch:function(){return this.$el.addClass("during-searching"),this.searchInput.addClass("active")},deactivateSearch:function(){if(!this.searchResultView&&!this.searchInput.is(":focus"))return this.$el.removeClass("during-searching"),this.searchInput.removeClass("active")},_bindEvents:function(){return this._bindKeyEvents(),this._bindSearchTooltipEvent()},_acceptKeyUp:function(e){var t;this.globalSearchTimeout&&clearTimeout(this.globalSearchTimeout),this.globalSearchTimeout=null;if(e.keyCode===13)return this._triggerSearch();if(e.keyCode===38||e.keyCode===40)return;return t=setTimeout(function(e){return function(){return e._triggerSearch()}}(this),500),this.globalSearchTimeout=t},_bindKeyEvents:function(){return $(document).on("keydown",function(e){return function(t){if(!e.searchResultView||!e.searchResultView.hasResult())return;if(t.keyCode===40)return t.preventDefault(),t.stopPropagation(),e.searchInput.blur(),e.searchResultView.activateNextResult();if(t.keyCode===38){if(!e.searchResultView.activatePreviousResult(t))return e.searchInput.focus()}else{if(t.keyCode===27)return e._hideSearchResult();if(t.keyCode===13)return e.searchResultView.confirmActiveResultItem()}}}(this))},_bindSearchTooltipEvent:function(){return this.searchTrigger.gdClickTooltip({content:$('<div class="global-search-content"><div class="noti-message">搜索中……</div></div>'),theme:"global-search-popover gd-tooltip-list-over",offsetY:-7,functionReady:function(t){return function(n,r){return t.searchResultView=new e({el:r}),t._updateSearchForms(),n.tooltipster("reposition")}}(this),functionAfter:function(e){return function(){return e.deactivateSearch()}}(this)})},_updateSearchForms:function(){var e,t,n,r;t=$.trim(this.searchInput.val());if(t.length===0)return;return this.searchInput.val(t),(n=this.searchInput.data("jqXHR"))!=null&&n.abort(),r=(new Date).getTime(),e=$.get("/search",{keyword:t},function(e){return function(t){if(e.globalSearchTimestamp<r)return e.globalSearchTimestamp=r,e.searchResultView.render(t)}}(this)),this.searchInput.data("jqXHR",e)},_triggerSearch:function(){this._hideSearchResult();if($.trim(this.searchInput.val()).length>0)return setTimeout(function(e){return function(){return e.searchTrigger.click()}}(this),10)},_hideSearchResult:function(){return this.searchResultView=null,this.searchTrigger.tooltipster("hide")},_forceDeactivateSearch:function(){return this._hideSearchResult(),this.deactivateSearch()}}),e=Backbone.View.extend({events:{"mouseover .global-search-content":"_activateHoverredResult","click .show-more":"_showMoreResultOfCurrentList"},initialize:function(){return this.searchResultContainer=this.$(".global-search-content")},render:function(e){return this.searchResultContainer.html(e)},confirmActiveResultItem:function(){var e;return e=this.$(".result-item.active"),e.hasClass("show-more")?this._showMoreResult(e.closest(".result-list")):this.goToActiveResultDetailPage()},goToActiveResultDetailPage:function(){var e;e=this.$(".result-item.active .result-item-link");if(e.length>0)return Turbolinks.visit(e.attr("href"))},hasResult:function(){return this.$(".result-item").length>0},activateNextResult:function(){var e,t;e=this.$(".result-item.active"),t=e.length===0?this.$(".result-item").first():e.nextAll(".result-item:visible:first"),t.length===0&&(t=e.closest(".result-list").nextAll(".result-list:first").find(".result-item").first());if(t.length>0){this._deactivateAllResult(),t.addClass("active");if(t.position().top+t.outerHeight()>this.searchResultContainer.height())return this.searchResultContainer.scrollTop(this.searchResultContainer.scrollTop()-(this.searchResultContainer.height()-t.position().top-t.outerHeight()))}},activatePreviousResult:function(e){var t,n;return t=this.$(".result-item.active"),t?(e.preventDefault(),e.stopPropagation(),n=t.prev(),n.length===0&&(n=t.closest(".result-list").prevAll(".result-list:last").find(".result-item:visible").last()),this._deactivateAllResult(),n.length===0?!1:(n.addClass("active"),n.position().top<0&&this.searchResultContainer.scrollTop(n.position().top+this.searchResultContainer.scrollTop()),!0)):!1},_activateHoverredResult:function(){return this.$(".result-item.active").removeClass("active"),this.$(".result-item:hover").addClass("active")},_deactivateAllResult:function(){return this.$(".result-item.active").removeClass("active")},_showMoreResultOfCurrentList:function(e){return this._showMoreResult($(e.target).closest(".result-list"))},_showMoreResult:function(e){var t;return e.find(".result-item:hidden").show(),t=e.find(".show-more"),t.is(".active")&&(this._deactivateAllResult(),t.next().addClass("active")),t.remove()}}),$(document).on("page:load ready",function(){return GD.globalSearchView=new t}),$(document).on("page:restore",function(){return GD.globalSearchView=new t,GD.globalSearchView.deactivateSearch()})}.call(this),function(){$(function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w;h=$("#on_boarding");if(h.length===0)return;return r=$("#form_trans_box"),c=h.find(".more-item"),f=h.find(".industry-list"),u=f.find(".industry-item"),a=f.find(".industry-item:gt(5)"),n=h.find(".form-list"),t=$("#cover_list"),e=h.find(".choose-industry"),l=h.find("#step-go-2"),i=h.find("#step-go-3"),o=h.find(".go-prev"),s=h.find(".go-next"),g=_.template($("#on_boarding_form_tpl").html()),v={count:0,folder_id:null,managable:!0,pinned:!1,shared:!1,tags:[],type:"Form",folder_ids:[GD.DESKTOP_ID],weixin:!1},b='<div class="loading-mask">\n  <i class="gd-icon-refresh animate-spin"></i>\n</div>',$("body").addClass("is-on-boarding"),$("#on_boarding_mask").remove(),GD.pageTrans.init(),m=function(){var e;return e=f.find(".selected").data("industry-id"),{industry_id:e,forms:n.find(".selected").map(function(){return _.find(GD.onBoardingIndustries[e].forms,function(e){return function(t){return t.token===$(e).data("form-token")}}(this))}).toArray()}},w=function(e){var t,r;return t=GD.onBoardingIndustries[e],r=_.reduce(t.forms,function(e,t){return e+g(t)},""),n.html(r)},d=function(e){var t;return t=$(e).clone().appendTo(r),t.css({position:"absolute",left:$(e).position().left+"px",top:$(e).position().top+"px"})},p=function(e,t){var n,r,i;return i=$(e).find(".submit"),r=$(e).find(t),n=$(e).find(".choose-status"),r.length>0?(i.removeClass("disabled"),n.animate({opacity:1},300)):(i.addClass("disabled"),n.animate({opacity:0},300))},y=function(e,t){var n,r;return n=$(e).find(".selected-status"),$(e).toggleClass("selected"),r=$(e).hasClass("selected"),t&&$(e).siblings().removeClass("selected"),r?n.find("path").eq(0).stop(!0,!1).animate({"stroke-dashoffset":0},300):setTimeout(function(){return n.find("path").eq(0).css("stroke-dashoffset",19.79)},300)},f.on("click",".industry-item",function(){var t,n;return y(this,!0),t=$(this).find(".title").text(),n=t!=="其他..."?t:"",$(this).closest(".pt-page").find(".choose-item").text(n),e.text(n),p(".pt-page-2",".selected")}),n.on("click",".form-item",function(){var e;return y(this),e=n.find(".selected").length,e!==0&&$(this).closest(".pt-page").find(".choose-item").text(e),p(".pt-page-3",".selected")}),c.on("click",function(){var e,t,n,r,i,s;return e=u.first(),t=e.offset(),i=parseInt(e.css("margin-top"),10),r=parseInt(e.css("margin-bottom"),10),n=e.height()+i+r,s=Math.ceil(u.length/5),f.css("min-height",n*s+"px"),$(".pt-page-current").animate({scrollTop:t.top},300),$(this).fadeOut(200),a.each(function(e){return setTimeout(function(e){return function(){return $(e).addClass("item-show animated gdBounceIn")}}(this),90*e)}),f.on(GD.pageTrans.animEndEventName,".gdBounceIn",function(){return $(this).removeClass("animated gdBounceIn")})}),o.on("click",function(){return GD.pageTrans.goPage("prev")}),s.on("click",function(){return GD.pageTrans.goPage("next")}),l.on("click",function(){if($(this).hasClass("disabled"))return;return w(f.find(".selected").data("industry-id")),i.addClass("disabled"),GD.pageTrans.goPage("next")}),i.on("click",function(){var e,i,s,o,u,a;if($(this).hasClass("disabled"))return;return a=$(this).data("url"),GD.channel||(GD.channel=GD.pusher.subscribe($(this).data("channel"))),GD.channel.bind("onboarding_recommend_finish",function(e){var t,n,r;return GD.channel.unbind("onboarding_recommend_finish"),r=_.reduce(e.message,function(e,t){return e[t.copied_from]={fid:t.form_id,token:t.form_token},e},{}),GD.formCoverListViewsManager.getActive().refreshFromOnboarding(r),$.get("/user_form_tags",function(e){return GD.userFormTags=new GD.UserFormTagList(e.tags),GD.userFormTagListView=new GD.UserFormTagListView}),$.get("/user_form_folders",function(e){return GD.formSettingFolderListView=new GD.FormSettingFolderListView(e)}),n=$(".loading-mask"),t=$(".dashboard-item"),n.fadeOut(400,function(){return n.remove(),t.removeClass("form-loading")})}),s={answer:m()},o={base_files:s.answer.forms},o.base_files=o.base_files.map(function(e){return $.extend({},v,e)}),GD.formCoverListViewsManager.getActive().append(o),r.show(),n.find(".selected").each(function(){return d(this)}),e=n.find(".form-item"),e.animate({opacity:0},400),setTimeout(function(){return h.fadeOut(600,function(){return GD.loadFormCreationModal({forceReload:!0})}),r.find(".form-item").addClass("animated gdPulse")},300),setTimeout(function(){return i(),u()},300),i=function(){var e;return e=t.find(".dashboard-item"),r.find(".form-item").each(function(t){var n;return n=parseInt($(this).css("margin-left"),10),e.eq(t).prepend(b),e.eq(t).addClass("form-loading"),$(this).animate({top:e.eq(t).offset().top+"px",left:e.eq(t).offset().left-n+"px"},1e3,"swing",function(){return r.fadeOut(500),$("body").css("overflow","auto"),$("body").removeClass("is-on-boarding")})})},u=function(){return $.post(a,s)}})})}.call(this),function(){GD.pageTrans=function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p;return i=0,f=!1,s=!1,o=!1,r={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"},e=null,t=null,c=0,n=r[Modernizr.prefixed("animation")],p=Modernizr.cssanimations,a=function(n){var r,s;return s={wrapper:"#pt-main",page:".pt-page"},r=$.extend(s,n),e=$(r.wrapper),t=e.children(r.page),c=t.length,$("body").css("overflow","hidden"),t.each(function(){var e;return e=$(this),e.data("originalClassList",e.attr("class"))}),t.eq(i).addClass("pt-page-current")},u=function(e){var r,u,a,h,d;h=e==="next";if(f)return!1;f=!0,r=t.eq(i),h?i<c-1?++i:i=0:i>0?--i:i=c-1,u=t.eq(i).addClass("pt-page-current"),a=h?"pt-page-moveFromRight":"pt-page-moveFromLeft",d=h?"pt-page-moveToLeftEasing pt-page-ontop":"pt-page-moveToRightEasing pt-page-ontop",r.addClass(d).on(n,function(){r.off(n),s=!0;if(o)return l(r,u)}),u.addClass(a).on(n,function(){u.off(n),o=!0;if(s)return l(r,u)});if(!p)return l(r,u)},l=function(e,t){return s=!1,o=!1,h(e,t),f=!1},h=function(e,t){return e.attr("class",e.data("originalClassList")),t.attr("class",t.data("originalClassList")+" pt-page-current")},{init:a,goPage:u,animEndEventName:n}}()}.call(this),function(){$(function(){var e,t;return e=Backbone.Model.extend({initialize:function(){}}),t=Backbone.Collection.extend({model:e}),GD.FormSettingFolderListView=Backbone.View.extend({initialize:function(e){return this.collection=new t(e),this.collection.on("add remove change",this.render,this),this.render()},render:function(){return this.el=_.template($("#form_setting_folder_list_template").html())({form_folders:this.collection.toJSON()})},addNewFolder:function(t){return this.collection.add(new e(t),{at:0})},updateFolder:function(e){return this.collection.findWhere({fid:e.fid}).set(e)},removeFolder:function(e){return this.collection.remove(this.collection.findWhere({fid:e}))},isEmpty:function(){return this.collection.length===0}})})}.call(this),function(){$(function(){var e,t;return e=Backbone.Model.extend({defaults:{order:0,f_count:0},updateFormsCount:function(e){return this.set("f_count",e)},getFormsCount:function(e){return this.get("f_count")}}),t=Backbone.View.extend({tagName:"li",className:"clearfix",events:{"click .tag-link":"showForms","click .remove-tag":"removeTag","click .edit-tag-name":"editTagName","blur .tag-name-input":"updateTagName","keypress .tag-name-input":"enterTagName"},initialize:function(){return this.listenTo(this.model,"change:f_count",this._updateCount)},showForms:function(e){var t;if($(e.target).closest("li").hasClass("active"))return;return t=this.model.get("tid"),GD.formCoverListViewsManager.showByTag(t,!0),GD.dashboardBreadcrumbsView.updateFolder(""),this.model.trigger("select",t),this.$el.siblings("li").removeClass("active"),this.$el.addClass("active")},removeTag:function(e){return this.model.trigger("removeTag",this.model),this.remove(),e.stopPropagation()},editTagName:function(e){return e.stopPropagation(),this.$el.addClass("edit-name-mode").removeClass("view-mode"),this.$(".tag-name-input").select().focus()},updateTagName:function(e){var t,n,r;return n=this.$(".tag-name-input"),r=n.val().replace(/\s+/g,""),n.val(r),t=GD.userFormTags.validateTagName(this.model.get("tid"),r),t===""?(this.$(".error-message").remove(),this.$el.removeClass("edit-name-mode").addClass("view-mode"),this.model.set("name",r),this.render()):(n.addClass("error"),this.$(".error-message").remove(),n.after($("<div class='error-message'>"+t+"</div>")))},enterTagName:function(e){if(e.keyCode===13)return e.preventDefault(),$(e.target).blur()},showErrorNameInput:function(){return this.$el.addClass("edit-name-mode").removeClass(".view-mode"),this.$(".tag-name-input").addClass("error")},render:function(e){var t,n;return t=_.template($("#user_form_tag_template").html()),this.$el.html(t(this.model.toJSON())),n=this.model.get("tid"),this.$el.attr("data-tag-id",n),n===e&&this.$el.addClass("active"),_.contains(_.values(GD.SYSTEM_TAGS),n)||this.$el.addClass("editable view-mode"),this},_updateCount:function(){return this.$(".count").text(this.model.get("f_count"))}}),GD.UserFormTagList=Backbone.Collection.extend({model:e,initialize:function(){return this.comparator=function(e){return-e.get("order")},this.changed=!1},isTagExisted:function(e){return this.where({tid:e}).length>0},getCustomizedTags:function(){return this.slice(2,this.models.length-2)},validateTagName:function(e,t){var n,r;return t===""?"标签名称不能为空":GD.getStringLength(t)>12?"标签名称过长（最长为6个汉字或12个字符）":(r=null,n=this.getCustomizedTags(),_.each(n,function(
n){if(n.get("tid")!==e&&n.get("name")===t)return r=n}),r!=null?"标签名称不能重复":"")},getTagByName:function(e){return this.findWhere({name:e})},getTagById:function(e){return this.findWhere({tid:e})},getTagNamsByIds:function(e){return _.map(this.models,function(e){return function(t){return e.getTagById(t.get("tid"))}}(this))},updateUntaggedFormsCount:function(e){return this.getTagById(GD.SYSTEM_TAGS.UNTAGGED_ID).updateFormsCount(e)},addDesktopFormsCount:function(e){var t;return t=this.getTagById(GD.SYSTEM_TAGS.ALL_FORMS_TAG_ID),t.updateFormsCount(t.getFormsCount()+e)},updateTagCount:function(e,t){var n,r;r=_.find(this.models,function(t){return t.get("tid")===e});if(r)return n=r.get("f_count"),r.updateFormsCount(t?n+1:n-1)}}),GD.UserFormTagListView=Backbone.View.extend({el:"#user_tags_container",events:{"click .edit-all-tags":"enterEditMode","click .cancel-edit-tags":"cancelEditMode","click .save-tags":"saveTags"},initialize:function(e){return this.setActiveTagId(e),this._initTagsEvent(),GD.userFormTags.on("add",function(e){return function(t){return e._initTagEvent(t)}}(this))},render:function(){var e;return _.some(GD.userFormTags.getCustomizedTags(),function(e){return e.get("order")>0})&&GD.userFormTags.sort(),e=this.$(".user-tags"),e.empty(),this.tagViewList=[],_.each(GD.userFormTags.models,function(n){return function(r){var i;return i=new t({model:r}),n.tagViewList.push(i),e.append(i.render(n.activeTagId).el)}}(this))},addTag:function(e,t){return GD.userFormTags.add({tid:e,name:t}),this.render()},updateTagCount:function(e,t){return GD.userFormTags.updateTagCount(e,t),this},updateTagsCount:function(e,t){return e.length===0?this.updateTagCount(GD.SYSTEM_TAGS.UNTAGGED_ID,t):_.each(e,function(e){return function(n){return e.updateTagCount(n,t)}}(this))},addDesktopFormsCount:function(e){return GD.userFormTags.addDesktopFormsCount(e),this},updateUntaggedFormsCount:function(e){return GD.userFormTags.updateUntaggedFormsCount(e)},enterEditMode:function(e){return this.$el.addClass("edit-mode"),this.backupTagsList=new GD.UserFormTagList(GD.userFormTags.toJSON()),this._sortableTags()},cancelEditMode:function(e){return GD.userFormTags=this.backupTagsList,this._initTagsEvent(),GD.userFormTags.comparator=function(e){return-e.get("order")},this.render(),this.$el.removeClass("edit-mode")},saveTags:function(e){var t,n;return t={},n=$("li.editable").length,_.each($("li.editable"),function(e){return function(e,r){var i;return i=GD.userFormTags.findWhere({tid:$(e).data("tag-id")}),i.set("order",n-r),t[i.get("tid")]={name:i.get("name"),order:r+1}}}(this)),$.ajax({url:this.$el.data("update-url")+"?active_id="+this.activeTagId,type:"patch",data:_.extend(GD.formCoverListViewsManager.getActiveTagAndFolderParams(),{tags:t}),dataType:"json",complete:function(e){return function(t){var n,r;return n=JSON.parse(t.responseText),t.status===400?(e.$(".error-messages").remove(),e.$(".user-tags").before($("<div class='error-messages'>"+n.errors.join("<br>")+"</div>")),_.each(self.tagViewList,function(e){if(_.contains(n.tags,e.model.get("tid")))return e.showErrorNameInput()})):(e.setActiveTagId(e.activeTagId),r=_.find(GD.userFormTags.models,function(e){return e.attributes.tid===GD.SYSTEM_TAGS.UNTAGGED_ID}),r.set("f_count",n.untagged_forms_count),GD.formCoverListViewsManager.addByTag(e.activeTagId,new GD.FormCoverListView(n)).showActive(),GD.dashboardBreadcrumbsView.updateFolder(""),e.$el.removeClass("edit-mode"),e.render(),GD.showFlashNotification("标签修改成功"))}}(this)})},setActiveTagId:function(e){return this._updateActiveTagId(e),this.render()},_updateActiveTagId:function(e){if(e==null||!GD.userFormTags.isTagExisted(e))e=GD.SYSTEM_TAGS.ALL_FORMS_TAG_ID;return this.activeTagId=e},_removeTag:function(e){return GD.userFormTags.remove(e)},_sortableTags:function(){var e,t;return e={scroll:!0,tolerance:"intersect",items:"li.editable",placeholder:"editable placeholder",axis:"y",handle:".sort-tag",stop:function(e,t){return t.item.css("z-index","")}},GD.isLowVersionBrowser||(e.opacity=.5),t=this.$(".user-tags"),t.sortable(e),t.disableSelection()},_initTagsEvent:function(){return _.each(GD.userFormTags.models,function(e){return function(t){return e._initTagEvent(t)}}(this))},_initTagEvent:function(e){return this.listenTo(e,"select",this._updateActiveTagId),this.listenTo(e,"removeTag",function(e){return function(t){return e._removeTag(t)}}(this))}})})}.call(this),function(){var e,t,n,r,i,s;t=function(){var e;return e=$.cookie("dashboardActive"),$.removeCookie("dashboardActive"),e?JSON.parse(e):{}},e=Backbone.View.extend({el:"#set_phone_no_ads_modal",events:{"click .action-container .set-mobile-no":"_showForm","click form a.send-verification-code":"_sendVerificationCode","click .action-container .set-mobile-no-later":"_setLater","click form a.submit":"_save"},_showForm:function(e){return $(e.target).hide(),this.$("form#set_mobile_no_form").show()},_sendVerificationCode:function(e){var t,n,r;return n=$(e.target),t=this.$("input[name=mobile_no]"),GD.clearErrorMessageBelow(t),r={mobile_no:t.val(),authenticity_token:$("meta[name=csrf-token]").attr("content")},$.post(n.data("url"),r,function(e){return GD.countDown(n,60)}).fail(function(e){return function(e){GD.enableBtn(n);if(e.status===400)return GD.showErrorMessageBelow(t,e.responseJSON.error.mobile)}}(this))},_setLater:function(){return $.cookie("viewed_set_mobile_no",!0,{expires:365,path:"/"}),this.$el.modal("hide")},_save:function(e){var t,n;return e.preventDefault(),e.stopPropagation(),t=this.$("input[name=mobile_no]"),n=this.$("input[name=verification_code]"),GD.clearErrorMessageBelow(t),GD.clearErrorMessageBelow(n),this.$(".modal-body form").ajaxSubmit({success:function(e){return function(){return Turbolinks.visit("/home")}}(this),error:function(e){return function(e){!e.responseJSON.error.mobile||GD.showErrorMessageBelow(t,e.responseJSON.error.mobile);if(!!e.responseJSON.error.token)return GD.showErrorMessageBelow(n,e.responseJSON.error.token)}}(this)})},render:function(){return this.$el.modal("show")}}),i=function(){var e;return e=$("#plan_warning_modal"),e.modal("show"),e.on("click",".version-link, .close",function(){return $.ajax({url:e.data("dismiss-url"),data:{media:"system",id:e.data("message-id")},type:"patch"})})},n=function(){var e,t,n;return e=$("#new_user_guide_modal"),e.modal("show"),e.on("hidden.bs.modal",function(){return $(this).find("video").remove(),$(".dashboard .create-new").tooltipster("show"),$.post($(this).find("[data-dismiss=modal]").data("url"))}),n=function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},t=function(){return(typeof document.exitFullscreen=="function"?document.exitFullscreen():void 0)||(typeof document.msExitFullscreen=="function"?document.msExitFullscreen():void 0)||(typeof document.mozCancelFullScreen=="function"?document.mozCancelFullScreen():void 0)||(typeof document.webkitExitFullscreen=="function"?document.webkitExitFullscreen():void 0)},e.find("video").on("ended",function(){return setTimeout(function(){return n()&&t(),e.modal("hide")},2e3)})},r=function(){return $("#new_user_questionnaire_step_modal").modal("show")},s=function(){var e;e=$("#verify_email_modal");if(e.length>0&&!$.cookie("skip_verify_email"))return e.modal("show"),e.on("hidden.bs.modal",function(){return $.cookie("skip_verify_email",!0)}),e.on("click",".email-link",function(){return $.cookie("skip_verify_email",!0)})},$(document).on("page:load ready ajax:complete",function(){var o,u;if($(".dashboard").length>0){GD.DASHBOARD_FADE_EFFECT_DURATION=200,u=t(),GD.formCoverListViewsManager=new GD.FormCoverListViewsManager,u.id&&(o=u.id),GD.userFormTags&&!GD.userFormTags.changed?GD.userFormTagListView=new GD.UserFormTagListView(o):$.get("/user_form_tags",function(e){return GD.userFormTags=new GD.UserFormTagList(e.tags),GD.userFormTagListView=new GD.UserFormTagListView(o)}),GD.formSettingFolderListView||$.get("/user_form_folders",function(e){return GD.formSettingFolderListView=new GD.FormSettingFolderListView(e)}),GD.dashboardBreadcrumbsView=new GD.DashboardBreadcrumbsView,u.type==="folder"?(GD.formCoverListViewsManager.loadForms(null,u.id),GD.dashboardBreadcrumbsView.updateFolder(u.name)):GD.formCoverListViewsManager.loadForms(u.id),s(),n(),r(),i();if($("#set_phone_no_ads_modal").length>0&&!$.cookie("viewed_set_mobile_no"))return(new e).render()}}),window.onpopstate=function(e){GD.DASHBOARD_URL_REGEX=/^http[s]?:\/\/[^\/]+\/home$/i,GD.DASHBOARD_URL="/home",e.state&&e.state.gdState&&GD.DASHBOARD_URL_REGEX.test(e.state.url)&&($.cookie("dashboardActive",JSON.stringify({type:e.state.activeType,id:e.state.activeId,name:e.state.activeName})),Turbolinks.visit(GD.DASHBOARD_URL),history.replaceState({gdState:!0,url:GD.DASHBOARD_URL},"",GD.DASHBOARD_URL));if($(".dashboard").length===0)return;if(e.state&&e.state.turbolinks&&GD.DASHBOARD_URL_REGEX.test(e.state.url)){history.back();return}if(e.state&&e.state.gdState)return GD.formCoverListViewsManager.isOnDesktop()?history.back():Turbolinks.visit(document.URL)}}.call(this),function(){$(function(){return GD.FormTags=Backbone.Model.extend({addTag:function(e){var t;t=this.get("tag_ids"),t.push(e);if(!_.contains(this.get("tag_ids"),e))return this.set("tag_ids",t)}}),GD.FormTagsEditView=Backbone.View.extend({events:{"click li":"_addTagFromExist"},initialize:function(e,t){return this.maxNumOfCustomizedTags=this.$(".add-tag-container").data("max-tags"),this.maxNumOfAllTags=this.maxNumOfCustomizedTags+_.size(GD.SYSTEM_TAGS),this.headerContentDom=this.$(".header .header-content"),this.errorMessageDom=this.$(".header .error-message"),this.headerTitleDom=this.headerContentDom.find(".setting-title"),this.tooltipTrigger=t.tooltipTrigger,this._initTagsinput()},render:function(){this.headerTitleDom.html("添加标签"),this._updateTagCandidates(),this._updateAvailableTagContainerStyle(),this.tooltipTrigger.tooltipster("reposition");if(GD.userFormTags.length<this.maxNumOfAllTags)return this._focusTagsinput()},_addTagFromExist:function(e){var t;return e.stopPropagation(),t=$(e.target).closest("li"),this.$(".tag-input").tagsinput("add",t.find(".tag-name").text()),t.detach(),this._updateAvailableTagContainerStyle(),this._focusTagsinput()},_updateTagCandidates:function(){var e,t,n;return e=GD.userFormTags.getCustomizedTags(),n=this.model.get("tag_ids"),t=this.$(".form-tags-container ul"),t.empty(),_.each(e,function(e){var r,i;r=e.get("tid"),i=e.get("name");if(!_.contains(n,r))return t.append("<li class='available-tag' data-tag-id='"+r+"'><i class='tag-icon gd-icon-tag'/><span class='tag-name'>"+i+"</span></li>")})},_syncTags:function(e,t,n){return $.ajax({url:"/update_base_file_tag",data:{base_file_id:this.model.get("form_id"),tag_id:e,checked:n},type:"patch"}).done(function(r){return function(i){return r.trigger("tagChanged",e,t,n,i.untagged_forms_count),r.tooltipTrigger.tooltipster("reposition")}}(this))},_createTag:function(e){return $.ajax({url:"/user_form_tags",data:{name:e,form_id:this.model.get("form_id")},type:"post",dataType:"json"}).done(function(t){return function(n){var r;return r=n.new_tag_id,t.trigger("tagCreated",r,e,!0),t.trigger("tagChanged",r,e,!0,n.untagged_forms_count),t.model.addTag(r),t.render()}}(this)).fail(function(e){return function(t){var n,r;return r=JSON.parse(t.responseText),n=_.flatten(r.base).join("； "),e._showErrorMessage(n)}}(this))},_initTagsinput:function(){var e,t,n;return n=this.$(".tag-input"),e=this.model.get("tag_ids"),t=_.map(GD.userFormTags.models,function(t){if(_.contains(e,t.get("tid")))return t.get("name")}),n.val(t),n.tagsinput({trimValue:!0}),n.tagsinput("focus"),this.$(".bootstrap-tagsinput > input").css("width",""),n.on("beforeItemAdd",function(e){return function(t){var n,r;n=GD.userFormTags.pluck("name"),r=t.item.replace(/\s+/g,""),!_.contains(n,t.item)&&GD.userFormTags.length>=e.maxNumOfAllTags&&(e._showErrorMessage("标签已满"+e.maxNumOfCustomizedTags+"上限"),t.cancel=!0);if(GD.getStringLength(r)>12)return e._showErrorMessage("标签最长12个字符"),t.cancel=!0}}(this)),n.on("itemAdded",function(e){return function(t){var n,r,i,s;return s=GD.userFormTags.pluck("name"),_.contains(s,t.item)?(n=GD.userFormTags.getTagByName(t.item),r=n.get("tid"),i=e.model.get("tag_ids"),_.contains(i,r)||i.push(r),e.model.set("tag_ids",i),e._updateTagCandidates(),e._syncTags(r,t.item,!0)):e._createTag(t.item)}}(this)),n.on("itemRemoved",function(e){return function(t){var n,r;return n=GD.userFormTags.getTagByName(t.item),r=n!=null?n.get("tid"):void 0,r&&(e.model.set("tag_ids",_.without(e.model.get("tag_ids"),r)),e._updateTagCandidates(),e._syncTags(r,t.item,!1)),e._focusTagsinput(),e._updateAvailableTagContainerStyle()}}(this))},_focusTagsinput:function(){return this.$(".tag-input").tagsinput("focus")},_showErrorMessage:function(e){return this.headerContentDom.fadeOut(500,function(t){return function(){return t.errorMessageDom.html(e),t.errorMessageDom.fadeIn(500,function(){return setTimeout(function(){return t._hideErrorMessage()},2e3)})}}(this))},_hideErrorMessage:function(){return this.errorMessageDom.fadeOut(500,function(e){return function(){return e.errorMessageDom.html(""),e.headerContentDom.fadeIn(500)}}(this))},_updateAvailableTagContainerStyle:function(){return this.$(".add-tag-container").toggleClass("empty",this.$(".add-tag-container").find(".available-tag").length===0)}})})}.call(this),function(){$(document).on("page:load ready",function(){var e,t,n,r,i,s,o;return i=function(){return $(".drop-zone").removeClass("drag-over"),$(".drop-zone .drop-here").hide(),$(".drop-zone .drag-here").show()},o=function(){return i(),$(".upload-tip").hide(),$(".progress-container").show()},$(".drop-zone").on("dragleave",i),n=function(e){var t;return t=parseInt(e.loaded/e.total*100,10),$(".progress-container .gd-progress-inner").css("width",t+"%")},s=function(e){return $(".introduction").hide(),$(".upload-failed .messages").empty(),$.each(e,function(e,t){return $(".upload-failed .messages").append("<li>"+t+"</li>")}),$(".upload-failed").show()},t=function(){return $(".drop-zone").addClass("drag-over"),$(".drop-zone .drop-here").show(),$(".drop-zone .drag-here").hide()},e=function(e){return $.each(e.files,function(t,n){var r;return r=GD.validateFile(n,GD.MAX_EXCEL_SIZE,/.*\.(xls|xlsx)$/),r.length===0?e.submit():(i(),s(r))})},r=function(e){return setTimeout(function(){return $(".upload-tip").hide(),s(e.result.messages),$(".progress-container").hide(),$(".progress-container .gd-progress-inner").css("width","0%")},10)},$(".import-excel.new-form .form_import_from").fileupload({dataType:"json",dropZone:$(".drop-zone"),add:function(t,n){return e(n)},start:function(e){return o()},progress:function(e,t){return n(t)},always:function(e,t){return t.result.error?r(t):setTimeout(function(){return Turbolinks.visit(t.result.redirect_url)},10)},dragover:function(e){return t()}}),$(".import-excel.excel-append").livequery(function(){return $(".import-excel.excel-append .form_import_from").fileupload({dataType:"json",dropZone:$(".drop-zone"),add:function(t,n){return e(n)},start:function(e){return o()},progress:function(e,t){return n(t)},always:function(e,t){return t.result.error?r(t):setTimeout(function(){return $.get(t.result.redirect_url,function(e){return $("#excel_append_modal .modal-content").html(e)})},10)},dragover:function(e){return t()}})}),GD.FieldsExample=function(){function e(e,t,n){var r;this.data=e,this.fieldSelector=t,this.exampleSelector=n,this.render(this.fieldSelector,this.exampleSelector,this.data),r=this,$(this.fieldSelector).find("select").on("change",function(){return r.render($(this).parent(),r.exampleSelector,r.data)})}return e.prototype.render=function(e,t,n){return $(e).each(function(){var e,r;return e=$(this).parent(),r=$(this).find("select").val(),e.find(t).html(n[r])})},e}(),$("#specify_header_row:not(.disabled)").livequery(function(){return $(this).on("click",function(){var e;return e=$("#form_header_row_number").val(),$(this).parents("#excel_append_modal").length>0?$(this).data("url",GD.addParamToUrl($(this).data("url"),"header_row",e)):$(this).attr("href",GD.addParamToUrl($(this).attr("href"),"header_row",e))})}),$("#excel_append_modal").on("click","a:not(.submit):not(.leave-modal)",function(e){return e.preventDefault(),e.stopPropagation(),$.get($(e.target).data("url"),function(e){return function(t){return $(e).closest(".modal-content").html(t)}}(this))}),$("#excel_append_modal").on("ajax:complete",function(e,t,n){return $(this).find(".modal-content").html(t.responseText)}),$(document).on("change",".import-summary .error input",function(){return $(this).parents(".error").find(".info-icon").hide(),$(this).parents(".error").removeClass("error")}),$(document).on("change keyup","#form_header_row_number",function(){var e;return e=parseInt($(this).val()),isNaN(e)||e>$(this).attr("max")||e<$(this).attr("min")?($("#specify_header_row").addClass("disabled"),$(this).addClass("error")):($("#specify_header_row").removeClass("disabled"),$(this).removeClass("error"))}),$("#excel_append_modal").on("hidden.bs.modal",function(e){if(!$(e.target).hasClass("modal"))return;return e.stopPropagation(),$(this).removeData("bs.modal").find(".modal-content .import-excel.excel-append").remove()}),$("#excel_append_modal").on("click",".add-data-by-manual",function(e){return $("#excel_append_modal").modal("hide"),$("#tb_entries_grid_toolbar_item_w2ui-add .toolbar-item").trigger("click")}),$("#excel_append_modal").on("click",".check-data-after-imported",function(e){return $("#excel_append_modal").modal("hide"),$(".no-entry-container").length>0?GD.turbolinksReloadWithCurrentPosition():$("#tb_entries_grid_toolbar_item_w2ui-reload .toolbar-item").trigger("click")})})}.call(this),function(){$(document).on("page:load ready",function(){return $(".participated-content").on("click","tbody tr",function(e){if(!$(e.target).is("a"))return Turbolinks.visit($(this).data("url"))})})}.call(this),function(){window.GD||(window.GD={}),GD.SMSSender=function(){function e(e,t){this.$trigger=e,this.url=t}return e.prototype.send=function(e){if(this.url)return GD.countDown(this.$trigger,60),$.post(this.url,e,function(e){return function(t){return e.$trigger.parent().after(t)}}(this)).fail(function(e){return function(t){return GD.showErrorMessageBelow(e.$trigger,t.responseText),GD.enableBtn(e.$trigger)}}(this))},e}()}.call(this),function(){window.GD||(window.GD={}),GD.FormPagination=function(){function e(e){this.options=e!=null?e:{},this.container=this.options.container,this.fieldsContainer=$(this.container.find(".fields")),this.currentPage=1,this.pageCount=1,this._init()}return e.prototype.onFormContentShowHide=function(){return this._updatePageDisplayedIndex(),this._render()},e.prototype._render=function(){var e;this.fieldsContainer.find(".form-page").hide(),this._updatePageButton(),e=this.container.find(".field.submit-field"),this.container.find(".form-description").toggleClass("hide",this._hasPreviousPage()),e.find(".page-number").html(l("%page_number",{currentPage:this.currentPage,totalPage:this.pageCount})).toggleClass("hide",this._hasOnlyOnePage()),this.container.find(".field.submit-field .submit, #shopping_cart, .captcha-container").toggleClass("hide",this._hasNextPage()),e.toggleClass("has-pagination-action",!this._hasOnlyOnePage()),this.fieldsContainer.find(".form-page[data-page-index="+this.currentPage+"]").show();if(GD.isMobile)return $(window).resize()},e.prototype._updatePageButton=function(){var e,t,n,r;return n=this.container.find(".pagination-action.previous-page"),t=this.container.find(".pagination-action.next-page"),e=$(this.container.find(".field-page-break")[this.currentPage-1]),n.text(e.data("previous-page-text")),t.text(e.data("next-page-text")),r=!this._hasPreviousPage()||e.data("disable-previous-page")===!0,n.toggleClass("hide",r),t.toggleClass("hide",!this._hasNextPage())},e.prototype._goToPreviousPage=function(){if(!this._hasPreviousPage())return;return this.currentPage--,this._render(),$(window).scrollTop(0),this._resetPaginationActionBtns()},e.prototype._goToNextPage=function(){var e;if(!this._hasNextPage())return;return e=this.fieldsContainer.closest("form").data("validate-url"),e?this._validateCurrentPageOnClient()&&this._validateCurrentPage(e,function(e){return function(){return e._doGoToNextPage()}}(this),function(e){return function(){return $(window).scrollTop(0)}}(this)):this._doGoToNextPage(),this._resetPaginationActionBtns()},e.prototype._doGoToNextPage=function(){return this.currentPage++,this._render(),$(window).scrollTop(0)},e.prototype._hasPreviousPage=function(){return this.currentPage>1},e.prototype._hasNextPage=function(){return this.currentPage<this.pageCount},e.prototype._hasOnlyOnePage=function(){return this.pageCount<=1},e.prototype._validateCurrentPage=function(e,t,n){var r,i;return i=this._getFieldsDataToValidate(),r=$("meta[name=csrf-token]").attr("content"),$.ajax(e,{type:"post",data:$.param(i),beforeSend:function(e){return e.setRequestHeader("X-CSRF-Token",r)},success:function(e){return function(n,r,i){return e._clearFieldsErrorMessages(),t()}}(this),error:function(e){return function(t){var r;if(t.status===400)return r=$.parseJSON(t.responseText),e._showErrorMessages(r.errors),n()}}(this)})},e.prototype._validateCurrentPageOnClient=function(e,t){return e==null&&(e=null),t==null&&(t=null),GD.clientValidator.validate()},e.prototype._getFieldsDataToValidate=function(){var e,t,n,r,i;return t=$(this.fieldsContainer.find(".form-page[data-page-index="+this.currentPage+"]")).find("input, textarea, select"),i=_.reject(this.fieldsContainer.find(".logic-trigger"),function(e){return function(t){var n;return n=$(t).closest(".form-page").data("page-index"),!n||n>=e.currentPage}}(this)),r=t.add(typeof (e=$(i)).find=="function"?e.find("input, textarea, select"):void 0),n=r.serializeArray(),n=this._appendUncheckedInputsData(n,r),n},e.prototype._appendUncheckedInputsData=function(e,t){return _.each(t,function(t){return function(t){var n,r,i;r=_.pluck(e,"name"),i=$(t).attr("name");if(($(t).is("input:radio")||$(t).is("input:checkbox"))&&!_.contains(r,i)){n=i.replace(/\[\]$/,"");if(!_.contains(r,n))return e.push({name:n,value:""})}}}(this)),e},e.prototype._showErrorMessages=function(e){return this._clearFieldsErrorMessages(),_.each(e,function(e){return function(t,n){var r,i;return r=t[0],i=t[1],e._addErrorMessageToField(r,i)}}(this))},e.prototype._clearFieldsErrorMessages=function(){var e;return e=this.fieldsContainer.find(".form-page[data-page-index="+this.currentPage+"] .field.has-error"),e.removeClass("has-error"),e.find("> .inline-error").remove(),e.find(".field_with_errors").children().unwrap()},e.prototype._addErrorMessageToField=function(e,t){var n,r,i;return n=e.match(/^field_\d+/),i=this.fieldsContainer.find("[data-api-code="+n+"]"),i.addClass("has-error"),this._wrapErrorInput(i,e,n),r=i.find("> .inline-error"),r.length>0?r.append(""+l("%common_separator")+t):i.append($("<div class='help-block inline-error'><i class='gd-icon-times-circle'></i> "+t+"</div>"))},e.prototype._wrapErrorInput=function(e,t,n){var r,i;return r=e.find("[name^='"+this._inputName(t,n)+"']"),i=".radio-button-wrapper, .check-box-wrapper, .dropdown-wrapper",r.parent().is(i)&&(r=r.parent(i)),r.wrap('<div class="field_with_errors"></div>')},e.prototype._inputName=function(e,t){var n,r,i,s,o;i="entry["+t+"]",s=e.replace(t,"").split("_");for(n=0,r=s.length;n<r;n++)o=s[n],o&&(i+="["+o+"]");return i},e.prototype._wrapFieldsInPage=function(){return _.each(this.fieldsContainer.find(".field-page-break"),function(e){return function(e,t,n){var r,i,s;return i=t+1===n.length,r=i?$(e).nextAll().addBack():$(e).nextUntil(".field-page-break",".field:not(.field-page-break)").addBack(),s=$("<div class='form-page'></div>"),r.wrapAll(s)}}(this)),this.container.find(".field.submit-field").addClass("has-form-pagination")},e.prototype._updatePageDisplayedIndex=function(){var e;return e=0,_.each(this.fieldsContainer.find(".form-page"),function(t){return function(t){return $(t).find(".field:not(.logic-hidden):not(.field-page-break)").length>0?(e++,$(t).attr("data-page-index",e)):$(t).removeAttr("data-page-index")}}(this)),this.pageCount=e},e.prototype._goToFirstErrorPage=function(){var e;e=this.fieldsContainer.find(".field.has-error");if(e.length>0)return this.currentPage=$(e[0]).closest(".form-page").attr("data-page-index")||1},e.prototype._init=function(){return this._wrapFieldsInPage(),this._updatePageDisplayedIndex(),this._goToFirstErrorPage(),this._bindEvents(),this._render()},e.prototype._bindEvents=function(){return this.container.find(".pagination-action.previous-page:not(.working)").click(function(e){return function(){return e._goToPreviousPage()}}(this)),this.container.find(".pagination-action.next-page:not(.working)").click(function(e){return function(){return e._goToNextPage()}}(this))},e.prototype._resetPaginationActionBtns=function(){return this.container.find(".pagination-action.working").removeClass("working")},e}(),GD.initFormPagination=function(e){e==null&&(e=null),e||(e=$("body"));if(!($(e).find(".fields .field-page-break").length>0))return GD.formPagination=null;if($(e).find(".form-page").length===0)return GD.formPagination=new GD.FormPagination({container:e})},$(window).on("formContentShowHide",function(){if(GD.formPagination)return GD.formPagination.onFormContentShowHide()})}.call(this);var w2ui=w2ui||{},w2obj=w2obj||{},w2utils=function(){function n(e){var t=/^[-+]?[0-9]+$/;return t.test(e)}function r(e){return typeof e=="string"&&(e=e.replace(w2utils.settings.decimalSymbol,".")),(typeof e=="number"||typeof e=="string"&&e!=="")&&!isNaN(Number(e))}function i(e){var t=w2utils.settings,n=new RegExp("^"+(t.currencyPrefix?"\\"+t.currencyPrefix+"?":"")+"[-+]?[0-9]*[\\"+w2utils.settings.decimalSymbol+"]?[0-9]+"+(t.currencySuffix?"\\"+t.currencySuffix+"?":"")+"$","i");return typeof e=="string"&&(e=e.replace(new RegExp(t.groupSymbol,"g"),"")),typeof e=="object"||e===""?!1:n.test(e)}function s(e){var t=/^[a-fA-F0-9]+$/;return t.test(e)}function o(e){var t=/^[a-zA-Z0-9_-]+$/;return t.test(e)}function u(e){var t=/^[a-zA-Z0-9._%-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;return t.test(e)}function a(e,t,r){if(!e)return!1;var i="Invalid Date",s,o,u;t==null&&(t=w2utils.settings.date_format);if(typeof e.getUTCFullYear=="function"&&typeof e.getUTCMonth=="function"&&typeof e.getUTCDate=="function")u=e.getUTCFullYear(),s=e.getUTCMonth(),o=e.getUTCDate();else if(typeof e.getFullYear=="function"&&typeof e.getMonth=="function"&&typeof e.getDate=="function")u=e.getFullYear(),s=e.getMonth(),o=e.getDate();else{e=String(e);if(RegExp("mon","ig").test(t)){t=t.replace(/month/ig,"m").replace(/mon/ig,"m").replace(/dd/ig,"d").replace(/[, ]/ig,"/").replace(/\/\//g,"/").toLowerCase(),e=e.replace(/[, ]/ig,"/").replace(/\/\//g,"/").toLowerCase();for(var a=0,f=w2utils.settings.fullmonths.length;a<f;a++){var l=w2utils.settings.fullmonths[a];e=e.replace(RegExp(l,"ig"),parseInt(a)+1).replace(RegExp(l.substr(0,3),"ig"),parseInt(a)+1)}}var c=e.replace(/-/g,"/").replace(/\./g,"/").toLowerCase().split("/"),h=t.replace(/-/g,"/").replace(/\./g,"/").toLowerCase();h==="mm/dd/yyyy"&&(s=c[0],o=c[1],u=c[2]),h==="m/d/yyyy"&&(s=c[0],o=c[1],u=c[2]),h==="dd/mm/yyyy"&&(s=c[1],o=c[0],u=c[2]),h==="d/m/yyyy"&&(s=c[1],o=c[0],u=c[2]),h==="yyyy/dd/mm"&&(s=c[2],o=c[1],u=c[0]),h==="yyyy/d/m"&&(s=c[2],o=c[1],u=c[0]),h==="yyyy/mm/dd"&&(s=c[1],o=c[2],u=c[0]),h==="yyyy/m/d"&&(s=c[1],o=c[2],u=c[0]),h==="mm/dd/yy"&&(s=c[0],o=c[1],u=c[2]),h==="m/d/yy"&&(s=c[0],o=c[1],u=parseInt(c[2])+1900),h==="dd/mm/yy"&&(s=c[1],o=c[0],u=parseInt(c[2])+1900),h==="d/m/yy"&&(s=c[1],o=c[0],u=parseInt(c[2])+1900),h==="yy/dd/mm"&&(s=c[2],o=c[1],u=parseInt(c[0])+1900),h==="yy/d/m"&&(s=c[2],o=c[1],u=parseInt(c[0])+1900),h==="yy/mm/dd"&&(s=c[1],o=c[2],u=parseInt(c[0])+1900),h==="yy/m/d"&&(s=c[1],o=c[2],u=parseInt(c[0])+1900)}return n(u)?n(s)?n(o)?(u=+u,s=+s,o=+o,i=new Date(u,s-1,o),s==null?!1:String(i)=="Invalid Date"?!1:i.getMonth()+1!==s||i.getDate()!==o||i.getFullYear()!==u?!1:r===!0?i:!0):!1:!1:!1}function f(e,t){if(e==null)return!1;var n,r;e=String(e),e=e.toUpperCase(),r=e.indexOf("PM")>=0;var i=r||e.indexOf("AM")>=0;i?n=12:n=24,e=e.replace("AM","").replace("PM",""),e=$.trim(e);var s=e.split(":"),o=parseInt(s[0]||0),u=parseInt(s[1]||0);return!!i&&s.length===1||s.length===2?s[0]===""||o<0||o>n||!this.isInt(s[0])||s[0].length>2?!1:s.length===2&&(s[1]===""||u<0||u>59||!this.isInt(s[1])||s[1].length!==2)?!1:!i&&n===o&&u!==0?!1:i&&s.length===1&&o===0?!1:t===!0?(r&&(o+=12),{hours:o,minutes:u}):!0:!1}function l(e){if(e===""||e==null)return"";var t=new Date(e);w2utils.isInt(e)&&(t=new Date(Number(e)));if(String(t)=="Invalid Date")return"";var n=new Date,r=(n.getTime()-t.getTime())/1e3,i="",s="";return r<0?(i='<span style="color: #aaa">future</span>',s=""):r<60?(i=Math.floor(r),s="sec",r<0&&(i=0,s="sec")):r<3600?(i=Math.floor(r/60),s="min"):r<86400?(i=Math.floor(r/60/60),s="hour"):r<2592e3?(i=Math.floor(r/24/60/60),s="day"):r<31557600?(i=Math.floor(r/365.25/24/60/60*10)/10,s="month"):r>=31557600&&(i=Math.floor(r/365.25/24/60/60*10)/10,s="year"),i+" "+s+(i>1?"s":"")}function c(e){if(e===""||e==null)return"";var t=new Date(e);w2utils.isInt(e)&&(t=new Date(Number(e)));if(String(t)=="Invalid Date")return"";var n=w2utils.settings.shortmonths,r=new Date,i=new Date;i.setTime(i.getTime()-864e5);var s=n[t.getMonth()]+" "+t.getDate()+", "+t.getFullYear(),o=n[r.getMonth()]+" "+r.getDate()+", "+r.getFullYear(),u=n[i.getMonth()]+" "+i.getDate()+", "+i.getFullYear(),a=t.getHours()-(t.getHours()>12?12:0)+":"+(t.getMinutes()<10?"0":"")+t.getMinutes()+" "+(t.getHours()>=12?"pm":"am"),f=t.getHours()-(t.getHours()>12?12:0)+":"+(t.getMinutes()<10?"0":"")+t.getMinutes()+":"+(t.getSeconds()<10?"0":"")+t.getSeconds()+" "+(t.getHours()>=12?"pm":"am"),l=s;return s===o&&(l=a),s===u&&(l=w2utils.lang("Yesterday")),'<span title="'+s+" "+f+'">'+l+"</span>"}function h(e){if(!w2utils.isFloat(e)||e==="")return"";e=parseFloat(e);if(e===0)return 0;var t=["Bt","KB","MB","GB","TB"],n=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return(Math.floor(e/Math.pow(1024,n)*10)/10).toFixed(n===0?0:1)+" "+t[n]}function p(t,n,r){var i="";n==null&&(n=w2utils.settings.groupSymbol||","),r==null&&(r=w2utils.settings.decimalSymbol||".");if(w2utils.isFloat(t)||w2utils.isInt(t)||w2utils.isMoney(t))e=String(t).split("."),i=String(e[0]).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+n),e[1]!=null&&(i+=w2utils.settings.decimalSymbol+e[1]);return i}function d(e,t){var n=w2utils.settings.shortmonths,r=w2utils.settings.fullmonths;t||(t=this.settings.date_format);if(e===""||e==null||typeof e=="object"&&!e.getMonth)return"";var i=new Date(e);w2utils.isInt(e)&&(i=new Date(Number(e)));if(String(i)=="Invalid Date")return"";var s=i.getFullYear(),o=i.getMonth(),u=i.getDate();return t.toLowerCase().replace("month",w2utils.settings.fullmonths[o]).replace("mon",w2utils.settings.shortmonths[o]).replace(/yyyy/g,s).replace(/yyy/g,s).replace(/yy/g,s>2e3?100+parseInt(String(s).substr(2)):String(s).substr(2)).replace(/(^|[^a-z$])y/g,"$1"+s).replace(/mm/g,(o+1<10?"0":"")+(o+1)).replace(/dd/g,(u<10?"0":"")+u).replace(/th/g,u==1?"st":"th").replace(/th/g,u==2?"nd":"th").replace(/th/g,u==3?"rd":"th").replace(/(^|[^a-z$])m/g,"$1"+(o+1)).replace(/(^|[^a-z$])d/g,"$1"+u)}function v(e,t){var n=w2utils.settings.shortmonths,r=w2utils.settings.fullmonths;t||(t=this.settings.time_format);if(e===""||e==null||typeof e=="object"&&!e.getMonth)return"";var i=new Date(e);w2utils.isInt(e)&&(i=new Date(Number(e)));if(w2utils.isTime(e)){var s=w2utils.isTime(e,!0);i=new Date,i.setHours(s.hours),i.setMinutes(s.minutes)}if(String(i)=="Invalid Date")return"";var o="am",u=i.getHours(),a=i.getHours(),f=i.getMinutes(),l=i.getSeconds();f<10&&(f="0"+f),l<10&&(l="0"+l);if(t.indexOf("am")!==-1||t.indexOf("pm")!==-1)u>=12&&(o="pm"),u>12&&(u-=12);return t.toLowerCase().replace("am",o).replace("pm",o).replace("hhh",u<10?"0"+u:u).replace("hh24",a<10?"0"+a:a).replace("h24",a).replace("hh",u).replace("mm",f).replace("mi",f).replace("ss",l).replace(/(^|[^a-z$])h/g,"$1"+u).replace(/(^|[^a-z$])m/g,"$1"+f).replace(/(^|[^a-z$])s/g,"$1"+l)}function m(e,t){var n;return e===""||e==null||typeof e=="object"&&!e.getMonth?"":(typeof t!="string"?n=[this.settings.date_format,this.settings.time_format]:n=t.split("|"),this.formatDate(e,n[0])+" "+this.formatTime(e,n[1]))}function g(e){if(e===null)return e;switch(typeof e){case"number":break;case"string":e=$.trim(String(e).replace(/(<([^>]+)>)/ig,""));break;case"object":for(var t in e)e[t]=this.stripTags(e[t])}return e}function y(e){if(e===null)return e;switch(typeof e){case"number":break;case"string":e=String(e).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;");break;case"object":for(var t in e)e[t]=this.encodeTags(e[t])}return e}function b
(e){return e===""||e==null?"":String(e).replace(/([;&,\.\+\*\~'`:"\!\^#$%@\[\]\(\)=<>\|\/? {}\\])/g,"\\$1")}function w(e){function c(e){var e=String(e).replace(/\r\n/g,"\n"),t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(r&63|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(r&63|128))}return t}var t="",n,r,i,s,o,u,a,f=0,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e=c(e);while(f<e.length)n=e.charCodeAt(f++),r=e.charCodeAt(f++),i=e.charCodeAt(f++),s=n>>2,o=(n&3)<<4|r>>4,u=(r&15)<<2|i>>6,a=i&63,isNaN(r)?u=a=64:isNaN(i)&&(a=64),t=t+l.charAt(s)+l.charAt(o)+l.charAt(u)+l.charAt(a);return t}function E(e){function c(e){var t="",n=0,r=0,i,s;while(n<e.length)r=e.charCodeAt(n),r<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(i=e.charCodeAt(n+1),t+=String.fromCharCode((r&31)<<6|i&63),n+=2):(i=e.charCodeAt(n+1),s=e.charCodeAt(n+2),t+=String.fromCharCode((r&15)<<12|(i&63)<<6|s&63),n+=3);return t}var t="",n,r,i,s,o,u,a,f=0,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(f<e.length)s=l.indexOf(e.charAt(f++)),o=l.indexOf(e.charAt(f++)),u=l.indexOf(e.charAt(f++)),a=l.indexOf(e.charAt(f++)),n=s<<2|o>>4,r=(o&15)<<4|u>>2,i=(u&3)<<6|a,t+=String.fromCharCode(n),u!==64&&(t+=String.fromCharCode(r)),a!==64&&(t+=String.fromCharCode(i));return t=c(t),t}function S(e,t,n,r){function u(e,t,n){var r=!!window.webkitURL;return!r&&typeof n!="undefined"&&(t=n),";"+e+": "+t+"; -webkit-"+e+": "+t+"; -moz-"+e+": "+t+"; "+"-ms-"+e+": "+t+"; -o-"+e+": "+t+";"}var i=$(e).width(),s=$(e).height(),o=.5;if(!e||!t){console.log("ERROR: Cannot do transition when one of the divs is null");return}e.parentNode.style.cssText+=u("perspective","700px")+"; overflow: hidden;",e.style.cssText+="; position: absolute; z-index: 1019; "+u("backface-visibility","hidden"),t.style.cssText+="; position: absolute; z-index: 1020; "+u("backface-visibility","hidden");switch(n){case"slide-left":e.style.cssText+="overflow: hidden; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)"),t.style.cssText+="overflow: hidden; "+u("transform","translate3d("+i+"px, 0, 0)","translate("+i+"px, 0)"),$(t).show(),window.setTimeout(function(){t.style.cssText+=u("transition",o+"s")+";"+u("transform","translate3d(0, 0, 0)","translate(0, 0)"),e.style.cssText+=u("transition",o+"s")+";"+u("transform","translate3d(-"+i+"px, 0, 0)","translate(-"+i+"px, 0)")},1);break;case"slide-right":e.style.cssText+="overflow: hidden; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)"),t.style.cssText+="overflow: hidden; "+u("transform","translate3d(-"+i+"px, 0, 0)","translate(-"+i+"px, 0)"),$(t).show(),window.setTimeout(function(){t.style.cssText+=u("transition",o+"s")+"; "+u("transform","translate3d(0px, 0, 0)","translate(0px, 0)"),e.style.cssText+=u("transition",o+"s")+"; "+u("transform","translate3d("+i+"px, 0, 0)","translate("+i+"px, 0)")},1);break;case"slide-down":e.style.cssText+="overflow: hidden; z-index: 1; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)"),t.style.cssText+="overflow: hidden; z-index: 0; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)"),$(t).show(),window.setTimeout(function(){t.style.cssText+=u("transition",o+"s")+"; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)"),e.style.cssText+=u("transition",o+"s")+"; "+u("transform","translate3d(0, "+s+"px, 0)","translate(0, "+s+"px)")},1);break;case"slide-up":e.style.cssText+="overflow: hidden; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)"),t.style.cssText+="overflow: hidden; "+u("transform","translate3d(0, "+s+"px, 0)","translate(0, "+s+"px)"),$(t).show(),window.setTimeout(function(){t.style.cssText+=u("transition",o+"s")+"; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)"),e.style.cssText+=u("transition",o+"s")+"; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)")},1);break;case"flip-left":e.style.cssText+="overflow: hidden; "+u("transform","rotateY(0deg)"),t.style.cssText+="overflow: hidden; "+u("transform","rotateY(-180deg)"),$(t).show(),window.setTimeout(function(){t.style.cssText+=u("transition",o+"s")+"; "+u("transform","rotateY(0deg)"),e.style.cssText+=u("transition",o+"s")+"; "+u("transform","rotateY(180deg)")},1);break;case"flip-right":e.style.cssText+="overflow: hidden; "+u("transform","rotateY(0deg)"),t.style.cssText+="overflow: hidden; "+u("transform","rotateY(180deg)"),$(t).show(),window.setTimeout(function(){t.style.cssText+=u("transition",o+"s")+"; "+u("transform","rotateY(0deg)"),e.style.cssText+=u("transition",o+"s")+"; "+u("transform","rotateY(-180deg)")},1);break;case"flip-down":e.style.cssText+="overflow: hidden; "+u("transform","rotateX(0deg)"),t.style.cssText+="overflow: hidden; "+u("transform","rotateX(180deg)"),$(t).show(),window.setTimeout(function(){t.style.cssText+=u("transition",o+"s")+"; "+u("transform","rotateX(0deg)"),e.style.cssText+=u("transition",o+"s")+"; "+u("transform","rotateX(-180deg)")},1);break;case"flip-up":e.style.cssText+="overflow: hidden; "+u("transform","rotateX(0deg)"),t.style.cssText+="overflow: hidden; "+u("transform","rotateX(-180deg)"),$(t).show(),window.setTimeout(function(){t.style.cssText+=u("transition",o+"s")+"; "+u("transform","rotateX(0deg)"),e.style.cssText+=u("transition",o+"s")+"; "+u("transform","rotateX(180deg)")},1);break;case"pop-in":e.style.cssText+="overflow: hidden; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)"),t.style.cssText+="overflow: hidden; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)")+"; "+u("transform","scale(.8)")+"; opacity: 0;",$(t).show(),window.setTimeout(function(){t.style.cssText+=u("transition",o+"s")+"; "+u("transform","scale(1)")+"; opacity: 1;",e.style.cssText+=u("transition",o+"s")+";"},1);break;case"pop-out":e.style.cssText+="overflow: hidden; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)")+"; "+u("transform","scale(1)")+"; opacity: 1;",t.style.cssText+="overflow: hidden; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)")+"; opacity: 0;",$(t).show(),window.setTimeout(function(){t.style.cssText+=u("transition",o+"s")+"; opacity: 1;",e.style.cssText+=u("transition",o+"s")+"; "+u("transform","scale(1.7)")+"; opacity: 0;"},1);break;default:e.style.cssText+="overflow: hidden; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)"),t.style.cssText+="overflow: hidden; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)")+"; opacity: 0;",$(t).show(),window.setTimeout(function(){t.style.cssText+=u("transition",o+"s")+"; opacity: 1;",e.style.cssText+=u("transition",o+"s")},1)}setTimeout(function(){n==="slide-down"&&($(e).css("z-index","1019"),$(t).css("z-index","1020")),t&&$(t).css({opacity:"1","-webkit-transition":"","-moz-transition":"","-ms-transition":"","-o-transition":"","-webkit-transform":"","-moz-transform":"","-ms-transform":"","-o-transform":"","-webkit-backface-visibility":"","-moz-backface-visibility":"","-ms-backface-visibility":"","-o-backface-visibility":""}),e&&($(e).css({opacity:"1","-webkit-transition":"","-moz-transition":"","-ms-transition":"","-o-transition":"","-webkit-transform":"","-moz-transform":"","-ms-transform":"","-o-transform":"","-webkit-backface-visibility":"","-moz-backface-visibility":"","-ms-backface-visibility":"","-o-backface-visibility":""}),e.parentNode&&$(e.parentNode).css({"-webkit-perspective":"","-moz-perspective":"","-ms-perspective":"","-o-perspective":""})),typeof r=="function"&&r()},o*1e3)}function x(e,t,n){var r={};typeof t=="object"?r=t:(r.msg=t,r.spinner=n),!r.msg&&r.msg!==0&&(r.msg=""),w2utils.unlock(e),$(e).prepend('<div class="w2ui-lock"></div><div class="w2ui-lock-msg"></div>');var i=$(e).find(".w2ui-lock"),s=$(e).find(".w2ui-lock-msg");r.msg||s.css({"background-color":"transparent",border:"0px"}),r.spinner===!0&&(r.msg='<div class="w2ui-spinner" '+(r.msg?"":'style="width: 35px; height: 35px"')+"></div>"+r.msg),r.opacity!=null&&i.css("opacity",r.opacity),typeof i.fadeIn=="function"?(i.fadeIn(200),s.html(r.msg).fadeIn(200)):(i.show(),s.html(r.msg).show(0)),$().w2tag()}function T(e){$(e).find(".w2ui-lock").remove(),$(e).find(".w2ui-lock-msg").remove()}function N(e,t){var n=$(e),r={left:parseInt(n.css("border-left-width"))||0,right:parseInt(n.css("border-right-width"))||0,top:parseInt(n.css("border-top-width"))||0,bottom:parseInt(n.css("border-bottom-width"))||0},i={left:parseInt(n.css("margin-left"))||0,right:parseInt(n.css("margin-right"))||0,top:parseInt(n.css("margin-top"))||0,bottom:parseInt(n.css("margin-bottom"))||0},s={left:parseInt(n.css("padding-left"))||0,right:parseInt(n.css("padding-right"))||0,top:parseInt(n.css("padding-top"))||0,bottom:parseInt(n.css("padding-bottom"))||0};switch(t){case"top":return r.top+i.top+s.top;case"bottom":return r.bottom+i.bottom+s.bottom;case"left":return r.left+i.left+s.left;case"right":return r.right+i.right+s.right;case"width":return r.left+r.right+i.left+i.right+s.left+s.right+parseInt(n.width());case"height":return r.top+r.bottom+i.top+i.bottom+s.top+s.bottom+parseInt(n.height());case"+width":return r.left+r.right+i.left+i.right+s.left+s.right;case"+height":return r.top+r.bottom+i.top+i.bottom+s.top+s.bottom}return 0}function C(e){var t=this.settings.phrases[e];return t==null?e:t}function k(e){e||(e="en-us"),e.length===5&&(e="locale/"+e+".json"),$.ajax({url:e,type:"GET",dataType:"JSON",async:!1,cache:!1,success:function(e,t,n){w2utils.settings=$.extend(!0,w2utils.settings,e);var r=w2obj.grid.prototype;for(var i in r.buttons)r.buttons[i].caption=w2utils.lang(r.buttons[i].caption),r.buttons[i].hint=w2utils.lang(r.buttons[i].hint);r.msgDelete=w2utils.lang(r.msgDelete),r.msgNotJSON=w2utils.lang(r.msgNotJSON),r.msgRefresh=w2utils.lang(r.msgRefresh)},error:function(t,n,r){console.log("ERROR: Cannot load locale "+e)}})}function L(){if(e.scrollBarSize)return e.scrollBarSize;var t='<div id="_scrollbar_width" style="position: absolute; top: -300px; width: 100px; height: 100px; overflow-y: scroll;">    <div style="height: 120px">1</div></div>';return $("body").append(t),e.scrollBarSize=100-$("#_scrollbar_width > div").width(),$("#_scrollbar_width").remove(),String(navigator.userAgent).indexOf("MSIE")>=0&&(e.scrollBarSize=e.scrollBarSize/2),e.scrollBarSize}function A(e,t){return!e||typeof e.name=="undefined"?(console.log('ERROR: The parameter "name" is required but not supplied in $().'+t+"()."),!1):typeof w2ui[e.name]!="undefined"?(console.log('ERROR: The parameter "name" is not unique. There are other objects already created with the same name (obj: '+e.name+")."),!1):w2utils.isAlphaNumeric(e.name)?!0:(console.log('ERROR: The parameter "name" has to be alpha-numeric (a-z, 0-9, dash and underscore). '),!1)}function O(e,t,n,r){$.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++)if(t[i].id===e)return console.log('ERROR: The parameter "id='+e+'" is not unique within the current '+n+". (obj: "+r+")"),!1;return!0}function M(e){var t=[],n=e.replace(/\/\(/g,"(?:/").replace(/\+/g,"__plus__").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(e,n,r,i,s,o){return t.push({name:i,optional:!!o}),n=n||"",""+(o?"":n)+"(?:"+(o?n:"")+(r||"")+(s||r&&"([^/.]+?)"||"([^/]+?)")+")"+(o||"")}).replace(/([\/.])/g,"\\$1").replace(/__plus__/g,"(.+)").replace(/\*/g,"(.*)");return{path:new RegExp("^"+n+"$","i"),keys:t}}var e={},t={version:"1.4.3",settings:{locale:"en-us",date_format:"m/d/yyyy",date_display:"Mon d, yyyy",time_format:"hh:mi pm",currencyPrefix:"$",currencySuffix:"",currencyPrecision:2,groupSymbol:",",decimalSymbol:".",shortmonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],fullmonths:["January","February","March","April","May","June","July","August","September","October","November","December"],shortdays:["M","T","W","T","F","S","S"],fulldays:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],dataType:"HTTP",phrases:{}},isInt:n,isFloat:r,isMoney:i,isHex:s,isAlphaNumeric:o,isEmail:u,isDate:a,isTime:f,age:l,date:c,size:h,formatNumber:p,formatDate:d,formatTime:v,formatDateTime:m,stripTags:g,encodeTags:y,escapeId:b,base64encode:w,base64decode:E,transition:S,lock:x,unlock:T,lang:C,locale:k,getSize:N,scrollBarSize:L,checkName:A,checkUniqueId:O,parseRoute:M,isIOS:navigator.userAgent.toLowerCase().indexOf("iphone")!=-1||navigator.userAgent.toLowerCase().indexOf("ipod")!=-1||navigator.userAgent.toLowerCase().indexOf("ipad")!=-1?!0:!1,isIE:navigator.userAgent.toLowerCase().indexOf("msie")!=-1||navigator.userAgent.toLowerCase().indexOf("trident")!=-1?!0:!1};return t}();w2utils.event={on:function(e,t){$.isPlainObject(e)||(e={type:e}),e=$.extend({type:null,execute:"before",target:null,onComplete:null},e);if(!e.type){console.log("ERROR: You must specify event type when calling .on() method of "+this.name);return}if(!t){console.log("ERROR: You must specify event handler function when calling .on() method of "+this.name);return}$.isArray(this.handlers)||(this.handlers=[]),this.handlers.push({event:e,handler:t})},off:function(e,t){$.isPlainObject(e)||(e={type:e}),e=$.extend({},{type:null,execute:"before",target:null,onComplete:null},e);if(!e.type){console.log("ERROR: You must specify event type when calling .off() method of "+this.name);return}t||(t=null);var n=[];for(var r=0,i=this.handlers.length;r<i;r++){var s=this.handlers[r];(s.event.type!==e.type&&e.type!=="*"||s.event.target!==e.target&&e.target!==null||s.handler!==t&&t!==null)&&n.push(s)}this.handlers=n},trigger:function(e){var e=$.extend({type:null,phase:"before",target:null},e,{isStopped:!1,isCancelled:!1,preventDefault:function(){this.isCancelled=!0},stopPropagation:function(){this.isStopped=!0}});e.phase==="before"&&(e.onComplete=null);var t,n,r;e.target==null&&(e.target=null),$.isArray(this.handlers)||(this.handlers=[]);for(var i=this.handlers.length-1;i>=0;i--){var s=this.handlers[i];if((s.event.type===e.type||s.event.type==="*")&&(s.event.target===e.target||s.event.target===null)&&(s.event.execute===e.phase||s.event.execute==="*"||s.event.phase==="*")){e=$.extend({},s.event,e),t=[],r=RegExp(/\((.*?)\)/).exec(s.handler),r&&(t=r[1].split(/\s*,\s*/)),t.length===2?s.handler.call(this,e.target,e):s.handler.call(this,e);if(e.isStopped===!0||e.stop===!0)return e}}var o="on"+e.type.substr(0,1).toUpperCase()+e.type.substr(1);if(e.phase==="before"&&typeof this[o]=="function"){n=this[o],t=[],r=RegExp(/\((.*?)\)/).exec(n),r&&(t=r[1].split(/\s*,\s*/)),t.length===2?n.call(this,e.target,e):n.call(this,e);if(e.isStopped===!0||e.stop===!0)return e}if(e.object!=null&&e.phase==="before"&&typeof e.object[o]=="function"){n=e.object[o],t=[],r=RegExp(/\((.*?)\)/).exec(n),r&&(t=r[1].split(/\s*,\s*/)),t.length===2?n.call(this,e.target,e):n.call(this,e);if(e.isStopped===!0||e.stop===!0)return e}return e.phase==="after"&&typeof e.onComplete=="function"&&e.onComplete.call(this,e),e}},w2utils.keyboard=function(e){function n(){$(document).on("keydown",r),$(document).on("mousedown",i)}function r(e){var n=e.target.tagName;if($.inArray(n,["INPUT","SELECT","TEXTAREA"])!==-1)return;if($(e.target).prop("contenteditable")==="true")return;if(!t)return;w2ui[t]&&typeof w2ui[t].keydown=="function"&&w2ui[t].keydown.call(w2ui[t],e)}function i(e){var n=e.target.tagName,r=$(e.target).parents(".w2ui-reset");if(r.length>0){var i=r.attr("name");w2ui[i]&&w2ui[i].keyboard&&(t=i)}}function s(e){return typeof e!="undefined"&&(t=e),t}function o(){t=null}var t=null;return e.active=s,e.clear=o,n(),e}({}),function(){$.fn.w2render=function(e){$(this).length>0&&(typeof e=="string"&&w2ui[e]&&w2ui[e].render($(this)[0]),typeof e=="object"&&e.render($(this)[0]))},$.fn.w2destroy=function(e){!e&&this.length>0&&(e=this.attr("name")),typeof e=="string"&&w2ui[e]&&w2ui[e].destroy(),typeof e=="object"&&e.destroy()},$.fn.w2marker=function(e){return e===""||e==null?$(this).each(function(e,t){t.innerHTML=t.innerHTML.replace(/\<span class=\"w2ui\-marker\"\>(.*)\<\/span\>/ig,"$1")}):$(this).each(function(t,n){function o(e){return'<span class="w2ui-marker">'+e+"</span>"}typeof e=="string"&&(e=[e]),n.innerHTML=n.innerHTML.replace(/\<span class=\"w2ui\-marker\"\>(.*)\<\/span\>/ig,"$1");for(var r in e){var i=e[r];typeof i!="string"&&(i=String(i)),i=i.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&").replace(/&/g,"&amp;").replace(/</g,"&gt;").replace(/>/g,"&lt;");var s=new RegExp(i+"(?!([^<]+)?>)","gi");n.innerHTML=n.innerHTML.replace(s,o)}})},$.fn.w2tag=function(e,t){$.isPlainObject(t)||(t={}),$.isPlainObject(t.css)||(t.css={}),typeof t["class"]=="undefined"&&(t["class"]="");if($(this).length===0){$(".w2ui-tag").each(function(e,t){var n=$(t).data("options");n==null&&(n={}),$($(t).data("taged-el")).removeClass(n["class"]),clearInterval($(t).data("timer")),$(t).remove()});return}return $(this).each(function(n,r){var i=r.id,s=w2utils.escapeId(r.id);if(e===""||e==null)$("#w2ui-tag-"+s).css("opacity",0),setTimeout(function(){clearInterval($("#w2ui-tag-"+s).data("timer")),$("#w2ui-tag-"+s).remove()},300);else{clearInterval($("#w2ui-tag-"+s).data("timer")),$("#w2ui-tag-"+s).remove(),$("body").append('<div id="w2ui-tag-'+i+'" class="w2ui-tag '+($(r).parents(".w2ui-popup").length>0?"w2ui-tag-popup":"")+'" style=""></div>');var o=setInterval(function(){if($(r).length===0||$(r).offset().left===0&&$(r).offset().top===0){clearInterval($("#w2ui-tag-"+s).data("timer")),a();return}$("#w2ui-tag-"+s).data("position")!==$(r).offset().left+r.offsetWidth+"x"+$(r).offset().top&&$("#w2ui-tag-"+s).css({"-webkit-transition":".2s","-moz-transition":".2s","-ms-transition":".2s","-o-transition":".2s",left:$(r).offset().left+r.offsetWidth+"px",top:$(r).offset().top+"px"}).data("position",$(r).offset().left+r.offsetWidth+"x"+$(r).offset().top)},100);setTimeout(function(){if(!$(r).offset())return;$("#w2ui-tag-"+s).css({opacity:"1",left:$(r).offset().left+r.offsetWidth+"px",top:$(r).offset().top+"px"}).html('<div style="margin-top: -2px 0px 0px -2px; white-space: nowrap;"> <div class="w2ui-tag-body">'+e+"</div> </div>").data("text",e).data("taged-el",r).data("options",t).data("position",$(r).offset().left+r.offsetWidth+"x"+$(r).offset().top).data("timer",o),$(r).off("keypress",a).on("keypress",a).off("change",a).on("change",a).css(t.css).addClass(t["class"]),typeof t.onShow=="function"&&t.onShow()},1);var u="";$(r).length>0&&(u=$(r)[0].style.cssText);function a(){$tag=$("#w2ui-tag-"+s);if($tag.length<=0)return;clearInterval($tag.data("timer")),$tag.remove(),$(r).off("keypress",a).removeClass(t["class"]),$(r).length>0&&($(r)[0].style.cssText=u),typeof t.onHide=="function"&&t.onHide()}}})},$.fn.w2overlay=function(e,t){function f(){var e=$("#w2ui-overlay"+r);if(e.data("element")!==n[0])return;if(e.length===0)return;var t=$(n).offset().left+"x"+$(n).offset().top;e.data("position")!==t?l():setTimeout(f,250)}function l(){var e=$("#w2ui-overlay"+r);if(e.data("keepOpen")===!0){e.removeData("keepOpen");return}var n;typeof t.onHide=="function"&&(n=t.onHide());if(n===!1)return;e.remove(),$(document).off("click",l),clearInterval(e.data("timer"))}function c(){var e=$("#w2ui-overlay"+r),i=e.find(" > div");if(e.length>0){i.height("auto").width("auto");var s=!1,o=!1,u=i.height(),a=i.width();t.width&&t.width<a&&(a=t.width),a<30&&(a=30),t.tmp.contentHeight&&(u=t.tmp.contentHeight,i.height(u),setTimeout(function(){i.height()>i.find("div.menu > table").height()&&i.find("div.menu").css("overflow-y","hidden")},1),setTimeout(function(){i.find("div.menu").css("overflow-y","auto")},10)),t.tmp.contentWidth&&(a=t.tmp.contentWidth,i.width(a),setTimeout(function(){i.width()>i.find("div.menu > table").width()&&i.find("div.menu").css("overflow-x","hidden")},1),setTimeout(function(){i.find("div.menu").css("overflow-y","auto")},10));switch(t.align){case"both":t.left=17,t.width===0&&(t.width=w2utils.getSize($(n),"width"));break;case"left":t.left=17;break;case"right":t.tipLeft=a-45,t.left=w2utils.getSize($(n),"width")-a+10}var f=(a-17)/2,l=t.left,h=t.width,p=t.tipLeft;a===30&&!h?h=30:h=t.width?t.width:"auto",f<25&&(l=25-f,p=Math.floor(f)),e.css({top:n.offset().top+w2utils.getSize(n,"height")+t.top+7+"px",left:(n.offset().left>25?n.offset().left:25)+l+"px","min-width":h,"min-height":t.height?t.height:"auto"});var d=window.innerHeight+$(document).scrollTop()-i.offset().top-7,v=window.innerWidth+$(document).scrollLeft()-i.offset().left-7;d>-50&&d<210||t.openAbove===!0?(d=i.offset().top-$(document).scrollTop()-7,t.maxHeight&&d>t.maxHeight&&(d=t.maxHeight),u>d&&(o=!0,i.height(d).width(a).css({"overflow-y":"auto"}),u=d),e.css("top",$(n).offset().top-u-24+t.top+"px"),e.find(">style").html("#w2ui-overlay"+r+":before { display: none; margin-left: "+parseInt(p)+"px; }"+"#w2ui-overlay"+r+":after { display: block; margin-left: "+parseInt(p)+"px; }")):(t.maxHeight&&d>t.maxHeight&&(d=t.maxHeight),u>d&&(o=!0,i.height(d).width(a).css({"overflow-y":"auto"})),e.find(">style").html("#w2ui-overlay"+r+":before { display: block; margin-left: "+parseInt(p)+"px; }"+"#w2ui-overlay"+r+":after { display: none; margin-left: "+parseInt(p)+"px; }")),a=i.width(),v=window.innerWidth+$(document).scrollLeft()-i.offset().left-7,t.maxWidth&&v>t.maxWidth&&(v=t.maxWidth),a>v&&t.align!=="both"&&(t.align="right",setTimeout(function(){c()},1)),o&&s&&i.width(a+w2utils.scrollBarSize()+2)}}var n=this,r="",i={name:null,html:"",align:"none",left:0,top:0,tipLeft:30,width:0,height:0,maxWidth:null,maxHeight:null,style:"","class":"",onShow:null,onHide:null,openAbove:!1,tmp:{}};arguments.length==1&&(typeof e=="object"?t=e:t={html:e}),arguments.length==2&&(t.html=e),$.isPlainObject(t)||(t={}),t=$.extend({},i,t),t.name&&(r="-"+t.name);var s;if(this.length===0||t.html===""||t.html==null)return $("#w2ui-overlay"+r).length>0?(s=$("#w2ui-overlay"+r)[0].hide,typeof s=="function"&&s()):$("#w2ui-overlay"+r).remove(),$(this);$("#w2ui-overlay"+r).length>0&&(s=$("#w2ui-overlay"+r)[0].hide,$(document).off("click",s),typeof s=="function"&&s()),$("body").append('<div id="w2ui-overlay'+r+'" style="display: none"'+'        class="w2ui-reset w2ui-overlay '+($(this).parents(".w2ui-popup, .w2ui-overlay-popup").length>0?"w2ui-overlay-popup":"")+'">'+"    <style></style>"+'    <div style="'+t.style+'" class="'+t["class"]+'"></div>'+"</div>");var o=$("#w2ui-overlay"+r),u=o.find(" > div");u.html(t.html);var a=u.css("background-color");return a!=null&&a!=="rgba(0, 0, 0, 0)"&&a!=="transparent"&&o.css("background-color",a),o.data("element",n.length>0?n[0]:null).data("options",t).data("position",$(n).offset().left+"x"+$(n).offset().top).fadeIn("fast").on("mousedown",function(e){$("#w2ui-overlay"+r).data("keepOpen",!0),["INPUT","TEXTAREA","SELECT"].indexOf(e.target.tagName)===-1&&e.preventDefault()}),o[0].hide=l,o[0].resize=c,c(),setTimeout(function(){c(),$(document).off("click",l).on("click",l),typeof t.onShow=="function"&&t.onShow()},10),f(),$(this)},$.fn.w2menu=function(e,t){function f(){setTimeout(function(){$("#w2ui-overlay"+i+" tr.w2ui-selected").removeClass("w2ui-selected");var e=$("#w2ui-overlay"+i+" tr[index="+t.index+"]"),n=$("#w2ui-overlay"+i+" div.menu").scrollTop();e.addClass("w2ui-selected"),t.tmp&&(t.tmp.contentHeight=$("#w2ui-overlay"+i+" table").height()+(t.search?50:10)),t.tmp&&(t.tmp.contentWidth=$("#w2ui-overlay"+i+" table").width()),$("#w2ui-overlay"+i).length>0&&$("#w2ui-overlay"+i)[0].resize();if(e.length>0){var r=e[0].offsetTop-5,s=$("#w2ui-overlay"+i+" div.menu"),o=s.height();$("#w2ui-overlay"+i+" div.menu").scrollTop(n),(r<n||r+e.height()>n+o)&&$("#w2ui-overlay"+i+" div.menu").animate({scrollTop:r-(o-e.height()*2)/2},200,"linear")}},1)}function l(e){var n=this.value,s=e.keyCode,o=!1;switch(s){case 13:$("#w2ui-overlay"+i).remove(),$.fn.w2menuHandler(e,t.index);break;case 9:case 27:$("#w2ui-overlay"+i).remove(),$.fn.w2menuHandler(e,-1);break;case 38:t.index=w2utils.isInt(t.index)?parseInt(t.index):0,t.index--;while(t.index>0&&t.items[t.index].hidden)t.index--;if(t.index===0&&t.items[t.index].hidden)while(t.items[t.index]&&t.items[t.index].hidden)t.index++;t.index<0&&(t.index=0),o=!0;break;case 40:t.index=w2utils.isInt(t.index)?parseInt(t.index):0,t.index++;while(t.index<t.items.length-1&&t.items[t.index].hidden)t.index++;if(t.index===t.items.length-1&&t.items[t.index].hidden)while(t.items[t.index]&&t.items[t.index].hidden)t.index--;t.index>=t.items.length&&(t.index=t.items.length-1),o=!0}if(!o){var u=0;for(var a in t.items){var l=t.items[a],c="",h="";["is","begins with"].indexOf(t.match)!==-1&&(c="^"),["is","ends with"].indexOf(t.match)!==-1&&(h="$");try{var p=new RegExp(c+n+h,"i");p.test(l.text)||l.text==="..."?l.hidden=!1:l.hidden=!0}catch(d){}r.type==="enum"&&$.inArray(l.id,ids)!==-1&&(l.hidden=!0),l.hidden!==!0&&u++}t.index=0;while(t.index<t.items.length-1&&t.items[t.index].hidden)t.index++;u<=0&&(t.index=-1)}$(r).w2menu("refresh",t),f()}function c(){if(t.spinner)return'<table class="w2ui-drop-menu"><tr><td style="padding: 5px 10px 10px 10px; text-align: center">    <div class="w2ui-spinner" style="width: 18px; height: 18px; position: relative; top: 5px;"></div>     <div style="display: inline-block; padding: 3px; color: #999;">'+w2utils.lang("Loading...")+"</div>"+"</td></tr></table>";var e=0,n='<table cellspacing="0" cellpadding="0" class="w2ui-drop-menu">',r=null,s=null;for(var o=0;o<t.items.length;o++){var u=t.items[o];typeof u=="string"?u={id:u,text:u}:(u.text!=null&&u.id==null&&(u.id=u.text),u.text==null&&u.id!=null&&(u.text=u.id),u.caption!=null&&(u.text=u.caption),r=u.img,s=u.icon,r==null&&(r=null),s==null&&(s=null));if(u.hidden!==!0){var a="",f=u.text;typeof t.render=="function"&&(f=t.render(u,t)),r&&(a='<td class="menu-icon"><div class="w2ui-tb-image w2ui-icon '+r+'"></div></td>'),s&&(a='<td class="menu-icon" align="center"><span class="w2ui-icon '+s+'"></span></td>');if(typeof f!="undefined"&&f!==""&&!/^-+$/.test(f)){var l=e%2===0?"w2ui-item-even":"w2ui-item-odd";t.altRows!==!0&&(l="");var c=1;a==""&&c++,u.count==null&&c++,n+='<tr index="'+o+'" style="'+(u.style?u.style:"")+'" '+'        class="'+l+" "+(t.index===o?"w2ui-selected":"")+" "+(u.disabled===!0?"w2ui-disabled":"")+'"'+"        onmousedown=\"$(this).parent().find('tr').removeClass('w2ui-selected'); $(this).addClass('w2ui-selected');\""+'        onclick="event.stopPropagation(); '+"               if ("+(u.disabled===!0?"true":"false")+") return;"+"               $('#w2ui-overlay"+i+"').remove(); "+"               $.fn.w2menuHandler(event, '"+o+"');\">"+a+'   <td class="menu-text" colspan="'+c+'">'+f+"</td>"+'   <td class="menu-count">'+(u.count!=null?"<span>"+u.count+"</span>":"")+"</td>"+"</tr>",e++}else n+='<tr><td colspan="2" style="padding: 6px; pointer-events: none"><div style="border-top: 1px solid silver;"></div></td></tr>'}t.items[o]=u}return e===0&&(n+='<tr><td style="padding: 13px; color: #999; text-align: center">'+t.msgNoItems+"</div></td></tr>"),n+="</table>",n}var n={index:null,items:[],render:null,msgNoItems:"No items",onSelect:null,tmp:{}},r=this,i="";if(e!=="refresh"){arguments.length===1?t=e:t.items=e,typeof t!="object"&&(t={}),t=$.extend({},n,t),$.fn.w2menuOptions=t,t.name&&(i="-"+t.name),typeof t.select=="function"&&typeof t.onSelect!="function"&&(t.onSelect=t.select),typeof t.onRender=="function"&&typeof t.render!="function"&&(t.render=t.onRender),$.fn.w2menuHandler=function(e,n){typeof t.onSelect=="function"&&setTimeout(function(){t.onSelect({index:n,item:t.items[n],originalEvent:e})},10)};var o="";if(t.search){o+='<div style="position: absolute; top: 0px; height: 40px; left: 0px; right: 0px; border-bottom: 1px solid silver; background-color: #ECECEC; padding: 8px 5px;">    <div class="w2ui-icon icon-search" style="position: absolute; margin-top: 4px; margin-left: 6px; width: 11px; background-position: left !important;"></div>    <input id="menu-search" type="text" style="width: 100%; outline: none; padding-left: 20px;" onclick="event.stopPropagation();"></div>',t.style+=";background-color: #ECECEC",t.index=0;for(var u in t.items)t.items[u].hidden=!1}o+='<div class="menu" style="position: absolute; top: '+(t.search?40:0)+'px; bottom: 0px; width: 100%; overflow: auto;">'+c()+"</div>";var a=$(this).w2overlay(o,t);return setTimeout(function(){$("#w2ui-overlay"+i+" #menu-search").on("keyup",l).on("keydown",function(e){e.keyCode===9&&(e.stopPropagation(),e.preventDefault())});if(t.search){if(["text","password"].indexOf($(r)[0].type)!=-1||$(r)[0].tagName=="texarea")return;$("#w2ui-overlay"+i+" #menu-search").focus()}},200),f(),a}if($("#w2ui-overlay"+i).length>0){t=$.extend($.fn.w2menuOptions,t);var s=$("#w2ui-overlay"+i+" div.menu").scrollTop();$("#w2ui-overlay"+i+" div.menu").html(c()),$("#w2ui-overlay"+i+" div.menu").scrollTop(s),f()}else $(this).w2menu(t)}}(),function(){var w2grid=function(e){this.name=null,this.box=null,this.header="",this.url="",this.routeData={},this.columns=[],this.columnGroups=[],this.records=[],this.summary=[],this.searches=[],this.searchData=[],this.sortData=[],this.postData={},this.toolbar={},this.show={header:!1,toolbar:!1,footer:!1,columnHeaders:!0,lineNumbers:!1,expandColumn:!1,selectColumn:!1,emptyRecords:!0,toolbarReload:!0,toolbarColumns:!0,toolbarSearch:!0,toolbarAdd:!1,toolbarEdit:!1,toolbarDelete:!1,toolbarSave:!1,selectionBorder:!0,recordTitles:!0,skipRecords:!0},this.autoLoad=!0,this.fixedBody=!0,this.recordHeight=24,this.keyboard=!0,this.selectType="row",this.multiSearch=!0,this.multiSelect=!0,this.multiSort=!0,this.reorderColumns=!1,this.reorderRows=!1,this.markSearch=!0,this.total=0,this.limit=100,this.offset=0,this.style="",this.ranges=[],this.menu=[],this.method=null,this.recid=null,this.parser=null,this.onAdd=null,this.onEdit=null,this.onRequest=null,this.onLoad=null,this.onDelete=null,this.onDeleted=null,this.onSubmit=null,this.onSave=null,this.onSelect=null,this.onUnselect=null,this.onClick=null,this.onDblClick=null,this.onContextMenu=null,this.onMenuClick=null,this.onColumnClick=null,this.onColumnResize=null,this.onSort=null,this.onSearch=null,this.onChange=null,this.onRestore=null,this.onExpand=null,this.onCollapse=null,this.onError=null,this.onKeydown=null,this.onToolbar=null,this.onColumnOnOff=null,this.onCopy=null,this.onPaste=null,this.onSelectionExtend=null,this.onEditField=null,this.onRender=null,this.onRefresh=null,this.onReload=null,this.onResize=null,this.onDestroy=null,this.onStateSave=null,this.onStateRestore=null,this.last={field:"all",caption:w2utils.lang("All Fields"),logic:"OR",search:"",searchIds:[],selection:{indexes:[],columns:{}},multi:!1,scrollTop:0,scrollLeft:0,sortData:null,sortCount:0,xhr:null,range_start:null,range_end:null,sel_ind:null,sel_col:null,sel_type:null,edit_col:null},$.extend(!0,this,w2obj.grid,e)};$.fn.w2grid=function(e){if(typeof e=="object"||!e){if(!w2utils.checkName(e,"w2grid"))return;var t=e.columns,n=e.columnGroups,r=e.records,i=e.searches,s=e.searchData,o=e.sortData,u=e.postData,a=e.toolbar,f=new w2grid(e);$.extend(f,{postData:{},records:[],columns:[],searches:[],toolbar:{},sortData:[],searchData:[],handlers:[]}),f.onExpand!=null&&(f.show.expandColumn=!0),$.extend(!0,f.toolbar,a);for(var l in t)f.columns[l]=$.extend(!0,{},t[l]);for(var l in n)f.columnGroups[l]=$.extend(!0,{},n[l]);for(var l in i)f.searches[l]=$.extend(!0,{},i[l]);for(var l in s)f.searchData[l]=$.extend(!0,{},s[l]);for(var l in o)f.sortData[l]=$.extend(!0,{},o[l]);f.postData=$.extend(!0,{},u);for(var c in r){if(r[c].recid==null||typeof r[c].recid=="undefined"){console.log("ERROR: Cannot add records without recid. (obj: "+f.name+")");return}f.records[c]=$.extend(!0,{},r[c])}for(var h in f.columns){var p=f.columns[h];if(typeof p.searchable=="undefined"||f.getSearch(p.field)!=null)continue;var d=p.searchable,v="";p.searchable===!0&&(d="text",v='size="20"'),f.addSearch({field:p.field,caption:p.caption,type:d,attr:v})}return f.initToolbar(),$(this).length!==0&&f.render($(this)[0]),w2ui[f.name]=f,f}if(w2ui[$(this).attr("name")]){var m=w2ui[$(this).attr("name")];return m[e].apply(m,Array.prototype.slice.call(arguments,1)),this}console.log("ERROR: Method "+e+" does not exist on jQuery.w2grid")},w2grid.prototype={msgDelete:w2utils.lang("Are you sure you want to delete selected records?"),msgNotJSON:w2utils.lang("Returned data is not in valid JSON format."),msgAJAXerror:w2utils.lang("AJAX error. See console for more details."),msgRefresh:w2utils.lang("Refreshing..."),buttons:{reload:{type:"button",id:"w2ui-reload",icon:"w2ui-icon-reload",hint:w2utils.lang("Reload data in the list")},columns:{type:"drop",id:"w2ui-column-on-off",icon:"w2ui-icon-columns",hint:w2utils.lang("Show/hide columns"),arrow:!1,html:""},search:{type:"html",id:"w2ui-search",html:'<div class="w2ui-icon icon-search-down w2ui-search-down" title="Select Search Field" onclick="var obj = w2ui[$(this).parents(\'div.w2ui-grid\').attr(\'name\')]; obj.searchShowFields();"></div>'
},"search-go":{type:"check",id:"w2ui-search-advanced",caption:w2utils.lang("Search..."),hint:w2utils.lang("Open Search Fields")},add:{type:"button",id:"w2ui-add",caption:w2utils.lang("Add New"),hint:w2utils.lang("Add new record"),icon:"w2ui-icon-plus"},edit:{type:"button",id:"w2ui-edit",caption:w2utils.lang("Edit"),hint:w2utils.lang("Edit selected record"),icon:"w2ui-icon-pencil",disabled:!0},"delete":{type:"button",id:"w2ui-delete",caption:w2utils.lang("Delete"),hint:w2utils.lang("Delete selected records"),icon:"w2ui-icon-cross",disabled:!0},save:{type:"button",id:"w2ui-save",caption:w2utils.lang("Save"),hint:w2utils.lang("Save changed records"),icon:"w2ui-icon-check"}},add:function(e){$.isArray(e)||(e=[e]);var t=0;for(var n in e){this.recid&&typeof e[n].recid=="undefined"&&(e[n].recid=e[n][this.recid]);if(e[n].recid==null||typeof e[n].recid=="undefined"){console.log("ERROR: Cannot add record without recid. (obj: "+this.name+")");continue}this.records.push(e[n]),t++}var r=typeof this.url!="object"?this.url:this.url.get;return r||(this.total=this.records.length,this.localSort(),this.localSearch()),this.refresh(),t},find:function(e,t){if(typeof e=="undefined"||e==null)e={};var n=[],r=!1;for(var i in e)String(i).indexOf(".")!=-1&&(r=!0);for(var s=0;s<this.records.length;s++){var o=!0;for(var i in e){var u=this.records[s][i];r&&String(i).indexOf(".")!=-1&&(u=this.parseField(this.records[s],i)),e[i]!=u&&(o=!1)}o&&t!==!0&&n.push(this.records[s].recid),o&&t===!0&&n.push(s)}return n},set:function(e,t,n){typeof e=="object"&&(n=t,t=e,e=null);if(e==null){for(var r in this.records)$.extend(!0,this.records[r],t);n!==!0&&this.refresh()}else{var i=this.get(e,!0);if(i==null)return!1;var s=this.records[i]&&this.records[i].recid==e?!1:!0;s?$.extend(!0,this.summary[i],t):$.extend(!0,this.records[i],t),n!==!0&&this.refreshRow(e)}return!0},get:function(e,t){for(var n=0;n<this.records.length;n++)if(this.records[n].recid==e)return t===!0?n:this.records[n];for(var n=0;n<this.summary.length;n++)if(this.summary[n].recid==e)return t===!0?n:this.summary[n];return null},remove:function(){var e=0;for(var t=0;t<arguments.length;t++)for(var n=this.records.length-1;n>=0;n--)this.records[n].recid==arguments[t]&&(this.records.splice(n,1),e++);var r=typeof this.url!="object"?this.url:this.url.get;return r||(this.localSort(),this.localSearch()),this.refresh(),e},addColumn:function(e,t){var n=0;arguments.length==1?(t=e,e=this.columns.length):(typeof e=="string"&&(e=this.getColumn(e,!0)),e===null&&(e=this.columns.length)),$.isArray(t)||(t=[t]);for(var r in t)this.columns.splice(e,0,t[r]),e++,n++;return this.refresh(),n},removeColumn:function(){var e=0;for(var t=0;t<arguments.length;t++)for(var n=this.columns.length-1;n>=0;n--)this.columns[n].field==arguments[t]&&(this.columns.splice(n,1),e++);return this.refresh(),e},getColumn:function(e,t){for(var n=0;n<this.columns.length;n++)if(this.columns[n].field==e)return t===!0?n:this.columns[n];return null},toggleColumn:function(){var e=0;for(var t=0;t<arguments.length;t++)for(var n=this.columns.length-1;n>=0;n--){var r=this.columns[n];r.field==arguments[t]&&(r.hidden=!r.hidden,e++)}return this.refresh(),e},showColumn:function(){var e=0;for(var t=0;t<arguments.length;t++)for(var n=this.columns.length-1;n>=0;n--){var r=this.columns[n];r.gridMinWidth&&delete r.gridMinWidth,r.field==arguments[t]&&r.hidden!==!1&&(r.hidden=!1,e++)}return this.refresh(),e},hideColumn:function(){var e=0;for(var t=0;t<arguments.length;t++)for(var n=this.columns.length-1;n>=0;n--){var r=this.columns[n];r.field==arguments[t]&&r.hidden!==!0&&(r.hidden=!0,e++)}return this.refresh(),e},addSearch:function(e,t){var n=0;arguments.length==1?(t=e,e=this.searches.length):(typeof e=="string"&&(e=this.getSearch(e,!0)),e===null&&(e=this.searches.length)),$.isArray(t)||(t=[t]);for(var r in t)this.searches.splice(e,0,t[r]),e++,n++;return this.searchClose(),n},removeSearch:function(){var e=0;for(var t=0;t<arguments.length;t++)for(var n=this.searches.length-1;n>=0;n--)this.searches[n].field==arguments[t]&&(this.searches.splice(n,1),e++);return this.searchClose(),e},getSearch:function(e,t){for(var n=0;n<this.searches.length;n++)if(this.searches[n].field==e)return t===!0?n:this.searches[n];return null},toggleSearch:function(){var e=0;for(var t=0;t<arguments.length;t++)for(var n=this.searches.length-1;n>=0;n--)this.searches[n].field==arguments[t]&&(this.searches[n].hidden=!this.searches[n].hidden,e++);return this.searchClose(),e},showSearch:function(){var e=0;for(var t=0;t<arguments.length;t++)for(var n=this.searches.length-1;n>=0;n--)this.searches[n].field==arguments[t]&&this.searches[n].hidden!==!1&&(this.searches[n].hidden=!1,e++);return this.searchClose(),e},hideSearch:function(){var e=0;for(var t=0;t<arguments.length;t++)for(var n=this.searches.length-1;n>=0;n--)this.searches[n].field==arguments[t]&&this.searches[n].hidden!==!0&&(this.searches[n].hidden=!0,e++);return this.searchClose(),e},getSearchData:function(e){for(var t in this.searchData)if(this.searchData[t].field==e)return this.searchData[t];return null},localSort:function(e){var t=typeof this.url!="object"?this.url:this.url.get;if(t){console.log("ERROR: grid.localSort can only be used on local data source, grid.url should be empty.");return}if($.isEmptyObject(this.sortData))return;var n=(new Date).getTime(),r=this;r.prepareData();for(var i in this.sortData){var s=this.getColumn(this.sortData[i].field);if(!s)return;typeof s.render=="string"&&(["date","age"].indexOf(s.render.split(":")[0])!=-1&&(this.sortData[i].field_=s.field+"_"),["time"].indexOf(s.render.split(":")[0])!=-1&&(this.sortData[i].field_=s.field+"_"))}return this.records.sort(function(e,t){var n=0;for(var i in r.sortData){var s=r.sortData[i].field;r.sortData[i].field_&&(s=r.sortData[i].field_);var o=e[s],u=t[s];String(s).indexOf(".")!=-1&&(o=r.parseField(e,s),u=r.parseField(t,s)),typeof o=="string"&&(o=$.trim(o.toLowerCase())),typeof u=="string"&&(u=$.trim(u.toLowerCase())),o>u&&(n=r.sortData[i].direction=="asc"?1:-1),o<u&&(n=r.sortData[i].direction=="asc"?-1:1),typeof o!="object"&&typeof u=="object"&&(n=-1),typeof u!="object"&&typeof o=="object"&&(n=1),o==null&&u!=null&&(n=1),o!=null&&u==null&&(n=-1);if(n!=0)break}return n}),n=(new Date).getTime()-n,e!==!0&&setTimeout(function(){r.status(w2utils.lang("Sorting took")+" "+n/1e3+" "+w2utils.lang("sec"))},10),n},localSearch:function(e){var t=typeof this.url!="object"?this.url:this.url.get;if(t){console.log("ERROR: grid.localSearch can only be used on local data source, grid.url should be empty.");return}var n=(new Date).getTime(),r=this;this.total=this.records.length,this.last.searchIds=[],this.prepareData();if(this.searchData.length>0&&!t){this.total=0;for(var i in this.records){var s=this.records[i],o=0;for(var u in this.searchData){var a=this.searchData[u],f=this.getSearch(a.field);if(a==null)continue;f==null&&(f={field:a.field,type:a.type});var l=String(r.parseField(s,f.field)).toLowerCase();if(typeof a.value!="undefined")if(!$.isArray(a.value))var c=String(a.value).toLowerCase();else var c=a.value[0],h=a.value[1];switch(a.operator){case"is":s[f.field]==a.value&&o++;if(f.type=="date"){var l=w2utils.formatDate(s[f.field+"_"],"yyyy-mm-dd"),c=w2utils.formatDate(c,"yyyy-mm-dd");l==c&&o++}if(f.type=="time"){var l=w2utils.formatTime(s[f.field+"_"],"h24:mi"),c=w2utils.formatTime(c,"h24:mi");l==c&&o++}break;case"between":["int","float","money","currency","percent"].indexOf(f.type)!=-1&&parseFloat(s[f.field])>=parseFloat(c)&&parseFloat(s[f.field])<=parseFloat(h)&&o++;if(f.type=="date"){var l=s[f.field+"_"],c=w2utils.isDate(c,w2utils.settings.date_format,!0),h=w2utils.isDate(h,w2utils.settings.date_format,!0);h!=null&&(h=new Date(h.getTime()+864e5)),l>=c&&l<h&&o++}if(f.type=="time"){var l=s[f.field+"_"],c=w2utils.isTime(c,!0),h=w2utils.isTime(h,!0);c=(new Date).setHours(c.hours,c.minutes,c.seconds?c.seconds:0,0),h=(new Date).setHours(h.hours,h.minutes,h.seconds?h.seconds:0,0),l>=c&&l<h&&o++}break;case"in":var p=a.value;a.svalue&&(p=a.svalue),p.indexOf(l)!==-1&&o++;break;case"not in":var p=a.value;a.svalue&&(p=a.svalue),p.indexOf(l)==-1&&o++;break;case"begins":case"begins with":l.indexOf(c)==0&&o++;break;case"contains":l.indexOf(c)>=0&&o++;break;case"ends":case"ends with":l.indexOf(c)>=0&&l.indexOf(c)==l.length-c.length&&o++}}(this.last.logic=="OR"&&o!=0||this.last.logic=="AND"&&o==this.searchData.length)&&this.last.searchIds.push(parseInt(i))}this.total=this.last.searchIds.length}return n=(new Date).getTime()-n,e!==!0&&setTimeout(function(){r.status(w2utils.lang("Search took")+" "+n/1e3+" "+w2utils.lang("sec"))},10),n},getRangeData:function(e,t){var n=this.get(e[0].recid,!0),r=this.get(e[1].recid,!0),i=e[0].column,s=e[1].column,o=[];if(i==s)for(var u=n;u<=r;u++){var a=this.records[u],f=a[this.columns[i].field]||null;t!==!0?o.push(f):o.push({data:f,column:i,index:u,record:a})}else if(n==r){var a=this.records[n];for(var l=i;l<=s;l++){var f=a[this.columns[l].field]||null;t!==!0?o.push(f):o.push({data:f,column:l,index:n,record:a})}}else for(var u=n;u<=r;u++){var a=this.records[u];o.push([]);for(var l=i;l<=s;l++){var f=a[this.columns[l].field];t!==!0?o[o.length-1].push(f):o[o.length-1].push({data:f,column:l,index:u,record:a})}}return o},addRange:function(e){var t=0;if(this.selectType=="row")return t;$.isArray(e)||(e=[e]);for(var n in e){typeof e[n]!="object"&&(e[n]={name:"selection"});if(e[n].name=="selection"){if(this.show.selectionBorder===!1)continue;var r=this.getSelection();if(r.length==0){this.removeRange(e[n].name);continue}var i=r[0],s=r[r.length-1],o=$("#grid_"+this.name+"_rec_"+i.recid+" td[col="+i.column+"]"),u=$("#grid_"+this.name+"_rec_"+s.recid+" td[col="+s.column+"]")}else var i=e[n].range[0],s=e[n].range[1],o=$("#grid_"+this.name+"_rec_"+i.recid+" td[col="+i.column+"]"),u=$("#grid_"+this.name+"_rec_"+s.recid+" td[col="+s.column+"]");if(i){var a={name:e[n].name,range:[{recid:i.recid,column:i.column},{recid:s.recid,column:s.column}],style:e[n].style||""},f=!1;for(var l in this.ranges)if(this.ranges[l].name==e[n].name){f=n;break}f!==!1?this.ranges[f]=a:this.ranges.push(a),t++}}return this.refreshRanges(),t},removeRange:function(){var e=0;for(var t=0;t<arguments.length;t++){var n=arguments[t];$("#grid_"+this.name+"_"+n).remove();for(var r=this.ranges.length-1;r>=0;r--)this.ranges[r].name==n&&(this.ranges.splice(r,1),e++)}return e},refreshRanges:function(){function l(t){var n=e.getSelection();e.last.move={type:"expand",x:t.screenX,y:t.screenY,divX:0,divY:0,recid:n[0].recid,column:n[0].column,originalRange:[{recid:n[0].recid,column:n[0].column},{recid:n[n.length-1].recid,column:n[n.length-1].column}],newRange:[{recid:n[0].recid,column:n[0].column},{recid:n[n.length-1].recid,column:n[n.length-1].column}]},$(document).off("mousemove",c).on("mousemove",c),$(document).off("mouseup",h).on("mouseup",h)}function c(t){var n=e.last.move;if(!n||n.type!="expand")return;n.divX=t.screenX-n.x,n.divY=t.screenY-n.y;var r,i,s=t.originalEvent.target;s.tagName!="TD"&&(s=$(s).parents("td")[0]),typeof $(s).attr("col")!="undefined"&&(i=parseInt($(s).attr("col"))),s=$(s).parents("tr")[0],r=$(s).attr("recid");if(n.newRange[1].recid==r&&n.newRange[1].column==i)return;var o=$.extend({},n.newRange);n.newRange=[{recid:n.recid,column:n.column},{recid:r,column:i}],f=e.trigger($.extend(f,{originalRange:n.originalRange,newRange:n.newRange}));if(f.isCancelled===!0){n.newRange=o,f.newRange=o;return}e.removeRange("grid-selection-expand"),e.addRange({name:"grid-selection-expand",range:f.newRange,style:"background-color: rgba(100,100,100,0.1); border: 2px dotted rgba(100,100,100,0.5);"})}function h(t){e.removeRange("grid-selection-expand"),delete e.last.move,$(document).off("mousemove",c),$(document).off("mouseup",h),e.trigger($.extend(f,{phase:"after"}))}var e=this,t=(new Date).getTime(),n=$("#grid_"+this.name+"_records");for(var r in this.ranges){var i=this.ranges[r],s=i.range[0],o=i.range[1],u=$("#grid_"+this.name+"_rec_"+s.recid+" td[col="+s.column+"]"),a=$("#grid_"+this.name+"_rec_"+o.recid+" td[col="+o.column+"]");$("#grid_"+this.name+"_"+i.name).length==0?n.append('<div id="grid_'+this.name+"_"+i.name+'" class="w2ui-selection" style="'+i.style+'">'+(i.name=="selection"?'<div id="grid_'+this.name+'_resizer" class="w2ui-selection-resizer"></div>':"")+"</div>"):$("#grid_"+this.name+"_"+i.name).attr("style",i.style),u.length>0&&a.length>0&&$("#grid_"+this.name+"_"+i.name).css({left:u.position().left-1+n.scrollLeft()+"px",top:u.position().top-1+n.scrollTop()+"px",width:a.position().left-u.position().left+a.width()+3+"px",height:a.position().top-u.position().top+a.height()+3+"px"})}$(this.box).find("#grid_"+this.name+"_resizer").off("mousedown").on("mousedown",l);var f={phase:"before",type:"selectionExtend",target:e.name,originalRange:null,newRange:null};return(new Date).getTime()-t},select:function(){var e=0,t=this.last.selection;this.multiSelect||this.selectNone();for(var n=0;n<arguments.length;n++){var r=typeof arguments[n]=="object"?arguments[n].recid:arguments[n],i=this.get(r);if(i==null)continue;var s=this.get(r,!0),o=$("#grid_"+this.name+"_rec_"+w2utils.escapeId(r));if(this.selectType=="row"){if(t.indexes.indexOf(s)>=0)continue;var u=this.trigger({phase:"before",type:"select",target:this.name,recid:r,index:s});if(u.isCancelled===!0)continue;t.indexes.push(s),t.indexes.sort(function(e,t){return e-t}),o.addClass("w2ui-selected").data("selected","yes"),o.find(".w2ui-grid-select-check").prop("checked",!0),e++}else{var a=arguments[n].column;if(!w2utils.isInt(a)){var f=[];for(var l in this.columns){if(this.columns[l].hidden)continue;f.push({recid:r,column:parseInt(l)})}return this.multiSelect||(f=f.splice(0,1)),this.select.apply(this,f)}var c=t.columns[s]||[];if($.isArray(c)&&c.indexOf(a)!=-1)continue;var u=this.trigger({phase:"before",type:"select",target:this.name,recid:r,index:s,column:a});if(u.isCancelled===!0)continue;t.indexes.indexOf(s)==-1&&(t.indexes.push(s),t.indexes.sort(function(e,t){return e-t})),c.push(a),c.sort(function(e,t){return e-t}),o.find(" > td[col="+a+"]").addClass("w2ui-selected"),e++,o.data("selected","yes"),o.find(".w2ui-grid-select-check").prop("checked",!0),t.columns[s]=c}this.trigger($.extend(u,{phase:"after"}))}return t.indexes.length==this.records.length||this.searchData.length!==0&&t.indexes.length==this.last.searchIds.length?$("#grid_"+this.name+"_check_all").prop("checked",!0):$("#grid_"+this.name+"_check_all").prop("checked",!1),this.status(),this.addRange("selection"),e},unselect:function(){var e=0,t=this.last.selection;for(var n=0;n<arguments.length;n++){var r=typeof arguments[n]=="object"?arguments[n].recid:arguments[n],i=this.get(r);if(i==null)continue;var s=this.get(i.recid,!0),o=$("#grid_"+this.name+"_rec_"+w2utils.escapeId(r));if(this.selectType=="row"){if(t.indexes.indexOf(s)==-1)continue;var u=this.trigger({phase:"before",type:"unselect",target:this.name,recid:r,index:s});if(u.isCancelled===!0)continue;t.indexes.splice(t.indexes.indexOf(s),1),o.removeClass("w2ui-selected").removeData("selected"),o.length!=0&&(o[0].style.cssText="height: "+this.recordHeight+"px; "+o.attr("custom_style")),o.find(".w2ui-grid-select-check").prop("checked",!1),e++}else{var a=arguments[n].column;if(!w2utils.isInt(a)){var f=[];for(var l in this.columns){if(this.columns[l].hidden)continue;f.push({recid:r,column:parseInt(l)})}return this.unselect.apply(this,f)}var c=t.columns[s];if(!$.isArray(c)||c.indexOf(a)==-1)continue;var u=this.trigger({phase:"before",type:"unselect",target:this.name,recid:r,column:a});if(u.isCancelled===!0)continue;c.splice(c.indexOf(a),1),$("#grid_"+this.name+"_rec_"+w2utils.escapeId(r)+" > td[col="+a+"]").removeClass("w2ui-selected"),e++,c.length==0&&(delete t.columns[s],t.indexes.splice(t.indexes.indexOf(s),1),o.removeData("selected"),o.find(".w2ui-grid-select-check").prop("checked",!1))}this.trigger($.extend(u,{phase:"after"}))}return t.indexes.length==this.records.length||this.searchData.length!==0&&t.indexes.length==this.last.searchIds.length?$("#grid_"+this.name+"_check_all").prop("checked",!0):$("#grid_"+this.name+"_check_all").prop("checked",!1),this.status(),this.addRange("selection"),e},selectAll:function(){if(this.multiSelect===!1)return;var e=this.trigger({phase:"before",type:"select",target:this.name,all:!0});if(e.isCancelled===!0)return;var t=typeof this.url!="object"?this.url:this.url.get,n=this.last.selection,r=[];for(var i in this.columns)r.push(parseInt(i));n.indexes=[];if(!t&&this.searchData.length!==0)for(var s=0;s<this.last.searchIds.length;s++)n.indexes.push(this.last.searchIds[s]),this.selectType!="row"&&(n.columns[this.last.searchIds[s]]=r.slice());else{var o=this.records.length;this.searchData.length!=0&&!this.url&&(o=this.last.searchIds.length);for(var s=0;s<o;s++)n.indexes.push(s),this.selectType!="row"&&(n.columns[s]=r.slice())}this.refresh();var n=this.getSelection();n.length==1?this.toolbar.enable("w2ui-edit"):this.toolbar.disable("w2ui-edit"),n.length>=1?this.toolbar.enable("w2ui-delete"):this.toolbar.disable("w2ui-delete"),this.addRange("selection"),this.trigger($.extend(e,{phase:"after"}))},selectNone:function(){var e=this.trigger({phase:"before",type:"unselect",target:this.name,all:!0});if(e.isCancelled===!0)return;var t=this.last.selection;for(var n in t.indexes){var r=t.indexes[n],i=this.records[r],s=i?i.recid:null,o=$("#grid_"+this.name+"_rec_"+w2utils.escapeId(s));o.removeClass("w2ui-selected").removeData("selected"),o.find(".w2ui-grid-select-check").prop("checked",!1);if(this.selectType!="row"){var u=t.columns[r];for(var a in u)o.find(" > td[col="+u[a]+"]").removeClass("w2ui-selected")}}t.indexes=[],t.columns={},this.toolbar.disable("w2ui-edit","w2ui-delete"),this.removeRange("selection"),$("#grid_"+this.name+"_check_all").prop("checked",!1),this.trigger($.extend(e,{phase:"after"}))},getSelection:function(e){var t=[],n=this.last.selection;if(this.selectType=="row"){for(var r in n.indexes){if(!this.records[n.indexes[r]])continue;e===!0?t.push(n.indexes[r]):t.push(this.records[n.indexes[r]].recid)}return t}for(var r in n.indexes){var i=n.columns[n.indexes[r]];if(!this.records[n.indexes[r]])continue;for(var s in i)t.push({recid:this.records[n.indexes[r]].recid,index:parseInt(n.indexes[r]),column:i[s]})}return t},search:function(e,t){var n=this,r=typeof this.url!="object"?this.url:this.url.get,i=[],s=this.last.multi,o=this.last.logic,u=this.last.field,a=this.last.search;if(arguments.length==0){a="";for(var f in this.searches){var l=this.searches[f],c=$("#grid_"+this.name+"_operator_"+f).val(),h=$("#grid_"+this.name+"_field_"+f),p=$("#grid_"+this.name+"_field2_"+f),d=h.val(),v=p.val(),m=null;if(["int","float","money","currency","percent"].indexOf(l.type)!=-1){var g=h.data("w2field"),y=p.data("w2field");g&&(d=g.clean(d)),y&&(v=y.clean(v))}if(["list","enum"].indexOf(l.type)!=-1){d=h.data("selected")||{};if($.isArray(d)){m=[];for(var b in d)m.push(w2utils.isFloat(d[b].id)?parseFloat(d[b].id):String(d[b].id).toLowerCase()),delete d[b].hidden}else d=d.id||""}if(d!=""&&d!=null||typeof v!="undefined"&&v!=""){var w={field:l.field,type:l.type,operator:c};c=="between"?$.extend(w,{value:[d,v]}):c=="in"&&typeof d=="string"?$.extend(w,{value:d.split(",")}):c=="not in"&&typeof d=="string"?$.extend(w,{value:d.split(",")}):$.extend(w,{value:d}),m&&$.extend(w,{svalue:m});try{l.type=="date"&&c=="between"&&(w.value[0]=d,w.value[1]=v),l.type=="date"&&c=="is"&&(w.value=d)}catch(E){}i.push(w)}}i.length>0&&!r?(s=!0,o="AND"):(s=!0,o="AND")}if(typeof e=="string"){u=e,a=t,s=!1,o="OR";if(typeof t!="undefined")if(e.toLowerCase()=="all")if(this.searches.length>0)for(var f in this.searches){var l=this.searches[f];if(l.type=="text"||l.type=="alphanumeric"&&w2utils.isAlphaNumeric(t)||l.type=="int"&&w2utils.isInt(t)||l.type=="float"&&w2utils.isFloat(t)||l.type=="percent"&&w2utils.isFloat(t)||l.type=="hex"&&w2utils.isHex(t)||l.type=="currency"&&w2utils.isMoney(t)||l.type=="money"&&w2utils.isMoney(t)||l.type=="date"&&w2utils.isDate(t)){var w={field:l.field,type:l.type,operator:l.type=="text"?"contains":"is",value:t};i.push(w)}if(["int","float","money","currency","percent"].indexOf(l.type)!=-1&&String(t).indexOf("-")!=-1){var S=String(t).split("-"),w={field:l.field,type:l.type,operator:"between",value:[S[0],S[1]]};i.push(w)}}else for(var x in this.columns){var w={field:this.columns[x].field,type:"text",operator:"contains",value:t};i.push(w)}else{var T=$("#grid_"+this.name+"_search_all"),l=this.getSearch(e);l==null&&(l={field:e,type:"text"}),l.field==e&&(this.last.caption=l.caption);if(l.type=="list"){var w=T.data("selected");w&&!$.isEmptyObject(w)&&(t=w.id)}if(t!=""){var N="contains",C=t;["date","time","list"].indexOf(l.type)!=-1&&(N="is");if(l.type=="int"&&t!=""){N="is";if(String(t).indexOf("-")!=-1){var w=t.split("-");w.length==2&&(N="between",C=[parseInt(w[0]),parseInt(w[1])])}if(String(t).indexOf(",")!=-1){var w=t.split(",");N="in",C=[];for(var S in w)C.push(w[S])}}var w={field:l.field,type:l.type,operator:N,value:C};i.push(w)}}}if($.isArray(e)){var k="AND";typeof t=="string"&&(k=t.toUpperCase(),k!="OR"&&k!="AND"&&(k="AND")),a="",s=!0,o=k;for(var L in e){var A=e[L],l=this.getSearch(A.field);l==null&&(l={type:"text",operator:"contains"}),i.push($.extend(!0,{},l,A))}}var O=this.trigger({phase:"before",type:"search",target:this.name,searchData:i,searchField:e?e:"multi",searchValue:t?t:"multi"});if(O.isCancelled===!0)return;this.searchData=O.searchData,this.last.field=u,this.last.search=a,this.last.multi=s,this.last.logic=o,this.last.scrollTop=0,this.last.scrollLeft=0,this.last.selection.indexes=[],this.last.selection.columns={},this.searchClose(),this.set({expanded:!1},!0),r?(this.last.xhr_offset=0,this.reload()):(this.localSearch(),this.refresh()),this.trigger($.extend(O,{phase:"after"}))},searchOpen:function(){if(!this.box)return;if(this.searches.length==0)return;var e=this;$("#tb_"+this.name+"_toolbar_item_w2ui-search-advanced").w2overlay(this.getSearchesHTML(),{name:"searches-"+this.name,left:-10,"class":"w2ui-grid-searches",onShow:function(){e.last.logic=="OR"&&(e.searchData=[]),e.initSearches(),$("#w2ui-overlay-searches-"+this.name+" .w2ui-grid-searches").data("grid-name",e.name);var t=$("#w2ui-overlay-searches-"+this.name+" .w2ui-grid-searches *[rel=search]");t.length>0&&t[0].focus()}})},searchClose:function(){if(!this.box)return;if(this.searches.length==0)return;this.toolbar&&this.toolbar.uncheck("w2ui-search-advanced"),$("#w2ui-overlay-searches-"+this.name+" .w2ui-grid-searches").length>0&&$().w2overlay("",{name:"searches-"+this.name})},searchShowFields:function(){var e=$("#grid_"+this.name+"_search_all"),t='<div class="w2ui-select-field"><table>';for(var n=-1;n<this.searches.length;n++){var r=this.searches[n];if(n==-1){if(!this.multiSearch)continue;r={field:"all",caption:w2utils.lang("All Fields")}}else if(this.searches[n].hidden===!0)continue;t+="<tr "+(w2utils.isIOS?"onTouchStart":"onClick")+"=\"w2ui['"+this.name+"'].initAllField('"+r.field+"')\">"+'    <td><input type="radio" tabIndex="-1" '+(r.field==this.last.field?"checked":"")+"></td>"+"    <td>"+r.caption+"</td>"+"</tr>"}t+="</table></div>",setTimeout(function(){$(e).w2overlay(t,{left:-10})},1)},initAllField:function(e,t){var n=$("#grid_"+this.name+"_search_all"),r=this.getSearch(e);if(e=="all")r={field:"all",caption:w2utils.lang("All Fields")},n.w2field("clear"),n.change().focus();else{var i=r.type;["enum","select"].indexOf(i)!=-1&&(i="list"),n.w2field(i,$.extend({},r.options,{suffix:"",autoFormat:!1,selected:t})),["list","enum"].indexOf(r.type)!=-1&&(this.last.search="",this.last.item="",n.val("")),setTimeout(function(){n.focus()},1)}this.last.search!=""?this.search(r.field,this.last.search):(this.last.field=r.field,this.last.caption=r.caption),n.attr("placeholder",r.caption),$().w2overlay()},searchReset:function(e){var t=this.trigger({phase:"before",type:"search",target:this.name,searchData:[]});if(t.isCancelled===!0)return;this.searchData=[],this.last.search="",this.last.logic="OR",this.last.multi=!1,this.last.xhr_offset=0,this.last.scrollTop=0,this.last.scrollLeft=0,this.last.selection.indexes=[],this.last.selection.columns={},this.searchClose(),$("#grid_"+this.name+"_search_all").val(""),e||this.reload(),this.trigger($.extend(t,{phase:"after"}))},clear:function(e){this.records=[],this.summary=[],this.last.scrollTop=0,this.last.scrollLeft=0,this.last.selection.indexes=[],this.last.selection.columns={},this.last.range_start=null,this.last.range_end=null,this.last.xhr_offset=0,e||this.refresh()},reset:function(e){this.offset=0,this.total=0,this.last.scrollTop=0,this.last.scrollLeft=0,this.last.selection.indexes=[],this.last.selection.columns={},this.last.range_start=null,this.last.range_end=null,this.last.xhr_offset=0,this.searchReset(e),this.last.sortData!=null&&(this.sortData=this.last.sortData),this.set({expanded:!1},!0),e||this.refresh()},skip:function(e){var t=typeof this.url!="object"?this.url:this.url.get;if(t){this.offset=parseInt(e),this.offset>this.total&&(this.offset=this.total-this.limit);if(this.offset<0||!w2utils.isInt(this.offset))this.offset=0;this.records=[],this.last.xhr_offset=0,this.last.pull_more=!0,this.last.scrollTop=0,this.last.scrollLeft=0,$("#grid_"+this.name+"_records").prop("scrollTop",0),this.reload()}else console.log("ERROR: grid.skip() can only be called when you have remote data source.")},load:function(e,t){if(typeof e=="undefined"){console.log('ERROR: You need to provide url argument when calling .load() method of "'+this.name+'" object.');return}this.request("get-records",{},e,t)},reload:function(e){var t=typeof this.url!="object"?this.url:this.url.get;t?(this.clear(!0),this.request("get-records",{},null,e)):(this.last.scrollTop=0,this.last.scrollLeft=0,this.last.range_start=null,this.last.range_end=null,this.localSearch(),this.refresh(),typeof e=="function"&&e({status:"success"}))},request:function(e,t,n,r){typeof t=="undefined"&&(t={});if(typeof n=="undefined"||n==""||n==null)n=this.url;if(n==""||n==null)return;var i={};w2utils.isInt(this.offset)||(this.offset=0),w2utils.isInt(this.last.xhr_offset)||(this.last.xhr_offset=0),i.cmd=e,i.selected=this.getSelection(),i.limit=this.limit,i.offset=parseInt(this.offset)+this.last.xhr_offset,i.search=this.searchData,i.searchLogic=this.last.logic,i.sort=this.sortData,this.searchData.length==0&&(delete i.search,delete i.searchLogic),this.sortData.length==0&&delete i.sort,$.extend(i,this.postData),$.extend(i,t);if(e=="get-records"){var s=this.trigger({phase:"before",type:"request",target:this.name,url:n,postData:i});if(s.isCancelled===!0){typeof r=="function"&&r({status:"error",message:"Request aborted."});return}}else var s={url:n,postData:i};var o=this;if(this.last.xhr_offset==0)this.lock(this.msgRefresh,!0);else{var u=$("#grid_"+this.name+"_rec_more");this.autoLoad===!0?u.show().find("td").html('<div><div style="width: 20px; height: 20px;" class="w2ui-spinner"></div></div>'):u.find("td").html("<div>"+w2utils.lang("Load")+" "+o.limit+" "+w2utils.lang("More")+"...</div>")}if(this.last.xhr)try{this.last.xhr.abort()}catch(a){}var n=typeof s.url!="object"?s.url:s.url.get;i.cmd=="save-records"&&typeof s.url=="object"&&(n=s.url.save),i.cmd=="delete-records"&&typeof s.url=="object"&&(n=s.url.remove);if(!$.isEmptyObject(o.routeData)){var f=w2utils.parseRoute(n);if(f.keys.length>0)for(var l=0;l<f.keys.length;l++){if(o.routeData[f.keys[l].name]==null)continue;n=n.replace(new RegExp(":"+f.keys[l].name,"g"),o.routeData[f.keys[l].name])}}var c={type:"POST",url:n,data:s.postData,dataType:"text"};w2utils.settings.dataType=="HTTP"&&(c.data=typeof c.data=="object"?String($.param(c.data,!1)).replace(/%5B/g,"[").replace(/%5D/g,"]"):c.data),w2utils.settings.dataType=="RESTFULL"&&(c.type="GET",i.cmd=="save-records"&&(c.type="PUT"),i.cmd=="delete-records"&&(c.type="DELETE"),c.data=typeof c.data=="object"?String($.param(c.data,!1)).replace(/%5B/g,"[").replace(/%5D/g,"]"):c.data),w2utils.settings.dataType=="JSON"&&(c.type="POST",c.data=JSON.stringify(c.data),c.contentType="application/json"),this.method&&(c.type=this.method),this.last.xhr_cmd=i.cmd,this.last.xhr_start=(new Date).getTime(),this.last.xhr=$.ajax(c).done(function(t,n,i){o.requestComplete(n,e,r)}).fail(function(t,n,i){var s={status:n,error:i,rawResponseText:t.responseText},u=o.trigger({phase:"before",type:"error",error:s,xhr:t});if(u.isCancelled===!0)return;if(n!="abort"){var a;try{a=$.parseJSON(t.responseText)}catch(f){}console.log("ERROR: Server communication failed.","\n   EXPECTED:",{status:"success",total:5,records:[{recid:1,field:"value"}]},"\n         OR:",{status:"error",message:"error message"},"\n   RECEIVED:",typeof a=="object"?a:t.responseText),o.requestComplete("error",e,r)}o.trigger($.extend(u,{phase:"after"}))}),e=="get-records"&&this.trigger($.extend(s,{phase:"after"}))},requestComplete:function(status,cmd,callBack){var obj=this;this.unlock(),setTimeout(function(){obj.status(w2utils.lang("Server Response")+" "+((new Date).getTime()-obj.last.xhr_start)/1e3+" "+w2utils.lang("sec"))},10),this.last.pull_more=!1,this.last.pull_refresh=!0;var event_name="load";this.last.xhr_cmd=="save-records"&&(event_name="save"),this.last.xhr_cmd=="delete-records"&&(event_name="deleted");var eventData=this.trigger({phase:"before",target:this.name,type:event_name,xhr:this.last.xhr,status:status});if(eventData.isCancelled===!0){typeof callBack=="function"&&callBack({status:"error",message:"Request aborted."});return}var data,responseText=this.last.xhr.responseText;if(status!="error"){if(typeof responseText!="undefined"&&responseText!=""){if(typeof responseText=="object")data=responseText;else if(typeof obj.parser=="function")data=obj.parser(responseText),typeof data!="object"&&console.log("ERROR: Your parser did not return proper object");else try{eval("data = "+responseText)}catch(e){}if(obj.recid)for(var r in data.records)data.records[r].recid=data.records[r][obj.recid];typeof data=="undefined"&&(data={status:"error",message:this.msgNotJSON,responseText:responseText});if(data["status"]=="error")obj.error(data.message);else{if(cmd=="get-records")if(this.last.xhr_offset==0)this.records=[],this.summary=[],delete data.status,$.extend(!0,this,data);else{var records=data.records;delete data.records,delete data.status,$.extend(!0,this,data);for(var r in records)this.records.push(records[r])}if(cmd=="delete-records"){this.reset();return}}}}else data={status:"error",message:this.msgAJAXerror,responseText:responseText},obj.error(this.msgAJAXerror);var url=typeof this.url!="object"?this.url:this.url.get;url||(this.localSort(),this.localSearch()),this.total=parseInt(this.total),this.trigger($.extend(eventData,{phase:"after"})),this.last.xhr_offset==0?this.refresh():this.scroll(),typeof callBack=="function"&&callBack(data)},error:function(e){var t=this,n=this.trigger({target:this.name,type:"error",message:e,xhr:this.last.xhr});if(n.isCancelled===!0){typeof callBack=="function"&&callBack({status:"error",message:"Request aborted."});return}w2alert(e,"Error"),this.trigger($.extend(n,{phase:"after"}))},getChanges:function(){var e=[];for(var t in this.records){var n=this.records[t];typeof n["changes"]!="undefined"&&e.push($.extend(!0,{recid:n.recid},n.changes))}return e},mergeChanges:function(){var changes=this.getChanges();for(var c in changes){var record=this.get(changes[c].recid);for(var s in changes[c]){if(s=="recid")continue;try{eval("record."+s+" = changes[c][s]")}catch(e){}delete record.changes}}this.refresh()},save:function(){var e=this,t=this.getChanges(),n=this.trigger({phase:"before",target:this.name,type:"submit",changes:t});if(n.isCancelled===!0)return;var r=typeof this.url!="object"?this.url:this.url.save;r?this.request("save-records",{changes:n.changes},null,function(t){t.status!=="error"&&e.mergeChanges(),e.trigger($.extend(n,{phase:"after"}))}):(this.mergeChanges(),this.trigger($.extend(n,{phase:"after"})))},editField:function(e,t,n,r){var i=this,s=i.get(e,!0),o=i.records[s],u=i.columns[t],a=u?u.editable:null;if(!o||!u||!a||o.editable===!1)return;if(["enum","file"].indexOf(a.type)!=-1){console.log('ERROR: input types "enum" and "file" are not supported in inline editing.');return}var f=i.trigger({phase:"before",type:"editField",target:i.name,recid:e,column:t,value:n,index:s,originalEvent:r});if(f.isCancelled===!0)return;n=f.value,this.selectNone(),this.select({recid:e,column:t}),this.last.edit_col=t;if(["checkbox","check"].indexOf(a.type)!=-1)return;var l=$("#grid_"+i.name+"_rec_"+w2utils.escapeId(e)),c=l.find("[col="+t+"] > div");typeof a.inTag=="undefined"&&(a.inTag=""),typeof a.outTag=="undefined"&&(a.outTag=""),typeof a.style=="undefined"&&(a.style=""),typeof a.items=="undefined"&&(a.items=[]);var h=o.changes&&typeof o.changes[u.field]!="undefined"?w2utils.stripTags(o.changes[u.field]):w2utils.stripTags(o[u.field
]);if(h==null||typeof h=="undefined")h="";typeof n!="undefined"&&n!=null&&(h=n);var p=typeof u.style!="undefined"?u.style+";":"";typeof u.render=="string"&&["number","int","float","money","percent"].indexOf(u.render.split(":")[0])!=-1&&(p+="text-align: right;"),a.items.length>0&&!$.isPlainObject(a.items[0])&&(a.items=w2obj.field.prototype.normMenu(a.items));if(a.type=="select"){var d="";for(var v in a.items)d+='<option value="'+a.items[v].id+'" '+(a.items[v].id==h?"selected":"")+">"+a.items[v].text+"</option>";c.addClass("w2ui-editable").html('<select id="grid_'+i.name+"_edit_"+e+"_"+t+'" column="'+t+'" '+'    style="width: 100%; '+p+a.style+'" field="'+u.field+'" recid="'+e+'" '+"    "+a.inTag+">"+d+"</select>"+a.outTag),c.find("select").focus().on("change",function(e){delete i.last.move}).on("blur",function(e){i.editChange.call(i,this,s,t,e)})}else{c.addClass("w2ui-editable").html('<input id="grid_'+i.name+"_edit_"+e+"_"+t+'" '+'    type="text" style="font-family: inherit; font-size: inherit; outline: none; '+p+a.style+'" field="'+u.field+'" recid="'+e+'" '+'    column="'+t+'" '+a.inTag+">"+a.outTag),n==null&&c.find("input").val(h!="object"?h:"");var m=c.find("input").get(0);$(m).w2field(a.type,$.extend(a,{selected:h})),setTimeout(function(){var e=m;a.type=="list"&&(e=$($(m).data("w2field").helpers.focus).find("input"),typeof h!="object"&&h!=""&&e.val(h).css({opacity:1}).prev().css({opacity:1})),$(e).on("blur",function(e){i.editChange.call(i,m,s,t,e)})},10),n!=null&&$(m).val(h!="object"?h:"")}setTimeout(function(){c.find("input, select").on("click",function(e){e.stopPropagation()}).on("keydown",function(n){var r=!1;switch(n.keyCode){case 9:r=!0;var a=e,f=n.shiftKey?i.prevCell(t,!0):i.nextCell(t,!0);if(f==null){var l=n.shiftKey?i.prevRow(s):i.nextRow(s);if(l!=null&&l!=s){a=i.records[l].recid;for(var c in i.columns){var l=i.columns[c].editable;if(typeof l!="undefined"&&["checkbox","check"].indexOf(l.type)==-1){f=parseInt(c);if(!n.shiftKey)break}}}}a===!1&&(a=e),f==null&&(f=t),this.blur(),setTimeout(function(){i.selectType!="row"?(i.selectNone(),i.select({recid:a,column:f})):i.editField(a,f,null,n)},1);break;case 13:this.blur();var h=n.shiftKey?i.prevRow(s):i.nextRow(s);h!=null&&h!=s&&setTimeout(function(){i.selectType!="row"?(i.selectNone(),i.select({recid:i.records[h].recid,column:t})):i.editField(i.records[h].recid,t,null,n)},100);break;case 38:if(!n.shiftKey)break;r=!0;var h=i.prevRow(s);h!=s&&(this.blur(),setTimeout(function(){i.selectType!="row"?(i.selectNone(),i.select({recid:i.records[h].recid,column:t})):i.editField(i.records[h].recid,t,null,n)},1));break;case 40:if(!n.shiftKey)break;r=!0;var h=i.nextRow(s);h!=null&&h!=s&&(this.blur(),setTimeout(function(){i.selectType!="row"?(i.selectNone(),i.select({recid:i.records[h].recid,column:t})):i.editField(i.records[h].recid,t,null,n)},1));break;case 27:var p=i.parseField(o,u.field);o.changes&&typeof o.changes[u.field]!="undefined"&&(p=o.changes[u.field]),this.value=typeof p!="undefined"?p:"",this.blur(),setTimeout(function(){i.select({recid:e,column:t})},1)}r&&n.preventDefault&&n.preventDefault()});var r=c.find("input").focus();n!=null?r[0].setSelectionRange(r.val().length,r.val().length):r.select()},1),i.trigger($.extend(f,{phase:"after"}))},editChange:function(e,t,n,r){var i=t<0;t=t<0?-t-1:t;var s=i?this.summary:this.records,o=s[t],u=$("#grid_"+this.name+"_rec_"+w2utils.escapeId(o.recid)),a=this.columns[n],f=e.value,l=this.parseField(o,a.field),c=$(e).data("w2field");c&&(f=c.clean(f),c.type=="list"&&f!=""&&(f=$(e).data("selected"))),e.type=="checkbox"&&(o.editable===!1&&(e.checked=!e.checked),f=e.checked);var h={phase:"before",type:"change",target:this.name,input_id:e.id,recid:o.recid,index:t,column:n,value_new:f,value_previous:o.changes&&o.changes.hasOwnProperty(a.field)?o.changes[a.field]:l,value_original:l};for(;;){f=h.value_new;if(typeof f!="object"&&String(l)!=String(f)||typeof f=="object"&&(typeof l!="object"||f.id!=l.id)){h=this.trigger($.extend(h,{type:"change",phase:"before"}));if(h.isCancelled!==!0){if(f!==h.value_new)continue;o.changes=o.changes||{},o.changes[a.field]=h.value_new,this.trigger($.extend(h,{phase:"after"}))}}else{h=this.trigger($.extend(h,{type:"restore",phase:"before"}));if(h.isCancelled!==!0){if(f!==h.value_new)continue;o.changes&&delete o.changes[a.field],$.isEmptyObject(o.changes)&&delete o.changes,this.trigger($.extend(h,{phase:"after"}))}}break}var p=this.getCellHTML(t,n,i);i||(o.changes&&typeof o.changes[a.field]!="undefined"?$(u).find("[col="+n+"]").addClass("w2ui-changed").html(p):$(u).find("[col="+n+"]").removeClass("w2ui-changed").html(p))},"delete":function(e){var t=this,n=this.trigger({phase:"before",target:this.name,type:"delete",force:e});if(n.isCancelled===!0)return;e=n.force;var r=this.getSelection();if(r.length==0)return;if(this.msgDelete!=""&&!e){w2confirm({title:w2utils.lang("Delete Confirmation"),msg:t.msgDelete,btn_yes:{"class":"btn-red"},callBack:function(e){e=="Yes"&&w2ui[t.name]["delete"](!0)}});return}var i=typeof this.url!="object"?this.url:this.url.remove;if(i)this.request("delete-records");else{this.selectNone();if(typeof r[0]!="object")this.remove.apply(this,r);else{for(var s in r){var o=this.columns[r[s].column].field,u=this.get(r[s].recid,!0);u!=null&&o!="recid"&&(this.records[u][o]="",this.records[u].changes&&delete this.records[u].changes[o])}this.refresh()}}this.trigger($.extend(n,{phase:"after"}))},click:function(e,t){var n=(new Date).getTime(),r=null;if(this.last.cancelClick==1||t&&t.altKey)return;typeof e=="object"&&(r=e.column,e=e.recid),typeof t=="undefined"&&(t={});if(n-parseInt(this.last.click_time)<350&&this.last.click_recid==e&&t.type=="click"){this.dblClick(e,t);return}this.last.click_time=n,this.last.click_recid=e;if(r==null&&t.target){var i=t.target;i.tagName!="TD"&&(i=$(i).parents("td")[0]),typeof $(i).attr("col")!="undefined"&&(r=parseInt($(i).attr("col")))}var s=this.trigger({phase:"before",target:this.name,type:"click",recid:e,column:r,originalEvent:t});if(s.isCancelled===!0)return;var o=$("#grid_"+this.name+"_rec_"+w2utils.escapeId(e)).parents("tr");if(o.length>0&&String(o.attr("id")).indexOf("expanded_row")!=-1){var u=o.parents(".w2ui-grid").attr("name");w2ui[u].selectNone(),o.parents(".w2ui-grid").find(".w2ui-expanded-row .w2ui-grid").each(function(e,t){var n=$(t).attr("name");w2ui[n]&&w2ui[n].selectNone()})}$(this.box).find(".w2ui-expanded-row .w2ui-grid").each(function(e,t){var n=$(t).attr("name");w2ui[n]&&w2ui[n].selectNone()});var a=this,f=this.getSelection();$("#grid_"+this.name+"_check_all").prop("checked",!1);var l=this.get(e,!0),c=this.records[l],h=[];a.last.sel_ind=l,a.last.sel_col=r,a.last.sel_recid=e,a.last.sel_type="click";if(t.shiftKey&&f.length>0&&a.multiSelect){if(f[0].recid){var p=this.get(f[0].recid,!0),d=this.get(e,!0);if(r>f[0].column)var v=f[0].column,m=r;else var v=r,m=f[0].column;for(var g=v;g<=m;g++)h.push(g)}else var p=this.get(f[0],!0),d=this.get(e,!0);var y=[];if(p>d){var i=p;p=d,d=i}var b=typeof this.url!="object"?this.url:this.url.get;for(var w=p;w<=d;w++){if(this.searchData.length>0&&!b&&$.inArray(w,this.last.searchIds)==-1)continue;if(this.selectType=="row")y.push(this.records[w].recid);else for(var E in h)y.push({recid:this.records[w].recid,column:h[E]})}this.select.apply(this,y)}else{var S=this.last.selection,x=S.indexes.indexOf(l)!=-1?!0:!1;(!t.ctrlKey&&!t.shiftKey&&!t.metaKey||!this.multiSelect)&&!this.showSelectColumn?(this.selectType!="row"&&$.inArray(r,S.columns[l])==-1&&(x=!1),f.length>300?this.selectNone():this.unselect.apply(this,f),x===!0?this.unselect({recid:e,column:r}):this.select({recid:e,column:r})):(this.selectType!="row"&&$.inArray(r,S.columns[l])==-1&&(x=!1),x===!0?this.unselect({recid:e,column:r}):this.select({recid:e,column:r}))}this.status(),a.initResize(),this.trigger($.extend(s,{phase:"after"}))},columnClick:function(e,t){if($(t.target).is("a"))return;var n=this.trigger({phase:"before",type:"columnClick",target:this.name,field:e,originalEvent:t});if(n.isCancelled===!0)return;var r=this.getColumn(e);r&&r.sortable&&this.sort(e,null,t&&(t.ctrlKey||t.metaKey)?!0:!1),this.trigger($.extend(n,{phase:"after"}))},keydown:function(e){function M(){var e=Math.floor((i[0].scrollTop+i.height()/2.1)/t.recordHeight);t.records[e]||(e=0),t.select({recid:t.records[e].recid,column:0})}function _(){if(t.last.sel_type!="click")return!1;if(t.selectType!="row"){t.last.sel_type="key";if(s.length>1){for(var e in s)if(s[e].recid==t.last.sel_recid&&s[e].column==t.last.sel_col){s.splice(e,1);break}return t.unselect.apply(t,s),!0}return!1}return t.last.sel_type="key",s.length>1?(s.splice(s.indexOf(t.records[t.last.sel_ind].recid),1),t.unselect.apply(t,s),!0):!1}var t=this;if(t.keyboard!==!0)return;var n=t.trigger({phase:"before",type:"keydown",target:t.name,originalEvent:e});if(n.isCancelled===!0)return;var r=!1,i=$("#grid_"+t.name+"_records"),s=t.getSelection();s.length==0&&(r=!0);var o=s[0]||null,u=[],a=s[s.length-1];if(typeof o=="object"&&o!=null){o=s[0].recid,u=[];var f=0;for(;;){if(!s[f]||s[f].recid!=o)break;u.push(s[f].column),f++}a=s[s.length-1].recid}var l=t.get(o,!0),c=t.get(a,!0),h=t.get(o),p=$("#grid_"+t.name+"_rec_"+(l!==null?w2utils.escapeId(t.records[l].recid):"none")),d=!1,v=e.keyCode,m=e.shiftKey;v==9&&(e.shiftKey?v=37:v=39,m=!1,d=!0);switch(v){case 8:case 46:this.show.toolbarDelete&&t["delete"](),d=!0,e.stopPropagation();break;case 27:t.selectNone(),s.length>0&&typeof s[0]=="object"&&t.select({recid:s[0].recid,column:s[0].column}),d=!0;break;case 65:if(!e.metaKey&&!e.ctrlKey)break;t.selectAll(),d=!0;break;case 70:if(!e.metaKey&&!e.ctrlKey)break;$("#grid_"+t.name+"_search_all").focus();break;case 13:if(this.selectType=="row"&&t.show.expandColumn===!0){if(p.length<=0)break;t.toggle(o,e),d=!0}else{for(var g in this.columns)if(this.columns[g].editable){u.push(parseInt(g));break}this.selectType=="row"&&this.last.edit_col&&(u=[this.last.edit_col]),u.length>0&&(t.editField(o,u[0],null,e),d=!0)}break;case 37:if(r)break;var y=$("#grid_"+this.name+"_rec_"+w2utils.escapeId(t.records[l].recid)).parents("tr");if(y.length>0&&String(y.attr("id")).indexOf("expanded_row")!=-1){var o=y.prev().attr("recid"),b=y.parents(".w2ui-grid").attr("name");t.selectNone(),w2utils.keyboard.active(b),w2ui[b].set(o,{expanded:!1}),w2ui[b].collapse(o),w2ui[b].click(o),d=!0;break}if(this.selectType=="row"){if(p.length<=0||h.expanded!==!0)break;t.set(o,{expanded:!1},!0),t.collapse(o,e)}else{var w=t.prevCell(u[0]);if(w!=null)if(m&&t.multiSelect){if(_())return;var E=[],S=[],x=[];if(u.indexOf(this.last.sel_col)==0&&u.length>1)for(var T in s)E.indexOf(s[T].recid)==-1&&E.push(s[T].recid),x.push({recid:s[T].recid,column:u[u.length-1]});else for(var T in s)E.indexOf(s[T].recid)==-1&&E.push(s[T].recid),S.push({recid:s[T].recid,column:w});t.unselect.apply(t,x),t.select.apply(t,S)}else e.shiftKey=!1,t.click({recid:o,column:w},e);else if(!m)for(var N=1;N<s.length;N++)t.unselect(s[N])}d=!0;break;case 39:if(r)break;if(this.selectType=="row"){if(p.length<=0||h.expanded===!0||t.show.expandColumn!==!0)break;t.expand(o,e)}else{var C=t.nextCell(u[u.length-1]);if(C!==null)if(m&&v==39&&t.multiSelect){if(_())return;var E=[],S=[],x=[];if(u.indexOf(this.last.sel_col)==u.length-1&&u.length>1)for(var T in s)E.indexOf(s[T].recid)==-1&&E.push(s[T].recid),x.push({recid:s[T].recid,column:u[0]});else for(var T in s)E.indexOf(s[T].recid)==-1&&E.push(s[T].recid),S.push({recid:s[T].recid,column:C});t.unselect.apply(t,x),t.select.apply(t,S)}else t.click({recid:o,column:C},e);else if(!m)for(var N=0;N<s.length-1;N++)t.unselect(s[N])}d=!0;break;case 38:r&&M();if(p.length<=0)break;var w=t.prevRow(l);if(w!=null){if(t.records[w].expanded){var k=$("#grid_"+t.name+"_rec_"+w2utils.escapeId(t.records[w].recid)+"_expanded_row").find(".w2ui-grid");if(k.length>0&&w2ui[k.attr("name")]){t.selectNone();var b=k.attr("name"),L=w2ui[b].records;w2utils.keyboard.active(b),w2ui[b].click(L[L.length-1].recid),d=!0;break}}if(m&&t.multiSelect){if(_())return;if(t.selectType=="row")t.last.sel_ind>w&&t.last.sel_ind!=c?t.unselect(t.records[c].recid):t.select(t.records[w].recid);else if(t.last.sel_ind>w&&t.last.sel_ind!=c){w=c;var E=[];for(var g in u)E.push({recid:t.records[w].recid,column:u[g]});t.unselect.apply(t,E)}else{var E=[];for(var g in u)E.push({recid:t.records[w].recid,column:u[g]});t.select.apply(t,E)}}else s.length>300?this.selectNone():this.unselect.apply(this,s),t.click({recid:t.records[w].recid,column:u[0]},e);t.scrollIntoView(w),e.preventDefault&&e.preventDefault()}else{if(!m)for(var N=1;N<s.length;N++)t.unselect(s[N]);var y=$("#grid_"+t.name+"_rec_"+w2utils.escapeId(t.records[l].recid)).parents("tr");if(y.length>0&&String(y.attr("id")).indexOf("expanded_row")!=-1){var o=y.prev().attr("recid"),b=y.parents(".w2ui-grid").attr("name");t.selectNone(),w2utils.keyboard.active(b),w2ui[b].click(o),d=!0;break}}break;case 40:r&&M();if(p.length<=0)break;if(t.records[c].expanded){var k=$("#grid_"+this.name+"_rec_"+w2utils.escapeId(t.records[c].recid)+"_expanded_row").find(".w2ui-grid");if(k.length>0&&w2ui[k.attr("name")]){t.selectNone();var b=k.attr("name"),L=w2ui[b].records;w2utils.keyboard.active(b),w2ui[b].click(L[0].recid),d=!0;break}}var C=t.nextRow(c);if(C!=null){if(m&&t.multiSelect){if(_())return;if(t.selectType=="row")this.last.sel_ind<C&&this.last.sel_ind!=l?t.unselect(t.records[l].recid):t.select(t.records[C].recid);else if(this.last.sel_ind<C&&this.last.sel_ind!=l){C=l;var E=[];for(var g in u)E.push({recid:t.records[C].recid,column:u[g]});t.unselect.apply(t,E)}else{var E=[];for(var g in u)E.push({recid:t.records[C].recid,column:u[g]});t.select.apply(t,E)}}else s.length>300?this.selectNone():this.unselect.apply(this,s),t.click({recid:t.records[C].recid,column:u[0]},e);t.scrollIntoView(C),d=!0}else{if(!m)for(var N=0;N<s.length-1;N++)t.unselect(s[N]);var y=$("#grid_"+this.name+"_rec_"+w2utils.escapeId(t.records[c].recid)).parents("tr");if(y.length>0&&String(y.attr("id")).indexOf("expanded_row")!=-1){var o=y.next().attr("recid"),b=y.parents(".w2ui-grid").attr("name");t.selectNone(),w2utils.keyboard.active(b),w2ui[b].click(o),d=!0;break}}break;case 91:if(r)break;var A=t.copy();$("body").append('<textarea id="_tmp_copy_data"    onpaste="var obj = this; setTimeout(function () { w2ui[\''+t.name+"'].paste(obj.value); }, 1);\" "+"   onkeydown=\"w2ui['"+t.name+"'].keydown(event)\""+'   style="position: absolute; top: -100px; height: 1px; width: 1px">'+A+"</textarea>"),$("#_tmp_copy_data").focus().select(),$(document).on("keyup",O);function O(){$("#_tmp_copy_data").remove(),$(document).off("keyup",O)}break;case 88:if(r)break;(e.ctrlKey||e.metaKey)&&setTimeout(function(){t["delete"](!0)},100)}var E=[187,189,32];for(var T=48;T<=90;T++)E.push(T);if(E.indexOf(v)!=-1&&!e.ctrlKey&&!e.metaKey&&!d){u.length==0&&u.push(0);var E=String.fromCharCode(v);v==187&&(E="="),v==189&&(E="-"),m||(E=E.toLowerCase()),t.editField(o,u[0],E,e),d=!0}d&&e.preventDefault&&e.preventDefault(),t.trigger($.extend(n,{phase:"after"}))},scrollIntoView:function(e){var t=this.records.length;this.searchData.length!=0&&!this.url&&(t=this.last.searchIds.length);if(typeof e=="undefined"){var n=this.getSelection();if(n.length==0)return;e=this.get(n[0],!0)}var r=$("#grid_"+this.name+"_records");if(t==0)return;var i=this.last.searchIds.length;if(r.height()>this.recordHeight*(i>0?i:t))return;i>0&&(e=this.last.searchIds.indexOf(e));var s=Math.floor(r[0].scrollTop/this.recordHeight),o=s+Math.floor(r.height()/this.recordHeight);e==s&&r.animate({scrollTop:r.scrollTop()-r.height()/1.3},250,"linear"),e==o&&r.animate({scrollTop:r.scrollTop()+r.height()/1.3},250,"linear"),(e<s||e>o)&&r.animate({scrollTop:(e-1)*this.recordHeight})},dblClick:function(e,t){var n=null;typeof e=="object"&&(n=e.column,e=e.recid),typeof t=="undefined"&&(t={});if(n==null&&t.target){var r=t.target;r.tagName!="TD"&&(r=$(r).parents("td")[0]),n=parseInt($(r).attr("col"))}var i=this.trigger({phase:"before",target:this.name,type:"dblClick",recid:e,column:n,originalEvent:t});if(i.isCancelled===!0)return;this.selectNone();var s=this.columns[n];s&&$.isPlainObject(s.editable)?this.editField(e,n,null,t):this.select({recid:e,column:n}),this.trigger($.extend(i,{phase:"after"}))},contextMenu:function(e,t){var n=this;if(n.last.userSelect=="text")return;typeof t=="undefined"&&(t={offsetX:0,offsetY:0,target:$("#grid_"+n.name+"_rec_"+e)[0]}),typeof t.offsetX=="undefined"&&(t.offsetX=t.layerX-t.target.offsetLeft,t.offsetY=t.layerY-t.target.offsetTop),w2utils.isFloat(e)&&(e=parseFloat(e)),this.getSelection().indexOf(e)==-1&&n.click(e),setTimeout(function(){var r=n.trigger({phase:"before",type:"contextMenu",target:n.name,originalEvent:t,recid:e});if(r.isCancelled===!0)return;n.menu.length>0&&$(n.box).find(t.target).w2menu(n.menu,{left:t.offsetX,onSelect:function(t){n.menuClick(e,parseInt(t.index),t.originalEvent)}}),n.trigger($.extend(r,{phase:"after"}))},150),t.preventDefault&&t.preventDefault()},menuClick:function(e,t,n){var r=this,i=r.trigger({phase:"before",type:"menuClick",target:r.name,originalEvent:n,recid:e,menuIndex:t,menuItem:r.menu[t]});if(i.isCancelled===!0)return;r.trigger($.extend(i,{phase:"after"}))},toggle:function(e){var t=this.get(e);return t.expanded===!0?this.collapse(e):this.expand(e)},expand:function(e){function u(){var t=$("#grid_"+n.name+"_rec_"+r+"_expanded"),i=$("#grid_"+n.name+"_rec_"+r+"_expanded_row .w2ui-expanded1 > div");if(t.height()<5)return;t.css("opacity",1),i.show().css("opacity",1),$("#grid_"+n.name+"_cell_"+n.get(e,!0)+"_expand div").html("-")}var t=this.get(e),n=this,r=w2utils.escapeId(e);if($("#grid_"+this.name+"_rec_"+r+"_expanded_row").length>0)return!1;if(t.expanded=="none")return!1;var i=1+(this.show.selectColumn?1:0),s="";$("#grid_"+this.name+"_rec_"+r).after('<tr id="grid_'+this.name+"_rec_"+e+'_expanded_row" class="w2ui-expanded-row '+s+'">'+(this.show.lineNumbers?'<td class="w2ui-col-number"></td>':"")+'    <td class="w2ui-grid-data w2ui-expanded1" colspan="'+i+'"><div style="display: none"></div></td>'+'    <td colspan="100" class="w2ui-expanded2">'+'        <div id="grid_'+this.name+"_rec_"+e+'_expanded" style="opacity: 0"></div>'+"    </td>"+"</tr>");var o=this.trigger({phase:"before",type:"expand",target:this.name,recid:e,box_id:"grid_"+this.name+"_rec_"+e+"_expanded",ready:u});if(o.isCancelled===!0){$("#grid_"+this.name+"_rec_"+r+"_expanded_row").remove();return}return $("#grid_"+this.name+"_rec_"+r).attr("expanded","yes").addClass("w2ui-expanded"),$("#grid_"+this.name+"_rec_"+r+"_expanded_row").show(),$("#grid_"+this.name+"_cell_"+this.get(e,!0)+"_expand div").html('<div class="w2ui-spinner" style="width: 16px; height: 16px; margin: -2px 2px;"></div>'),t.expanded=!0,setTimeout(u,300),this.trigger($.extend(o,{phase:"after"})),this.resizeRecords(),!0},collapse:function(e){var t=this.get(e),n=this,r=w2utils.escapeId(e);if($("#grid_"+this.name+"_rec_"+r+"_expanded_row").length==0)return!1;var i=this.trigger({phase:"before",type:"collapse",target:this.name,recid:e,box_id:"grid_"+this.name+"_rec_"+r+"_expanded"});if(i.isCancelled===!0)return;return $("#grid_"+this.name+"_rec_"+r).removeAttr("expanded").removeClass("w2ui-expanded"),$("#grid_"+this.name+"_rec_"+r+"_expanded").css("opacity",0),$("#grid_"+this.name+"_cell_"+this.get(e,!0)+"_expand div").html("+"),setTimeout(function(){$("#grid_"+n.name+"_rec_"+r+"_expanded").height("0px"),setTimeout(function(){$("#grid_"+n.name+"_rec_"+r+"_expanded_row").remove(),delete t.expanded,n.trigger($.extend(i,{phase:"after"})),n.resizeRecords()},300)},200),!0},sort:function(e,t,n){var r=this.trigger({phase:"before",type:"sort",target:this.name,field:e,direction:t,multiField:n});if(r.isCancelled===!0)return;if(typeof e!="undefined"){var i=this.sortData.length;for(var s in this.sortData)if(this.sortData[s].field==e){i=s;break}if(typeof t=="undefined"||t==null)if(typeof this.sortData[i]=="undefined")t="asc";else switch(String(this.sortData[i].direction)){case"asc":t="desc";break;case"desc":t="asc";break;default:t="asc"}this.multiSort===!1&&(this.sortData=[],i=0),n!=1&&(this.sortData=[],i=0),typeof this.sortData[i]=="undefined"&&(this.sortData[i]={}),this.sortData[i].field=e,this.sortData[i].direction=t}else this.sortData=[];this.selectNone();var o=typeof this.url!="object"?this.url:this.url.get;o?(this.trigger($.extend(r,{phase:"after"})),this.last.xhr_offset=0,this.reload()):(this.localSort(),this.searchData.length>0&&this.localSearch(!0),this.trigger($.extend(r,{phase:"after"})),this.refresh())},copy:function(){var e=this.getSelection();if(e.length==0)return"";var t="";if(typeof e[0]=="object"){var n=e[0].column,r=e[0].column,i=[];for(var s in e)e[s].column<n&&(n=e[s].column),e[s].column>r&&(r=e[s].column),i.indexOf(e[s].index)==-1&&i.push(e[s].index);i.sort();for(var o in i){var u=i[o];for(var a=n;a<=r;a++){var f=this.columns[a];if(f.hidden===!0)continue;t+=w2utils.stripTags(this.getCellHTML(u,a))+"	"}t=t.substr(0,t.length-1),t+="\n"}}else{for(var a in this.columns){var f=this.columns[a];if(f.hidden===!0)continue;t+='"'+w2utils.stripTags(f.caption?f.caption:f.field)+'"	'}t=t.substr(0,t.length-1),t+="\n";for(var s in e){var u=this.get(e[s],!0);for(var a in this.columns){var f=this.columns[a];if(f.hidden===!0)continue;t+='"'+w2utils.stripTags(this.getCellHTML(u,a))+'"	'}t=t.substr(0,t.length-1),t+="\n"}}t=t.substr(0,t.length-1);var l=this.trigger({phase:"before",type:"copy",target:this.name,text:t});return l.isCancelled===!0?"":(t=l.text,this.trigger($.extend(l,{phase:"after"})),t)},paste:function(e){var t=this.getSelection(),n=this.get(t[0].recid,!0),r=t[0].column,i=this.trigger({phase:"before",type:"paste",target:this.name,text:e,index:n,column:r});if(i.isCancelled===!0)return;e=i.text;if(this.selectType=="row"||t.length==0){console.log("ERROR: You can paste only if grid.selectType = 'cell' and when at least one cell selected."),this.trigger($.extend(i,{phase:"after"}));return}var s=[],e=e.split("\n");for(var o in e){var u=e[o].split("	"),a=0,f=this.records[n],l=[];for(var c in u){if(!this.columns[r+a])continue;var h=this.columns[r+a].field;f.changes=f.changes||{},f.changes[h]=u[c],l.push(r+a),a++}for(var p in l)s.push({recid:f.recid,column:l[p]});n++}this.selectNone(),this.select.apply(this,s),this.refresh(),this.trigger($.extend(i,{phase:"after"}))},resize:function(){var e=this,t=(new Date).getTime();if(!this.box||$(this.box).attr("name")!=this.name)return;$(this.box).find("> div").css("width",$(this.box).width()).css("height",$(this.box).height());var n=this.trigger({phase:"before",type:"resize",target:this.name});if(n.isCancelled===!0)return;return e.resizeBoxes(),e.resizeRecords(),this.trigger($.extend(n,{phase:"after"})),(new Date).getTime()-t},refreshCell:function(e,t){var n=this.get(e,!0),r=this.records[n]&&this.records[n].recid==e?!1:!0,i=this.getColumn(t,!0),s=r?this.summary[n]:this.records[n],o=this.columns[i],u=$("#grid_"+this.name+"_rec_"+e+" [col="+i+"]");u.html(this.getCellHTML(n,i,r)),s.changes&&typeof s.changes[o.field]!="undefined"?u.addClass("w2ui-changed"):u.removeClass("w2ui-changed")},refreshRow:function(e){var t=$("#grid_"+this.name+"_rec_"+w2utils.escapeId(e));if(t.length!=0){var n=this.get(e,!0),r=t.attr("line"),i=this.records[n]&&this.records[n].recid==e?!1:!0,s=typeof this.url!="object"?this.url:this.url.get;if(this.searchData.length>0&&!s)for(var o in this.last.searchIds)this.last.searchIds[o]==n&&(n=o);$(t).replaceWith(this.getRecordHTML(n,r,i)),i&&this.resize()}},refresh:function(){var e=this,t=(new Date).getTime(),n=typeof this.url!="object"?this.url:this.url.get;this.total<=0&&!n&&this.searchData.length==0&&(this.total=this.records.length),this.toolbar.disable("w2ui-edit","w2ui-delete");if(!this.box)return;var r=this.trigger({phase:"before",target:this.name,type:"refresh"});if(r.isCancelled===!0)return;this.show.header?$("#grid_"+this.name+"_header").html(this.header+"&nbsp;").show():$("#grid_"+this.name+"_header").hide();if(this.show.toolbar){if(!(this.toolbar&&this.toolbar.get("w2ui-column-on-off")&&this.toolbar.get("w2ui-column-on-off").checked)){$("#grid_"+this.name+"_toolbar").show();if(typeof this.toolbar=="object"){var i=this.toolbar.items;for(var s in i){if(i[s].id=="w2ui-search"||i[s].type=="break")continue;this.toolbar.refresh(i[s].id)}}}}else $("#grid_"+this.name+"_toolbar").hide();this.searchClose();var o=$("#grid_"+e.name+"_search_all");!this.multiSearch&&this.last.field=="all"&&this.searches.length>0&&(this.last.field=this.searches[0].field,this.last.caption=this.searches[0].caption);for(var u in this.searches)this.searches[u].field==this.last.field&&(this.last.caption=this.searches[u].caption);this.last.multi?o.attr("placeholder","["+w2utils.lang("Multiple Fields")+"]"):o.attr("placeholder",this.last.caption);if(o.val()!=this.last.search){var a=this.last.search,i=o.data("w2field");i&&(a=i.format(a)),o.val(a)}var i=this.find({summary:!0},!0);if(i.length>0){for(var s in i)this.summary.push(this.records[i[s]]);for(var s=i.length-1;s>=0;s--)this.records.splice(i[s],1);this.total=this.total-i.length}var f=e.find({expanded:!0},!0);for(var l in f)e.records[f[l]].expanded=!1;var c="";c+='<div id="grid_'+this.name+'_records" class="w2ui-grid-records"'+"    onscroll=\"var obj = w2ui['"+this.name+"']; "+"        obj.last.scrollTop = this.scrollTop; "+"        obj.last.scrollLeft = this.scrollLeft; "+"        $('#grid_"+this.name+"_columns')[0].scrollLeft = this.scrollLeft;"+"        $('#grid_"+this.name+"_summary')[0].scrollLeft = this.scrollLeft;"+'        obj.scroll(event);">'+this.getRecordsHTML()+"</div>"+'<div id="grid_'+this.name+'_columns" class="w2ui-grid-columns">'+"    <table>"+this.getColumnsHTML()+"</table>"+"</div>",$("#grid_"+this.name+"_body").html(c),this.summary.length>0?$("#grid_"+this.name+"_summary").html(this.getSummaryHTML()).show():$("#grid_"+this.name+"_summary").hide(),this.show.footer?$("#grid_"+this.name+"_footer").html(this.getFooterHTML()).show():$("#grid_"+this.name+"_footer").hide(),this.searchData.length>0?$("#grid_"+this.name+"_searchClear").show():$("#grid_"+this.name+"_searchClear").hide();var h=this.last.selection;return h.indexes.length==this.records.length||this.searchData.length!==0&&h.indexes.length==this.last.searchIds.length?$("#grid_"+this.name+"_check_all").prop("checked",!0):$("#grid_"+this.name+"_check_all").prop("checked",!1),this.status(),setTimeout(function(){var t=$.trim($("#grid_"+e.name+"_search_all").val());t!=""&&$(e.box).find(".w2ui-grid-data > div").w2marker(t)},50),this.trigger($.extend(r,{phase:"after"})),e.resize(),e.addRange("selection"),setTimeout(function(){e.resize(),e.scroll()},1),e.reorderColumns&&!e.last.columnDrag?e.last.columnDrag=e.initColumnDrag():!e.reorderColumns&&e.last.columnDrag&&e.last.columnDrag.remove(),(new Date).getTime()-t},render:function(e){function s(e){if(e.which!=1)return;t.last.userSelect=="text"&&(delete t.last.userSelect,$(t.box).find(".w2ui-grid-body").css("user-select","none").css("-webkit-user-select","none").css("-moz-user-select","none").css("-ms-user-select","none"),$(this.box).on("selectstart",function(){return!1}));if($(e.target).parents().hasClass("w2ui-head")||$(e.target).hasClass("w2ui-head"))return;if(t.last.move&&t.last.move.type=="expand")return;$(t.box).off("selectstart"),$(t.box).find(".w2ui-grid-body").css("user-select","text").css("-webkit-user-select","text").css("-moz-user-select","text").css("-ms-user-select","text"),t.last.move={type:"text-select"},t.last.userSelect="text",$(document).on("mousemove",o),$(document).on("mouseup",u)}function o(e){var n=t.last.move;if(!n||n.type!="select")return;n.divX=e.screenX-n.x,n.divY=e.screenY-n.y;if(Math.abs(n.divX)<=1&&Math.abs(n.divY)<=1)return;t.last.cancelClick=!0;if(t.reorderRows==1){if(!n.ghost){var r=$("#grid_"+t.name+"_rec_"+n.recid),i=r.parents("table").find("tr:first-child").clone();n.offsetY=e.offsetY,n.from=n.recid,n.pos=r.position(),n.ghost=$(r).clone(!0),n.ghost.removeAttr("id"),r.find("td:first-child").replaceWith('<td colspan="1000" style="height: '+t.recordHeight+'px; background-color: #ddd"></td>');var s=$(t.box).find(".w2ui-grid-records");s.append('<table id="grid_'+t.name+'_ghost" style="position: absolute; z-index: 999999; opacity: 0.8; border-bottom: 2px dashed #aaa; border-top: 2px dashed #aaa; pointer-events: none;"></table>'),$("#grid_"+t.name+"_ghost").append(i).append(n.ghost)}var o=$(e.target).parents("tr").attr("recid");if(o!=n.from){var u=$("#grid_"+t.name+"_rec_"+n.recid),a=$("#grid_"+t.name+"_rec_"+o);e.screenY-n.lastY<0?u.after(a):a.after(u),n.lastY=e.screenY,n.to=o}var f=$("#grid_"+t.name+"_ghost"),s=$(t.box).find(".w2ui-grid-records");f.css({top:n.pos.top+n.divY+s.scrollTop(),left:n.pos.left});return}n.start&&n.recid&&(t.selectNone(),n.start=!1);var l=[],o=e.target.tagName=="TR"?$(e.target).attr("recid"):$(e.target).parents("tr").attr("recid");if(typeof o=="undefined")return;var c=t.get(n.recid,!0);if(c===null)return;var h=t.get(o,!0);if(h===null)return;var p=parseInt(n.column),d=parseInt(e.target.tagName=="TD"?$(e.target).attr("col"):$(e.target).parents("td").attr("col"));if(c>h){var i=c;c=h,h=i}var i="ind1:"+c+",ind2;"+h+",col1:"+p+",col2:"+d;if(n.range==i)return;n.range=i;for(var v=c;v<=h;v++){if(t.last.searchIds.length>0&&t.last.searchIds.indexOf(v)==-1)continue;if(t.selectType!="row"){if(p>d){var i=p;p=d,d=i}var i=[];for(var m=p;m<=d;m++){if(t.columns[m].hidden)continue;l.push({recid:t.records[v].recid,column:parseInt(m)})}}else l.push(t.records[v].recid)}if(t.selectType!="row"){var g=t.getSelection(),i=[];for(var y in l){var b=!1;for(var w in g)l[y].recid==g[w].recid&&l[y].column==g[w].column&&(b=!0);b||i.push({recid:l[y].recid,column:l[y].column})}t.select.apply(t,i);var i=[];for(var w in g){var b=!1;for(var y in l)l[y].recid==g[w].recid&&l[y].column==g[w].column&&(b=!0);b||i.push({recid:g[w].recid,column:g[w].column})}t.unselect.apply(t,i)}else if(t.multiSelect){var g=t.getSelection();for(var y in l)g.indexOf(l[y])==-1&&t.select(l[y]);for(var w in g)l.indexOf(g[w])==-1&&t.unselect(g[w])}}function u(e){var n=t.last.move;setTimeout(function(){delete t.last.cancelClick},1);if($(e.target).parents().hasClass(".w2ui-head")||$(e.target).hasClass(".w2ui-head"))return;if(n&&n.type=="select"&&t.reorderRows==1){var r=t.get(n.from,!0),i=t.records[r];t.records.splice(r,1);var s=t.get(n.to,!0);r>s?t.records.splice(s,0,i):t.records.splice(s+1,0,i),$("#grid_"+t.name+"_ghost").remove(),t.refresh()}delete t.last.move,$(document).off("mousemove",o),$(document).off("mouseup",u)}var t=this,n=(new Date).getTime();typeof e!="undefined"&&e!=null&&($(this.box).find("#grid_"+this.name+"_body").length>0&&$(this.box).removeAttr("name").removeClass("w2ui-reset w2ui-grid").html(""),this.box=e);if(!this.box)return;this.last.sortData==null&&(this.last.sortData=this.sortData);var r=this.trigger({phase:"before",target:this.name,type:"render",box:e});if(r.isCancelled===!0)return;$(this.box).attr("name",this.name).addClass("w2ui-reset w2ui-grid").html('<div>    <div id="grid_'+this.name+'_header" class="w2ui-grid-header"></div>'+'    <div id="grid_'+this.name+'_toolbar" class="w2ui-grid-toolbar"></div>'+'    <div id="grid_'+this.name+'_body" class="w2ui-grid-body"></div>'+'    <div id="grid_'+this.name+'_summary" class="w2ui-grid-body w2ui-grid-summary"></div>'+'    <div id="grid_'+this.name+'_footer" class="w2ui-grid-footer"></div>'+"</div>"),this.selectType!="row"&&$(this.box).addClass("w2ui-ss"),$(this.box).length>0&&($(this.box)[0].style.cssText+=this.style),this.initToolbar(),this.toolbar!=null&&this.toolbar.render($("#grid_"+this.name+"_toolbar")[0]);if(this.last.field&&this.last.field!="all"){var i=this.searchData;this.initAllField(this.last.field,i.length==1?i[0].value:null)}return $("#grid_"+this.name+"_footer").html(this.getFooterHTML()),this.last.state||(this.last.state=this.stateSave(!0)),this.stateRestore(),this.url&&this.refresh(),this.reload(),$(this.box).on("mousedown",s),$(this.box).on("selectstart",function(){return!1}),this.trigger($.extend(r,{phase:"after"})),$(".w2ui-layout").length==0&&(this.tmp_resize=function(e){w2ui[t.name].resize()},$(window).off("resize",this.tmp_resize).on("resize",this.tmp_resize)),(new Date).getTime()-n},destroy:function(){var e=this.trigger({phase:"before",target:this.name,type:"destroy"});if(e.isCancelled===!0)return;$(window).off("resize",this.tmp_resize),typeof this.toolbar=="object"&&this.toolbar.destroy&&this.toolbar.destroy(),$(this.box).find("#grid_"+this.name+"_body").length>0&&$(this.box).removeAttr("name").off("selectstart").removeClass("w2ui-reset w2ui-grid").html(""),delete w2ui[this.name],this.trigger($.extend(e,{phase:"after"}))},initColumnOnOff:function(){if(!this.show.toolbarColumns)return;var e=this,t='<div class="w2ui-col-on-off"><table><tr><td style="width: 30px">    <input id="grid_'+this.name+'_column_ln_check" type="checkbox" tabIndex="-1" '+
(e.show.lineNumbers?"checked":"")+"        onclick=\"w2ui['"+e.name+"'].columnOnOff(this, event, 'line-numbers');\">"+"</td>"+"<td onclick=\"w2ui['"+e.name+"'].columnOnOff(this, event, 'line-numbers'); $('#w2ui-overlay')[0].hide();\">"+'    <label for="grid_'+this.name+'_column_ln_check">'+w2utils.lang("Line #")+"</label>"+"</td></tr>";for(var n in this.columns){var r=this.columns[n],i=this.columns[n].caption;if(r.hideable===!1)continue;!i&&this.columns[n].hint&&(i=this.columns[n].hint),i||(i="- column "+(parseInt(n)+1)+" -"),t+='<tr><td style="width: 30px">    <input id="grid_'+this.name+"_column_"+n+'_check" type="checkbox" tabIndex="-1" '+(r.hidden?"":"checked")+"        onclick=\"w2ui['"+e.name+"'].columnOnOff(this, event, '"+r.field+"');\">"+"</td>"+"<td>"+'    <label for="grid_'+this.name+"_column_"+n+'_check">'+i+"</label>"+"</td>"+"</tr>"}t+='<tr><td colspan="2"><div style="border-top: 1px solid #ddd;"></div></td></tr>';var s=typeof this.url!="object"?this.url:this.url.get;s&&e.show.skipRecords&&(t+='<tr><td colspan="2" style="padding: 0px">    <div style="cursor: pointer; padding: 2px 8px; cursor: default">'+w2utils.lang("Skip")+'        <input type="text" style="width: 45px" value="'+this.offset+'" '+'            onkeypress="if (event.keyCode == 13) { '+"               w2ui['"+e.name+"'].skip(this.value); "+"               $('#w2ui-overlay')[0].hide(); "+'            }"> '+w2utils.lang("Records")+"    </div>"+"</td></tr>"),t+='<tr><td colspan="2" onclick="w2ui[\''+e.name+"'].stateSave(); $('#w2ui-overlay')[0].hide();\">"+'    <div style="cursor: pointer; padding: 4px 8px; cursor: default">'+w2utils.lang("Save Grid State")+"</div>"+"</td></tr>"+'<tr><td colspan="2" onclick="w2ui[\''+e.name+"'].stateReset(); $('#w2ui-overlay')[0].hide();\">"+'    <div style="cursor: pointer; padding: 4px 8px; cursor: default">'+w2utils.lang("Restore Default State")+"</div>"+"</td></tr>",t+="</table></div>",this.toolbar.get("w2ui-column-on-off").html=t},initColumnDrag:function(e){function r(){n.pressed=!1,clearTimeout(n.timeout)}function i(e){n.timeout&&clearTimeout(n.timeout);var r=this;n.pressed=!0,n.timeout=setTimeout(function(){if(!n.pressed)return;var i,u,a,f,l,c=["w2ui-col-number","w2ui-col-expand","w2ui-col-select"],h=["w2ui-head-last"],p=c.concat(h),d=".w2ui-col-number, .w2ui-col-expand, .w2ui-col-select",v=".w2ui-head.w2ui-col-number, .w2ui-head.w2ui-col-expand, .w2ui-head.w2ui-col-select";if(!$(e.originalEvent.target).parents().hasClass("w2ui-head"))return;for(var m=0,g=p.length;m<g;m++)if($(e.originalEvent.target).parents().hasClass(p[m]))return;n.numberPreColumnsPresent=$(t.box).find(v).length,n.columnHead=f=$(e.originalEvent.target).parents(".w2ui-head"),l=parseInt(f.attr("col"),10),i=t.trigger({type:"columnDragStart",phase:"before",originalEvent:e,origColumnNumber:l,target:f[0]});if(i.isCancelled===!0)return!1;u=n.columns=$(t.box).find(".w2ui-head:not(.w2ui-head-last)"),$(document).on("mouseup",o),$(document).on("mousemove",s),n.originalPos=parseInt($(e.originalEvent.target).parent(".w2ui-head").attr("col"),10),n.ghost=$(r).clone(!0),$(n.ghost).find('[col]:not([col="'+n.originalPos+'"]), .w2ui-toolbar, .w2ui-grid-header').remove(),$(n.ghost).find(d).remove(),$(n.ghost).find(".w2ui-grid-body").css({top:0}),a=$(n.ghost).find('[col="'+n.originalPos+'"]'),$(document.body).append(n.ghost),$(n.ghost).css({width:0,height:0,margin:0,position:"fixed",zIndex:999999,opacity:0}).addClass(".w2ui-grid-ghost").animate({width:a.width(),height:$(t.box).find(".w2ui-grid-body:first").height(),left:e.pageX,top:e.pageY,opacity:.8},0),n.offsets=[];for(var m=0,g=u.length;m<g;m++)n.offsets.push($(u[m]).offset().left);t.trigger($.extend(i,{phase:"after"}))},150)}function s(e){if(!n.pressed)return;var t=e.originalEvent.pageX,r=e.originalEvent.pageY,i=n.offsets,s=$(".w2ui-head:not(.w2ui-head-last)").width();n.targetInt=Math.max(n.numberPreColumnsPresent,a(t,i,s)),u(n.targetInt),f(t,r)}function o(e){n.pressed=!1;var r,i,u,a,f,l=$(".w2ui-grid-ghost");r=t.trigger({type:"columnDragEnd",phase:"before",originalEvent:e,target:n.columnHead[0]});if(r.isCancelled===!0)return!1;u=t.columns[n.originalPos],a=t.columns,f=$(n.columns[Math.min(n.lastInt,n.columns.length-1)]),i=n.lastInt<n.columns.length?parseInt(f.attr("col")):a.length,i!==n.originalPos+1&&i!==n.originalPos&&f&&f.length?($(n.ghost).animate({top:$(t.box).offset().top,left:f.offset().left,width:0,height:0,opacity:.2},300,function(){$(this).remove(),l.remove()}),a.splice(i,0,$.extend({},u)),a.splice(a.indexOf(u),1)):($(n.ghost).remove(),l.remove()),$(document).off("mouseup",o),$(document).off("mousemove",s),n.marker&&n.marker.remove(),n={},t.refresh(),t.trigger($.extend(r,{phase:"after",targetColumnNumber:i-1}))}function u(e){!n.marker&&!n.markerLeft&&(n.marker=$('<div class="col-intersection-marker"><div class="top-marker"></div><div class="bottom-marker"></div></div>'),n.markerLeft=$('<div class="col-intersection-marker"><div class="top-marker"></div><div class="bottom-marker"></div></div>'));if(!n.lastInt||n.lastInt!==e)n.lastInt=e,n.marker.remove(),n.markerLeft.remove(),$(".w2ui-head").removeClass("w2ui-col-intersection"),e>=n.columns.length?($(n.columns[n.columns.length-1]).children("div:last").append(n.marker.addClass("right").removeClass("left")),$(n.columns[n.columns.length-1]).addClass("w2ui-col-intersection")):e<=n.numberPreColumnsPresent?($(n.columns[n.numberPreColumnsPresent]).prepend(n.marker.addClass("left").removeClass("right")).css({position:"relative"}),$(n.columns[n.numberPreColumnsPresent]).prev().addClass("w2ui-col-intersection")):($(n.columns[e]).children("div:last").prepend(n.marker.addClass("left").removeClass("right")),$(n.columns[e]).prev().children("div:last").append(n.markerLeft.addClass("right").removeClass("left")).css({position:"relative"}),$(n.columns[e-1]).addClass("w2ui-col-intersection"))}function a(e,t,n){if(e<=t[0])return 0;if(e>=t[t.length-1]+n)return t.length;for(var r=0,i=t.length;r<i;r++){var s=t[r],o=t[r+1]||t[r]+n,u=(o-t[r])/2+t[r];if(e>s&&e<=u)return r;if(e>u&&e<=o)return r+1}return intersection}function f(e,t){$(n.ghost).css({left:e-10,top:t-10})}if(this.columnGroups&&this.columnGroups.length)throw"Draggable columns are not currently supported with column groups.";var t=this,n={};return n.lastInt=null,n.pressed=!1,n.timeout=null,n.columnHead=null,$(t.box).on("mousedown",i),$(t.box).on("mouseup",r),{remove:function(){$(t.box).off("mousedown",i),$(t.box).off("mouseup",r),$(t.box).find(".w2ui-head").removeAttr("draggable"),t.last.columnDrag=!1}}},columnOnOff:function(e,t,n){var r=this.trigger({phase:"before",target:this.name,type:"columnOnOff",checkbox:e,field:n,originalEvent:t});if(r.isCancelled===!0)return;var i=this;for(var s in this.records)this.records[s].expanded===!0&&(this.records[s].expanded=!1);var o=!0;if(n=="line-numbers")this.show.lineNumbers=!this.show.lineNumbers,this.refresh();else{var u=this.getColumn(n);u.hidden?($(e).prop("checked",!0),this.showColumn(u.field)):($(e).prop("checked",!1),this.hideColumn(u.field)),o=!1}o&&setTimeout(function(){$().w2overlay("",{name:"searches-"+this.name}),i.toolbar.uncheck("column-on-off")},100),this.trigger($.extend(r,{phase:"after"}))},initToolbar:function(){if(typeof this.toolbar["render"]=="undefined"){var e=this.toolbar.items;this.toolbar.items=[],this.toolbar=$().w2toolbar($.extend(!0,{},this.toolbar,{name:this.name+"_toolbar",owner:this})),this.show.toolbarReload&&this.toolbar.items.push($.extend(!0,{},this.buttons.reload)),this.show.toolbarColumns&&this.toolbar.items.push($.extend(!0,{},this.buttons.columns)),(this.show.toolbarReload||this.show.toolbarColumn)&&this.toolbar.items.push({type:"break",id:"w2ui-break0"});if(this.show.toolbarSearch){var t='<div class="w2ui-toolbar-search"><table cellpadding="0" cellspacing="0"><tr>    <td>'+this.buttons.search.html+"</td>"+"    <td>"+'        <input id="grid_'+this.name+'_search_all" class="w2ui-search-all" '+'            placeholder="'+this.last.caption+'" value="'+this.last.search+'"'+'            onkeydown="if (event.keyCode == 13 && w2utils.isIE) this.onchange();"'+'            onchange="'+"                var val = this.value; "+"                var fld = $(this).data('w2field'); "+"                var dat = $(this).data('selected'); "+"                if (fld) val = fld.clean(val);"+"                if (dat != null && $.isPlainObject(dat)) val = dat.id;"+"                w2ui['"+this.name+"'].search(w2ui['"+this.name+"'].last.field, val); "+'            ">'+"    </td>"+"    <td>"+'        <div title="'+w2utils.lang("Clear Search")+'" class="w2ui-search-clear" id="grid_'+this.name+'_searchClear"  '+"             onclick=\"var obj = w2ui['"+this.name+"']; obj.searchReset();\" "+"        >&nbsp;&nbsp;</div>"+"    </td>"+"</tr></table>"+"</div>";this.toolbar.items.push({type:"html",id:"w2ui-search",html:t}),this.multiSearch&&this.searches.length>0&&this.toolbar.items.push($.extend(!0,{},this.buttons["search-go"]))}this.show.toolbarSearch&&(this.show.toolbarAdd||this.show.toolbarEdit||this.show.toolbarDelete||this.show.toolbarSave)&&this.toolbar.items.push({type:"break",id:"w2ui-break1"}),this.show.toolbarAdd&&this.toolbar.items.push($.extend(!0,{},this.buttons.add)),this.show.toolbarEdit&&this.toolbar.items.push($.extend(!0,{},this.buttons.edit)),this.show.toolbarDelete&&this.toolbar.items.push($.extend(!0,{},this.buttons["delete"])),this.show.toolbarSave&&((this.show.toolbarAdd||this.show.toolbarDelete||this.show.toolbarEdit)&&this.toolbar.items.push({type:"break",id:"w2ui-break2"}),this.toolbar.items.push($.extend(!0,{},this.buttons.save)));for(var n in e)this.toolbar.items.push(e[n]);var r=this;this.toolbar.on("click",function(e){var t=r.trigger({phase:"before",type:"toolbar",target:e.target,originalEvent:e});if(t.isCancelled===!0)return;var n=e.target;switch(n){case"w2ui-reload":var i=r.trigger({phase:"before",type:"reload",target:r.name});if(i.isCancelled===!0)return!1;r.reload(),r.trigger($.extend(i,{phase:"after"}));break;case"w2ui-column-on-off":r.initColumnOnOff(),r.initResize(),r.resize();break;case"w2ui-search-advanced":var s=this,o=this.get(n);if(o.checked)r.searchClose(),setTimeout(function(){s.uncheck(n)},1);else{r.searchOpen(),e.originalEvent.stopPropagation();function u(){if($("#w2ui-overlay-searches-"+r.name).data("keepOpen")===!0)return;s.uncheck(n),$(document).off("click","body",u)}$(document).on("click","body",u)}break;case"w2ui-add":var t=r.trigger({phase:"before",target:r.name,type:"add",recid:null});r.trigger($.extend(t,{phase:"after"}));break;case"w2ui-edit":var a=r.getSelection(),f=null;a.length==1&&(f=a[0]);var t=r.trigger({phase:"before",target:r.name,type:"edit",recid:f});r.trigger($.extend(t,{phase:"after"}));break;case"w2ui-delete":r["delete"]();break;case"w2ui-save":r.save()}r.trigger($.extend(t,{phase:"after"}))})}return},initResize:function(){var e=this;$(this.box).find(".w2ui-resizer").off("click").on("click",function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,e.preventDefault&&e.preventDefault()}).off("mousedown").on("mousedown",function(t){t||(t=window.event),window.addEventListener||window.document.attachEvent("onselectstart",function(){return!1}),e.resizing=!0,e.last.tmp={x:t.screenX,y:t.screenY,gx:t.screenX,gy:t.screenY,col:parseInt($(this).attr("name"))},t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,t.preventDefault&&t.preventDefault();for(var n in e.columns){if(e.columns[n].hidden)continue;typeof e.columns[n].sizeOriginal=="undefined"&&(e.columns[n].sizeOriginal=e.columns[n].size),e.columns[n].size=e.columns[n].sizeCalculated}var r={phase:"before",type:"columnResize",target:e.name,column:e.last.tmp.col,field:e.columns[e.last.tmp.col].field};r=e.trigger($.extend(r,{resizeBy:0,originalEvent:t}));var i=function(t){if(e.resizing!=1)return;t||(t=window.event),r=e.trigger($.extend(r,{resizeBy:t.screenX-e.last.tmp.gx,originalEvent:t}));if(r.isCancelled===!0){r.isCancelled=!1;return}e.last.tmp.x=t.screenX-e.last.tmp.x,e.last.tmp.y=t.screenY-e.last.tmp.y,e.columns[e.last.tmp.col].size=parseInt(e.columns[e.last.tmp.col].size)+e.last.tmp.x+"px",e.resizeRecords(),e.last.tmp.x=t.screenX,e.last.tmp.y=t.screenY},s=function(t){delete e.resizing,$(document).off("mousemove","body"),$(document).off("mouseup","body"),e.resizeRecords(),e.trigger($.extend(r,{phase:"after",originalEvent:t}))};$(document).on("mousemove","body",i),$(document).on("mouseup","body",s)}).each(function(e,t){var n=$(t).parent();$(t).css({height:"25px","margin-left":n.width()-3+"px"})})},resizeBoxes:function(){var e=$(this.box).find("> div"),t=$("#grid_"+this.name+"_header"),n=$("#grid_"+this.name+"_toolbar"),r=$("#grid_"+this.name+"_summary"),i=$("#grid_"+this.name+"_footer"),s=$("#grid_"+this.name+"_body"),o=$("#grid_"+this.name+"_columns"),u=$("#grid_"+this.name+"_records");this.show.header&&t.css({top:"0px",left:"0px",right:"0px"}),this.show.toolbar&&n.css({top:0+(this.show.header?w2utils.getSize(t,"height"):0)+"px",left:"0px",right:"0px"}),this.show.footer&&i.css({bottom:"0px",left:"0px",right:"0px"}),this.summary.length>0&&r.css({bottom:0+(this.show.footer?w2utils.getSize(i,"height"):0)+"px",left:"0px",right:"0px"}),s.css({top:0+(this.show.header?w2utils.getSize(t,"height"):0)+(this.show.toolbar?w2utils.getSize(n,"height"):0)+"px",bottom:0+(this.show.footer?w2utils.getSize(i,"height"):0)+(this.summary.length>0?w2utils.getSize(r,"height"):0)+"px",left:"0px",right:"0px"})},resizeRecords:function(){var e=this;$(this.box).find(".w2ui-empty-record").remove();var t=$(this.box),n=$(this.box).find("> div"),r=$("#grid_"+this.name+"_header"),i=$("#grid_"+this.name+"_toolbar"),s=$("#grid_"+this.name+"_summary"),o=$("#grid_"+this.name+"_footer"),u=$("#grid_"+this.name+"_body"),a=$("#grid_"+this.name+"_columns"),f=$("#grid_"+this.name+"_records");if(!this.fixedBody){var l=w2utils.getSize(a,"height")+w2utils.getSize($("#grid_"+e.name+"_records table"),"height");e.height=l+w2utils.getSize(n,"+height")+(e.show.header?w2utils.getSize(r,"height"):0)+(e.show.toolbar?w2utils.getSize(i,"height"):0)+(s.css("display")!="none"?w2utils.getSize(s,"height"):0)+(e.show.footer?w2utils.getSize(o,"height"):0),n.css("height",e.height),u.css("height",l),t.css("height",w2utils.getSize(n,"height")+w2utils.getSize(t,"+height"))}else{var l=n.height()-(this.show.header?w2utils.getSize(r,"height"):0)-(this.show.toolbar?w2utils.getSize(i,"height"):0)-(s.css("display")!="none"?w2utils.getSize(s,"height"):0)-(this.show.footer?w2utils.getSize(o,"height"):0);u.css("height",l)}var c=this.records.length;this.searchData.length!=0&&!this.url&&(c=this.last.searchIds.length);var h=!1,p=!1;u.width()<$(f).find(">table").width()&&(h=!0),u.height()-a.height()<$(f).find(">table").height()+(h?w2utils.scrollBarSize():0)&&(p=!0),this.fixedBody||(p=!1),h||p?(a.find("> table > tbody > tr:nth-child(1) td.w2ui-head-last").css("width",w2utils.scrollBarSize()).show(),f.css({top:(this.columnGroups.length>0&&this.show.columns?1:0)+w2utils.getSize(a,"height")+"px","-webkit-overflow-scrolling":"touch","overflow-x":h?"auto":"hidden","overflow-y":p?"auto":"hidden"})):(a.find("> table > tbody > tr:nth-child(1) td.w2ui-head-last").hide(),f.css({top:(this.columnGroups.length>0&&this.show.columns?1:0)+w2utils.getSize(a,"height")+"px",overflow:"hidden"}),f.length>0&&(this.last.scrollTop=0,this.last.scrollLeft=0));if(this.show.emptyRecords&&!p){var d=Math.floor(f.height()/this.recordHeight)+1;if(this.fixedBody)for(var v=c;v<=d;v++){var m="";m+='<tr class="'+(v%2?"w2ui-even":"w2ui-odd")+' w2ui-empty-record" style="height: '+this.recordHeight+'px">',this.show.lineNumbers&&(m+='<td class="w2ui-col-number"></td>'),this.show.selectColumn&&(m+='<td class="w2ui-grid-data w2ui-col-select"></td>'),this.show.expandColumn&&(m+='<td class="w2ui-grid-data w2ui-col-expand"></td>');var g=0;while(this.columns.length>0){var y=this.columns[g];if(y.hidden){g++;if(typeof this.columns[g]=="undefined")break;continue}m+='<td class="w2ui-grid-data" '+(typeof y.attr!="undefined"?y.attr:"")+' col="'+g+'"></td>',g++;if(typeof this.columns[g]=="undefined")break}m+='<td class="w2ui-grid-data-last"></td>',m+="</tr>",$("#grid_"+this.name+"_records > table").append(m)}}if(u.length>0){var b=parseInt(u.width())-(p?w2utils.scrollBarSize():0)-(this.show.lineNumbers?34:0)-(this.show.selectColumn?26:0)-(this.show.expandColumn?26:0),w=b,E=0,S=!1;for(var x=0;x<this.columns.length;x++){var y=this.columns[x];y.gridMinWidth>0&&(y.gridMinWidth>w&&y.hidden!==!0&&(y.hidden=!0,S=!0),y.gridMinWidth<w&&y.hidden===!0&&(y.hidden=!1,S=!0))}if(S===!0){this.refresh();return}for(var x=0;x<this.columns.length;x++){var y=this.columns[x];if(y.hidden)continue;String(y.size).substr(String(y.size).length-2).toLowerCase()=="px"?(b-=parseFloat(y.size),this.columns[x].sizeCalculated=y.size,this.columns[x].sizeType="px"):(E+=parseFloat(y.size),this.columns[x].sizeType="%",delete y.sizeCorrected)}if(E!=100&&E>0)for(var x=0;x<this.columns.length;x++){var y=this.columns[x];if(y.hidden)continue;y.sizeType=="%"&&(y.sizeCorrected=Math.round(parseFloat(y.size)*100*100/E)/100+"%")}for(var x=0;x<this.columns.length;x++){var y=this.columns[x];if(y.hidden)continue;y.sizeType=="%"&&(typeof this.columns[x].sizeCorrected!="undefined"?this.columns[x].sizeCalculated=Math.floor(b*parseFloat(y.sizeCorrected)/100)-1+"px":this.columns[x].sizeCalculated=Math.floor(b*parseFloat(y.size)/100)-1+"px")}}var T=0;for(var x=0;x<this.columns.length;x++){var y=this.columns[x];if(y.hidden)continue;typeof y.min=="undefined"&&(y.min=20),parseInt(y.sizeCalculated)<parseInt(y.min)&&(y.sizeCalculated=y.min+"px"),parseInt(y.sizeCalculated)>parseInt(y.max)&&(y.sizeCalculated=y.max+"px"),T+=parseInt(y.sizeCalculated)}var N=parseInt(w)-parseInt(T);if(N>0&&E>0){var x=0;for(;;){var y=this.columns[x];if(typeof y=="undefined"){x=0;continue}if(y.hidden||y.sizeType=="px"){x++;continue}y.sizeCalculated=parseInt(y.sizeCalculated)+1+"px",N--;if(N==0)break;x++}}else N>0&&a.find("> table > tbody > tr:nth-child(1) td.w2ui-head-last").css("width",w2utils.scrollBarSize()).show();a.find("> table > tbody > tr:nth-child(1) td").each(function(t,n){var r=$(n).attr("col");typeof r!="undefined"&&e.columns[r]&&$(n).css("width",e.columns[r].sizeCalculated),$(n).hasClass("w2ui-head-last")&&$(n).css("width",w2utils.scrollBarSize()+(N>0&&E==0?N:0)+"px")}),a.find("> table > tbody > tr").length==3&&a.find("> table > tbody > tr:nth-child(1) td").html("").css({height:"0px",border:"0px",padding:"0px",margin:"0px"}),f.find("> table > tbody > tr:nth-child(1) td").each(function(t,n){var r=$(n).attr("col");typeof r!="undefined"&&e.columns[r]&&$(n).css("width",e.columns[r].sizeCalculated),$(n).hasClass("w2ui-grid-data-last")&&$(n).css("width",(N>0&&E==0?N:0)+"px")}),s.find("> table > tbody > tr:nth-child(1) td").each(function(t,n){var r=$(n).attr("col");typeof r!="undefined"&&e.columns[r]&&$(n).css("width",e.columns[r].sizeCalculated),$(n).hasClass("w2ui-grid-data-last")&&$(n).css("width",w2utils.scrollBarSize()+(N>0&&E==0?N:0)+"px")}),this.initResize(),this.refreshRanges(),(this.last.scrollTop||this.last.scrollLeft)&&f.length>0&&(a.prop("scrollLeft",this.last.scrollLeft),f.prop("scrollTop",this.last.scrollTop),f.prop("scrollLeft",this.last.scrollLeft))},getSearchesHTML:function(){var e='<table cellspacing="0">',t=!1;for(var n=0;n<this.searches.length;n++){var r=this.searches[n];r.type=String(r.type).toLowerCase();if(r.hidden)continue;var i="";t==0&&(i='<button class="btn close-btn" onclick="obj = w2ui[\''+this.name+"']; if (obj) { obj.searchClose(); }\">X</button",t=!0),typeof r.inTag=="undefined"&&(r.inTag=""),typeof r.outTag=="undefined"&&(r.outTag=""),typeof r.type=="undefined"&&(r.type="text");if(["text","alphanumeric","combo"].indexOf(r.type)!=-1)var s='<select id="grid_'+this.name+"_operator_"+n+'" onclick="event.stopPropagation();">'+'    <option value="is">'+w2utils.lang("is")+"</option>"+'    <option value="begins">'+w2utils.lang("begins")+"</option>"+'    <option value="contains">'+w2utils.lang("contains")+"</option>"+'    <option value="ends">'+w2utils.lang("ends")+"</option>"+"</select>";if(["int","float","money","currency","percent","date","time"].indexOf(r.type)!=-1)var s='<select id="grid_'+this.name+"_operator_"+n+'" '+"        onchange=\"w2ui['"+this.name+"'].initOperator(this, "+n+');" onclick="event.stopPropagation();">'+'    <option value="is">'+w2utils.lang("is")+"</option>"+(["int"].indexOf(r.type)!=-1?'<option value="in">'+w2utils.lang("in")+"</option>":"")+(["int"].indexOf(r.type)!=-1?'<option value="not in">'+w2utils.lang("not in")+"</option>":"")+'<option value="between">'+w2utils.lang("between")+"</option>"+"</select>";if(["select","list","hex"].indexOf(r.type)!=-1)var s='<select id="grid_'+this.name+"_operator_"+n+'" onclick="event.stopPropagation();">'+'    <option value="is">'+w2utils.lang("is")+"</option>"+"</select>";if(["enum"].indexOf(r.type)!=-1)var s='<select id="grid_'+this.name+"_operator_"+n+'" onclick="event.stopPropagation();">'+'    <option value="in">'+w2utils.lang("in")+"</option>"+'    <option value="not in">'+w2utils.lang("not in")+"</option>"+"</select>";e+='<tr>    <td class="close-btn">'+i+"</td>"+'    <td class="caption">'+r.caption+"</td>"+'    <td class="operator">'+s+"</td>"+'    <td class="value">';switch(r.type){case"text":case"alphanumeric":case"hex":case"list":case"combo":case"enum":e+='<input rel="search" type="text" style="width: 300px;" id="grid_'+this.name+"_field_"+n+'" name="'+r.field+'" '+r.inTag+">";break;case"int":case"float":case"money":case"currency":case"percent":case"date":case"time":e+='<input rel="search" type="text" size="12" id="grid_'+this.name+"_field_"+n+'" name="'+r.field+'" '+r.inTag+">"+'<span id="grid_'+this.name+"_range_"+n+'" style="display: none">'+'&nbsp;-&nbsp;&nbsp;<input rel="search" type="text" style="width: 90px" id="grid_'+this.name+"_field2_"+n+'" name="'+r.field+'" '+r.inTag+">"+"</span>";break;case"select":e+='<select rel="search" id="grid_'+this.name+"_field_"+n+'" name="'+r.field+'" '+r.inTag+'  onclick="event.stopPropagation();"></select>'}e+=r.outTag+"    </td>"+"</tr>"}return e+='<tr>    <td colspan="4" class="actions">        <div>        <button class="btn" onclick="obj = w2ui[\''+this.name+"']; if (obj) { obj.searchReset(); }\">"+w2utils.lang("Reset")+"</button>"+'        <button class="btn btn-blue" onclick="obj = w2ui[\''+this.name+"']; if (obj) { obj.search(); }\">"+w2utils.lang("Search")+"</button>"+"        </div>"+"    </td>"+"</tr></table>",e},initOperator:function(e,t){var n=this,r=n.searches[t],i=$("#grid_"+n.name+"_range_"+t),s=$("#grid_"+n.name+"_field_"+t),o=s.parent().find("span input");$(e).val()=="in"||$(e).val()=="not in"?s.w2field("clear"):s.w2field(r.type),$(e).val()=="between"?(i.show(),o.w2field(r.type)):i.hide()},initSearches:function(){var e=this;for(var t in this.searches){var n=this.searches[t],r=this.getSearchData(n.field);n.type=String(n.type).toLowerCase(),typeof n.options!="object"&&(n.options={});switch(n.type){case"text":case"alphanumeric":$("#grid_"+this.name+"_operator_"+t).val("begins"),["alphanumeric","hex"].indexOf(n.type)!=-1&&$("#grid_"+this.name+"_field_"+t).w2field(n.type,n.options);break;case"int":case"float":case"money":case"currency":case"percent":case"date":case"time":if(r&&r.type=="int"&&["in","not in"].indexOf(r.operator)!=-1)break;$("#grid_"+this.name+"_field_"+t).w2field(n.type,n.options),$("#grid_"+this.name+"_field2_"+t).w2field(n.type,n.options),setTimeout(function(){$("#grid_"+e.name+"_field_"+t).keydown(),$("#grid_"+e.name+"_field2_"+t).keydown()},1);break;case"hex":break;case"list":case"combo":case"enum":var i=n.options;n.type=="list"&&(i.selected={}),n.type=="enum"&&(i.selected=[]),r&&(i.selected=r.value),$("#grid_"+this.name+"_field_"+t).w2field(n.type,i),n.type=="combo"&&$("#grid_"+this.name+"_operator_"+t).val("begins");break;case"select":var i='<option value="">--</option>';for(var s in n.options.items){var o=n.options.items[s];if($.isPlainObject(n.options.items[s])){var u=o.id,a=o.text;typeof u=="undefined"&&typeof o.value!="undefined"&&(u=o.value),typeof a=="undefined"&&typeof o.caption!="undefined"&&(a=o.caption),u==null&&(u=""),i+='<option value="'+u+'">'+a+"</option>"}else i+='<option value="'+o+'">'+o+"</option>"}$("#grid_"+this.name+"_field_"+t).html(i)}r!=null&&(r.type=="int"&&["in","not in"].indexOf(r.operator)!=-1&&$("#grid_"+this.name+"_field_"+t).w2field("clear").val(r.value),$("#grid_"+this.name+"_operator_"+t).val(r.operator).trigger("change"),$.isArray(r.value)?["in","not in"].indexOf(r.operator)!=-1?$("#grid_"+this.name+"_field_"+t).val(r.value).trigger("change"):($("#grid_"+this.name+"_field_"+t).val(r.value[0]).trigger("change"),$("#grid_"+this.name+"_field2_"+t).val(r.value[1]).trigger("change")):typeof r.value!="udefined"&&$("#grid_"+this.name+"_field_"+t).val(r.value).trigger("change"))}$("#w2ui-overlay-searches-"+this.name+" .w2ui-grid-searches *[rel=search]").on("keypress",function(t){t.keyCode==13&&(e.search(),$().w2overlay())})},getColumnsHTML:function(){function n(){var t="<tr>";e.columnGroups[e.columnGroups.length-1].caption!=""&&e.columnGroups.push({caption:""}),e.show.lineNumbers&&(t+='<td class="w2ui-head w2ui-col-number">    <div>&nbsp;</div></td>'),e.show.selectColumn&&(t+='<td class="w2ui-head w2ui-col-select">    <div>&nbsp;</div></td>'),e.show.expandColumn&&(t+='<td class="w2ui-head w2ui-col-expand">    <div>&nbsp;</div></td>');var n=0;for(var r=0;r<e.columnGroups.length;r++){var i=e.columnGroups[r],s=e.columns[n];if(typeof i.span=="undefined"||i.span!=parseInt(i.span))i.span=1;typeof i.colspan!="undefined"&&(i.span=i.colspan);if(i.master===!0){var o="";for(var u in e.sortData)e.sortData[u].field==s.field&&(RegExp("asc","i").test(e.sortData[u].direction)&&(o="w2ui-sort-up"),RegExp("desc","i").test(e.sortData[u].direction)&&(o="w2ui-sort-down"));var a="";s.resizable!==!1&&(a='<div class="w2ui-resizer" name="'+n+'"></div>'),t+='<td class="w2ui-head '+o+'" col="'+n+'" rowspan="2" colspan="'+(i.span+(r==e.columnGroups.length-1?1:0))+'" '+"    onclick=\"w2ui['"+e.name+"'].columnClick('"+s.field+"', event);\">"+a+'    <div class="w2ui-col-group w2ui-col-header '+(o?"w2ui-col-sorted":"")+'">'+'        <div class="'+o+'"></div>'+(s.caption?s.caption:"&nbsp;")+"    </div>"+"</td>"}else t+='<td class="w2ui-head" col="'+n+'" '+'        colspan="'+(i.span+(r==e.columnGroups.length-1?1:0))+'">'+'    <div class="w2ui-col-group">'+(i.caption?i.caption:"&nbsp;")+"    </div>"+"</td>";n+=i.span}return t+="</tr>",t}function r(t){var n="<tr>",r=e.reorderColumns&&(!e.columnGroups||!e.columnGroups.length)?" w2ui-reorder-cols-head ":"";e.show.lineNumbers&&(n+='<td class="w2ui-head w2ui-col-number" onclick="w2ui[\''+e.name+"'].columnClick('line-number', event);\">"+"    <div>#</div>"+"</td>"),e.show.selectColumn&&(n+='<td class="w2ui-head w2ui-col-select"         onclick="if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true;">    <div>        <input type="checkbox" id="grid_'+e.name+'_check_all" tabIndex="-1"'+'            style="'+(e.multiSelect==0?"display: none;":"")+'"'+"            onclick=\"if (this.checked) w2ui['"+e.name+"'].selectAll(); "+"                     else w2ui['"+e.name+"'].selectNone(); "+'                     if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true;">'+"    </div>"+"</td>"),e.show.expandColumn&&(n+='<td class="w2ui-head w2ui-col-expand">    <div>&nbsp;</div></td>');var i=0,s=0;for(var o=0;o<e.columns.length;o++){var u=e.columns[o],a={};o==s&&(s+=typeof e.columnGroups[i]!="undefined"?parseInt(e.columnGroups[i].span):0,i++);if(typeof e.columnGroups[i-1]!="undefined")var a=e.columnGroups[i-1];if(u.hidden)continue;var f="";for(var l in e.sortData)e.sortData[l].field==u.field&&(RegExp("asc","i").test(e.sortData[l].direction)&&(f="w2ui-sort-up"),RegExp("desc","i").test(e.sortData[l].direction)&&(f="w2ui-sort-down"));if(a.master!==!0||t){var c="";u.resizable!==!1&&(c='<div class="w2ui-resizer" name="'+o+'"></div>'),n+='<td col="'+o+'" class="w2ui-head '+f+r+'" '+"    onclick=\"w2ui['"+e.name+"'].columnClick('"+u.field+"', event);\">"+c+'    <div class="w2ui-col-header '+(f?"w2ui-col-sorted":"")+'">'+'        <div class="'+f+'"></div>'+(u.caption?u.caption:"&nbsp;")+"    </div>"+"</td>"}}return n+='<td class="w2ui-head w2ui-head-last"><div>&nbsp;</div></td>',n+="</tr>",n}var e=this,t="";return this.show.columnHeaders&&(this.columnGroups.length>0?t=r(!0)+n()+r(!1):t=r(!0)),t},getRecordsHTML:function(){var e=this.records.length;this.searchData.length!=0&&!this.url&&(e=this.last.searchIds.length),e>300?this.show_extra=30:this.show_extra=300;var t=$("#grid_"+this.name+"_records"),n=Math.floor(t.height()/this.recordHeight)+this.show_extra+1;if(!this.fixedBody||n>e)n=e;var r="<table>"+this.getRecordHTML(-1,0);r+='<tr id="grid_'+this.name+'_rec_top" line="top" style="height: '+0+'px">'+'    <td colspan="200"></td>'+"</tr>";for(var i=0;i<n;i++)r+=this.getRecordHTML(i,i+1);return r+='<tr id="grid_'+this.name+'_rec_bottom" line="bottom" style="height: '+(e-n)*this.recordHeight+'px">'+'    <td colspan="200"></td>'+"</tr>"+'<tr id="grid_'+this.name+'_rec_more" style="display: none">'+'    <td colspan="200" class="w2ui-load-more"></td>'+"</tr>"+"</table>",this.last.range_start=0,this.last.range_end=n,r},getSummaryHTML:function(){if(this.summary.length==0)return;var e="<table>";for(var t=0;t<this.summary.length;t++)e+=this.getRecordHTML(t,t+1,!0);return e+="</table>",e},scroll:function(e){function S(){if(n.markSearch===!1)return;clearTimeout(n.last.marker_timer),n.last.marker_timer=setTimeout(function(){var e=[];for(var t in n.searchData){var r=n.searchData[t];$.inArray(r.value,e)==-1&&e.push(r.value)}e.length>0&&$(n.box).find(".w2ui-grid-data > div").w2marker(e)},50)}var t=(new Date).getTime(),n=this,r=$("#grid_"+this.name+"_records"),i=this.records.length;this.searchData.length!=0&&!this.url&&(i=this.last.searchIds.length);if(i==0||r.length==0||r.height()==0)return;i>300?this.show_extra=30:this.show_extra=300;if(r.height()<i*this.recordHeight&&r.css("overflow-y")=="hidden"){this.total>0&&this.refresh();return}var s=Math.round(r[0].scrollTop/this.recordHeight+1),o=s+(Math.round(r.height()/this.recordHeight)-1);s>i&&(s=i),o>i&&(o=i);var u=typeof this.url!="object"?this.url:this.url.get;$("#grid_"+this.name+"_footer .w2ui-footer-right").html(w2utils.formatNumber(this.offset+s)+"-"+w2utils.formatNumber(this.offset+o)+" "+w2utils.lang("of")+" "+w2utils.formatNumber(this.total)+(u?" ("+w2utils.lang("buffered")+" "+w2utils.formatNumber(i)+(this.offset>0?", skip "+w2utils.formatNumber(this.offset):"")+")":""));if(!u&&(!this.fixedBody||this.total<=300))return;var a=Math.floor(r[0].scrollTop/this.recordHeight)-this.show_extra,f=a+Math.floor(r.height()/this.recordHeight)+this.show_extra*2+1;a<1&&(a=1),f>this.total&&(f=this.total);var l=r.find("#grid_"+this.name+"_rec_top"),c=r.find("#grid_"+this.name+"_rec_bottom");String(l.next().prop("id")).indexOf("_expanded_row")!=-1&&l.next().remove(),this.total>f&&String(c.prev().prop("id")).indexOf("_expanded_row")!=-1&&c.prev().remove();var h=parseInt(l.next().attr("line")),p=parseInt(c.prev().attr("line"));if(h<a||h==1||this.last.pull_refresh){if(f<=p+this.show_extra-2&&f!=this.total)return;this.last.pull_refresh=!1;for(;;){var d=r.find("#grid_"+this.name+"_rec_top").next();if(d.attr("line")=="bottom")break;if(!(parseInt(d.attr("line"))<a))break;d.remove()}var d=r.find("#grid_"+this.name+"_rec_bottom").prev(),v=d.attr("line");v=="top"&&(v=a);for(var m=parseInt(v)+1;m<=f;m++){if(!this.records[m-1])continue;this.records[m-1].expanded===!0&&(this.records[m-1].expanded=!1),c.before(this.getRecordHTML(m-1,m))}S(),setTimeout(function(){n.refreshRanges()},0)}else{if(a>=h-this.show_extra+2&&a>1)return;for(;;){var d=r.find("#grid_"+this.name+"_rec_bottom").prev();if(d.attr("line")=="top")break;if(!(parseInt(d.attr("line"))>f))break;d.remove()}var d=r.find("#grid_"+this.name+"_rec_top").next(),v=d.attr("line");v=="bottom"&&(v=f);for(var m=parseInt(v)-1;m>=a;m--){if(!this.records[m-1])continue;this.records[m-1].expanded===!0&&(this.records[m-1].expanded=!1),l.after(this.getRecordHTML(m-1,m))}S(),setTimeout(function(){n.refreshRanges()},0)}var g=(a-1)*n.recordHeight,y=(i-f)*n.recordHeight;y<0&&(y=0),l.css("height",g+"px"),c.css("height",y+"px"),n.last.range_start=a,n.last.range_end=f;var b=Math.floor(r[0].scrollTop/this.recordHeight),w=b+Math.floor(r.height()/this.recordHeight);if(w+10>i&&this.last.pull_more!==!0&&i<this.total-this.offset)if(this.autoLoad===!0)this.last.pull_more=!0,this.last.xhr_offset+=this.limit,this.request("get-records");else{var E=$("#grid_"+this.name+"_rec_more");E.css("display")=="none"&&E.show().on("click",function(){n.last.pull_more=!0,n.last.xhr_offset+=n.limit,n.
request("get-records"),$(this).find("td").html('<div><div style="width: 20px; height: 20px;" class="w2ui-spinner"></div></div>')}),E.find("td").text().indexOf("Load")==-1&&E.find("td").html("<div>"+w2utils.lang("Load")+" "+n.limit+" "+w2utils.lang("More")+"...</div>")}i>=this.total-this.offset&&$("#grid_"+this.name+"_rec_more").hide();return},getRecordHTML:function(e,t,n){var r="",i=this.last.selection,s;if(e==-1){r+='<tr line="0">',this.show.lineNumbers&&(r+='<td class="w2ui-col-number" style="height: 0px;"></td>'),this.show.selectColumn&&(r+='<td class="w2ui-col-select" style="height: 0px;"></td>'),this.show.expandColumn&&(r+='<td class="w2ui-col-expand" style="height: 0px;"></td>');for(var o in this.columns){if(this.columns[o].hidden)continue;r+='<td class="w2ui-grid-data" col="'+o+'" style="height: 0px;"></td>'}return r+='<td class="w2ui-grid-data-last" style="height: 0px;"></td>',r+="</tr>",r}var u=typeof this.url!="object"?this.url:this.url.get;if(n!==!0)if(this.searchData.length>0&&!u){if(e>=this.last.searchIds.length)return"";e=this.last.searchIds[e],s=this.records[e]}else{if(e>=this.records.length)return"";s=this.records[e]}else{if(e>=this.summary.length)return"";s=this.summary[e]}if(!s)return"";var a=w2utils.escapeId(s.recid),f=!1;i.indexes.indexOf(e)!=-1&&(f=!0),r+='<tr id="grid_'+this.name+"_rec_"+s.recid+'" recid="'+s.recid+'" line="'+t+'" '+' class="'+(t%2==0?"w2ui-even":"w2ui-odd")+(f&&this.selectType=="row"?" w2ui-selected":"")+(s.editable===!1?" w2ui-no-edit":"")+(s.expanded===!0?" w2ui-expanded":"")+'" '+(n!==!0?w2utils.isIOS?"    onclick  = \"w2ui['"+this.name+"'].dblClick('"+s.recid+"', event);\"":"    onclick  = \"w2ui['"+this.name+"'].click('"+s.recid+"', event);\""+"    oncontextmenu = \"w2ui['"+this.name+"'].contextMenu('"+s.recid+"', event);\"":"")+' style="height: '+this.recordHeight+"px; "+(!f&&typeof s["style"]=="string"?s.style:"")+'" '+(typeof s["style"]=="string"?'custom_style="'+s.style+'"':"")+">",this.show.lineNumbers&&(r+='<td id="grid_'+this.name+"_cell_"+e+"_number"+(n?"_s":"")+'" class="w2ui-col-number">'+(n!==!0?"<div>"+t+"</div>":"")+"</td>"),this.show.selectColumn&&(r+='<td id="grid_'+this.name+"_cell_"+e+"_select"+(n?"_s":"")+'" class="w2ui-grid-data w2ui-col-select" '+'        onclick="if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true;">'+(n!==!0?'    <div>        <input class="w2ui-grid-select-check" type="checkbox" tabIndex="-1"            '+(f?'checked="checked"':"")+"            onclick=\"var obj = w2ui['"+this.name+"']; "+"                if (!obj.multiSelect) { obj.selectNone(); }"+"                if (this.checked) obj.select('"+s.recid+"'); else obj.unselect('"+s.recid+"'); "+'                if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true;">'+"    </div>":"")+"</td>");if(this.show.expandColumn){var l="";s.expanded===!0?l="-":l="+",s.expanded=="none"&&(l=""),s.expanded=="spinner"&&(l='<div class="w2ui-spinner" style="width: 16px; margin: -2px 2px;"></div>'),r+='<td id="grid_'+this.name+"_cell_"+e+"_expand"+(n?"_s":"")+'" class="w2ui-grid-data w2ui-col-expand">'+(n!==!0?'    <div ondblclick="if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true;"             onclick="w2ui[\''+this.name+"'].toggle('"+s.recid+"', event); "+'                if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true;">'+"        "+l+" </div>":"")+"</td>"}var c=0;for(;;){var h=this.columns[c];if(h.hidden){c++;if(typeof this.columns[c]=="undefined")break;continue}var p=!n&&s.changes&&typeof s.changes[h.field]!="undefined",d=this.getCellHTML(e,c,n),v="";if(typeof h.render=="string"){var m=h.render.toLowerCase().split(":");["number","int","float","money","currency","percent"].indexOf(m[0])!=-1&&(v+="text-align: right;")}typeof s.style=="object"&&typeof s.style[c]=="string"&&(v+=s.style[c]+";");var g=!1;f&&$.inArray(c,i.columns[e])!=-1&&(g=!0),r+='<td class="w2ui-grid-data'+(g?" w2ui-selected":"")+(p?" w2ui-changed":"")+'" col="'+c+'" '+'    style="'+v+(typeof h.style!="undefined"?h.style:"")+'" '+(typeof h.attr!="undefined"?h.attr:"")+">"+d+"</td>",c++;if(typeof this.columns[c]=="undefined")break}return r+='<td class="w2ui-grid-data-last"></td>',r+="</tr>",r},getCellHTML:function(e,t,n){var r=this.columns[t],i=n!==!0?this.records[e]:this.summary[e],s=this.getCellValue(e,t,n),o=r.editable;if(r.render!=null){if(typeof r.render=="function"){s=$.trim(r.render.call(this,i,e,t));if(s.length<4||s.substr(0,4).toLowerCase()!="<div")s="<div>"+s+"</div>"}typeof r.render=="object"&&(s="<div>"+(r.render[s]||"")+"</div>");if(typeof r.render=="string"){var u=r.render.toLowerCase().split(":"),a="",f="";if(["number","int","float","money","currency","percent"].indexOf(u[0])!=-1){if(typeof u[1]=="undefined"||!w2utils.isInt(u[1]))u[1]=0;u[1]>20&&(u[1]=20),u[1]<0&&(u[1]=0),["money","currency"].indexOf(u[0])!=-1&&(u[1]=w2utils.settings.currencyPrecision,a=w2utils.settings.currencyPrefix,f=w2utils.settings.currencySuffix),u[0]=="percent"&&(f="%",u[1]!=="0"&&(u[1]=1)),u[0]=="int"&&(u[1]=0),s="<div>"+(s!==""?a+w2utils.formatNumber(Number(s).toFixed(u[1]))+f:"")+"</div>"}if(u[0]=="time"){if(typeof u[1]=="undefined"||u[1]=="")u[1]=w2utils.settings.time_format;s="<div>"+a+w2utils.formatTime(s,u[1]=="h12"?"hh:mi pm":"h24:min")+f+"</div>"}if(u[0]=="date"){if(typeof u[1]=="undefined"||u[1]=="")u[1]=w2utils.settings.date_display;s="<div>"+a+w2utils.formatDate(s,u[1])+f+"</div>"}u[0]=="age"&&(s="<div>"+a+w2utils.age(s)+f+"</div>"),u[0]=="toggle"&&(s="<div>"+a+(s?"Yes":"")+f+"</div>")}}else{var l="";if(o&&["checkbox","check"].indexOf(o.type)!=-1){var c=n?-(e+1):e;l="text-align: center",s='<input type="checkbox" '+(s?"checked":"")+' onclick="'+"    var obj = w2ui['"+this.name+"']; "+"    obj.editChange.call(obj, this, "+c+", "+t+", event); "+'">'}if(!this.show.recordTitles)var s='<div style="'+l+'">'+s+"</div>";else{var h=String(s).replace(/"/g,"''");typeof r.title!="undefined"&&(typeof r.title=="function"&&(h=r.title.call(this,i,e,t)),typeof r.title=="string"&&(h=r.title));var s='<div title="'+w2utils.stripTags(h)+'" style="'+l+'">'+s+"</div>"}}if(s==null||typeof s=="undefined")s="";return s},getCellValue:function(e,t,n){var r=this.columns[t],i=n!==!0?this.records[e]:this.summary[e],s=this.parseField(i,r.field);i.changes&&typeof i.changes[r.field]!="undefined"&&(s=i.changes[r.field]);if(s==null||typeof s=="undefined")s="";return s},getFooterHTML:function(){return'<div>    <div class="w2ui-footer-left"></div>    <div class="w2ui-footer-right"></div>    <div class="w2ui-footer-center"></div></div>'},status:function(e){if(typeof e!="undefined"&&e.indexOf("服务器响应")===-1)$("#grid_"+this.name+"_footer").find(".w2ui-footer-left").html(e);else{var t="",n=this.getSelection();if(n.length>0){t=String(n.length).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")+" "+w2utils.lang("selected");var r=n[0];typeof r=="object"&&(r=r.recid+", "+w2utils.lang("Column")+": "+r.column),n.length==1&&(t=w2utils.lang("Record ID")+": "+r+" ")}$("#grid_"+this.name+"_footer .w2ui-footer-left").html(t),n.length==1?this.toolbar.enable("w2ui-edit"):this.toolbar.disable("w2ui-edit"),n.length>=1?this.toolbar.enable("w2ui-delete"):this.toolbar.disable("w2ui-delete")}},lock:function(e,t){var n=$(this.box).find("> div:first-child"),r=Array.prototype.slice.call(arguments,0);r.unshift(n),setTimeout(function(){w2utils.lock.apply(window,r)},10)},unlock:function(){var e=this.box;setTimeout(function(){w2utils.unlock(e)},25)},stateSave:function(e){if(!localStorage)return null;var t={columns:[],show:$.extend({},this.show),last:{search:this.last.search,multi:this.last.multi,logic:this.last.logic,caption:this.last.caption,field:this.last.field,scrollTop:this.last.scrollTop,scrollLeft:this.last.scrollLeft},sortData:[],searchData:[]};for(var n in this.columns){var r=this.columns[n];t.columns.push({field:r.field,hidden:r.hidden,size:r.size,sizeCalculated:r.sizeCalculated,sizeOriginal:r.sizeOriginal,sizeType:r.sizeType})}for(var n in this.sortData)t.sortData.push($.extend({},this.sortData[n]));for(var n in this.searchData)t.searchData.push($.extend({},this.searchData[n]));if(e!==!0){var i=this.trigger({phase:"before",type:"stateSave",target:this.name,state:t});if(i.isCancelled===!0){typeof callBack=="function"&&callBack({status:"error",message:"Request aborted."});return}try{var s=$.parseJSON(localStorage.w2ui||"{}");s||(s={}),s.states||(s.states={}),s.states[this.name]=t,localStorage.w2ui=JSON.stringify(s)}catch(o){return delete localStorage.w2ui,null}this.trigger($.extend(i,{phase:"after"}))}return t},stateRestore:function(e){var t=this;if(!e)try{if(!localStorage)return!1;var n=$.parseJSON(localStorage.w2ui||"{}");n||(n={}),n.states||(n.states={}),e=n.states[this.name]}catch(r){return delete localStorage.w2ui,null}var i=this.trigger({phase:"before",type:"stateRestore",target:this.name,state:e});if(i.isCancelled===!0){typeof callBack=="function"&&callBack({status:"error",message:"Request aborted."});return}if($.isPlainObject(e)){$.extend(this.show,e.show),$.extend(this.last,e.last);var s=this.last.scrollTop,o=this.last.scrollLeft;for(var u in e.columns){var n=e.columns[u],a=this.getColumn(n.field);a&&$.extend(a,n)}this.sortData.splice(0,this.sortData.length);for(var u in e.sortData)this.sortData.push(e.sortData[u]);this.searchData.splice(0,this.searchData.length);for(var u in e.searchData)this.searchData.push(e.searchData[u]);setTimeout(function(){t.sortData.length>0&&t.localSort(),t.searchData.length>0&&t.localSearch(),t.last.scrollTop=s,t.last.scrollLeft=o,t.refresh()},1)}return this.trigger($.extend(i,{phase:"after"})),!0},stateReset:function(){this.stateRestore(this.last.state);if(localStorage)try{var e=$.parseJSON(localStorage.w2ui||"{}");e.states&&e.states[this.name]&&delete e.states[this.name],localStorage.w2ui=JSON.stringify(e)}catch(t){return delete localStorage.w2ui,null}},parseField:function(e,t){var n="";try{n=e;var r=String(t).split(".");for(var i in r)n=n[r[i]]}catch(s){n=""}return n},prepareData:function(){for(var e in this.records){var t=this.records[e];for(var n in this.columns){var r=this.columns[n];if(t[r.field]==null||typeof r.render!="string")continue;["number","int","float","money","currency","percent"].indexOf(r.render.split(":")[0])!=-1&&typeof t[r.field]!="number"&&(t[r.field]=parseFloat(t[r.field]));if(["date","age"].indexOf(r.render.split(":")[0])!=-1&&!t[r.field+"_"]){var i=t[r.field];w2utils.isInt(i)&&(i=parseInt(i)),t[r.field+"_"]=new Date(i)}if(["time"].indexOf(r.render)!=-1)if(w2utils.isTime(t[r.field])){var s=w2utils.isTime(t[r.field],!0),i=new Date;i.setHours(s.hours,s.minutes,s.seconds?s.seconds:0,0),t[r.field+"_"]||(t[r.field+"_"]=i)}else{var s=t[r.field];w2utils.isInt(s)&&(s=parseInt(s));var s=s!=null?new Date(s):new Date,i=new Date;i.setHours(s.getHours(),s.getMinutes(),s.getSeconds(),0),t[r.field+"_"]||(t[r.field+"_"]=i)}}}},nextCell:function(e,t){var n=e+1;if(this.columns.length==n)return null;if(t===!0){var r=this.columns[n].editable;if(this.columns[n].hidden||typeof r=="undefined"||r&&["checkbox","check"].indexOf(r.type)!=-1)return this.nextCell(n,t)}return n},prevCell:function(e,t){var n=e-1;if(n<0)return null;if(t===!0){var r=this.columns[n].editable;if(this.columns[n].hidden||typeof r=="undefined"||r&&["checkbox","check"].indexOf(r.type)!=-1)return this.prevCell(n,t)}return n},nextRow:function(e){if(e+1<this.records.length&&this.last.searchIds.length==0||this.last.searchIds.length>0&&e<this.last.searchIds[this.last.searchIds.length-1]){e++;if(this.last.searchIds.length>0)for(;;){if($.inArray(e,this.last.searchIds)!=-1||e>this.records.length)break;e++}return e}return null},prevRow:function(e){if(e>0&&this.last.searchIds.length==0||this.last.searchIds.length>0&&e>this.last.searchIds[0]){e--;if(this.last.searchIds.length>0)for(;;){if($.inArray(e,this.last.searchIds)!=-1||e<0)break;e--}return e}return null}},$.extend(w2grid.prototype,w2utils.event),w2obj.grid=w2grid}(),function(){var e=function(e){this.box=null,this.name=null,this.panels=[],this.tmp={},this.padding=1,this.resizer=4,this.style="",this.onShow=null,this.onHide=null,this.onResizing=null,this.onResizerClick=null,this.onRender=null,this.onRefresh=null,this.onResize=null,this.onDestroy=null,$.extend(!0,this,w2obj.layout,e)},t=["top","left","main","preview","right","bottom"];$.fn.w2layout=function(n){function f(e,t,n){var r=e.get(t);return r!==null&&typeof n=="undefined"&&(n=r.tabs),r===null||n===null?!1:($.isArray(n)&&(n={tabs:n}),$().w2destroy(e.name+"_"+t+"_tabs"),r.tabs=$().w2tabs($.extend({},n,{owner:e,name:e.name+"_"+t+"_tabs"})),r.show.tabs=!0,!0)}function l(e,t,n){var r=e.get(t);return r!==null&&typeof n=="undefined"&&(n=r.toolbar),r===null||n===null?!1:($.isArray(n)&&(n={items:n}),$().w2destroy(e.name+"_"+t+"_toolbar"),r.toolbar=$().w2toolbar($.extend({},n,{owner:e,name:e.name+"_"+t+"_toolbar"})),r.show.toolbar=!0,!0)}if(typeof n=="object"||!n){if(!w2utils.checkName(n,"w2layout"))return;var r=n.panels||[],i=new e(n);$.extend(i,{handlers:[],panels:[]});for(var s=0,o=r.length;s<o;s++)i.panels[s]=$.extend(!0,{},e.prototype.panel,r[s]),($.isPlainObject(i.panels[s].tabs)||$.isArray(i.panels[s].tabs))&&f(i,r[s].type),($.isPlainObject(i.panels[s].toolbar)||$.isArray(i.panels[s].toolbar))&&l(i,r[s].type);for(var u in t){u=t[u];if(i.get(u)!==null)continue;i.panels.push($.extend(!0,{},e.prototype.panel,{type:u,hidden:u!=="main",size:50}))}return $(this).length>0&&i.render($(this)[0]),w2ui[i.name]=i,i}if(w2ui[$(this).attr("name")]){var a=w2ui[$(this).attr("name")];return a[n].apply(a,Array.prototype.slice.call(arguments,1)),this}console.log("ERROR: Method "+n+" does not exist on jQuery.w2layout")},e.prototype={panel:{type:null,title:"",size:100,minSize:20,maxSize:!1,hidden:!1,resizable:!1,overflow:"auto",style:"",content:"",tabs:null,toolbar:null,width:null,height:null,show:{toolbar:!1,tabs:!1},onRefresh:null,onShow:null,onHide:null},html:function(e,t,n){return this.content(e,t,n)},content:function(e,t,n){var r=this,i=this.get(e);if(e=="css")return $("#layout_"+r.name+"_panel_css").html("<style>"+t+"</style>"),!0;if(i===null)return!1;if(typeof t=="undefined"||t===null)return i.content;if(t instanceof jQuery)return console.log("ERROR: You can not pass jQuery object to w2layout.content() method"),!1;var s="#layout_"+this.name+"_panel_"+i.type,o=$(s+"> .w2ui-panel-content"),u=0;o.length>0&&($(s).scrollTop(0),u=$(o).position().top);if(i.content==="")i.content=t,this.refresh(e);else{i.content=t;if(!i.hidden&&n!==null&&n!==""&&typeof n!="undefined"){var a=$(s+"> .w2ui-panel-content");a.after('<div class="w2ui-panel-content new-panel" style="'+a[0].style.cssText+'"></div>');var f=$(s+"> .w2ui-panel-content.new-panel");a.css("top",u),f.css("top",u),typeof t=="object"?(t.box=f[0],t.render()):f.html(t),w2utils.transition(a[0],f[0],n,function(){a.remove(),f.removeClass("new-panel"),f.css("overflow",i.overflow),r.resize(),window.navigator.userAgent.indexOf("MSIE")!=-1&&setTimeout(function(){r.resize()},100)})}this.refresh(e)}return r.resize(),window.navigator.userAgent.indexOf("MSIE")!=-1&&setTimeout(function(){r.resize()},100),!0},load:function(e,t,n,r){var i=this;return e=="css"?($.get(t,function(t,n,s){i.content(e,s.responseText),r&&r()}),!0):this.get(e)!==null?($.get(t,function(t,s,o){i.content(e,o.responseText,n),r&&r(),i.resize(),window.navigator.userAgent.indexOf("MSIE")!=-1&&setTimeout(function(){i.resize()},100)}),!0):!1},sizeTo:function(e,t){var n=this,r=n.get(e);return r===null?!1:($(n.box).find(" > div > .w2ui-panel").css({"-webkit-transition":".2s","-moz-transition":".2s","-ms-transition":".2s","-o-transition":".2s"}),setTimeout(function(){n.set(e,{size:t})},1),setTimeout(function(){$(n.box).find(" > div > .w2ui-panel").css({"-webkit-transition":"0s","-moz-transition":"0s","-ms-transition":"0s","-o-transition":"0s"}),n.resize()},500),!0)},show:function(e,t){var n=this,r=this.trigger({phase:"before",type:"show",target:e,object:this.get(e),immediate:t});if(r.isCancelled===!0)return;var i=n.get(e);return i===null?!1:(i.hidden=!1,t===!0?($("#layout_"+n.name+"_panel_"+e).css({opacity:"1"}),i.resizable&&$("#layout_"+n.name+"_resizer_"+e).show(),n.trigger($.extend(r,{phase:"after"})),n.resize()):(i.resizable&&$("#layout_"+n.name+"_resizer_"+e).show(),$("#layout_"+n.name+"_panel_"+e).css({opacity:"0"}),$(n.box).find(" > div > .w2ui-panel").css({"-webkit-transition":".2s","-moz-transition":".2s","-ms-transition":".2s","-o-transition":".2s"}),setTimeout(function(){n.resize()},1),setTimeout(function(){$("#layout_"+n.name+"_panel_"+e).css({opacity:"1"})},250),setTimeout(function(){$(n.box).find(" > div > .w2ui-panel").css({"-webkit-transition":"0s","-moz-transition":"0s","-ms-transition":"0s","-o-transition":"0s"}),n.trigger($.extend(r,{phase:"after"})),n.resize()},500)),!0)},hide:function(e,t){var n=this,r=this.trigger({phase:"before",type:"hide",target:e,object:this.get(e),immediate:t});if(r.isCancelled===!0)return;var i=n.get(e);return i===null?!1:(i.hidden=!0,t===!0?($("#layout_"+n.name+"_panel_"+e).css({opacity:"0"}),$("#layout_"+n.name+"_resizer_"+e).hide(),n.trigger($.extend(r,{phase:"after"})),n.resize()):($("#layout_"+n.name+"_resizer_"+e).hide(),$(n.box).find(" > div > .w2ui-panel").css({"-webkit-transition":".2s","-moz-transition":".2s","-ms-transition":".2s","-o-transition":".2s"}),$("#layout_"+n.name+"_panel_"+e).css({opacity:"0"}),setTimeout(function(){n.resize()},1),setTimeout(function(){$(n.box).find(" > div > .w2ui-panel").css({"-webkit-transition":"0s","-moz-transition":"0s","-ms-transition":"0s","-o-transition":"0s"}),n.trigger($.extend(r,{phase:"after"})),n.resize()},500)),!0)},toggle:function(e,t){var n=this.get(e);return n===null?!1:n.hidden?this.show(e,t):this.hide(e,t)},set:function(e,t){var n=this.get(e,!0);return n===null?!1:($.extend(this.panels[n],t),typeof t["content"]!="undefined"&&this.refresh(e),this.resize(),!0)},get:function(e,t){for(var n in this.panels)if(this.panels[n].type==e)return t===!0?n:this.panels[n];return null},el:function(e){var t=$("#layout_"+this.name+"_panel_"+e+"> .w2ui-panel-content");return t.length!=1?null:t[0]},hideToolbar:function(e){var t=this.get(e);if(!t)return;t.show.toolbar=!1,$("#layout_"+this.name+"_panel_"+e+"> .w2ui-panel-toolbar").hide(),this.resize()},showToolbar:function(e){var t=this.get(e);if(!t)return;t.show.toolbar=!0,$("#layout_"+this.name+"_panel_"+e+"> .w2ui-panel-toolbar").show(),this.resize()},toggleToolbar:function(e){var t=this.get(e);if(!t)return;t.show.toolbar?this.hideToolbar(e):this.showToolbar(e)},hideTabs:function(e){var t=this.get(e);if(!t)return;t.show.tabs=!1,$("#layout_"+this.name+"_panel_"+e+"> .w2ui-panel-tabs").hide(),this.resize()},showTabs:function(e){var t=this.get(e);if(!t)return;t.show.tabs=!0,$("#layout_"+this.name+"_panel_"+e+"> .w2ui-panel-tabs").show(),this.resize()},toggleTabs:function(e){var t=this.get(e);if(!t)return;t.show.tabs?this.hideTabs(e):this.showTabs(e)},render:function(e){function a(){n.tmp.events={resize:function(e){w2ui[n.name].resize()},resizeStart:f,mouseMove:c,mouseUp:l},$(window).on("resize",n.tmp.events.resize)}function f(e,r){if(!n.box)return;r||(r=window.event),window.addEventListener||window.document.attachEvent("onselectstart",function(){return!1}),$(document).off("mousemove",n.tmp.events.mouseMove).on("mousemove",n.tmp.events.mouseMove),$(document).off("mouseup",n.tmp.events.mouseUp).on("mouseup",n.tmp.events.mouseUp),n.tmp.resize={type:e,x:r.screenX,y:r.screenY,diff_x:0,diff_y:0,value:0};for(var i in t)i=t[i],n.lock(i,{opacity:0});if(e=="left"||e=="right")n.tmp.resize.value=parseInt($("#layout_"+n.name+"_resizer_"+e)[0].style.left);if(e=="top"||e=="preview"||e=="bottom")n.tmp.resize.value=parseInt($("#layout_"+n.name+"_resizer_"+e)[0].style.top)}function l(e){if(!n.box)return;e||(e=window.event),window.addEventListener||window.document.attachEvent("onselectstart",function(){return!1}),$(document).off("mousemove",n.tmp.events.mouseMove),$(document).off("mouseup",n.tmp.events.mouseUp);if(typeof n.tmp.resize=="undefined")return;for(var r in t)n.unlock(t[r]);if(n.tmp.diff_x!==0||n.tmp.resize.diff_y!==0){var i=n.get("top"),s=n.get("bottom"),o=n.get(n.tmp.resize.type),u=parseInt($(n.box).height()),a=parseInt($(n.box).width()),f=String(o.size),l,c;switch(n.tmp.resize.type){case"top":l=parseInt(o.sizeCalculated)+n.tmp.resize.diff_y,c=0;break;case"bottom":l=parseInt(o.sizeCalculated)-n.tmp.resize.diff_y,c=0;break;case"preview":l=parseInt(o.sizeCalculated)-n.tmp.resize.diff_y,c=(i&&!i.hidden?i.sizeCalculated:0)+(s&&!s.hidden?s.sizeCalculated:0);break;case"left":l=parseInt(o.sizeCalculated)+n.tmp.resize.diff_x,c=0;break;case"right":l=parseInt(o.sizeCalculated)-n.tmp.resize.diff_x,c=0}f.substr(f.length-1)=="%"?o.size=Math.floor(l*100/(o.type=="left"||o.type=="right"?a:u-c)*100)/100+"%":o.size=l,n.resize()}$("#layout_"+n.name+"_resizer_"+n.tmp.resize.type).removeClass("active"),delete n.tmp.resize}function c(e){if(!n.box)return;e||(e=window.event);if(typeof n.tmp.resize=="undefined")return;var t=n.get(n.tmp.resize.type),r=n.tmp.resize,i=n.trigger({phase:"before",type:"resizing",target:n.name,object:t,originalEvent:e,panel:r?r.type:"all",diff_x:r?r.diff_x:0,diff_y:r?r.diff_y:0});if(i.isCancelled===!0)return;var s=$("#layout_"+n.name+"_resizer_"+r.type),o=e.screenX-r.x,u=e.screenY-r.y,a=n.get("main");s.hasClass("active")||s.addClass("active");switch(r.type){case"left":t.minSize-o>t.width&&(o=t.minSize-t.width),t.maxSize&&t.width+o>t.maxSize&&(o=t.maxSize-t.width),a.minSize+o>a.width&&(o=a.width-a.minSize);break;case"right":t.minSize+o>t.width&&(o=t.width-t.minSize),t.maxSize&&t.width-o>t.maxSize&&(o=t.width-t.maxSize),a.minSize-o>a.width&&(o=a.minSize-a.width);break;case"top":t.minSize-u>t.height&&(u=t.minSize-t.height),t.maxSize&&t.height+u>t.maxSize&&(u=t.maxSize-t.height),a.minSize+u>a.height&&(u=a.height-a.minSize);break;case"preview":case"bottom":t.minSize+u>t.height&&(u=t.height-t.minSize),t.maxSize&&t.height-u>t.maxSize&&(u=t.height-t.maxSize),a.minSize-u>a.height&&(u=a.minSize-a.height)}r.diff_x=o,r.diff_y=u;switch(r.type){case"top":case"preview":case"bottom":r.diff_x=0,s.length>0&&(s[0].style.top=r.value+r.diff_y+"px");break;case"left":case"right":r.diff_y=0,s.length>0&&(s[0].style.left=r.value+r.diff_x+"px")}n.trigger($.extend(i,{phase:"after"}))}var n=this,r=(new Date).getTime(),i=n.trigger({phase:"before",type:"render",target:n.name,box:e});if(i.isCancelled===!0)return;typeof e!="undefined"&&e!==null&&($(n.box).find("#layout_"+n.name+"_panel_main").length>0&&$(n.box).removeAttr("name").removeClass("w2ui-layout").html(""),n.box=e);if(!n.box)return!1;$(n.box).attr("name",n.name).addClass("w2ui-layout").html("<div></div>"),$(n.box).length>0&&($(n.box)[0].style.cssText+=n.style);for(var s in t){s=t[s];var o=n.get(s),u='<div id="layout_'+n.name+"_panel_"+s+'" class="w2ui-panel">'+'    <div class="w2ui-panel-title"></div>'+'    <div class="w2ui-panel-tabs"></div>'+'    <div class="w2ui-panel-toolbar"></div>'+'    <div class="w2ui-panel-content"></div>'+"</div>"+'<div id="layout_'+n.name+"_resizer_"+s+'" class="w2ui-resizer"></div>';$(n.box).find(" > div").append(u)}return $(n.box).find(" > div").append('<div id="layout_'+n.name+'_panel_css" style="position: absolute; top: 10000px;"></div'),n.refresh(),n.trigger($.extend(i,{phase:"after"})),setTimeout(function(){a(),n.resize()},0),(new Date).getTime()-r},refresh:function(e){var t=this;typeof e=="undefined"&&(e=null);var n=(new Date).getTime(),r=t.trigger({phase:"before",type:"refresh",target:typeof e!="undefined"?e:t.name,object:t.get(e)});if(r.isCancelled===!0)return;if(typeof e=="string"){var i=t.get(e);if(i===null)return;var s="#layout_"+t.name+"_panel_"+i.type,o="#layout_"+t.name+"_resizer_"+i.type;$(s).css({display:i.hidden?"none":"block"}),i.resizable?$(o).show():$(o).hide(),typeof i.content=="object"&&typeof i.content.render=="function"?(i.content.box=$(s+"> .w2ui-panel-content")[0],setTimeout(function(){$(s+"> .w2ui-panel-content").length>0&&($(s+"> .w2ui-panel-content").removeClass().removeAttr("name").off("selectstart").addClass("w2ui-panel-content").css("overflow",i.overflow)[0].style.cssText+=";"+i.style),i.content.render()},1)):$(s+"> .w2ui-panel-content").length>0&&($(s+"> .w2ui-panel-content").removeClass().removeAttr("name").off("selectstart").addClass("w2ui-panel-content").html(i.content).css("overflow",i.overflow)[0].style.cssText+=";"+i.style);var u=$(t.box).find(s+"> .w2ui-panel-tabs");i.show.tabs?u.find("[name="+i.tabs.name+"]").length===0&&i.tabs!==null?u.w2render(i.tabs):i.tabs.refresh():u.html("").removeClass("w2ui-tabs").hide(),u=$(t.box).find(s+"> .w2ui-panel-toolbar"),i.show.toolbar?u.find("[name="+i.toolbar.name+"]").length===0&&i.toolbar!==null?u.w2render(i.toolbar):i.toolbar.refresh():u.html("").removeClass("w2ui-toolbar").hide(),u=$(t.box).find(s+"> .w2ui-panel-title"),i.title?u.html(i.title).show():u.html("").hide()}else{if($("#layout_"+t.name+"_panel_main").length==0){t.render();return}t.resize();for(var a in this.panels)t.refresh(this.panels[a].type)}return t.trigger($.extend(r,{phase:"after"})),(new Date).getTime()-n},resize:function(){if(!this.box)return!1;var e=(new Date).getTime(),n=this.tmp.resize,r=this.trigger({phase:"before",type:"resize",target:this.name,panel:n?n.type:"all",diff_x:n?n.diff_x:0,diff_y:n?n.diff_y:0});if(r.isCancelled===!0)return;this.padding<0&&(this.padding=0);var i=parseInt($(this.box).width()),s=parseInt($(this.box).height());$(this.box).find(" > div").css({width:i+"px",height:s+"px"});var o=this,u=this.get("main"),a=this.get("preview"),f=this.get("left"),l=this.get("right"),c=this.get("top"),h=this.get("bottom"),p=!0,d=a!==null&&a.hidden!==!0?!0:!1,v=f!==null&&f.hidden!==!0?!0:!1,m=l!==null&&l.hidden!==!0?!0:!1,g=c!==null&&c.hidden!==!0?!0:!1,y=h!==null&&h.hidden!==!0?!0:!1,b,w,E,S,x;for(var T in t){T=t[T];if(T==="main")continue;var n=this.get(T);if(!n)continue;var N=String(n.size||0);if(N.substr(N.length-1)=="%"){var C=s;n.type=="preview"&&(C=C-(c&&!c.hidden?c.sizeCalculated:0)-(h&&!h.hidden?h.sizeCalculated:0)),n.sizeCalculated=parseInt((n.type=="left"||n.type=="right"?i:C)*parseFloat(n.size)/100)}else n.sizeCalculated=parseInt(n.size);n.sizeCalculated=Math.max(n.sizeCalculated,parseInt(n.minSize))}c!==null&&c.hidden!==!0?(b=0,w=0,E=i,S=c.sizeCalculated,$("#layout_"+this.name+"_panel_top").css({display:"block",left:b+"px",top:w+"px",width:E+"px",height:S+"px"}).show(),c.width=E,c.height=S,c.resizable&&(w=c.sizeCalculated-(this.padding===0?this.resizer:0),S=this.resizer>this.padding?this.resizer:this.padding,$("#layout_"+this.name+"_resizer_top").show().css({display:"block",left:b+"px",top:w+"px",width:E+"px",height:S+"px",cursor:"ns-resize"}).off("mousedown").on("mousedown",function(e){var t=o.trigger({phase:"before",type:"resizerClick",target:"top",originalEvent:e});if(t.isCancelled===!0)return;return w2ui[o.name].tmp.events.resizeStart("top",e),o.trigger($.extend(t,{phase:"after"})),!1}))):$("#layout_"+this.name+"_panel_top").hide(),f!==null&&f.hidden!==!0?(b=0,w=0+(g?c.sizeCalculated+this.padding:0),E=f.sizeCalculated,S=s-(g?c.sizeCalculated+this.padding:0)-(y?h.sizeCalculated+this.padding:0),x=$("#layout_"+this.name+"_panel_left"),window.navigator.userAgent.indexOf("MSIE")!=-1&&x.length>0&&x[0].clientHeight<x[0].scrollHeight&&(E+=17),x.css({display:"block",left:b+"px",top:w+"px",width:E+"px",height:S+"px"}).show(),f.width=E,f.height=S,f.resizable&&(b=f.sizeCalculated-(this.padding===0?this.resizer:0),E=this.resizer>this.padding?this.resizer:this.padding,$("#layout_"+this.name+"_resizer_left").show().css({display:"block",left:b+"px",top:w+"px",width:E+"px",height:S+"px",cursor:"ew-resize"}).off("mousedown").on("mousedown",function(e){var t=o.trigger({phase:"before",type:"resizerClick",target:"left",originalEvent:e});if(t.isCancelled===!0)return;return w2ui[o.name].tmp.events.resizeStart("left",e),o.trigger($.extend(t,{phase:"after"})),!1}))):($("#layout_"+this.name+"_panel_left").hide(),$("#layout_"+this.name+"_resizer_left").hide()),l!==null&&l.hidden!==!0?(b=i-l.sizeCalculated,w=0+(g?c.sizeCalculated+this.padding:0),E=l.sizeCalculated,S=s-(g?c.sizeCalculated+this.padding:0)-(y?h.sizeCalculated+this.padding:0),$("#layout_"+this.name+"_panel_right").css({display:"block",left:b+"px",top:w+"px",width:E+"px",height:S+"px"}).show(),l.width=E,l.height=S,l.resizable&&(b-=this.padding,E=this.resizer>this.padding?this.resizer:this.padding,$("#layout_"+this.name+"_resizer_right").show().css({display:"block",left:b+"px",top:w+"px",width:E+"px",height:S+"px",cursor:"ew-resize"}).off("mousedown").on("mousedown",function(e){var t=o.trigger({phase:"before",type:"resizerClick",target:"right",originalEvent:e});if(t.isCancelled===!0)return;return w2ui[o.name].tmp.events.resizeStart("right",e),o.trigger($.extend(t,{phase:"after"})),!1}))):$("#layout_"+this.name+"_panel_right").hide(),h!==null&&h.hidden!==!0?(b=0,w=s-h.sizeCalculated,E=i,S=h.sizeCalculated,$("#layout_"+this.name+"_panel_bottom").css({display:"block",left:b+"px",top:w+"px",width:E+"px",height:S+"px"}).show(),h.width=E,h.height=S,h.resizable&&(w-=this.padding===0?0:this.padding,S=this.resizer>this.padding?this.resizer:this.padding,$("#layout_"+this.name+"_resizer_bottom").show().css({display:"block",left:b+"px",top:w+"px",width:E+"px",height:S+"px",cursor:"ns-resize"}).off("mousedown").on("mousedown",function(e){var t=o.trigger({phase:"before",type:"resizerClick",target:"bottom",originalEvent:e});if(t.isCancelled===!0)return;return w2ui[o.name].tmp.events.resizeStart("bottom",e),o.trigger($.extend(t,{phase:"after"})),!1}))):$("#layout_"+this.name+"_panel_bottom").hide(),b=0+(v?f.sizeCalculated+this.padding:0),w=0+(g?c.sizeCalculated+this.padding:0),E=i-(v?f.sizeCalculated+this.padding:0)-(m?l.sizeCalculated+this.padding:0),S=s-(g?c.sizeCalculated+this.padding:0)-(y?h.sizeCalculated+this.padding:0)-(d?a.sizeCalculated+this.padding:0),x=$("#layout_"+this.name+"_panel_main"),window.navigator.userAgent.indexOf("MSIE")!=-1&&x.length>0&&x[0].clientHeight<x[0].scrollHeight&&(E+=17),x.css({display:"block",left:b+"px",top:w+"px",width:E+"px",height:S+"px"}),u.width=E,u.height=S,a!==null&&a.hidden!==!0?(b=0+(v?f.sizeCalculated+this.padding:0),w=s-(y?h.sizeCalculated+this.padding:0)-a.sizeCalculated,E=i-(v?f.sizeCalculated+this.padding:0)-(m?l.sizeCalculated+this.padding:0),S=a.sizeCalculated,x=$("#layout_"+this.name+"_panel_preview"),window.navigator.userAgent.indexOf("MSIE")!=-1&&x.length>0&&x[0].clientHeight<x[0].scrollHeight&&(E+=17),x.css({display:"block",left:b+"px",top:w+"px",width:E+"px",height:S+"px"}).show(),a.width=E,a.height=S,a.resizable&&(w-=this.padding===0?0:this.padding,S=this.resizer>this.padding?this.resizer:this.padding,$("#layout_"+this.name+"_resizer_preview").show().css({display:"block",left:b+"px",top:w+"px",width:E+"px",height:S+"px",cursor:"ns-resize"}).off("mousedown").on("mousedown",function(e){var t=o.trigger({phase:"before",type:"resizerClick",target:"preview",originalEvent:e});if(t.isCancelled===!0)return;return w2ui[o.name].tmp.events.resizeStart("preview",e),o.trigger($.extend(t,{phase:"after"})),!1}))):$("#layout_"+this.name+"_panel_preview").hide();for(var k in t){k=t[k];var L=this.get(k),A="#layout_"+this.name+"_panel_"+k+" > .w2ui-panel-",O=0;L&&(L.title&&(O+=w2utils.getSize($(A+"title").css({top:O+"px",display:"block"}),"height")),L.show.tabs&&(L.tabs!==null&&w2ui[this.name+"_"+k+"_tabs"]&&w2ui[this.name+"_"+k+"_tabs"].resize(),O+=w2utils.getSize($(A+"tabs").css({top:O+"px",display:"block"}),"height")),L.show.toolbar&&(L.toolbar!==null&&w2ui[this.name+"_"+k+"_toolbar"]&&w2ui[this.name+"_"+k+"_toolbar"].resize(),O+=w2utils.getSize($(A+"toolbar").css({top:O+"px",display:"block"}),"height"))),$(A+"content").css({display:"block"}).css({top:O+"px"})}return clearTimeout(this._resize_timer),this._resize_timer=setTimeout(function(){for(var e in w2ui)if(typeof w2ui[e].resize=="function"){w2ui[e].panels=="undefined"&&w2ui[e].resize();var t=$(w2ui[e].box).parents(".w2ui-layout");t.length>0&&t.attr("name")==o.name&&w2ui[e].resize()}},100),this.trigger($.extend(r,{phase:"after"})),(new Date).getTime()-e},destroy:function(){var e=this.trigger({phase:"before",type:"destroy",target:this.name});if(e.isCancelled===!0)return;return typeof w2ui[this.name]=="undefined"?!1:($(this.box).find("#layout_"+this.name+"_panel_main").length>0&&$(this.box).removeAttr("name").removeClass("w2ui-layout").html(""),delete w2ui[this.name],this.trigger($.extend(e,{phase:"after"})),this.tmp.events&&this.tmp.events.resize&&$(window).off("resize",this.tmp.events.resize),!0)},lock:function(e,n,r){if(t.indexOf(e)==-1){console.log("ERROR: First parameter needs to be the a valid panel name.");return}var i=Array.prototype.slice.call(arguments
,0);i[0]="#layout_"+this.name+"_panel_"+e,w2utils.lock.apply(window,i)},unlock:function(e){if(t.indexOf(e)==-1){console.log("ERROR: First parameter needs to be the a valid panel name.");return}var n="#layout_"+this.name+"_panel_"+e;w2utils.unlock(n)}},$.extend(e.prototype,w2utils.event),w2obj.layout=e}();var w2popup={};(function(){$.fn.w2popup=function(e,t){typeof e=="undefined"&&(t={},e="open"),$.isPlainObject(e)&&(t=e,e="open"),e=e.toLowerCase(),e==="load"&&typeof t=="string"&&(t=$.extend({url:t},arguments.length>2?arguments[2]:{})),e==="open"&&t.url!=null&&(e="load"),t=t||{};var n={};return $(this).length>0&&($(this).find("div[rel=title], div[rel=body], div[rel=buttons]").length>0?($(this).find("div[rel=title]").length>0&&(n.title=$(this).find("div[rel=title]").html()),$(this).find("div[rel=body]").length>0&&(n.body=$(this).find("div[rel=body]").html(),n.style=$(this).find("div[rel=body]")[0].style.cssText),$(this).find("div[rel=buttons]").length>0&&(n.buttons=$(this).find("div[rel=buttons]").html())):(n.title="&nbsp;",n.body=$(this).html()),parseInt($(this).css("width"))!=0&&(n.width=parseInt($(this).css("width"))),parseInt($(this).css("height"))!=0&&(n.height=parseInt($(this).css("height")))),w2popup[e]($.extend({},n,t))},w2popup={defaults:{title:"",body:"",buttons:"",style:"",color:"#000",opacity:.4,speed:.3,modal:!1,maximized:!1,keyboard:!0,width:500,height:300,showClose:!0,showMax:!1,transition:null},status:"closed",handlers:[],onOpen:null,onClose:null,onMax:null,onMin:null,onToggle:null,onKeydown:null,open:function(e){function d(e){e||(e=window.event),window.addEventListener||window.document.attachEvent("onselectstart",function(){return!1}),w2popup.status="moving",p.resizing=!0,p.x=e.screenX,p.y=e.screenY,p.pos_x=$("#w2ui-popup").position().left,p.pos_y=$("#w2ui-popup").position().top,w2popup.lock({opacity:0}),$(document).on("mousemove",p.mvMove),$(document).on("mouseup",p.mvStop),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0;if(!e.preventDefault)return!1;e.preventDefault()}function v(e){if(p.resizing!=1)return;e||(e=window.event),p.div_x=e.screenX-p.x,p.div_y=e.screenY-p.y,$("#w2ui-popup").css({"-webkit-transition":"none","-webkit-transform":"translate3d("+p.div_x+"px, "+p.div_y+"px, 0px)","-moz-transition":"none","-moz-transform":"translate("+p.div_x+"px, "+p.div_y+"px)","-ms-transition":"none","-ms-transform":"translate("+p.div_x+"px, "+p.div_y+"px)","-o-transition":"none","-o-transform":"translate("+p.div_x+"px, "+p.div_y+"px)"})}function m(e){if(p.resizing!=1)return;e||(e=window.event),w2popup.status="open",p.div_x=e.screenX-p.x,p.div_y=e.screenY-p.y,$("#w2ui-popup").css({left:p.pos_x+p.div_x+"px",top:p.pos_y+p.div_y+"px","-webkit-transition":"none","-webkit-transform":"translate3d(0px, 0px, 0px)","-moz-transition":"none","-moz-transform":"translate(0px, 0px)","-ms-transition":"none","-ms-transform":"translate(0px, 0px)","-o-transition":"none","-o-transform":"translate(0px, 0px)"}),p.resizing=!1,$(document).off("mousemove",p.mvMove),$(document).off("mouseup",p.mvStop),w2popup.unlock()}var t=this;if(w2popup.status=="closing"){setTimeout(function(){t.open.call(t,e)},100);return}var n=$("#w2ui-popup").data("options"),e=$.extend({},this.defaults,n,{title:"",body:"",buttons:""},e,{maximized:!1});setTimeout(function(){$("#w2ui-popup").data("options",e)},100),$("#w2ui-popup").length==0&&(w2popup.handlers=[],w2popup.onMax=null,w2popup.onMin=null,w2popup.onToggle=null,w2popup.onOpen=null,w2popup.onClose=null,w2popup.onKeydown=null),e.onOpen&&(w2popup.onOpen=e.onOpen),e.onClose&&(w2popup.onClose=e.onClose),e.onMax&&(w2popup.onMax=e.onMax),e.onMin&&(w2popup.onMin=e.onMin),e.onToggle&&(w2popup.onToggle=e.onToggle),e.onKeydown&&(w2popup.onKeydown=e.onKeydown);if(window.innerHeight==undefined){var r=document.documentElement.offsetWidth,i=document.documentElement.offsetHeight;w2utils.engine==="IE7"&&(r+=21,i+=4)}else var r=window.innerWidth,i=window.innerHeight;parseInt(r)-10<parseInt(e.width)&&(e.width=parseInt(r)-10),parseInt(i)-10<parseInt(e.height)&&(e.height=parseInt(i)-10);var s=parseInt((parseInt(i)-parseInt(e.height))/2*.6),o=parseInt((parseInt(r)-parseInt(e.width))/2);if($("#w2ui-popup").length==0){var u=this.trigger({phase:"before",type:"open",target:"popup",options:e,present:!1});if(u.isCancelled===!0)return;w2popup.status="opening",w2popup.lockScreen(e);var a="";e.showClose&&(a+='<div class="w2ui-msg-button w2ui-msg-close" onmousedown="event.stopPropagation()" onclick="w2popup.close()">Close</div>'),e.showMax&&(a+='<div class="w2ui-msg-button w2ui-msg-max" onmousedown="event.stopPropagation()" onclick="w2popup.toggle()">Max</div>');var f='<div id="w2ui-popup" class="w2ui-popup" style="opacity: 0; left: '+o+"px; top: "+s+"px;"+"     width: "+parseInt(e.width)+"px; height: "+parseInt(e.height)+"px; "+'    -webkit-transform: scale(0.8); -moz-transform: scale(0.8); -ms-transform: scale(0.8); -o-transform: scale(0.8); "'+">"+'   <div class="w2ui-msg-title" style="'+(e.title==""?"display: none":"")+'">'+a+e.title+"</div>"+'   <div class="w2ui-box1" style="'+(e.title==""?"top: 0px !important;":"")+(e.buttons==""?"bottom: 0px !important;":"")+'">'+'       <div class="w2ui-msg-body'+(!e.title!=""?" w2ui-msg-no-title":"")+(!e.buttons!=""?" w2ui-msg-no-buttons":"")+'" style="'+e.style+'">'+e.body+"</div>"+"   </div>"+'   <div class="w2ui-box2" style="'+(e.title==""?"top: 0px !important;":"")+(e.buttons==""?"bottom: 0px !important;":"")+'">'+'       <div class="w2ui-msg-body'+(!e.title!=""?" w2ui-msg-no-title":"")+(!e.buttons!=""?" w2ui-msg-no-buttons":"")+'" style="'+e.style+'"></div>'+"       </div>"+'   <div class="w2ui-msg-buttons" style="'+(e.buttons==""?"display: none":"")+'">'+e.buttons+"</div>"+"</div>";$("body").append(f),setTimeout(function(){$("#w2ui-popup .w2ui-box2").hide(),$("#w2ui-popup").css({"-webkit-transition":e.speed+"s opacity, "+e.speed+"s -webkit-transform","-webkit-transform":"scale(1)","-moz-transition":e.speed+"s opacity, "+e.speed+"s -moz-transform","-moz-transform":"scale(1)","-ms-transition":e.speed+"s opacity, "+e.speed+"s -ms-transform","-ms-transform":"scale(1)","-o-transition":e.speed+"s opacity, "+e.speed+"s -o-transform","-o-transform":"scale(1)",opacity:"1"})},1),setTimeout(function(){$("#w2ui-popup").css({"-webkit-transform":"","-moz-transform":"","-ms-transform":"","-o-transform":""}),w2popup.status="open",setTimeout(function(){t.trigger($.extend(u,{phase:"after"}))},100)},e.speed*1e3)}else{var u=this.trigger({phase:"before",type:"open",target:"popup",options:e,present:!0});if(u.isCancelled===!0)return;w2popup.status="opening",(typeof n=="undefined"||n["width"]!=e["width"]||n["height"]!=e["height"])&&w2popup.resize(e.width,e.height),typeof n!="undefined"&&(e.prevSize=e.width+":"+e.height,e.maximized=n.maximized);var l=$("#w2ui-popup .w2ui-box2 > .w2ui-msg-body").html(e.body);l.length>0&&(l[0].style.cssText=e.style),e.buttons!=""?($("#w2ui-popup .w2ui-msg-buttons").show().html(e.buttons),$("#w2ui-popup .w2ui-msg-body").removeClass("w2ui-msg-no-buttons"),$("#w2ui-popup .w2ui-box1, #w2ui-popup .w2ui-box2").css("bottom","")):($("#w2ui-popup .w2ui-msg-buttons").hide().html(""),$("#w2ui-popup .w2ui-msg-body").addClass("w2ui-msg-no-buttons"),$("#w2ui-popup .w2ui-box1, #w2ui-popup .w2ui-box2").css("bottom","0px")),e.title!=""?($("#w2ui-popup .w2ui-msg-title").show().html((e.showClose?'<div class="w2ui-msg-button w2ui-msg-close" onmousedown="event.stopPropagation()" onclick="w2popup.close()">Close</div>':"")+(e.showMax?'<div class="w2ui-msg-button w2ui-msg-max" onmousedown="event.stopPropagation()" onclick="w2popup.toggle()">Max</div>':"")+e.title),$("#w2ui-popup .w2ui-msg-body").removeClass("w2ui-msg-no-title"),$("#w2ui-popup .w2ui-box1, #w2ui-popup .w2ui-box2").css("top","")):($("#w2ui-popup .w2ui-msg-title").hide().html(""),$("#w2ui-popup .w2ui-msg-body").addClass("w2ui-msg-no-title"),$("#w2ui-popup .w2ui-box1, #w2ui-popup .w2ui-box2").css("top","0px"));var c=$("#w2ui-popup .w2ui-box1")[0],h=$("#w2ui-popup .w2ui-box2")[0];w2utils.transition(c,h,e.transition),h.className="w2ui-box1",c.className="w2ui-box2",$(h).addClass("w2ui-current-box"),$("#w2ui-popup").data("prev-size",null),setTimeout(function(){w2popup.status="open",t.trigger($.extend(u,{phase:"after"}))},100)}e._last_w2ui_name=w2utils.keyboard.active(),w2utils.keyboard.active(null),e.keyboard&&$(document).on("keydown",this.keydown);var p={resizing:!1,mvMove:v,mvStop:m};return $("#w2ui-popup .w2ui-msg-title").on("mousedown",function(e){d(e)}),this},keydown:function(e){var t=$("#w2ui-popup").data("options");if(!t||!t.keyboard)return;var n=w2popup.trigger({phase:"before",type:"keydown",target:"popup",options:t,originalEvent:e});if(n.isCancelled===!0)return;switch(e.keyCode){case 27:e.preventDefault(),$("#w2ui-popup .w2ui-popup-message").length>0?w2popup.message():w2popup.close()}w2popup.trigger($.extend(n,{phase:"after"}))},close:function(e){var t=this,e=$.extend({},$("#w2ui-popup").data("options"),e);if($("#w2ui-popup").length==0)return;var n=this.trigger({phase:"before",type:"close",target:"popup",options:e});if(n.isCancelled===!0)return;w2popup.status="closing",$("#w2ui-popup").css({"-webkit-transition":e.speed+"s opacity, "+e.speed+"s -webkit-transform","-webkit-transform":"scale(0.9)","-moz-transition":e.speed+"s opacity, "+e.speed+"s -moz-transform","-moz-transform":"scale(0.9)","-ms-transition":e.speed+"s opacity, "+e.speed+"s -ms-transform","-ms-transform":"scale(0.9)","-o-transition":e.speed+"s opacity, "+e.speed+"s -o-transform","-o-transform":"scale(0.9)",opacity:"0"}),w2popup.unlockScreen(e),setTimeout(function(){$("#w2ui-popup").remove(),w2popup.status="closed",t.trigger($.extend(n,{phase:"after"}))},e.speed*1e3),w2utils.keyboard.active(e._last_w2ui_name),e.keyboard&&$(document).off("keydown",this.keydown)},toggle:function(){var e=this,t=$("#w2ui-popup").data("options"),n=this.trigger({phase:"before",type:"toggle",target:"popup",options:t});if(n.isCancelled===!0)return;t.maximized===!0?w2popup.min():w2popup.max(),setTimeout(function(){e.trigger($.extend(n,{phase:"after"}))},t.speed*1e3+50)},max:function(){var e=this,t=$("#w2ui-popup").data("options");if(t.maximized===!0)return;var n=this.trigger({phase:"before",type:"max",target:"popup",options:t});if(n.isCancelled===!0)return;w2popup.status="resizing",t.prevSize=$("#w2ui-popup").css("width")+":"+$("#w2ui-popup").css("height"),w2popup.resize(1e4,1e4,function(){w2popup.status="open",t.maximized=!0,e.trigger($.extend(n,{phase:"after"}))})},min:function(){var e=this,t=$("#w2ui-popup").data("options");if(t.maximized!==!0)return;var n=t.prevSize.split(":"),r=this.trigger({phase:"before",type:"min",target:"popup",options:t});if(r.isCancelled===!0)return;w2popup.status="resizing",w2popup.resize(n[0],n[1],function(){w2popup.status="open",t.maximized=!1,t.prevSize=null,e.trigger($.extend(r,{phase:"after"}))})},get:function(){return $("#w2ui-popup").data("options")},set:function(e){w2popup.open(e)},clear:function(){$("#w2ui-popup .w2ui-msg-title").html(""),$("#w2ui-popup .w2ui-msg-body").html(""),$("#w2ui-popup .w2ui-msg-buttons").html("")},reset:function(){w2popup.open(w2popup.defaults)},load:function(e){function s(t,n){delete e.url,$("body").append('<div id="w2ui-tmp" style="display: none">'+t+"</div>"),typeof n!="undefined"&&$("#w2ui-tmp #"+n).length>0?$("#w2ui-tmp #"+n).w2popup(e):$("#w2ui-tmp > div").w2popup(e);if($("#w2ui-tmp > style").length>0){var r=$("<div>").append($("#w2ui-tmp > style").clone()).html();$("#w2ui-popup #div-style").length==0&&$("#w2ui-popup").append('<div id="div-style" style="position: absolute; left: -100; width: 1px"></div>'),$("#w2ui-popup #div-style").html(r)}$("#w2ui-tmp").remove()}w2popup.status="loading";if(String(e.url)=="undefined"){console.log("ERROR: The url parameter is empty.");return}var t=String(e.url).split("#"),n=t[0],r=t[1];String(e)=="undefined"&&(e={});var i=$("#w2ui-popup").data(n);typeof i!="undefined"&&i!=null?s(i,r):$.get(n,function(e,t,i){s(i.responseText,r),$("#w2ui-popup").data(n,i.responseText)})},message:function(e){$().w2tag(),e||(e={width:200,height:100}),parseInt(e.width)<10&&(e.width=10),parseInt(e.height)<10&&(e.height=10),typeof e.hideOnClick=="undefined"&&(e.hideOnClick=!1);var t=$("#w2ui-popup").data("options")||{};if(typeof e.width=="undefined"||e.width>t.width-10)e.width=t.width-10;if(typeof e.height=="undefined"||e.height>t.height-40)e.height=t.height-40;var n=$("#w2ui-popup .w2ui-msg-title"),r=parseInt($("#w2ui-popup").width()),i=$("#w2ui-popup .w2ui-popup-message").length;if($.trim(e.html)==""){$("#w2ui-popup #w2ui-message"+(i-1)).css("z-Index",250);var e=$("#w2ui-popup #w2ui-message"+(i-1)).data("options")||{};$("#w2ui-popup #w2ui-message"+(i-1)).remove(),typeof e.onClose=="function"&&e.onClose(),i==1?w2popup.unlock():$("#w2ui-popup #w2ui-message"+(i-2)).show()}else{$("#w2ui-popup .w2ui-popup-message").hide(),$("#w2ui-popup .w2ui-box1").before('<div id="w2ui-message'+i+'" class="w2ui-popup-message" style="display: none; '+(n.length==0?"top: 0px;":"top: "+w2utils.getSize(n,"height")+"px;")+(typeof e.width!="undefined"?"width: "+e.width+"px; left: "+(r-e.width)/2+"px;":"left: 10px; right: 10px;")+(typeof e.height!="undefined"?"height: "+e.height+"px;":"bottom: 6px;")+'-webkit-transition: .3s; -moz-transition: .3s; -ms-transition: .3s; -o-transition: .3s;"'+(e.hideOnClick===!0?'onclick="w2popup.message();"':"")+">"+"</div>"),$("#w2ui-popup #w2ui-message"+i).data("options",e);var s=$("#w2ui-popup #w2ui-message"+i).css("display");$("#w2ui-popup #w2ui-message"+i).css({"-webkit-transform":s=="none"?"translateY(-"+e.height+"px)":"translateY(0px)","-moz-transform":s=="none"?"translateY(-"+e.height+"px)":"translateY(0px)","-ms-transform":s=="none"?"translateY(-"+e.height+"px)":"translateY(0px)","-o-transform":s=="none"?"translateY(-"+e.height+"px)":"translateY(0px)"}),s=="none"&&($("#w2ui-popup #w2ui-message"+i).show().html(e.html),setTimeout(function(){$("#w2ui-popup #w2ui-message"+i).css({"-webkit-transform":s=="none"?"translateY(0px)":"translateY(-"+e.height+"px)","-moz-transform":s=="none"?"translateY(0px)":"translateY(-"+e.height+"px)","-ms-transform":s=="none"?"translateY(0px)":"translateY(-"+e.height+"px)","-o-transform":s=="none"?"translateY(0px)":"translateY(-"+e.height+"px)"})},1),setTimeout(function(){$("#w2ui-popup #w2ui-message"+i).css({"-webkit-transition":"0s","-moz-transition":"0s","-ms-transition":"0s","-o-transition":"0s","z-Index":1500}),i==0&&w2popup.lock(),typeof e.onOpen=="function"&&e.onOpen()},300))}},lock:function(e,t){var n=Array.prototype.slice.call(arguments,0);n.unshift($("#w2ui-popup")),w2utils.lock.apply(window,n)},unlock:function(){w2utils.unlock($("#w2ui-popup"))},lockScreen:function(e){return $("#w2ui-lock").length>0?!1:(typeof e=="undefined"&&(e=$("#w2ui-popup").data("options")),typeof e=="undefined"&&(e={}),e=$.extend({},w2popup.defaults,e),$("body").append('<div id="w2ui-lock"     onmousewheel="if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true; if (event.preventDefault) event.preventDefault(); else return false;"    style="position: '+(w2utils.engine=="IE5"?"absolute":"fixed")+"; z-Index: 1199; left: 0px; top: 0px; "+"           padding: 0px; margin: 0px; background-color: "+e.color+'; width: 100%; height: 100%; opacity: 0;"></div>'),setTimeout(function(){$("#w2ui-lock").css({"-webkit-transition":e.speed+"s opacity","-moz-transition":e.speed+"s opacity","-ms-transition":e.speed+"s opacity","-o-transition":e.speed+"s opacity",opacity:e.opacity})},1),e.modal==1?($("#w2ui-lock").on("mousedown",function(){$("#w2ui-lock").css({"-webkit-transition":".1s","-moz-transition":".1s","-ms-transition":".1s","-o-transition":".1s",opacity:"0.6"})}),$("#w2ui-lock").on("mouseup",function(){setTimeout(function(){$("#w2ui-lock").css({"-webkit-transition":".1s","-moz-transition":".1s","-ms-transition":".1s","-o-transition":".1s",opacity:e.opacity})},100)})):$("#w2ui-lock").on("mouseup",function(){w2popup.close()}),!0)},unlockScreen:function(e){return $("#w2ui-lock").length==0?!1:(typeof e=="undefined"&&(e=$("#w2ui-popup").data("options")),typeof e=="undefined"&&(e={}),e=$.extend({},w2popup.defaults,e),$("#w2ui-lock").css({"-webkit-transition":e.speed+"s opacity","-moz-transition":e.speed+"s opacity","-ms-transition":e.speed+"s opacity","-o-transition":e.speed+"s opacity",opacity:0}),setTimeout(function(){$("#w2ui-lock").remove()},e.speed*1e3),!0)},resize:function(e,t,n){var r=$("#w2ui-popup").data("options");parseInt($(window).width())-10<parseInt(e)&&(e=parseInt($(window).width())-10),parseInt($(window).height())-10<parseInt(t)&&(t=parseInt($(window).height())-10);var i=(parseInt($(window).height())-parseInt(t))/2*.8,s=(parseInt($(window).width())-parseInt(e))/2;$("#w2ui-popup").css({"-webkit-transition":r.speed+"s width, "+r.speed+"s height, "+r.speed+"s left, "+r.speed+"s top","-moz-transition":r.speed+"s width, "+r.speed+"s height, "+r.speed+"s left, "+r.speed+"s top","-ms-transition":r.speed+"s width, "+r.speed+"s height, "+r.speed+"s left, "+r.speed+"s top","-o-transition":r.speed+"s width, "+r.speed+"s height, "+r.speed+"s left, "+r.speed+"s top",top:i,left:s,width:e,height:t}),setTimeout(function(){r.width=e,r.height=t,typeof n=="function"&&n()},r.speed*1e3+50)}},$.extend(w2popup,w2utils.event)})();var w2alert=function(e,t,n){t==null&&(t=w2utils.lang("Notification")),$("#w2ui-popup").length>0&&w2popup.status!="closing"?w2popup.message({width:400,height:170,html:'<div style="position: absolute; top: 0px; left: 0px; right: 0px; bottom: 45px; overflow: auto">        <div class="w2ui-centered" style="font-size: 13px;">'+e+"</div>"+"</div>"+'<div style="position: absolute; bottom: 7px; left: 0px; right: 0px; text-align: center; padding: 5px">'+'        <button onclick="w2popup.message();" class="w2ui-popup-btn btn">'+w2utils.lang("Ok")+"</button>"+"</div>",onClose:function(){typeof n=="function"&&n()}}):w2popup.open({width:450,height:220,showMax:!1,showClose:!1,title:t,body:'<div class="w2ui-centered" style="font-size: 13px;">'+e+"</div>",buttons:'<button onclick="w2popup.close();" class="w2ui-popup-btn btn">'+w2utils.lang("Ok")+"</button>",onClose:function(){typeof n=="function"&&n()}})},w2confirm=function(e,t,n){var r={},i={msg:"",title:w2utils.lang("Confirmation"),width:$("#w2ui-popup").length>0?400:450,height:$("#w2ui-popup").length>0?170:220,yes_text:"Yes",yes_class:"",yes_style:"",yes_callBack:null,no_text:"No",no_class:"",no_style:"",no_callBack:null,callBack:null};return arguments.length==1&&typeof e=="object"?$.extend(r,i,e):typeof t=="function"?$.extend(r,i,{msg:e,callBack:t}):$.extend(r,i,{msg:e,title:t,callBack:n}),$("#w2ui-popup").length>0&&w2popup.status!="closing"?(r.width>w2popup.get().width&&(r.width=w2popup.get().width),r.height>w2popup.get().height-50&&(r.height=w2popup.get().height-50),w2popup.message({width:r.width,height:r.height,html:'<div style="position: absolute; top: 0px; left: 0px; right: 0px; bottom: 40px; overflow: auto">        <div class="w2ui-centered" style="font-size: 13px;">'+r.msg+"</div>"+"</div>"+'<div style="position: absolute; bottom: 7px; left: 0px; right: 0px; text-align: center; padding: 5px">'+'        <button id="Yes" class="w2ui-popup-btn btn '+r.yes_class+'" style="'+r.yes_style+'">'+w2utils.lang(r.yes_text)+"</button>"+'        <button id="No" class="w2ui-popup-btn btn '+r.no_class+'" style="'+r.no_style+'">'+w2utils.lang(r.no_text)+"</button>"+"</div>",onOpen:function(){$("#w2ui-popup .w2ui-popup-message .btn").on("click",function(e){w2popup.message(),typeof r.callBack=="function"&&r.callBack(e.target.id),e.target.id=="Yes"&&typeof r.yes_callBack=="function"&&r.yes_callBack(),e.target.id=="No"&&typeof r.no_callBack=="function"&&r.no_callBack()})},onKeydown:function(e){switch(e.originalEvent.keyCode){case 13:typeof r.callBack=="function"&&r.callBack("Yes"),typeof r.yes_callBack=="function"&&r.yes_callBack(),w2popup.message();break;case 27:typeof r.callBack=="function"&&r.callBack("No"),typeof r.no_callBack=="function"&&r.no_callBack(),w2popup.message()}}})):(w2utils.isInt(r.height)||(r.height=r.height+50),w2popup.open({width:r.width,height:r.height,title:r.title,modal:!0,showClose:!1,body:'<div class="w2ui-centered" style="font-size: 13px;">'+r.msg+"</div>",buttons:'<button id="Yes" class="w2ui-popup-btn btn '+r.yes_class+'" style="'+r.yes_style+'">'+w2utils.lang(r.yes_text)+"</button>"+'<button id="No" class="w2ui-popup-btn btn '+r.no_class+'" style="'+r.no_style+'">'+w2utils.lang(r.no_text)+"</button>",onOpen:function(e){e.onComplete=function(){$("#w2ui-popup .w2ui-popup-btn").on("click",function(e){w2popup.close(),typeof r.callBack=="function"&&r.callBack(e.target.id),e.target.id=="Yes"&&typeof r.yes_callBack=="function"&&r.yes_callBack(),e.target.id=="No"&&typeof r.no_callBack=="function"&&r.no_callBack()})}},onKeydown:function(e){switch(e.originalEvent.keyCode){case 13:typeof r.callBack=="function"&&r.callBack("Yes"),typeof r.yes_callBack=="function"&&r.yes_callBack(),w2popup.close();break;case 27:typeof r.callBack=="function"&&r.callBack("No"),typeof r.no_callBack=="function"&&r.no_callBack(),w2popup.close()}}})),{yes:function(e){return r.yes_callBack=e,this},no:function(e){return r.no_callBack=e,this}}};(function(){var e=function(e){this.box=null,this.name=null,this.active=null,this.tabs=[],this.routeData={},this.right="",this.style="",this.onClick=null,this.onClose=null,this.onRender=null,this.onRefresh=null,this.onResize=null,this.onDestroy=null,$.extend(this,{handlers:[]}),$.extend(!0,this,w2obj.tabs,e)};$.fn.w2tabs=function(t){if(typeof t=="object"||!t){if(!w2utils.checkName(t,"w2tabs"))return;var n=t.tabs||[],r=new e(t);for(var i=0;i<n.length;i++)r.tabs[i]=$.extend({},e.prototype.tab,n[i]);return $(this).length!==0&&r.render($(this)[0]),w2ui[r.name]=r,r}if(w2ui[$(this).attr("name")]){var s=w2ui[$(this).attr("name")];return s[t].apply(s,Array.prototype.slice.call(arguments,1)),this}return console.log("ERROR: Method "+t+" does not exist on jQuery.w2tabs"),undefined},e.prototype={tab:{id:null,text:"",route:null,hidden:!1,disabled:!1,closable:!1,hint:"",onClick:null,onRefresh:null,onClose:null},add:function(e){return this.insert(null,e)},insert:function(t,n){$.isArray(n)||(n=[n]);for(var r=0;r<n.length;r++){if(typeof n[r].id=="undefined"){console.log('ERROR: The parameter "id" is required but not supplied. (obj: '+this.name+")");return}if(!w2utils.checkUniqueId(n[r].id,this.tabs,"tabs",this.name))return;var i=$.extend({},e.prototype.tab,n[r]);if(t===null||typeof t=="undefined")this.tabs.push(i);else{var s=this.get(t,!0);this.tabs=this.tabs.slice(0,s).concat([i],this.tabs.slice(s))}this.refresh(n[r].id)}},remove:function(){var e=0;for(var t=0;t<arguments.length;t++){var n=this.get(arguments[t]);if(!n)return!1;e++,this.tabs.splice(this.get(n.id,!0),1),$(this.box).find("#tabs_"+this.name+"_tab_"+w2utils.escapeId(n.id)).remove()}return e},select:function(e){return this.active==e||this.get(e)===null?!1:(this.active=e,this.refresh(),!0)},set:function(e,t){var n=this.get(e,!0);return n===null?!1:($.extend(this.tabs[n],t),this.refresh(e),!0)},get:function(e,t){if(arguments.length===0){var n=[];for(var r=0;r<this.tabs.length;r++)this.tabs[r].id!=null&&n.push(this.tabs[r].id);return n}for(var i=0;i<this.tabs.length;i++)if(this.tabs[i].id==e)return t===!0?i:this.tabs[i];return null},show:function(){var e=this,t=0,n=[];for(var r=0;r<arguments.length;r++){var i=this.get(arguments[r]);if(!i||i.hidden===!1)continue;t++,i.hidden=!1,n.push(i.id)}return setTimeout(function(){for(var t in n)e.refresh(n[t])},15),t},hide:function(){var e=this,t=0,n=[];for(var r=0;r<arguments.length;r++){var i=this.get(arguments[r]);if(!i||i.hidden===!0)continue;t++,i.hidden=!0,n.push(i.id)}return setTimeout(function(){for(var t in n)e.refresh(n[t])},15),t},enable:function(){var e=this,t=0,n=[];for(var r=0;r<arguments.length;r++){var i=this.get(arguments[r]);if(!i||i.disabled===!1)continue;t++,i.disabled=!1,n.push(i.id)}return setTimeout(function(){for(var t in n)e.refresh(n[t])},15),t},disable:function(){var e=this,t=0,n=[];for(var r=0;r<arguments.length;r++){var i=this.get(arguments[r]);if(!i||i.disabled===!0)continue;t++,i.disabled=!0,n.push(i.id)}return setTimeout(function(){for(var t in n)e.refresh(n[t])},15),t},refresh:function(e){var t=(new Date).getTime(),n=this.trigger({phase:"before",type:"refresh",target:typeof e!="undefined"?e:this.name,object:this.get(e)});if(n.isCancelled===!0)return;if(typeof e=="undefined")for(var r=0;r<this.tabs.length;r++)this.refresh(this.tabs[r].id);else{var i=this.get(e);if(i===null)return!1;typeof i.caption!="undefined"&&(i.text=i.caption);var s=$(this.box).find("#tabs_"+this.name+"_tab_"+w2utils.escapeId(i.id)),o=(i.closable?'<div class="w2ui-tab-close" onclick="w2ui[\''+this.name+"'].animateClose('"+i.id+"', event);\"></div>":"")+'    <div class="w2ui-tab'+(this.active===i.id?" active":"")+(i.closable?" closable":"")+'" '+'        title="'+(typeof i.hint!="undefined"?i.hint:"")+'"'+"        onclick=\"w2ui['"+this.name+"'].click('"+i.id+"', event);\">"+i.text+"</div>";if(s.length===0){var u="";i.hidden&&(u+="display: none;"),i.disabled&&(u+="opacity: 0.2; -moz-opacity: 0.2; -webkit-opacity: 0.2; -o-opacity: 0.2; filter:alpha(opacity=20);");var a='<td id="tabs_'+this.name+"_tab_"+i.id+'" style="'+u+'" valign="middle">'+o+"</td>";this.get(e,!0)!==this.tabs.length-1&&$(this.box).find("#tabs_"+this.name+"_tab_"+w2utils.escapeId(this.tabs[parseInt(this.get(e,!0))+1].id)).length>0?$(this.box).find("#tabs_"+this.name+"_tab_"+w2utils.escapeId(this.tabs[parseInt(this.get(e,!0))+1].id)).before(a):$(this.box).find("#tabs_"+this.name+"_right").before(a)}else s.html(o),i.hidden?s.css("display","none"):s.css("display",""),i.disabled?s.css({opacity:"0.2","-moz-opacity":"0.2","-webkit-opacity":"0.2","-o-opacity":"0.2",filter:"alpha(opacity=20)"}):s.css({opacity:"1","-moz-opacity":"1","-webkit-opacity":"1","-o-opacity":"1",filter:"alpha(opacity=100)"})}return $("#tabs_"+this.name+"_right").html(this.right),this.trigger($.extend(n,{phase:"after"})),(new Date).getTime()-t},render:function(e){var t=(new Date).getTime(),n=this.trigger({phase:"before",type:"render",target:this.name,box:e});if(n.isCancelled===!0)return;typeof e!="undefined"&&e!==null&&($(this.box).find("> table #tabs_"+this.name+"_right").length>0&&$(this.box).removeAttr("name").removeClass("w2ui-reset w2ui-tabs").html(""),this.box=e);if(!this.box)return!1;var r='<table cellspacing="0" cellpadding="1" width="100%">    <tr><td width="100%" id="tabs_'+this.name+'_right" align="right">'+this.right+"</td></tr>"+"</table>";return $(this.box).attr("name",this.name).addClass("w2ui-reset w2ui-tabs").html(r),$(this.box).length>0&&($(this.box)[0].style.cssText+=this.style),this.trigger($.extend(n,{phase:"after"})),this.refresh(),(new Date).getTime()-t},resize:function(){var e=(new Date).getTime(),t=this.trigger({phase:"before",type:"resize",target:this.name});if(t.isCancelled===!0)return;return this.trigger($.extend(t,{phase:"after"})),(new Date).getTime()-e},destroy:function(){var e=this.trigger({phase:"before",type:"destroy",target:this.name});if(e.isCancelled===!0)return;$(this.box).find("> table #tabs_"+this.name+"_right").length>0&&$(this.box).removeAttr("name").removeClass("w2ui-reset w2ui-tabs").html(""),delete w2ui[this.name],this.trigger($.extend(e,{phase:"after"}))},click:function(e,t){var n=this.get(e);if(n===null||n.disabled)return!1;var r=this.trigger({phase:"before",type:"click",target:e,tab:n,object:n,originalEvent:t});if(r.isCancelled===!0)return;$(this.box).find("#tabs_"+this.name+"_tab_"+w2utils.escapeId(this.active)+" .w2ui-tab").removeClass("active"),this.active=n.id;if(n.route){var i=String("/"+n.route).replace(/\/{2,}/g,"/"),s=w2utils.parseRoute(i);if(s.keys.length>0)for(var o=0;o<s.keys.length;o++){if(this.routeData[s.keys[o].name]==null)continue;i=i.replace(new RegExp(":"+s.keys[o].name,"g"),this.routeData[s.keys[o].name])}setTimeout(function(){window.location.hash=i},1)}this.trigger($.extend(r,{phase:"after"})),this.refresh(e)},animateClose:function(e,t){var n=this.get(e);if(n===null||n.disabled)return!1;var r=this.trigger({phase:"before",type:"close",target:e,object:this.get(e),originalEvent:t});if(r.isCancelled===!0)return;var i=this;$(this.box).find("#tabs_"+this.name+"_tab_"+w2utils.escapeId(n.id)).css({"-webkit-transition":".2s","-moz-transition":"2s","-ms-transition":".2s","-o-transition":".2s",opacity:"0"}),setTimeout(function(){var e=$(i.box).find("#tabs_"+i.name+"_tab_"+w2utils.escapeId(n.id)).width();$(i.box).find("#tabs_"+i.name+"_tab_"+w2utils.escapeId(n.id)).html('<div style="width: '+e+'px; -webkit-transition: .2s; -moz-transition: .2s; -ms-transition: .2s; -o-transition: .2s"></div>'),setTimeout(function(){$(i.box).find("#tabs_"+i.name+"_tab_"+w2utils.escapeId(n.id)).find(":first-child").css({width:"0px"})},50)},200),setTimeout(function(){i.remove(e)},450),this.trigger($.extend(r,{phase:"after"})),this.refresh()},animateInsert:function(e,t){if(this.get(e)===null)return;if(!$.isPlainObject(t))return;if(!w2utils.checkUniqueId(t.id,this.tabs,"tabs",this.name))return;var n=$(this.box).find("#tabs_"+this.name+"_tab_"+w2utils.escapeId(t.id));if(n.length!==0)return;typeof t.caption!="undefined"&&(t.text=t.caption);var r='<div id="_tmp_tabs" class="w2ui-reset w2ui-tabs" style="position: absolute; top: -1000px;"><table cellspacing="0" cellpadding="1" width="100%"><tr><td id="_tmp_simple_tab" style="" valign="middle">'+(t.closable?'<div class="w2ui-tab-close"></div>':"")+'    <div class="w2ui-tab '+(this.active===t.id?"active":"")+'">'+t.text+"</div>"+"</td></tr></table>"+"</div>";$("body").append(r);var i='<div style="width: 1px; -webkit-transition: 0.2s; -moz-transition: 0.2s; -ms-transition: 0.2s; -o-transition: 0.2s;">&nbsp;</div>',s="";t.hidden&&(s+="display: none;"),t.disabled&&(s+="opacity: 0.2; -moz-opacity: 0.2; -webkit-opacity: 0.2; -o-opacity: 0.2; filter:alpha(opacity=20);");var o='<td id="tabs_'+this.name+"_tab_"+t.id+'" style="'+s+'" valign="middle">'+i+"</td>";this.get(e,!0)!==this.tabs.length&&$(this.box).find("#tabs_"+this.name+"_tab_"+w2utils.escapeId(this.tabs[parseInt(this.get(e,!0))].id)).length>0?$(this.box).find("#tabs_"+this.name+"_tab_"+w2utils.escapeId(this.tabs[parseInt(this.get(e,!0))].id)).before(o):$(this.box).find("#tabs_"+this.name+"_right").before(o);var u=this;setTimeout(function(){var e=$("#_tmp_simple_tab").width();$("#_tmp_tabs").remove(),$("#tabs_"+u.name+"_tab_"+w2utils.escapeId(t.id)+" > div").css("width",e+"px")},1),setTimeout(function(){u.insert(e,t)},200)}},$.extend(e.prototype,w2utils.event),w2obj.tabs=e})(),function(){var e=function(e){this.box=null,this.name=null,this.routeData={},this.items=[],this.right="",this.onClick=null,this.onRender=null,this.onRefresh=null,this.onResize=null,this.onDestroy=null,$.extend(!0,this,w2obj.toolbar,e)};$.fn.w2toolbar=function(t){if(typeof t=="object"||!t){if(!w2utils.checkName(t,"w2toolbar"))return;var n=t.items||[],r=new e(t);$.extend(r,{items:[],handlers:[]});for(var i=0;i<n.length;i++)r.items[i]=$.extend({},e.prototype.item,n[i]);return $(this).length!==0&&r.render($(this)[0]),w2ui[r.name]=r,r}if(w2ui[$(this).attr("name")]){var s=w2ui[$(this).attr("name")];return s[t].apply(s,Array.prototype.slice.call(arguments,1)),this}console.log("ERROR: Method "+t+" does not exist on jQuery.w2toolbar")},e.prototype={item:{id:null,type:"button",text:"",route:null,html:"",img:null,icon:null,count:null,hidden:!1,disabled:!1,checked:!1,arrow:!0,hint:"",group:null,items:null,overlay:{},onClick:null},add:function(e){this.insert(null,e)},insert:function(t,n){$.isArray(n)||(n=[n]);for(var r=0;r<n.length;r++){if(typeof n[r].type=="undefined"){console.log('ERROR: The parameter "type" is required but not supplied in w2toolbar.add() method.');return}if($.inArray(String(n[r].type),["button","check","radio","drop","menu","break","html","spacer"])===-1){console.log('ERROR: The parameter "type" should be one of the following [button, check, radio, drop, menu, break, html, spacer] in w2toolbar.add() method.');return}if(typeof n[r].id=="undefined"){console.log('ERROR: The parameter "id" is required but not supplied in w2toolbar.add() method.');return}if(!w2utils.checkUniqueId(n[r].id,this.items,"toolbar items",this.name))return;var i=$.extend({},e.prototype.item,n[r]);if(t==null)this.items.push(i);else{var s=this.get(t,!0);this.items=this.items.slice(0,s).concat([i],this.items.slice(s))}this.refresh(i.id)}},remove:function(){var e=0;for(var t=0;t<arguments.length;t++){var n=this.get(arguments[t]);if(!n)continue;e++,$(this.box).find("#tb_"+this.name+"_item_"+w2utils.escapeId(n.id)).remove();var r=this.get(n.id,!0);r&&this.items.splice(r,1)}return e},set:function(e,t){var n=this.get(e,!0);return n===null?!1
:($.extend(this.items[n],t),this.refresh(e),!0)},get:function(e,t){if(arguments.length===0){var n=[];for(var r=0;r<this.items.length;r++)this.items[r].id!==null&&n.push(this.items[r].id);return n}for(var i=0;i<this.items.length;i++)if(this.items[i].id===e)return t===!0?i:this.items[i];return null},show:function(){var e=this,t=0,n=[];for(var r=0;r<arguments.length;r++){var i=this.get(arguments[r]);if(!i)continue;t++,i.hidden=!1,n.push(i.id)}return setTimeout(function(){for(var t in n)e.refresh(n[t])},15),t},hide:function(){var e=this,t=0,n=[];for(var r=0;r<arguments.length;r++){var i=this.get(arguments[r]);if(!i)continue;t++,i.hidden=!0,n.push(i.id)}return setTimeout(function(){for(var t in n)e.refresh(n[t])},15),t},enable:function(){var e=this,t=0,n=[];for(var r=0;r<arguments.length;r++){var i=this.get(arguments[r]);if(!i)continue;t++,i.disabled=!1,n.push(i.id)}return setTimeout(function(){for(var t in n)e.refresh(n[t])},15),t},disable:function(){var e=this,t=0,n=[];for(var r=0;r<arguments.length;r++){var i=this.get(arguments[r]);if(!i)continue;t++,i.disabled=!0,n.push(i.id)}return setTimeout(function(){for(var t in n)e.refresh(n[t])},15),t},check:function(){var e=this,t=0,n=[];for(var r=0;r<arguments.length;r++){var i=this.get(arguments[r]);if(!i)continue;t++,i.checked=!0,n.push(i.id)}return setTimeout(function(){for(var t in n)e.refresh(n[t])},15),t},uncheck:function(){var e=this,t=0,n=[];for(var r=0;r<arguments.length;r++){var i=this.get(arguments[r]);if(!i)continue;t++,i.checked=!1,n.push(i.id)}return setTimeout(function(){for(var t in n)e.refresh(n[t])},15),t},render:function(e){var t=(new Date).getTime(),n=this.trigger({phase:"before",type:"render",target:this.name,box:e});if(n.isCancelled===!0)return;e!=null&&($(this.box).find("> table #tb_"+this.name+"_right").length>0&&$(this.box).removeAttr("name").removeClass("w2ui-reset w2ui-toolbar").html(""),this.box=e);if(!this.box)return;var r='<table cellspacing="0" cellpadding="0" width="100%"><tr>';for(var i=0;i<this.items.length;i++){var s=this.items[i];s.id==null&&(s.id="item_"+i);if(s===null)continue;s.type==="spacer"?r+='<td width="100%" id="tb_'+this.name+"_item_"+s.id+'" align="right"></td>':r+='<td id="tb_'+this.name+"_item_"+s.id+'" style="'+(s.hidden?"display: none":"")+'" '+'    class="'+(s.disabled?"disabled":"")+'" valign="middle">'+this.getItemHTML(s)+"</td>"}return r+='<td width="100%" id="tb_'+this.name+'_right" align="right">'+this.right+"</td>",r+="</tr></table>",$(this.box).attr("name",this.name).addClass("w2ui-reset w2ui-toolbar").html(r),$(this.box).length>0&&($(this.box)[0].style.cssText+=this.style),this.trigger($.extend(n,{phase:"after"})),(new Date).getTime()-t},refresh:function(e){var t=(new Date).getTime(),n=this.trigger({phase:"before",type:"refresh",target:typeof e!="undefined"?e:this.name,item:this.get(e)});if(n.isCancelled===!0)return;if(e==null)for(var r=0;r<this.items.length;r++){var i=this.items[r];i.id==null&&(i.id="item_"+r),this.refresh(i.id)}var s=this.get(e);if(s===null)return!1;var o=$(this.box).find("#tb_"+this.name+"_item_"+w2utils.escapeId(s.id)),u=this.getItemHTML(s);return o.length===0?(s.type==="spacer"?u='<td width="100%" id="tb_'+this.name+"_item_"+s.id+'" align="right"></td>':u='<td id="tb_'+this.name+"_item_"+s.id+'" style="'+(s.hidden?"display: none":"")+'" '+'    class="'+(s.disabled?"disabled":"")+'" valign="middle">'+u+"</td>",this.get(e,!0)===this.items.length-1?$(this.box).find("#tb_"+this.name+"_right").before(u):$(this.box).find("#tb_"+this.name+"_item_"+w2utils.escapeId(this.items[parseInt(this.get(e,!0))+1].id)).before(u)):(o.html(u),s.hidden?o.css("display","none"):o.css("display",""),s.disabled?o.addClass("disabled"):o.removeClass("disabled")),this.trigger($.extend(n,{phase:"after"})),(new Date).getTime()-t},resize:function(){var e=(new Date).getTime(),t=this.trigger({phase:"before",type:"resize",target:this.name});if(t.isCancelled===!0)return;return this.trigger($.extend(t,{phase:"after"})),(new Date).getTime()-e},destroy:function(){var e=this.trigger({phase:"before",type:"destroy",target:this.name});if(e.isCancelled===!0)return;$(this.box).find("> table #tb_"+this.name+"_right").length>0&&$(this.box).removeAttr("name").removeClass("w2ui-reset w2ui-toolbar").html(""),$(this.box).html(""),delete w2ui[this.name],this.trigger($.extend(e,{phase:"after"}))},getItemHTML:function(e){var t="";typeof e.caption!="undefined"&&(e.text=e.caption),typeof e.hint=="undefined"&&(e.hint=""),typeof e.text=="undefined"&&(e.text="");switch(e.type){case"menu":case"button":case"check":case"radio":case"drop":var n="<td>&nbsp;</td>";e.img&&(n='<td><div class="w2ui-tb-image w2ui-icon '+e.img+'"></div></td>'),e.icon&&(n='<td><div class="w2ui-tb-image"><span class="'+e.icon+'"></span></div></td>'),t+='<table cellpadding="0" cellspacing="0" title="'+e.hint+'" class="w2ui-button '+(e.checked?"checked":"")+'" '+"       onclick     = \"var el=w2ui['"+this.name+"']; if (el) el.click('"+e.id+"', event);\" "+'       onmouseover = "'+(e.disabled?"":"$(this).addClass('over');")+'"'+'       onmouseout  = "'+(e.disabled?"":"$(this).removeClass('over').removeClass('down');")+'"'+'       onmousedown = "'+(e.disabled?"":"$(this).addClass('down');")+'"'+'       onmouseup   = "'+(e.disabled?"":"$(this).removeClass('down');")+'"'+">"+"<tr><td>"+'  <table cellpadding="1" cellspacing="0">'+"  <tr>"+n+(e.text!==""?'<td class="w2ui-tb-caption" nowrap>'+e.text+"</td>":"")+(e.count!=null?'<td class="w2ui-tb-count" nowrap><span>'+e.count+"</span></td>":"")+(e.type!=="drop"&&e.type!=="menu"||e.arrow===!1?"":'<td class="w2ui-tb-down" nowrap><div></div></td>')+"  </tr></table>"+"</td></tr></table>";break;case"break":t+='<table cellpadding="0" cellspacing="0"><tr>    <td><div class="w2ui-break">&nbsp;</div></td></tr></table>';break;case"html":t+='<table cellpadding="0" cellspacing="0"><tr>    <td nowrap>'+e.html+"</td>"+"</tr></table>"}var r="";return typeof e.onRender=="function"&&(r=e.onRender.call(this,e.id,t)),typeof this.onRender=="function"&&(r=this.onRender(e.id,t)),r!==""&&r!=null&&(t=r),t},menuClick:function(e){var t=this;if(e.item&&!e.item.disabled){var n=this.trigger({phase:"before",type:"click",target:e.item.id+":"+e.subItem.id,item:e.item,subItem:e.subItem,originalEvent:e.originalEvent});if(n.isCancelled===!0)return;var r=e.subItem;if(r.route){var i=String("/"+r.route).replace(/\/{2,}/g,"/"),s=w2utils.parseRoute(i);if(s.keys.length>0)for(var o=0;o<s.keys.length;o++){if(t.routeData[s.keys[o].name]==null)continue;i=i.replace(new RegExp(":"+s.keys[o].name,"g"),this.routeData[s.keys[o].name])}setTimeout(function(){window.location.hash=i},1)}this.trigger($.extend(n,{phase:"after"}))}},click:function(e,t){var n=this,r=this.get(e);if(r&&!r.disabled){var i=this.trigger({phase:"before",type:"click",target:typeof e!="undefined"?e:this.name,item:r,object:r,originalEvent:t});if(i.isCancelled===!0)return;var s=$("#tb_"+this.name+"_item_"+w2utils.escapeId(r.id)+" table.w2ui-button");s.removeClass("down");if(r.type==="radio"){for(var o=0;o<this.items.length;o++){var u=this.items[o];if(u==null||u.id===r.id||u.type!=="radio")continue;u.group===r.group&&u.checked&&(u.checked=!1,this.refresh(u.id))}r.checked=!0,s.addClass("checked")}if(r.type==="drop"||r.type==="menu")r.checked?r.checked=!1:setTimeout(function(){function i(){$(document).off("click",i),r.checked=!1,s.removeClass("checked")}var e=$("#tb_"+n.name+"_item_"+w2utils.escapeId(r.id));$.isPlainObject(r.overlay)||(r.overlay={});var t=(e.width()-50)/2;t>19&&(t=19),r.type==="drop"&&e.w2overlay(r.html,$.extend({left:t,top:3},r.overlay)),r.type==="menu"&&e.w2menu(r.items,$.extend({left:t,top:3},r.overlay,{select:function(e){n.menuClick({item:r,subItem:e.item,originalEvent:e.originalEvent}),i()}})),$(document).on("click",i)},1);if(r.type==="check"||r.type==="drop"||r.type==="menu")r.checked=!r.checked,r.checked?s.addClass("checked"):s.removeClass("checked");if(r.route){var a=String("/"+r.route).replace(/\/{2,}/g,"/"),f=w2utils.parseRoute(a);if(f.keys.length>0)for(var l=0;l<f.keys.length;l++)a=a.replace(new RegExp(":"+f.keys[l].name,"g"),this.routeData[f.keys[l].name]);setTimeout(function(){window.location.hash=a},1)}this.trigger($.extend(i,{phase:"after"}))}}},$.extend(e.prototype,w2utils.event),w2obj.toolbar=e}(),function(){var e=function(e){this.name=null,this.box=null,this.sidebar=null,this.parent=null,this.nodes=[],this.menu=[],this.routeData={},this.selected=null,this.img=null,this.icon=null,this.style="",this.topHTML="",this.bottomHTML="",this.keyboard=!0,this.onClick=null,this.onDblClick=null,this.onContextMenu=null,this.onMenuClick=null,this.onExpand=null,this.onCollapse=null,this.onKeydown=null,this.onRender=null,this.onRefresh=null,this.onResize=null,this.onDestroy=null,$.extend(!0,this,w2obj.sidebar,e)};$.fn.w2sidebar=function(t){if(typeof t=="object"||!t){if(!w2utils.checkName(t,"w2sidebar"))return;var n=t.nodes,r=new e(t);return $.extend(r,{handlers:[],nodes:[]}),typeof n!="undefined"&&r.add(r,n),$(this).length!==0&&r.render($(this)[0]),r.sidebar=r,w2ui[r.name]=r,r}if(w2ui[$(this).attr("name")]){var i=w2ui[$(this).attr("name")];return i[t].apply(i,Array.prototype.slice.call(arguments,1)),this}console.log("ERROR: Method "+t+" does not exist on jQuery.w2sidebar")},e.prototype={node:{id:null,text:"",count:null,img:null,icon:null,nodes:[],style:"",route:null,selected:!1,expanded:!1,hidden:!1,disabled:!1,group:!1,groupShowHide:!0,plus:!1,onClick:null,onDblClick:null,onContextMenu:null,onExpand:null,onCollapse:null,parent:null,sidebar:null},add:function(e,t){return arguments.length==1&&(t=arguments[0],e=this),typeof e=="string"&&(e=this.get(e)),this.insert(e,null,t)},insert:function(t,n,r){var i,s,o,u,a;if(arguments.length==2){r=arguments[1],n=arguments[0],s=this.get(n);if(s===null)return $.isArray(r)||(r=[r]),i=r[0].caption!=null?r[0].caption:r[0].text,console.log('ERROR: Cannot insert node "'+i+'" because cannot find node "'+n+'" to insert before.'),null;t=this.get(n).parent}typeof t=="string"&&(t=this.get(t)),$.isArray(r)||(r=[r]);for(var f in r){u=r[f];if(typeof u.id==null){i=u.caption!=null?u.caption:u.text,console.log('ERROR: Cannot insert node "'+i+'" because it has no id.');continue}if(this.get(this,u.id)!==null){i=u.caption!=null?u.caption:u.text,console.log("ERROR: Cannot insert node with id="+u.id+" (text: "+i+") because another node with the same id already exists.");continue}o=$.extend({},e.prototype.node,u),o.sidebar=this,o.parent=t,a=o.nodes||[],o.nodes=[];if(n===null)t.nodes.push(o);else{s=this.get(t,n,!0);if(s===null)return i=u.caption!=null?u.caption:u.text,console.log('ERROR: Cannot insert node "'+i+'" because cannot find node "'+n+'" to insert before.'),null;t.nodes.splice(s,0,o)}a.length>0&&this.insert(o,null,a)}return this.refresh(t.id),o},remove:function(){var e=0,t;for(var n=0;n<arguments.length;n++){t=this.get(arguments[n]);if(t===null)continue;this.selected!==null&&this.selected===t.id&&(this.selected=null);var r=this.get(t.parent,arguments[n],!0);if(r===null)continue;t.parent.nodes[r].selected&&t.sidebar.unselect(t.id),t.parent.nodes.splice(r,1),e++}return e>0&&arguments.length==1?this.refresh(t.parent.id):this.refresh(),e},set:function(e,t,n){arguments.length==2&&(n=t,t=e,e=this),typeof e=="string"&&(e=this.get(e));if(e.nodes==null)return null;for(var r=0;r<e.nodes.length;r++){if(e.nodes[r].id===t){var i=n.nodes;return $.extend(e.nodes[r],n,{nodes:[]}),i!=null&&this.add(e.nodes[r],i),this.refresh(t),!0}var s=this.set(e.nodes[r],t,n);if(s)return!0}return!1},get:function(e,t,n){if(arguments.length===0){var r=[],i=this.find({});for(var s=0;s<i.length;s++)i[s].id!=null&&r.push(i[s].id);return r}if(arguments.length==1||arguments.length==2&&t===!0)n=t,t=e,e=this;typeof e=="string"&&(e=this.get(e));if(e.nodes==null)return null;for(var o=0;o<e.nodes.length;o++){if(e.nodes[o].id==t)return n===!0?o:e.nodes[o];var u=this.get(e.nodes[o],t,n);if(u||u===0)return u}return null},find:function(e,t,n){arguments.length==1&&(t=e,e=this),n||(n=[]),typeof e=="string"&&(e=this.get(e));if(e.nodes==null)return n;for(var r=0;r<e.nodes.length;r++){var i=!0;for(var s in t)e.nodes[r][s]!=t[s]&&(i=!1);i&&n.push(e.nodes[r]),e.nodes[r].nodes.length>0&&(n=this.find(e.nodes[r],t,n))}return n},hide:function(){var e=0;for(var t=0;t<arguments.length;t++){var n=this.get(arguments[t]);if(n===null)continue;n.hidden=!0,e++}return arguments.length==1?this.refresh(arguments[0]):this.refresh(),e},show:function(){var e=0;for(var t=0;t<arguments.length;t++){var n=this.get(arguments[t]);if(n===null)continue;n.hidden=!1,e++}return arguments.length==1?this.refresh(arguments[0]):this.refresh(),e},disable:function(){var e=0;for(var t=0;t<arguments.length;t++){var n=this.get(arguments[t]);if(n===null)continue;n.disabled=!0,n.selected&&this.unselect(n.id),e++}return arguments.length==1?this.refresh(arguments[0]):this.refresh(),e},enable:function(){var e=0;for(var t=0;t<arguments.length;t++){var n=this.get(arguments[t]);if(n===null)continue;n.disabled=!1,e++}return arguments.length==1?this.refresh(arguments[0]):this.refresh(),e},select:function(e){var t=this.get(e);return t?this.selected==e&&t.selected?!1:(this.unselect(this.selected),$(this.box).find("#node_"+w2utils.escapeId(e)).addClass("w2ui-selected").find(".w2ui-icon").addClass("w2ui-icon-selected"),t.selected=!0,this.selected=e,!0):!1},unselect:function(e){var t=this.get(e);return t?(t.selected=!1,$(this.box).find("#node_"+w2utils.escapeId(e)).removeClass("w2ui-selected").find(".w2ui-icon").removeClass("w2ui-icon-selected"),this.selected==e&&(this.selected=null),!0):!1},toggle:function(e){var t=this.get(e);if(t===null)return!1;if(t.plus){this.set(e,{plus:!1}),this.expand(e),this.refresh(e);return}return t.nodes.length===0?!1:this.get(e).expanded?this.collapse(e):this.expand(e)},collapse:function(e){var t=this,n=this.get(e),r=this.trigger({phase:"before",type:"collapse",target:e,object:n});if(r.isCancelled===!0)return;return $(this.box).find("#node_"+w2utils.escapeId(e)+"_sub").slideUp(200),$(this.box).find("#node_"+w2utils.escapeId(e)+" .w2ui-node-dots:first-child").html('<div class="w2ui-expand">+</div>'),n.expanded=!1,this.trigger($.extend(r,{phase:"after"})),setTimeout(function(){t.refresh(e)},200),!0},collapseAll:function(e){typeof e=="undefined"&&(e=this),typeof e=="string"&&(e=this.get(e));if(e.nodes==null)return!1;for(var t=0;t<e.nodes.length;t++)e.nodes[t].expanded===!0&&(e.nodes[t].expanded=!1),e.nodes[t].nodes&&e.nodes[t].nodes.length>0&&this.collapseAll(e.nodes[t]);return this.refresh(e.id),!0},expand:function(e){var t=this,n=this.get(e),r=this.trigger({phase:"before",type:"expand",target:e,object:n});if(r.isCancelled===!0)return;return $(this.box).find("#node_"+w2utils.escapeId(e)+"_sub").slideDown(200),$(this.box).find("#node_"+w2utils.escapeId(e)+" .w2ui-node-dots:first-child").html('<div class="w2ui-expand">-</div>'),n.expanded=!0,this.trigger($.extend(r,{phase:"after"})),setTimeout(function(){t.refresh(e)},200),!0},expandAll:function(e){typeof e=="undefined"&&(e=this),typeof e=="string"&&(e=this.get(e));if(e.nodes==null)return!1;for(var t=0;t<e.nodes.length;t++)e.nodes[t].expanded===!1&&(e.nodes[t].expanded=!0),e.nodes[t].nodes&&e.nodes[t].nodes.length>0&&this.collapseAll(e.nodes[t]);this.refresh(e.id)},expandParents:function(e){var t=this.get(e);return t===null?!1:(t.parent&&(t.parent.expanded=!0,this.expandParents(t.parent.id)),this.refresh(e),!0)},click:function(e,t){var n=this,r=this.get(e);if(r===null)return;if(r.disabled||r.group)return;$(n.box).find(".w2ui-node.w2ui-selected").each(function(e,t){var r=$(t).attr("id").replace("node_",""),i=n.get(r);i!=null&&(i.selected=!1),$(t).removeClass("w2ui-selected").find(".w2ui-icon").removeClass("w2ui-icon-selected")});var i=$(n.box).find("#node_"+w2utils.escapeId(e)),s=$(n.box).find("#node_"+w2utils.escapeId(n.selected));i.addClass("w2ui-selected").find(".w2ui-icon").addClass("w2ui-icon-selected"),setTimeout(function(){var o=n.trigger({phase:"before",type:"click",target:e,originalEvent:t,node:r,object:r});if(o.isCancelled===!0){i.removeClass("w2ui-selected").find(".w2ui-icon").removeClass("w2ui-icon-selected"),s.addClass("w2ui-selected").find(".w2ui-icon").addClass("w2ui-icon-selected");return}s!==null&&(s.selected=!1),n.get(e).selected=!0,n.selected=e;if(r.route){var u=String("/"+r.route).replace(/\/{2,}/g,"/"),a=w2utils.parseRoute(u);if(a.keys.length>0)for(var f=0;f<a.keys.length;f++){if(n.routeData[a.keys[f].name]==null)continue;u=u.replace(new RegExp(":"+a.keys[f].name,"g"),n.routeData[a.keys[f].name])}setTimeout(function(){window.location.hash=u},1)}n.trigger($.extend(o,{phase:"after"}))},1)},keydown:function(e){function i(e,n){e!==null&&!e.hidden&&!e.disabled&&!e.group&&(t.click(e.id,n),setTimeout(function(){t.scrollIntoView()},50))}function s(e,t){e=t(e);while(e!==null&&(e.hidden||e.disabled)){if(e.group)break;e=t(e)}return e}function o(e,n){if(e===null)return null;var r=e.parent,i=t.get(e.id,!0),s=null;if(e.expanded&&e.nodes.length>0&&n!==!0){var u=e.nodes[0];u.hidden||u.disabled||u.group?s=o(u):s=u}else r&&i+1<r.nodes.length?s=r.nodes[i+1]:s=o(r,!0);return s!==null&&(s.hidden||s.disabled||s.group)&&(s=o(s)),s}function u(e){if(e===null)return null;var n=e.parent,r=t.get(e.id,!0),i=r>0?a(n.nodes[r-1]):n;return i!==null&&(i.hidden||i.disabled||i.group)&&(i=u(i)),i}function a(e){if(e.expanded&&e.nodes.length>0){var t=e.nodes[e.nodes.length-1];return t.hidden||t.disabled||t.group?u(t):a(t)}return e}var t=this,n=t.get(t.selected);if(!n||t.keyboard!==!0)return;var r=t.trigger({phase:"before",type:"keydown",target:t.name,originalEvent:e});if(r.isCancelled===!0)return;(e.keyCode==13||e.keyCode==32)&&n.nodes.length>0&&t.toggle(t.selected),e.keyCode==37&&(n.nodes.length>0&&n.expanded?t.collapse(t.selected):(i(n.parent),n.parent.group||t.collapse(n.parent.id))),e.keyCode==39&&(n.nodes.length>0||n.plus)&&!n.expanded&&t.expand(t.selected),e.keyCode==38&&i(s(n,u)),e.keyCode==40&&i(s(n,o)),$.inArray(e.keyCode,[13,32,37,38,39,40])!=-1&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()),t.trigger($.extend(r,{phase:"after"}))},scrollIntoView:function(e){typeof e=="undefined"&&(e=this.selected);var t=this.get(e);if(t===null)return;var n=$(this.box).find(".w2ui-sidebar-div"),r=$(this.box).find("#node_"+w2utils.escapeId(e)),i=r.offset().top-n.offset().top;i+r.height()>n.height()&&n.animate({scrollTop:n.scrollTop()+n.height()/1.3},250,"linear"),i<=0&&n.animate({scrollTop:n.scrollTop()-n.height()/1.3},250,"linear")},dblClick:function(e,t){var n=this.get(e),r=this.trigger({phase:"before",type:"dblClick",target:e,originalEvent:t,object:n});if(r.isCancelled===!0)return;this.toggle(e),this.trigger($.extend(r,{phase:"after"}))},contextMenu:function(e,t){var n=this,r=n.get(e);e!=n.selected&&n.click(e),setTimeout(function(){var i=n.trigger({phase:"before",type:"contextMenu",target:e,originalEvent:t,object:r});if(i.isCancelled===!0)return;if(r.group||r.disabled)return;n.menu.length>0&&$(n.box).find("#node_"+w2utils.escapeId(e)).w2menu(n.menu,{left:(t?t.offsetX||t.pageX:50)-25,onSelect:function(t){n.menuClick(e,parseInt(t.index),t.originalEvent)}}),n.trigger($.extend(i,{phase:"after"}))},150)},menuClick:function(e,t,n){var r=this,i=r.trigger({phase:"before",type:"menuClick",target:e,originalEvent:n,menuIndex:t,menuItem:r.menu[t]});if(i.isCancelled===!0)return;r.trigger($.extend(i,{phase:"after"}))},render:function(e){var t=(new Date).getTime(),n=this.trigger({phase:"before",type:"render",target:this.name,box:e});if(n.isCancelled===!0)return;typeof e!="undefined"&&e!==null&&($(this.box).find("> div > div.w2ui-sidebar-div").length>0&&$(this.box).removeAttr("name").removeClass("w2ui-reset w2ui-sidebar").html(""),this.box=e);if(!this.box)return;return $(this.box).attr("name",this.name).addClass("w2ui-reset w2ui-sidebar").html('<div><div class="w2ui-sidebar-top"></div><div class="w2ui-sidebar-div"></div><div class="w2ui-sidebar-bottom"></div></div>'),$(this.box).find("> div").css({width:$(this.box).width()+"px",height:$(this.box).height()+"px"}),$(this.box).length>0&&($(this.box)[0].style.cssText+=this.style),this.topHTML!==""&&($(this.box).find(".w2ui-sidebar-top").html(this.topHTML),$(this.box).find(".w2ui-sidebar-div").css("top",$(this.box).find(".w2ui-sidebar-top").height()+"px")),this.bottomHTML!==""&&($(this.box).find(".w2ui-sidebar-bottom").html(this.bottomHTML),$(this.box).find(".w2ui-sidebar-div").css("bottom",$(this.box).find(".w2ui-sidebar-bottom").height()+"px")),this.trigger($.extend(n,{phase:"after"})),this.refresh(),(new Date).getTime()-t},refresh:function(e){function l(e){var t="",n=e.img;n===null&&(n=this.img);var i=e.icon;i===null&&(i=this.icon);var s=e.parent,o=0;while(s&&s.parent!==null)s.group&&o--,s=s.parent,o++;return typeof e.caption!="undefined"&&(e.text=e.caption),e.group?t='<div class="w2ui-node-group"  id="node_'+e.id+'"'+"        onclick=\"w2ui['"+r.name+"'].toggle('"+e.id+"')\""+"        onmouseout=\"$(this).find('span:nth-child(1)').css('color', 'transparent')\" "+"        onmouseover=\"$(this).find('span:nth-child(1)').css('color', 'inherit')\">"+(e.groupShowHide?"<span>"+(!e.hidden&&e.expanded?w2utils.lang("Hide"):w2utils.lang("Show"))+"</span>":"<span></span>")+"    <span>"+e.text+"</span>"+"</div>"+'<div class="w2ui-node-sub" id="node_'+e.id+'_sub" style="'+e.style+";"+(!e.hidden&&e.expanded?"":"display: none;")+'"></div>':(e.selected&&!e.disabled&&(r.selected=e.id),s="",n&&(s='<div class="w2ui-node-image w2ui-icon '+n+(e.selected&&!e.disabled?" w2ui-icon-selected":"")+'"></div>'),i&&(s='<div class="w2ui-node-image"><span class="'+i+'"></span></div>'),t='<div class="w2ui-node '+(e.selected?"w2ui-selected":"")+" "+(e.disabled?"w2ui-disabled":"")+'" id="node_'+e.id+'" style="'+(e.hidden?"display: none;":"")+'"'+"    ondblclick=\"w2ui['"+r.name+"'].dblClick('"+e.id+"', event);\""+"    oncontextmenu=\"w2ui['"+r.name+"'].contextMenu('"+e.id+"', event); "+'        if (event.preventDefault) event.preventDefault();"'+"    onClick=\"w2ui['"+r.name+"'].click('"+e.id+"', event); \">"+'<table cellpadding="0" cellspacing="0" style="margin-left:'+o*18+"px; padding-right:"+o*18+'px"><tr>'+'<td class="w2ui-node-dots" nowrap onclick="w2ui[\''+r.name+"'].toggle('"+e.id+"'); "+'        if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true;">'+'    <div class="w2ui-expand">'+(e.nodes.length>0?e.expanded?"-":"+":e.plus?"+":"")+"</div>"+"</td>"+'<td class="w2ui-node-data" nowrap>'+s+(e.count||e.count===0?'<div class="w2ui-node-count">'+e.count+"</div>":"")+'<div class="w2ui-node-caption">'+e.text+"</div>"+"</td>"+"</tr></table>"+"</div>"+'<div class="w2ui-node-sub" id="node_'+e.id+'_sub" style="'+e.style+";"+(!e.hidden&&e.expanded?"":"display: none;")+'"></div>'),t}var t=(new Date).getTime(),n=this.trigger({phase:"before",type:"refresh",target:typeof e!="undefined"?e:this.name});if(n.isCancelled===!0)return;this.topHTML!==""&&($(this.box).find(".w2ui-sidebar-top").html(this.topHTML),$(this.box).find(".w2ui-sidebar-div").css("top",$(this.box).find(".w2ui-sidebar-top").height()+"px")),this.bottomHTML!==""&&($(this.box).find(".w2ui-sidebar-bottom").html(this.bottomHTML),$(this.box).find(".w2ui-sidebar-div").css("bottom",$(this.box).find(".w2ui-sidebar-bottom").height()+"px")),$(this.box).find("> div").css({width:$(this.box).width()+"px",height:$(this.box).height()+"px"});var r=this,i,s,o;if(typeof e=="undefined")i=this,o=".w2ui-sidebar-div";else{i=this.get(e);if(i===null)return;o="#node_"+w2utils.escapeId(i.id)+"_sub"}var u;if(i!==this){var a="#node_"+w2utils.escapeId(i.id);u=l(i),$(this.box).find(a).before('<div id="sidebar_'+this.name+'_tmp"></div>'),$(this.box).find(a).remove(),$(this.box).find(o).remove(),$("#sidebar_"+this.name+"_tmp").before(u),$("#sidebar_"+this.name+"_tmp").remove()}$(this.box).find(o).html("");for(var f=0;f<i.nodes.length;f++)s=i.nodes[f],u=l(s),$(this.box).find(o).append(u),s.nodes.length!==0&&this.refresh(s.id);return this.trigger($.extend(n,{phase:"after"})),(new Date).getTime()-t},resize:function(){var e=(new Date).getTime(),t=this.trigger({phase:"before",type:"resize",target:this.name});if(t.isCancelled===!0)return;return $(this.box).css("overflow","hidden"),$(this.box).find("> div").css({width:$(this.box).width()+"px",height:$(this.box).height()+"px"}),this.trigger($.extend(t,{phase:"after"})),(new Date).getTime()-e},destroy:function(){var e=this.trigger({phase:"before",type:"destroy",target:this.name});if(e.isCancelled===!0)return;$(this.box).find("> div > div.w2ui-sidebar-div").length>0&&$(this.box).removeAttr("name").removeClass("w2ui-reset w2ui-sidebar").html(""),delete w2ui[this.name],this.trigger($.extend(e,{phase:"after"}))},lock:function(e,t){var n=$(this.box).find("> div:first-child"),r=Array.prototype.slice.call(arguments,0);r.unshift(n),w2utils.lock.apply(window,r)},unlock:function(){w2utils.unlock(this.box)}},$.extend(e.prototype,w2utils.event),w2obj.sidebar=e}(),function(e){var t=function(t){this.el=null,this.helpers={},this.type=t.type||"text",this.options=e.extend(!0,{},t),this.onSearch=t.onSearch||null,this.onRequest=t.onRequest||null,this.onLoad=t.onLoad||null,this.onError=t.onError||null,this.onClick=t.onClick||null,this.onAdd=t.onAdd||null,this.onNew=t.onNew||null,this.onRemove=t.onRemove||null,this.onMouseOver=t.onMouseOver||null,this.onMouseOut=t.onMouseOut||null,this.onIconClick=t.onIconClick||null,this.tmp={},delete this.options.type,delete this.options.onSearch,delete this.options.onRequest,delete this.options.onLoad,delete this.options.onError,delete this.options.onClick,delete this.options.onMouseOver,delete this.options.onMouseOut,delete this.options.onIconClick,e.extend(!0,this,w2obj.field)};e.fn.w2field=function(n,r){if(this.length!=0){if(arguments.length==0){var s=e(this).data("w2field");return s}return typeof n=="string"&&typeof r=="object"&&(n=e.extend(!0,{},r,{type:n})),typeof n=="string"&&typeof r=="undefined"&&(n={type:n}),n.type=String(n.type).toLowerCase(),this.each(function(r,i){var s=e(i).data("w2field");if(typeof s=="undefined"){var s=new t(n);return e.extend(s,{handlers:[]}),i&&(s.el=e(i)[0]),s.init(),e(i).data("w2field",s),s}s.clear();if(n.type=="clear")return;var s=new t(n);return e.extend(s,{handlers:[]}),i&&(s.el=e(i)[0]),s.init(),e(i).data("w2field",s),s})}var i=t.prototype;if(i[n])return i[n].apply(i,Array.prototype.slice.call(arguments,1))},t.prototype={custom:{},pallete:[["000000","444444","666666","999999","CCCCCC","EEEEEE","F3F3F3","FFFFFF"],["FF011B","FF9838","FFFD59","01FD55","00FFFE","0424F3","9B24F4","FF21F5"],["F4CCCC","FCE5CD","FFF2CC","D9EAD3","D0E0E3","CFE2F3","D9D1E9","EAD1DC"],["EA9899","F9CB9C","FEE599","B6D7A8","A2C4C9","9FC5E8","B4A7D6","D5A6BD"],["E06666","F6B26B","FED966","93C47D","76A5AF","6FA8DC","8E7CC3","C27BA0"],["CC0814","E69138","F1C232","6AA84F","45818E","3D85C6","674EA7","A54D79"],["99050C","B45F17","BF901F","37761D","124F5C","0A5394","351C75","741B47"],["660205","783F0B","7F6011","274E12","0C343D","063762","20124D","4C1030"]],addType:function(e,t){return e=String(e).toLowerCase(),this.custom[e]=t,!0},removeType:function(e){return e=String(e).toLowerCase(),this.custom[e]?(delete this.custom[e],!0):!1},init:function(){var t=this,n=this.options,r;if(typeof this.custom[this.type]=="function"){this.custom[this.type].call(this,n);return}if(["INPUT","TEXTAREA"].indexOf(this.el.tagName)==-1){console.log("ERROR: w2field could only be applied to INPUT or TEXTAREA.",this.el);return}switch(this.type){case"text":case"int":case"float":case"money":case"currency":case"percent":case"alphanumeric":case"hex":r={min:null,max:null,step:1,placeholder:"",autoFormat:!0,currencyPrefix:w2utils.settings.currencyPrefix,currencySuffix:w2utils.settings.currencySuffix,currencyPrecision:w2utils.settings.currencyPrecision,decimalSymbol:w2utils.settings.decimalSymbol,groupSymbol:w2utils.settings.groupSymbol,arrows:!1,keyboard:!0,precision:null,silent:!0,prefix:"",suffix:""},this.options=e.extend(!0,{},r,n),n=this.options,n.numberRE=new RegExp("["+n.groupSymbol+"]","g"),n.moneyRE=new RegExp("["+n.currencyPrefix+n.currencySuffix+n.groupSymbol+"]","g"),n.percentRE=new RegExp("["+n.groupSymbol+"%]","g"),["text","alphanumeric","hex"].indexOf(this.type)!=-1&&(n.arrows=!1,n.keyboard=!1),this.addPrefix(),this.addSuffix(),e(this.el).attr("placeholder")&&n.placeholder==""&&(n.placeholder=e(this.el).attr("placeholder")),e(this.el).attr("placeholder",n.placeholder);break;case"color":r={prefix:"#",suffix:'<div style="width: '+(parseInt(e(this.el).css("font-size"))||12)+'px">&nbsp;</div>',placeholder:"",arrows:!1,keyboard:!1},e.extend(n,r),this.addPrefix(),this.addSuffix(),e(this.el).attr("maxlength",6),e(this.el).val()!=""&&setTimeout(function(){e(t.el).change()},1),e(this.el).attr("placeholder")&&n.placeholder==""&&(n.placeholder=e(this.el).attr("placeholder")),e(this.el).attr("placeholder",n.placeholder);break;case"date":r={format:w2utils.settings.date_format,placeholder:"",keyboard:!0,silent:!0,start:"",end:"",blocked:{},colored:{}},this.options=e.extend(!0,{},r,n),n=this.options,e(this.el).attr("placeholder")&&n.placeholder==""&&(n.placeholder=e(this.el).attr("placeholder")),e(this.el).attr("placeholder",n.placeholder?n.placeholder:n.format);break;case"time":r={format:w2utils.settings.time_format,placeholder:"",keyboard:!0,silent:!0,start:"",end:""},this.options=e.extend(!0,{},r,n),n=this.options,e(this.el).attr("placeholder")&&n.placeholder==""&&(n.placeholder=e(this.el).attr("placeholder")),e(this.el).attr("placeholder",n.placeholder?n.placeholder:n.format=="h12"?"hh:mi pm":"hh:mi");break;case"datetime":break;case"list":case"combo":r={items:[],selected:{},placeholder:"",url:null,postData:{},minLength:1,cacheMax:250,maxDropHeight:350,match:"begins",silent:!0,icon:null,iconStyle:"",onSearch:null,onRequest:null,onLoad:null,onError:null,onIconClick:null,renderDrop:null,prefix:"",suffix:"",openOnFocus:!1,markSearch:!1},n.items=this.normMenu(n.items);if(this.type=="list"){r.openOnFocus=!0,r.suffix='<div class="arrow-down" style="margin-top: '+(parseInt(e(this.el).height())-6)/2+'px;"></div>',e(this.el).addClass("w2ui-select");if(!e.isPlainObject(n.selected))for(var i in n.items){var s=n.items[i];if(s&&s.id==n.selected){n.selected=e.extend(!0,{},s);break}}}n=e.extend({},r,n,{align:"both",altRows:!0}),this.options=n,e.isPlainObject(n.selected)||(n.selected={}),e(this.el).data("selected",n.selected),n.url&&this.request(0),this.type=="list"&&this.addFocus(),this.addPrefix(),this.addSuffix(),setTimeout(function(){t.refresh()},10),e(this.el).attr("placeholder")&&n.placeholder==""&&(n.placeholder=e(this.el).attr("placeholder")),e(this.el).attr("placeholder",n.placeholder).attr("autocomplete","off"),typeof n.selected.text!="undefined"&&e(this.el).val(n.selected.text);break;case"enum":r={items:[],selected:[],placeholder:"",max:0,url:null,postData:{},minLength:1,cacheMax:250,maxWidth:250,maxHeight:350,maxDropHeight:350,match:"contains",silent:!0,openOnFocus:!1,markSearch:!0,renderDrop:null,renderItem:null,style:"",onSearch:null,onRequest:null,onLoad:null,onError:null,onClick:null,onAdd:null,onNew:null,onRemove:null,onMouseOver:null,onMouseOut:null},n=e.extend({},r,n,{align:"both",suffix:"",altRows:!0}),n.items=this.normMenu(n.items),n.selected=this.normMenu(n.selected),this.options=n,e.isArray(n.selected)||(n.selected=[]),e(this.el).data("selected",n.selected),n.url&&this.request(0),this.addSuffix(),this.addMulti();break;case"file":r={selected:[],placeholder:w2utils.lang("Attach files by dragging and dropping or Click to Select"),max:0,maxSize:0,maxFileSize:0,maxWidth:250,maxHeight:350,maxDropHeight:350,silent:!0,renderItem:null,style:"",onClick:null,onAdd:null,onRemove:null,onMouseOver:null,onMouseOut:null},n=e.extend({},r,n,{align:"both",altRows:!0}),this.options=n,e.isArray(n.selected)||(n.selected=[]),e(this.el).data("selected",n.selected),e(this.el).attr("placeholder")&&(n.placeholder=e(this.el).attr("placeholder")),this.addMulti()}this.tmp={onChange:function(e){t.change.call(t,e)},onClick:function(e){t.click.call(t,e)},onFocus:function(e){t.focus.call(t,e)},onBlur:function(e){t.blur.call(t,e)},onKeydown:function(e){t.keyDown.call(t,e)},onKeyup:function(e){t.keyUp.call(t,e)},onKeypress:function(e){t.keyPress.call(t,e)}},e(this.el).addClass("w2field").data("w2field",this).on("change",this.tmp.onChange).on("click",this.tmp.onClick).on("focus",this.tmp.onFocus).on("blur",this.tmp.onBlur).on("keydown",this.tmp.onKeydown).on("keyup",this.tmp.onKeyup).on("keypress",this.tmp.onKeypress).css({"box-sizing":"border-box","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","-ms-box-sizing":"border-box","-o-box-sizing":"border-box"}),this.change(e.Event("change"))},clear:function(){var t=this,n=this.options;["money","currency"].indexOf
(this.type)!=-1&&e(this.el).val(e(this.el).val().replace(n.moneyRE,"")),this.type=="percent"&&e(this.el).val(e(this.el).val().replace(/%/g,"")),this.type=="color"&&e(this.el).removeAttr("maxlength"),this.type=="list"&&e(this.el).removeClass("w2ui-select"),["date","time"].indexOf(this.type)!=-1&&e(this.el).attr("placeholder")==n.format&&e(this.el).attr("placeholder",""),this.type="clear";var r=e(this.el).data("tmp");if(!this.tmp)return;typeof r!="undefined"&&(r&&r["old-padding-left"]&&e(this.el).css("padding-left",r["old-padding-left"]),r&&r["old-padding-right"]&&e(this.el).css("padding-right",r["old-padding-right"])),e(this.el).val(this.clean(e(this.el).val())).removeClass("w2field").removeData().off("change",this.tmp.onChange).off("click",this.tmp.onClick).off("focus",this.tmp.onFocus).off("blur",this.tmp.onBlur).off("keydown",this.tmp.onKeydown).off("keyup",this.tmp.onKeyup).off("keypress",this.tmp.onKeypress);for(var i in this.helpers)e(this.helpers[i]).remove();this.helpers={}},refresh:function(){var t=this,n=this.options,r=e(this.el).data("selected"),i=(new Date).getTime();["list"].indexOf(this.type)!=-1&&(e(t.el).parent().css("white-space","nowrap"),t.helpers.prefix&&t.helpers.prefix.hide(),setTimeout(function(){if(!t.helpers.focus)return;!e.isEmptyObject(r)&&n.icon?(n.prefix='<span class="w2ui-icon '+n.icon+'"style="cursor: pointer; font-size: 14px;'+" display: inline-block; margin-top: -1px; color: #7F98AD;"+n.iconStyle+'">'+"</span>",t.addPrefix()):(n.prefix="",t.addPrefix());var i=t.helpers.focus.find("input");e(i).val()==""?(e(i).css("opacity",0).prev().css("opacity",0),e(t.el).val(r&&r.text!=null?r.text:""),e(t.el).attr("placeholder",n.placeholder||"")):(e(i).css("opacity",1).prev().css("opacity",1),e(t.el).val(""),e(t.el).removeAttr("placeholder"),setTimeout(function(){t.helpers.prefix&&t.helpers.prefix.hide();var r="position: absolute; opacity: 0; margin: 4px 0px 0px 2px; background-position: left !important;";n.icon?(e(i).css("margin-left","17px"),e(t.helpers.focus).find(".icon-search").attr("style",r+"width: 11px !important; opacity: 1")):(e(i).css("margin-left","0px"),e(t.helpers.focus).find(".icon-search").attr("style",r+"width: 0px !important; opacity: 0"))},1)),e(t.el).prop("readonly")||e(t.el).prop("disabled")?setTimeout(function(){e(t.helpers.prefix).css("opacity","0.6"),e(t.helpers.suffix).css("opacity","0.6")},1):setTimeout(function(){e(t.helpers.prefix).css("opacity","1"),e(t.helpers.suffix).css("opacity","1")},1)},1));if(["enum","file"].indexOf(this.type)!=-1){var s="";for(var o in r){var u=r[o],a="";typeof n.renderItem=="function"?a=n.renderItem(u,o,'<div class="w2ui-list-remove" title="'+w2utils.lang("Remove")+'" index="'+o+'">&nbsp;&nbsp;</div>'):a='<div class="w2ui-list-remove" title="'+w2utils.lang("Remove")+'" index="'+o+'">&nbsp;&nbsp;</div>'+(t.type=="enum"?u.text:u.name+'<span class="file-size"> - '+w2utils.size(u.size)+"</span>"),s+='<li index="'+o+'" style="max-width: '+parseInt(n.maxWidth)+"px; "+(u.style?u.style:"")+'">'+a+"</li>"}var f=t.helpers.multi,l=f.find("ul");f.attr("style",f.attr("style")+";"+n.style),e(t.el).prop("readonly")||e(t.el).prop("disabled")?(f.addClass("w2ui-readonly"),f.css("pointer-events","none").find("li").css("opacity","0.6"),e(t.helpers.multi).find("input").prop("readonly",!0)):(f.removeClass("w2ui-readonly"),f.css("pointer-events","auto").find("li").css("opacity","1"),e(t.helpers.multi).find("input").prop("readonly",!1)),f.find(".w2ui-enum-placeholder").remove(),l.find("li").not("li.nomouse").remove();if(s!="")l.prepend(s);else if(typeof n.placeholder!="undefined"){var c="padding-top: "+e(this.el).css("padding-top")+";"+"padding-left: "+e(this.el).css("padding-left")+"; "+"box-sizing: "+e(this.el).css("box-sizing")+"; "+"line-height: "+e(this.el).css("line-height")+"; "+"font-size: "+e(this.el).css("font-size")+"; "+"font-family: "+e(this.el).css("font-family")+"; ";f.prepend('<div class="w2ui-enum-placeholder" style="'+c+'">'+n.placeholder+"</div>")}f.find("li").data("mouse","out").on("click",function(n){var i=r[e(n.target).attr("index")];if(e(n.target).hasClass("nomouse"))return;n.stopPropagation();var s=t.trigger({phase:"before",type:"click",target:t.el,originalEvent:n.originalEvent,item:i});if(s.isCancelled===!0)return;if(e(n.target).hasClass("w2ui-list-remove")){if(e(t.el).attr("readonly")||e(t.el).attr("disabled"))return;var s=t.trigger({phase:"before",type:"remove",target:t.el,originalEvent:n.originalEvent,item:i});if(s.isCancelled===!0)return;e().w2overlay(),r.splice(e(n.target).attr("index"),1),e(t.el).trigger("change"),e(n.target).parent().fadeOut("fast"),setTimeout(function(){t.refresh(),t.trigger(e.extend(s,{phase:"after"}))},300)}if(t.type=="file"&&!e(n.target).hasClass("w2ui-list-remove")){var o="";/image/i.test(i.type)&&(o='<div style="padding: 3px;">    <img src="'+(i.content?"data:"+i.type+";base64,"+i.content:"")+'" style="max-width: 300px;" '+'        onload="var w = $(this).width(); var h = $(this).height(); '+"            if (w < 300 & h < 300) return; "+"            if (w >= h && w > 300) $(this).width(300);"+'            if (w < h && h > 300) $(this).height(300);"'+"        onerror=\"this.style.display = 'none'\""+"    >"+"</div>");var u='style="padding: 3px; text-align: right; color: #777;"',a='style="padding: 3px"';o+='<div style="padding: 8px;">    <table cellpadding="2">    <tr><td '+u+">"+w2utils.lang("Name")+":</td><td "+a+">"+i.name+"</td></tr>"+"    <tr><td "+u+">"+w2utils.lang("Size")+":</td><td "+a+">"+w2utils.size(i.size)+"</td></tr>"+"    <tr><td "+u+">"+w2utils.lang("Type")+":</td><td "+a+">"+'        <span style="width: 200px; display: block-inline; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">'+i.type+"</span>"+"    </td></tr>"+"    <tr><td "+u+">"+w2utils.lang("Modified")+":</td><td "+a+">"+w2utils.date(i.modified)+"</td></tr>"+"    </table>"+"</div>",e(n.target).w2overlay(o)}t.trigger(e.extend(s,{phase:"after"}))}).on("mouseover",function(n){var i=n.target;i.tagName!="LI"&&(i=i.parentNode);if(e(i).hasClass("nomouse"))return;if(e(i).data("mouse")=="out"){var s=r[e(i).attr("index")],o=t.trigger({phase:"before",type:"mouseOver",target:t.el,originalEvent:n.originalEvent,item:s});if(o.isCancelled===!0)return;t.trigger(e.extend(o,{phase:"after"}))}e(i).data("mouse","over")}).on("mouseout",function(n){var i=n.target;i.tagName!="LI"&&(i=i.parentNode);if(e(i).hasClass("nomouse"))return;e(i).data("mouse","leaving"),setTimeout(function(){if(e(i).data("mouse")=="leaving"){e(i).data("mouse","out");var s=r[e(i).attr("index")],o=t.trigger({phase:"before",type:"f",target:t.el,originalEvent:n.originalEvent,item:s});if(o.isCancelled===!0)return;t.trigger(e.extend(o,{phase:"after"}))}},0)}),e(this.el).height("auto");var h=e(f).find("> div").height()+w2utils.getSize(f,"+height")*2;h<26&&(h=26),h>n.maxHeight&&(h=n.maxHeight),f.length>0&&(f[0].scrollTop=1e3);var p=w2utils.getSize(e(this.el),"height")-2;p>h&&(h=p),e(f).css({height:h+"px",overflow:h==n.maxHeight?"auto":"hidden"}),h<n.maxHeight&&e(f).prop("scrollTop",0),e(this.el).css({height:h+2+"px"})}return(new Date).getTime()-i},reset:function(){var e=this,t=this.type;this.clear(),this.type=t,this.init()},clean:function(t){var n=this.options;return t=String(t).trim(),["int","float","money","currency","percent"].indexOf(this.type)!=-1&&(typeof t=="string"&&(t=t.replace(n.decimalSymbol,".")),n.autoFormat&&["money","currency"].indexOf(this.type)!=-1&&(t=String(t).replace(n.moneyRE,"")),n.autoFormat&&this.type=="percent"&&(t=String(t).replace(n.percentRE,"")),n.autoFormat&&["int","float"].indexOf(this.type)!=-1&&(t=String(t).replace(n.numberRE,"")),parseFloat(t)==t&&(n.min!==null&&t<n.min&&(t=n.min,e(this.el).val(n.min)),n.max!==null&&t>n.max&&(t=n.max,e(this.el).val(n.max))),t!==""&&w2utils.isFloat(t)?t=Number(t):t=""),t},format:function(e){var t=this.options;if(t.autoFormat&&e!="")switch(this.type){case"money":case"currency":e=w2utils.formatNumber(Number(e).toFixed(t.currencyPrecision),t.groupSymbol),e!=""&&(e=t.currencyPrefix+e+t.currencySuffix);break;case"percent":e=w2utils.formatNumber(t.precision?Number(e).toFixed(t.precision):e,t.groupSymbol),e!=""&&(e+="%");break;case"float":e=w2utils.formatNumber(t.precision?Number(e).toFixed(t.precision):e,t.groupSymbol);break;case"int":e=w2utils.formatNumber(e,t.groupSymbol)}return e},change:function(t){var n=this,r=n.options;if(["int","float","money","currency","percent"].indexOf(this.type)!=-1){var i=e(this.el).val(),s=this.format(this.clean(e(this.el).val()));if(i!=""&&i!=s)return e(this.el).val(s).change(),t.stopPropagation(),t.preventDefault(),!1}if(this.type=="color"){var o="#"+e(this.el).val();e(this.el).val().length!=6&&e(this.el).val().length!=3&&(o=""),e(this.el).next().find("div").css("background-color",o),e(n.el).is(":focus")&&this.updateOverlay()}["list","enum","file"].indexOf(this.type)!=-1&&(n.refresh(),setTimeout(function(){n.refresh()},5));if(["date","time"].indexOf(this.type)!=-1){var u=parseInt(n.el.value);w2utils.isInt(n.el.value)&&u>3e3&&(this.type=="time"&&e(n.el).val(w2utils.formatTime(new Date(u),r.format)).change(),this.type=="date"&&e(n.el).val(w2utils.formatDate(new Date(u),r.format)).change())}},click:function(t){t.stopPropagation(),["list","combo","enum"].indexOf(this.type)!=-1&&(e(this.el).is(":focus")||this.focus(t)),["date","time","color"].indexOf(this.type)!=-1&&this.updateOverlay()},focus:function(t){var n=this,r=this.options;if(["color","date","time"].indexOf(n.type)!==-1){if(e(n.el).attr("readonly")||e(n.el).attr("disabled"))return;e("#w2ui-overlay").length>0&&e("#w2ui-overlay")[0].hide(),setTimeout(function(){n.updateOverlay()},150)}if(["list","combo","enum"].indexOf(n.type)!=-1){if(e(n.el).attr("readonly")||e(n.el).attr("disabled"))return;e("#w2ui-overlay").length>0&&e("#w2ui-overlay")[0].hide(),setTimeout(function(){if(n.type=="list"&&e(n.el).is(":focus")){e(n.helpers.focus).find("input").focus();return}n.search(),setTimeout(function(){n.updateOverlay()},1)},1)}n.type=="file"&&e(n.helpers.multi).css({outline:"auto 5px #7DB4F3","outline-offset":"-2px"})},blur:function(t){var n=this,r=n.options,i=e(n.el).val().trim();["color","date","time","list","combo","enum"].indexOf(n.type)!=-1&&e("#w2ui-overlay").length>0&&e("#w2ui-overlay")[0].hide(),["int","float","money","currency","percent"].indexOf(n.type)!=-1&&i!==""&&!n.checkType(i)&&(e(n.el).val("").change(),r.silent===!1&&(e(n.el).w2tag("Not a valid number"),setTimeout(function(){e(n.el).w2tag("")},3e3))),["date","time"].indexOf(n.type)!=-1&&(i!==""&&!n.inRange(n.el.value)?(e(n.el).val("").removeData("selected").change(),r.silent===!1&&(e(n.el).w2tag("Not in range"),setTimeout(function(){e(n.el).w2tag("")},3e3))):(n.type=="date"&&i!==""&&!w2utils.isDate(n.el.value,r.format)&&(e(n.el).val("").removeData("selected").change(),r.silent===!1&&(e(n.el).w2tag("Not a valid date"),setTimeout(function(){e(n.el).w2tag("")},3e3))),n.type=="time"&&i!==""&&!w2utils.isTime(n.el.value)&&(e(n.el).val("").removeData("selected").change(),r.silent===!1&&(e(n.el).w2tag("Not a valid time"),setTimeout(function(){e(n.el).w2tag("")},3e3))))),n.type=="enum"&&e(n.helpers.multi).find("input").val("").width(20),n.type=="file"&&e(n.helpers.multi).css({outline:"none"})},keyPress:function(e){var t=this,n=t.options;if(["int","float","money","currency","percent","hex","color","alphanumeric"].indexOf(t.type)!=-1){if(e.metaKey||e.ctrlKey||e.altKey||e.charCode!=e.keyCode&&e.keyCode>0)return;var r=String.fromCharCode(e.charCode);if(!t.checkType(r,!0)&&e.keyCode!=13)return e.preventDefault(),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,!1}["date","time"].indexOf(t.type)!=-1&&setTimeout(function(){t.updateOverlay()},1)},keyDown:function(t,n){var r=this,i=r.options,s=t.keyCode||n&&n.keyCode;if(["int","float","money","currency","percent"].indexOf(r.type)!=-1){if(!i.keyboard||e(r.el).attr("readonly"))return;var o=!1,u=parseFloat(e(r.el).val().replace(i.moneyRE,""))||0,a=i.step;if(t.ctrlKey||t.metaKey)a=10;switch(s){case 38:if(t.shiftKey)break;e(r.el).val(u+a<=i.max||i.max===null?Number((u+a).toFixed(12)):i.max).change(),o=!0;break;case 40:if(t.shiftKey)break;e(r.el).val(u-a>=i.min||i.min===null?Number((u-a).toFixed(12)):i.min).change(),o=!0}o&&(t.preventDefault(),setTimeout(function(){r.el.setSelectionRange(r.el.value.length,r.el.value.length)},0))}if(r.type=="date"){if(!i.keyboard||e(r.el).attr("readonly"))return;var o=!1,f=864e5,a=1;if(t.ctrlKey||t.metaKey)a=10;var l=w2utils.isDate(e(r.el).val(),i.format,!0);l||(l=new Date,f=0);switch(s){case 38:if(t.shiftKey)break;var c=w2utils.formatDate(l.getTime()+f,i.format);a==10&&(c=w2utils.formatDate(new Date(l.getFullYear(),l.getMonth()+1,l.getDate()),i.format)),e(r.el).val(c).change(),o=!0;break;case 40:if(t.shiftKey)break;var c=w2utils.formatDate(l.getTime()-f,i.format);a==10&&(c=w2utils.formatDate(new Date(l.getFullYear(),l.getMonth()-1,l.getDate()),i.format)),e(r.el).val(c).change(),o=!0}o&&(t.preventDefault(),setTimeout(function(){r.el.setSelectionRange(r.el.value.length,r.el.value.length),r.updateOverlay()},0))}if(r.type=="time"){if(!i.keyboard||e(r.el).attr("readonly"))return;var o=!1,a=t.ctrlKey||t.metaKey?60:1,u=e(r.el).val(),h=r.toMin(u)||r.toMin((new Date).getHours()+":"+((new Date).getMinutes()-1));switch(s){case 38:if(t.shiftKey)break;h+=a,o=!0;break;case 40:if(t.shiftKey)break;h-=a,o=!0}o&&(e(r.el).val(r.fromMin(h)).change(),t.preventDefault(),setTimeout(function(){r.el.setSelectionRange(r.el.value.length,r.el.value.length)},0))}if(r.type=="color"){if(e(r.el).attr("readonly"))return;t.keyCode==86&&(t.ctrlKey||t.metaKey)&&(e(r.el).prop("maxlength",7),setTimeout(function(){var t=e(r).val();t.substr(0,1)=="#"&&(t=t.substr(1)),w2utils.isHex(t)||(t=""),e(r).val(t).prop("maxlength",6).change()},20));if((t.ctrlKey||t.metaKey)&&!t.shiftKey){if(typeof r.tmp.cind1=="undefined")r.tmp.cind1=-1,r.tmp.cind2=-1;else{switch(s){case 38:r.tmp.cind1--;break;case 40:r.tmp.cind1++;break;case 39:r.tmp.cind2++;break;case 37:r.tmp.cind2--}r.tmp.cind1<0&&(r.tmp.cind1=0),r.tmp.cind1>this.pallete.length-1&&(r.tmp.cind1=this.pallete.length-1),r.tmp.cind2<0&&(r.tmp.cind2=0),r.tmp.cind2>this.pallete[0].length-1&&(r.tmp.cind2=this.pallete[0].length-1)}[37,38,39,40].indexOf(s)!=-1&&(e(r.el).val(this.pallete[r.tmp.cind1][r.tmp.cind2]).change(),t.preventDefault())}}if(["list","combo","enum"].indexOf(r.type)!=-1){if(e(r.el).attr("readonly"))return;var o=!1,p=e(r.el).data("selected"),d=e(r.helpers.focus).find("input");r.type=="list"&&[37,38,39,40].indexOf(s)==-1&&r.refresh();switch(s){case 27:r.type=="list"&&(e(d).val()!=""&&e(d).val(""),t.stopPropagation());break;case 37:case 39:break;case 13:if(e("#w2ui-overlay").length==0)break;var v=i.items[i.index],m=e(r.helpers.multi).find("input");if(r.type=="enum")if(v!=null){var g=r.trigger({phase:"before",type:"add",target:r.el,originalEvent:t.originalEvent,item:v});if(g.isCancelled===!0)return;v=g.item,p.length>=i.max&&i.max>0&&p.pop(),delete v.hidden,delete r.tmp.force_open,p.push(v),e(r.el).change(),m.val("").width(20),r.refresh(),r.trigger(e.extend(g,{phase:"after"}))}else{v={id:m.val(),text:m.val()};var g=r.trigger({phase:"before",type:"new",target:r.el,originalEvent:t.originalEvent,item:v});if(g.isCancelled===!0)return;v=g.item,typeof r.onNew=="function"&&(p.length>=i.max&&i.max>0&&p.pop(),delete r.tmp.force_open,p.push(v),e(r.el).change(),m.val("").width(20),r.refresh()),r.trigger(e.extend(g,{phase:"after"}))}else v&&e(r.el).data("selected",v).val(v.text).change(),e(r.el).val()==""&&e(r.el).data("selected")&&e(r.el).removeData("selected").val("").change(),r.type=="list"&&(d.val(""),r.refresh()),r.tmp.force_hide=!0;break;case 8:case 46:if(r.type=="enum"&&s==8&&e(r.helpers.multi).find("input").val()==""&&p.length>0){var v=p[p.length-1],g=r.trigger({phase:"before",type:"remove",target:r.el,originalEvent:t.originalEvent,item:v});if(g.isCancelled===!0)return;p.pop(),e(r.el).trigger("change"),r.refresh(),r.trigger(e.extend(g,{phase:"after"}))}r.type=="list"&&e(d).val()==""&&(e(r.el).data("selected",{}).change(),r.refresh());break;case 38:i.index=w2utils.isInt(i.index)?parseInt(i.index):0,i.index--;while(i.index>0&&i.items[i.index].hidden)i.index--;if(i.index==0&&i.items[i.index].hidden)while(i.items[i.index]&&i.items[i.index].hidden)i.index++;o=!0;break;case 40:i.index=w2utils.isInt(i.index)?parseInt(i.index):-1,i.index++;while(i.index<i.items.length-1&&i.items[i.index].hidden)i.index++;if(i.index==i.items.length-1&&i.items[i.index].hidden)while(i.items[i.index]&&i.items[i.index].hidden)i.index--;var y=r.el;["enum"].indexOf(r.type)!=-1&&(y=r.helpers.multi.find("input")),e(y).val()==""&&e("#w2ui-overlay").length==0?r.tmp.force_open=!0:o=!0}if(o){i.index<0&&(i.index=0),i.index>=i.items.length&&(i.index=i.items.length-1),r.updateOverlay(),t.preventDefault(),setTimeout(function(){if(r.type=="enum"){var e=r.helpers.multi.find("input").get(0);e.setSelectionRange(e.value.length,e.value.length)}else if(r.type=="list"){var e=r.helpers.focus.find("input").get(0);e.setSelectionRange(e.value.length,e.value.length)}else r.el.setSelectionRange(r.el.value.length,r.el.value.length)},0);return}if(r.type=="enum"){var y=r.helpers.multi.find("input"),b=y.val();y.width((b.length+2)*8+"px")}[16,17,18,20,37,39,91].indexOf(s)==-1&&setTimeout(function(){r.tmp.force_hide||r.request(),r.search()},1)}},keyUp:function(t){this.type=="color"&&t.keyCode==86&&(t.ctrlKey||t.metaKey)&&e(this).prop("maxlength",6)},clearCache:function(){var e=this.options;e.items=[],this.tmp.xhr_loading=!1,this.tmp.xhr_search="",this.tmp.xhr_total=-1,this.search()},request:function(t){var n=this,r=this.options,i=e(n.el).val()||"";if(!r.url)return;if(n.type=="enum"){var s=e(n.helpers.multi).find("input");s.length==0?i="":i=s.val()}if(n.type=="list"){var s=e(n.helpers.focus).find("input");s.length==0?i="":i=s.val()}if(r.minLength!=0&&i.length<r.minLength){r.items=[],this.updateOverlay();return}typeof t=="undefined"&&(t=350),typeof n.tmp.xhr_search=="undefined"&&(n.tmp.xhr_search=""),typeof n.tmp.xhr_total=="undefined"&&(n.tmp.xhr_total=-1),r.url&&e(n.el).prop("readonly")!=1&&(r.items.length===0&&n.tmp.xhr_total!==0||n.tmp.xhr_total==r.cacheMax&&i.length>n.tmp.xhr_search.length||i.length>=n.tmp.xhr_search.length&&i.substr(0,n.tmp.xhr_search.length)!=n.tmp.xhr_search||i.length<n.tmp.xhr_search.length)&&(n.tmp.xhr_loading=!0,n.search(),clearTimeout(n.tmp.timeout),n.tmp.timeout=setTimeout(function(){var t=r.url,s={search:i,max:r.cacheMax};e.extend(s,r.postData);var o=n.trigger({phase:"before",type:"request",target:n.el,url:t,postData:s});if(o.isCancelled===!0)return;t=o.url,s=o.postData,n.tmp.xhr&&n.tmp.xhr.abort();var u={type:"GET",url:t,data:s,dataType:"JSON"};w2utils.settings.dataType=="JSON"&&(u.type="POST",u.data=JSON.stringify(u.data),u.contentType="application/json"),n.tmp.xhr=e.ajax(u).done(function(t,o,u){var a=n.trigger({phase:"before",type:"load",target:n.el,search:s.search,data:t,xhr:u});if(a.isCancelled===!0)return;t=a.data,typeof t=="string"&&(t=JSON.parse(t));if(t.status!="success"){console.log("ERROR: server did not return proper structure. It should return",{status:"success",items:[{id:1,text:"item"}]});return}t.items.length>r.cacheMax&&t.items.splice(r.cacheMax,1e5),n.tmp.xhr_loading=!1,n.tmp.xhr_search=i,n.tmp.xhr_total=t.items.length,r.items=n.normMenu(t.items),i==""&&t.items.length==0?n.tmp.emptySet=!0:n.tmp.emptySet=!1,n.search(),n.trigger(e.extend(a,{phase:"after"}))}).fail(function(t,r,s){var o={status:r,error:s,rawResponseText:t.responseText},u=n.trigger({phase:"before",type:"error",target:n.el,search:i,error:o,xhr:t});if(u.isCancelled===!0)return;if(r!="abort"){var a;try{a=e.parseJSON(t.responseText)}catch(f){}console.log("ERROR: Server communication failed.","\n   EXPECTED:",{status:"success",items:[{id:1,text:"item"}]},"\n         OR:",{status:"error",message:"error message"},"\n   RECEIVED:",typeof a=="object"?a:t.responseText)}n.clearCache(),n.trigger(e.extend(u,{phase:"after"}))}),n.trigger(e.extend(o,{phase:"after"}))},t))},search:function(){var t=this,n=this.options,r=e(t.el).val(),i=t.el,s=[],o=e(t.el).data("selected");if(t.type=="enum"){i=e(t.helpers.multi).find("input"),r=i.val();for(var u in o)o[u]&&s.push(o[u].id)}if(t.type=="list"){i=e(t.helpers.focus).find("input"),r=i.val();for(var u in o)o[u]&&s.push(o[u].id)}var a=t.trigger({phase:"before",type:"search",target:i,search:r});if(a.isCancelled===!0)return;if(t.tmp.xhr_loading!==!0){var f=0;for(var l in n.items){var c=n.items[l],h="",p="";["is","begins"].indexOf(n.match)!=-1&&(h="^"),["is","ends"].indexOf(n.match)!=-1&&(p="$");try{var d=new RegExp(h+r+p,"i");d.test(c.text)||c.text=="..."?c.hidden=!1:c.hidden=!0}catch(v){}t.type=="enum"&&e.inArray(c.id,s)!=-1&&(c.hidden=!0),c.hidden!==!0&&f++}if(t.type!="combo"){n.index=0;while(n.items[n.index]&&n.items[n.index].hidden)n.index++}else n.index=-1;f<=0&&(n.index=-1),n.spinner=!1,t.updateOverlay(),setTimeout(function(){var t=e("#w2ui-overlay").html()||"";n.markSearch&&t.indexOf("$.fn.w2menuHandler")!=-1&&e("#w2ui-overlay").w2marker(r)},1)}else n.items.splice(0,n.cacheMax),n.spinner=!0,t.updateOverlay();t.trigger(e.extend(a,{phase:"after"}))},updateOverlay:function(){var t=this,n=this.options;if(this.type=="color"){if(e(t.el).attr("readonly"))return;e("#w2ui-overlay").length==0?e(t.el).w2overlay(t.getColorHTML()):e("#w2ui-overlay").html(t.getColorHTML()),e("#w2ui-overlay .color").on("mousedown",function(n){var r=e(n.originalEvent.target).attr("name"),i=e(n.originalEvent.target).attr("index").split(":");t.tmp.cind1=i[0],t.tmp.cind2=i[1],e(t.el).val(r).change(),e(this).html("&#149;")}).on("mouseup",function(){setTimeout(function(){e("#w2ui-overlay").length>0&&e("#w2ui-overlay").removeData("keepOpen")[0].hide()},10)})}if(this.type=="date"){if(e(t.el).attr("readonly"))return;e("#w2ui-overlay").length==0&&e(t.el).w2overlay('<div class="w2ui-reset w2ui-calendar" onclick="event.stopPropagation();"></div>',{css:{"background-color":"#f5f5f5"}});var r,i,s=w2utils.isDate(e(t.el).val(),t.options.format,!0);s&&(r=s.getMonth()+1,i=s.getFullYear()),function l(n,r){e("#w2ui-overlay > div > div").html(t.getMonthHTML(n,r)),e("#w2ui-overlay .w2ui-calendar-title").on("mousedown",function(){if(e(this).next().hasClass("w2ui-calendar-jump"))e(this).next().remove();else{var n,r;e(this).after('<div class="w2ui-calendar-jump" style=""></div>'),e(this).next().hide().html(t.getYearHTML()).fadeIn(200),setTimeout(function(){e("#w2ui-overlay .w2ui-calendar-jump").find(".w2ui-jump-month, .w2ui-jump-year").on("click",function(){e(this).hasClass("w2ui-jump-month")&&(e(this).parent().find(".w2ui-jump-month").removeClass("selected"),e(this).addClass("selected"),r=e(this).attr("name")),e(this).hasClass("w2ui-jump-year")&&(e(this).parent().find(".w2ui-jump-year").removeClass("selected"),e(this).addClass("selected"),n=e(this).attr("name")),n!=null&&r!=null&&(e("#w2ui-overlay .w2ui-calendar-jump").fadeOut(100),setTimeout(function(){l(parseInt(r)+1,n)},100))}),e("#w2ui-overlay .w2ui-calendar-jump >:last-child").prop("scrollTop",2e3)},1)}}),e("#w2ui-overlay .w2ui-date").on("mousedown",function(){var n=e(this).attr("date");e(t.el).val(n).change(),e(this).css({"background-color":"#B6D5FB","border-color":"#aaa"})}).on("mouseup",function(){setTimeout(function(){e("#w2ui-overlay").length>0&&e("#w2ui-overlay").removeData("keepOpen")[0].hide()},10)}),e("#w2ui-overlay .previous").on("mousedown",function(){var e=t.options.current.split("/");e[0]=parseInt(e[0])-1,l(e[0],e[1])}),e("#w2ui-overlay .next").on("mousedown",function(){var e=t.options.current.split("/");e[0]=parseInt(e[0])+1,l(e[0],e[1])})}(r,i)}if(this.type=="time"){if(e(t.el).attr("readonly"))return;e("#w2ui-overlay").length==0&&e(t.el).w2overlay('<div class="w2ui-reset w2ui-calendar-time" onclick="event.stopPropagation();"></div>',{css:{"background-color":"#fff"}});var o=this.options.format=="h24"?!0:!1;e("#w2ui-overlay > div").html(t.getHourHTML()),e("#w2ui-overlay .w2ui-time").on("mousedown",function(n){e(this).css({"background-color":"#B6D5FB","border-color":"#aaa"});var r=e(this).attr("hour");e(t.el).val((r>12&&!o?r-12:r)+":00"+(o?"":r<12?" am":" pm")).change()}).on("mouseup",function(){var n=e(this).attr("hour");e("#w2ui-overlay").length>0&&e("#w2ui-overlay")[0].hide(),e(t.el).w2overlay('<div class="w2ui-reset w2ui-calendar-time"></div>',{css:{"background-color":"#fff"}}),e("#w2ui-overlay > div").html(t.getMinHTML(n)),e("#w2ui-overlay .w2ui-time").on("mousedown",function(){e(this).css({"background-color":"#B6D5FB","border-color":"#aaa"});var r=e(this).attr("min");e(t.el).val((n>12&&!o?n-12:n)+":"+(r<10?0:"")+r+(o?"":n<12?" am":" pm")).change()}).on("mouseup",function(){setTimeout(function(){e("#w2ui-overlay").length>0&&e("#w2ui-overlay").removeData("keepOpen")[0].hide()},10)})})}if(["list","combo","enum"].indexOf(this.type)!=-1){var u=this.el,a=this.el;this.type=="enum"&&(u=e(this.helpers.multi),a=e(u).find("input")),this.type=="list"&&(a=e(this.helpers.focus).find("input"));if(e(a).is(":focus")){if(n.openOnFocus===!1&&e(a).val()==""&&t.tmp.force_open!==!0){e().w2overlay();return}if(t.tmp.force_hide){e().w2overlay(),setTimeout(function(){delete t.tmp.force_hide},1);return}e(a).val()!=""&&delete t.tmp.force_open,e("#w2ui-overlay").length==0&&(n.index=0);var f=w2utils.lang("No matches");n.url!=null&&e(a).val().length<n.minLength&&t.tmp.emptySet!==!0&&(f=n.minLength+" "+w2utils.lang("letters or more...")),n.url!=null&&e(a).val()==""&&t.tmp.emptySet!==!0&&(f=w2utils.lang("Type to search....")),e(u).w2menu("refresh",e.extend(!0,{},n,{search:!1,render:n.renderDrop,maxHeight:n.maxDropHeight,msgNoItems:f,onSelect:function(r){if(t.type=="enum"){var i=e(t.el).data("selected");if(r.item){var s=t.trigger({phase:"before",type:"add",target:t.el,originalEvent:r.originalEvent,item:r.item});if(s.isCancelled===!0)return;i.length>=n.max&&n.max>0&&i.pop(),delete r.item.hidden,i.push(r.item),e(t.el).data("selected",i).change(),e(t.helpers.multi).find("input").val("").width(20),t.refresh(),e("#w2ui-overlay").length>0&&e("#w2ui-overlay")[0].hide(),t.trigger(e.extend(s,{phase:"after"}))}}else e(t.el).data("selected",r.item).val(r.item.text).change(),t.helpers.focus&&t.helpers.focus.find("input").val("")}}))}}},inRange:function(t){var n=!1;if(this.type=="date"){var r=w2utils.isDate(t,this.options.format,!0);if(r){if(this.options.start||this.options.end){var i=typeof this.options.start=="string"?this.options.start:e(this.options.start).val(),s=typeof this.options.end=="string"?this.options.end:e(this.options.end).val(),o=w2utils.isDate(i,this.options.format,!0),u=w2utils.isDate(s,this.options.format,!0),a=new Date(r);o||(o=a),u||(u=a),a>=o&&a<=u&&(n=!0)}else n=!0;this.options.blocked&&e.inArray(t,this.options.blocked)!=-1&&(n=!1)}}if(this.type=="time")if(this.options.start||this.options.end){var f=this.toMin(t),l=this.toMin(this.options.start),c=this.toMin(this.options.end);l||(l=f),c||(c=f),f>=l&&f<=c&&(n=!0)}else n=!0;return n},checkType:function(e,t){var n=this;switch(n.type){case"int":if(t&&["-",n.options.groupSymbol].indexOf(e)!=-1)return!0;return w2utils.isInt(e.replace(n.options.numberRE,""));case"percent":e=e.replace(/%/g,"");case"float":if(t&&["-",w2utils.settings.decimalSymbol,n.options.groupSymbol].indexOf(e)!=-1)return!0;return w2utils.isFloat(e.replace(n.options.numberRE,""));case"money":case"currency":if(t&&["-",n.options.decimalSymbol,n.options.groupSymbol,n.options.currencyPrefix,n.options.currencySuffix].indexOf(e)!=-1)return!0;return w2utils.isFloat(e.replace(n.options.moneyRE,""));case"hex":case"color":return w2utils.isHex(e);case"alphanumeric":return w2utils.isAlphaNumeric(e)}return!0},addPrefix:function(){var t=this;setTimeout(function(){if(t.type==="clear")return;var n,r=e(t.el).data("tmp")||{};r["old-padding-left"]&&e(t.el).css("padding-left",r["old-padding-left"]),r["old-padding-left"]=e(t.el).css("padding-left"),e(t.el).data("tmp",r),t.helpers.prefix&&e(t.helpers.prefix).remove(),t.options.prefix!==""&&(e(t.el).before('<div class="w2ui-field-helper">'+t.options.prefix+"</div>"),n=e(t.el).prev(),n.css({color:e(t.el).css("color"),"font-family":e(t.el).css("font-family"),"font-size":e(t.el).css("font-size"),"padding-top":e(t.el).css("padding-top"),"padding-bottom":e(t.el).css("padding-bottom"),"padding-left":e(t.el).css("padding-left"),"padding-right":0,"margin-top":parseInt(e(t.el).css("margin-top"),10)+2+"px","margin-bottom":parseInt(e(t.el).css("margin-bottom"),10)+1+"px","margin-left":e(t.el).css("margin-left"),"margin-right":0}).on("click",function(n){if(t.options.icon&&typeof t.onIconClick=="function"){var r=t.trigger({phase:"before",type:"iconClick",target:t.el,el:e(this).find("span.w2ui-icon")[0]});if(r.isCancelled===!0)return;t.trigger(e.extend(r,{phase:"after"}))}else t.type=="list"?e(t.helpers.focus).find("input").focus():e(t.el).focus()}),e(t.el).css("padding-left",n.width()+parseInt(e(t.el).css("padding-left"),10)+"px"),t.helpers.prefix=n)},1)},addSuffix:function(){var t=this,n,r;setTimeout(function(){if(t.type==="clear")return;var i=e(t.el).data("tmp")||{};i["old-padding-right"]&&e(t.el).css("padding-right",i["old-padding-right"]),i["old-padding-right"]=e(t.el).css("padding-right"),e(t.el).data("tmp",i),r=parseInt(e(t.el).css("padding-right"),10);if(t.options.arrows){t.helpers.arrows&&e(t.helpers.arrows).remove(),e(t.el).after('<div class="w2ui-field-helper" style="border: 1px solid transparent">&nbsp;    <div class="w2ui-field-up" type="up">        <div class="arrow-up" type="up"></div>    </div>    <div class="w2ui-field-down" type="down">        <div class="arrow-down" type="down"></div>    </div></div>');var s=w2utils.getSize(t.el,"height");n=e(t.el).next(),n.css({color:e(t.el).css("color"),"font-family":e(t.el).css("font-family"),"font-size":e(t.el).css("font-size"),height:e(t.el).height()+parseInt(e(t.el).css("padding-top"),10)+parseInt(e(t.el).css("padding-bottom"),10)+"px",padding:0,"margin-top":parseInt(e(t.el).css("margin-top"),10)+1+"px","margin-bottom":0,"border-left":"1px solid silver"}).css("margin-left","-"+(n.width()+parseInt(e(t.el).css("margin-right"),10)+12)+"px").on("mousedown",function(n){function r(){clearTimeout(e("body").data("_field_update_timer")),e("body").off("mouseup",r)}function i(r){e(t.el).focus(),t.keyDown(e.Event("keydown"),{keyCode:e(n.target).attr("type")=="up"?38:40}),r!==!1&&e("body").data("_field_update_timer",setTimeout(i,60))}e("body").on("mouseup",r),e("body").data("_field_update_timer",setTimeout(i,700)),i(!1)}),r+=n.width()+12,e(t.el).css("padding-right",r+"px"),t.helpers.arrows=n}t.options.suffix!==""&&(t.helpers.suffix&&e(t.helpers.suffix).remove(),e(t.el).after('<div class="w2ui-field-helper">'+t.options.suffix+"</div>"),n=e(t.el).next(),n.css({color:e(t.el).css("color"),"font-family":e(t.el).css("font-family"),"font-size":e(t.el).css("font-size"),"padding-top":e(t.el).css("padding-top"),"padding-bottom":e(t.el).css("padding-bottom"),"padding-left":"3px","padding-right":e(t.el).css("padding-right"),"margin-top":parseInt(e(t.el).css("margin-top"),10)+2+"px","margin-bottom":parseInt(e(t.el).css("margin-bottom"),10)+1+"px"}).on("click",function(n){t.type=="list"?e(t.helpers.focus).find("input").focus():e(t.el).focus()}),n.css("margin-left","-"+(w2utils.getSize(n,"width")+parseInt(e(t.el).css("margin-right"),10)+2)+"px"),r+=n.width()+3,e(t.el).css("padding-right",r+"px"),t.helpers.suffix=n)},1)},addFocus:function(){var t=this,n=this.options,r=0;e(t.helpers.focus).remove();var i=e(t.el).attr("tabIndex");i&&i!=-1&&(t.el._tabIndex=i),t.el._tabIndex&&(i=t.el._tabIndex);var s='<div class="w2ui-field-helper">    <div class="w2ui-icon icon-search"></div>    <input type="text" autocomplete="off" tabindex="'+i+'">'+"<div>";e(t.el).attr("tabindex",-1).before(s);var o=e(t.el).prev();t.helpers.focus=o,o.css({width:e(t.el).width(),"margin-top":e(t.el).css("margin-top"),"margin-left":parseInt(e(t.el).css("margin-left"))+parseInt(e(t.el).css("padding-left"))+"px","margin-bottom":e(t.el).css("margin-bottom"),"margin-right":e(t.el).css("margin-right")}).find("input").css({cursor:"default",width:"100%",outline:"none",opacity:1,margin:0,border:"1px solid transparent",padding:e(t.el).css("padding-top"),"padding-left":0,"margin-left":r>0?r+6:0,"background-color":"transparent"}),o.find("input").on("click",function(n){e("#w2ui-overlay").length==0&&t.focus(n),n.stopPropagation()}).on("focus",function(n){e(t.el).css({outline:"auto 5px #7DB4F3","outline-offset":"-2px"}),e(this).val(""),e(t.el).triggerHandler("focus"),n.stopPropagation?n.stopPropagation():n.cancelBubble=!0}).on("blur",function(n){e(t.el).css("outline","none"),e(this).val(""),t.refresh(),e(t.el).triggerHandler("blur"),n.stopPropagation?n.stopPropagation():n.cancelBubble=!0}).on("keyup",function(e){t.keyUp(e)}).on("keydown",function(e){t.keyDown
(e)}).on("keypress",function(e){t.keyPress(e)}),o.on("click",function(t){e(this).find("input").focus()}),t.refresh()},addMulti:function(){var t=this,n=this.options;e(t.helpers.multi).remove();var r="",i="margin-top     : 0px; margin-bottom  : 0px; margin-left    : "+e(t.el).css("margin-left")+"; "+"margin-right   : "+e(t.el).css("margin-right")+"; "+"width          : "+(w2utils.getSize(t.el,"width")-parseInt(e(t.el).css("margin-left"),10)-parseInt(e(t.el).css("margin-right"),10))+"px;";t.type=="enum"&&(r='<div class="w2ui-field-helper w2ui-list" style="'+i+'; box-sizing: border-box">'+'    <div style="padding: 0px; margin: 0px; margin-right: 20px; display: inline-block">'+"    <ul>"+'        <li style="padding-left: 0px; padding-right: 0px" class="nomouse">'+'            <input type="text" style="width: 20px" autocomplete="off" '+(e(t.el).attr("readonly")?"readonly":"")+">"+"        </li>","    </ul>    </div></div>"),t.type=="file"&&(r='<div class="w2ui-field-helper w2ui-list" style="'+i+'; box-sizing: border-box">'+'    <div style="padding: 0px; margin: 0px; margin-right: 20px; display: inline-block">'+'    <ul><li style="padding-left: 0px; padding-right: 0px" class="nomouse"></li></ul>'+'    <input class="file-input" type="file" name="attachment" multiple style="display: none" tabindex="-1">',"    </div></div>"),e(t.el).before(r).css({"background-color":"transparent","border-color":"transparent"});var s=e(t.el).prev();t.helpers.multi=s,t.type=="enum"&&(e(t.el).attr("tabindex",-1),s.find("input").on("click",function(n){e("#w2ui-overlay").length==0&&t.focus(n),e(t.el).triggerHandler("click")}).on("focus",function(n){e(s).css({outline:"auto 5px #7DB4F3","outline-offset":"-2px"}),e(t.el).triggerHandler("focus"),n.stopPropagation?n.stopPropagation():n.cancelBubble=!0}).on("blur",function(n){e(s).css("outline","none"),e(t.el).triggerHandler("blur"),n.stopPropagation?n.stopPropagation():n.cancelBubble=!0}).on("keyup",function(e){t.keyUp(e)}).on("keydown",function(e){t.keyDown(e)}).on("keypress",function(e){s.find(".w2ui-enum-placeholder").remove(),t.keyPress(e)}),s.on("click",function(t){e(this).find("input").focus()})),t.type=="file"&&(e(t.el).css("outline","none"),s.on("click",function(n){e(t.el).focus();if(e(t.el).attr("readonly"))return;t.blur(n),s.find("input").click()}).on("dragenter",function(n){if(e(t.el).attr("readonly"))return;e(s).addClass("w2ui-file-dragover")}).on("dragleave",function(n){if(e(t.el).attr("readonly"))return;var r=e(n.target).parents(".w2ui-field-helper");r.length==0&&e(s).removeClass("w2ui-file-dragover")}).on("drop",function(n){if(e(t.el).attr("readonly"))return;e(s).removeClass("w2ui-file-dragover");var r=n.originalEvent.dataTransfer.files;for(var i=0,o=r.length;i<o;i++)t.addFile.call(t,r[i]);n.preventDefault(),n.stopPropagation()}).on("dragover",function(e){e.preventDefault(),e.stopPropagation()}),s.find("input").on("click",function(e){e.stopPropagation()}).on("change",function(){if(typeof this.files!="undefined")for(var e=0,n=this.files.length;e<n;e++)t.addFile.call(t,this.files[e])})),t.refresh()},addFile:function(t){var n=this,r=this.options,i=e(n.el).data("selected"),s={name:t.name,type:t.type,modified:t.lastModifiedDate,size:t.size,content:null},o=0,u=0,a;for(var f in i){if(i[f].name==t.name&&i[f].size==t.size)return;o+=i[f].size,u++}var l=n.trigger({phase:"before",type:"add",target:n.el,file:s,total:u,totalSize:o});if(l.isCancelled===!0)return;if(r.maxFileSize!==0&&s.size>r.maxFileSize){a="Maximum file size is "+w2utils.size(r.maxFileSize),r.silent===!1&&e(n.el).w2tag(a),console.log("ERROR: "+a);return}if(r.maxSize!==0&&o+s.size>r.maxSize){a="Maximum total size is "+w2utils.size(r.maxSize),r.silent===!1&&e(n.el).w2tag(a),console.log("ERROR: "+a);return}if(r.max!==0&&u>=r.max){a="Maximum number of files is "+r.max,r.silent===!1&&e(n.el).w2tag(a),console.log("ERROR: "+a);return}i.push(s);if(typeof FileReader!="undefined"){var c=new FileReader;c.onload=function(){return function(t){var r=t.target.result,i=r.indexOf(",");s.content=r.substr(i+1),n.refresh(),e(n.el).trigger("change"),n.trigger(e.extend(l,{phase:"after"}))}}(),c.readAsDataURL(t)}else n.refresh(),e(n.el).trigger("change")},normMenu:function(t){if(e.isArray(t)){for(var n=0;n<t.length;n++)typeof t[n]=="string"?t[n]={id:t[n],text:t[n]}:(typeof t[n].text!="undefined"&&typeof t[n].id=="undefined"&&(t[n].id=t[n].text),typeof t[n].text=="undefined"&&typeof t[n].id!="undefined"&&(t[n].text=t[n].id),typeof t[n].caption!="undefined"&&(t[n].text=t[n].caption));return t}if(typeof t=="object"){var r=[];for(var n in t)r.push({id:n,text:t[n]});return r}},getColorHTML:function(){var t='<div class="w2ui-color"><table cellspacing="5">';for(var n=0;n<8;n++){t+="<tr>";for(var r=0;r<8;r++)t+='<td>    <div class="color" style="background-color: #'+this.pallete[n][r]+';" name="'+this.pallete[n][r]+'" index="'+n+":"+r+'">'+"        "+(e(this.el).val()==this.pallete[n][r]?"&#149;":"&nbsp;")+"    </div>"+"</td>";t+="</tr>",n<2&&(t+='<tr><td style="height: 8px" colspan="8"></td></tr>')}return t+="</table></div>",t},getMonthHTML:function(e,t){var n=new Date,r=w2utils.settings.fullmonths,i=w2utils.settings.fulldays,s=["31","28","31","30","31","30","31","31","30","31","30","31"],o=n.getFullYear()+"/"+(Number(n.getMonth())+1)+"/"+n.getDate();t=w2utils.isInt(t)?parseInt(t):n.getFullYear(),e=w2utils.isInt(e)?parseInt(e):n.getMonth()+1,e>12&&(e-=12,t++);if(e<1||e===0)e+=12,t--;t/4==Math.floor(t/4)?s[1]="29":s[1]="28",this.options.current=e+"/"+t,n=new Date(t,e-1,1);var u=n.getDay(),a=w2utils.settings.shortdays,f="";for(var l=0,c=a.length;l<c;l++)f+="<td>"+a[l]+"</td>";var h='<div class="w2ui-calendar-title title">    <div class="w2ui-calendar-previous previous"> <div></div> </div>    <div class="w2ui-calendar-next next"> <div></div> </div> '+r[e-1]+", "+t+"</div>"+'<table class="w2ui-calendar-days" cellspacing="0">'+'    <tr class="w2ui-day-title">'+f+"</tr>"+"    <tr>",p=1;for(var d=1;d<43;d++){if(u===0&&d==1){for(var v=0;v<6;v++)h+='<td class="w2ui-day-empty">&nbsp;</td>';d+=6}else if(d<u||p>s[e-1]){h+='<td class="w2ui-day-empty">&nbsp;</td>',d%7===0&&(h+="</tr><tr>");continue}var m=t+"/"+e+"/"+p,g="";d%7==6&&(g=" w2ui-saturday"),d%7===0&&(g=" w2ui-sunday"),m==o&&(g+=" w2ui-today");var y=p,b="",w="",E=w2utils.formatDate(m,this.options.format);this.options.colored&&this.options.colored[E]!==undefined&&(tmp=this.options.colored[E].split(":"),w="background-color: "+tmp[0]+";",b="color: "+tmp[1]+";"),h+='<td class="'+(this.inRange(E)?"w2ui-date ":"w2ui-blocked")+g+'" style="'+b+w+'" date="'+E+'">'+y+"</td>";if(d%7===0||u===0&&d==1)h+="</tr><tr>";p++}return h+="</tr></table>",h},getYearHTML:function(){var e=w2utils.settings.shortmonths,t="",n="";for(var r in e)t+='<div class="w2ui-jump-month" name="'+r+'">'+e[r]+"</div>";for(var i=1950;i<=2020;i++)n+='<div class="w2ui-jump-year" name="'+i+'">'+i+"</div>";return"<div>"+t+"</div><div>"+n+"</div>"},getHourHTML:function(){var e=[],t=this.options.format=="h24"?!0:!1;for(var n=0;n<24;n++){var r=(n>=12&&!t?n-12:n)+":00"+(t?"":n<12?" am":" pm");n==12&&!t&&(r="12:00 pm"),e[Math.floor(n/8)]||(e[Math.floor(n/8)]="");var i=this.fromMin(this.toMin(r)),s=this.fromMin(this.toMin(r)+59);e[Math.floor(n/8)]+='<div class="'+(this.inRange(i)||this.inRange(s)?"w2ui-time ":"w2ui-blocked")+'" hour="'+n+'">'+r+"</div>"}var o='<div class="w2ui-calendar-time"><table><tr>    <td>'+e[0]+"</td>"+"    <td>"+e[1]+"</td>"+"    <td>"+e[2]+"</td>"+"</tr></table></div>";return o},getMinHTML:function(e){typeof e=="undefined"&&(e=0);var t=this.options.format=="h24"?!0:!1,n=[];for(var r=0;r<60;r+=5){var i=(e>12&&!t?e-12:e)+":"+(r<10?0:"")+r+" "+(t?"":e<12?"am":"pm"),s=r<20?0:r<40?1:2;n[s]||(n[s]=""),n[s]+='<div class="'+(this.inRange(i)?"w2ui-time ":"w2ui-blocked")+'" min="'+r+'">'+i+"</div>"}var o='<div class="w2ui-calendar-time"><table><tr>    <td>'+n[0]+"</td>"+"    <td>"+n[1]+"</td>"+"    <td>"+n[2]+"</td>"+"</tr></table></div>";return o},toMin:function(e){if(typeof e!="string")return null;var t=e.split(":");return t.length!=2?null:(t[0]=parseInt(t[0]),t[1]=parseInt(t[1]),e.indexOf("pm")!=-1&&t[0]!=12&&(t[0]+=12),t[0]*60+t[1])},fromMin:function(e){var t="";e>=1440&&(e%=1440),e<0&&(e=1440+e);var n=Math.floor(e/60),r=(e%60<10?"0":"")+e%60;return this.options.format.indexOf("h24")!=-1?t=n+":"+r:t=(n<=12?n:n-12)+":"+r+" "+(n>=12?"pm":"am"),t}},e.extend(t.prototype,w2utils.event),w2obj.field=t}(jQuery),function(){var w2form=function(e){this.name=null,this.header="",this.box=null,this.url="",this.routeData={},this.formURL="",this.formHTML="",this.page=0,this.recid=0,this.fields=[],this.actions={},this.record={},this.original={},this.postData={},this.toolbar={},this.tabs={},this.style="",this.focus=0,this.msgNotJSON=w2utils.lang("Return data is not in JSON format."),this.msgAJAXerror=w2utils.lang("AJAX error. See console for more details."),this.msgRefresh=w2utils.lang("Refreshing..."),this.msgSaving=w2utils.lang("Saving..."),this.onRequest=null,this.onLoad=null,this.onValidate=null,this.onSubmit=null,this.onSave=null,this.onChange=null,this.onRender=null,this.onRefresh=null,this.onResize=null,this.onDestroy=null,this.onAction=null,this.onToolbar=null,this.onError=null,this.isGenerated=!1,this.last={xhr:null},$.extend(!0,this,w2obj.form,e)};$.fn.w2form=function(e){if(typeof e=="object"||!e){var t=this;if(!w2utils.checkName(e,"w2form"))return;var n=e.record,r=e.original,i=e.fields,s=e.toolbar,o=e.tabs,u=new w2form(e);$.extend(u,{record:{},original:{},fields:[],tabs:{},toolbar:{},handlers:[]});if($.isArray(o)){$.extend(!0,u.tabs,{tabs:[]});for(var a in o){var f=o[a];typeof f=="object"?u.tabs.tabs.push(f):u.tabs.tabs.push({id:f,caption:f})}}else $.extend(!0,u.tabs,o);$.extend(!0,u.toolbar,s);for(var l in i){var c=$.extend(!0,{},i[l]);typeof c.name=="undefined"&&typeof c.field!="undefined"&&(c.name=c.field),typeof c.field=="undefined"&&typeof c.name!="undefined"&&(c.field=c.name),u.fields[l]=c}for(var l in n)$.isPlainObject(n[l])?u.record[l]=$.extend(!0,{},n[l]):u.record[l]=n[l];for(var l in r)$.isPlainObject(r[l])?u.original[l]=$.extend(!0,{},r[l]):u.original[l]=r[l];return t.length>0&&(u.box=t[0]),u.formURL!=""?$.get(u.formURL,function(e){u.formHTML=e,u.isGenerated=!0;if($(u.box).length!=0||e.length!=0)$(u.box).html(e),u.render(u.box)}):u.formHTML==""&&($(this).length!=0&&$.trim($(this).html())!=""?u.formHTML=$(this).html():u.formHTML=u.generateHTML()),w2ui[u.name]=u,u.formURL==""&&(String(u.formHTML).indexOf("w2ui-page")==-1&&(u.formHTML='<div class="w2ui-page page-0">'+u.formHTML+"</div>"),$(u.box).html(u.formHTML),u.isGenerated=!0,u.render(u.box)),u}if(w2ui[$(this).attr("name")]){var t=w2ui[$(this).attr("name")];return t[e].apply(t,Array.prototype.slice.call(arguments,1)),this}console.log("ERROR: Method "+e+" does not exist on jQuery.w2form")},w2form.prototype={get:function(e,t){if(arguments.length===0){var n=[];for(var r in this.fields)this.fields[r].name!=null&&n.push(this.fields[r].name);return n}for(var i in this.fields)if(this.fields[i].name==e)return t===!0?i:this.fields[i];return null},set:function(e,t){for(var n in this.fields)if(this.fields[n].name==e)return $.extend(this.fields[n],t),this.refresh(),!0;return!1},reload:function(e){var t=typeof this.url!="object"?this.url:this.url.get;t&&this.recid!=0?this.request(e):typeof e=="function"&&e()},clear:function(){this.recid=0,this.record={},$().w2tag(),this.refresh()},error:function(e){var t=this,n=this.trigger({target:this.name,type:"error",message:e,xhr:this.last.xhr});if(n.isCancelled===!0){typeof callBack=="function"&&callBack();return}setTimeout(function(){w2alert(e,"Error")},1),this.trigger($.extend(n,{phase:"after"}))},validate:function(e){typeof e=="undefined"&&(e=!0),$().w2tag();var t=[];for(var n in this.fields){var r=this.fields[n];this.record[r.name]==null&&(this.record[r.name]="");switch(r.type){case"int":this.record[r.name]&&!w2utils.isInt(this.record[r.name])&&t.push({field:r,error:w2utils.lang("Not an integer")});break;case"float":this.record[r.name]&&!w2utils.isFloat(this.record[r.name])&&t.push({field:r,error:w2utils.lang("Not a float")});break;case"money":this.record[r.name]&&!w2utils.isMoney(this.record[r.name])&&t.push({field:r,error:w2utils.lang("Not in money format")});break;case"color":case"hex":this.record[r.name]&&!w2utils.isHex(this.record[r.name])&&t.push({field:r,error:w2utils.lang("Not a hex number")});break;case"email":this.record[r.name]&&!w2utils.isEmail(this.record[r.name])&&t.push({field:r,error:w2utils.lang("Not a valid email")});break;case"checkbox":this.record[r.name]==1?this.record[r.name]=1:this.record[r.name]=0;break;case"date":r.options.format||(r.options.format=w2utils.settings.date_format),this.record[r.name]&&!w2utils.isDate(this.record[r.name],r.options.format)&&t.push({field:r,error:w2utils.lang("Not a valid date")+": "+r.options.format});break;case"list":case"combo":break;case"enum":}var i=this.record[r.name];r.required&&(i===""||$.isArray(i)&&i.length==0||$.isPlainObject(i)&&$.isEmptyObject(i))&&t.push({field:r,error:w2utils.lang("Required field")}),r.equalto&&this.record[r.name]!=this.record[r.equalto]&&t.push({field:r,error:w2utils.lang("Field should be equal to ")+r.equalto})}var s=this.trigger({phase:"before",target:this.name,type:"validate",errors:t});if(s.isCancelled===!0)return;if(e)for(var o in s.errors){var u=s.errors[o];u.field.type=="radio"?$($(u.field.el).parents("div")[0]).w2tag(u.error,{"class":"w2ui-error"}):["enum","file"].indexOf(u.field.type)!=-1?function(e){setTimeout(function(){var t=$(e.field.el).data("w2field").helpers.multi;$(e.field.el).w2tag(e.error),$(t).addClass("w2ui-error")},1)}(u):$(u.field.el).w2tag(u.error,{"class":"w2ui-error"}),this.goto(t[0].field.page)}return this.trigger($.extend(s,{phase:"after"})),t},getChanges:function(){var e=function(t,n,r){for(var i in t)typeof t[i]=="object"?(r[i]=e(t[i],n[i]||{},{}),(!r[i]||$.isEmptyObject(r[i]))&&delete r[i]):t[i]!=n[i]&&(r[i]=t[i]);return r};return e(this.record,this.original,{})},request:function(postData,callBack){var obj=this;typeof postData=="function"&&(callBack=postData,postData=null);if(typeof postData=="undefined"||postData==null)postData={};if(!this.url||typeof this.url=="object"&&!this.url.get)return;if(this.recid==null||typeof this.recid=="undefined")this.recid=0;var params={};params.cmd="get-record",params.recid=this.recid,$.extend(params,this.postData),$.extend(params,postData);var eventData=this.trigger({phase:"before",type:"request",target:this.name,url:this.url,postData:params});if(eventData.isCancelled===!0){typeof callBack=="function"&&callBack({status:"error",message:"Request aborted."});return}this.record={},this.original={},this.lock(this.msgRefresh);var url=eventData.url;typeof eventData.url=="object"&&eventData.url.get&&(url=eventData.url.get);if(this.last.xhr)try{this.last.xhr.abort()}catch(e){}if(!$.isEmptyObject(obj.routeData)){var info=w2utils.parseRoute(url);if(info.keys.length>0)for(var k=0;k<info.keys.length;k++){if(obj.routeData[info.keys[k].name]==null)continue;url=url.replace(new RegExp(":"+info.keys[k].name,"g"),obj.routeData[info.keys[k].name])}}var ajaxOptions={type:"POST",url:url,data:eventData.postData,dataType:"text"};w2utils.settings.dataType=="HTTP"&&(ajaxOptions.data=String($.param(ajaxOptions.data,!1)).replace(/%5B/g,"[").replace(/%5D/g,"]")),w2utils.settings.dataType=="RESTFULL"&&(ajaxOptions.type="GET",ajaxOptions.data=String($.param(ajaxOptions.data,!1)).replace(/%5B/g,"[").replace(/%5D/g,"]")),w2utils.settings.dataType=="JSON"&&(ajaxOptions.type="POST",ajaxOptions.data=JSON.stringify(ajaxOptions.data),ajaxOptions.contentType="application/json"),this.last.xhr=$.ajax(ajaxOptions).done(function(data,status,xhr){obj.unlock();var eventData=obj.trigger({phase:"before",target:obj.name,type:"load",xhr:xhr});if(eventData.isCancelled===!0){typeof callBack=="function"&&callBack({status:"error",message:"Request aborted."});return}var data,responseText=obj.last.xhr.responseText;if(status!="error"){if(typeof responseText!="undefined"&&responseText!=""){if(typeof responseText=="object")data=responseText;else try{eval("data = "+responseText)}catch(e){}typeof data=="undefined"&&(data={status:"error",message:obj.msgNotJSON,responseText:responseText}),data["status"]=="error"?obj.error(data.message):(obj.record=$.extend({},data.record),obj.original=$.extend({},data.record))}}else obj.error("AJAX Error "+xhr.status+": "+xhr.statusText),data={status:"error",message:obj.msgAJAXerror,responseText:responseText};obj.trigger($.extend(eventData,{phase:"after"})),obj.refresh(),typeof callBack=="function"&&callBack(data)}).fail(function(e,t,n){var r={status:t,error:n,rawResponseText:e.responseText},i=obj.trigger({phase:"before",type:"error",error:r,xhr:e});if(i.isCancelled===!0)return;if(t!="abort"){var s;try{s=$.parseJSON(e.responseText)}catch(o){}console.log("ERROR: Server communication failed.","\n   EXPECTED:",{status:"success",items:[{id:1,text:"item"}]},"\n         OR:",{status:"error",message:"error message"},"\n   RECEIVED:",typeof s=="object"?s:e.responseText)}obj.trigger($.extend(i,{phase:"after"}))}),this.trigger($.extend(eventData,{phase:"after"}))},submit:function(e,t){return this.save(e,t)},save:function(postData,callBack){var obj=this;$(this.box).find(":focus").change(),typeof postData=="function"&&(callBack=postData,postData=null);var errors=obj.validate(!0);if(errors.length!==0)return;if(typeof postData=="undefined"||postData==null)postData={};if(!obj.url||typeof obj.url=="object"&&!obj.url.save){console.log("ERROR: Form cannot be saved because no url is defined.");return}obj.lock(obj.msgSaving+' <span id="'+obj.name+'_progress"></span>'),setTimeout(function(){var params={};params.cmd="save-record",params.recid=obj.recid,$.extend(params,obj.postData),$.extend(params,postData),params.record=$.extend(!0,{},obj.record);var eventData=obj.trigger({phase:"before",type:"submit",target:obj.name,url:obj.url,postData:params});if(eventData.isCancelled===!0)return;var url=eventData.url;typeof eventData.url=="object"&&eventData.url.save&&(url=eventData.url.save);if(obj.last.xhr)try{obj.last.xhr.abort()}catch(e){}if(!$.isEmptyObject(obj.routeData)){var info=w2utils.parseRoute(url);if(info.keys.length>0)for(var k=0;k<info.keys.length;k++){if(obj.routeData[info.keys[k].name]==null)continue;url=url.replace(new RegExp(":"+info.keys[k].name,"g"),obj.routeData[info.keys[k].name])}}var ajaxOptions={type:"POST",url:url,data:eventData.postData,dataType:"text",xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",function(e){if(e.lengthComputable){var t=Math.round(e.loaded/e.total*100);$("#"+obj.name+"_progress").text(""+t+"%")}},!1),e}};w2utils.settings.dataType=="HTTP"&&(ajaxOptions.data=String($.param(ajaxOptions.data,!1)).replace(/%5B/g,"[").replace(/%5D/g,"]")),w2utils.settings.dataType=="RESTFULL"&&(obj.recid!=0&&(ajaxOptions.type="PUT"),ajaxOptions.data=String($.param(ajaxOptions.data,!1)).replace(/%5B/g,"[").replace(/%5D/g,"]")),w2utils.settings.dataType=="JSON"&&(ajaxOptions.type="POST",ajaxOptions.data=JSON.stringify(ajaxOptions.data),ajaxOptions.contentType="application/json"),obj.last.xhr=$.ajax(ajaxOptions).done(function(data,status,xhr){obj.unlock();var eventData=obj.trigger({phase:"before",target:obj.name,type:"save",xhr:xhr,status:status});if(eventData.isCancelled===!0)return;var data,responseText=xhr.responseText;if(status!="error"){if(typeof responseText!="undefined"&&responseText!=""){if(typeof responseText=="object")data=responseText;else try{eval("data = "+responseText)}catch(e){}typeof data=="undefined"&&(data={status:"error",message:obj.msgNotJSON,responseText:responseText}),data["status"]=="error"?obj.error(data.message):obj.original=$.extend({},obj.record)}}else obj.error("AJAX Error "+xhr.status+": "+xhr.statusText),data={status:"error",message:obj.msgAJAXerror,responseText:responseText};obj.trigger($.extend(eventData,{phase:"after"})),obj.refresh(),data.status=="success"&&typeof callBack=="function"&&callBack(data)}).fail(function(e,t,n){var r={status:t,error:n,rawResponseText:e.responseText},i=obj.trigger({phase:"before",type:"error",error:r,xhr:e});if(i.isCancelled===!0)return;console.log("ERROR: server communication failed. The server should return",{status:"success"},"OR",{status:"error",message:"error message"},", instead the AJAX request produced this: ",r),obj.trigger($.extend(i,{phase:"after"}))}),obj.trigger($.extend(eventData,{phase:"after"}))},50)},lock:function(e,t){var n=$(this.box).find("> div:first-child"),r=Array.prototype.slice.call(arguments,0);r.unshift(n),w2utils.lock.apply(window,r)},unlock:function(){var e=this;setTimeout(function(){w2utils.unlock(e.box)},25)},"goto":function(e){typeof e!="undefined"&&(this.page=e),$(this.box).data("auto-size")===!0&&$(this.box).height(0),this.refresh()},generateHTML:function(){var e=[],t="",n;for(var r in this.fields){var i="",s=this.fields[r];typeof s.html=="undefined"&&(s.html={}),s.html=$.extend(!0,{caption:"",span:6,attr:"",text:"",page:0},s.html),typeof n=="undefined"&&(n=s.html.page),s.html.caption==""&&(s.html.caption=s.name);var o='<input name="'+s.name+'" type="text" '+s.html.attr+"/>";if(s.type==="pass"||s.type==="password")o='<input name="'+s.name+'" type = "password" '+s.html.attr+"/>";s.type=="checkbox"&&(o='<input name="'+s.name+'" type="checkbox" '+s.html.attr+"/>"),s.type=="textarea"&&(o='<textarea name="'+s.name+'" '+s.html.attr+"></textarea>"),s.type=="toggle"&&(o='<input name="'+s.name+'" type="checkbox" '+s.html.attr+' class="w2ui-toggle"/><div><div></div></div>'),s.html.group&&(t!=""&&(i+="\n   </div>"),i+='\n   <div class="w2ui-group-title">'+s.html.group+'</div>\n   <div class="w2ui-group">',t=s.html.group),s.html.page!=n&&t!=""&&(e[e.length-1]+="\n   </div>",t=""),i+='\n      <div class="w2ui-field '+(typeof s.html.span!="undefined"?"w2ui-span"+s.html.span:"")+'">'+"\n         <label>"+w2utils.lang(s.html.caption)+"</label>"+"\n         <div>"+o+w2utils.lang(s.html.text)+"</div>"+"\n      </div>",typeof e[s.html.page]=="undefined"&&(e[s.html.page]=""),e[s.html.page]+=i,n=s.html.page}t!=""&&(e[e.length-1]+="\n   </div>");if(this.tabs.tabs)for(var u=0;u<this.tabs.tabs.length;u++)typeof e[u]=="undefined"&&(e[u]="");for(var a in e)e[a]='<div class="w2ui-page page-'+a+'">'+e[a]+"\n</div>";var f="";if(!$.isEmptyObject(this.actions)){var l="";f+='\n<div class="w2ui-buttons">';for(var c in this.actions)["save","update","create"].indexOf(c.toLowerCase())!=-1?l="btn-green":l="",f+='\n    <button name="'+c+'" class="btn '+l+'">'+w2utils.lang(c)+"</button>";f+="\n</div>"}return e.join("")+f},action:function(e,t){var n=this.trigger({phase:"before",target:e,type:"action",originalEvent:t});if(n.isCancelled===!0)return;typeof this.actions[e]=="function"&&this.actions[e].call(this,t),this.trigger($.extend(n,{phase:"after"}))},resize:function(){function l(){n.width($(e.box).width()).height($(e.box).height()),i.css("top",e.header!=""?w2utils.getSize(r,"height"):0),s.css("top",(e.header!=""?w2utils.getSize(r,"height"):0)+(typeof e.toolbar=="object"&&$.isArray(e.toolbar.items)&&e.toolbar.items.length>0?w2utils.getSize(i,"height"):0)),o.css("top",(e.header!=""?w2utils.getSize(r,"height"):0)+(typeof e.toolbar=="object"&&$.isArray(e.toolbar.items)&&e.toolbar.items.length>0?w2utils.getSize(i,"height")+5:0)+(typeof e.tabs=="object"&&$.isArray(e.tabs.tabs)&&e.tabs.tabs.length>0?w2utils.getSize(s,"height")+5:0)),o.css("bottom",f.length>0?w2utils.getSize(f,"height"):0)}var e=this,t=this.trigger({phase:"before",target:this.name,type:"resize"});if(t.isCancelled===!0)return;var n=$(this.box).find("> div"),r=$(this.box).find("> div .w2ui-form-header"),i=$(this.box).find("> div .w2ui-form-toolbar"),s=$(this.box).find("> div .w2ui-form-tabs"),o=$(this.box).find("> div .w2ui-page"),u=$(this.box).find("> div .w2ui-page.page-"+this.page),a=$(this.box).find("> div .w2ui-page.page-"+this.page+" > div"),f=$(this.box).find("> div .w2ui-buttons");l();if(parseInt($(this.box).height())==0||$(this.box).data("auto-size")===!0)$(this.box).height((r.length>0?w2utils.getSize(r,"height"):0)+(typeof this.tabs=="object"&&$.isArray(this.tabs.tabs)&&this.tabs.tabs.length>0?w2utils.getSize(s,"height"):0)+(typeof this.toolbar=="object"&&$.isArray(this.toolbar.items)&&this.toolbar.items.length>0?w2utils.getSize(i,"height"):0)+(o.length>0?w2utils.getSize(a,"height")+w2utils.getSize(u,"+height")+12:0)+(f.length>0?w2utils.getSize(f,"height"):0)),$(this.box).data("auto-size",!0);l(),e.trigger($.extend(t,{phase:"after"}))},refresh:function(){var e=(new Date).getTime(),t=this;if(!this.box)return;if(!this.isGenerated||typeof $(this.box).html()=="undefined")return;$(this.box).find("input, textarea, select").each(function(e,n){var r=typeof $(n).attr("name")!="undefined"?$(n).attr("name"):$(n).attr("id"),i=t.get(r);if(i){var s=$(n).parents(".w2ui-page");if(s.length>0)for(var o=0;o<100;o++)if(s.hasClass("page-"+o)){i.page=o;break}}});var n=this.trigger({phase:"before",target:this.name,type:"refresh",page:this.page});if(n.isCancelled===!0)return;$(this.box).find(".w2ui-page").hide(),$(this.box).find(".w2ui-page.page-"+this.page).show(),$(this.box).find(".w2ui-form-header").html(this.header),typeof this.tabs=="object"&&$.isArray(this.tabs.tabs)&&this.tabs.tabs.length>0?($("#form_"+this.name+"_tabs").show(),this.tabs.active=this.tabs.tabs[this.page].id,this.tabs.refresh()):$("#form_"+this.name+"_tabs").hide(),typeof this.toolbar=="object"&&$.isArray(this.toolbar.items)&&this.toolbar.items.length>0?($("#form_"+this.name+"_toolbar").show(),this.toolbar.refresh()):$("#form_"+this.name+"_toolbar").hide();for(var r in this.fields){var i=this.fields[r];typeof i.name=="undefined"&&typeof i.field!="undefined"&&(i.name=i.field),typeof i.field=="undefined"&&typeof i.name!="undefined"&&(i.field=i.name),i.$el=$(this.box).find('[name="'+String(i.name).replace(/\\/g,"\\\\")+'"]'),i.el=i.$el[0],typeof i.el=="undefined"&&console.log('ERROR: Cannot associate field "'+i.name+'" with html control. Make sure html control exists with the same name.'),i.el&&(i.el.id=i.name);var s=$(i).data("w2field");s&&s.clear(),$(i.$el).off("change").on("change",function(){var e=this.value,n=t.record[this.name]?t.record[this.name]:"",r=t.get(this.name);if(["list","enum","file"].indexOf(r.type)!=-1&&$(this).data("selected")){var i=$(this).data("selected"),s=t.record[this.name];if($.isArray(i)){e=[];for(var o in i)e[o]=$.extend(!0,{},i[o])}$.isPlainObject(i)&&(e=$.extend(!0,{},i));if($.isArray(s)){n=[];for(var o in s)n[o]=$.extend(!0,{},s[o])}$.isPlainObject(s)&&(n=$.extend(!0,{},s))}["toggle","checkbox"].indexOf(r.type)!=-1&&(e=$(this).prop("checked")?!0:!1),["int","float","percent","money","currency"].indexOf(r.type)!=-1&&(e=$(this).data("w2field").clean(e));if(e===n)return;var u=t.trigger({phase:"before",target:this.name,type:"change",value_new:e,value_previous:n});if(u.isCancelled===!0){$(this).val(t.record[this.name]);return}var a=this.value;this.type=="select"&&(a=this.value),this.type=="checkbox"&&(a=this.checked?!0:!1),this.type=="radio"&&r.$el.each(function(e,t){t.checked&&(a=t.value)}),["int","float","percent","money","currency","list","combo","enum","file","toggle"].indexOf(r.type)!=-1&&(a=e);if(["enum","file"].indexOf(r.type)!=-1&&a.length>0){var f=$(r.el).data("w2field").helpers.multi;$(f).removeClass("w2ui-error")}t.record[this.name]=a,t.trigger($.extend(u,{phase:"after"}))}),i.required?$(i.el).parent().parent().addClass("w2ui-required"):$(i.el).parent().parent().removeClass("w2ui-required")}$(this.box).find("button, input[type=button]").each(function(e,n){$(n).off("click").on("click",function(e){var n=this.value;this.id&&(n=this.id),this.name&&(n=this.name),t.action(n,e)})});for(var r in this.fields){var i=this.fields[r],o=typeof this.record[i.name]!="undefined"?this.record[i.name]:"";if(!i.el)continue;i.type=String(i.type).toLowerCase(),i.options||(i.options={});switch(i.type){case"text":case"textarea":case"email":case"pass":case"password":i.el.value=o;break;case"int":case"float":case"money":case"currency":case"percent":case"hex":case"alphanumeric":case"color":case"date":case"time":i.el.value=o,$(i.el).w2field($.extend({},i.options,{type:i.type}));break;case"toggle":w2utils.isFloat(o)&&(o=parseFloat(o)),$(i.el).prop("checked",o?!0:!1),this.record[i.name]=o?1:0;break;case"list":case"combo":if(i.type=="list"){var u=$.isPlainObject(o)?o.id:o,a=i.options.items;$.isArray(a)&&a.length>0&&!$.isPlainObject(a[0])&&(i.options.items=w2obj.field.prototype.normMenu(a));for(var f in i.options.items){var l=i.options.items[f];if(l.id==u){o=$.extend(!0,{},l),t.record[i.name]=o;break}}}else i.type=="combo"&&!$.isPlainObject(o)?i.el.value=o:$.isPlainObject(o)&&typeof o.text!="undefined"?i.el.value=o.text:i.el.value="";$.isPlainObject(o)||(o={}),$(i.el).w2field($.extend({},i.options,{type:i.type,selected:o}));break;case"enum":case"file":$.isArray(o)||(o=[]),$(i.el).w2field($.extend({},i.options,{type:i.type,selected:o}));break;case"select":var a=i.options.items;if(typeof a!="undefined"&&a.length>0){a=w2obj.field.prototype.normMenu(a),$(i.el).html("");for(var c in a)$(i.el).append('<option value="'+a[c].id+'">'+a[c].text+"</option")}$(i.el).val(o);break;case"radio":$(i.$el).prop("checked",!1).each(function(e,t){$(t).val()==o&&$(t).prop("checked",!0)});break;case"checkbox":$(i.el).prop("checked",o?!0:!1);break;default:$(i.el).w2field($.extend({},i.options,{type:i.type}))}}var s=$(this.box).find(".w2ui-page");for(var f=0;f<s.length;f++)$(s[f]).find("> *").length>1&&$(s[f]).wrapInner("<div></div>");return this.trigger($.extend(n,{phase:"after"})),this.resize(),(new Date).getTime()-e},render:function(e){function o(){var e=$(n.box).find("input, select, textarea");e.length>n.focus&&e[n.focus].focus()}var t=(new Date).getTime(),n=this;typeof e=="object"&&($(this.box).find("#form_"+this.name+"_tabs").length>0&&$(this.box).removeAttr("name").removeClass("w2ui-reset w2ui-form").html(""),this.box=e);if(!this.isGenerated)return;if(!this.box)return;var r=this.trigger({phase:"before",target:this.name,type:"render",box:typeof e!="undefined"?e:this.box});if(r.isCancelled===!0)return;$.isEmptyObject(this.original)&&!$.isEmptyObject(this.record)&&(this.original=$.extend(!0,{},this.record));var i="<div>"+(this.header!=""?'<div class="w2ui-form-header">'+this.header+"</div>":"")+'    <div id="form_'+this.name+'_toolbar" class="w2ui-form-toolbar"></div>'+'    <div id="form_'+this.name+'_tabs" class="w2ui-form-tabs"></div>'+this.formHTML+"</div>";$(this.box).attr("name",this.name).addClass("w2ui-reset w2ui-form").html(i),$(this.box).length>0&&($(this.box)[0].style.cssText+=this.style),typeof this.toolbar.render!="function"&&(this.toolbar=$().w2toolbar($.extend({},this.toolbar,{name:this.name+"_toolbar",owner:this})),this.toolbar.on("click",function(e){var t=n.trigger({phase:"before",type:"toolbar",target:e.target,originalEvent:e});if(t.isCancelled===!0)return;n.trigger($.extend(t,{phase:"after"}))})),typeof this.toolbar=="object"&&typeof this.toolbar.render=="function"&&this.toolbar.render($("#form_"+this.name+"_toolbar")[0]),typeof this.tabs.render!="function"&&(this.tabs=$().w2tabs($.extend({},this.tabs,{name:this.name+"_tabs",owner:this})),this.tabs.on("click",function(e){n.goto(this.get(e.target,!0))})),typeof this.tabs=="object"&&typeof this.tabs.render=="function"&&this.tabs.render($("#form_"+this.name+"_tabs")[0]),this.trigger($.extend(r,{phase:"after"})),this.resize();var s=typeof this.url!="object"?this.url:this.url.get;return s&&this.recid!=0?this.request():this.refresh(),$(".w2ui-layout").length==0&&(this.tmp_resize=function(e){w2ui[n.name].resize()},$(window).off("resize","body").on("resize","body",this.tmp_resize)),setTimeout(function(){n.resize(),n.refresh()},150),this.focus>=0&&setTimeout(o,500),(new Date).getTime()-t},destroy:function(){var e=this.trigger({phase:"before",target:this.name,type:"destroy"});if(e.isCancelled===!0)return;typeof this.toolbar=="object"&&this.toolbar.destroy&&this.toolbar.destroy(),typeof this.tabs=="object"&&this.tabs.destroy&&this.tabs.destroy(),$(this.box).find("#form_"+this.name+"_tabs").length>0&&$(this.box).removeAttr("name").removeClass("w2ui-reset w2ui-form").html(""),delete w2ui[this.name],this.trigger($.extend(e,{phase:"after"})),$(window).off("resize","body")}},$.extend(w2form.prototype,w2utils.event),w2obj.form=w2form}(),function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};window.GD||(window.GD={}),$(document).on("page:load ready",function(){var e,t,n,r,i,s,o,u;return new GD.EntriesColumnsFilter,u=function(e,t){var n,r,i,s,o;return $(".select-date-failed").hide(),s=e.find(".start-date").data("date"),i=e.find(".end-date").data("date"),t&&(n=t.date,r=
n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate(),$(t.currentTarget).hasClass("start-date")?(e.find(".start-date").data("date",r),s=r):$(t.currentTarget).hasClass("end-date")&&(e.find(".end-date").data("date",r),i=r)),o=$(".date-range-display.search-input").data("suffix-text")||"",$(".date-range-display.search-input").val(s+" 至 "+i+" "+o)},r=function(e,t){var n,r,i;return i=t.find(".start-date"),n=t.find(".end-date"),r={language:"zh-CN",startDate:i.data("date-startdate"),endDate:n.data("date-enddate")},u(t),i.datepicker(r).on("changeDate",function(e){return n.datepicker("setStartDate",e.date),u(t,e)}),n.datepicker(r).on("changeDate",function(e){return u(t,e)}),e.tooltipster("reposition")},GD.queryByDateRange=function(e){var t;return t=GD.extractExistedQueryParams(),t.start=e.find(".start-date").data("date"),t.end=e.find(".end-date").data("date"),Turbolinks.visit($(".filter-data").data("base-url")+"?"+$.param(t))},GD.initQueryByDateRange=function(e,t){return t==null&&(t=$(".date-range-icon")),t.gdClickTooltip({contentCloning:!1,content:$(".date-range"),backdrop:!0,functionReady:function(t,n){return n.addClass("date-range-tooltip"),n.find(".date-range").show(),r(t,n),n.find(".submit-date").on("click",function(){return e(n)})}})},GD.initQueryByDateRange(GD.queryByDateRange),url("?query")&&$(".filter-search input.search-content").focus().val(""),GD.searchByTextKeyWord=function(){var e,t,n,r,i;return t=GD.extractExistedQueryParams(),r=$(".filter-search input"),n=$.trim(r.val()),n&&($(".search-choice.active").hasClass("serial-search")?(t.serial_number=n,delete t.query):(t.query=n,delete t.serial_number)),e=r.data("url"),i=$.isEmptyObject(t)?e:e+"?"+$.param(t),Turbolinks.visit(i)},GD.initSearchByText=function(){return $(".filter-search").gdCustomTooltip({content:$("#search_type").html(),theme:"search-filter-tooltip",arrow:!1,offsetY:-8}),t(),n()},t=function(){var e;return e=$(".filter-search input"),e.on("keyup",function(t){var n,r;e.trigger("mouseleave");if(!($.trim(e.val()).length>0))return $(".filter-search").tooltipster("hide");$(".filter-search").tooltipster("show"),r=$(".serial-search"),$.isNumeric(e.val())?r.show():r.hide(),n=$(".search-choice.active"),t.keyCode===38&&!n.is(":first-child")&&n.prev().is(":visible")&&(n.removeClass("active"),n.prev().addClass("active"));if(t.keyCode===40&&!n.is(":last-child")&&n.next().is(":visible"))return n.removeClass("active"),n.next().addClass("active")})},n=function(){return $("body").on("mousedown",function(e){return $(".filter-search").tooltipster("hide")}),$(".choice-list").livequery(function(e){return function(){var e;return e=$(".choice-list .search-choice"),e.on("mouseover",function(e){return $(".search-choice.active").removeClass("active"),$(".search-choice:hover").addClass("active")}),e.on("mousedown",function(e){return e.stopPropagation(),GD.searchByTextKeyWord()})}}(this))},i=function(t,n,r){return r==null&&(r=1),e(r),$.each(n,function(e,n){var i,s,o,u,a,f;return _.isObject(n)?(s=n.value,i=(a=n.name)!=null?a:n.value,f=n.sub_choices):s=i=n,o=$("<li data-api-code='"+t+"'><span class='choice'>"+i+"</span><span class='clear-filter-item pull-right'>&times;</span></li>"),o.data("value",s),_.isEmpty(f)?(o.addClass("last-level"),r===2?u=$(".choice-filter-tooltip .items.level-1 ul li.current").data("value"):null,GD.filterParams.contains(t,s,u)&&o.addClass("selected")):(o.data("sub-choices",f),GD.filterParams.contains(t,null,s)&&o.addClass("selected")),$(".choice-filter-tooltip .items.level-"+r+" ul").append(o)})},e=function(e){return $(".choice-filter-tooltip .items.level-"+e+" ul").empty()},s=function(e){return e.siblings(".current").removeClass("current"),e.addClass("current")},o=function(e){return e.find(".fields ul li").removeClass("selected"),$.each(_.keys(GD.filterParams.data),function(t,n){return e.find(".fields [data-api-code='"+n+"']").addClass("selected with-impact-on-tooltip-size")})},GD.initChoiceFilter=function(t){return t==null&&(t="top"),$(".gd-icon-filter").gdClickTooltip({content:$(".filter-data").html(),backdrop:!0,position:t,theme:"choice-filter-tooltip",functionReady:function(t,n){return n.find(".filter-data").show(),t.tooltipster("reposition"),o(n),n.find(".fields li").on("click",function(){var e,t;s($(this)),$(".choice-filter-tooltip .items ul").empty(),e=$(this).data("api-code"),i(e,$(this).data("choices"),1);if($(this).data("total-level")===1)return $(".choice-filter-tooltip .level-2").addClass("gd-hide"),$(".choice-filter-tooltip .arrow").css({marginLeft:-11});$(".choice-filter-tooltip .level-2").removeClass("gd-hide"),$(".choice-filter-tooltip .arrow").css({marginLeft:-107}),t=$(".choice-filter-tooltip .items.level-1 li.selected:first");if(t.length>0)return s(t),i(t.data("api-code"),t.data("sub-choices"),2)}),n.on("click",".items.level-1 li",function(){return _.isEmpty($(this).data("sub-choices"))?($(".choice-filter-tooltip .items.level-1 li.current").removeClass("current"),e(2),GD.filterParams.allowMulti||($(".choice-filter-tooltip .fields li.selected").removeClass("selected"),$(".choice-filter-tooltip .items li.selected").removeClass("selected")),$(this).addClass("selected"),$(".choice-filter-tooltip .fields li.current").addClass("selected"),GD.filterParams.add($(this).data("api-code"),null,$(this).data("value"))):(s($(this)),i($(this).data("api-code"),$(this).data("sub-choices"),2))}),n.on("click",".items.level-2 li",function(){var e;return GD.filterParams.allowMulti||($(".choice-filter-tooltip .fields li.selected").removeClass("selected"),$(".choice-filter-tooltip .items li.selected").removeClass("selected")),$(this).addClass("selected"),e=$(".choice-filter-tooltip .items.level-1 li.current"),e.addClass("selected"),$(".choice-filter-tooltip .fields li.current").addClass("selected"),GD.filterParams.add($(this).data("api-code"),e.data("value"),$(this).data("value"))}),n.on("click",".items.level-2 span.clear-filter-item",function(){var e,t,n,r;return n=$(this).parent("li"),t=n.data("api-code"),e=$(".choice-filter-tooltip .items.level-1 li.current"),r=e.data("value"),GD.filterParams.remove(t,n.data("value").toString(),r),n.removeClass("selected"),GD.filterParams.contains(t,null,r)||$(".choice-filter-tooltip .items.level-1 li.current").removeClass("selected"),GD.filterParams.contains(t)||$(".choice-filter-tooltip .fields li.current").removeClass("selected"),!1}),n.on("click",".items.level-1 span.clear-filter-item",function(){var e;return e=$(this).parent("li"),_.isEmpty(e.data("sub-choices"))?GD.filterParams.remove(e.data("api-code"),e.data("value").toString()):GD.filterParams.remove(e.data("api-code"),null,e.data("value").toString()),e.removeClass("selected"),$(".choice-filter-tooltip .items.level-2 li.selected").removeClass("selected"),GD.filterParams.data[e.data("api-code")]||$(".choice-filter-tooltip .fields li.current").removeClass("selected"),!1}),n.find("#submit_filter").on("click",function(){var e;return e=GD.extractExistedQueryParams(),e=$.extend(e,GD.filterParams.data),Turbolinks.visit($(".filter-data").data("base-url")+"?"+$.param(e))}),n.find("[data-dismiss='tooltipster']").on("click",function(){return GD.filterParams.reset()}),n.find(".fields ul li").first().click(),n.on("click",'[data-toggle="modal"]',function(e){return e.preventDefault(),e.stopPropagation(),t.tooltipster("hide"),$($(this).attr("href")).modal("show")})}})}}),$(document).on("keydown",".filter-search input.search-content",function(e){if($(this).hasClass("disabled")||e.keyCode!==13)return;return GD.searchByTextKeyWord()}),$(function(){return GD.FilterParams=function(){function t(e,t){this.allowMulti=e,this.data=t!=null?t:{},this.data||(this.data={}),this.initialData=$.extend(!0,{},this.data),this.eventHandlers={}}return t.prototype.trigger=function(e){var t;t=this.eventHandlers[e];if(t!=null&&typeof t=="function")return t(this)},t.prototype.on=function(e,t){return this.eventHandlers[e]=t},t.prototype._detectChange=function(e){var t;t=$.extend(!0,{},this.data),e();if(!_.isEqual(t,this.data))return this.trigger("change")},t.prototype.reset=function(){return this._detectChange(function(e){return function(){return e.data=$.extend(!0,{},e.initialData)}}(this))},t.prototype._values=function(e,t){if(!t)return this.data[e];if(this.data[e])return this.data[e][t]},t.prototype.add=function(t,n,r){return this._detectChange(function(i){return function(){var s;if(!i.allowMulti)return i.data={},n?(i.data[t]={},i.data[t][n]=r):i.data[t]=r;if(n){if(!i.data[t]||!i.data[t][n])return(s=i.data)[t]||(s[t]={}),i.data[t][n]=[r];if(e.call(i.data[t][n],r)<0)return i.data[t][n].push(r)}else{if(!i.data[t])return i.data[t]=[r];if(e.call(i.data[t],r)<0)return i.data[t].push(r)}}}(this))},t.prototype.remove=function(e,t,n){return n==null&&(n=null),this._detectChange(function(r){return function(){if(r.allowMulti){n?r.data[e]&&r.data[e][n]&&(r.data[e][n]=t?_.without(r.data[e][n],t):[],r.data[e][n].length===0&&delete r.data[e][n]):r.data[e]=_.without(r.data[e],t);if(_.isEmpty(r.data[e]))return delete r.data[e]}else if(r.contains(e,t,n))return delete r.data[e]}}(this))},t.prototype.contains=function(t,n,r){var i;return r==null&&(r=null),i=this._values(t,r),n?this.allowMulti?e.call(i!=null?i:[],n)>=0:(i!=null?i.toString():void 0)===n:!_.isEmpty(i)},t}()})}.call(this),function(){window.GD||(window.GD={}),GD.resetGeoFieldChooser=function(e){GD.enableBtn(e.find(".geo-field-chooser, .current-location-btn")),e.find(".geo-field-chooser span").text(l("%geo_choose"));if(e.hasClass("mobile"))return e.find(".gd-btn.geo-field-chooser").val(l("%geo_locate"))},GD.Geo=function(){function e(e,t){this.$el=e,this.options=t!=null?t:{},this.options=$.extend({staticMap:!1,mobile:!1,localizable:!1},this.options),this.initMap(),this.options.staticMap||this.options.mobile&&!this.options.localizable||this.initMapEvent()}return e.prototype._noOverrideError=function(e){throw"can't find "+e+" in subclass"},e.prototype.initMap=function(){return this._initMap(this.$el.find(".map-container")[0])},e.prototype.getGeoMethod=function(e){return this.geoArray||(this.geoArray=this._geoArray()),this.geoArray[e]},e.prototype.onGetLocationSuccess=function(e,t){return this.updateMap(e,null,t)},e.prototype.onGetLocationFail=function(){return alert(l("%warn_geo_cannot_get_location")),GD.resetGeoFieldChooser(this.$el)},e.prototype._useNextGeoMethod=function(e){var t;t=this.getGeoMethod(this.geoIndex);if(!t)return;return this.geoIndex++,t(e)},e.prototype.currentLocation=function(e){return e==null&&(e=null),e=e!=null?e:{},this.geoIndex=0,this._useNextGeoMethod(e)},e.prototype.updateMap=function(e,t,n){return t==null&&(t=null),n==null&&(n={}),this.mapObj&&this.setMarker(e,n.zoom),this.showAddress(e,t,n),this.$el.find(".geo-map-coord").html("<span>"+l("%geo_long",{"long":e.lng.toFixed(8)})+"</span>"),this.$el.find(".geo-map-coord").append("<span class='separator'>"+l("%common_separator")+"</span>"),this.$el.find(".geo-map-coord").append("<span>"+l("%geo_lat",{lat:e.lat.toFixed(8)})+"</span>"),this.$el.find("input[name$='[latitude]']").val(e.lat),this.$el.find("input[name$='[longitude]']").val(e.lng)},e.prototype._showAddress=function(e,t){this.$el.find(".geo-map-address").text(l("%geo_address",{address:e})),this.$el.find("input[name$='[address]']").val(e);if(t.onComplete)return t.onComplete()},e.prototype.showAddress=function(e,t,n){return t==null&&(t=null),n==null&&(n={}),t?this._showAddress(t,n):this._showAddressFromLocation(e,n)},e.prototype._initMap=function(e){return this._noOverrideError("_initMap")},e.prototype.initMapEvent=function(){return this._noOverrideError("initMapEvent")},e.prototype._geoArray=function(){return this._noOverrideError("_geoArray")},e.prototype.setMarker=function(e,t){return t==null&&(t=null),this._noOverrideError("setMarker")},e.prototype._showAddressFromLocation=function(e,t){return this._noOverrideError("_showAddressFromLocation")},e.prototype.searchLocation=function(e){return this._noOverrideError("searchLocation")},e}()}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GD.GeoAutonavi=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype._initMap=function(e){var t,n;try{return this.mapObj=new AMap.Map(e,{lang:String.locale})}catch(t){return n=t,console.log(n)}finally{this.mapObj.plugin("AMap.ToolBar",function(e){return function(){var t;return t=e.options.localizable&&e.options.mobile?{offset:new AMap.Pixel(2,65)}:{direction:!1,offset:new AMap.Pixel(-10,5)},e.mapObj.addControl(new AMap.ToolBar(t))}}(this))}},n.prototype.initMapEvent=function(){return AMap.event.addListener(this.mapObj,"click",function(e){return function(t){return e.updateMap(t.lnglat)}}(this))},n.prototype._geoArray=function(){var e,t;return e=function(e){return function(t){var n,r;return r=function(n){return e.onGetLocationSuccess(n.position,t)},n=function(n){n==null&&(n=null);if(e._useNextGeoMethod(t))return;if(n)switch(n.info){case"PERMISSION_DENIED":alert(l("%warn_geo_permission_denied"));break;case"POSITION_UNAVAILBLE":alert(l("%warn_geo_position_unavailable"));break;case"TIMEOUT":alert(l("%warn_geo_timeout"));break;default:alert(l("%warn_geo_unknown_error"))}return GD.resetGeoFieldChooser(e.$el)},e.mapObj.plugin("AMap.Geolocation",function(){var t;return t=new AMap.Geolocation({timeout:5e3,showButton:!1,showCircle:!1,zoomToAccuracy:!0}),e.mapObj.addControl(t),AMap.event.addListener(t,"complete",r),AMap.event.addListener(t,"error",n),t.getCurrentPosition()})}}(this),t=function(e){return function(t){var n;return n=function(){if(e._useNextGeoMethod(t))return;return e.onGetLocationFail()},e.mapObj.plugin("AMap.CitySearch",function(){var r;return r=new AMap.CitySearch,AMap.event.addListener(r,"complete",function(r){var i;if(!(r&&r.city&&r.bounds))return n();i=r.city,e.$el.find(".geo-map-address").text(i),e.$el.find(".geo-map-coord").empty(),e.$el.find("input[name$='[address]']").val(i),e.mapObj.setBounds(r.bounds);if(t.onComplete)return t.onComplete()}),AMap.event.addListener(r,"error",n),r.getLocalCity()})}}(this),[e,t]},n.prototype.setMarker=function(e,t){var n,r;return t==null&&(t=null),this.mapObj.clearMap(),r={map:this.mapObj,icon:"https://webapi.amap.com/images/marker_sprite.png",position:e},this.options.staticMap||this.options.mobile&&!this.options.localizable?new AMap.Marker(r):(n=new AMap.Marker($.extend(r,{draggable:!0,animation:"AMAP_ANIMATION_DROP",cursor:"move",raiseOnDrag:!0})),AMap.event.addListener(n,"dragend",function(e){return function(t){return e.updateMap(t.lnglat)}}(this))),this.mapObj.setZoomAndCenter(t!=null?t:16,e)},n.prototype._showAddressFromLocation=function(e,t){return this.mapObj.plugin("AMap.Geocoder",function(n){return function(){var r;return r=new AMap.Geocoder({radius:1e3,extensions:"all"}),AMap.event.addListener(r,"complete",function(e){var r;return r=e.regeocode.formattedAddress,n._showAddress(r,t)}),r.getAddress(e)}}(this))},n.prototype.searchLocation=function(e){return GD.disableBtn(this.$el.find(".map-search-btn")),AMap.service(["AMap.Geocoder"],function(t){return function(){var n;return n=new AMap.Geocoder,n.getLocation(e,function(e,n){var r,i,s;switch(e){case"complete":r=n.geocodes[0],r&&(i=r.level,s=function(){switch(i){case"省":return 5;case"市":return 10;case"区县":return 12;default:return 16}}(),t.updateMap(r.location,r.formattedAddress,{zoom:s}));break;case"no_data":alert(l("%geo_no_address"));break;default:alert(n)}return GD.enableBtn(t.$el.find(".map-search-btn"))})}}(this))},n}(GD.Geo)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GD.GeoGoogle=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype._initMap=function(e){var t;return t={zoom:4,mapTypeId:google.maps.MapTypeId.ROADMAP,streetViewControl:!1,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_TOP}},this.mapObj=new google.maps.Map(e,t),this.marker=new google.maps.Marker({position:this.mapObj.getCenter(),map:this.mapObj,animation:google.maps.Animation.Drop,draggable:!this.options.staticMap})},n.prototype.initMapEvent=function(){return google.maps.event.addListener(this.mapObj,"click",function(e){return function(t){return e.updateMap(e._latLngFromGoogleLatLng(t.latLng))}}(this)),google.maps.event.addListener(this.marker,"dragend",function(e){return function(t){return e.updateMap(e._latLngFromGoogleLatLng(t.latLng))}}(this))},n.prototype._geoArray=function(){var e;return e=function(e){return function(t){var n,r;return r=function(n){var r;return r={lat:n.coords.latitude,lng:n.coords.longitude},e.onGetLocationSuccess(r,t)},n=function(n){n==null&&(n=null);if(e._useNextGeoMethod(t))return;if(n)switch(n.code){case n.PERMISSION_DENIED:alert(l("%warn_geo_permission_denied"));break;case n.POSITION_UNAVAILABLE:alert(l("%warn_geo_position_unavailable"));break;case n.TIMEOUT:alert(l("%warn_geo_timeout"));break;default:alert(l("%warn_geo_unknown_error"))}return GD.resetGeoFieldChooser(e.$el)},navigator.geolocation?navigator.geolocation.getCurrentPosition(r,n,{timeout:5e3,maximumAge:0}):n()}}(this),[e]},n.prototype._googleLatLng=function(e){return new google.maps.LatLng(e.lat,e.lng)},n.prototype._latLngFromGoogleLatLng=function(e){return{lat:e.lat(),lng:e.lng()}},n.prototype.setMarker=function(e,t){var n;return t==null&&(t=null),n=this._googleLatLng(e),this.mapObj.setZoom(t!=null?t:16),this.mapObj.setCenter(n),this.marker.setPosition(n)},n.prototype._showAddressFromLocation=function(e,t){var n;return n=this._googleLatLng(e),(new google.maps.Geocoder).geocode({latLng:n},function(n){return function(r,i){var s;i===google.maps.GeocoderStatus.OK&&r[0]&&(s=$.trim(r[0].formatted_address.replace(/邮政编码.*/,""))),s?(n.$el.find(".geo-map-address").text(l("%geo_address",{address:s})),n.$el.find("input[name$='[address]']").val(s)):n.$el.find(".geo-map-address").text(l("%geo_no_address")+l("%geo_coord",{"long":e.lng,lat:e.lat}));if(t.onComplete)return t.onComplete()}}(this))},n.prototype.searchLocation=function(e){return GD.disableBtn(this.$el.find(".map-search-btn")),(new google.maps.Geocoder).geocode({address:e},function(e){return function(t,n){return n===google.maps.GeocoderStatus.OK?e.updateMap(e._latLngFromGoogleLatLng(t[0].geometry.location)):alert(l("%geo_no_address")),GD.enableBtn(e.$el.find(".map-search-btn"))}}(this))},n}(GD.Geo)}.call(this),function(){var e;e=function(){function e(e,t,n){this.$container=e,this.useGoogle=t!=null?t:!1,this.staticMap=n!=null?n:!1,this.mobile=this.$container.closest(".mobile-device").length>0,this.localizable=this.$container.hasClass("localizable"),this.initialMap(),this.staticMap||this.initialEvents(),this.$container.data("geo-initialized",!0)}return e.prototype.initialMap=function(){return this.staticMap||GD.resetGeoFieldChooser(this.$container),this.initialExistedPosition()},e.prototype.ensureGeo=function(){if(this.geo===void 0)return this.useGoogle?this.geo=new GD.GeoGoogle(this.$container,{mobile:this.mobile,staticMap:this.staticMap}):this.geo=new GD.GeoAutonavi(this.$container,{mobile:this.mobile,staticMap:this.staticMap,localizable:this.localizable})},e.prototype.initialExistedPosition=function(){var e,t,n,r;return this.staticMap?(e=this.$container.find(".map-container"),n=e.data("latitude"),r=e.data("longitude"),t=e.data("address")):(n=this.$container.find("input[name$='[latitude]']").val(),r=this.$container.find("input[name$='[longitude]']").val(),t=this.$container.find("input[name$='[address]']").val()),this.setLocation(n,r,t)},e.prototype.setLocation=function(e,t,n){var r;if(e&&t)return this.ensureGeo(),r=this.useGoogle?{lat:parseFloat(e),lng:parseFloat(t)}:new AMap.LngLat(parseFloat(t),parseFloat(e)),this.geo.updateMap(r,n);if(n)return this.ensureGeo(),this.geo.searchLocation(n)},e.prototype.initialEvents=function(){return this.$container.find(".geo-field-chooser").click(function(e){return function(){return e.ensureGeo(),e.geo.currentLocation(),e.$container.find(".geo-map-container").show(),e.$container.find(".geo-field-chooser").hide(),GD.recalcFormHeight()}}(this)),this.$container.find(".clear-location-btn").click(function(e){return function(){return e.$container.find(".geo-field-chooser").css("display","inline-block"),e.$container.find(".geo-map-container").hide(),e.$container.find("input[name$='[latitude]']").val(""),e.$container.find("input[name$='[longitude]']").val(""),e.$container.find("input[name$='[address]']").val(""),GD.recalcFormHeight()}}(this)),this.$container.find(".map-search-btn").click(function(e){return function(){var t;t=e.$container.find(".map-search").val();if(t)return e.geo.searchLocation(t)}}(this)),this.$container.find(".current-location-btn").click(function(e){return function(){return e.ensureGeo(),e.geo.currentLocation({onComplete:function(){return GD.enableBtn(e.$container.find(".current-location-btn.disabled"))}})}}(this))},e}(),GD.initGeoView=function(t){var n,r,i,s,o;t==null&&(t=!1),s=$("[data-role=geo]"),o=[];for(r=0,i=s.length;r<i;r++)n=s[r],$(n).data("geo-initialized")?o.push(void 0):o.push(new e($(n),t));return o},GD.initStaticGeoView=function(t){var n,r,i,s,o;t==null&&(t=!1),s=$("[data-role=static-geomap]"),o=[];for(r=0,i=s.length;r<i;r++)n=s[r],o.push(new e($(n),t,!0));return o},$(document).on("keypress",".field-geo-field .map-search",function(e){if(e.keyCode===13)return $(this).closest(".geo-map-action").find(".map-search-btn").click()})}.call(this),function(){GD.FieldBase=function(){function e(e,t){this.fieldJson=e!=null?e:{},this.apiCode=t,this.apiCode||(this.apiCode=this.fieldJson.api_code)}return e.prototype.rawFieldValue=function(e){return e[this.apiCode]},e.prototype.formattedValue=function(e){var t;return t=this.rawFieldValue(e),_.isArray(t)?t.join("，"):t},e.prototype.formattedValueForDetail=function(e){var t,n;return n=this.rawFieldValue(e),_.isArray(n)?(t="<ul>",_.each(n,function(e){return t+="<li>"+e+"</li>"}),t+="</ul>"):this.formattedValue(e)},e.prototype.optimalColumWidth=function(){return 100},e}()}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GD.SelectableField=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.formattedValue=function(e){var t,n;return n=this.rawFieldValue(e),t=_.first(_.where(this.fieldJson.choices,{api_code:n})),(t!=null?t._type:void 0)==="OtherChoice"?e[this.apiCode+"_other"]||t.value:t!=null?t.value:void 0},n}(GD.FieldBase)}.call(this),function(){window.GD||(window.GD={}),$(function(){return GD.AddressSelector=function(){function e(e){var t;this.data=e,this.provinces=function(){var e;e=[];for(t in this.data)e.push(t);return e}.call(this)}return e.prototype.render=function(e,t,n,r,i,s){var o,u,a,f,l;r==null&&(r=""),i==null&&(i=""),s==null&&(s=""),e.html("<option value=''>- 省/自治区/直辖市 -</option>"),l=this.provinces;for(o=0,u=l.length;o<u;o++)f=l[o],a=$("<option value='"+f+"'>"+f+"</option>"),f===r&&a.prop("selected",!0),e.append(a);return this.renderCityOptions(r,t,i),this.renderDistrictOptions(r,i,n,s),e.on("change",function(r){return function(){return r.renderCityOptions(e.val(),t),r.renderDistrictOptions(e.val(),"",n)}}(this)),t.on("change",function(r){return function(){return r.renderDistrictOptions(e.val(),t.val(),n)}}(this))},e.prototype.renderCityOptions=function(e,t,n){var r,i,s,o,u,a;n==null&&(n=""),t.html("<option value=''>- 市 -</option>");if(this.data.hasOwnProperty(e)){u=_.keys(this.data[e]),a=[];for(i=0,s=u.length;i<s;i++)r=u[i],o=$("<option value='"+r+"'>"+r+"</option>"),r===n&&o.prop("selected",!0),a.push(t.append(o));return a}},e.prototype.renderDistrictOptions=function(e,t,n,r){var i,s,o,u,a,f,l;r==null&&(r=""),n.html("<option value=''>- 区/县 -</option>");if((a=this.data[e])!=null?a[t]:void 0){f=this.data[e][t],l=[];for(s=0,o=f.length;s<o;s++)i=f[s],u=$("<option value='"+i+"'>"+i+"</option>"),i===r&&u.prop("selected",!0),l.push(n.append(u));return l}},e}(),GD.initAddressSelector=function(e){var t,n,r,i,s,o,u,a;if(GD.addressSelector){u=$(e).find("[data-role=address]"),a=[];for(i=0,s=u.length;i<s;i++)t=u[i],o=$(t).find("[data-role=province]"),n=$(t).find("[data-role=city]"),r=$(t).find("[data-role=district]"),a.push(GD.addressSelector.render(o,n,r,o.data("value"),n.data("value"),r.data("value")));return a}},$(document).on("ready page:load ajax:complete",function(){if(!($(".dashboard").length>0))return GD.initAddressSelector(document)})})}.call(this),function(){window.GD||(window.GD={}),$(function(){var e;return e=function(e,t){var n,r,i,s,o,u,a,f,c;c=e.find("option:selected"),t.html("<option value=''>"+l("%select_prompt")+"</option>"),a=(u=c.data("choices"))!=null?u:[];for(s=0,o=a.length;s<o;s++)n=a[s],typeof n=="object"?(r=n.name,i=(f=n.value)!=null?f:r):(r=n,i=n),t.append("<option value='"+i+"'>"+r+"</option>");t.val(t.data("value"));if($.mobile)return t.selectmenu("refresh",!0)},GD.initCascadeSelector=function(t){var n,r,i,s,o,u;o=$(t).find("[data-role=cascade]"),u=[];for(r=0,i=o.length;r<i;r++)n=o[r],s=$(n).find("[data-role=level_1]"),e(s,$(n).find("[data-role=level_2]")),u.push(s.on("change",function(){var t;return t=$(this).parents("[data-role=cascade]").find("[data-role=level_2]"),t.data("value",null),e($(this),t)}));return u},$(document).on("ready page:load ajax:complete",function(){if(!($(".dashboard").length>0))return GD.initCascadeSelector(document)})})}.call(this),function(){var e,t,n,r,i,s,o,u,a,f,c,h,p,d,v,m,g,y,b,w,E,S,x,T;window.GD||(window.GD={}),T=$.support.xhrFormDataFileUpload,d=function(e,t,n){var r,i;return t==null&&(t=""),n==null&&(n=null),(i=e.find("[data-role=cancel]").data("jqXHR"))!=null&&i.abort(),e.removeClass("error"),r=e.find(".status"),r.removeClass("error"),r.find(".file-name").removeClass("error").text(t),r.find(".error").remove(),r.find(".file-name + .error").remove(),r.find(".file-size-status").show(),e.find(".progress-bar").css({width:"0%"}).show(),r.find(".file-size").text(n),r.show(),e.find(".select-area .preview").empty(),e.find("input[data-role=attachment_id]").val("")},m=function(e,t){return e.addClass("error"),e.find("input[data-role=attachment_id]").val(""),e.find(".status .progress .progress-bar").addClass("initial").text("0%").css("width","auto"),e.find(".status .file-size-status").hide(),e.find(".actions").show(),e.find(".status").addClass("error"),e.find(".status .file-name").addClass("error").after("<span class='error'>"+l("%bracket",{content:t})+"</span>")},o=function(t,n){var r,i,s,o,u,a,f,c,h,p,d,v;n==null&&(n=""),t.find(".attachment-select-trigger").hide(),u=t.data("api-code"),c=t.find("input:file"),p=c.data("max-size"),a=c.attr("accept"),i=a!=="*"?_.map(a.split(","),function(e){return e.split(".").pop()}):[],_.isEmpty(i)||(s=i.join(l("%common_separator"))),v=t.find(".attachment");for(f=0,h=v.length;f<h;f++)o=v[f],r=$(o),d=$("<input class='origin-file-input' type='file' name='entry["+u+"]' data-max-size='"+p+"' accept='"+a+"'>"),e(t,d),n&&d.after($("<div class='help-block inline-error'><i class='gd-icon-times-circle'></i>"+n+"</div>")),r.html(d).show(),_.isEmpty(i)||r.after($("<p class='text-muted accept-file-extensions-text'>"+l("%attachment_media_type_support")+" "+s+"</p>"));return t.closest("form").attr("enctype","multipart/form-data")},f=function(e){var t,n;if(!e)return;if(e==="*")return;return t=_.map(e.toString().split(","),function(e){return e.split(".").pop()}).join("|"),n=RegExp(".*\\.("+t+")$","gi")},e=function(e,t){return t.off("change").on("change",function(t){var n,r,i,s,o;i=(o=t.target)!=null?o.files[0]:void 0;if(!i)return;return n=$(this).attr("accept"),n&&(s=f(n)),r=GD.validateFile(i,$(this).data("max-size"),s),u(e,r)})},u=function(e,t){var n,r;r=e.find(".attachment"),n=e.closest("form").find(".submit-field input.submit, .entry-show .actions [data-role='submit']"),GD.clearErrorMessageBelow(r),GD.enableBtn(n);if(!_.isEmpty(t))return GD.disableBtn(n),_.each(t,function(e){return GD.showErrorMessageBelow(r,e)})},h=function(e){return e.find(".progress-bar").css("width","0%"),e.siblings().size()>0?e.remove():(e.find("[data-role=attachment_id]").val(""),e.hide())},b=function(e){var t,n;return n=e.find(".attachment:visible").size(),t=e.find(".attachment-select-trigger"),t.toggle(n<t.data("max-file-quantity"))},w=function(e){var t,n,r;return n=e.find(".attachment:visible").size(),r=e.find(".uploaded").size(),t=e.closest("form").find(".submit-field input.submit, .entry-show .actions [data-role='submit']"),t.data("fileUploading",n-r),GD.updateSubmitBtn()},S=function(e,t,n){var r;t.find("input[data-role=attachment_id]").val(n.attachment_id);if(n.image_url!=null)return r="<a href='"+n.image_url_for_lightbox+"' rel='lightbox["+e.field+"]'>"+("<img src='"+n.image_url+"'></a>"),t.find(".preview-area .preview").html(r)},x=function(e,t){var n;return n=_.isArray(t)?t.join(l("%common_separator")):t,m(e,n)},E=function(e,t,n,r){var i;return i=t.context,$.ajax({type:"POST",url:"/p/a/en",data:n,dataType:"json"}).done(function(t){return setTimeout(function(){return i.find(".progress-bar").css("width","100%").fadeOut(),w(e)},200),S(n,i,t)}).fail(function(e){var t;return t=$.parseJSON(e.responseText),x(i,t.errors)})},v=function(e,t){var n,r,i,s;return n=t.name.split("."),r=n[n.length-1].toLowerCase(),i=(s=GD.attachmentIconPath[r])!=null?s:GD.attachmentIconPath["default"],e.find(".preview-area .preview").html("<img src='"+i+"'>")},a=function(e){return setTimeout(function(){return e.find(".attachment-error-message").html("")},3e3)},g=function(e,t){var n,r,i;return i=e.find(".attachment.rechoosing"),n=e.find(".attachment").first(),e.find(".attachment:hidden").size()===1?t.context=n.show():i.size()>0?(t.context=i,i.removeClass("rechoosing")):(r=n.clone().show(),e.find(".attachments").append(r),t.context=r),t.context.removeClass("uploaded")},p=function(e){var t;return t=e.find("input:file"),t.prop("multiple",t.data("origin-multiple"))},y=function(e,t){var n;return n=Date.parse(new Date)+"_"+_.random(0,1e3)+"_"+t,e.formData={accept:"text/plain; charset=utf-8",token:GD.xhrUploadToken,"x:field_api_code":e.context.closest(".field[data-api-code]").data("api-code"),"x:timestamp_with_random_number":n}},t=function(e,t){return t.field=e.data("api-code"),t.maxFileQuantity=e.find(".attachment-select-trigger").data("max-file-quantity"),t.availableFileQuantity=t.maxFileQuantity-e.find(".attachment:visible").size()},r=function(e){return e.on("click",".attachment a[data-role=cancel]",function(t){var n;return h($(this).closest(".attachment")),b(e),(n=$(this).data("jqXHR"))!=null&&n.abort(),w(e)})},s=function(e){return e.on("click",".attachment [data-role=rechoose]",function(t){return e.find("input:file").prop("multiple",!1),$(this).closest(".attachment").addClass("rechoosing")})},i=function(e){return r(e),s(e),e.find(".attachment-select-trigger").on("dragleave",function(){return $(this).removeClass("drag-over")})},n=function(e,t){var n,r,i;return n=e.find(".attachment-error-message"),i=e.find(".attachment:visible").hasClass("rechoosing"),r=i||t.availableFileQuantity>0,r?n.empty():n.html(l("%max_file_quantity",{maxFileQuantity:t.maxFileQuantity})),r},c=function(e){var r,s;if(typeof $("input:file").fileupload!="function")return;return i(e),s=0,r=e.find(".attachment-select-trigger"),e.find(".jquery-file-upload-file-input").fileupload({dataType:"json",dropZone:r,paramName:"file",sequentialUploads:!0,url:"https://up.qbox.me/",dragover:function(){return r.addClass("drag-over")},drop:function(){return r.removeClass("drag-over")},add:function(i,o){var u,a,c,h;t(e,o);if(!n(e,o))return!1;g(e,o),c=o.files[0],v(o.context,c),d(o.context,c.name,GD.numberToHumanSize(c.size)),u=$(this).data("weixin-accepts")||$(this).attr("accept"),u&&(h=f(u)),a=GD.validateFile(c,$(this).data("max-size"),h);if(a.length>0)return w(e),r.hide(),m(o.context,a.join(l("%common_separator")));if(!o.context.hasClass("preview"))return y(o,s),o.context.find("[data-role=cancel]").data("jqXHR",o.submit()),b(e),s+=1,w(e)},progress:function(e,t){var n,r;return n=parseInt(t.loaded/t.total*100,10),r=Math.min(n,99)+"%",t.context.find(".progress-bar").css("width",r)},fail:function(t,n){var r;return(r=n.jqXHR.status)===401?m(n.context,l("%upload_failed_"+n.jqXHR.status)):n.jqXHR.status===400?o(e,l("%upload_failed_400")):(n.jqXHR.status!==0&&$.post("/p/a/failure",{url:url(),status:n.jqXHR.status,message:n.jqXHR.responseText,file_name:n.files[0].name,authenticity_token:n.context.closest("form").find("[name=authenticity_token]").val(),user_agent:navigator.userAgent
,comment:"window.FormData = "+T+", isMobile = "+!!GD.isMobile}),m(n.context,l("%upload_failed",{status:n.jqXHR.status})))},done:function(t,n){var r;return a(e),p(e),n.context.addClass("uploaded"),r=n.result,r?E(e,n,r):m(n.context,l("%upload_failed_401"))}})},GD.initializeFileUploads=function(e){var t,n,r,i,s;i=e.find(".field-attachment-field"),s=[];for(n=0,r=i.length;n<r;n++)t=i[n],T?s.push(c($(t))):s.push(o($(t)));return s},$(document).on("ready page:load ajax:complete",function(){return GD.initializeFileUploads($(document))}),$(document).on("mouseenter",".field-attachment-field .attachment:not(.error)",function(){return $(this).find(".web-actions").show()}),$(document).on("mouseleave",".field-attachment-field .attachment:not(.error)",function(){return $(this).find(".web-actions").hide()})}.call(this),function(){var e;e=function(e){var t,n;return n=$.trim(e.val()),t=e.attr("name").match(/\[(.+)\]$/)[1],[n,t]},$(document).on("click","[data-role='verification_sender'] a.send-token-link:not(.disabled):not(.preview)",function(){var t,n,r,i,s,o,u;u=$(this).data("url");if(!u)return;return GD.clearErrorMessageBelow($(this)),s=e($(this).closest("[data-role='verification_sender']").find(".mobile-input")),r=s[0],i=s[1],GD.isMobileNumber(r)?(o={mobile:r,field_api_code:i},t=$(this).closest("form").find("[name='authenticity_token']").val(),n={field_verification:o,authenticity_token:t,form_id:$(this).data("form-id")},(new GD.SMSSender($(this),$(this).data("url"))).send(n)):GD.showErrorMessageBelow($(this),l("%warn_wrong_mobile_number"))})}.call(this),function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};window.GD||(window.GD={}),$(function(){var t,n,r;return r=function(e){var t,n,r,i,s;n=$("[name='entry["+e+"]']:visible:not(.logic-hidden)").filter(":radio:checked, :not(:radio)").add("[name='entry["+e+"][]']:visible:checked"),s=[];for(r=0,i=n.length;r<i;r++)t=n[r],s.push($(t).val());return s},n=function(){function e(e,t){this.apiCode=t,this.targets=[],this.element=$(e).find("[name='entry["+this.apiCode+"]']"),this.elementContainer=$(e).find(".field[data-api-code='"+this.apiCode+"']"),this.elementContainer.addClass("logic-trigger")}return e.prototype._informTargets=function(e,t){var n,r,i,s,o;t=t!=null?t:!0,i=this.targets,s=[];for(n=0,r=i.length;n<r;n++)o=i[n],s.push(o.set(this.apiCode,e,t));return s},e.prototype.run=function(e){return this.element.on("change",function(t){return function(n){t._informTargets(r(t.apiCode),e);if(!$(n.target).hasClass("with-other-choice"))return n.stopPropagation()}}(this)),this.elementContainer.on("change.formLogic",function(e){return function(){return e._informTargets(r(e.apiCode),!1)}}(this))},e}(),t=function(){function t(e,t,n){var i,s,o,u,a;this.apiCode=t,this.triggerConditions=n,this.element=$(e).find("[name^='entry["+this.apiCode+"]']"),this.elementContainer=$(e).find(".field[data-api-code='"+this.apiCode+"']"),u=this.element;for(s=0,o=u.length;s<o;s++)i=u[s],$(i).data("disabled",$(i).prop("disabled"));for(a in this.triggerConditions)this.set(a,r(a),!1)}return t.prototype._onElementContainerShowHide=function(){return this.elementContainer.trigger("change.formLogic"),GD.recalcFormHeight(),$(window).trigger("formContentShowHide")},t.prototype.set=function(t,n,r){var i,s,o,u;r==null&&(r=!0),u=(s=this.elementContainer.data("triggered-by"))!=null?s:[],n&&_.intersection(n,this.triggerConditions[t]).length>0?e.call(u,t)<0&&u.push(t):u=_.without(u,t),this.elementContainer.data("triggered-by",u),i=!this.elementContainer.hasClass("logic-hidden"),o=u.length>0,o&&!i&&(this.elementContainer.removeClass("logic-hidden"),this.elementContainer.slideDown(r?"fast":0,function(e){return function(){var t,n,r,i;e.elementContainer.trigger("shown.logic"),autosize(e.elementContainer.find("textarea")),i=e.element;for(n=0,r=i.length;n<r;n++)t=i[n],$(t).data("disabled")||$(t).prop("disabled",!1);return e._onElementContainerShowHide()}}(this)));if(!o&&i)return this.elementContainer.addClass("logic-hidden"),this.elementContainer.slideUp(r?"fast":0,function(e){return function(){return e.elementContainer.trigger("hidden.logic"),e.element.prop("disabled",!0),e._onElementContainerShowHide()}}(this))},t}(),GD.FormLogic=function(){function e(e,r){var i,s,o,u,a;r==null&&(r=document),this.triggers={},this.targets={};for(o in e){a=e[o],(i=this.targets)[o]||(i[o]=new t(r,o,a));for(u in a)(s=this.triggers)[u]||(s[u]=new n(r,u)),this.triggers[u].targets.push(this.targets[o])}}return e.prototype.run=function(e){var t,n,r,i;r=this.triggers,i=[];for(t in r)n=r[t],i.push(n.run(e));return i},e}(),GD.initFormLogic=function(e,t){return t==null&&(t=document),(new GD.FormLogic(e,t)).run()}})}.call(this),function(){$(function(){var e,t,n;return e=function(){function e(e){var t,n,r,i,s;s=e.sku,this.fieldApiCode=e.fieldApiCode,this.goodsApiCode=e.goodsApiCode,s==null&&(s={}),this.specification=(n=s.specification)!=null?n:{},this.price=parseFloat((r=s.price)!=null?r:e.price),t=(i=s.inventory)!=null?i:e.inventory,this.inventory=t!=null?parseInt(t):null}return e.prototype.priceDisplay=function(){return"<span class='currency'>&yen;</span>"+this.price.toFixed(2)},e.prototype.inventoryDisplay=function(e,t){return this.inventory==null?"":this.inventory>0?e+" "+this.inventory+" "+t:l("%sold_out")},e}(),t=function(){function t(e,t){this.$el=e,this.shoppingCart=t,this.initialPriceDisplay=this.$el.find(".price").html(),this.initialInventoryDisplay=this.$el.find(".inventory").html(),this.unit=this.$el.data("unit"),this._initializeCurrentSpecification(),this._initializeGoodsSKUs(),this._bindOnDimensionChangeEvent(),this._bindOnIncreaseDecreaseClickEvent(),this._bindOnNumberChangeEvent(),this._bindShowHideEvent(),(this.$el.is(":visible")||this._mobileGoodsVisible())&&this._updateCurrentGoodsSKU()}return t.prototype._addGoodsSKU=function(t,n,r,i,s){var o;return r==null&&(r=null),i==null&&(i=null),s==null&&(s=null),o=new e({fieldApiCode:t,goodsApiCode:n,sku:r,price:i,inventory:s}),this.goodsSKUs.push(o)},t.prototype._initializeGoodsSKUs=function(){var e,t,n,r,i,s,o,u,a;this.goodsSKUs=[],s=this.$el.find("input.number"),e=s.data("field-api-code"),t=s.data("goods-api-code"),a=this.$el.find(".dimensions").data("skus");if(!_.isEmpty(a))for(n=0,i=a.length;n<i;n++)u=a[n],this._addGoodsSKU(e,t,u);if(this.goodsSKUs.length===0)return o=s.data("goods-price"),r=s.data("inventory"),this._addGoodsSKU(e,t,null,o,r),this._updateNumberInput(),this._updateDecreaseIncreaseBtn(0)},t.prototype._matchedGoodsSKU=function(){return _.find(this.goodsSKUs,function(e){return function(t){return _.isEqual(t.specification,e.currentSpecification)}}(this))},t.prototype._updateNumberInput=function(){var e,t;return t=this.$el.find("input.number"),e=this._matchedGoodsSKU(),t.prop("disabled",e==null||e.inventory!=null&&e.inventory===0)},t.prototype._updateDecreaseIncreaseBtn=function(e){var t,n,r;r=this._matchedGoodsSKU(),n=$(this.$el.find(".increase")),t=$(this.$el.find(".decrease")),n.toggleClass("disabled",r==null||r.inventory!=null&&r.inventory<=e),t.toggleClass("disabled",e<=0);if(GD.isLowVersionIE())return n.html(n.html()),t.html(t.html())},t.prototype._updatePriceAndInventoryDisplay=function(){var e;return e=this._matchedGoodsSKU(),e!=null?(this.$el.find(".price").html(e.priceDisplay()),this.$el.find(".inventory").html(e.inventoryDisplay(this.$el.data("inventory-label"),this.$el.data("unit")))):(this.$el.find(".price").html(this.initialPriceDisplay),this.$el.find(".inventory").html(this.initialInventoryDisplay))},t.prototype._bindOnDimensionChangeEvent=function(){var e;return e=this,this.$el.find(".dimension-options input:radio").change(function(){var t,n,r;return n=e.$el.find("input.number"),n.val(0).change(),t=$(this).closest(".dimension-options"),t.find("label.selected").removeClass("selected"),r=t.find("input:radio:checked"),r.next("label").addClass("selected"),e.currentSpecification[r.data("dimension")]=r.val(),e._updatePriceAndInventoryDisplay(),e._updateNumberInput(),e._updateDecreaseIncreaseBtn(0)}),this.$el.find(".dimension-options label").click(function(){var t;return t=$(this).attr("for"),e.$el.find("#"+t).prop("checked",!0).trigger("change")})},t.prototype._bindOnIncreaseDecreaseClickEvent=function(){var e;return e=this,this.$el.find(".number-container a").click(function(t){var n,r,i;if($(this).hasClass("disabled"))return!1;t.preventDefault(),r=e._matchedGoodsSKU();if(r!=null){i=e._currentNumber(),n=$(this).is(".increase")?i+1:i-1;if(n>=0&&!(r.inventory!=null&&n>r.inventory))return e.$el.find("input.number").val(n).trigger("change")}})},t.prototype._bindOnNumberChangeEvent=function(){var e;return e=this,this.$el.find("input.number").on("keydown",function(e){if($.inArray(e.keyCode,[46,8,9,27,13])!==-1||e.keyCode>=35&&e.keyCode<=40)return;if((e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105))return e.preventDefault()}),this.$el.find("input.number").change(function(){var t,n;return t=$(this).val(),t&&$.isNumeric(t)&&t>0?$(this).val(parseInt(t)):$(this).val(0),n=e._matchedGoodsSKU(),n!=null&&n.inventory!=null&&t>n.inventory&&$(this).val(n.inventory),e._updateDecreaseIncreaseBtn(t),e._addCurrentGoodsSKUsToShoppingCart()})},t.prototype._bindShowHideEvent=function(){return this.$el.on("shown.logic",function(e){return function(){return e._addCurrentGoodsSKUsToShoppingCart()}}(this)),this.$el.on("hidden.logic",function(e){return function(){return e._updateShoppingCart(0)}}(this))},t.prototype._addCurrentGoodsSKUsToShoppingCart=function(e){return e==null&&(e=!1),this._updateShoppingCart(this._currentNumber(),e)},t.prototype._updateShoppingCart=function(e,t){var n;n=this._matchedGoodsSKU();if(n!=null)return this.shoppingCart.updateGoodsSKUNumber(n,e,this.unit,t),this.$el.toggleClass("active",e>0)},t.prototype._updateCurrentGoodsSKU=function(){return this._addCurrentGoodsSKUsToShoppingCart(!0),this._updatePriceAndInventoryDisplay(),this._updateNumberInput(),this._updateDecreaseIncreaseBtn(this._currentNumber())},t.prototype._initializeCurrentSpecification=function(){var e,t,n,r,i;this.currentSpecification={},n=this.$el.find(".dimensions input:radio:checked"),r=[];for(e=0,t=n.length;e<t;e++)i=n[e],r.push(this.currentSpecification[$(i).data("dimension")]=$(i).val());return r},t.prototype._currentNumber=function(){return parseInt(this.$el.find("input.number").val())},t.prototype._mobileGoodsVisible=function(){return GD.isPhone&&this.$el.parents(".field [data-role=collapsible]").is(":visible")},t}(),n=function(){function e(){this.goodsList=[],this.eventHandlers={}}return e.prototype.on=function(e,t){return this.eventHandlers[e]=t},e.prototype.trigger=function(e){var t;t=this.eventHandlers[e];if(t!=null&&typeof t=="function")return t(this)},e.prototype.updateGoodsSKUNumber=function(e,t,n,r){var i;r==null&&(r=!1),i=_.find(this.goodsList,function(t){return _.isEqual(t.goodsSKU,e)}),i!=null&&this.goodsList.splice(_.indexOf(this.goodsList,i),1),t>0&&this.goodsList.push({goodsSKU:e,number:t,unit:n});if(!r)return this.trigger("change")},e.prototype.totalPrice=function(){var e,t,n,r,i;i=0,r=this.goodsList;for(t=0,n=r.length;t<n;t++)e=r[t],i+=e.goodsSKU.price*e.number;return i},e.prototype._findGoodsByFieldApiCode=function(e){return _.filter(this.goodsList,function(t){return t.goodsSKU.fieldApiCode===e})},e.prototype.clearOnField=function(e){var t,n,r,i;i=this._findGoodsByFieldApiCode(e);for(n=0,r=i.length;n<r;n++)t=i[n],this.goodsList.splice(this.goodsList.indexOf(t),1);return this.trigger("change")},e}(),GD.initGoods=function(e){var r,i,s,o,u,a,f,c;f=new n,r=function(t){var n;return n=$(e).find(".fields .field[data-api-code='"+t+"'] .field-label"),$.trim(n.clone().children().remove().end().text())},i=function(t){var n,r,i;return n=$(e).find(".field[data-api-code='"+t.fieldApiCode+"'] [data-goods-api-code='"+t.goodsApiCode+"']").parents("[data-role=goods]"),r=$.trim(n.find(".name").text()),i=n.find(".dimensions input:radio:checked").map(function(e,t){return $.trim($(t).next("label").text())}).get().join(l("%common_separator")),i===""?""+r:r+"（"+i+"）"},c=function(t,n){var s,o,u,a,f,c,h,p,d,v,m,g;n==null&&(n="update");if(_.isEmpty(t.goodsList))$(e).find("#shopping_cart").empty();else{g=$("<div class='content'></div>"),m=t.goodsList;for(h=0,p=m.length;h<p;h++)a=m[h],c=a.goodsSKU,u=c.fieldApiCode,s=g.find(".cart-field[data-api-code='"+u+"']"),s.length>0?(o=s,f=o.find("ul")):(o=$("<div class='cart-field' data-api-code='"+u+"'></div>"),o.append("<div class='cart-field-label'>"+r(u)+"：</div> "),f=$("<ul></ul>"),o.append(f),g.append(o)),d=$("<li></li>"),d.append("<span class='goods-name'>"+i(c)+"</span>"),d.append("<span class='price-number'><span class='currency'>&yen;</span>"+c.price.toFixed(2)+"/"+a.unit+" &times; "+a.number+"</span>"),d.append("<span class='price-result'><span class='currency'>&yen;</span>"+(c.price*a.number).toFixed(2)+"</span>"),f.append(d);g.append("<div class='summary'>"+l("%total")+"<span class='total-price'><span class='currency'>&yen;</span>"+t.totalPrice().toFixed(2)+"</span></div>"),$(e).find("#shopping_cart").html(g)}return v=_.isEmpty(t.goodsList)&&$("[data-role=goods]").closest(".form-group").find(".field-label:visible").length>0,$(".submit-field.payment input.submit").data("no-goods-selected",v),typeof GD.updateSubmitBtn=="function"&&GD.updateSubmitBtn(),typeof GD.recalcFormHeight=="function"?GD.recalcFormHeight():void 0};if($(e).find("[data-role=goods]").length>0){f.on("change",c),a=$(e).find("[data-role=goods]");for(o=0,u=a.length;o<u;o++)s=a[o],new t($(s),f);return c(f,"init"),$(e).on("hidden.logic",".field[data-api-code]",function(){return f.clearOnField($(this).data("api-code"))}),$(e).on("shown.logic",".field[data-api-code]",function(){var e,t,n,r,i;r=$(this).find("[data-role=goods] input.number"),i=[];for(t=0,n=r.length;t<n;t++)e=r[t],$(e).val()>0?i.push($(e).trigger("change")):i.push(void 0);return i})}},$(document).on("ready page:load",function(){if(!($(".dashboard").length>0))return GD.initGoods(document)})})}.call(this),function(){window.GD||(window.GD={}),GD.initLikert=function(e){return $(e).on("click",".likert td",function(e){var t;if($("#form_design").length>0||$(e.target).is("input:radio"))return;t=$(this).find("input:radio");if(t.length>0)return t.prop("checked",!0)})},$(document).on("ready page:load",function(){if(!($(".dashboard").length>0))return GD.initLikert(document)})}.call(this),function(){var e,t;t=function(e,t){var n;return n=$(e).closest(".field").find("input.other-choice-input"),$(e).find(".other-choice-item").is(":selected")?(n.show(),n.removeClass("gd-hide"),t&&n.focus(),n.closest(".ui-input-text").show()):(n.hide(),n.addClass("gd-hide"),n.closest(".ui-input-text").hide())},e=function(e){return function(e,t){return $(t).closest(".other-choice-area").find("input."+e)}}(this),GD.initialDropdownOtherChoice=function(e,n){return $(e).find(".field select.with-other-choice").each(function(){return t(this,n)})},$(document).on("ready page:load",function(){return GD.initialDropdownOtherChoice(document,!1),$(".entry form, #new_entry").on("submit",function(){return $(this).find("input.other_choice").each(function(){if(!$(this).is(":checked"))return e("other-choice-input",this).val("")}),$(this).find("option.other-choice-item").each(function(){if(!$(this).is(":selected"))return $(this).closest(".field").find("input.other-choice-input").val("")})})}),$(document).on("click",".other-choice-input",function(){var t;t=e("other_choice",this);if(!t.is(":checked")){t.click();if(t.checkboxradio!=null)return $("input[type=radio], input[type=checkbox]").checkboxradio("refresh")}}),$(document).on("click","input.other_choice",function(){$(this).checkboxradio!=null&&$(this).checkboxradio("refresh");if($(this).is(":checked"))return e("other-choice-input",this).focus()}),$(document).on("change","form .field select.with-other-choice",function(){return t($(this),!0)})}.call(this),function(){$(function(){var e,t,n,r,i,s;return i=!0,r=function(e,t,n,r){$(e).find(".rating-group i").removeClass("hover");if(r!=="")return $(e).find(".rating-group[data-field-id="+t+"] i:lt("+r+")").addClass("highlight"),$(e).find(".rating-group[data-field-id="+t+"] i:gt("+(r-1)+")").removeClass("highlight")},e=function(e){return $(e).off("click touchend",".rating-group i"),$(e).on("click touchend",".rating-group i",function(t){var n,s,o;return t.stopPropagation(),i=!1,n=$(this).parents(".rating-group").data("field-id"),s=$(this).parents(".rating-group").data("rating-type"),o=$(this).data("value"),$(e).find("#entry_"+n).val($(this).data("value")),r(e,n,s,o)})},t=function(e){return $(e).off("mouseenter touchstart",".rating-group i"),$(e).on("mouseenter touchstart",".rating-group i",function(t){var n,r,s;t.stopPropagation(),GD.isMobile&&(i=!0);if(i)return n=$(this).parents(".rating-group").data("field-id"),r=$(this).parents(".rating-group").data("rating-type"),s=$(this).data("value"),$(e).find(".rating-group[data-field-id="+n+"] i:lt("+s+")").removeClass("highlight").addClass("hover"),$(e).find(".rating-group[data-field-id="+n+"] i:gt("+(s-1)+")").removeClass("highlight hover")})},n=function(e){return $(e).off("mouseleave touchend",".rating-group"),$(e).on("mouseleave touchend",".rating-group",function(t){var n;return t.stopPropagation(),n=$(e).find("#entry_"+$(this).data("field-id")).val(),r(e,$(this).data("field-id"),$(this).data("rating-type"),n),i=!0})},s=function(e){var t,n,r,i,s,o;s=$(e).find(".rating-group"),o=[];for(n=0,r=s.length;n<r;n++)i=s[n],t=$(i).find("#entry_"+$(i).data("field-id")).val(),t?o.push($(i).find("i[data-value='"+t+"']").click()):o.push(void 0);return o},GD.initRating=function(r){return r==null&&(r=document),t(r),e(r),n(r),s(r)},$(document).on("ready page:load",function(){if(!($(".dashboard").length>0))return GD.initRating(document)})})}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GD.AddressField=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.formattedValue=function(e){var t;t=this.rawFieldValue(e);if(t)return(t.province||"")+" "+(t.city||"")+" "+(t.district||"")+" "+(t.street||"")},n.prototype.optimalColumWidth=function(){return 300},n}(GD.FieldBase)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GD.AttachmentField=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.formattedValue=function(e){var t,n;return t=this._getData(e),n="<ul class='attachment-download-link-list'>",_.each(_.compact(_.flatten([t.ids])),function(e){return function(r,i){var s,o,u,a,f;s=(u=t.names)!=null?u[i]:void 0;if(s)return o=t.isImages[i]?(a=t.previewImages)!=null?a[i]:void 0:GD.attachmentIcon((f=t.previewImages)!=null?f[i]:void 0),n+=_.template(e._formatHtml(),{variable:"entry"})({isImage:t.isImages[i],apiCode:e.apiCode,name:s,previewUrl:t.previewUrls[i],downloadUrl:t.downloadUrls[i],previewImage:o})}}(this)),n+="</ul>"},n.prototype.formattedValueForDetail=function(e){var t,n;return t=this._getData(e),n="<ul>",_.each(_.compact(_.flatten([t.ids])),function(e){return function(r,i){var s,o;s=(o=t.names)!=null?o[i]:void 0;if(s)return n+=_.template(e._formatHtmlForDetail(),{variable:"entry"})({isImage:t.isImages[i],apiCode:e.apiCode,name:s,previewUrl:t.previewUrls[i],downloadUrl:t.downloadUrls[i],previewImage:t.previewImages[i]})}}(this)),n+="</ul>"},n.prototype._formatHtml=function(){return"<li> <div class='image-wrapper small'> [[ if (entry.isImage) { ]] <a rel='lightbox[{{entry.apiCode}}]' title='{{entry.name}} (<a class=\"image-download-link\" href=\"{{entry.downloadUrl}}\">点击下载</a>)' href='{{ entry.previewUrl}}'> <span title=''><img title='{{entry.name}}' src='{{entry.previewImage}}' alt='{{entry.name}}' class='with-tooltip'></span> </a> [[ } else { ]] <a data-no-turbolink='true' href='{{entry.downloadUrl}}'> <img title='{{entry.name}}' src='{{entry.previewImage}}' alt='{{entry.name}}' class='with-tooltip'> </a> [[ } ]] </div> </li>"},n.prototype._formatHtmlForDetail=function(){return"<li> [[ if (entry.isImage) { ]] <div class='image-wrapper'> <a rel='lightbox[{{entry.apiCode}}]' title='{{entry.name}}' href='{{ entry.previewUrl}}'> <span class='preview-loading'>图片加载中...</span> <img src='{{entry.previewImage}}' alt='{{entry.name}}' class='image-attachment-preview'> </a> </div> [[ } ]] <div class='attachment-link'> <a data-no-turbolink='true' href='{{entry.downloadUrl}}'>{{entry.name}}</a> </div> </li>"},n.prototype._getData=function(e){var t,n,r,i,s,o;return n=e[this.apiCode],o=e[this.apiCode+"_preview_urls"],s=e[this.apiCode+"_preview_images"],t=e[this.apiCode+"_attachment_names"],r=e[this.apiCode+"_download_urls"],i=e[this.apiCode+"_is_images"],{ids:n,previewUrls:o,previewImages:s,names:t,downloadUrls:r,isImages:i}},n.prototype.optimalColumWidth=function(){return 180},n}(GD.FieldBase)}.call(this),function(){$(function(){return $(".image-attachment-preview").livequery(function(){return $(this).one("load",function(){return $(this).prev(".preview-loading").hide(),$(this).css("visibility","visible"),$(this).next("a").show()}).each(function(){if(this.complete)return $(this).load()})})})}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GD.BasicGoodsField=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.rawFieldValue=function(e){var t,r;return r=n.__super__.rawFieldValue.call(this,e),r?(t=_.map(r,function(e){return function(t,n){var r,i,s;return r=_.first(_.where(e.fieldJson.goods_items,{api_code:t.api_code})),r?(i=_.map(_.keys(t.specification||[]),function(e){var n,i;n=_.first(_.where(r.dimensions,{api_code:""+e}));if(n)return i=_.first(_.where(n.options,{value:t.specification[e]})),i!=null?i.label:void 0}),s=_.compact(i),s.length>0?(r!=null?r.name:void 0)+"（"+s.join("、")+"）："+(t!=null?t.number:void 0):(r!=null?r.name:void 0)+"："+(t!=null?t.number:void 0)):""}}(this)),_.compact(t)):[]},n.prototype.optimalColumWidth=function(){return 160},n}(GD.FieldBase)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GD.CascadeDropDown=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.formattedValue=function(e){var t,n,r;r=this.rawFieldValue(e);if(r)return t=_.first(_.where(this.fieldJson.choices,{api_code:r.level_1})),t&&(n=_.first(_.where(t.sub_choices,{api_code:r.level_2}))),t&&n?(t!=null?t.value:void 0)+"-"+(n!=null?n.value:void 0):""},n.prototype.optimalColumWidth=function(){return 140},n}(GD.FieldBase)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GD.CheckBox=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.rawFieldValue=function(e){var t,r;return r=n.__super__.rawFieldValue.call(this,e),t=_.select(this.fieldJson.choices,function(e){return _.contains(r,e.api_code)}),_.map(t,function(t){return function(n,r){return(n!=null?n._type:void 0)==="OtherChoice"?e[t.apiCode+"_other"]||n.value:n!=null?n.value:void 0}}(this))},n}(GD.FieldBase)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GD.DateField=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.formattedValue=function(e){var t;t=this.rawFieldValue(e);if(t)return moment(t,moment.ISO_8601).format("YYYY-MM-DD")},n}(GD.FieldBase)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GD.DateTimeField=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.formattedValue=function(e){var t;return t=this.rawFieldValue(e),t?GD.formatDateTime(t):""},n.prototype.optimalColumWidth=function(){return 150},n}(GD.FieldBase)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GD.DropDown=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.formattedValue=function(e){var t;return t=["x_field_weixin_gender","x_field_weixin_country"],_.contains(t,this.apiCode)?this.rawFieldValue(e):n.__super__.formattedValue.call(this,e)},n}(GD.SelectableField)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GD.EmailField=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.optimalColumWidth=function(){return 190},n}(GD.FieldBase)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GD.FormAssociation=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.formattedValueForDetail=function(e){var t;return this._getData(e),this.value===""?"":(this.value!=="关联数据已被删除"&&(t="<a class='margin-left-10' href='/forms/"+this.associatedFormToken+"/entries?serial_number="+this.associatedEntrySerialNumber+"' data-no-turbolink='true'>查看完整数据</a>"),this.value+(t||""))},n.prototype._getData=function(e){return this.value=e[this.apiCode],this.associatedEntrySerialNumber=e[this.apiCode+"_associated_entry_serial_number"],this.associatedFormToken=e[this.apiCode+"_associated_form_token"]},n.prototype.optimalColumWidth=function(){return 260},n}(GD.FieldBase)}.call(this),function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};window.GD||(window.GD={}),$(function(){var t,n,r;return r=function(e){var t,n,r,i,s,o;n=$("dd[data-field="+e+"]").not("[data-value='']"),o=[];for(r=0,i=n.length;r<i;r++)t=n[r],o.push((s=$(t).data("value"))!=null?s.split(","):void 0);return o},n=function(){function e(e,t){this.apiCode=t,this.targets=[],this.elementContainer=$(e).find("[data-field="+this.apiCode+"]")}return e}(),t=function(){function t(e,t,n){var i,s;this.apiCode=t,this.triggerConditions=n,this.elementContainer=$(e).find("[data-field="+this.apiCode+"]");for(s in this.triggerConditions)this.set(s,_.uniq(_.flatten(r(s))));((i=this.elementContainer.data("triggered-by"))!=null?i.length:void 0)===0&&this.elementContainer.hide()}return t.prototype.set=function(t,n){var r,i;return i=(r=this.elementContainer.data("triggered-by"))!=null?r:[],n&&_.intersection(n,this.triggerConditions[t]).length>0?e.call(i,t)<0&&i.push(t):i=_.without(i,t),this.elementContainer.data("triggered-by",i)},t}(),GD.FormLogicForEntryShow=function(){function e(e,r){var i,s,o,u,a;r==null&&(r=document),this.triggers={},this.targets={};for(o in e){a=e[o],(i=this.targets)[o]||(i[o]=new t(r,o,a));for(u in a)(s=this.triggers)[u]||(s[u]=new n(r,u)),this.triggers[u].targets.push(this.targets[o])}}return e}(),GD.initFormLogicForEntryShow=function(e,t){return t==null&&(t=document),new GD.FormLogicForEntryShow(e,t)}})}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GD.GenCodeField=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.formattedValue=function(e){var t,n;return n=this.rawFieldValue(e),t="",n&&_.each(n.match(/.{1,4}/g),function(e){return t+="<span style='padding-right: 6px;'>"+e+"</span>"}),t},n}(GD.FieldBase)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GD.GeoField=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.formattedValue=function(e){var t;t=this.rawFieldValue(e);if(t){if(t.address)return t.address;if(t.latitude||t.longitude)return"纬度："+t.latitude+"；经度："+t.longitude}},n.prototype.formattedValueForDetail=function(e){var t;t=this.rawFieldValue(e);if(t)return _.template(this._formatHtmlForDetail(),{variable:"entry"})(t)},n.prototype._formatHtmlForDetail=function(){return"[[ if ((entry.latitude && entry.longitude) || entry.address ) { ]] <div data-role='static-geomap'> <div class='geo-map-container'> <div class='geo-map-result'> [[ if (entry.address) { ]] <span class='geo-map-address'>{{ entry.address }}</span> [[ } ]] [[ if (entry.latitude && entry.longitude) { ]] <span class='geo-map-coord'>经度：{{entry.latitude}} ；纬度：{{entry.longitude}}</span> [[ } ]] </div> <div class='geo-map-content'> <div class='map-container' data-latitude='{{entry.latitude}}' data-longitude='{{entry.longitude}}' data-address='{{ entry.address }}'> <div class='map-loading'>地图加载中……</div> </div> </div> </div> </div> [[ } ]]"},n.prototype.optimalColumWidth=function(){return 250},n}(GD.FieldBase)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GD.GoodsField=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.formattedValueForDetail=function(e){var t,n;return n=this.rawFieldValue(e),t="<ul>",_.each(n,function(e){return function(e,n){return t+="<li><i class='gd-icon-image'></i>&nbsp;"+e+"</li>"}}(this)),t+="</ul>"},n.prototype.optimalColumWidth=function(){return 250},n}(GD.BasicGoodsField)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GD.ImageCheckBox=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.formattedValue=function(e){var t,n,r,i,s;r=this.rawFieldValue(e);if(r)return s=e[this.apiCode+"_xlarge_visit_urls"],i=e[this.apiCode+"_small_visit_urls"],t=e[this.apiCode+"_attachment_names"],n="",_(s.length).times(function(r){return function(o){return n+=_.template(r._formatHtml())({largeUrl:s[o],smallUrl:i[o],entryId:e.id,name:t[o]})}}(this)),n},n.prototype.formattedValueForDetail=function(e){var t,n,r,i,s;i=this.rawFieldValue(e);if(i)return s=e[this.apiCode+"_xlarge_visit_urls"],r=e[this.apiCode+"_large_visit_urls"],t=e[this.apiCode+"_attachment_names"],n="<div class='choices image-choices clearfix'>",_(s.length).times(function(e){return function(i){return n+=_.template(e._formatHtmlForDetail())({largeUrl:s[i],smallUrl:r[i],apiCode:e.apiCode,name:t[i]})}}(this)),n+="</div>"},n.prototype._formatHtml=function(){return"<div class='image-wrapper small'> <div class='image-center'> <a href='{{largeUrl}}' rel='lightbox[{{entryId}}]' title='{{name}}'> <img src='{{smallUrl}}'> </a> </div> </div>"},n.prototype._formatHtmlForDetail=function(){return"<label class='for-show'> <div class='image-wrapper'> <div class='image-center'> <a rel='lightbox[{{apiCode}}]' title='{{name}}' href='{{largeUrl}}'> <img src='{{smallUrl}}' alt='{{name}}'> </a> </div> </div> <div class='text-wrapper'>{{name}}</div> </label>"},n}(GD.FieldBase)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GD.ImageRadioButton=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.formattedValue=function(e){var t,n,r,i;n=this.rawFieldValue(e);if(n)return i=e[this.apiCode+"_xlarge_visit_url"],r=e[this.apiCode+"_small_visit_url"],t=e[this.apiCode+"_attachment_name"],_.template
(this._formatHtml())({largeUrl:i,smallUrl:r,entryId:e.id,name:t})},n.prototype.formattedValueForDetail=function(e){var t,n,r,i;r=this.rawFieldValue(e);if(r)return t=e[this.apiCode+"_attachment_name"],i=e[this.apiCode+"_xlarge_visit_url"],n=e[this.apiCode+"_large_visit_url"],_.template(this._formatHtmlForDetail())({largeUrl:i,smallUrl:n,apiCode:this.apiCode,name:t})},n.prototype._formatHtml=function(){return"<div class='image-wrapper small'> <div class='image-center'> <a href='{{largeUrl}}' rel='lightbox[{{entryId}}]' title='{{name}}'> <img src='{{smallUrl}}'> </a> </div> <span class='image-name' title='{{name}}'>{{name}}</span> </div>"},n.prototype._formatHtmlForDetail=function(){return"<div class='choices image-choices image-radio-button clearfix'> <label class='for-show'> <div class='image-wrapper'> <div class='image-center'> <a rel='lightbox[{{apiCode}}]' title='{{name}}' href='{{largeUrl}}'> <img src='{{largeUrl}}' alt='{{name}}'> </a> </div> </div> <div class='text-wrapper'>{{name}}</div> </label> </div>"},n}(GD.FieldBase)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GD.LikertField=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.rawFieldValue=function(e){var t;return t=n.__super__.rawFieldValue.call(this,e),t?_.compact(_.map(_.keys(t),function(e){return function(n){var r,i;i=_.first(_.where(e.fieldJson.statements,{api_code:n}));if(i)return r=_.first(_.where(e.fieldJson.choices,{api_code:t[n]})),GD.htmlSafe(i!=null?i.label:void 0)+"："+((r!=null?r.value:void 0)||"")}}(this))):[]},n.prototype.optimalColumWidth=function(){return 270},n}(GD.FieldBase)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GD.LinkField=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.optimalColumWidth=function(){return 200},n.prototype.formattedValueForDetail=function(e){var t;return t=this.rawFieldValue(e),t?"<a href='"+t+"' target='_blank'>"+t+"</a>":t},n}(GD.FieldBase)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GD.MatrixField=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.rawFieldValue=function(e){var t;return t=n.__super__.rawFieldValue.call(this,e),t?_.compact(_.map(_.keys(t),function(e){return function(n){var r,i,s;i=_.first(_.where(e.fieldJson.statements,{api_code:n}));if(i)return s=t[n],r=_.map(_.pairs(s),function(t,n){var r;return r=_.first(_.where(e.fieldJson.dimensions,{api_code:t[0]})),GD.htmlSafe(r!=null?r.label:void 0)+"："+t[1]}).join("，"),GD.htmlSafe(i.label)+"：（"+r+"）"}}(this))):[]},n.prototype.optimalColumWidth=function(){return 300},n}(GD.FieldBase)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GD.MetainfoField=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.formattedValue=function(e){var t,n,r;r=e.metainfo;if(!r)return;return n=this.apiCode.replace("info_",""),t=r[n],this.apiCode==="info_browser"?t+" "+r.version:t},n.prototype.optimalColumWidth=function(){return 150},n}(GD.FieldBase)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GD.MobileField=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.formattedValue=function(e){var t,n;return n=this.rawFieldValue(e),t="",n&&(e[this.apiCode+"_verified"]&&(t+="<i class='mobile-checked success gd-icon-check-circle'></i>"),t+=n),t},n.prototype.optimalColumWidth=function(){return 115},n}(GD.FieldBase)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GD.PaymentMethod=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.formattedValue=function(e){var t;t=this.rawFieldValue(e);switch(t){case"wxpay":return"微信支付";case"alipay":return"支付宝";default:return""}},n}(GD.FieldBase)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GD.RadioButton=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.optimalColumWidth=function(){return 80},n}(GD.SelectableField)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GD.RatingField=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype._htmlContent=function(e){var t,n,r;return e==null&&(e={}),n=this.fieldJson.rating_type,r=e.smallSize?"rating-icon-small":"rating-icon",t="<div class='rating-group type-"+n+"'>",_(this.fieldJson.choices.length).times(function(i){var s;return s=i<e.value?r+" rating-icon-"+n+" highlight":r+" rating-icon-"+n,t+="<i class='"+s+"' data-value="+(i+1)+"></i>"}),t+="</div>"},n.prototype.formattedValue=function(e){var t;return t=this.rawFieldValue(e),this._htmlContent({smallSize:!0,value:t})},n.prototype.formattedValueForDetail=function(e){var t;return t=this.rawFieldValue(e),this._htmlContent({smallSize:!1,value:t})},n.prototype.optimalColumWidth=function(){return 160},n}(GD.FieldBase)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GD.TextField=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.optimalColumWidth=function(){return 150},n}(GD.FieldBase)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GD.TextArea=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.formattedValueForDetail=function(e){var t;return t=this.rawFieldValue(e),t?this._simpleFormat(t):""},n.prototype._simpleFormat=function(e){e=e.replace(/\r\n+/g,"\n"),e=$.trim(e);if(e.length>0)return e=e.replace(/\n\n+/g,"</p><p>"),e="<p>"+e+"</p>"},n.prototype.optimalColumWidth=function(){return 200},n}(GD.FieldBase)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GD.ThirdPartyPayTrade=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.formattedValue=function(e){var t,n;return t=this.rawFieldValue(e),n=["WAIT_SELLER_SEND_GOODS","WAIT_BUYER_CONFIRM_GOODS","TRADE_FINISHED","TRADE_SUCCESS","SUCCESS"],_.contains(n,t)?"已付款":"未付款"},n}(GD.FieldBase)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GD.TimeField=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}var n;return e(r,t),n=function(e){return e<10?"0"+e:e},r.prototype.formattedValue=function(e){var t,r,i,s;i=this.rawFieldValue(e);if(i)return t=GD.isNumber(i.hour)?""+n(i.hour):"",r=GD.isNumber(i.minute)?":"+n(i.minute):"",s=GD.isNumber(i.second)?":"+n(i.second):"",""+t+r+s},r.prototype.optimalColumWidth=function(){return 80},r}(GD.FieldBase)}.call(this),function(){GD.WeixinField=function(){function e(){}return e.getImage=function(e,t){var n,r,i;return i={xsmall:46,small:64,medium:132,large:0},r=e.x_field_weixin_headimgurl,n=r.substring(0,r.length-2),n+"/"+i[t]},e}()}.call(this),function(){GD.transformCheckbox=function(e){return e.find("input[type=checkbox]:not(.no-need-transform):not(.field-transformed)").addClass("field-transformed").wrap(function(){return"<div class='check-box-wrapper'></div>"}).after("<i class='selected-icon'></i>")}}.call(this),function(){GD.transformDropdown=function(e){return e.find("select:not(.field-transformed):not(.need-select2)").addClass("field-transformed").wrap(function(){var e;return e="",$(this).data("has-error")&&(e+=" field-with-errors"),$(this).hasClass("hide")&&(e+=" hide"),_.contains(["province","city","district"],$(this).data("role"))&&(e+=" "+$(this).data("role")+"-select-wrapper"),"<div class='dropdown-wrapper"+e+"'></div>"}).after("<b class='dropdown-bg'></b><i class='dropdown-trigger'></i>")}}.call(this),function(){GD.enhanceInputField=function(e){var t,n,r,i,s,o,u;o=e.find("input.input-with-icon:not(.enhanced-input)"),u=[];for(n=0,s=o.length;n<s;n++)i=o[n],t=$(i),r=t.data("icon"),u.push(t.addClass("enhanced-input").wrap("<div class='gd-input-container'></div>").after("<i class='gd-input-icon "+r+"'></i>"));return u}}.call(this),function(){GD.enhanceLikertAndMatrixField=function(e){var t,n,r,i,s;e.find(".field-likert-field table, .field-matrix-field table").addClass("tablesaw tablesaw-stack").attr("data-tablesaw-mode","stack"),e.trigger("enhance.tablesaw"),r=e.find(".field-matrix-field input"),i=[];for(t=0,n=r.length;t<n;t++)s=r[t],i.push($(s).css({minHeight:$(s).closest("td").height()}));return i}}.call(this),function(){GD.transformRadioButton=function(e){return e.find("input[type=radio]:not(.no-need-transform):not(.field-transformed)").addClass("field-transformed").wrap(function(){return"<div class='radio-button-wrapper'></div>"}).after("<i class='selected-icon'></i>")}}.call(this),function(){GD.transformAllFields=function(e){e==null&&(e=$(".entry-container, .preview-container"));if(e.length===0)return;return GD.isIE()||GD.transformRadioButton(e),GD.isIE()||GD.transformCheckbox(e),GD.isIE()||GD.transformDropdown(e),GD.enhanceLikertAndMatrixField(e),GD.enhanceInputField(e)},$(document).on("ready page:load ajax:complete",function(){if($(".dashboard").length>0)return;return GD.transformAllFields()})}.call(this),function(){var e;e=function(e){return GD.updateModalHeight(e,".entry-show .form-content",146)},GD.updateEntryModal=function(t){var n,r,i;e(t),i=$(t).find(".modal-body .header"),i.length>0&&$(t).find(".modal-header .modal-title").html(i.html()),n=$(t).find("form"),n.length>0&&(autosize(n.find("textarea:visible")),GD.initAddressSelector(n),GD.initDatePicker(n),GD.initGoods(n),GD.initializeFileUploads(n),GD.initCascadeSelector(n),GD.initRating(n),GD.initialDropdownOtherChoice(n),GD.transformAllFields(n),GD.initLightbox()),$("#geomap_init_template").length>0&&(r=$("#geomap_init_template").val());if(r)return $(t).find(".modal-body").append(r)},GD.updateEntryModalWithEntry=function(e){var t,n,r,i,s,o,u,a,f,l;i=w2ui.entries_grid.get(e),n=w2ui.entries_grid.get(e,!0),l=w2ui.entries_grid.total,t=_.template($("#entries_show_template").html())({entryIndex:n+1,totalCount:l,serialNumber:e}),r=_.template($("#entries_show_side_bar_template").html(),{variable:"entry"})(i),s=_.template($("#entries_show_extra_goods_template").html(),{variable:"entry"})(i),u=$("#entries_show_modal"),u.find(".modal-body").html(t),u.find(".modal-body .entry-info-container").html(r),o=s,f=$("#entries_show_template").data("shown-field-api-codes"),a=_.select(GD.entriesGridColumnFieldJsons,function(e){return _.contains(f,e.api_code)||e.fieldType==="SectionBreak"}),_.each(a,function(e){var t,n;return t=_.findWhere(GD.entriesGridColumnFieldJsons,{api_code:e.api_code}),n=GD[e.fieldType]?(new GD[e.fieldType](t)).formattedValueForDetail(i):i[e.api_code],n=((n!=null?n:"")+"").replace(/\r?\n/g,"<br/>"),o+=_.template($("#entries_show_field_template").html())({rawValue:i[e.api_code],value:n,isPrivate:t["private"],label:t.label,apiCode:t.api_code,fieldType:e.fieldType})}),u.find(".modal-body .form-content dl").html(o),GD.updateEntryModal(u);if(!_.isEmpty($("#entries_grid").data("field-rules")))return GD.initFormLogicForEntryShow($("#entries_grid").data("field-rules"),$("#entries_show_modal .form-content"))},$(document).on("ready page:load",function(){var e;return $("#entries_show_modal").length>0&&($("#entries_show_modal").on("shown.bs.modal",function(){return $(this).on("click",".nav-arrows .prev",function(e){return e.preventDefault(),e.stopPropagation(),$(this).trigger(GD.createKeyboardEvent(38))}),$(this).on("click",".nav-arrows .next",function(e){return e.preventDefault(),e.stopPropagation(),$(this).trigger(GD.createKeyboardEvent(40))})}),$("#entries_show_modal").on("click",".cancel-btn",function(e){return e.preventDefault(),e.stopPropagation(),GD.updateEntryModalWithEntry(w2ui.entries_grid.getSelection(),!0)}),$("#entries_show_modal, #entries_new_modal").on("click",".entry-show a[data-role=submit]:not(.disabled)",function(e){var t,n,r;return e.preventDefault(),e.stopPropagation(),r=$(this).closest(".modal"),n=r.is("#entries_new_modal")?"entry_new":"entry_show",GD.showLoading(r.find(".modal-body"),n),t=r.find("form"),t.find("input:text").each(function(){return $(this).val($.trim($(this).val()))}),$(this).is("#submit_and_new_entry")&&t.append("<input type='hidden' name='submit_and_new' value='true'>"),r.find("form").submit()}),$("#entries_show_modal").on("ajax:complete",".entry-show a.delete-btn",function(t,n,r){return n.status===200?($("#entries_show_modal").modal("hide"),w2ui.entries_grid.total===1&&GD.turbolinksReloadWithCurrentPosition(),setTimeout(function(){return e(),w2ui.entries_grid.remove(n.responseJSON.serial_number),w2ui.entries_grid.total-=1},200),w2ui.entries_grid.selectNone()):w2alert("删除失败，可能还有其它的数据正在删除中，请稍后再试")}),$("#entries_show_modal").on("click","a.remote[data-role=request]",function(e){var t;return e.stopPropagation(),e.preventDefault(),t=$(this).closest(".modal"),GD.showLoading(t.find(".modal-body"),"entry_show"),t.find(".modal-body").load($(this).attr("href"),function(){return GD.updateEntryModal(t)})}),$("#entries_show_modal").on("ajax:complete","form, [data-role=modal-dismiss]",function(e,t,n){var r,i;return i=$("#entries_show_modal"),t.status===200?(r=t.responseJSON,w2ui.entries_grid.set(r.serial_number,r),GD.updateEntryModalWithEntry(r.serial_number)):(i.find(".modal-body").html(t.responseText),GD.updateEntryModal(i))})),$("#entries_new_modal").length>0&&($("#entries_new_modal").on("ajax:complete","form",function(e,t,n){var r,i,s,o;s=$("#entries_new_modal"),r=(o=t.getResponseHeader("content-type"))!=null?o:"";if(r.indexOf("json")>-1)return s.modal("hide"),$(".no-entry-container").length!==0&&GD.turbolinksReloadWithCurrentPosition(),GD.delay(200,function(){return w2ui.entries_grid.records.unshift(t.responseJSON),w2ui.entries_grid.total=w2ui.entries_grid.records.length,w2ui.entries_grid.refresh()});s.find(".modal-body").html(t.responseText),GD.updateEntryModal(s);if(t.status===200)return i=s.find(".entry-show").data("last-created-entry"),w2ui.entries_grid.records.unshift(i),w2ui.entries_grid.total=w2ui.entries_grid.records.length,w2ui.entries_grid.refresh()}),$("#entries_new_modal").on("click","[data-role=modal-dismiss]",function(e){return e.preventDefault(),e.stopPropagation(),$("#entries_new_modal").modal("hide")})),$("#entries_bulk_delete_confirm_modal").length>0&&($("#entries_bulk_delete_confirm_modal").on("shown.bs.modal",function(){return $(".selected-count").text(w2ui.entries_grid.getSelection().length)}),$("#entries_bulk_delete_confirm_modal").on("click","[data-role=delete_selected_entries]:not(.disabled)",function(){var t,n,r,i,s,o;return o=$(this),r=o.data("form-token"),n=function(){var e,n,r,i;r=$("#entries_grid_container input.entry-select:checked"),i=[];for(e=0,n=r.length;e<n;e++)t=r[e],i.push($(t).closest("tr").data("entry-token"));return i}(),i=o.data("path"),s=w2ui.entries_grid.getSelection().length,$.post("/forms/"+r+"/"+i+"/bulk_delete",{entry_serial_numbers:w2ui.entries_grid.getSelection()},function(t){var n,r;return n=t.entry_serial_numbers,n.length>0?(o.closest(".modal").modal("hide"),GD.delay(200,function(){return e(),w2ui.entries_grid.reset(),GD.enableBtn(o)})):(r=o.closest(".modal").find(".modal-body"),r.find(".error-message").remove(),r.prepend("<div class='error-message text-center'>删除失败！请刷新页面后重试</div>"),GD.enableBtn(o))})})),e=function(){var e;if($.cookie("restore_entry_tooltip_viewed"))return;return $.cookie("restore_entry_tooltip_viewed","true"),e=$("#tb_entries_grid_toolbar_item_audit_trail_with_restoration_icon"),e.gdCustomTooltip({content:"<p>如需恢复数据，请点击这里！</p>",autoClose:!1,animation:"grow",speed:200,theme:"gd-tooltip-help-document",backdrop:!0,position:"bottom"}).tooltipster("show"),$(document).one("click",function(){return e.tooltipster("hide")})},$("#attachment_bulk_download_modal").on("loaded.bs.modal",function(){return $("#attachment_bulk_download_modal a[data-role=copy]").each(function(){return GD.initClipboard($(this)[0])})})})}.call(this),function(){var e,t;GD.maxEntryColumWidth=300,GD.commonEntryColumWidth=100,GD.minEntryColumWidth=50,GD.customFields=["Fields::DateTimeField","Fields::RatingField","Fields::RadioButton","Fields::CheckBox","Fields::ImageRadioButton","Fields::ImageCheckBox","Fields::AddressField","Fields::DateField","Fields::TimeField","Fields::DropDown","Fields::AttachmentField","Fields::GoodsField","Fields::BasicGoodsField","Fields::LikertField","Fields::CascadeDropDown","Fields::MatrixField","Fields::GeoField","Fields::MobileField","Fields::TextArea","Fields::EmailField","Fields::LinkField","Fields::TextField","Fields::FormAssociation"],GD.metainfoApiCodes=["info_browser","info_os","info_platform","info_remote_ip"],t=function(e){var t;switch(e.api_code){case"total_price":return 70;case"creator_name":return 100;case"_c_updater_name":return 100;default:return _.contains(GD.customFields,e._type)?(t=e._type.split("::")[1],(new GD[t](e)).optimalColumWidth()):GD.commonEntryColumWidth}},e=function(e){var n,r,i;return r=typeof localStorage!="undefined"&&localStorage!==null?localStorage.getItem("resized_column_size_for_"+e.api_code):void 0,r?r:e.api_code==="serial_number"?"65px":(n=GD.getStringLength(e.label||"未命名")*10+5,i=t(e)||(GD.minEntryColumWidth=50),i<n&&(i=n),i>GD.maxEntryColumWidth&&(i=GD.maxEntryColumWidth),i<GD.minEntryColumWidth&&(i=GD.minEntryColumWidth),i+"px")},GD.inFormEntryPage=function(){return $("#entries_grid_container").hasClass("form-entry")},GD.inFormMyEntryPage=function(){return $("#entries_grid_container").hasClass("my-entries")},GD.buildEntriesGridColumns=function(){var t;return t=[],GD.entriesGridColumnFieldJsons=[],$.each($("#entry_show_modal_template").data("columns"),function(n,r){var i,s,o,u,a,f;o=$.parseJSON(r),o.label||(o.label=""),f=o._type.split("::")[1],o.fieldType=f,GD.entriesGridColumnFieldJsons.push(o);if(f==="SectionBreak")return;return i=o.api_code,u=GD.htmlSafe(o.label),s={field:i,caption:u,size:e(o),fieldType:f,sortable:(GD.inFormEntryPage()||GD.inFormMyEntryPage())&&o.sortable,hidden:o.hidden},o.weixin_field&&(s.caption="<i class = 'weixin gd-icon-wechat'></i> "+u),o._type==="Fields::AttachmentField"&&(s.caption=u+"<a class='go-download-link with-tooltip' data-placement='bottom' data-container='#entries_grid_container' title='进入该附件批量下载页面' href='"+o.bulk_download_url+"' data-toggle='modal' data-target='#attachment_bulk_download_modal'><i class='gd-icon-download'></i></a>"),o._type==="Fields::FormAssociation"&&(s.caption=u+"<a class='label-with-link'  title='进入关联表单数据界面' href='/forms/"+o.associated_form_token+"/entries' data-no-turbolink='true'>&nbsp;&nbsp;<i class='gd-field-icon-formassociation'></i>&nbsp;&nbsp;"+o.associated_form_name+"</a>"),i==="creator_name"?s.render=function(e,t,n){return"<div class='name-with-vip-style'> <span class='vip-user "+e.creator_plan+"_user'>"+(e._c_creator_name||"")+"</span> </div>"}:i==="_c_updater_name"?s.render=function(e,t,n){if(e._c_updater_name)return"<div class='name-with-vip-style'> <span class='vip-user "+e.updater_plan+"_user'>"+e._c_updater_name+"</span> </div>"}:i==="trade_status"?s.render=function(e,t,n){return(new GD.ThirdPartyPayTrade(o)).formattedValue(e)}:i==="gen_code"?s.render=function(e,t,n){return(new GD.GenCodeField(o)).formattedValue(e)}:i==="payment_method"?s.render=function(e,t,n){return(new GD.PaymentMethod(o)).formattedValue(e)}:i==="x_field_weixin_nickname"?s.render=function(e,t,n){var r,i;r=e.x_field_weixin_headimgurl;if(r)return i=r.substring(0,r.length-1)+"46","<div class='image-wrapper small'><a href='"+r+"' rel='lightbox'><img src='"+i+"' class='weixin-headimg'></a>"+e.x_field_weixin_nickname+"</div> "}:_.contains(GD.metainfoApiCodes,i)?s.render=function(e,t,n){return(new GD.MetainfoField(o)).formattedValue(e)}:_.contains(GD.customFields,o._type)&&(a=o._type.split("::")[1],s.render=function(e,t,n){return(new GD[a](o)).formattedValue(e)}),t.push(s)}),t},GD.addSortableClassToSortableColumn=function(e){if(!GD.inFormEntryPage()&&!GD.inFormMyEntryPage())return;return setTimeout(function(){return _.each(e,function(e,t){var n;if(e.sortable){n=$("#grid_entries_grid_columns td[col='"+t+"']"),n.addClass("sortable");if(!n.find(".w2ui-col-header").hasClass("w2ui-col-sorted"))return n.find(".w2ui-col-header div").addClass("sort-icon")}})},500)},GD.updateBulkEditStatus=function(){if(!GD.inFormEntryPage()||!GD.currentUserCanMaintainData)return;return setTimeout(function(){return w2ui.entries_grid_toolbar.set("bulk_edit_icon",{type:"html",html:"<span class='toolbar-item'><i class='gd-icon-edit'></i>批量编辑</span>",disabled:w2ui.entries_grid.getSelection().length<2})},100)}}.call(this),function(){var e,t;GD.EntryBulkEditView=Backbone.View.extend({el:"#entries_bulk_edit_modal",initialize:function(){return this.updateEntrySerialNumberToForm(),this.editingFieldApiCodes=[]},events:{"change .bulk-field-select":"changeFieldToEdit"},changeFieldToEdit:function(e){var t,n;return n=$(e.target).val(),t=this.currentEditGroup(e).find(".bulk-field-container"),this.restorePrevFieldContent(t),n!==""?(t.append(this.$(".field[data-api-code="+n+"]").show()),this.$(".control-label.change-to").removeClass("hide")):this.$(".control-label.change-to").addClass("hide"),$(e.target).find("option[value="+n+"]").data("belongs-to-field-rule")?this.$(".field-rule-warning").show():this.$(".field-rule-warning").hide(),this.updateBulkEditFieldSelectOptions(e)},updateBulkEditFieldSelectOptions:function(e){var t,n,r,i,s,o,u;t=$(e.target).data("current-field-api-code"),s=$(e.target).val(),this.editingFieldApiCodes=_.without(this.editingFieldApiCodes,t),$(e.target).data("current-field-api-code",s),this.editingFieldApiCodes.push(s),this.$(".bulk-field-select option").show(),o=this.editingFieldApiCodes,u=[];for(r=0,i=o.length;r<i;r++)n=o[r],u.push(this.$(".bulk-field-select").each(function(){if($(this).val()!==n)return $(this).find("option[value="+n+"]").hide()}));return u},addBulkEditGroup:function(e){var t,n;return n=this.currentEditGroup(e).clone(),t=this.currentEditGroup(e).find(".bulk-field-select").val(),t!==""&&n.find(".bulk-field-select option[value="+t+"]").hide(),n.find(".bulk-field-container").empty(),n.insertAfter(this.currentEditGroup(e))},deleteBulkEditGroup:function(e){var t;if(this.$(".bulk-edit-group").length<=1)return;return t=this.currentEditGroup(e).find(".bulk-field-select").val(),this.editingFieldApiCodes=_.without(this.editingFieldApiCodes,t),t!==""&&this.$(".bulk-field-select option[value="+t+"]").show(),this.currentEditGroup(e).remove()},restorePrevFieldContent:function(e){var t,n;t=e.find(".field").hide(),n=t.data("api-code");if(n)return this.$(".fields").prepend(t)},currentEditGroup:function(e){return $(e.target).parents(".bulk-edit-group")},updateEntrySerialNumberToForm:function(){var e,t,n,r,i;this.$(".selected-records-count").text(w2ui.entries_grid.getSelection().length),this.$("form input[name^=entry_serial_numbers]").remove(),n=w2ui.entries_grid.getSelection(),r=[];for(e=0,t=n.length;e<t;e++)i=n[e],r.push(this.$("form").append($("<input type='hidden' name='entry_serial_numbers[]' value="+i+" />")));return r}}),t=function(e){var t,n,r,i,s,o,u,a,f;a=e.responseJSON,s=w2ui.entries_grid.getSelection(),o=[];for(r=0,i=s.length;r<i;r++){u=s[r],t=w2ui.entries_grid.get(u);for(n in a)f=a[n],t[n]=f;o.push(w2ui.entries_grid.set(u,t))}return o},e=function(e){var t,n,r,i,s;t=e.responseJSON,s=[];for(r in t)i=t[r],i.length!==0?(n="<div class=\"help-block inline-error\">\n  <i class='gd-icon-times-circle'></i> "+i.join("、")+"\n</div>",s.push($("#entries_bulk_edit_modal form .field[data-api-code="+r+"]").append($(n)))):s.push(void 0);return s},$(document).on("ajax:complete","#entries_bulk_edit_modal",function(n,r,i){return $("#entries_bulk_edit_modal form .inline-error").remove(),i==="success"?($(this).modal("hide"),GD.showFlashNotification("批量编辑成功"),r.responseJSON?t(r):w2ui.entries_grid.reload()):(GD.showFlashNotification("批量编辑失败","danger"),e(r))}),$(document).on("hide.bs.modal","#entries_bulk_edit_modal",function(){return GD.currentActiveEntryBulkEditView.undelegateEvents(),setTimeout(function(){return w2ui.entries_grid.selectNone()},50)}),$(document).on("click","#entries_bulk_edit_modal .submit-bulk-edit",function(){var e,t;t=$("#entries_bulk_edit_modal form"),e=_.find(t.serializeArray(),function(e){return e.name==="bulk_edit_field_api_codes[]"});if(e.value!=="")return t.submit()})}.call(this),function(){$(document).on("page:load ready",function(){if(!$(".audit-trail-container"))return;return $(".audit-trail-container .action").on("click",function(e){e.preventDefault();if($(this).attr("href")==="#restore_entry_modal")return $("#restore_entry_modal #activity_id").val($(this).data("id")),$("#restore_entry_modal .count").text($(this).data("count")),$("#restore_entry_modal .serial-numbers").text($(this).data("serial-numbers"))}),$(".audit-trail-container #gd_confirm_ok").on("click",function(e){return $(".audit-trail-container #restore_entry_modal form").submit()})})}.call(this),function(){$(function(){var e,t,n,r,i,s,o,u,a,f,l;return GD.EntriesColumnsFilter=Backbone.View.extend({el:".filter-column-clickover .filter-column",events:{"click a[data-field]":"toggleColumn"},_toggleStyle:function(e){var t,n,r,i,s;return e.toggleClass("selected"),r=$("#entries_table").find("th[data-field="+e.data("field")+"], td[data-field="+e.data("field")+"]"),t="gd-icon-check",i=e.hasClass("selected"),e.find("i").toggleClass(t,i),$("#entries .column-filter a[data-field="+e.data("field")+"] i").toggleClass(t,i),r.toggleClass("gd-hide",!i),(n=w2ui.entries_grid)!=null&&n.toggleColumn(e.data("field")),s=$(".column-filter a[data-field="+e.data("field")+"]"),s.toggleClass("selected",i),s.find("i").toggleClass(t,i),e.blur()},_saveFormSetting:function(){var e,t;return t=function(){var t,n,r,i;r=this.$("a.selected"),i=[];for(t=0,n=r.length;t<n;t++)e=r[t],i.push($(e).data("field"));return i}.call(this),$.ajax({url:"/preferred_columns",type:"post",data:{form_id:this.$el.data("form-id"),columns:t}})},_isLastShownField:function(e){return this.$("a.selected[data-field!="+e.data("field")+"]").length===0},toggleColumn:function(e){var t;e.stopPropagation(),t=$(e.target);if(t.is("i")||t.is("span"))t=t.parents("a[data-field]");return this._isLastShownField(t)?!1:(this._toggleStyle(t),this._saveFormSetting(),!1)}}),a=function(){return w2ui.entries_grid_toolbar.set("export_icon",{type:"html",id:"export_icon",html:s()})},l=function(e){return $.post(e,function(e){return function(e){var t,n,r,i;return n=w2ui.entries_grid_toolbar.get("export_icon"),n.type="html",n.html=_.template($("#entries_export_template").html())({isExporting:!0,exportSuccess:!1}),w2ui.entries_grid_toolbar.refresh("export_icon"),$(".export-excel-waiting .estimate-time").text("（约需"+Math.ceil(e.estimate/60)+"分钟）"),t=$(".export-excel-waiting").show().children("span").gdCustomTooltip({autoClose:!1,content:"地址生成中...<br/>并不局限您其他操作"}),t.tooltipster("show"),setTimeout(function(){return t.tooltipster("hide")},5e3),i=8,r=e.estimate*1e3/i,GD.pollingDataFromServer(r,i+1,e.check_url,function(e,n){e.status==="done"&&(clearInterval(n),$(".export-excel-done a[data-role=download]").attr("href",e.url),$(".export-excel-actions, .export-excel-waiting").hide(),$(".export-excel-done").show(),t.tooltipster("hide"));if(e.status==="failed")return clearInterval(n),a(),$(".export-excel-waiting, .export-excel-done").hide(),t.tooltipster("hide")})}}(this))},u=function(e){var t;if(e.hasClass("tooltipstered"))return;return t=null,e.gdClickTooltip({theme:"filter-column-clickover",contentCloning:!1,backdrop:!0,content:$(".column-filter"),functionReady:function(e,n){return n.find(".column-filter").show(),t=new GD.EntriesColumnsFilter},functionAfter:function(){return $(t.el).off("click","a[data-field]")}})},$("#tb_entries_grid_toolbar_item_search_input .filter-search").livequery(function(){return GD.initSearchByText()}),$("#tb_entries_grid_toolbar_item_filter_data_icon .toolbar-item").livequery(function(){return GD.initChoiceFilter()}),$("#tb_entries_grid_toolbar_item_date_range_icon .toolbar-item").livequery(function(){return GD.initQueryByDateRange(GD.queryByDateRange)}),$("#tb_entries_grid_toolbar_item_show_hide_column_icon").livequery(function(){return u($(this))}),$("#tb_entries_grid_toolbar_item_export_icon .dropdown-toggle").livequery(function(){return $(".export_limited_columns").on("click",function(e){return e.preventDefault(),e.stopPropagation(),l($("#entries_export_template").data("export-limited-columns-url"))}),$(".export_all_columns").on("click",function(e){return e.preventDefault(),e.stopPropagation(),l($("#entries_export_template").data("export-all-url"))})}),o=function(){var e,t,n,r,i,s;GD.currentUserCanMaintainData&&(w2ui.entries_grid_toolbar.insert("w2ui-delete",{type:"html",id:"append_excel_icon",html:"<span class='with-tooltip toolbar-item track-event append-excel-event' title='从Excel追加数据'><i class='gd-icon-excel'></i> 从Excel追加</span>"}),w2ui.entries_grid_toolbar.set("w2ui-delete",{type:"html",html:"<span class='toolbar-item track-event delete-entry-event'><i class='gd-icon-times'></i> 删除</span>"}),w2ui.entries_grid_toolbar.set("w2ui-add",{type:"html",html:"<span class='with-tooltip toolbar-item track-event add-entry-event' title='添加数据'><i class='gd-icon-plus'></i> 添加</span>"})),w2ui.entries_grid_toolbar.set("w2ui-reload",{type:"html",html:"<span class='with-tooltip toolbar-item track-event reload-entry-event' title='重新加载数据'><i class='gd-icon-refresh'></i></span>"}),$("#audit_trail_modal").length===0&&w2ui.entries_grid_toolbar.remove("audit_trail_icon"),$("#share_result_modal").length===0&&w2ui.entries_grid_toolbar.remove("share_result_icon"),$("#excel_append_modal").length===0&&w2ui.entries_grid_toolbar.set("append_excel_icon",{html:"<span class='with-tooltip toolbar-item' title='此表单含有不支持Excel上传的必填字段，暂不支持从Excel追加数据'><i class='gd-icon-excel'></i> 从Excel追加</span>",disabled:!0}),n=$("#entries_export_template").data("show-exporting"),t=$("#entries_export_template").data("show-export-success");if(n||t)e=w2ui.entries_grid_toolbar.get("export_icon"),e.type="html",e.html=_.template($("#entries_export_template").html())({exportSuccess:t,isExporting:n});return $("#entries_grid").on("click","#tb_entries_grid_toolbar_item_w2ui-reload .toolbar-item",function(){return w2ui.entries_grid.reload()}),s=function(){var e;return e=$("#entries_new_modal"),e.modal("show"),GD.showLoading("#entries_new_modal .modal-body","entry_new"),e.find(".modal-body").load(e.data("new-url"),function(){return GD.updateEntryModal(e)})},i=function(){var e;return e=$("#entries_bulk_edit_modal"),e.modal("show"),GD.showLoading("#entries_bulk_edit_modal .modal-body","bulk_edit"),e.find(".modal-body").load(e.data("bulk-edit-url"),function(){return GD.updateEntryModal(e),GD.currentActiveEntryBulkEditView=new GD.EntryBulkEditView})},r=function(){var e;return e=$("#excel_append_modal"),e.modal("show"),e.find(".modal-content").load(e.data("url"),function(t){return e.find(".modal-content").html(t)})},$("#entries_grid").on("click","#tb_entries_grid_toolbar_item_w2ui-add .toolbar-item",function(){return s()}),$("#entries_grid").on
("click","#tb_entries_grid_toolbar_item_bulk_edit_icon:not(.disabled)",function(){return i()}),$(".form-overview, .no-entry-container").on("click",".add-entry",function(){return s()}),$("#entries_grid").on("click","#tb_entries_grid_toolbar_item_append_excel_icon .toolbar-item",function(){return r()}),$(".form-overview, .no-entry-container").on("click",".append-excel",function(){return r()}),$("#entries_grid").on("click","#tb_entries_grid_toolbar_item_w2ui-delete:not(.disabled)",function(){return $("#entries_bulk_delete_confirm_modal").modal("show")}),$("#entries_grid").on("click","#tb_entries_grid_toolbar_item_audit_trail_icon .toolbar-item",function(){var e;return e=$("#audit_trail_modal"),e.modal("show"),GD.showLoading("#audit_trail_modal .modal-body","audit_trail"),e.find(".modal-body").load(e.data("audit-trail-url"),function(t){return e.find(".modal-content").html(t),GD.updateModalHeight(e)})}),$(document).on("hidden.bs.modal","#audit_trail_modal",function(){return $(this).removeData("bs.modal").find(".modal-body").children(":not(.loading)").remove()}),$(document).on("click","#audit_trail_modal .pagination a",function(e){var t,n;return e.preventDefault(),t=$(this).closest(".modal"),n=t.find(".modal-body"),GD.showLoading(n,"audit_trail"),t.find(".modal-body").load($(this).attr("href"),function(e){return t.find(".modal-content").html(e),GD.updateModalHeight(t)})}),$("#entries_grid").on("click","#tb_entries_grid_toolbar_item_share_result_icon .toolbar-item",function(){return $("#share_result_modal").modal("show")})},n=function(){var e,t;if(!GD.inFormEntryPage())return;return t=$(window).height(),e=$("#entries_grid").offset().top,t-e},r=function(){return"height: "+n()+"px;"},i=function(){return GD.inFormEntryPage()?200:15},t=function(e,t){return"<div class='btn-group'> <button class='gd-btn gd-btn-info gd-btn-small dropdown-toggle' type='button' data-toggle='dropdown' aria-haspopup='true' aria-expanded='false'> "+e+"<span class='caret'></span> </button> <ul class='dropdown-menu'> "+t+" </ul> </div>"},s=function(){return t("导出到Excel",'<li><a href="javascript: void(0)" class="export_all_columns track-event export-event">导出所有列</a></li> <li><a href="javascript:void(0)" class="export_limited_columns track-event export-event">仅导出显示列</a></li>')},f=function(){return t("数据分享",'<li><a href="#result_share_setting_modal" data-toggle="modal">结果分享</a></li> <li><a href="#result_search_setting_modal" data-toggle="modal">对外查询</a></li>')},e=function(){var e,t,n;return n=[],GD.currentUserCanMaintainData&&(n=n.concat([{type:"html",id:"bulk_edit_icon",html:"<span class='toolbar-item track-event bulk-edit-entry-event'><i class='gd-icon-edit'></i>批量编辑</span>",disabled:!0},{type:"break"}])),GD.canRestoreEntry?t="<a href='"+GD.restoreEntryPath+"'><span class='with-tooltip toolbar-item' title='查看数据变更记录'><i class='gd-icon-history' ></i></span></a>":t="<span class='with-tooltip toolbar-item' title='查看数据变更记录'><i class='gd-icon-history' ></i></span>",e={type:"html",id:GD.canRestoreEntry?"audit_trail_with_restoration_icon":"audit_trail_icon",html:t},n=n.concat([{type:"html",id:"search_input",html:$("#entries_search_input_template").html()},{type:"break"},{type:"html",id:"date_range_icon",html:"<span class='with-tooltip toolbar-item' title='按提交日期筛选'><i class='gd-icon-clock date-range-icon'></i></span>"},{type:"html",id:"filter_data_icon",html:"<span class='with-tooltip toolbar-item' title='筛选数据'><i class='gd-icon-filter'></i></span>"},e,{type:"html",id:"show_hide_column_icon",html:"<span class='with-tooltip toolbar-item' title='显示或隐藏各列数据'><i class='gd-icon-list'></i></span>"}]),GD.currentUserCanManageForm&&(n=n.concat([{type:"break"},{type:"html",id:"result_setting_icon",html:f()}])),GD.currentUserCanViewData&&(n=n.concat([{type:"break"},{type:"html",id:"export_icon",html:s()}])),n},$(document).on("ready page:load",function(){u($(".show-hide-entry-column"));if($("#entries_grid").length>0)return w2ui.entries_grid&&(delete w2ui.entries_grid,delete w2ui.entries_grid_toolbar),GD.entryColumns=GD.buildEntriesGridColumns(),w2utils.locale("/w2ui-zh-cn.json"),$("#entries_grid").w2grid({name:"entries_grid",method:"GET",autoLoad:GD.inFormEntryPage()||GD.inFormMyEntryPage(),limit:i(),recid:"serial_number",reorderColumns:!1,multiSort:!1,msgRefresh:"",multiSelect:GD.inFormEntryPage(),style:r(),columns:GD.entryColumns,show:{footer:GD.inFormEntryPage(),toolbar:GD.inFormEntryPage()||GD.inFormMyEntryPage(),lineNumbers:!1,toolbarAdd:GD.currentUserCanMaintainData,toolbarDelete:GD.currentUserCanMaintainData,selectColumn:GD.inFormEntryPage(),toolbarColumns:!1,toolbarSearch:!1},toolbar:{style:"padding: 0; height: 30px",items:e()},url:{get:$("#entries_grid").data("get-url"),remove:$("#entries_grid").data("delete-url")},onClick:function(e){var t;return t=e.originalEvent.target,($(t).is("td a")||$(t).is("td img"))&&e.preventDefault(),e.onComplete=function(){var n;if($.trim(window.getSelection().toString())!=="")return;n=$("#entries_show_modal");if(!n.hasClass("in"))if($(t).parents("#entries_grid table").length>0)n.modal("show");else if(!e.customEvent)return;return GD.updateEntryModalWithEntry(e.recid),this.select(e.recid)}},onKeydown:function(e){return function(t){var n;switch(t.originalEvent.keyCode){case 91:return t.preventDefault();case 37:return t.preventDefault(),$("#entries_show_modal").hasClass("in")&&!$("#lightbox").is(":visible")?$(e).trigger(GD.createKeyboardEvent(38)):t.stopPropagation();case 39:return t.preventDefault(),$("#entries_show_modal").hasClass("in")&&!$("#lightbox").is(":visible")?$(e).trigger(GD.createKeyboardEvent(40)):t.stopPropagation();case 27:return $("#entries_show_modal .edit-btn").length>0&&$("#entries_show_modal").modal("hide"),t.preventDefault();case 32:return n=w2ui.entries_grid.getSelection(),n>0&&$("#grid_entries_grid_rec_"+n[0]).click(),t.preventDefault()}}}(this),onRequest:function(e){return e.postData.selected=[]},onDelete:function(e){return e.preventDefault(),e.stopPropagation(),$("#entries_bulk_delete_confirm_modal").modal("show")},onColumnResize:function(e){return e.onComplete=function(t){var n;return n=w2ui.entries_grid.columns[e.column],GD.cacheToLocalStorage("resized_column_size_for_"+n.field,n.size)}},onRefresh:function(e){return GD.addSortableClassToSortableColumn(GD.entryColumns)},onUnselect:function(e){return GD.updateBulkEditStatus()},onSelect:function(e){return GD.updateBulkEditStatus()}}),o(),$("#entries_grid").on("mouseover",".w2ui-grid-data div:not([title])",function(){return $(this).attr("title",$(this).text())})}),$(document).on("click",".export-excel-done a[data-role=download]",function(){return $(".export-excel-done span").tooltip("hide"),$(this).siblings("[data-role=remove]").click()}),$(document).on("ajax:complete",".export-excel-done",function(){return $(".export-excel-actions").show(),$(".export-excel-waiting, .export-excel-done").hide(),$(".export-excel-done a[data-role=download]").attr("href","javascript:void(0)"),a()}),$(window).on("resize",function(){if($("#entries_grid").length>0)return $("#entries_grid").css({height:n()+"px"})})})}.call(this),function(){GD.FieldCountValidateView=Backbone.View.extend({validate:function(){return this.forewarningValidate(),this.finalAlertValidate()},forewarningValidate:function(){if(this._shouldShowForewarningTooltip())return this._showForewarningTooltip()},finalAlertValidate:function(){return this._shouldShowFinalAlertBox()&&this._showFinalAlertBox(),!this._shouldShowFinalAlertBox()},_shouldShowForewarningTooltip:function(){return this.currentFieldCount=this.collection.length,this.currentFieldCount===GD.FIRST_FIELD_COUNT_FOREWARNING_THRESHOLD||this.currentFieldCount===GD.SECOND_FIELD_COUNT_FOREWARNING_THRESHOLD},_shouldShowFinalAlertBox:function(){return this.currentFieldCount=this.collection.length,this.currentFieldCount>=GD.FIELD_COUNT_THRESHOLD},_showForewarningTooltip:function(){var e,t;return t=_.template($("#field_count_forewarning_template").html()),e=$(t({currentFieldCount:this.currentFieldCount})),$("body").append(e),e.show().animate({bottom:"+=25px"},300),setTimeout(function(){return e.fadeOut(400,function(){return e.remove()})},5e3)},_showFinalAlertBox:function(){var e,t;return t=_.template($("#final_field_count_alert_template").html()),e=$(t({currentFieldCount:this.currentFieldCount})),e.modal("show")}})}.call(this),function(){window.GD||(window.GD={}),GD.FieldEdit||(GD.FieldEdit={}),GD.FieldEdit.disableDeleteElement=function(e){var t;if(!e)return;return t=$(e).find("[data-role=delete_choice], [data-role=delete_goods_item]"),GD.disableElement(t),GD.FieldEdit.updateToolTipsContent(t)},GD.FieldEdit.updateToolTipsContent=function(e,t){var n;n=(t!=null?t.hasRule:void 0)?"已设置好规则的选项不可隐藏":"至少显示一个选项",GD.tooltipInitialized(e)||e.prop("title",n),e.addClass("disabled-with-cursor-auto");if(e.length&&GD.tooltipInitialized(e))return e.tooltipster("content",n)},GD.FieldEdit.disableToggleVisibilityElement=function(e,t,n){var r,i,s;return s=_.select(t.$(n),function(t){return $(t).data("cid")===e.cid}),i=_.first(s),r=$(i).find("[data-role=visibility_toggle]"),GD.disableElement(r),GD.FieldEdit.updateToolTipsContent(r,e),GD.FieldEdit.disableDeleteElement(i)},GD.FieldEdit.disableHasRuleElements=function(e){var t;t=e.filter(".has-rule");if(t.length)return t.addClass("disabled-with-cursor-auto"),GD.disableElement(t)},GD.FieldEdit.updateToggleVisiblityElements=function(e,t){var n,r,i,s;n=e.collection,s=e.$("[data-role=visibility_toggle]"),r=s.filter(".disabled"),r.length&&GD.tooltipInitialized(r)&&r.tooltipster("content",r.data("title")),GD.enableElement(s),GD.enableElement(e.$("[data-role=delete_choice]")),GD.FieldEdit.disableHasRuleElements(s);if(!n)return;i=_.select(n.models,function(e){return!e.get("hidden")});if(i.length<=1)return GD.FieldEdit.disableToggleVisibilityElement(_.first(i),e,t)},GD.FieldEdit.fieldChoiceIncludeApiCode=function(e,t){var n;return((n=e.ruleApiCodes)!=null?n.indexOf(t.get("api_code")):void 0)!==-1}}.call(this),function(){var e;window.GD||(window.GD={}),GD.choiceTextMaxLength=1e3,GD.resetFormDesignAreaSize=function(){var e,t;e=$("#form_design");if(e.length>0)return t=$(".mobile-device").length>0?window.innerHeight:$(window).height(),e.height(t-e.parent().offset().top);return},GD.showAddFieldTab=function(e){var t;e==null&&(e=!0),$("#form_design .sidebar a[href=#add_field]").tab("show");if(e)return(t=GD.fieldEditView)!=null?t.reset():void 0},GD.showEditFieldTab=function(){return $("#form_design .sidebar a[href=#edit_field]").tab("show")},GD.showEditstyleTab=function(){return $("#form_design .sidebar a[href=#edit_style]").tab("show")},GD.showEditBtnTab=function(){return $("#form_design .sidebar a[href=#edit_button]").tab("show")},GD.shakeSidebar=function(){return $("#form_design .sidebar").addClass("gd-animated gd-animation-shake"),setTimeout(function(){return $("#form_design .sidebar").removeClass("gd-animated gd-animation-shake")},500)},GD.initSortableOptions=function(e,t,n,r){return this.sortableChoices=e.$(t).sortable({items:"> "+n,handle:"[data-role='sort']",forcePlaceholderSize:!0,scroll:!0,placeholder:"sortable-placeholder",axis:"y",update:function(t,i){return GD.updateOptionSortingIndex(e,r,n)}})},GD.updateOptionSortingIndex=function(e,t,n){return GD.updateItemPostions(e,t,n),t.trigger("reset")},GD.updateItemPostions=function(e,t,n){var r,i,s,o,u,a,f;i=function(){var t,r,i,s;i=e.$(n),s=[];for(t=0,r=i.length;t<r;t++)u=i[t],s.push($(u).data("cid"));return s}();for(o=s=0,a=i.length;s<a;o=++s)r=i[o],(f=t.get(r))!=null&&f.set({position:o+1},{silent:!0});return t.sort()},GD.rawValuesFromTextarea=function(e){return _.compact(_.map(e.val().split("\n"),function(e){return $.trim(e)}))},e=function(e,t){var n;return t?(n=_.template($(e.data("target")).html()),n({field:t.model})):$(e.data("target")).html()},GD.formEditTooltipsterConfig=function(t,n,r){var i;return n==null&&(n=null),r==null&&(r=null),n||(n={}),i={autoClose:!1,position:"left",updateAnimation:!1,backdrop:!0,content:e(t,r)},$.extend({},i,n)},GD.quotaIsInvalid=function(e){return!GD.isNumber(e)||parseInt(e)<0||parseFloat(e)%1>0},GD.updateChoice=function(e,t,n){var r,i,s,o;return n==null&&(n=!1),r=$(e.target),GD.clearErrorMessageBelow(r),s={},i=r.data("field-key"),o=!0,r.attr("type")==="checkbox"||r.attr("type")==="radio"?(s[i]=r.is(":checked"),o=!1):s[i]=r.val(),t.set(s,{validate:o}),GD.showErrorMessageBelow(r,t.validationError)},GD._decorateDeleteLink=function(e,t,n){var r,i;return r=e.$(t),r.data("target",n),r.data("title",r.attr("title")),i={position:"top",multiple:!0,maxWidth:418,functionReady:function(t,n){return n.one("click","input:submit",function(){return t.tooltipster("hide"),e.collection.remove(e.model)})}},r.gdClickTooltip(GD.formEditTooltipsterConfig(r,i,e))},GD.selectOptionHtml=function(e,t,n,r){var i;return i=["<option value=''>请选择</option>"],_.each(e,function(e){return function(e){var s;return s=r===e[t]?"selected=selected":"",i.push("<option value="+e[t]+" "+s+">"+e[n]+"</option>")}}(this)),i.join("")}}.call(this),function(){GD.AddressEditView=Backbone.View.extend({tagName:"ul",_predefinedValueElemOf:function(e){return this.$("[data-field-key=predefined_value][data-sub-key="+e+"]")},_changeableElemOf:function(e){return this.$("[data-field-key=changeable][data-sub-key="+e+"]")},render:function(){var e,t,n;return n=_.template($("#address_edit_template").html()),t=this.model.get("predefined_value"),e=this.model.toJSON(),$(this.el).html(n(e)),GD.addressSelector.render(this._predefinedValueElemOf("province"),this._predefinedValueElemOf("city"),this._predefinedValueElemOf("district"),t.province,t.city,t.district),this}}),GD.AddressShowView=Backbone.View.extend({initialize:function(){return this.listenTo(this.model,"change:predefined_value",this.render)},render:function(){var e,t;return t=_.template($("#address_show_template").html()),$(this.el).html(t(this.model.toJSON())),e=this.model.get("predefined_value"),GD.addressSelector.render(this.$("[data-role=province]"),this.$("[data-role=city]"),this.$("[data-role=district]"),e.province,e.city,e.district),this}})}.call(this),function(){GD.AttachmentFieldMediaTypeEditView=Backbone.View.extend({initialize:function(){return this.attachmentFieldMediaTypeMap=$("#attachment_field_media_type_edit_view").data("media-type-map"),this.listenTo(this.model,"change:media_type",this.render)},_medieTypeIsCustom:function(){var e;return((e=this.model.get("media_type"))!=null?e.type:void 0)==="custom"},findMediaTypeDataByType:function(e){return _.findWhere(this.attachmentFieldMediaTypeMap,{type:e})},render:function(){var e,t,n;return n=_.template($("#attachment_field_media_type_edit_template").html()),t=this.model.toJSON(!1),e=this.model.get("media_type"),e.value||(e.value=[]),t.sampleStr=e.value.join("、"),t.showCustomTextArea=this._medieTypeIsCustom(),this._medieTypeIsCustom()&&(t.customTextAreaValue=e.value.join(",")),t.showCommonMediaTypeText=!_.contains(["custom","unlimited"],e.type),$("#attachment_field_media_type_edit_view").html(n(t)),this}}),GD.AttachmentFieldSelectShowView=Backbone.View.extend({selectText:function(){var e,t,n,r,i;return n=this.model.toJSON(!1),e=n.max_file_quantity>1?"请选择或拖拽上传文件（最多 "+n.max_file_quantity+"个），限制每个"+n.max_size+"MB以内。":"请选择或拖拽上传文件，"+n.max_size+"MB以内。",t=(r=n.media_type)!=null?r.value:void 0,i="",_.isEmpty(t)||(i="仅支持: "+t.join("、")),""+e+i},render:function(){var e,t;return t=_.template($("#attachment_field_select_show_template").html()),e=this.model.toJSON(!1),e.selectText=this.selectText(),this.$el.html(t(e)),this}})}.call(this),function(){var e,t=function(e,t){function i(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;e=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.messageContainer=function(){return this.uploadForm.find(".image-upload-area")},n.prototype.onShowUploading=function(){return $("#image_upload_label span.normal").hide(),$("#image_upload_label span.replace").show()},n.prototype.onShowNormalText=function(){return $("#image_upload_label span.normal").show(),$("#image_upload_label span.replace").hide()},n.prototype.beforeAdd=function(e){return e.originalFiles.length>5?(GD.showErrorMessageBelow(this.messageContainer(),"每次请不要选择超过5张图片，可传多次。"),this._showNormalText(),!1):(this.context.data("outstanding-image-count",e.originalFiles.length),!0)},n.prototype.getDataContext=function(e){var t,n;return t=_.template($("#"+this.$fileInput.data("progress-bar")).html()),n=this.context.data("field-type"),t({name:e,type:n})},n.prototype.fileUploadErrorMessage=function(e,t){return e+"："+t},n.prototype.onFileValidationFail=function(e){return $(".image-upload-area").removeClass("drag-over"),this._decreaseOutStandingImageCount()},n.prototype.onUploadFail=function(e){return e.closest(".image-choice, .goods-item").remove(),this._decreaseOutStandingImageCount()},n.prototype.onUploadSuccess=function(e,t){return e.parent(".progress-container").replaceWith("<img src='"+t.image_large_path+"'>"),this._decreaseOutStandingImageCount(),t.leftCount=this.context.data("outstanding-image-count"),this.context.trigger("add",t)},n.prototype._decreaseOutStandingImageCount=function(){var e;return e=this.context.data("outstanding-image-count"),this.context.data("outstanding-image-count",e-1)},n}(GD.ImageUpload),$(function(){var t;return t="#image_upload",$(t).livequery(function(){return(new e(t,$(this),$(this).closest("#field_choices, #goods_items").find(".image-choices, .goods-items"),{sequentialUploads:!0,dropZone:$(".image-upload-area"),dragover:function(){return $(".image-upload-area").addClass("drag-over"),$(".drop-zone .drop-here").show(),$(".drop-zone .drag-here").hide()},dragleave:function(){return $(".image-upload-area").removeClass("drag-over")},start:function(){return $(".image-upload-area").removeClass("drag-over")}})).fileUpload()})})}.call(this),function(){var e,t;t=Backbone.View.extend({className:"level-2-choice",templateId:"cascade_level_2_choice_template",events:{"change [data-field-key]":"update","click [data-role='add_sub_choice']":"addItem","click [data-role='delete_sub_choice']":"deleteItem"},initialize:function(){return this.listenTo(this.model,"remove",this.remove),this.listenTo(this.model,"change:has_data",this._decorateDeleteLink)},render:function(){var e;return e=_.template($("#"+this.templateId).html()),this.$el.html(e(this.model.toJSON())).data("cid",this.model.cid),this._decorateDeleteLink(),this},update:function(e){var t,n;return e.stopPropagation(),n=$(e.target),GD.clearErrorMessageBelow(n),t={},t[n.data("field-key")]=n.val(),this.model.set(t,{validate:!0}),GD.showErrorMessageBelow(n,this.model.validationError)},addItem:function(e){var n,r;e.stopPropagation(),n=_.indexOf(this.collection.models,this.model)+1,r=this.collection.add({value:"二级选项"},{at:n}),this.$el.after((new t({model:r,collection:this.collection})).render().el);if(this.collection.length>1)return this.$el.closest(".level-2-choices").find("[data-role='delete_sub_choice']:hidden").show()},deleteItem:function(e){e.stopPropagation();if(!this.model.get("has_data"))return this.collection.remove(this.model)},_decorateDeleteLink:function(){if(this.model.get("has_data"))return GD._decorateDeleteLink(this,"[data-role=delete_sub_choice]","#choice_delete_confirm_template")}}),e=Backbone.View.extend({className:"level-1-choice",templateId:"cascade_choice_template",events:{"change [data-field-key]":"update",click:"expand","click [data-role='add_choice']":"addItem","click [data-role='delete_choice']":"deleteItem"},initialize:function(){return this.listenTo(this.model,"remove",this.remove),this.listenTo(this.model.subChoiceList,"remove",this._disableDeleteWhenOnlyOneLevel2Left),this.listenTo(this.model,"change:has_data",this._decorateDeleteLink)},render:function(){var e;return e=_.template($("#"+this.templateId).html()),this.$el.html(e(this.model.toJSON())).data("cid",this.model.cid),this.model.subChoiceList.each(function(e){return function(n){var r;return r=new t({model:n,collection:e.model.subChoiceList}),e.$(".level-2-choices").append(r.render().el)}}(this)),this._disableDeleteWhenOnlyOneLevel2Left(),this._decorateDeleteLink(),this},update:function(e){var t,n;return e.stopPropagation(),n=$(e.target),GD.clearErrorMessageBelow(n),t={},t[n.data("field-key")]=n.val(),this.model.set(t,{validate:!0}),this.model.validationError||this.$(".choice-value").text(n.val()),GD.showErrorMessageBelow(n,this.model.validationError)},expand:function(e){$(".cascade-choices-area .level-1-choice.expand").removeClass("expand"),this.$el.addClass("expand");if($(e.target).hasClass("level-1-choice"))return this.$("input:first").focus()},addItem:function(t){var n,r;n=this.collection.indexOf(this.model)+1,r=this.collection.add({value:"一级选项",sub_choices:[{value:"二级选项"}]},{at:n}),this.$el.after((new e({model:r,collection:this.collection})).render().el);if(this.collection.length<=1)return this.$el.closest(".cascade-choices-area").find(".level-1-choice > .actions [data-role='delete_choice']:hidden").show()},deleteItem:function(e){e.stopPropagation(),this.model.get("has_data")||this.collection.remove(this.model);if(this.collection.length<=1)return this.$el.closest(".cascade-choices-area").find(".level-1-choice > .actions [data-role='delete_choice']").hide()},_disableDeleteWhenOnlyOneLevel2Left:function(){if(this.model.subChoiceList.length<=1)return this.$('.level-2-choices [data-role="delete_sub_choice"]').hide()},_decorateDeleteLink:function(){if(this.model.get("has_data"))return GD._decorateDeleteLink(this,"[data-role=delete_choice]","#choice_delete_confirm_template")}}),GD.CascadeChoiceListEditView=Backbone.View.extend({initialize:function(){return this.listenTo(this.collection,"add",function(e){return this.render(e)}),this.listenTo(this.collection,"reset",this.render),this.listenTo(this.collection,"remove",function(e){return function(t){return e._disableDeleteWhenOnlyOneLeft()}}(this)),this._initBatchEditTooltipster()},_initBatchEditTooltipster:function(){var e,t,n,r,i,s,o;t={batch_edit_cascade_choices:{theme:"batch-edit-tooltipster",functionReady:function(e){return function(t,n){var r;return r=e.collection.map(function(e){var t,n,r;return t=e.get("value"),n=function(){var t,n,i,s;i=e.subChoiceList.pluck("value"),s=[];for(t=0,n=i.length;t<n;t++)r=i[t],s.push("-"+r);return s}(),[t].concat(n)}),n.find("textarea").val(_.compact(_.flatten(r)).join("\n")),n.one("click","input:submit",function(){var r;return r=GD.rawValuesFromTextarea(n.find("textarea")),e._resetChoices(r),t.tooltipster("hide")})}}(this)}},s=this.$("[data-toggle=tooltipster]"),o=[];for(n=0,r=s.length;n<r;n++)i=s[n],e=$(i),o.push(e.gdClickTooltip(GD.formEditTooltipsterConfig(e,t[e.data("role")])));return o},render:function(t){return this.$(".cascade-choices-area").empty(),this.collection.each(function(n){return function(r){var i;i=new e({model:r,collection:n.collection}),n.$(".cascade-choices-area").append(i.render().el);if(r===t)return setTimeout(function(){return i.$el.click()},1)}}(this)),this._disableDeleteWhenOnlyOneLeft(),this._disableBatchEditWhenHasData(),this},_disableDeleteWhenOnlyOneLeft:function(){if(this.collection.length===1)return this.$('.level-1-choice > .actions [data-role="delete_choice"]').addClass("invisible")},_disableBatchEditWhenHasData:function(){if(this.model.get("has_data"))return this.$("[data-role=batch_edit_cascade_choices]").addClass("hide")},_resetChoices:function(e){var t,n,r,i;t=[],n=-1,r=-1,i=null,_.each(e,function(e){return function(s,o){var u,a,f,l,c,h,p;return i&&s.indexOf("-")===0?(p=(u=(a=e.collection.at(n))!=null?(f=a.subChoiceList)!=null?(l=f.at(++r))!=null?l.toJSON():void 0:void 0:void 0)!=null?u:{},p.value=$.trim(s.substring(1)),p._type="Choice",i.sub_choices.push(p)):(i=(c=(h=e.collection.at(++n))!=null?h.toJSON():void 0)!=null?c:{},i.value=s,i._type="Choice",i.sub_choices=[],i.cascade_temp=!0,t.push(_.clone(i)),r=-1)}}(this)),this.collection.reset(t,{validate:!0});if(this.collection.length===0)return this.collection.add([{value:"一级选项",sub_choices:[{value:"二级选项"}]}])}})}.call(this),function(){var e,t,n,r;e=Backbone.Model.extend({defaults:{_type:"Choice",selected:!1,value:"",quota:null,position:9999,has_data:!1,hidden:!1},initialize:function(){var e;return this.subChoiceList=new GD.TextChoiceList(this.get("sub_choices")),this.set({quota_temp:(e=this.get("quota"))!=null?e:""}),this.hasRule=!1},toJSON:function(e){var t;return e==null&&(e=!0),t=_.omit(this.attributes,"has_data"),e&&$.trim(t.value)===""&&(t.value="选项"),t.sub_choices=this.subChoiceList.toJSON(),t},validate:function(e,t){t||(t={});if($.trim(e.value)==="")return"选项不能为空";if($.trim(e.value).length>GD.choiceTextMaxLength)return"字数不能大于"+GD.choiceTextMaxLength;if($.trim(e.quota_temp)&&GD.quotaIsInvalid(e.quota_temp))return"名额必须为非负整数或为空"},isOtherChoice:function(){return this.get("_type")==="OtherChoice"},isDropDownOption:function(){return this.type==="DropDown"}}),t=e.extend({defaults:{_type:"OtherChoice",selected:!1,value:"其他",position:9999,hidden:!1}}),GD.TextChoiceList=Backbone.Collection.extend({model:e,comparator:"position",selected:function(){return this.findWhere({selected:!0})},removeEmpty:function(){var e;return e=this.where({value:""}),this.remove(e)},updateQuota:function(){return this.each(function(e){return e.set({quota:e.get("quota_temp")})})},updateChoices:function(e){return this.each(function(t){var n;n=e[t.get("api_code")],t.set(_.omit(n,"sub_choices"));if(t.subChoiceList!=null&&(n!=null?n.sub_choices:void 0))return t.subChoiceList.updateChoices(n.sub_choices)})}}),r=Backbone.View.extend({initialize:function(){return this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"remove",this.removeView)},render:function(){var e,t,n;return this.model.get("hidden")?this.$el.empty():(n=this.model.isOtherChoice()&&!this.model.isDropDownOption()?"_other":"",t=_.template($("#"+this.model.type+n+"_choice_show_template").html()),this.$el.html(t(this.model.toJSON())),this.model.isDropDownOption()&&(e=this.model.get("selected"),this.$el.attr("selected",e),this.model.isOtherChoice()&&this.collection.trigger(e?"selectOtherChoice.gd":"unselectOtherChoice.gd")),this._showQuota(),this.$el.trigger("render.gd")),this},removeView:function(){return this.model.isDropDownOption()&&this.model.isOtherChoice()&&this.collection.trigger("unselectOtherChoice.gd"),this.remove()},_showQuota:function(){var e;this.$el.removeClass("text-muted"),e=this.model.get("quota");if(_.isUndefined(e)||_.isNull(e)||$.trim(e)==="")return;return e=parseFloat(e),this._showTextChoiceQuota(e)},_showTextChoiceQuota:function(e){return e===0&&this.model.isDropDownOption()?(this.$el.closest(".field").find(".other-choice-input").remove(),this.$el.removeAttr("selected")):(this.model.isOtherChoice()&&!this.model.isDropDownOption()?this.$("label").append("（"+this._quotaText(e)+"）"):this.$el.append("（"+this._quotaText(e)+"）"),e===0&&(this.$el.addClass("disabled quota-empty"),this.$(".other-choice-input").remove()),this.$("input").prop("disabled",e===0))},_quotaText:function(e){return e>0?"余"+e:"已空"}}),n=Backbone.View.extend({events:{"change [data-field-key]":"update","click [data-role=visibility_toggle]":"toggleVisibility","click [data-role=add_choice]":"addChoice","click [data-role=delete_choice]":"deleteChoice","mousedown input[type='radio']:checked":"uncheckChoice","keydown input[type='radio']:checked":"uncheckChoice"},initialize:function(){return this.choiceType=this.model.type.indexOf("CheckBox")>-1?"checkbox":"radio",this.listenTo(this.model,"remove",this.remove),this.listenTo(this.model,"change:has_data",this._decorateDeleteLink),this.listenTo(this.model,"change:hidden",this.render)},render:function(){var e,t;return t=_.template($("#text_choice_edit_template").html()),e=this.model.toJSON(!1),e.choiceType=this.choiceType,e.hasRule=this.model.hasRule,this.$el.html(t(e)),this.$el.addClass(this.choiceType),this.$el.data("cid",this.model.cid),this._decorateDeleteLink(),this},update:function(e){var t;e.stopPropagation(),GD.updateChoice(e,this.model),t=$(e.target).data("field-key");if(t==="selected"&&this.choiceType==="radio")return this.collection.each(function(e){return function(t){if(t.cid!==e.model.cid)return t.set({selected:!1})}}(this))},toggleVisibility:function(){return this.model.set({hidden:!this.model.get("hidden")})},addChoice:function(){var t;return t=this.collection.indexOf(this.model)+1,this.collection.add(new e,{at:t,focus:!0})},deleteChoice:function(e){var t;t=this.model.get("class_id");if($(".radio ."+t).hasClass("disabled"))return;e.stopPropagation();if(!this.model.get("has_data"))return this.collection.remove(this.model)},uncheckChoice:function(e){var t;return t=$(e.target),setTimeout(function(n){return function(){return t.removeAttr("checked"),n.update(e)}}(this),150)},focusOnInput:function(){return GD.focusToEnd(this.$("input:text"))},_decorateDeleteLink:function(){if(this.model.get("has_data"))return GD._decorateDeleteLink(this,"[data-role=delete_choice]","#choice_delete_confirm_template")}}),GD.TextChoiceListShowView=Backbone.View.extend({initialize:function(){return this.choiceType=this.model.type,this.listenTo(this.collection,"add",function(e){return function(t,n,i){var s,o;return t.type||(t.type=e.choiceType),s=i.at,o=new r(e._showViewAttrs(t)),s?e.$el.children(":nth-child("+s+")").after(o.render().el):e.$el.append(o.render().el),o.$el.trigger("render.gd")}}(this)),this.listenTo(this.collection,"reset",this.render),this.listenTo(this.collection,"selectOtherChoice.gd",this.showOtherChoiceInput),this.listenTo(this.collection,"unselectOtherChoice.gd",this.removeOtherChoiceInput)},_showViewAttrs:function(e){var t;t={model:e,collection:this.collection};if(e.isOtherChoice()&&!e.isDropDownOption())t.className="other-choice-area";else switch(e.type){case"DropDown":t.tagName="option",t.attributes={selected:e.get("selected")};break;case"CheckBox":t.tagName="label",t.className="checkbox";break;case"RadioButton":t.tagName="label",t.className="radio"}return t.className&&this.model.get("choices_layout")==="side_by_side"&&(t.className+=" inline"),t},render:function(){var e;return this.$el.empty(),this.collection.each(function(e){return function(t){return t.type||(t.type=e.choiceType),e.$el.append((new r(e._showViewAttrs(t))).render().el)}}(this)),this.choiceType==="DropDown"&&(this.$el.prepend("<option>请选择</option>"),e=this.collection.selected(),(e!=null?e.isOtherChoice():void 0)&&this.showOtherChoiceInput()),this.$el.trigger("render.gd")},showOtherChoiceInput:function(){if(this.$el.closest(".field-content").find(".other-choice-input").length===0)return this.$el.closest(".field-content").append('<input class="other-choice-input fixed-width-control" type="text" readonly>')},removeOtherChoiceInput:function(){return this.$el.closest(".field-content").find(".other-choice-input").remove()}}),GD.TextChoiceListEditView=Backbone.View.extend({events:{"click [data-role=add_other]":"addOtherChoice"},initialize:function(){return this.choiceType=this.model.type,this.listenTo(this.collection,"add",function(e){return function(t,r,i){var s,o;return t.type||(t.type=e.choiceType),s=i.at,o=new n({model:t,collection:e.collection}),s?e.$(".choices").children(":nth-child("+s+")").after(o.render().el):e.$(".choices").append(o.render().el),i.focus&&o.focusOnInput(),e.$('[data-role="delete_choice"]').removeClass("invisible"),t.isOtherChoice()&&e.$("[data-role=add_other]").addClass("hide"),GD.updateItemPostions(e,e.collection,".radio, .checkbox"),e._updateToggleVisiblityElement()}}(this)),this.listenTo(this.collection,"remove",function(e){return function(t){return t.isOtherChoice()&&e.$("[data-role=add_other]").removeClass("hide"),e._disableDeleteWhenOnlyOneLeft(),e._updateToggleVisiblityElement()}}(this)),this.listenTo(this.collection,"reset",this.render),this.listenTo(this.collection,"change:hidden",this._updateToggleVisiblityElement),this._initTooltipsterLinks()},_initTooltipsterLinks:function(){var e,t,n,r,i,s,o;t={set_choices_quota:{theme:"choices-quota-tooltipster",functionReady:function(e){return function(t,n){var r;return r=n.find("tbody"),e.collection.each(function(e){return r.append((new GD.ChoiceQuotaEditView({model:e})).render().el)}),t.tooltipster("reposition"),n.one("click","input:submit",function(){return e.collection.updateQuota(),t.tooltipster("hide")})}}(this)},load_predefined_choices:{theme:"gd-tooltip-cascade-horizontal",functionReady:function(e){return function(t,n){return n.on("click","li[data-choices]",function(){var e;return e=$(this).data("choices"),n.find("ul li.selected").removeClass("selected"),$(this).addClass("selected"),n.find("textarea").val(e.join("\n")),GD.focusToEnd(n.find("textarea"))}),n.one("click","input:submit",function(
){var r;return r=GD.rawValuesFromTextarea(n.find("textarea")),e._addChoices(r),t.tooltipster("hide")})}}(this)},batch_edit_choices:{theme:"batch-edit-tooltipster",functionReady:function(e){return function(t,n){var r;return r=_.map(e.collection.reject(function(e){return e.isOtherChoice()}),function(e){return e.get("value")}),n.find("textarea").val(_.compact(r).join("\n")),n.one("click","input:submit",function(){var r;return r=GD.rawValuesFromTextarea(n.find("textarea")),e._addChoices(r,!0),t.tooltipster("hide")})}}(this)}},s=this.$("[data-toggle=tooltipster]"),o=[];for(n=0,r=s.length;n<r;n++)i=s[n],e=$(i),o.push(e.gdClickTooltip(GD.formEditTooltipsterConfig(e,t[e.data("role")])));return o},render:function(){var e;return e=!1,this.$(".choices").empty(),this.collection.each(function(t){return function(r){r.type||(r.type=t.choiceType),r.hasRule=GD.FieldEdit.fieldChoiceIncludeApiCode(t.model,r),t.$(".choices").append((new n({model:r,collection:t.collection})).render().el);if(r.isOtherChoice())return e=!0}}(this)),e&&this.$("[data-role=add_other]").addClass("hide"),this._disableDeleteWhenOnlyOneLeft(),this._disableBatchEditWhenHasData(),GD.initSortableOptions(this,".choices",".radio, .checkbox",this.collection),this._updateToggleVisiblityElement()},_updateToggleVisiblityElement:function(){return GD.FieldEdit.updateToggleVisiblityElements(this,".choices .radio"),this._updateBatchEditTheme()},_updateBatchEditTheme:function(){var e;e=this.$("[data-role=can_not_batch_edit_choices]");if(!this._canNotBatchEdit())return this.model.get("has_data")||this.$("[data-role=batch_edit_choices]").removeClass("gd-hide"),e.addClass("gd-hide").removeClass("disabled");this.$("[data-role=batch_edit_choices]").addClass("gd-hide");if(!this.model.get("has_data"))return e.removeClass("gd-hide").addClass("disabled")},_canNotBatchEdit:function(){return _.any(this.collection.models,function(e){return e.get("hidden")})},_disableDeleteWhenOnlyOneLeft:function(){if(this.collection.length===1)return this.$('[data-role="delete_choice"]').addClass("invisible")},_disableBatchEditWhenHasData:function(){if(this.model.get("has_data"))return this.$("[data-role=batch_edit_choices]").addClass("hide")},addOtherChoice:function(e){return this.collection.add(new t,{focus:!0})},_addChoices:function(e,t){var n,r,i;t==null&&(t=!1),i=this.collection.find(function(e){return e.isOtherChoice()}),r=this.collection.reject(function(e){return e.isOtherChoice()}),n=_.map(e,function(e,t){var n,i,s;return s=(n=(i=r[t])!=null?i.toJSON():void 0)!=null?n:{},s.value=e,s._type="Choice",s}),t?this.collection.reset(n,{validate:!0}):(i&&this.collection.remove(i),this.collection.removeEmpty(),this.collection.add(n,{validate:!0})),this.collection.length===0&&this.collection.push({}),this._disableDeleteWhenOnlyOneLeft();if(i)return this.collection.push(i)}}),GD.ChoiceQuotaEditView=Backbone.View.extend({tagName:"tr",events:{"change input":"update"},_choiceDisplayName:function(){return this.model.get("_type")==="ImageChoice"?this.model.get("name"):this.model.get("value")},render:function(){var e;return this.$el.append("<td>"+this._choiceDisplayName()+"</td>"),this.$el.append("<td class='quota'><input type='text' data-field-key='quota_temp' value='"+((e=this.model.get("quota"))!=null?e:"")+"'></td>"),this},update:function(e){return e.stopPropagation(),GD.updateChoice(e,this.model,!0)}})}.call(this),function(){var e,t,n=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};e=Backbone.Model.extend({idAttribute:"_id",defaults:{predefined_value:null,label:"",notes:"",validations:[],position:1e4,"private":!1,has_data:!1,grids_to_occupy:null,minimum_grids_to_occupy:null,start_new_row:null,cache_data:null},isTextField:function(){return this.type==="TextField"},isFormAssociation:function(){return this.type==="FormAssociation"},isSectionBreak:function(){return this.type==="SectionBreak"},isPageBreak:function(){return this.type==="PageBreak"},isBreak:function(){return this.isSectionBreak()||this.isPageBreak()},isDateField:function(){return this.type==="DateField"},isTimeField:function(){return this.type==="TimeField"},isLikertField:function(){return this.type==="LikertField"},isRatingField:function(){return this.type==="RatingField"},isDropDown:function(){return this.type==="DropDown"},isRadioButton:function(){return this.type==="RadioButton"},isCheckBox:function(){return this.type==="CheckBox"},isAddress:function(){return this.type==="AddressField"},isMobile:function(){return this.type==="MobileField"},isAttachment:function(){return this.type==="AttachmentField"},isImageGoodsField:function(){return this.type==="GoodsField"},isBasicGoodsField:function(){return this.type==="BasicGoodsField"},isGoodsField:function(){return this.isBasicGoodsField()||this.isImageGoodsField()},isGeoField:function(){return this.type==="GeoField"},isCascade:function(){return this.type==="CascadeDropDown"},isMatrixField:function(){return this.type==="MatrixField"},isLinkField:function(){return this.type==="LinkField"},hasData:function(){return this.get("has_data")},isAssociated:function(){return this.get("associated?")},initialize:function(){this._resetType(this.get("_type")),this.ruleApiCodes=this.get("rule_api_codes")||[];if(this.hasTextChoices()||this.isRatingField()||this.isCascade())this.textChoiceList=new GD.TextChoiceList(this.get("choices"));if(this.isLikertField()||this.isMatrixField())this.statementList=new GD.StatementList(this.get("statements"));this.hasImageChoices()&&(this.imageChoiceList=new GD.ImageChoiceList(this.get("choices"))),this.isGoodsField()&&(this.goodsItemList=new GD.GoodsItemList(this.get("goods_items"))),this.isMatrixField()&&(this.dimensionList=new GD.MatrixDimensionList(this.get("dimensions")));if(this.isNew())return this._setDefaultValues()},_resetType:function(e){return this.type=/\w+$/.exec(e)[0]},_setDefaultValues:function(e){var t,n,r,i,s,o,u;e==null&&(e={}),this.get("label")||(t=function(){switch(this.type){case"TelephoneField":return"电话";case"LinkField":return"网址";case"GeoField":return"地理位置";case"EmailField":return"邮箱";case"DateField":return"日期";case"TimeField":return"时间";case"RatingField":return"评分";case"AttachmentField":return"附件";case"MobileField":return"手机";case"AddressField":return"地址";case"NameField":return"姓名"}}.call(this),this.set({label:t},e));if((n=this.textChoiceList)!=null?n.isEmpty():void 0)this.isRatingField()?(this.textChoiceList.add([{value:1},{value:2},{value:3}],e),this.get("rating_type")||this.set({rating_type:"star"},e)):this.isCascade()?this.textChoiceList.add([{value:"选项1",sub_choices:[{value:"二级选项1"},{value:"二级选项2"}]},{value:"选项2",sub_choices:[{value:"二级选项1"},{value:"二级选项2"}]}],e):this.textChoiceList.add([{},{},{}],e);this.textChoiceList!=null&&(this.isCheckBox()||this.isRadioButton())&&(this.get("choices_layout")||this.set({choices_layout:"column"},e)),((r=this.statementList)!=null?r.isEmpty():void 0)&&this.statementList.add([{},{},{}],e),((i=this.dimensionList)!=null?i.isEmpty():void 0)&&this.dimensionList.add([{},{},{}],e);if((s=this.imageChoiceList)!=null?s.isEmpty():void 0)this.get("choices_layout")||this.set({choices_layout:"side_by_side"},e);this.isAddress()&&(this.get("predefined_value")||this.set({predefined_value:{}},e),this.get("changeable")||this.set({changeable:{province:!0,city:!0,district:!0,street:!0}},e)),this.isAttachment()&&this.set({max_size:this.get("max_size")||20,max_file_quantity:this.get("max_file_quantity")||1,media_type:this.get("media_type")||{type:"unlimited",value:[]}},e),this.isBasicGoodsField()&&((o=this.goodsItemList)!=null?o.isEmpty():void 0)&&this.goodsItemList.add([{name:"商品一"},{name:"商品二"},{name:"商品三"}],e),this.isGoodsField()&&(u=_.any(["collapse_on_mobile","inventory_label","unit"],function(e){return function(t){return _.isUndefined(e.get(t))}}(this)),u&&this.set({collapse_on_mobile:!0,inventory_label:null,unit:null},e)),this.isGeoField()&&this.get("localizable_on_mobile")==null&&this.set({localizable_on_mobile:!1},e),this.isTimeField()&&(this.get("include_second")==null&&this.set({include_second:!1},e),this.get("predefined_value")||this.set({predefined_value:{}},e)),this.isLinkField()&&(this.get("notes")||this.set({notes:"填写示例：http://jinshuju.net 或 https://jinshuju.net"},e)),this.isPageBreak()&&this.set({disable_previous_page:GD.DEFAULT_DISABLE_PREVIOUS_PAGE,previous_page_text:GD.DEFAULT_PREVIOUS_PAGE_TEXT,next_page_text:GD.DEFAULT_NEXT_PAGE_TEXT}),this.isSectionBreak()&&this.set({show_split_line:!1,label:"描述",notes:"请在右侧面板添加段落说明信息"});if(this.isFormAssociation())return this.set({associated_form_token:"",associated_field_api_code:"",association_info:[]})},hasTextChoices:function(){return this.isCheckBox()||this.isRadioButton()||this.isDropDown()||this.isLikertField()},hasImageChoices:function(){return this.type==="ImageCheckBox"||this.type==="ImageRadioButton"},toJSON:function(e){var t,n,r,i,s,o;e==null&&(e=!0),t=_.clone(this.attributes);if(this.hasImageChoices())t.choices=(n=this.imageChoiceList)!=null?n.toJSON():void 0;else if(this.hasTextChoices()||this.isRatingField()||this.isCascade())t.choices=(r=this.textChoiceList)!=null?r.toJSON():void 0;if(this.isLikertField()||this.isMatrixField())t.statements=(i=this.statementList)!=null?i.toJSON():void 0;return this.isMatrixField()&&(t.dimensions=(s=this.dimensionList)!=null?s.toJSON():void 0),this.isGoodsField()&&(t.goods_items=(o=this.goodsItemList)!=null?o.toJSON():void 0),e&&this.shouldAssignDefaultLabel()&&(t.label="未命名"),t},shouldAssignDefaultLabel:function(){return $.trim(this.get("label"))===""&&!this.isBreak()},validate:function(e,t){var n,r,i,s,o,u,a;t||(t={});if(t.on==="label"&&e._type!=="Fields::SectionBreak"&&$.trim(e.label)==="")return"标题不能为空";if(t.on==="predefined_value"&&e._type==="Fields::NumberField"&&$.trim(e.predefined_value)!==""){if(!GD.isNumber(e.predefined_value))return"默认值应该是一个数字";if(e.predefined_value<t.min)return"默认值应当不小于"+t.min;if(e.predefined_value>t.max)return"默认值应当不大于"+t.max}if(e._type==="Fields::AttachmentField"&&t.on==="media_type"&&((o=e.media_type)!=null?o.type:void 0)==="custom"){i=_.compact((u=e.media_type)!=null?u.value:void 0);if(_.isEmpty(i))return"自定文件格式不能为空";if(_.any(i,function(e){return!/^[\w\d_-]+$/ig.test(e.trim())}))return"文件格式不合法，仅支持：字母，数字，下划线，中划线。"}if(e._type==="Fields::AddressField"&&((a=t.on)==="changeable"||a==="predefined_value")){n=e.changeable;if(!_.any(_.values(n),function(e){return e}))return"请至少选择展示一个地址选择项";s=e.predefined_value;if(!s.province&&!n.province&&(n.city||n.district||!n.street))return"请先设定省";if((!s.province||!s.city||n.province)&&!n.city&&n.district)return"勾选区/县之前请先勾选市"}t.required&&$.trim(e[t.on])===""&&"不能为空",r=t.maxCharacterLength;if(r&&GD.getStringLength($.trim(e[t.on]))>r)return"最多"+r+"个字符"},changeTypeTo:function(e,t){var n,r,i,s;return this._resetType(e),(r=this.textChoiceList)!=null&&r.each(function(e){return function(t){return t.type=e.type}}(this)),(i=this.goodsItemList)!=null&&i.each(function(e){return function(e){return e.unset("_type")}}(this)),this._setDefaultValues({silent:!0}),n={_type:e},n.validations=[],this.get("grids_to_occupy")&&parseInt(this.get("grids_to_occupy"))<t&&(n.grids_to_occupy=null),this.set(n),(s=GD.fieldEditView)!=null?s.render(this):void 0},_shouldUpdateAttributes:function(){return this.hasData()&&!this.additionalAttributesFetched&&!this.isNew()&&!this.isRatingField()&&(this.textChoiceList!=null||this.imageChoiceList!=null||this.statementList!=null||this.dimensionList!=null||this.goodsItemList!=null)},updateFieldAttributes:function(){if(this._shouldUpdateAttributes())return $.getJSON(GD.form.url()+"/field_attributes",{field:this.get("api_code")},function(e){return function(t){e.additionalAttributesFetched=!0,t.choices&&(e.textChoiceList!=null&&e.textChoiceList.updateChoices(t.choices),e.imageChoiceList!=null&&e.imageChoiceList.updateChoices(t.choices)),t.statements&&e.statementList!=null&&e.statementList.updateStatements(t.statements),t.dimensions&&e.dimensionList!=null&&e.dimensionList.updateDimensions(t.dimensions);if(t.goods_items&&e.goodsItemList!=null)return e.goodsItemList.updateGoodsItems(t.goods_items)}}(this))}}),t=Backbone.View.extend({className:"field",events:{click:"edit","click [data-role=delete_field]":"deleteField","click [data-role=duplicate_field]":"duplicateField","click .field-description a":"preventDefault"},initialize:function(){return this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"remove",function(e){return function(){return e.$(".tooltipstered").tooltipster("destroy"),e.remove(),GD.showAddFieldTab(),GD.fieldEditView.model=null}}(this)),this.fieldCountValidateView=new GD.FieldCountValidateView({collection:this.collection})},render:function(){var e,t,n;return this.model.isPageBreak()&&(t=this.$(".page-numbers").html()),n=_.template($("#"+this.model.type+"_show_template").html()),e=this.model.toJSON(),this.model.isDateField()&&(e.predefined_value=GD.formatDate(GD.parseDate(this.model.get("predefined_value")))),this.$el.html(n(e)).data("cid",this.model.cid),this.$el.removeClassRegExp(/field-/),this.$el.addClass("field-"+this.model.type.underscore().dasherize()),this._updatePresenceIndicator(),this._updateSettingIcons(),this._updateLabelHint(),(this.model.hasData()||this.model.isAssociated())&&GD._decorateDeleteLink(this,"[data-role=delete_field]","#field_delete_confirm_template"),this.model.hasTextChoices()&&!this.model.isLikertField()&&this._renderTextChoices(),this.model.hasImageChoices()&&this._renderImageChoices(),this.model.isGoodsField()&&this._renderGoodsItems(),this.model.isMobile()&&this._updateMobileView(),this.model.isTimeField()&&this._updateTimeFieldView(),this.model.isPageBreak()&&this._updatePageBreakView(t),this.model.isRatingField()&&this._renderRatingsView(),this.model.isAddress()&&this._renderAddressView(),this.model.isLikertField()&&this._renderLikertView(),this.model.isMatrixField()&&this._renderMatrixView(),this.model.isAttachment()&&this._renderAttachmentFieldSelectView(),GD.initDatePicker(this.$el),this.$el.trigger("render.gd"),this},_updatePresenceIndicator:function(){return n.call(this.model.get("validations"),"presence")>=0?this.$el.addClass("required"):this.$el.removeClass("required")},_updateSettingIcons:function(){this.model.get("private")&&this.$("> .icons").append($("<i class='gd-icon-lock with-tooltip' data-role='private_indicator' title='仅限管理员可见'></i>"));if(this.model.get("grids_to_occupy"))return this.$("> .icons").append("<i class='icon-grid-"+this.model.get("grids_to_occupy")+"'></i>")},_updateLabelHint:function(){var e,t;e=[],e.push(this._lengthHint()),e.push(this._rangeHint()),e.push(this._dateRangeHing()),t=_.flatten(e);if(t.length>0)return this.$(".field-label").append("（"+t.join("，")+"）")},_lengthHint:function(){var e,t,n,r,i,s,o;return t=[],n=this.model.get("maximum_length"),r=this.model.get("minimum_length"),e=(s=this.model.type)==="CheckBox"||s==="ImageCheckBox",i=e?"选":"请填写",o=e?"项":"个字符",n>0&&r>0?Math.floor(n)===Math.floor(r)?t.push(""+i+Math.floor(n)+o):t.push(""+i+Math.floor(r)+"-"+Math.floor(n)+o):(r>0&&t.push("最少"+i+Math.floor(r)+o),n>0&&t.push("最多"+i+Math.floor(n)+o)),t},_rangeHint:function(){var e,t,n,r,i;return e=[],i=this.model.get("range_min"),r=this.model.get("range_max"),n=!!i||i===0,t=!!r||r===0,n&&t?e.push("请输入"+Math.floor(i)+"-"+Math.floor(r)+"之间的数字"):n?e.push("请输入"+Math.floor(i)+"及以上的数字"):t&&e.push("请输入不大于"+Math.floor(r)+"的数字"),e},_dateRangeHing:function(){var e,t,n;return t=[],n=GD.formatDate(GD.parseDate(this.model.get("start_date"))),e=GD.formatDate(GD.parseDate(this.model.get("end_date"))),n&&e?t.push("请选择"+n+"到"+e+"之间的日期"):n?t.push("请选择不早于"+n+"的日期"):e&&t.push("请选择不晚于"+e+"的日期"),t},_renderTextChoices:function(){return(new GD.TextChoiceListShowView({model:this.model,collection:this.model.textChoiceList,el:this.$(".choices")})).render()},_renderImageChoices:function(){return(new GD.ImageChoiceListShowView({model:this.model,collection:this.model.imageChoiceList,el:this.$(".choices")})).render()},_renderGoodsItems:function(){return(new GD.GoodsItemListShowView({model:this.model,collection:this.model.goodsItemList,el:this.$(".goods-items")})).render()},_updateTimeFieldView:function(){var e,t,n,r,i,s;i=this.$("[name='date[second]']"),this.model.get("include_second")?i.removeClass("hide"):i.addClass("hide"),n=(t=this.model.get("predefined_value"))!=null?t:{},r=[];for(e in n)s=n[e],r.push(this.$("[name='date["+e+"]']").val(s));return r},_updatePageBreakView:function(e){($.trim(this.model.get("label"))||$.trim(this.model.get("notes")))&&this.$el.addClass("has-content");if(e)return this.$(".page-numbers").html(e)},_renderRatingsView:function(){return this.$(".rating-group").html((new GD.RatingShowView({model:this.model})).render().el)},_renderAddressView:function(){return this.$(".address").html((new GD.AddressShowView({model:this.model})).render().el)},_updateMobileView:function(){if(this.model.get("sms_verification"))return this.$("input").after("<div class='sms-verification'><input type='text' class='verification-token fixed-width-control' placeholder='验证码' readonly><span class='gd-btn gd-btn-primary send-token-link'>发送验证短信</span></div>")},_renderLikertView:function(){return this.$(".likert").html((new GD.LikertShowView({model:this.model})).render().el)},_renderMatrixView:function(){return this.$(".matrix").html((new GD.MatrixShowView({model:this.model})).render().el)},_renderAttachmentFieldSelectView:function(){return this.$(".attachment-field").html((new GD.AttachmentFieldSelectShowView({model:this.model})).render().el)},_toggleEditFieldUp:function(){return $("#form_design .sidebar a[href=#edit_button]").parent().addClass("hidden"),$("#form_design .sidebar a[href=#edit_field]").parent().removeClass("hidden")},edit:function(e){var t;return Backbone.trigger("toggleEditFieldUp"),$(".field.last-edit").removeClass("last-edit"),this.$el.hasClass("edit")?GD.showEditFieldTab():($("#form_design").find(".field.edit").removeClass("edit"),this.$el.addClass("edit"),$("#form_design .form-header").trigger("blur.gd"),$("#edit_field").scrollTop(0),(t=GD.fieldEditView)!=null?t.render(this.model):void 0)},deleteField:function(e){e.stopPropagation();if(!this.model.hasData()&&!this.model.isAssociated())return this.collection.remove(this.model)},duplicateField:function(e){var t,n,r;e.stopPropagation();if(!this.fieldCountValidateView.finalAlertValidate())return;return r=this.model.get("position")+1,n=_.omit(this.model.toJSON(),["_id","api_code","has_data","position"]),n.position=r,t=this.collection.indexOf(this.model),this.collection.moveBackward(t+1,r+1),this.collection.add(n,{at:t+1}),this.fieldCountValidateView.forewarningValidate()},preventDefault:function(e){return e.preventDefault()}}),GD.FieldEditView=Backbone.View.extend({el:'#edit_field > .panel[data-target="field"]',events:{"change [data-field-key]":"update","click [data-field-key=validations][value=presence]":"togglePrivateField","click [data-field-key=private]":"togglePresenceValidation","change [data-target]:checkbox":"updateTargetValue","change .date-item-predefined_value":"updateDateFieldPredefinedValue","change .date-item-start_date":"updateDateFieldStartDateValue","change .date-item-end_date":"updateDateFieldEndDateValue","change [data-field-key=disable_previous_page]":"togglePreviousPageTextConfigurability",'change [data-field-key="include_second"]':"toggleSecond","click .gd-btn-group > .gd-btn":"updateBtnStatus","click [data-role=change_field_type]":"changeFieldType","select2:select [data-field-key=associated_form_token]":"updateAssociatedFieldApiCode"},_updateBody:function(e){return this.$("> .panel-body").html(e)},_updatePageBreakInfo:function(e){return e.isFirstPage=e.position===1,e.isLastPage=$(".field.edit .page-number").text()===$(".field.edit .total-page-number").text()},initialize:function(){return CKEDITOR.on("instanceReady",function(e){var t;return t=$(e.editor.element.$),t.parent(".fixed-height-editor-wrap").removeClass()})},render:function(e){var t,n;return this.$("input, textarea").blur(),this.model=e,this.model.updateFieldAttributes(),n=_.template($("#"+this.model.type+"_edit_template").html()),t=this.model.toJSON(!1),this.model.isMobile()&&(t.sms_signature=GD.form.get("sms_signature")),this.model.isPageBreak()&&this._updatePageBreakInfo(t),this._updateBody(n(t)),this.model.isFormAssociation()&&this.updateAssociatedFormToken(),this.model.hasTextChoices()&&this._renderTextChoices(),this.model.hasImageChoices()&&this._renderImageChoices(),this.model.isCascade()&&this._renderCascadeChoices(),(this.model.isLikertField()||this.model.isMatrixField())&&this._renderStatements(),this.model.isMatrixField()&&this._renderDimensions(),this.model.isAddress()&&this._renderAddressEdit(),this.model.isRatingField()&&this._renderRatingEdit(),this.model.isGoodsField()&&this._renderGoodsItems(),this.model.isAttachment()&&this._renderAttachmentFieldMediaTypeEditView(),this.$el.removeClass("hide"),this.$el.siblings(".panel").addClass("hide"),GD.showEditFieldTab(),GD.initCKEditor(this.$(".ckeditor"),{gdimage_imageUploadUrl:GD.descImageUploadUrl,gdimage_imageuploadTokenUrl:GD.descImageUploadTokenUrl,gdimage_imageUploadCallbackUrl:GD.descImageUploadCallbackUrl,toolbar:GD.miniCKEditorToolbar}),this.model.isDateField()&&this._updateDateFieldValueType(),this.model.isTimeField()&&this._updateTimeFieldPredefinedValue(),(this.model.isTextField()||this.model.isMobile())&&this._updateWhiteListSettingLink(),this._initValidationTooltipsters(),this.model.isFormAssociation()&&this.initAssociatedFieldApiCode(),this._onSettingCollapse(),GD.enhanceInputField(this.$el),GD.initDatePicker(this.$el,{clearBtn:!0,orientation:"auto"}),$(window).trigger("resize.gd")},initAssociatedFieldApiCode:function(){return this.$("[data-field-key=associated_form_token]").trigger("select2:select").trigger("change.select2")},updateAssociatedFormToken:function(){var e,t,n,r;e=this.$("[name=associated_form_token]");if(!GD.associableData||!this.model)return;return r=this.model.get("associated_form_token"),t=_.select(GD.associableData.forms,function(e){return function(t){return!t.target_field_api_codes||_.includes(t.target_field_api_codes,e.model.get("api_code"))}}(this)),n=GD.selectOptionHtml(t,"token","name",r),e.html(n)},_initValidationTooltipsters:function(){var e,t,n,r,i,s,o;t={set_white_list:{functionReady:function(e){return function(t,n){var r;return r=e.model.get("white_list_values")||[],n.find("textarea").val(r.join("\n")),GD.focusToEnd(n.find("textarea")),n.one("click","input:submit",function(){var r;return r=GD.rawValuesFromTextarea(n.find("textarea")),e._addToWhiteList(r),t.tooltipster("hide")})}}(this)},change_sms_signature:{theme:"change-sms-signature-tooltipster",functionReady:function(e){return function(t,n){return n.find("#setting_sms_signature").val(GD.form.get("sms_signature")),n.on("click","[data-role=send_sms]",function(r){return e._sendSignatureCheckSMS(n,$(event.target)),setTimeout(function(){return t.tooltipster("reposition")},5)}),n.on("click","input:submit",function(){return e._saveSignature(n)?t.tooltipster("hide"):(GD.showErrorMessageBelow(n.find("#setting_sms_signature"),"请填写签名"),setTimeout(function(){return t.tooltipster("reposition")},5))})}}(this)}},s=this.$("#field_validations [data-toggle=tooltipster]"),o=[];for(n=0,r=s.length;n<r;n++)i=s[n],e=$(i),o.push(e.gdClickTooltip(GD.formEditTooltipsterConfig(e,t[e.data("role")])));return o},_sendSignatureCheckSMS:function(e,t){var n,r,i,s,o;GD.clearErrorMessageBelow(e.find("#setting_sms_signature")),GD.clearErrorMessageBelow(e.find("#test_mobile")),r=!0,s=e.find("#setting_sms_signature").val(),s||(r=!1,GD.showErrorMessageBelow(e.find("#setting_sms_signature"),"请填写签名")),i=e.find("#test_mobile").val();if(!i||!GD.isMobileNumber(i))r=!1,GD.showErrorMessageBelow(e.find("#test_mobile"),l("%warn_wrong_mobile_number"));return r?(o=new GD.SMSSender(t,t.data("url")),o.send({mobile:i,signature:s,form_id:typeof (n=GD.form).get=="function"?n.get("token"):void 0})):setTimeout(function(){return GD.enableBtn(t)},10)},_saveSignature:function(e){var t;return GD.clearErrorMessageBelow(e.find("#setting_sms_signature")),GD.clearErrorMessageBelow(e.find("#test_mobile")),t=e.find("#setting_sms_signature").val(),t&&(GD.form.set({sms_signature:t}),this.$(".sms-signature").text(t)),!!t},_onSettingCollapse:function(){return this.$(".setting-panel > .collapse").on("show.bs.collapse",function(){return $(this).closest(".setting-panel").addClass("open")}),this.$(".setting-panel > .collapse").on("hide.bs.collapse",function(){return $(this).closest(".setting-panel").removeClass("open")})},_renderTextChoices:function(){return(new GD.TextChoiceListEditView({model:this.model,collection:this.model.textChoiceList,el:this.$("#field_choices")})).render()},_renderImageChoices:function(){return(new GD.ImageChoiceListEditView({model:this.model,collection:this.model.imageChoiceList,el:this.$("#field_choices")})).render()},_renderCascadeChoices:function(){return(new GD.CascadeChoiceListEditView({model:this.model,collection:this.model.textChoiceList,el:this.$("#field_choices")})).render()},_renderStatements:function(){return(new GD.StatementListEditView({model:this.model,collection:this.model.statementList,el:this.$("#field_statements")})).render()},_renderDimensions:function(){return(new GD.MatrixDimensionListEditView({model:this.model,collection:this.model.dimensionList,el:this.$("#field_dimensions")})).render()},_renderAddressEdit:function(){return this.$(".address").html((new GD.AddressEditView({model:this.model})).render().el)},_renderRatingEdit:function(){return new GD.RatingEditView({model:this.model,el:this.$(".rating")})},_renderGoodsItems:function(){return(new GD.GoodsItemListEditView({model:this.model,collection:this.model.goodsItemList,el:this.$("#goods_items")})).render()},_renderAttachmentFieldMediaTypeEditView:function(){return this.attachmentFieldMediaTypeEditView=(new GD.AttachmentFieldMediaTypeEditView({model:this.model,el:this.$("#attachment_field_media_type_edit_view")})).render()},_updateDateFieldValueType:function(){return this._updateDateFieldValueTypeFor("predefined_value"),this._updateDateFieldValueTypeFor("start_date"),this._updateDateFieldValueTypeFor("end_date")},_updateDateFieldValueTypeFor:function(e){var t,n;t=this.model.get(""+e),n=t&&(t.indexOf("today")!==-1||t.indexOf("before")!==-1||t.indexOf("after")!==-1);if(n)return this.$("#"+e+"_type").val(t.split("_")[0])},_updateTimeFieldPredefinedValue:function(){var e,t;t=this.$("[data-sub-key='second']"),this.model.get("include_second")?t.removeClass("hide"):t.addClass("hide"),e=this.model.get("predefined_value");if(e)return this.$('[data-field-key="predefined_value"][data-sub-key="hour"]').val(e.hour),this.$('[data-field-key="predefined_value"][data-sub-key="minute"]').val(e.minute),this.$('[data-field-key="predefined_value"][data-sub-key="second"]').val(e.second)},_attributeValue:function(e,t){var n,r,i,s,o;if(e.data("sub-key")){o={},s=this.$("[data-field-key="+t+"]:visible");for(n=0,i=s.length;n<i;n++)r=s[n],$(r).attr("type")==="checkbox"?o[$(r).data("sub-key")]=$(r).is(":checked"):o[$(r).data("sub-key")]=$(r).val();return o}return e.attr("type")==="checkbox"?e.attr("multiple")?$.map(this.$("[data-field-key='"+t+"']:checked"),function(e){return $(e).val()}):e.is(":checked"):e.val()},update:function(e){var t,n,r,i,s,o,u,a,f,l,c,h;n=$(e.target),a=n.data("field-key"),o=this.model.isAddress()&&(a==="predefined_value"||a==="changeable");if(o){c=this.$(".address .has-error select");for(s=0,f=c.length;s<f;s++)i=c[s],GD.clearErrorMessageBelow($(i))}else GD.clearErrorMessageBelow(n);r={},r[a]=this._attributeValue(n,a),h=n.data("sub-key"),u=!0,this.model.isAttachment()&&(r[a]=this._updateAttachmentMediaTypeValue(h,r[a]),u=h==="value"),l={on:a,validate:u,required:n.prop("required")},n.data("max-character-length")&&(l.maxCharacterLength=parseInt(n.data("max-character-length"))),n.is("input[type=number]")&&(n.attr("min")&&(l.min=parseFloat(n.attr("min"))),n.attr("max")&&(l.max=parseFloat(n.attr("max")))),this.model.set(r,l),o?this._showAddressErrorMessageBelow(n,this.model.validationError):GD.showErrorMessageBelow(n,this.model.validationError);if(!this.model.validationError){t=this.$("[data-target="+a+"]:checkbox");if(t.length>0)return this._updateSwitcher(t,r[a])}},_updateAttachmentMediaTypeValue:function(e,t){var n,r,i;return e==="type"?(r=this.attachmentFieldMediaTypeEditView.findMediaTypeDataByType(t!=null?t.type:void 0),t.value=r!=null?r.value:void 0):e==="value"&&(i=new RegExp(",|，"),n=_.compact(t!=null?t.value.split(i):void 0),t.value=_.map(n,function(e){return e.trim().toLowerCase()})),t},_showAddressErrorMessageBelow:function(e,t){var n,r;if(t)return r=$("<div class='error-message'>"+t+"</div>"),n=e.closest("li").children(),n.wrapAll("<div class='has-error'>"),n.parent().append(r)},togglePrivateField:function(e){if($(e.target).is(":checked"))return this.$("[data-field-key=private]").removeAttr("checked").change()},togglePresenceValidation:function(e){if($(e.target).is(":checked"))return this.$("[data-field-key=validations][value=presence]").removeAttr("checked").change()},reset:function(){return this._updateBody('<div class="empty-text-container"><div class="empty-text"><i class="gd-icon-edit-form"></i><p>没有选定的字段<br/>请添加或者选择一个字段</p></div></div>'),this.$el.css({marginTop:0}),this.model=null},_updateSwitcher:function(e,t){return e.prop("checked",!!t),this._toggleTarget(e)},_toggleTarget:function(e){var t,n,r;return n=e.data("target"),t=this.$("[data-field-key="+n+"]"),r=e.is(":checked"),t.closest(".form-group").find(".config").toggle(r),[t,r]},updateTargetValue:function(e){var t,n,r,i,s;n=$(e.target),i=this._toggleTarget(n),t=i[0],s=i[1];if(!s)return r={},r[n.data("target")]=null,this.model.set(r);if(t.val())return t.trigger("change")},updateDateFieldValueFor:function(e,t){var n,r,i,s,o,u,a,f;return n=$(t.target).parents(".dynamic-date-value-widget"),r=n.find(".day-number-container"),i=n.find("[data-field-key='"+e+"']"),s=i.closest(".gd-input-container").addBack(),f=n.find("#"+e+"_type").val(),a=f,f==="today"||!f?r.addClass("hide"):(o=r.find("input").val(),a=f+"_"+o,r.removeClass("hide")),f?s.hide():(a=i.val(),s.css({display:"inline-block"})),this.model.set((u={},u[""+e]=a,u))},updateDateFieldPredefinedValue:function(e){return this.updateDateFieldValueFor("predefined_value",e)},updateDateFieldStartDateValue:function(e){return this.updateDateFieldValueFor("start_date",e)},updateDateFieldEndDateValue:function(e){return this.updateDateFieldValueFor("end_date",e)},togglePreviousPageTextConfigurability:function(e){return this.$("[data-field-key='previous_page_text']").prop("readonly",$(e.target).is(":checked"))},toggleSecond:function(e){var t;return t=this.$("[data-field-key='predefined_value'][data-sub-key='second']"),t.toggleClass("hide",!$(e.target).is(":checked"))},updateBtnStatus:function(e){return GD.updateRadioBtnGroupStatus($(e.target))},_addToWhiteList:function(e){var t;return this.model.set("white_list_values",_.uniq(e)),t=this.model.get("white_list_values").length>0?_.union(this.model.get("validations"),["white_list_limit"]):_.without(this.model.get("validations"),"white_list_limit"),this.model.set("validations",t),this._updateWhiteListSettingLink()},_updateWhiteListSettingLink:function(){var e,t;return t=(this.model.get("white_list_values")||[]).length,e=this.$("[data-role=set_white_list]"),t>0?(this.$(".white_list_count_text").text("（已设"+t+"个）"),e.data("initial-text")||e.data("initial-text",e.text()),e.text("修改")):(this.$(".white_list_count_text").empty(),e.text(e.data("initial-text"))),this.$('input[data-field-key="validations"][value="white_list_limit"]').prop("checked",_.contains(this.model.get("validations"),"white_list_limit"))},changeFieldType:function(e){var t;return t=$(e.target),t.is("a[data-field-type]")||(t=t.closest("a[data-field-type]")),this.model.changeTypeTo(t.data("field-type"),t.data("minimum-grids"))},updateAssociatedFieldApiCode:function(e){var t,n,r,i;if(!GD.associableData)return;return t=this.$("#associated_field_api_code"),i=this.model.get("associated_field_api_code"),r=GD.associableData.fields[e.target.value],n=GD.selectOptionHtml(r,"api_code","label",i),t.html(n)}}),GD.FieldList=Backbone.Collection.extend({model:e,comparator:"position",hasPageBreak:function(){return this.any(function(e){return e.isPageBreak()})},pageBreakList:function(){return this.filter(function(e){return e.isPageBreak()})},moveBackward:function(e,t){var n,r,i,s,o,u;s=this.rest(e),u=[];for(r=n=0,i=s.length;n<i;r=++n)o=s[r],u.push(o.set({position:t+r},{silent:!0}));return u},addFieldAfter:function(e,t,n){var r,i,s;return n==null&&(n=null),t==="Fields::PageBreak"&&!this.hasPageBreak()&&this._addPageOne(),r={_type:t,field_inability_info:n},e?(i=e.get("position"
)+1,r.position=i,s=this.indexOf(e),this.moveBackward(s+1,i+1),this.add(r,{at:s+1})):(r.position=1,this.moveBackward(0,2),this.add(r,{at:0}))},_addPageOne:function(){var t;return this.moveBackward(0,2),t=new e({_type:"Fields::PageBreak",position:1}),t.hideEditView=!0,this.add(t,{at:0})}}),GD.FieldListShowView=Backbone.View.extend({el:"#form_design .fields",events:{click:"shakeSidebarWhenEmptyFields"},initialize:function(){return this.listenTo(this.collection,"add",function(e){return function(n,r,i){var s,o;e._fetchAssociableDataOnDemand(),s=i.at,o=new t({model:n,collection:e.collection});switch(s){case null:case void 0:e.$el.append(o.render().el);break;case 0:e.$el.prepend(o.render().el);break;default:e.$el.children(":nth-child("+s+")").length>0?e.$el.children(":nth-child("+s+")").after(o.render().el):e.$el.append(o.render().el)}return e.$el.removeClass("empty-fields"),n.isPageBreak()&&e._updatePageBreakNumbers(),o.$el.trigger("render.gd")}}(this)),this.listenTo(this.collection,"remove",function(e){return function(t,n,r){var i;return t.isPageBreak()&&(i=e.collection.pageBreakList(),i.length===1&&e.collection.remove(i[0]),e._updatePageBreakNumbers()),e._addMsgWhenEmptyField()}}(this)),this.listenTo(this.collection,"reset",this.render)},_clickOnField:function(e){return e.trigger("click")},render:function(){var e;return e=this.$(".field.edit").index(),this.$el.empty(),this._fetchAssociableDataOnDemand(),this.collection.each(function(e){return function(n,r){var i;return i=new t({model:n,collection:e.collection}),e.$el.append(i.render().el)}}(this)),this._updatePageBreakNumbers(),e>-1&&this._clickOnField(this.$(".field:nth-child("+(e+1)+")")),this._initSortable(),this._setFieldsPosition(),this._addMsgWhenEmptyField()},_initSortable:function(){var e;return e=this.$el.sortable({items:"> .field:not(.field-page-break:first)",axis:"y",cancel:"> .actions",placeholder:"field-sorting-placeholder",distance:5,tolerance:"intersect",over:function(e){return function(t,n){return e.$el.removeClass("empty-fields")}}(this),out:function(e){return function(t,n){return e._addMsgWhenEmptyField()}}(this),start:function(e){return function(e,t){var n;return n=t.item.is(".field-dragging")?88:t.helper.outerHeight()-2,t.placeholder.height(n)}}(this),stop:function(e){return function(t,n){var r,i,s;e.$el.removeClass("empty-fields"),n.item.css({zIndex:"initial"});if(n.item.is(".field-dragging"))return i=n.item.find("[data-field-type]").data("field-type"),r=n.item.index(),r>0&&(s=e.collection.at(r-1)),n.item.remove(),e.collection.addFieldAfter(s,i)}}(this),update:function(e){return function(t,n){return e._setFieldsPosition(),e.collection.sort(),e._updatePageBreakNumbers()}}(this)}).disableSelection().sortable("instance"),e.cssPosition="absolute"},_setFieldsPosition:function(){var e,t,n,r,i,s,o;s=this.$("> .field"),o=[];for(r=n=0,i=s.length;n<i;r=++n)t=s[r],e=$(t).data("cid"),o.push(this.collection.get(e).set({position:r+1},{silent:!0}));return o},_updatePageBreakNumbers:function(){var e;return e=this.collection.pageBreakList(),this.$(".field-page-break .total-page-number").html(e.length),_.each(e,function(e,t){var n;return n=this.$(".field-page-break:eq("+t+")"),n.find(".current-page .page-number").html(t+1)})},_addMsgWhenEmptyField:function(){if(this.collection.length===0)return this.$el.addClass("empty-fields")},_fetchAssociableDataOnDemand:function(){if(!GD.associableData&&this.collection.any(function(e){return e.isFormAssociation()}))return $.getJSON("/forms/associable_data",{target_form_token:GD.form.get("token")}).success(function(e){var t,n;return GD.associableData=e,(t=GD.fieldEditView)!=null&&t.updateAssociatedFormToken(),(n=GD.fieldEditView)!=null?n.initAssociatedFieldApiCode():void 0}).fail(function(){return GD.associableData=null,GD.showFlashNotification("获取关联数据失败","danger")})},shakeSidebarWhenEmptyFields:function(){if(this.$el.children().length===0)return GD.showAddFieldTab(),GD.shakeSidebar()}})}.call(this),function(){var e,t,n,r,i,s,o,u,a,f;f=function(e){return $.trim(e.get("label"))===""},n=Backbone.Model.extend({defaults:{label:""},key:function(){var e;return(e=this.get("value"))!=null?e:this.get("label")},matchedByKey:function(e){return this.key()===e}}),r=Backbone.Collection.extend({model:n,valid:function(){return this.reject(f)}}),i=Backbone.View.extend({tagName:"li",events:{change:"update","click .del-option":"removeOption","click .add-option":"addOption"},render:function(e,t){var n,r;return this.dimensionIndex=e,n=this.model.toJSON(),n.dimensionIndex=e,n.dimensionOptionIndex=t,r=_.template($("#goods_dimension_option_template").html()),this.$el.html(r(n)),this},update:function(e){return this.model.set({label:$(e.target).val()})},removeOption:function(e){return this.model.list.remove(this.model),this.model.list.length===1&&this.$el.siblings().find(".del-option").hide(),this.remove(),e.preventDefault()},addOption:function(){var e,t;return this.$(".del-option:hidden").show(),e=this.model.list.indexOf(this.model),t=new n,this.model.list.add(t,{at:e+1}),this.$el.after((new i({model:t})).render(this.dimensionIndex,e+1).$el)}}),e=Backbone.Model.extend({defaults:{label:""},initialize:function(){var e;this.dimensionOptions=new r,this.dimensionOptions.on("add",function(e){return function(t,n){return t.list=n,t.on("change",function(){return e.trigger("change",e)})}}(this)),this.dimensionOptions.on("remove",function(e){return function(){return e.trigger("change",e)}}(this)),_.each(this.get("options"),function(e){return function(t){return e.dimensionOptions.add(t)}}(this)),e=[];while(this.dimensionOptions.length<3)e.push(this.dimensionOptions.add({}));return e},isEmpty:function(){return f(this)||this.dimensionOptions.all(f)},key:function(){var e;return(e=this.get("api_code"))!=null?e:this.get("label")},matchedByKey:function(e){return this.key()===e},toJSON:function(){var e;return e=_.clone(this.attributes),e.options=_.map(this.dimensionOptions.valid(),function(e){return e.toJSON()}),e}}),t=Backbone.Collection.extend({model:e,valid:function(){return this.reject(function(e){return e.isEmpty()})}}),s=Backbone.View.extend({events:{"change .dimension-label":"update"},render:function(e){var t;return this.setElement($("#goods_dimensions_modal .goods-dimensions .goods-dimension:nth-child("+(e+1)+")")),this.$(".dimension-label").val(this.model.get("label")),t=this.$("ul"),this.model.dimensionOptions.each(function(n,r){return t.append((new i({model:n})).render(e,r).$el)}),this},update:function(e){return this.model.set({label:$(e.target).val()})}}),o=Backbone.Model.extend({defaults:{price:0,inventory:null,specification:{}},validate:function(e,t){if(t.on==="price"&&!GD.isNumber(e.price))return"价格必须为非空数字";if(t.on==="inventory"&&$.trim(e.inventory)!=="")if(!GD.isNumber(e.inventory)||parseInt(e.inventory)<0)return"库存必须为非负数字或为空"},isMatched:function(e){var t,n;return _.isEmpty(e)?!0:(n=_.keys(this.get("specification")),t=_.keys(e),t.length>n.length?_.isEqual(this.get("specification"),_.pick(e,n)):t.length===n.length?e[n[0]]===this.get("specification")[n[0]]:_.isEqual(e,_.pick(this.get("specification"),t)))}}),u=Backbone.Collection.extend({model:o,initialize:function(){return GD.dimensions.each(function(e){return function(t){return e.listenTo(t,"change",e._updateModels)}}(this))},_matchedSKU:function(e){var t;return t=this.find(function(t){return t.isMatched(e)}),t!=null?t:this.first()},_buildSKUsWithoutDimension:function(){return this._newSKUattrs({})},_buildSKUsWith1Dimension:function(e){var t,n,r,i,s,o,u;t=e.key(),o=[],s=e.dimensionOptions.valid();for(n=0,r=s.length;n<r;n++)i=s[n],u={},u[t]=i.key(),o.push(this._newSKUattrs(u));return o},_buildSKUsWith2Dimensions:function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p;n=e.key(),i=t.key(),h=[],l=e.dimensionOptions.valid();for(o=0,a=l.length;o<a;o++){r=l[o],c=t.dimensionOptions.valid();for(u=0,f=c.length;u<f;u++)s=c[u],p={},p[n]=r.key(),p[i]=s.key(),h.push(this._newSKUattrs(p))}return h},_newSKUattrs:function(e){var t,n;return n=this._matchedSKU(e),t=n.pick("price","inventory"),t.specification=e,t},_updateModels:function(){var e,t;return e=GD.dimensions.valid(),t=function(){switch(e.length){case 0:return this._buildSKUsWithoutDimension();case 1:return this._buildSKUsWith1Dimension(e[0]);case 2:return this._buildSKUsWith2Dimensions(e[0],e[1]);default:return this.models.map(function(e){return e.clone()})}}.call(this),this.reset(t)}}),a=Backbone.View.extend({tagName:"tr",events:{change:"update"},initialize:function(){return this.model.view=this},render:function(){var e,t,n,r,i,s,o,u;this.$el.empty(),r=[],o=this.model.get("specification");for(e in o)i=o[e],t=GD.dimensions.find(function(t){return t.matchedByKey(e)}),n=t.dimensionOptions.find(function(e){return e.matchedByKey(i)}),r.push(n.get("label")),this.$el.append("<td data-dim-key='"+GD.htmlSafe(e)+"' data-option-key='"+GD.htmlSafe(i)+"'>"+GD.htmlSafe(n.get("label"))+"</td>");return s=r.join("_"),this.$el.append("<td><input type='number' step='any' class='gd-input-medium' name='price' id='price_"+s+"' value='"+this.model.get("price")+"'></td>"),this.$el.append("<td><input type='number' step='1' class='gd-input-medium' name='inventory' id='inventory_"+s+"' value='"+((u=this.model.get("inventory"))!=null?u:"")+"'></td>"),this},update:function(e){var t,n;t=$(e.target),GD.clearErrorMessageBelow(t),n={},n[t.attr("name")]=t.val(),this.model.set(n,{validate:!0,on:t.attr("name")});if(this.model.validationError)return GD.showErrorMessageBelow(t,this.model.validationError),GD.disableBtn($("#goods_dimensions_modal .save-button"));if($("#goods_dimensions_modal .skus .has-error").length===0)return GD.enableBtn($("#goods_dimensions_modal .save-button"))}}),GD.GoodsDimensionsContainerView=Backbone.View.extend({el:"#goods_dimensions_modal .goods-dimensions",initialize:function(){return this.dimensions=new t(this.model.get("dimensions")),GD.dimensions=this.dimensions},validDimensionArray:function(){return this.dimensions.valid()},validDimensions:function(){return new t(this.validDimensionArray())},render:function(){this.$("ul").empty(),this.$(".dimension-label").val("");while(this.dimensions.length<2)this.dimensions.add(new e);return this.dimensions.each(function(e,t){return(new s({model:e})).render(t)}),this}}),GD.SKUsContainerView=Backbone.View.extend({el:"#goods_dimensions_modal .skus table",initialize:function(){return this.skus=new u(this.model.get("skus")),this.skus.isEmpty()&&this.skus.add(this.model.pick("price","inventory")),this.listenTo(this.skus,"reset",this.render)},_mergeCells:function(){var e,t,n,r,i,s;t=_.groupBy(this.$("tr td:first-child"),function(e){return $(e).data("option-key")}),n=1,i=[];for(r in t)s=t[r],n%2===0&&$(s).parent("tr").addClass("even"),e=$(s[0]),e.attr("rowspan",s.length),$(_.rest(s)).remove(),i.push(n+=1);return i},render:function(){var e,t,n,r,i,s;s=_.template($("#skus_table_template").html()),this.$el.html(s),r=this.$("thead th:first"),i=GD.dimensions.valid();for(t=0,n=i.length;t<n;t++)e=i[t],r.before("<th>"+GD.htmlSafe(e.get("label"))+"</th>");return this.skus.each(function(e){return function(t){return e.$("tbody").append((new a({model:t})).render().$el)}}(this)),this._mergeCells(),this}})}.call(this),function(){var e,t,n,r,i,s,o,u=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;n=Backbone.Model.extend({defaults:{name:"",price:0,position:1e4,value:"",description:"",inventory:null,predefined_number:null,predefined_specification:null,has_data:!1,hidden:!1},initialize:function(){return this.on("change:dimensions",function(e){return function(){var t,n,r;if(_.isObject(e.get("predefined_specification")))return t=function(){var e,t,r,i,s;r=this.get("dimensions"),s=[];for(e=0,t=r.length;e<t;e++)n=r[e],s.push((i=n.api_code)!=null?i:n.label);return s}.call(e),r=_.pick(e.get("predefined_specification"),t),e.set({predefined_specification:r})}}(this)),this.on("change:skus",this.updateInventory)},updateInventory:function(){var e,t;return t=this.get("skus"),e=_.every(t,function(e){return GD.isNumber(e.inventory)}),e?this.set({inventory:_.reduce(t,function(e,t){var n;return e+parseInt((n=t.inventory)!=null?n:0)},0)}):this.set({inventory:null})},priceRange:function(){var e,t,n,r;r=this.get("skus");if(r!=null)return n=_.map(r,function(e){return parseFloat(e.price)}),t=_.min(n),e=_.max(n),e>t?t.toFixed(2)+"起":t.toFixed(2)},validate:function(e,t){t||(t={});if(t.on==="name"&&$.trim(e.name)==="")return"商品名不能为空";if(t.on==="price"&&!GD.isNumber(e.price))return"价格必须为非空数字";if(t.on==="inventory"&&$.trim(e.inventory)!=="")if(!GD.isNumber(e.inventory)||parseInt(e.inventory)<0)return"库存必须为非负数字或为空";if(t.on==="predefined_number"&&$.trim(e.predefined_number)!=="")if(!GD.isNumber(e.predefined_number)||parseInt(e.predefined_number)<0)return"默认数量必须为非负数字或为空"},toJSON:function(e){var t;return e==null&&(e=!0),t=_.omit(this.attributes,"has_data"),e&&$.trim(t.name)===""&&(t.name="商品名"),t},isPreSelecting:function(e,t){return this.get("predefined_specification")==null?!1:this.get("predefined_specification")[e]===t},isBasic:function(){return this.type==="basic"}}),GD.GoodsItemList=Backbone.Collection.extend({model:n,comparator:"position",updateGoodsItems:function(e){return this.each(function(t){return t.set(e[t.get("value")])})}}),e=Backbone.View.extend({templateId:"basic_goods_item_show_template",initialize:function(){return this.model.on("change",this.render,this),this.model.on("remove",this.remove,this)},_updateViewBySKUs:function(){var e,t,n,r,i,s,o,u,a,f,c,h,p,d,v,m,g,y;if(!_.isEmpty(this.model.get("skus"))){this.$(".price-inventory .price").html("<span class='currency'>&yen;</span>"+this.model.priceRange()),m=[],n=$("<div class='dimensions'></div>"),h=this.model.get("dimensions");for(r=0,o=h.length;r<o;r++){t=h[r],n.append("<div class='dimension-label'>"+GD.htmlSafe(t.label)+"：</div>"),c=$("<div class='dimension-options'></div>"),n.append(c),e=(p=t.api_code)!=null?p:t.label,m.push(t.label),d=t.options;for(i=0,u=d.length;i<u;i++)f=d[i],a=(v=f.value)!=null?v:f.label,s=$("<label></label>").text(f.label),this.model.isPreSelecting(e,a)&&s.addClass("selected"),c.append(s)}return g=l("%select_spec",{labels:m.join(l("%common_separator"))}),y=$("<div class='specifications'></div>"),y.append($("<a data-role='spec_toggle' class='spec-toggle' href='javascript:void(0)'><span>"+GD.htmlSafe(g)+"</span><i class='spec-toggle-icon pull-right'></i></a>")),y.append(n),this.$(".actions-wrapper").prepend(y)}},render:function(){var e,t,n;return this.model.get("hidden")?this.$el.empty().hide():(this.$el.show(),e=this.model.toJSON(),t=this.model.get("price"),e.price=(GD.isNumber(t)?parseFloat(t):0).toFixed(2),e.inventory===""&&(e.inventory=null),e.inventoryLabel=this.inventoryLabel,e.unit=this.unit,n=_.template($("#"+this.templateId).html()),$(this.el).html(n(e)),this.$el.addClass("goods-item"),this._updateViewBySKUs(),this.$el.trigger("render.gd")),this},updateWords:function(e,t){return this.inventoryLabel=e,this.unit=t,this}}),s=e.extend({templateId:"image_goods_item_show_template"}),GD.GoodsItemListShowView=Backbone.View.extend({initialize:function(){return this.listenTo(this.collection,"add reset",this.render)},render:function(){var t,n,r;return this.$el.empty(),this.collection.length===0?this.$el.html("<div class='goods-item-placeholder'>请在右侧面板添加商品</div>"):(t=this.model.get("inventory_label")||"库存",r=this.model.get("unit")||"件",n=this.model.isBasicGoodsField()?e:s,this.collection.each(function(e){return function(i){var s;return s=(new n({model:i})).updateWords(t,r).render().el,e.$el.append(s)}}(this)))}}),i=Backbone.View.extend({events:{"change [data-field-key]":"update","change .default-settings select":"updatePredefinedSpecification","click .update-goods-dimensions":"renderDimensionsView","click .clear-goods-dimensions":"clearGoodsDimensions","edit .goods-image":"changeGoodsImage"},initialize:function(){return this.listenTo(this.model,"change:dimensions change:skus",this.render)},render:function(){return this.$(".tooltipster-content").html(this.template(this.model.toJSON(!1))),this._updateWhenSKUExists(),this._updateWhenDimensionExists(),autosize(this.$(".goods-description textarea")),this},update:function(e){var t,n,r;return r=$(e.target),GD.clearErrorMessageBelow(r),t={},n=r.data("field-key"),t[n]=r.val(),this.model.set(t,{validate:!0,on:n}),GD.showErrorMessageBelow(r,this.model.validationError)},updatePredefinedSpecification:function(e){var t,n,r;return r=$(e.target),t=this.model.get("predefined_specification"),n=t?_.clone(t):{},n[r.data("dim-key")]=r.val(),this.model.set({predefined_specification:n})},changeGoodsImage:function(e,t){if(!t.errors)return this.model.set({large_path:t.image_large_path,new_value:t.attachment_id})},renderDimensionsView:function(){var e,t,n;return n=parseInt(this.$el.css("zIndex")),$("#goods_dimensions_modal").css({zIndex:n+2}).modal({backdrop:"static",keyboard:!1,show:!0}),$("#goods_dimensions_modal").data("bs.modal").$backdrop.css({zIndex:n+1}),$("#goods_dimensions_modal").find("#apply_to_all").attr("checked",!1),e=(new GD.GoodsDimensionsContainerView({model:this.model})).render(),t=(new GD.SKUsContainerView({model:this.model})).render(),$("#goods_dimensions_modal .gd-btn-primary").removeClass("disabled").off("click").on("click",function(n){return function(){var r,i,s;if(!$("#goods_dimensions_modal .gd-btn-primary").hasClass("disabled"))return $("#goods_dimensions_modal").modal("hide"),r=e.validDimensions().toJSON(),s=_.isEmpty(r)?[]:t.skus.toJSON(),i=$("#goods_dimensions_modal").find("#apply_to_all").is(":checked"),i?n.collection.each(function(e){return e.set({dimensions:r,skus:s})}):n.model.set({dimensions:r,skus:s})}}(this))},clearGoodsDimensions:function(){return this.model.set({dimensions:[],skus:[],predefined_specification:null})},_updateWhenSKUExists:function(){if(!_.isEmpty(this.model.get("skus"))){this.$("[data-field-key=price]").replaceWith("<span class='price add-on-content'>"+this.model.priceRange()+"</span>");if(this.model.get("inventory")!=null)return this.$("[data-field-key=inventory]").replaceWith("<span class='inventory add-on-content'>"+this.model.get("inventory")+"</span>")}},_updateWhenDimensionExists:function(){var e,t;if(!_.isEmpty(this.model.get("dimensions")))return t=this.$(".update-goods-dimensions").text("修改详细规格"),t.after("<a href='javascript:void(0)' class='clear-goods-dimensions with-impact-on-tooltip-size'>清除规格</a>"),e=_.map(this.model.get("dimensions"),function(e){return function(t){var n,r,i,s,o,u,a,f,l,c,h,p;n=(f=t.api_code)!=null?f:t.label,r=$("<div></div>"),s=$("<label>默认"+t.label+"</label>"),p=$("<select data-dim-key='"+n+"'>"),p.append("<option value=''>请选择</option>"),l=t.options;for(i=0,o=l.length;i<o;i++)a=l[i],u=(c=a.value)!=null?c:a.label,p.append("<option value='"+u+"'>"+a.label+"</option>");return p.val((h=e.model.get("predefined_specification"))!=null?h[n]:void 0),r.append(s).append(p)}}(this)),this.$(".default-settings").prepend(e)}}),r=Backbone.View.extend({className:"goods-item-wrap",events:{"click [data-role='delete_goods_item']":"deleteItem","click [data-role='add_goods_item']":"addItem","click [data-role=visibility_toggle]":"toggleVisibility"},initialize:function(){return this.listenTo(this.model,"remove",this.remove),this.listenTo(this.model,"change:name change:large_path change:new_value",this.render),this.listenTo(this.model,"change:has_data",this._decorateDeleteLink),this.listenTo(this.model,"change:hidden",this.render)},_templateId:function(){return this.model.type+"_goods_item_edit_view_template"},_settingTemplate:function(){return _.template($("#"+this.model.type+"_goods_item_edit_setting_template").html())},_initEditTooltipster:function(){return this.$el.find(".goods-item").gdClickTooltip({theme:"goods-item-setting-tooltipster",backdrop:!0,content:"加载中...",autoClose:!1,minWidth:300,maxWidth:300,functionReady:function(e){return function(t,n){var r;return t.tooltipster("option","position","bottom"),r=new i({model:e.model,collection:e.collection,el:n}),r.template=e._settingTemplate(),r.render(),t.tooltipster("reposition"),setTimeout(function(){if(parseInt(n.css("top"))<0)return t.tooltipster("option","position","left").tooltipster("reposition")},5)}}(this)})},render:function(){var e,t;return t=_.template($("#"+this._templateId()).html()),e=this.model.toJSON(),e.hasRule=!1,this.$el.html(t(e)).data("cid",this.model.cid),this.model.isBasic()&&this.$el.addClass("basic-goods-item"),this._decorateDeleteLink(),this.model.get("hidden")||this._initEditTooltipster(),this},deleteItem:function(e){e.stopPropagation();if(!this.model.get("has_data"))return this.collection.remove(this.model)},addItem:function(e){var t;return e.stopPropagation(),t=this.collection.indexOf(this.model)+1,this.collection.add(new n,{at:t})},toggleVisibility:function(){return this.model.set({hidden:!this.model.get("hidden")})},_decorateDeleteLink:function(){if(this.model.get("has_data"))return GD._decorateDeleteLink(this,"[data-role=delete_goods_item]","#goods_item_delete_confirm_template")}}),o=Backbone.View.extend({render:function(){var e;return e=_.template($("#upload_goods_items_form_template").html()),this.$el.append(e(this.model.toJSON())),Modernizr.draganddrop||delay(1,function(){return $("#image_upload_label span").text("点此添加商品图片")}),this}}),GD.GoodsItemListEditView=Backbone.View.extend({initialize:function(){return this.listenTo(this.collection,"add reset",this.render),this.listenTo(this.collection,"remove",this.toggleVisibility),this.listenTo(this.collection,"change:hidden",this.toggleVisibility)},events:{"add .goods-items":"updateGoodsItemList"},render:function(){var e;return this.$(".goods-items-area").html("<div class='goods-items clearfix'></div>"),e=this.model.isBasicGoodsField()?"basic":"image",this.collection.each(function(t){return function(n){return n.type=e,t.$(".goods-items").append((new r({model:n,collection:t.collection})).render().el)}}(this)),e==="image"&&this.$(".goods-items-area").append((new o({model:this.model})).render().el),GD.initSortableOptions(this,".goods-items",".goods-item-wrap",this.collection),this.toggleVisibility()},toggleVisibility:function(){return GD.FieldEdit.updateToggleVisiblityElements(this,".goods-items .goods-item-wrap")},updateGoodsItemList:function(e,t){var n;if(t.errors){if(t.leftCount===0)return this.collection.trigger("reset")}else{n=t.leftCount>0,this.collection.add({name:GD.removeFileSuffix(t.file_name),large_path:t.image_large_path,value:t.attachment_id},{silent:n});if(!n)return GD.updateOptionSortingIndex(this,this.collection,".goods-item")}}}),t=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.messageContainer=function(){return this.$fileInput.closest(".goods-image")},t.prototype.getDataContext=function(e){var t;return t=_.template($("#"+this.$fileInput.data("progress-bar")).html()),t({name:e})},t.prototype.onFileValidationFail=function(e){return $(".progress[data-filename='"+e.filename+"']").parent(".progress-container").remove()},t.prototype.onUploadFail=function(e){return e.parent(".progress-container").remove(),this.context.find("img").addClass("error-upload")},t.prototype.onUploadSuccess=function(e,t){return e.parent(".progress-container").remove(),this.context.find("img").replaceWith("<img src='"+t.image_large_path+"'>"),this.context.trigger("edit",t)},t}(GD.ImageUpload),$(function(){var e;return e=".goods-image-edit",$(e).livequery(function(){return(new t(e,$(this),$(this).closest(".goods-image"))).fileUpload()})})}.call(this),function(){var e,t,n,r,i,s=function(e,t){function r(){this.constructor=e}for(var n in t)o.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},o={}.hasOwnProperty;t=Backbone.Model.extend({defaults:{_type:"ImageChoice",selected:!1,name:"图片",value:"",quota:null,has_data:!1,hidden:!1},validate:function(e){if($.trim(e.name)==="")return"图片名称选项不能为空";if($.trim(e.name).length>GD.choiceTextMaxLength)return"字数不能大于"+GD.choiceTextMaxLength;if($.trim(e.quota_temp)&&GD.quotaIsInvalid(e.quota_temp))return"名额必须为非负数字或为空"},initialize:function(){var e;return this.set({quota_temp:(e=this.get("quota"))!=null?e:""}),this.hasRule=!1},toJSON:function(e){return _.omit(this.attributes,"has_data")}}),GD.ImageChoiceList=Backbone.Collection.extend({model:t,comparator:"position",updateQuota:function(){return this.each(function(e){return e.set({quota:e.get("quota_temp")})})},updateChoices:function(e){return this.each(function(t){return t.set(e[t.get("api_code")])})}}),r=Backbone.View.extend({initialize:function(){return this.listenTo(this.model,"change",this.render)},render:function(){var e,t;return this.model.get("hidden")?(this.$el.empty(),this.$el.hide()):(this.$el.show(),e=this.model.layout==="column"?"_column":"",t=_.template($("#"+this.model.type+e+"_choice_show_template").html()),this.$el.html(t(this.model.toJSON())),this._showQuota(),this.$el.trigger("render.gd")),this},_showQuota:function(){var e;this.$el.removeClass("text-muted"),e=this.model.get("quota");if(_.isUndefined(e)||_.isNull(e)||$.trim(e)==="")return;return e=parseFloat(e),this._showImageChoiceQuota(e)},_showImageChoiceQuota:function(e){return this.model.layout==="column"?this.$(".text-wrapper").append("<div class='quota'>"+this._quotaText(e)+"</div>"):this.$(".text-wrapper").after("<div class='quota'>"+this._quotaText(e)+"</div>"),e===0&&this.$el.addClass("disabled quota-empty"),this.$("input").prop("disabled",e===0)},_quotaText:function(e){return e>0?"余"+e:"已空"}}),n=Backbone.View.extend({className:"image-choice-wrap",events:{"change [data-field-key]":"update",'click [data-role="delete_choice"]':"deleteChoice","mousedown input[type='radio']:checked":"uncheckChoice","keydown input[type='radio']:checked":"uncheckChoice","click [data-role=visibility_toggle]":"toggleVisibility","edit .choice-image":"changeChoiceImage"},initialize:function(){return this.choiceType=this.model.type.indexOf("CheckBox")>-1?"checkbox":"radio",this.listenTo(this.model,"remove",this.remove),this.listenTo(this.model,"change:has_data",this._decorateDeleteLink),this.listenTo(this.model,"change:hidden",this.render)},render:function(){var e,t;return t=_.template($("#image_choice_edit_template").html()),e=this.model.toJSON(),e.choiceType=this.choiceType,e.hasRule=this.model.hasRule,this.$el.html(t(e)),this.$el.data("cid",this.model.cid),this._decorateDeleteLink(),setTimeout(function(){return autosize(this.$("textarea"))},0),this},deleteChoice:function(e){e.stopPropagation();if(!this.model.get("has_data"))return this.collection.remove(this.model)},update:function(e){var t;e.stopPropagation(),GD.updateChoice(e,this.model),t=$(e.target).data("field-key");if(t==="selected"&&this.choiceType==="radio")return this.collection.each(function(e){return function(t){if(t.cid!==e.model.cid)return t.set({selected:!1})}}(this))},uncheckChoice:function(e){var t;return t=$(e.target),setTimeout(function(n){return function(){return t.removeAttr("checked"),n.update(e)}}(this),150)},changeChoiceImage:function(e,t){if(!t.errors)return this.model.set({large_path:t.image_large_path,value:t.attachment_id})},toggleVisibility:function(){return this.model.set({hidden:!this.model.get("hidden")})},_decorateDeleteLink:function(){if(this.model.get("has_data"))return GD._decorateDeleteLink(this,"[data-role=delete_choice]","#choice_delete_confirm_template")}}),GD.ImageChoiceListShowView=Backbone.View.extend({initialize:function(){return this.choiceType=this.model.type,this.listenTo(this.collection,"add",function(e){return function(t,n,i){var s;return t.type||(t.type=e.choiceType),s=new r(e._showViewAttrs(t)),e.$el.append(s.render().el),s.trigger("render.gd")}}(this)),this.listenTo(this.collection,"remove reset",this.render)},_showViewAttrs:function(e){var t;t={model:e,collection:this.collection};switch(e.type){case"ImageCheckBox":t.tagName="label",t.className="checkbox";break;case"ImageRadioButton":t.tagName="label",t.className="radio"}return t.className&&this.model.get("choices_layout")==="column"&&(t.className+=" column"),t},render:function(){var e;return this.$el.addClass("image-choices"),this.$el.empty(),this.collection.length===0?this.$el.html("<div class='image-choice-placeholder'>请在右侧面板添加图片</div>"):(e=this.model.get("choices_layout"),this.collection.each(function(t){return function(n){return n.type||(n.type=t.choiceType),n.layout=e,t.$el.append((new r(t._showViewAttrs(n))).render().el)}}(this))),this.$el.trigger("render.gd")}}),i=Backbone.View.extend({render:function(){var e;return e=_.template($("#upload_image_choices_form_template").html()),this.$el.append(e(this.model.toJSON())),Modernizr.draganddrop||delay(1,function(){return $("#image_upload_label span").text("点此添加图片选项")}),this}}),GD.ImageChoiceListEditView=Backbone.View.extend({events:{"add .image-choices":"updateChoiceList"},initialize:function(){return this.choiceType=this.model.type,this.listenTo(this.collection,"add reset",this.render),this.listenTo(this.collection,"remove",this._updateChoiceQuotaLink),this.listenTo(this.collection,"change:hidden",this.toggleVisibility),this._initTooltipsterLinks()},toggleVisibility:function(){return GD.FieldEdit.updateToggleVisiblityElements(this,".image-choices .image-choice-wrap")},_initTooltipsterLinks:function(){var e,t,n,r,i,s,o;t={set_choices_quota:{theme:"choices-quota-tooltipster",functionReady:function(e){return function(t,n){var r;return r=n.find("tbody"),e.collection.each(function(e){return r.append((new GD.ChoiceQuotaEditView({model:e})).render().el)}),t.tooltipster("reposition"),n.one("click","input:submit",function(){return e.collection.updateQuota(),t.tooltipster("hide")})}}(this)}},s=this.$("[data-toggle=tooltipster]"),o=[];for(n=0,r=s.length;n<r;n++)i=s[n],e=$(i),o.push(e.gdClickTooltip(GD.formEditTooltipsterConfig(e,t[e.data("role")])));return o},render:function(){return this.$(".image-choice-area").html("<div class='image-choices clearfix' data-field-type='"+this.choiceType+"'></div>"),this.collection.each(function(e){return function(t){return t.type||(t.type=e.choiceType),t.hasRule=GD.FieldEdit.fieldChoiceIncludeApiCode(e.model,t),e.$(".image-choices").append((new n({model:t,collection:e.collection})).render().el)}}(this)),this.$(".image-choice-area").append((new i({model:this.model})).render().el),this._updateChoiceQuotaLink(),GD.initSortableOptions(this,".image-choices",".image-choice-wrap",this.collection),this.toggleVisibility()},updateChoiceList:function(e,n){var r;if(!n.errors)return r=new t({name:GD.removeFileSuffix(n.file_name),large_path:n.image_large_path,value:n.attachment_id}),r.type=this.choiceType,n.leftCount>0?this.collection.add(r,{silent:!0}):(this.collection.add(r),GD.updateOptionSortingIndex(this,this.collection,".image-choice"));if(n.leftCount===0)return this.collection.trigger("reset")},_updateChoiceQuotaLink:function(){return this.$('[data-role="set_choices_quota"]').toggleClass("invisible",this.collection.length===0),this.toggleVisibility()}}),e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.messageContainer=function(){return this.$fileInput.closest(".choice-image")},t.prototype.getDataContext=function(e){var t;return t=_.template($("#"+this.$fileInput.data("progress-bar")).html()),t({name:e})},t.prototype.onFileValidationFail=function(e){return $(".progress[data-filename='"+e.filename+"']").parent(".progress-container").remove()},t.prototype.onUploadFail=function(e){return e.closest(".progress-container").remove(),this.context.find("img").addClass("error-upload")},t.prototype.onUploadSuccess=function(e,t){return e.closest(".progress-container").remove(),this.context.find("img").replaceWith("<img src='"+t.image_large_path+"'>"),this.context.trigger("edit",t)},t}(GD.ImageUpload),$(function(){var t;return t=".choice-image-edit",$(t).livequery(function(){return(new e(t,$(this),$(this).closest(".choice-image"))).fileUpload()})})}.call(this),function(){GD.LikertShowView=Backbone.View.extend({tagName:"table",className:"gd-table gd-table-bordered gd-table-hover",initialize:function(){return this.listenTo(this.model.textChoiceList,"change reset add remove",this.render),this.listenTo(this.model.statementList,"change reset add remove",this.render)},_renderHead:function(){var e,t;return e=$("<thead></thead>"),t=$("<tr></tr>"),t.append("<th></th>"),this.model.textChoiceList.each(function(e){var n;if(!e.get("hidden"))return n=e.toJSON(),t.append("<th>"+GD.htmlSafe(n.value)+"</th>")}),e.html(t)},_renderBody:function(){var e;return e=$("<tbody></tbody>"),this.model.statementList.each(function(t){return function(n,r){var i,s;return i=n.toJSON(),s=$("<tr></tr>"),s.append("<td>"+GD.htmlSafe(i.label)+"</td>")
,t.model.textChoiceList.each(function(e){var t;if(!e.get("hidden"))return t=$("<td><input type='radio' onclick='return false' /></td>"),e.get("selected")&&t.find("input").attr("checked",!0),s.append(t)}),e.append(s)}}(this)),e},render:function(){return this.$el.html(this._renderHead()),this.$el.append(this._renderBody()),this.$el.trigger("render.gd"),this}})}.call(this),function(){var e,t;e=Backbone.Model.extend({defaults:{_type:"Dimension",label:"",has_data:!1},toJSON:function(e){var t;return e==null&&(e=!0),t=_.omit(this.attributes,"has_data"),e&&$.trim(t.label)===""&&(t.label="项目"),t},validate:function(e){if($.trim(e.label)==="")return"项目不能为空"}}),GD.MatrixDimensionList=Backbone.Collection.extend({model:e,comparator:"position",updateDimensions:function(e){return this.each(function(t){return t.set(e[t.get("api_code")])})}}),GD.MatrixShowView=Backbone.View.extend({tagName:"table",className:"gd-table gd-table-bordered gd-table-hover",initialize:function(){return this.listenTo(this.model.statementList,"change reset add remove",this.render),this.listenTo(this.model.dimensionList,"change reset add remove",this.render)},_renderHead:function(){var e,t;return e=$("<thead></thead>"),t=$("<tr></tr>"),t.append("<th></th>"),this.model.dimensionList.each(function(e){return t.append("<th>"+(GD.htmlSafe(e.get("label"))||"项目")+"</th>")}),e.html(t)},_renderBody:function(){var e;return e=$("<tbody></tbody>"),this.model.statementList.each(function(t){return function(n){var r;return r=$("<tr></tr>"),r.append("<td>"+(GD.htmlSafe(n.get("label"))||"题目")+"</td>"),t.model.dimensionList.each(function(e){return r.append("<td><input type='text' readonly ></td>")}),e.append(r)}}(this)),e},render:function(){return this.$el.html(this._renderHead()),this.$el.append(this._renderBody()),this.$el.trigger("render.gd"),this}}),t=Backbone.View.extend({className:"dimension",events:{"change [data-field-key]":"update","click [data-role=add_dimension]":"addDimension","click [data-role=delete_dimension]":"deleteDimension"},initialize:function(){return this.listenTo(this.model,"remove",this.remove),this.listenTo(this.model,"change:has_data",this._decorateDeleteLink)},render:function(){var e;return e=_.template($("#dimension_edit_template").html()),this.$el.html(e(this.model.toJSON(!1))),this.$el.data("cid",this.model.cid),this._decorateDeleteLink(),this},update:function(e){var t,n,r;return e.stopPropagation(),t=$(e.target),GD.clearErrorMessageBelow(t),r=t.data("field-key"),n={},n[r]=t.val(),this.model.set(n,{validate:!0}),GD.showErrorMessageBelow(t,this.model.validationError)},addDimension:function(){var t;return t=this.collection.indexOf(this.model)+1,this.collection.add(new e,{at:t})},deleteDimension:function(e){e.stopPropagation();if(!this.model.get("has_data"))return this.collection.remove(this.model)},_decorateDeleteLink:function(){if(this.model.get("has_data"))return GD._decorateDeleteLink(this,"[data-role=delete_dimension]","#dimension_delete_confirm_template")}}),GD.MatrixDimensionListEditView=Backbone.View.extend({initialize:function(){return this.listenTo(this.collection,"add",function(e){return function(n,r,i){var s,o;return s=i.at,o=new t({model:n,collection:e.collection}),s?e.$(".dimensions").children(":nth-child("+s+")").after(o.render().el):e.$(".dimensions").append(o.render().el),e.$('[data-role="delete_dimension"]').removeClass("invisible")}}(this)),this.listenTo(this.collection,"remove",this._disableDeleteWhenOnlyOneLeft),this.listenTo(this.collection,"reset",this.render),this._initTooltipsterLinks()},_initTooltipsterLinks:function(){var e,t,n,r,i,s,o;t={batch_edit_dimensions:{theme:"batch-edit-tooltipster",functionReady:function(e){return function(t,n){var r;return r=e.collection.pluck("label"),n.find("textarea").val(_.compact(r).join("\n")),n.one("click","input:submit",function(){var r;return r=GD.rawValuesFromTextarea(n.find("textarea")),e._addDimensions(r),t.tooltipster("hide")})}}(this)}},s=this.$("[data-toggle=tooltipster]"),o=[];for(n=0,r=s.length;n<r;n++)i=s[n],e=$(i),o.push(e.gdClickTooltip(GD.formEditTooltipsterConfig(e,t[e.data("role")])));return o},render:function(){return this.$(".dimensions").empty(),this.collection.each(function(e){return function(n){return e.$(".dimensions").append((new t({model:n,collection:e.collection})).render().el)}}(this)),this._disableDeleteWhenOnlyOneLeft(),this._disableBatchEditWhenHasData(),GD.initSortableOptions(this,".dimensions",".dimension",this.collection)},_disableDeleteWhenOnlyOneLeft:function(){if(this.collection.length===1)return this.$('[data-role="delete_dimension"]').addClass("invisible")},_disableBatchEditWhenHasData:function(){if(this.model.get("has_data"))return this.$("[data-role=batch_edit_dimensions]").addClass("hide")},_addDimensions:function(e){var t;return t=_.map(e,function(e){return function(t,n){var r,i,s;return s=(r=(i=e.collection.at(n))!=null?i.toJSON():void 0)!=null?r:{},s.label=t,s._type="Dimension",s}}(this)),this.collection.reset(t,{validate:!0}),this.collection.length===0&&this.collection.push({}),this._disableDeleteWhenOnlyOneLeft()}})}.call(this),function(){GD.RatingShowView=Backbone.View.extend({render:function(){var e,t,n,r,i;r=this.model.get("rating_type"),n=this.model.textChoiceList.length,this.$el.empty();for(t=e=1,i=n;1<=i?e<=i:e>=i;t=1<=i?++e:--e)this.$el.append("<i class='rating-icon rating-icon-"+r+"'></i>");return this}}),GD.RatingEditView=Backbone.View.extend({events:{'change input[name="field[max_rating]"]':"updateMaxRatings",'change input[name="field[rating_type]"]':"updateRatingType"},updateMaxRatings:function(e){var t,n,r,i,s;r=parseInt(this.$("input[name='field[max_rating]']:checked").val()),n=function(){var e,t,n;n=[];for(s=e=1,t=r;1<=t?e<=t:e>=t;s=1<=t?++e:--e)n.push({value:s});return n}(),this.model.textChoiceList.reset(n),i=r>=10?2:1;if(i!==this.model.get("new_minimum_grids_to_occupy"))return t={minimum_grids_to_occupy:i},this.model.get("grids_to_occupy")&&parseInt(this.model.get("grids_to_occupy"))<i&&(t.grids_to_occupy=null),this.model.set(t),GD.fieldEditView.render(this.model)},updateRatingType:function(e){var t;return e.stopPropagation(),t=this.$('input[name="field[rating_type]"]:checked').val(),this.model.set({rating_type:t}),this.$(".rating-type").removeClass("selected"),$(e.target).parent(".rating-type").addClass("selected")}})}.call(this),function(){var e,t;e=Backbone.Model.extend({defaults:{label:"",has_data:!1},toJSON:function(e){var t;return e==null&&(e=!0),t=_.omit(this.attributes,"has_data"),e&&$.trim(t.label)===""&&(t.label="题目"),t},validate:function(e){if($.trim(e.label)==="")return"题目不能为空"}}),t=Backbone.View.extend({className:"statement",events:{"change [data-field-key]":"update","click [data-role=add_statement]":"addStatement","click [data-role=delete_statement]":"deleteStatement"},initialize:function(){return this.listenTo(this.model,"remove",this.remove),this.listenTo(this.model,"change:has_data",this._decorateDeleteLink)},render:function(){var e;return e=_.template($("#statement_edit_template").html()),this.$el.html(e(this.model.toJSON(!1))),this.$el.data("cid",this.model.cid),this._decorateDeleteLink(),this},update:function(e){var t,n,r;return e.stopPropagation(),t=$(e.target),GD.clearErrorMessageBelow(t),r=t.data("field-key"),n={},n[r]=t.val(),this.model.set(n,{validate:!0}),GD.showErrorMessageBelow(t,this.model.validationError)},addStatement:function(){var t;return t=this.collection.indexOf(this.model)+1,this.collection.add(new e,{at:t})},deleteStatement:function(e){e.stopPropagation();if(!this.model.get("has_data"))return this.collection.remove(this.model)},_decorateDeleteLink:function(){if(this.model.get("has_data"))return GD._decorateDeleteLink(this,"[data-role=delete_statement]","#statement_delete_confirm_template")}}),GD.StatementList=Backbone.Collection.extend({model:e,comparator:"position",updateStatements:function(e){return this.each(function(t){return t.set(e[t.get("api_code")])})}}),GD.StatementListEditView=Backbone.View.extend({initialize:function(){return this.listenTo(this.collection,"add",function(e){return function(n,r,i){var s,o;return s=i.at,o=new t({model:n,collection:e.collection}),s?e.$(".statements").children(":nth-child("+s+")").after(o.render().el):e.$(".statements").append(o.render().el),e.$('[data-role="delete_statement"]').removeClass("invisible")}}(this)),this.listenTo(this.collection,"remove",this._disableDeleteWhenOnlyOneLeft),this.listenTo(this.collection,"reset",this.render),this._initTooltipsterLinks()},_initTooltipsterLinks:function(){var e,t,n,r,i,s,o;t={batch_edit_statements:{theme:"batch-edit-tooltipster",functionReady:function(e){return function(t,n){var r;return r=e.collection.pluck("label"),n.find("textarea").val(_.compact(r).join("\n")),n.one("click","input:submit",function(){var r;return r=GD.rawValuesFromTextarea(n.find("textarea")),e._addStatements(r),t.tooltipster("hide")})}}(this)}},s=this.$("[data-toggle=tooltipster]"),o=[];for(n=0,r=s.length;n<r;n++)i=s[n],e=$(i),o.push(e.gdClickTooltip(GD.formEditTooltipsterConfig(e,t[e.data("role")])));return o},render:function(){return this.model.isMatrixField()&&this.$(".statements").addClass("without-padding"),this.$(".statements").empty(),this.collection.each(function(e){return function(n){return e.$(".statements").append((new t({model:n,collection:e.collection})).render().el)}}(this)),this._disableDeleteWhenOnlyOneLeft(),this._disableBatchEditWhenHasData(),GD.initSortableOptions(this,".statements",".statement",this.collection)},_disableDeleteWhenOnlyOneLeft:function(){if(this.collection.length===1)return this.$('[data-role="delete_statement"]').addClass("invisible")},_disableBatchEditWhenHasData:function(){if(this.model.get("has_data"))return this.$("[data-role=batch_edit_statements]").addClass("hide")},_addStatements:function(e){var t;return t=_.map(e,function(e){return function(t,n){var r,i,s;return s=(r=(i=e.collection.at(n))!=null?i.toJSON():void 0)!=null?r:{},s.label=t,s._type="Statement",s}}(this)),this.collection.reset(t,{validate:!0}),this.collection.length===0&&this.collection.push({}),this._disableDeleteWhenOnlyOneLeft()}})}.call(this),function(){var e,t,n,r,i,s,o=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},u={}.hasOwnProperty;GD.Theme=Backbone.Model.extend({idAttribute:"_id",initialize:function(){return this.get("headerType")||this.updateHeaderType(),this._setDefaultValue()},updateHeaderType:function(){return this.set({headerType:this.get("header_image_url")?"image":this.get("header").text?"text":"none"})},updateFormBackground:function(){var e,t,n,r,i,s,o;n=this.get("form_bg_type")||"color",e=this.get("background_image_url"),s=this.get("wallpaper").repeated,r=this.get("wallpaper").image_file_name,o=this.get("wallpaper").texture_file_name;if(!!e||!!r||!!o)n="image",e||(t=r||o,e=$("#form_design .theme-template img[data-img-name='"+t+"']").data("img-path"));return i=_.clone(this.get("wallpaper")),i.repeated=s,this.set({form_bg_type:n,background_image_url:e,wallpaper:i})},validate:function(e,t){t||(t={});if(t.on==="submit_btn_text"){if($.trim(e.submit_btn_text)==="")return"请输入提交按钮文字内容";if(e.submit_btn_text.length>t.max)return"请输入最多"+t.max+"个字"}},renderViews:function(){return this.rememberOrigin(),(new t({model:this})).render(),(new e({model:this})).render(),(new r({model:this})).render(!1)},rememberOrigin:function(){return this.jsonStringOrigin=this._getCompareJSONString()},_getCompareJSONString:function(){return this.updateFormBackground(),JSON.stringify(this.toJSON())},changedSinceLastLoad:function(){return this.jsonStringOrigin!==this._getCompareJSONString()||this.isNew()},_defaultValues:{form_style:{"background-color":"#FFF",width:"700px","border-width":"1px","border-color":"#AAB2BD"},form_shadow:!0,wallpaper:{},header:{text_style:{}},typography:{form_header:{},field_label:{},choice_style:{}}},_setDefaultValue:function(){var e,t,n,r,i;t=this._defaultValues,n=[];for(r in t)i=t[r],e=this.get(r),e==null||_.isObject(e)&&_.isEmpty(e)?n.push(this.set(r,i,{silent:!0})):n.push(void 0);return n},backgroundImageCSS:function(e,t){var n;return n={"background-image":"url("+e+")"},t||(n["background-size"]="cover",n["background-repeat"]="no-repeat",n["background-position"]="top center"),n},toCSS:function(e){var t,n,r,i;i=[];switch(e){case"wallpaper":this.get("wallpaper").color&&i.push("background-color: "+this.get("wallpaper").color+";"),this.get("background_image_url")?this._pushStyles(i,this.backgroundImageCSS(this.get("background_image_url"),this.get("wallpaper").repeated)):this.get("wallpaper").image_file_name?(n=$("#form_design .theme-template img[data-img-name='"+this.get("wallpaper").image_file_name+"']").data("img-path"),this._pushStyles(i,this.backgroundImageCSS(n,!1))):this.get("wallpaper").texture_file_name&&(n=$("#form_design .theme-template img[data-img-name='"+this.get("wallpaper").texture_file_name+"']").data("img-path"),this._pushStyles(i,this.backgroundImageCSS(n,!0)));break;case"banner":t=this.get("header"),t.background_color&&i.push("background-color: "+t.background_color+";"),t.color&&i.push("color: "+t.color+";"),this._pushStyles(i,t.text_style,e);break;case"field":r=this.get("typography").field_space,r&&(r=parseInt(r),i.push("padding-top: "+r/2+"px;"),i.push("padding-bottom: "+r/2+"px;"));break;default:this._pushStyles(i,this._stylesSettingFor(e))}return i.join("\n")},_pushStyles:function(e,t){var n,r,i;r=[];for(n in t)i=t[n],n!=="font-family"&&i?r.push(e.push(n+": "+i+";")):r.push(void 0);return r},fontFamilyOf:function(e){var t;return t=this._stylesSettingFor(e),t!=null?t["font-family"]:void 0},_stylesSettingFor:function(e){switch(e){case"form_style":case"submit_btn_style":case"submit_field_style":return this.get(e);case"banner":return this.get("header").text_style;case"form_title":return this.get("typography").form_header;case"field_label":case"choice_style":return this.get("typography")[e];default:return null}},additionalSaveAttrs:function(){switch(this.get("headerType")){case"text":return{header_image_attachment_id:""};case"image":return{};default:return{header_image_attachment_id:"",header:{text:null}}}}}),t=Backbone.View.extend({el:"#form_design #edit_style",events:{"change [data-field-key]":"update","change .gd-btn-group > .gd-btn input:checkbox":"updateBtnStatus","change .gd-btn-group > .gd-btn input:radio":"updateBtnStatus","click .theme-template[data-template-id]":"selectTemplate",'change [data-role="change_header_type"]':"changeHeaderType",'change [data-role="change_header_image"]':"changeHeaderImage","change .form-bg-type":"changeBackgroundType",'change [data-role="change_bg_image"]':"changeBackgroundImage",'click [data-role="remove_bg_image"]':"removeBackgroundImage"},initialize:function(){return this.listenTo(this.model,"sync",this.initVarialbleAndRenderView)},initVarialbleAndRenderView:function(){return this.initPrevCacheVariables(),this.render()},initPrevCacheVariables:function(){return this.prev_texture_file_name="",this.prev_image_file_name="",this.prev_color="",this.prev_backgroundImageUrl="",this.prev_background_image_attachment_id=""},render:function(){var e,t,r,i,s,o;o=_.template($("#edit_style_template").html()),this.model.updateFormBackground(),this.$(".theme-settings").html(o(this.model.toJSON())),GD.initSpectrums(this.$el),this._updateHeaderType(),r=["#background_image_file","#header_image_file"],i=[];for(e=0,t=r.length;e<t;e++)s=r[e],i.push((new n(s,this.$(s),this.$(s).closest(".image-preview"))).fileUpload());return i},_updateHeaderType:function(){return this.$('[data-role="change_header_type"]').val(this.model.get("headerType")).trigger("change")},_styleValue:function(e){var t;return e.is(":checkbox")?e.is(":checked")?e.val():e.data("unchecked-value"):(t=e.val(),t==="true"||t==="false"?JSON.parse(t):t)},update:function(e){var t,n,r,i,s,o,u;return t=$(e.target),GD.clearErrorMessageBelow(t),i=t.data("field-key"),u=t.data("sub-key"),o=t.data("style-key"),n={},o?(n[i]=this.model.get(i),u?((r=n[i])[u]||(r[u]={}),n[i][u][o]=this._styleValue(t)):n[i][o]=this._styleValue(t),this.model.set(n),this.model.trigger("change")):(n[i]=this._styleValue(t),s={on:i,validate:!0},t.attr("maxlength")&&(s.max=parseInt(t.attr("maxLength"))),this.model.set(n,s),GD.showErrorMessageBelow(t,this.model.validationError))},updateBtnStatus:function(e){var t,n;return t=$(e.target),n=t.closest(".gd-btn"),n.siblings(".gd-btn").removeClass("selected"),n.toggleClass("selected",t.is(":checked"))},selectTemplate:function(e){var t,n,r;t=$(e.target),t.is("[data-template-id]")||(t=t.closest("[data-template-id]")),n=t.data("template-id"),GD.themeTemplates&&(r=GD.themeTemplates[n]);if(r)return this.$("#theme_templates .theme-template.active").removeClass("active"),t.addClass("active"),this.model.set(this._themeAttrsFromTemplate(r)),this.model.updateHeaderType(),t.is("img")?this.model.set({form_bg_type:"image"}):this.model.set({form_bg_type:"color"}),this.render()},_themeAttrsFromTemplate:function(e){var t;return t=_.pick($.extend(!0,{},e),"form_shadow","indent_on_large_phone","form_style","submit_btn_shadow","submit_btn_style","submit_field_style","wallpaper","header","typography","background_image_url","background_image_attachment_id","header_image_url","header_image_attachment_id"),t.background_image_url||(t.background_image_url=""),t.background_image_attachment_id||(t.background_image_attachment_id=""),t.header_image_url||(t.header_image_url=""),t.header_image_attachment_id||(t.header_image_attachment_id=""),this.model.get("header").text&&(t.header.text=this.model.get("header").text),t},changeHeaderType:function(e){var t;return this.$("#theme_header [data-option]").hide(),t=$(e.target).val(),this.$("#theme_header [data-option~="+t+"]").show(),this.model.set({headerType:t})},changeHeaderImage:function(e,t){return this.model.set({header_image_url:t.image_large_path,header_image_attachment_id:t.attachment_id})},changeBackgroundType:function(e){var t,n,r;return r=_.clone(this.model.get("wallpaper")),$(e.target).val()==="image"?(this.prev_color=r.color,r.texture_file_name||(r.texture_file_name=this.prev_texture_file_name),r.image_file_name||(r.image_file_name=this.prev_image_file_name),r.color="",n=this.model.get("background_image_url")||this.prev_backgroundImageUrl,t=this.model.get("background_image_attachment_id")||this.prev_background_image_attachment_id,this.model.set({form_bg_type:"image",wallpaper:r,background_image_url:n,background_image_attachment_id:t})):(this.prev_texture_file_name=r.texture_file_name,this.prev_image_file_name=r.image_file_name,this.prev_backgroundImageUrl=this.model.get("background_image_url"),this.prev_background_image_attachment_id=this.model.get("background_image_attachment_id"),r.texture_file_name="",r.image_file_name="",r.color=this.prev_color,this.model.set({form_bg_type:"color",wallpaper:r,background_image_url:"",background_image_attachment_id:""})),this.render()},changeBackgroundImage:function(e,t){return this.model.set({background_image_url:t.image_large_path,background_image_attachment_id:t.attachment_id}),this.$("#theme_wallpaper .bg-setting").show()},removeBackgroundImage:function(){var e;return e=_.clone(this.model.get("wallpaper")),e.texture_file_name="",e.image_file_name="",this.model.set({background_image_url:null,background_image_attachment_id:"",wallpaper:e}),this.$('[data-role="change_bg_image"] > img').remove(),this.$("#theme_wallpaper .bg-setting").hide()}}),e=t.extend({el:"#form_design #edit_button",initialize:function(){},render:function(){var e;return e=_.template($("#edit_button_template").html()),this.$(".button-settings").html(e(this.model.toJSON())),GD.initSpectrums(this.$el)}}),i=".preview-container > .preview > .fields > .field",r=Backbone.View.extend({el:"#form_design",events:(s={},s["render.gd "+i]="updateFieldStyle",s["render.gd "+i+" .choices > label"]="updateChoiceStyle",s["render.gd "+i+" .choices > .other-choice-area"]="updateChoiceStyle",s["render.gd "+i+" .likert table"]="updateTableHeaderStyle",s["render.gd "+i+" .matrix table"]="updateTableHeaderStyle",s["render.gd "+i+" .goods-items > .goods-item"]="updateGoodsItemStyle",s),initialize:function(){return this.listenTo(this.model,"change sync",this.render)},selectorMapping:{wallpaper:"#form_design .preview-container, #form_real_preview_container",form_style:"#form_design .preview-container > .preview",banner:"#form_design .preview-container > .preview > .banner",form_title:"#form_design .preview-container > .preview > .form-header > .form-title",field:"#form_design "+i,field_label:"#form_design "+i+" > .field-label",choice_style:["#form_design "+i+" .choices label","#form_design "+i+" .likert thead th","#form_design "+i+" .matrix thead th","#form_design "+i+" .goods-items .name"],submit_btn_style:"#form_design .preview-container > .preview > .submit-field .gd-btn",submit_field_style:"#form_design .preview-container > .preview > .submit-field"},render:function(e){return e==null&&(e=!0),GD.transformAllFields(),e&&this._renderStyleSheet(),this._renderFontFamily(),this._renderFormShadow(),this._renderBanner(),this._renderSubmitBtnText(),this._renderSubmitBtnShadow()},_renderStyleSheet:function(){var e,t,n,r;r='<style type="text/css">',t=this.selectorMapping;for(e in t)n=t[e],r+=this._selectorString(n)+" {"+this.model.toCSS(e)+"}\n";return r+="</style>",this.$("#form_preview_style").html(r)},_renderFontFamily:function(){var e,t,n,r;t=this.selectorMapping,n=[];for(e in t)r=t[e],n.push(this._updateFontFamily($(this._selectorString(r)),e));return n},_renderFormShadow:function(){var e;return this.$(".preview-container > .preview").toggleClass("with-shadow",(e=this.model.get("form_shadow"))==="true"||e===!0)},_renderSubmitBtnShadow:function(){var e;return this.$(".preview-container > .preview  > .submit-field .gd-btn").toggleClass("with-shadow",(e=this.model.get("submit_btn_shadow"))==="true"||e===!0)},_renderBanner:function(){var e,t;e=this.$(".preview-container > .preview > .banner");switch(this.model.get("headerType")){case"text":return e.html("<div class='banner-text'>"+((t=this.model.get("header").text)!=null?t:"")+"</div>");case"image":return this.model.get("header_image_url")?e.html("<img class='header-image' src="+this._getHeaderImageUrl()+">"):e.html("<div class='banner-text'></div>");default:return e.empty()}},_getHeaderImageUrl:function(){var e;return e=this.model.get("header_image_url"),GD.isRetina()&&!GD.isMobile&&(e+="Retina"),e},_renderSubmitBtnText:function(){return this.$(".preview-container > .preview > .submit-field input:submit").val(this.model.get("submit_btn_text"))},_selectorString:function(e){return _.isArray(e)?e.join(","):e},_updateFontFamily:function(e,t){var n;n=this.model.fontFamilyOf(t);if(n)return e.removeClassRegExp(/font-family-/).addClass("font-family-"+n)},updateFieldStyle:function(e){var t;return t=$(e.target),this._updateFontFamily(t.children(".field-label"),"field_label"),this._updateFontFamily(t.find("> .choices, > .likert thead, > .matrix thead, > .goods-items .name"),"choice_style"),GD.transformAllFields(t)},updateChoiceStyle:function(e){var t;return t=$(e.target),t.is(".other-choice-area")&&(t=t.find("label")),this._updateFontFamily(t,"choice_style"),GD.transformAllFields(t)},updateTableHeaderStyle:function(e){var t;return t=$(e.target).find("thead"),this._updateFontFamily(t,"choice_style")},updateGoodsItemStyle:function(e){var t;return t=$(e.target).find(".name"),this._updateFontFamily(t,"choice_style")}}),n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.messageContainer=function(){return this.context},t.prototype.getDataContext=function(e){var t;return t=_.template($("#"+this.$fileInput.data("progress-bar")).html()),t({name:e})},t.prototype.onFileValidationFail=function(e){return $(".progress[data-filename='"+e.filename+"']").parent(".progress-container").remove()},t.prototype.onUploadFail=function(e){return e.closest(".progress-container").remove(),this.context.find("img").addClass("error-upload")},t.prototype.onUploadSuccess=function(e,t){return e.closest(".progress-container").remove(),this.context.find("img").length>0?this.context.find("img").replaceWith("<img src='"+t.image_large_path+"'>"):this.context.prepend("<img src='"+t.image_large_path+"'>"),this.context.trigger("change",t)},t}(GD.ImageUpload)}.call(this),function(){var e,t,n;GD.Form=Backbone.Model.extend({idAttribute:"token",urlRoot:"/forms",initialize:function(e,t){GD.form=this,GD.associableData=null,this.fieldList=new GD.FieldList(this.get("ordered_fields")),this.unset("ordered_fields",{silent:!0}),this.theme=null,this.rememberOrigin();if(t)return this.tagId=t.tagId,this.folderId=t.folderId},renderViews:function(){var t,n;return(new e({model:this})).render(),(t=this.theme)!=null&&t.set({submit_btn_text:this.get("submit_btn_text")}),(n=this.theme)!=null?n.renderViews():void 0},validate:function(e,t){t||(t={});if(t.on==="name"&&$.trim(e.name)==="")return"请输入表单名"},saveAll:function(e){var t;return e==null&&(e={}),t={fields:this.fieldList.toJSON(),tag_id:this.tagId,folder_id:this.folderId},this.save(t,e)},rememberOrigin:function(){return this.jsonStringOrigin=this._getCompareJSONString()},_getCompareJSONString:function(){var e,t,n,r,i;r={fields:this.fieldList.toJSON()},i=["name","description","sms_signature"];for(t=0,n=i.length;t<n;t++)e=i[t],r[e]=this.get(e);return JSON.stringify(r)},changedSinceLastLoad:function(){return this.jsonStringOrigin!==this._getCompareJSONString()||this.isNew()}}),n=Backbone.View.extend({el:"#form_design .form-header",events:{click:"edit","click a":"preventDefault"},render:function(){var e;return this.$(".form-title").text(GD.htmlSafe(this.model.get("name"))),e=this.model.get("description"),this.$(".form-description").html(e),e||this.$(".form-description").addClass("hide"),this.$el.removeClass("edit"),this.model.trigger("valid.gd"),this},edit:function(){return this.undelegateEvents(),(new t({model:this.model})).render()},preventDefault:function(e){return e.preventDefault()}}),t=Backbone.View.extend({el:"#form_design .form-header",events:{"change [data-field-key]":"update","blur.gd":"show"},render:function(){var e,t,n,r;return t=GD.htmlSafe((n=this.model.get("name"))!=null?n:""),e=(r=this.model.get("description"))!=null?r:"",this.$(".form-title").html("<input type='text' value='"+t+"' data-field-key='name' placeholder='未命名表单'>"),this.$(".form-description").removeClass("hide").html("<textarea rows='3' class='ckeditor' data-field-key='description' placeholder='描述你的表单'>"+e+"</textarea>"),this.$el.addClass("edit"),GD.initCKEditor(this.$(".ckeditor"),{gdimage_imageUploadUrl:GD.descImageUploadUrl,gdimage_imageuploadTokenUrl:GD.descImageUploadTokenUrl,gdimage_imageUploadCallbackUrl:GD.descImageUploadCallbackUrl}),$("#form_design").find(".field.edit").removeClass("edit"),GD.showAddFieldTab(),this},update:function(e){var t,n,r;t=$(e.target),GD.clearErrorMessageBelow(t),n={},r=t.data("field-key"),n[r]=t.val(),this.model.set(n,{validate:!0,on:r}),GD.showErrorMessageBelow(t,this.model.validationError);if($("#form_design .preview .has-error").length===0)return this.model.trigger("valid.gd")},show:function(){return this.undelegateEvents(),(new n({model:this.model})).render()}}),e=Backbone.View.extend({el:"#form_design",events:{"click [data-role=add-field]":"showAddFieldTab","click [data-role=save]":"saveAll","click [data-role=save-theme]":"saveThemeTemplate","click #add_field [data-field-type]:not([data-paid-feature-modal-target])":"addField","mousedown #add_field [data-field-type][data-paid-feature-modal-target]":"showPaidFeatureModal","click .preview .submit-field":"activeSubmitBtnEditMode",'click a[data-toggle="tab"][href="#edit_style"]':"switchToPreviewMode",'hidden.bs.tab a[data-toggle="tab"][href="#edit_style"]':"switchBackToEditMode","click .real-preview-mode-link":"switchToRealPreviewMode"},initialize:function(){return Backbone.on("toggleEditFieldUp",function(e){return function(){return e._toggleShowBtnOrField("field")}}(this)),this.listenTo(this.model,"change:name",this._updatePageTitle),this.listenTo(this.model,"invalid",this._disableAllSaveBtns),this.listenTo(this.model,"valid.gd",this._enableAllSaveBtns),this.fieldCountValidateView=new GD.FieldCountValidateView({collection:this.model.fieldList}),this.fieldCountValidateView.validate(),this._ensureSaveFormBeforeUpgrade()},_toggleShowBtnOrField:function(e){var t,n;n=this.$el.find(".sidebar a[href=#edit_field]").parent(),t=this.$el.find(".sidebar a[href=#edit_button]").parent();switch(e){case"field":return t.addClass("hidden"),n.removeClass("hidden");case"btn":return t.removeClass("hidden"),n.addClass("hidden");default:throw new Error("输入参数错误")}},_updatePageTitle:function(){return $(".page-bar > .container > h2").text(this.model.get("name"))},_ensureSaveFormBeforeUpgrade:function(){return $(".paid-feature-modal .upgrade-btn").on("click",function(e){return function(t){return t.preventDefault(),e.saveAll(null,!1,function(){return Turbolinks.visit(t.target.href)})}}(this))},_addFieldDraggable:function(){return this.$("#add_field [data-field-type]:not([data-paid-feature-modal-target])").draggable({connectToSortable:"#form_design .fields",appendTo:"#form_design",start:function(e){return function(){return e.fieldCountValidateView.finalAlertValidate()}}(this),stop:function(e){return function(){return e.fieldCountValidateView.forewarningValidate()}}(this),helper:function(e){var t;return t=$(e.target),t.is("[data-field-type]")||(t=t.closest("[data-field-type]")),$("<div class='field-dragging'>").html(t.clone())},zIndex:100}).disableSelection()},_bindEventOnSidebarScroll:function(){return this.$(".sidebar > [role=tabpanel] > .tab-content > .tab-pane").off("scroll.gd.sidebar").on("scroll.gd.sidebar",function(e){return function(){var t,n,r,i,s;i=e.$("[data-role=color-picker] + .sp-active"),s=[];for(n=0,r=i.length;n<r;n++)t=i[n],s.push($(t).prev().spectrum("reflow"));return s}}(this))},_bindEventOnWindowResize:function(){return $(window).off("resize.gd.design").on("resize.gd.design",GD.resetFormDesignAreaSize)},render:function(){return GD.resetFormDesignAreaSize(),(new t({model:this.model})).render(),(new GD.FieldListShowView({collection:this.model.fieldList})).render(),GD.fieldEditView=new GD.FieldEditView,GD.formRealPreviewView=new GD.FormRealPreviewView,this._addFieldDraggable(),this._bindEventOnSidebarScroll(),this._bindConfirmationWhenLeavePageWithChanges(),this._bindEventOnWindowResize()},_onSaveError:function(e,t,n){var r,i;this._enableAllSaveBtns(),r="保存失败";switch(t.readyState){case 0:r+="：请检查你的网络连接";break;case 4:try{i=$.parseJSON(t.responseText),r+=": "+i.message}catch(s){}}return GD.showFlashNotification(r,"danger")},saveAll:function(e,t,n){return t==null&&(t=!0),n==null&&(n=null),this._disableAllSaveBtns(),this.doSave(t,n)},doSave:function(e,t){var n;return e==null&&(e=!0),t==null&&(t=null),n=this.model.isNew(),this._saveForm(function(r){return function(i,s){return $(".form-nav .form-name").text(i.get("name")),r._saveTheme(i.get("token"),function(){return setTimeout(function(){return r._enableAllSaveBtns(),GD.showFlashNotification("保存成功!"),n&&e&&Turbolinks.visit(i.urlRoot+"/"+i.get("token")+"/edit"),t!=null?t.call(r):void 0},50)})}}(this))},activeSubmitBtnEditMode:function(){return this._toggleShowBtnOrField("btn"),GD.showEditBtnTab(),$("#form_design").find(".fields .field.edit").removeClass("edit"),this.$(".submit-field").addClass("edit")},_saveForm:function(e){return this.model.changedSinceLastLoad()?this.model.saveAll({success:function(t){return function(n,r){return t.model.fieldList.reset(r.ordered_fields),t.model.unset("ordered_fields",{silent:!0}),t.model.rememberOrigin(),e(n)}}(this),error:function(e){return function(t,n,r){return e._onSaveError(t,n,r)}}(this)}):e(this.model)},_saveTheme:function(e,t){return this.model.theme.changedSinceLastLoad()?(this.model.theme.url=this.model.urlRoot+"/"+e+"/theme",this.model.theme.save(this.model.theme.additionalSaveAttrs(),{success:function(e){return function(n,r){return e.model.theme.rememberOrigin(),t(n)}}(this),error:function(e){return function(t,n,r){return e._onSaveError(t,n,r)}}(this)})):(this.model.theme.trigger("sync"),t(this.model.theme))},_disableAllSaveBtns:function(){var e,t,n,r,i;n=this.$("[data-role=save]"),r=[];for(e=0,t=n.length;e<t;e++)i=n[e],r.push(function(e){return $(e).removeAttr("data-disabled-with"),GD.disableBtn(e)}(i));return r},_enableAllSaveBtns:function(){var e,t,n,r,i;n=this.$("[data-role=save]"),r=[];for(e=0,t=n.length;e<t;e++)i=n[e],r.push(function(e){return $(e).data("disabled-with")||$(e).data("disabled-with","保存中..."),GD.enableBtn(e)}(i));return r},showAddFieldTab:function(){return GD.showAddFieldTab(!1)},addField:function(
e){var t,n,r,i,s,o;if(!this.fieldCountValidateView.finalAlertValidate())return;return t=$(e.target),t.is("[data-field-type]")||(t=t.closest("[data-field-type]")),i=t.data("field-type"),n=(o=GD.fieldEditView)!=null?o.model:void 0,r=t.data("field-inability-info"),n?this.model.fieldList.addFieldAfter(n,i,r):(s=this.model.fieldList.last(),this.model.fieldList.addFieldAfter(s,i,r)),this.fieldCountValidateView.forewarningValidate()},showPaidFeatureModal:function(e){var t;return t=$(e.target).data("paid-feature-modal-target"),t||(t=$(e.target).closest("[data-paid-feature-modal-target]").data("paid-feature-modal-target")),$(t).modal("show")},switchToPreviewMode:function(){return this.$(".form-header").trigger("blur.gd"),this.$(".field.edit").addClass("last-edit").removeClass("edit")},switchBackToEditMode:function(){return this.$(".field.last-edit").addClass("edit").removeClass("last-edit")},switchToRealPreviewMode:function(){return GD.formRealPreviewView.render()},_bindConfirmationWhenLeavePageWithChanges:function(){var e;return e="你的表单有些修改尚未保存，是否确定要离开？",$(window).off("beforeunload").on("beforeunload",function(t){return function(n){if(t.model.changedSinceLastLoad()||t.model.theme.changedSinceLastLoad())return n.returnValue=e,e}}(this)),$(document).off("page:before-change").on("page:before-change",function(t){return function(){if(t.model.changedSinceLastLoad()||t.model.theme.changedSinceLastLoad())return confirm(e)?($(window).off("beforeunload"),$(document).off("page:before-change"),!0):!1}}(this))},saveThemeTemplate:function(e){var t;return t=this.model.theme.clone(),t.unset("_id",{silent:!0}),t.url=$(e.target).data("url"),t.save(t.additionalSaveAttrs(),{success:function(e,t){return GD.showFlashNotification("保存成功!")},error:function(e){return function(t,n,r){return e._onSaveError(t,n,r)}}(this)})}})}.call(this),function(){GD.FormRealPreviewView=Backbone.View.extend({initialize:function(){return this.MODE_PC="pc",this.MODE_MOBILE="mobile",this.MIXED="mixed",this.currentMode=this.MIXED,this.pcPreviewContainer=this.$(".preview-in-pc"),this.mobilePreviewContainer=this.$(".preview-in-mobile")},el:"#form_real_preview_container",events:{"click .action-preview":"switchToRealPreviewMode","click .action-preview-exit":"switchOffRealPreviewMode"},render:function(){return this.formWidth=$("#form_design .preview-container .preview").width(),$("header, .form-nav, #form_design").hide(),this.$el.show(),this.$(".action-preview[data-mode='"+this.currentMode+"']").click()},switchOffRealPreviewMode:function(){return this.$el.hide(),this.$(".action-preview").removeClass("selected"),this.pcPreviewContainer.addClass("gd-hide").html(""),this.mobilePreviewContainer.addClass("gd-hide").html(""),$("header, .form-nav, #form_design").show()},switchToRealPreviewMode:function(e){var t,n;t=$(e.currentTarget),n=t.data("mode"),this.currentMode=n;if(t.hasClass("selected"))return;return t.siblings(".selected").removeClass("selected"),t.addClass("selected"),n===this.MODE_PC?(this.mobilePreviewContainer.addClass("gd-hide"),this._showPCPreview()):n===this.MODE_MOBILE?(this.pcPreviewContainer.addClass("gd-hide"),this._showMobilePreview(),$(".preview-in-mobile").css({marginLeft:0})):(this._showPCPreview(),this._showMobilePreview(!0),$(".in-mixed-mode").css({marginLeft:this.formWidth/2-60+"px"})),$(window).scrollTop(1)},_showPCPreview:function(){return this.pcPreviewContainer.is(":empty")&&(GD.showLoading(".preview-in-pc","pc_preview"),this._getPreviewContentFromRemote(this.MODE_PC,function(e){return function(t){return GD.hideLoading(".preview-in-pc","pc_preview"),e.pcPreviewContainer.html("<iframe class='pc-preview' frameborder='0'></iframe>"),GD.writeContentToIframe(".preview-in-pc .pc-preview",t)}}(this))),this.pcPreviewContainer.removeClass("gd-hide")},_showMobilePreview:function(e){return e==null&&(e=!1),this.mobilePreviewContainer.is(":empty")&&(GD.showLoading(".preview-in-mobile","mobile_preview"),this._getPreviewContentFromRemote(this.MODE_MOBILE,function(e){return function(t){return GD.hideLoading(".preview-in-mobile","mobile_preview"),e.mobilePreviewContainer.html("<div class='mobile-preview-bg'><iframe class='mobile-preview' frameborder='0'></iframe></div>"),GD.writeContentToIframe(".preview-in-mobile .mobile-preview",t)}}(this))),this.mobilePreviewContainer.toggleClass("in-mixed-mode",e),this.mobilePreviewContainer.removeClass("gd-hide")},_getPreviewContentFromRemote:function(e,t){var n;return n=GD.form.toJSON(),n.fields=GD.form.fieldList.toJSON(),$.ajax({url:"/forms/preview?mode="+e,type:"post",contentType:"application/json",data:JSON.stringify({form:n,theme:GD.form.theme.toJSON()}),processData:!1,success:function(e){return function(e,n,r){return t(r.responseText)}}(this)})}})}.call(this),function(){$(document).on("page:load ready",function(){var e,t,n,r;if($(".form-overview").length>0)return GD.syncHeight($(".form-overview .right-setting"),$(".form-overview .left-setting")),$(".form-overview .modal.input-confirm .confirm-input").on("keyup paste",function(){var e;return e=$(this).val().trim()!==""+$(this).data("confirm-content"),$(this).closest(".modal").find("button.confirm").prop("disabled",e)}),n=$(".form-overview .privilege-setting"),$(".form-overview .privilege-setting").gdClickTooltip({contentCloning:!1,position:"right",content:$("[data-react-class='FormSubmitAuthority']"),backdrop:!0,maxWidth:400,minWidth:400,autoClose:!1,functionReady:function(e,t){return t.on("click",".gd-btn[type='submit']",function(){var n;return n=$("select[name='form_setting[submission_authority]']").val(),$(".privilege-setting").text(GD.SUBMIT_AUTHORITY_VALUE_LABEL[n]),t.one("ajax:success",function(){return e.tooltipster("hide")})})}}),$(".form-overview .form-on-off-setting").gdClickTooltip({contentCloning:!1,position:"right",content:$("[data-react-class='FormCloseRule']"),backdrop:!0,offsetX:-7,minWidth:390,autoClose:!1,theme:"form-close-rule-tooltip",functionReady:function(e,t){return t.on("click",".gd-btn[type='submit']",function(){return t.one("ajax:success",function(){return e.tooltipster("hide")})})}}),t=function(e,t){return t.on("click",".go-to-notification-setting-page-and-open-notification-modal",function(){return e.tooltipster("hide"),Turbolinks.visit($(this).data("notification-setting-path"))})},e=function(e,t){return t.on("click",function(e){if(!$(e.target).hasClass("tooltipstered"))return t.find(".tooltipstered").tooltipster("hide")})},$(".form-overview .sms-notification-setting-trigger").gdClickTooltip({contentCloning:!1,position:"left",content:$(".sms-notification-setting"),backdrop:!0,maxWidth:660,functionReady:function(n,r){return r.addClass("sms-notification-setting-tooltip"),t(n,r),e(n,r)}}),$(".form-overview .email-notification-setting-trigger").gdClickTooltip({contentCloning:!1,position:"left",content:$(".email-notification-setting-tooltip"),backdrop:!0,maxWidth:680,minWidth:660,functionReady:function(n,r){var i;return i=r.find(".email-notification-toggle"),t(n,r),e(n,r)}}),GD.userFormTags||$.get("/user_form_tags",function(e){return GD.userFormTags=new GD.UserFormTagList(e.tags)}),r=function(e,t,n){var r,i,s;i=$(".form-overview .form-labels"),r=i.find("span[data-tag-id='"+e+"']");if(n){if(r.length!==0)return;return s=$('<span class="label label-default gd-label-thin pull-right"></span>').text(t).attr("data-tag-id",e),s.appendTo(i)}return r.remove()},$(".form-overview .edit-form-tag").gdClickTooltip({contentCloning:!1,position:"bottom",content:$(".dashboard-form-tags"),theme:"gd-tooltip-menu-over",backdrop:!0,functionReady:function(e,t){var n;return n=new GD.FormTagsEditView({model:GD.currentFormTags,el:$(".dashboard-form-tags")},{tooltipTrigger:e}),n.on("tagCreated",function(e,t,n){return GD.userFormTags.changed=!0,GD.userFormTags.add({tid:e,name:t})}),n.on("tagChanged",function(e,t,n,i){return GD.userFormTags.changed=!0,r(e,t,n),GD.syncHeight($(".form-overview .right-setting"),$(".form-overview .left-setting"))}),$(n.el).show(),n.render()}});return}),$(document).on("click",".modal.input-confirm .submit.confirm:enabled",function(){if($(this).data("url"))return $.ajax({url:$(this).data("url"),type:$(this).data("type"),beforeSend:function(e){return function(t){return $(e).closest(".modal").modal("hide"),GD.showLoading($(".form-overview"),$(e).data("target"))}}(this),complete:function(e){return function(t,n){var r;return 400===t.status?GD.showFlashNotification(t.responseText,"danger"):(GD.userFormTags&&(GD.userFormTags.changed=!0),r=$(e).data("redirect-url"),r==="back"?history.back():Turbolinks.visit(r))}}(this)})}),GD.formStatusToggleSuccessCallback=function(e){return e.is(":checked")&&$(".form-on-off-setting").hasClass("manually-closed")&&$(".form-on-off-setting").text("已开启，正在收集..."),$(".form-on-off-setting").toggleClass("hide"),$(".data-collect-status").toggle()}}.call(this),function(){function e(){var e,t=arguments,n,r={},i=function(e,t){var n,r;typeof e!="object"&&(e={});for(r in t)t.hasOwnProperty(r)&&(n=t[r],e[r]=n&&typeof n=="object"&&Object.prototype.toString.call(n)!=="[object Array]"&&r!=="renderTo"&&typeof n.nodeType!="number"?i(e[r]||{},n):t[r]);return e};t[0]===!0&&(r=t[1],t=Array.prototype.slice.call(t,2)),n=t.length;for(e=0;e<n;e++)r=i(r,t[e]);return r}function t(e,t){return parseInt(e,t||10)}function n(e){return typeof e=="string"}function r(e){return e&&typeof e=="object"}function i(e){return Object.prototype.toString.call(e)==="[object Array]"}function s(e){return typeof e=="number"}function o(e){return H.log(e)/H.LN10}function u(e){return H.pow(10,e)}function a(e,t){for(var n=e.length;n--;)if(e[n]===t){e.splice(n,1);break}}function f(e){return e!==_&&e!==null}function l(e,t,i){var s,o;if(n(t))f(i)?e.setAttribute(t,i):e&&e.getAttribute&&(o=e.getAttribute(t));else if(f(t)&&r(t))for(s in t)e.setAttribute(s,t[s]);return o}function c(e){return i(e)?e:[e]}function h(e,t){J&&!et&&t&&t.opacity!==_&&(t.filter="alpha(opacity="+t.opacity*100+")"),It(e.style,t)}function p(e,t,n,r,i){return e=D.createElement(e),t&&It(e,t),i&&h(e,{padding:0,border:mt,margin:0}),n&&h(e,n),r&&r.appendChild(e),e}function d(e,t){var n=function(){return _};return n.prototype=new e,It(n.prototype,t),n}function v(e,t){return Array((t||2)+1-String(e).length).join(0)+e}function m(e){return(xt&&xt(e)||St||0)*6e4}function g(e,t){for(var n="{",r=!1,i,s,o,u,a,f=[];(n=e.indexOf(n))!==-1;){i=e.slice(0,n);if(r){s=i.split(":"),o=s.shift().split("."),a=o.length,i=t;for(u=0;u<a;u++)i=i[o[u]];s.length&&(s=s.join(":"),o=/\.([0-9])/,u=at.lang,a=void 0,/f$/.test(s)?(a=(a=s.match(o))?a[1]:-1,i!==null&&(i=Ft.numberFormat(i,a,u.decimalPoint,s.indexOf(",")>-1?u.thousandsSep:""))):i=ft(s,i))}f.push(i),e=e.slice(n+1),n=(r=!r)?"}":"{"}return f.push(e),f.join("")}function y(e){return H.pow(10,j(H.log(e)/H.LN10))}function b(e,t,n,r,i){var s,o=e,n=qt(n,1);s=e/n,t||(t=[1,2,2.5,5,10],r===!1&&(n===1?t=[1,2,5,10]:n<=.1&&(t=[1/n])));for(r=0;r<t.length;r++)if(o=t[r],i&&o*n>=e||!i&&s<=(t[r]+(t[r+1]||t[r]))/2)break;return o*=n,o}function w(e,t){var n=e.length,r,i;for(i=0;i<n;i++)e[i].ss_i=i;e.sort(function(e,n){return r=t(e,n),r===0?e.ss_i-n.ss_i:r});for(i=0;i<n;i++)delete e[i].ss_i}function E(e){for(var t=e.length,n=e[0];t--;)e[t]<n&&(n=e[t]);return n}function S(e){for(var t=e.length,n=e[0];t--;)e[t]>n&&(n=e[t]);return n}function x(e,t){for(var n in e)e[n]&&e[n]!==t&&e[n].destroy&&e[n].destroy(),delete e[n]}function T(e){ut||(ut=p(vt)),e&&ut.appendChild(e),ut.innerHTML=""}function N(e,t){var n="Highcharts error #"+e+": www.highcharts.com/errors/"+e;if(t)throw n;P.console&&console.log(n)}function C(e,t){return parseFloat(e.toPrecision(t||14))}function k(e,t){t.renderer.globalAnimation=qt(e,t.animation)}function L(){var e=at.global,t=e.useUTC,n=t?"getUTC":"get",r=t?"setUTC":"set";wt=e.Date||window.Date,St=t&&e.timezoneOffset,xt=t&&e.getTimezoneOffset,Et=function(e,n,r,i,s,o){var u;return t?(u=wt.UTC.apply(0,arguments),u+=m(u)):u=(new wt(e,n,qt(r,1),qt(i,0),qt(s,0),qt(o,0))).getTime(),u},Tt=n+"Minutes",Nt=n+"Hours",Ct=n+"Day",kt=n+"Date",Lt=n+"Month",At=n+"FullYear",Ot=r+"Milliseconds",Mt=r+"Seconds",_t=r+"Minutes",Dt=r+"Hours",Pt=r+"Date",Ht=r+"Month",Bt=r+"FullYear"}function A(){}function O(e,t,n,r){this.axis=e,this.pos=t,this.type=n||"",this.isNew=!0,!n&&!r&&this.addLabel()}function M(e,t,n,r,i){var s=e.chart.inverted;this.axis=e,this.isNegative=n,this.options=t,this.x=r,this.total=null,this.points={},this.stack=i,this.alignOptions={align:t.align||(s?n?"left":"right":"center"),verticalAlign:t.verticalAlign||(s?"middle":n?"bottom":"top"),y:qt(t.y,s?4:n?14:-6),x:qt(t.x,s?n?-6:6:0)},this.textAlign=t.textAlign||(s?n?"right":"left":"center")}var _,D=document,P=window,H=Math,B=H.round,j=H.floor,F=H.ceil,I=H.max,q=H.min,R=H.abs,U=H.cos,z=H.sin,W=H.PI,X=W*2/360,V=navigator.userAgent,$=P.opera,J=/(msie|trident)/i.test(V)&&!$,K=D.documentMode===8,Q=/AppleWebKit/.test(V),G=/Firefox/.test(V),Y=/(Mobile|Android|Windows Phone)/.test(V),Z="http://www.w3.org/2000/svg",et=!!D.createElementNS&&!!D.createElementNS(Z,"svg").createSVGRect,tt=G&&parseInt(V.split("Firefox/")[1],10)<4,nt=!et&&!J&&!!D.createElement("canvas").getContext,rt,it,st={},ot=0,ut,at,ft,lt,ct,ht=function(){return _},pt=[],dt=0,vt="div",mt="none",gt=/^[0-9]+$/,yt=["plotTop","marginRight","marginBottom","plotLeft"],bt="stroke-width",wt,Et,St,xt,Tt,Nt,Ct,kt,Lt,At,Ot,Mt,_t,Dt,Pt,Ht,Bt,jt={},Ft;Ft=P.Highcharts=P.Highcharts?N(16,!0):{},Ft.seriesTypes=jt;var It=Ft.extend=function(e,t){var n;e||(e={});for(n in t)e[n]=t[n];return e},qt=Ft.pick=function(){var e=arguments,t,n,r=e.length;for(t=0;t<r;t++)if(n=e[t],n!==_&&n!==null)return n},Rt=Ft.wrap=function(e,t,n){var r=e[t];e[t]=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(r),n.apply(this,e)}};ft=function(e,t,n){if(!f(t)||isNaN(t))return at.lang.invalidDate||"";var e=qt(e,"%Y-%m-%d %H:%M:%S"),r=new wt(t-m(t)),i,s=r[Nt](),o=r[Ct](),u=r[kt](),a=r[Lt](),l=r[At](),c=at.lang,h=c.weekdays,r=It({a:h[o].substr(0,3),A:h[o],d:v(u),e:u,w:o,b:c.shortMonths[a],B:c.months[a],m:v(a+1),y:l.toString().substr(2,2),Y:l,H:v(s),k:s,I:v(s%12||12),l:s%12||12,M:v(r[Tt]()),p:s<12?"AM":"PM",P:s<12?"am":"pm",S:v(r.getSeconds()),L:v(B(t%1e3),3)},Ft.dateFormats);for(i in r)for(;e.indexOf("%"+i)!==-1;)e=e.replace("%"+i,typeof r[i]=="function"?r[i](t):r[i]);return n?e.substr(0,1).toUpperCase()+e.substr(1):e},ct={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},Ft.numberFormat=function(e,n,r,i){var s=at.lang,e=+e||0,o=n===-1?q((e.toString().split(".")[1]||"").length,20):isNaN(n=R(n))?2:n,n=r===void 0?s.decimalPoint:r,i=i===void 0?s.thousandsSep:i,s=e<0?"-":"",r=String(t(e=R(e).toFixed(o))),u=r.length>3?r.length%3:0;return s+(u?r.substr(0,u)+i:"")+r.substr(u).replace(/(\d{3})(?=\d)/g,"$1"+i)+(o?n+R(e-r).toFixed(o).slice(2):"")},lt={init:function(e,t,n){var t=t||"",r=e.shift,i=t.indexOf("C")>-1,s=i?7:3,o,t=t.split(" "),n=[].concat(n),u,a,f=function(e){for(o=e.length;o--;)e[o]==="M"&&e.splice(o+1,0,e[o+1],e[o+2],e[o+1],e[o+2])};i&&(f(t),f(n)),e.isArea&&(u=t.splice(t.length-6,6),a=n.splice(n.length-6,6));if(r<=n.length/s&&t.length===n.length)for(;r--;)n=[].concat(n).splice(0,s).concat(n);e.shift=0;if(t.length)for(e=n.length;t.length<e;)r=[].concat(t).splice(t.length-s,s),i&&(r[s-6]=r[s-2],r[s-5]=r[s-1]),t=t.concat(r);return u&&(t=t.concat(u),n=n.concat(a)),[t,n]},step:function(e,t,n,r){var i=[],s=e.length;if(n===1)i=r;else if(s===t.length&&n<1)for(;s--;)r=parseFloat(e[s]),i[s]=isNaN(r)?e[s]:n*parseFloat(t[s]-r)+r;else i=t;return i}},function(e){P.HighchartsAdapter=P.HighchartsAdapter||e&&{init:function(t){var r=e.fx;e.extend(e.easing,{easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n}}),e.each(["cur","_default","width","height","opacity"],function(t,n){var i=r.step,s;n==="cur"?i=r.prototype:n==="_default"&&e.Tween&&(i=e.Tween.propHooks[n],n="set"),(s=i[n])&&(i[n]=function(e){var r,e=t?e:this;if(e.prop!=="align")return r=e.elem,r.attr?r.attr(e.prop,n==="cur"?_:e.now):s.apply(this,arguments)})}),Rt(e.cssHooks.opacity,"get",function(e,t,n){return t.attr?t.opacity||0:e.call(this,t,n)}),this.addAnimSetter("d",function(e){var n=e.elem,r;e.started||(r=t.init(n,n.d,n.toD),e.start=r[0],e.end=r[1],e.started=!0),n.attr("d",t.step(e.start,e.end,e.pos,n.toD))}),this.each=Array.prototype.forEach?function(e,t){return Array.prototype.forEach.call(e,t)}:function(e,t){var n,r=e.length;for(n=0;n<r;n++)if(t.call(e[n],e[n],n,e)===!1)return n},e.fn.highcharts=function(){var e="Chart",t=arguments,r,i;return this[0]&&(n(t[0])&&(e=t[0],t=Array.prototype.slice.call(t,1)),r=t[0],r!==_&&(r.chart=r.chart||{},r.chart.renderTo=this[0],new Ft[e](r,t[1]),i=this),r===_&&(i=pt[l(this[0],"data-highcharts-chart")])),i}},addAnimSetter:function(t,n){e.Tween?e.Tween.propHooks[t]={set:n}:e.fx.step[t]=n},getScript:e.getScript,inArray:e.inArray,adapterRun:function(t,n){return e(t)[n]()},grep:e.grep,map:function(e,t){for(var n=[],r=0,i=e.length;r<i;r++)n[r]=t.call(e[r],e[r],r,e);return n},offset:function(t){return e(t).offset()},addEvent:function(t,n,r){e(t).bind(n,r)},removeEvent:function(t,n,r){var i=D.removeEventListener?"removeEventListener":"detachEvent";D[i]&&t&&!t[i]&&(t[i]=function(){}),e(t).unbind(n,r)},fireEvent:function(t,n,r,i){var s=e.Event(n),o="detached"+n,u;!J&&r&&(delete r.layerX,delete r.layerY,delete r.returnValue),It(s,r),t[n]&&(t[o]=t[n],t[n]=null),e.each(["preventDefault","stopPropagation"],function(e,t){var n=s[t];s[t]=function(){try{n.call(s)}catch(e){t==="preventDefault"&&(u=!0)}}}),e(t).trigger(s),t[o]&&(t[n]=t[o],t[o]=null),i&&!s.isDefaultPrevented()&&!u&&i(s)},washMouseEvent:function(e){var t=e.originalEvent||e;return t.pageX===_&&(t.pageX=e.pageX,t.pageY=e.pageY),t},animate:function(t,n,r){var i=e(t);t.style||(t.style={}),n.d&&(t.toD=n.d,n.d=1),i.stop(),n.opacity!==_&&t.attr&&(n.opacity+="px"),t.hasAnim=1,i.animate(n,r)},stop:function(t){t.hasAnim&&e(t).stop()}}}(P.jQuery);var Ut=P.HighchartsAdapter,zt=Ut||{};Ut&&Ut.init.call(Ut,lt);var Wt=zt.adapterRun,Xt=zt.getScript,Vt=zt.inArray,$t=Ft.each=zt.each,Jt=zt.grep,Kt=zt.offset,Qt=zt.map,Gt=zt.addEvent,Yt=zt.removeEvent,Zt=zt.fireEvent,en=zt.washMouseEvent,tn=zt.animate,nn=zt.stop;at={colors:"#7cb5ec,#434348,#90ed7d,#f7a35c,#8085e9,#f15c80,#e4d354,#2b908f,#f45b5b,#91e8e1".split(","),symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),shortMonths:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),decimalPoint:".",numericSymbols:"k,M,G,T,P,E".split(","),resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/4.1.8/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/4.1.8/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:0,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",margin:15,style:{color:"#333333",fontSize:"18px"}},subtitle:{text:"",align:"center",style:{color:"#555555"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0,lineWidthPlus:1,radiusPlus:2},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{align:"center",formatter:function(){return this.y===null?"":Ft.numberFormat(this.y,-1)},style:{color:"contrast",fontSize:"11px",fontWeight:"bold",textShadow:"0 0 6px contrast, 0 0 3px contrast"},verticalAlign:"bottom",x:0,y:0,padding:5},cropThreshold:300,pointRange:0,states:{hover:{lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1e3}},labels:{style:{position:"absolute",color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#909090",borderRadius:0,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{color:"#333333",fontSize:"12px",fontWeight:"bold"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:et,backgroundColor:"rgba(249, 249, 249, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},footerFormat:"",headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">●</span> {series.name}: <b>{point.y}</b><br/>',shadow:!0,snap:Y?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}};var rn=at.plotOptions,Ut=rn.line;L();var sn=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,on=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,un=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,an=function(n){var r=[],i,o;return function(e){e&&e.stops?o=Qt(e.stops,function(e){return an(e[1])}):(i=sn.exec(e))?r=[t(i[1]),t(i[2]),t(i[3]),parseFloat(i[4],10)]:(i=on.exec(e))?r=[t(i[1],16),t(i[2],16),t(i[3],16),1]:(i=un.exec(e))&&(r=[t(i[1]),t(i[2]),t(i[3]),1])}(n),{get:function(t){var i;return o?(i=e(n),i.stops=[].concat(i.stops),$t(o,function(e,n){i.stops[n]=[i.stops[n][0],e.get(t)]})):i=r&&!isNaN(r[0])?t==="rgb"?"rgb("+r[0]+","+r[1]+","+r[2]+")":t==="a"?r[3]:"rgba("+r.join(",")+")":n,i},brighten:function(e){if(o)$t(o,function(t){t.brighten(e)});else if(s(e)&&e!==0){var n;for(n=0;n<3;n++)r[n]+=t(e*255),r[n]<0&&(r[n]=0),r[n]>255&&(r[n]=255)}return this},rgba:r,setOpacity:function(e){return r[3]=e,this},raw:n}};A.prototype={opacity:1,textProps:"fontSize,fontWeight,fontFamily,fontStyle,color,lineHeight,width,textDecoration,textOverflow,textShadow".split(","),init:function(e,t){this.element=t==="span"?p(t):D.createElementNS(Z,t),this.renderer=e},animate:function(t,n,r){return n=qt(n,this.renderer.globalAnimation,!0),nn(this),n?(n=e(n,{}),r&&(n.complete=r),tn(this,t,n)):this.attr(t,null,r),this},colorGradient:function(t,n,r){var s=this.renderer,o,u,a,l,c,h,p,d,v,m,g=[];t.linearGradient?u="linearGradient":t.radialGradient&&(u="radialGradient");if(u){a=t[u],l=s.gradients,h=t.stops,v=r.radialReference,i(a)&&(t[u]=a={x1:a[0],y1:a[1],x2:a[2],y2:a[3],gradientUnits:"userSpaceOnUse"}),u==="radialGradient"&&v&&!f(a.gradientUnits)&&(a=e(a,{cx:v[0]-v[2]/2+a.cx*v[2],cy:v[1]-v[2]/2+a.cy*v[2],r:a.r*v[2],gradientUnits:"userSpaceOnUse"}));for(m in a)m!=="id"&&g.push(m,a[m]);for(m in h)g.push(h[m]);g=g.join(","),l[g]?t=l[g].attr("id"):(a.id=t="highcharts-"+ot++,l[g]=c=s.createElement(u).attr(a).add(s.defs),c.stops=[],$t(h,function(e){e[1].indexOf("rgba")===0?(o=an(e[1]),p=o.get("rgb"),d=o.get("a")):(p=e[1],d=1),e=s.createElement("stop").attr({offset:e[0],"stop-color":p,"stop-opacity":d}).add(c),c.stops.push(e)})),r.setAttribute(n,"url("+s.url+"#"+t+")")}},applyTextShadow:function(e){var n=this.element,r,i=e.indexOf("contrast")!==-1,s={},o=this.renderer.forExport||n.style.textShadow!==_&&!J;i&&(s.textShadow=e=e.replace(/contrast/g,this.renderer.getContrast(n.style.fill))),Q&&(s.textRendering="geometricPrecision"),o?h(n,s):(this.fakeTS=!0,this.ySetter=this.xSetter,r=[].slice.call(n.getElementsByTagName("tspan")),$t(e.split(/\s?,\s?/g),function(e){var i=n.firstChild,s,o,e=e.split(" ");s=e[e.length-1],(o=e[e.length-2])&&$t(r,function(e,r){var u;r===0&&(e.setAttribute("x",n.getAttribute("x")),r=n.getAttribute("y"),e.setAttribute("y",r||0),r===null&&n.setAttribute("y",0)),u=e.cloneNode(1),l(u,{"class":"highcharts-text-shadow",fill:s,stroke:s,"stroke-opacity":1/I(t(o),3),"stroke-width":o,"stroke-linejoin":"round"}),n.insertBefore(u,i)})}))},attr:function(e,t,n){var r,i=this.element,s,o=this,u;typeof e=="string"&&t!==_&&(r=e,e={},e[r]=t);if(typeof e=="string")o=(this[e+"Getter"]||this._defaultGetter).call(this,e,i);else{for(r in e)t=e[r],u=!1,this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(r)&&(s||(this.symbolAttr(e),s=!0),u=!0),this.rotation&&(r==="x"||r==="y")&&(this.doTransform=!0),u||(this[r+"Setter"]||this._defaultSetter).call(this,t,r,i),this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(r)&&this.updateShadows(r,t);this.doTransform&&(this.updateTransform(),this.doTransform=!1)}return n&&n(),o},updateShadows:function(e,t){for(var n=this.shadows,r=n.length;r--;)n[r].setAttribute(e,e==="height"?I(t-(n[r].cutHeight||0),0):e==="d"?this.d:t)},addClass:function(e){var t=this.element,n=l(t,"class")||"";return n.indexOf(e)===-1&&l(t,"class",n+" "+e),this},symbolAttr:function(e){var t=this;$t("x,y,r,start,end,width,height,innerR,anchorX,anchorY".split(","),function(n){t[n]=qt(e[n],t[n])}),t.attr({d:t.renderer.symbols[t.symbolName](t.x,t.y,t.width,t.height,t)})},clip:function(e){return this.attr("clip-path",e?"url("+this.renderer.url+"#"+e.id+")":mt)},crisp:function(e){var t,n={},r,i=e.strokeWidth||this.strokeWidth||0;r=B(i)%2/2,e.x=j(e.x||this.x||0)+r,e.y=j(e.y||this.y||0)+r,e.width=j((e.width||this.width||0)-2*r),e.height=j((e.height||this.height||0)-2*r),e.strokeWidth=i;for(t in e)this[t]!==e[t]&&(this[t]=n[t]=e[t]);return n},css:function(e){var n=this.styles,r={},i=this.element,s,o,u="";s=!n,e&&e.color&&(e.fill=e.color);if(n)for(o in e)e[o]!==n[o]&&(r[o]=e[o],s=!0);if(s){s=this.textWidth=e&&e.width&&i.nodeName.toLowerCase()==="text"&&t(e.width)||this.textWidth,n&&(e=It(n,r)),this.styles=e,s&&(nt||!et&&this.renderer.forExport)&&delete e.width;if(J&&!et)h(this.element,e);else{n=function(e,t){return"-"+t.toLowerCase()};for(o in e)u+=o.replace(/([A-Z])/g,n)+":"+e[o]+";";l(i,"style",u)}s&&this.added&&this.renderer.buildText(this)}return this},on:function(e,t){var n=this,r=n.element;return it&&e==="click"?(r.ontouchstart=function(e){n.touchEventFired=wt.now(),e.preventDefault(),t.call(r,e)},r.onclick=function(e){(V.indexOf("Android")===-1||wt.now()-(n.touchEventFired||0)>1100)&&t.call(r,e)}):r["on"+e]=t,this},setRadialReference:function(e){return this.element.radialReference=e,this},translate:function(e,t){return this.attr({translateX:e,translateY:t})},invert:function(){return this.inverted=!0,this.updateTransform(),this},updateTransform:function(){var e=this.translateX||0,t=this.translateY||0,n=this.scaleX,r=this.scaleY,i=this.inverted,s=this.rotation,o=this.element;i&&(e+=this.attr("width"),t+=this.attr("height")),e=["translate("+e+","+t+")"],i?e.push("rotate(90) scale(-1,1)"):s&&e.push("rotate("+s+" "+(o.getAttribute("x")||0)+" "+(o.getAttribute("y")||0)+")"),(f(n)||f(r))&&e.push("scale("+qt(n,1)+" "+qt(r,1)+")"),e.length&&o.setAttribute("transform",e.join(" "))},toFront:function(){var e=this.element;return e.parentNode.appendChild(e),this},align:function(e,t,r){var i,s,o,u,f={};s=this.renderer,o=s.alignedObjects;if(e){if(this.alignOptions=e,this.alignByTranslate=t,!r||n(r))this.alignTo=i=r||"renderer",a(o,this),o.push(this),r=null}else e=this.alignOptions,t=this.alignByTranslate,i=this.alignTo;r=qt(r,s[i],s),i=e.align,s=e.verticalAlign,o=(r.x||0)+(e.x||0),u=(r.y||0)+(e.y||0);if(i==="right"||i==="center")o+=(r.width-(e.width||0))/{right:1,center:2}[i];f[t?"translateX":"x"]=B(o);if(s==="bottom"||s==="middle")u+=(r.height-(e.height||0))/({bottom:1,middle:2}[s]||1);return f[t?"translateY":"y"]=B(u),this[this.placed?"animate":"attr"](f),this.placed=!0,this.alignAttr=f,this},getBBox:function(e){var t,n=this.renderer,r,i=this.rotation,s=this.element,o=this.styles,u=i*X;r=this.textStr;var a,f=s.style,l,c;r!==_&&(c=["",i||0,o&&o.fontSize,s.style.width].join(","),c=r===""||gt.test(r)?"num:"+r.toString().length+c:r+c),c&&!e&&(t=n.cache[c]);if(!t){if(s.namespaceURI===Z||n.forExport){try{l=this.fakeTS&&function(e){$t(s.querySelectorAll(".highcharts-text-shadow"),function(t){t.style.display=e})},G&&f.textShadow?(a=f.textShadow,f.textShadow=""):l&&l(mt),t=s.getBBox?It({},s.getBBox()):{width:s.offsetWidth,height:s.offsetHeight},a?f.textShadow=a:l&&l("")}catch(h){}if(!t||t.width<0)t={width:0,height:0}}else t=this.htmlGetBBox();n.isSVG&&(e=t.width,r=t.height,J&&o&&o.fontSize==="11px"&&r.toPrecision(3)==="16.9"&&(t.height=r=14),i&&(t.width=R(r*z(u))+R(e*U(u)),t.height=R(r*U(u))+R(e*z(u)))),c&&(n.cache[c]=t)}return t},show:function(e){return this.attr({visibility:e?"inherit":"visible"})},hide:function(){return this.attr({visibility:"hidden"})},fadeOut:function(e){var t=this;t.animate({opacity:0},{duration:e||150,complete:function(){t.attr({y:-9999})}})},add:function(e){var t=this.renderer,n=this.element,r;e&&(this.parentGroup=e),this.parentInverted=e&&e.inverted,this.textStr!==void 0&&t.buildText(this),this.added=!0;if(!e||e.handleZ||this.zIndex)r=this.zIndexSetter();return r||(e?e.element:t.box).appendChild(n),this.onAdd&&this.onAdd(),this},safeRemoveChild:function(e){var t=e.parentNode;t&&t.removeChild(e)},destroy:function(){var e=this,t=e.element||{},n=e.shadows,r=e.renderer.isSVG&&t.nodeName==="SPAN"&&e.parentGroup,i,s;t.onclick=t.onmouseout=t.onmouseover=t.onmousemove=t.point=null,nn(e),e.clipPath&&(e.clipPath=e.clipPath.destroy());if(e.stops){for(s=0;s<e.stops.length;s++)e.stops[s]=e.stops[s].destroy();e.stops=null}e.safeRemoveChild(t);for(n&&$t(n,function(t){e.safeRemoveChild(t)});r&&r.div&&r.div.childNodes.length===0;)t=r.parentGroup,e.safeRemoveChild(r.div),delete r.div,r=t;e.alignTo&&a(e.renderer.alignedObjects,e);for(i in e)delete e[i];return null},shadow:function(e,t,n){var r=[],i,s,o=this.element,u,a,f,c;if(e){a=qt(e.width,3),f=(e.opacity||.15)/a,c=this.parentInverted?"(-1,-1)":"("+qt(e.offsetX,1)+", "+qt(e.offsetY,1)+")";for(i=1;i<=a;i++)s=o.cloneNode(0),u=a*2+1-2*i,l(s,{isShadow:"true",stroke:e.color||"black","stroke-opacity":f*i,"stroke-width":u,transform:"translate"+c,fill:mt}),n&&(l(s,"height",I(l(s,"height")-u,0)),s.cutHeight=u),t?t.element.appendChild(s):o.parentNode.insertBefore(s,o),r.push(s);this.shadows=r}return this},xGetter:function(e){return this.element.nodeName==="circle"&&(e={x:"cx",y:"cy"}[e]||e),this._defaultGetter(e)},_defaultGetter:function(e){return e=qt(this[e],this.element?this.element.getAttribute(e):null,0),/^[\-0-9\.]+$/.test(e)&&(e=parseFloat(e)),e},dSetter:function(e,t,n){e&&e.join&&(e=e.join(" ")),/(NaN| {2}|^$)/.test(e)&&(e="M 0 0"),n.setAttribute(t,e),this[t]=e},dashstyleSetter:function(e){var n;if(e=e&&e.toLowerCase()){e=e.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(n=e.length;n--;)e[n]=t(e[n])*this["stroke-width"];e=e.join(",").replace("NaN","none"),this.element.setAttribute("stroke-dasharray",e)}},alignSetter:function(e){this.element.setAttribute("text-anchor",{left:"start",center:"middle",right:"end"}[e])},opacitySetter:function(e,t,n){this[t]=e,n.setAttribute(t,e)},titleSetter:function(e){var t=this.element.getElementsByTagName("title")[0];t||(t=D.createElementNS(Z,"title"),this.element.appendChild(t)),t.appendChild(D.createTextNode(String(qt(e),"").replace(/<[^>]*>/g,"")))},textSetter:function(e){e!==this.textStr&&(delete this.bBox,this.textStr=e,this.added&&this.renderer.buildText(this))},fillSetter:function(e,t,n){typeof e=="string"?n.setAttribute(t,e):e&&this.colorGradient(e,t,n)},visibilitySetter:function(e,t,n){e==="inherit"?n.removeAttribute(t):n.setAttribute(t,e)},zIndexSetter:function(e,n){var r=this.renderer,i=this.parentGroup,r=(i||r).element||r.box,s,o,u=this.element,a;s=this.added;var c;f(e)&&(u.setAttribute(n,e),e=+e,this[n]===e&&(s=!1),this[n]=e);if(s){(e=this.zIndex)&&i&&(i.handleZ=!0),i=r.childNodes;for(c=0;c<i.length&&!a;c++)if(s=i[c],o=l(s,"zIndex"),s!==u&&(t(o)>e||!f(e)&&f(o)))r.insertBefore(u,s),a=!0;a||r.appendChild(u)}return a},_defaultSetter:function(e,t,n){n.setAttribute(t,e)}},A.prototype.yGetter=A.prototype.xGetter,A.prototype.translateXSetter=A.prototype.translateYSetter=A.prototype.rotationSetter=A.prototype.verticalAlignSetter=A.prototype.scaleXSetter=A.prototype.scaleYSetter=function(
e,t){this[t]=e,this.doTransform=!0},A.prototype["stroke-widthSetter"]=A.prototype.strokeSetter=function(e,t,n){this[t]=e,this.stroke&&this["stroke-width"]?(this.strokeWidth=this["stroke-width"],A.prototype.fillSetter.call(this,this.stroke,"stroke",n),n.setAttribute("stroke-width",this["stroke-width"]),this.hasStroke=!0):t==="stroke-width"&&e===0&&this.hasStroke&&(n.removeAttribute("stroke"),this.hasStroke=!1)};var fn=function(){this.init.apply(this,arguments)};fn.prototype={Element:A,init:function(e,t,n,r,i){var s=location,o,r=this.createElement("svg").attr({version:"1.1"}).css(this.getStyle(r));o=r.element,e.appendChild(o),e.innerHTML.indexOf("xmlns")===-1&&l(o,"xmlns",Z),this.isSVG=!0,this.box=o,this.boxWrapper=r,this.alignedObjects=[],this.url=(G||Q)&&D.getElementsByTagName("base").length?s.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",this.createElement("desc").add().element.appendChild(D.createTextNode("Created with Highcharts 4.1.8")),this.defs=this.createElement("defs").add(),this.forExport=i,this.gradients={},this.cache={},this.setSize(t,n,!1);var u;G&&e.getBoundingClientRect&&(this.subPixelFix=t=function(){h(e,{left:0,top:0}),u=e.getBoundingClientRect(),h(e,{left:F(u.left)-u.left+"px",top:F(u.top)-u.top+"px"})},t(),Gt(P,"resize",t))},getStyle:function(e){return this.style=It({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},e)},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var e=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),x(this.gradients||{}),this.gradients=null,e&&(this.defs=e.destroy()),this.subPixelFix&&Yt(P,"resize",this.subPixelFix),this.alignedObjects=null},createElement:function(e){var t=new this.Element;return t.init(this,e),t},draw:function(){},buildText:function(e){for(var n=e.element,r=this,i=r.forExport,s=qt(e.textStr,"").toString(),o=s.indexOf("<")!==-1,u=n.childNodes,a,f,c=l(n,"x"),p=e.styles,d=e.textWidth,v=p&&p.lineHeight,m=p&&p.textShadow,g=p&&p.textOverflow==="ellipsis",y=u.length,b=d&&!e.added&&this.box,w=function(e){return v?t(v):r.fontMetrics(/(px|em)$/.test(e&&e.style.fontSize)?e.style.fontSize:p&&p.fontSize||r.style.fontSize||12,e).h},E=function(e){return e.replace(/&lt;/g,"<").replace(/&gt;/g,">")};y--;)n.removeChild(u[y]);!o&&!m&&!g&&s.indexOf(" ")===-1?n.appendChild(D.createTextNode(E(s))):(a=/<.*style="([^"]+)".*>/,f=/<.*href="(http[^"]+)".*>/,b&&b.appendChild(n),s=o?s.replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g):[s],s[s.length-1]===""&&s.pop(),$t(s,function(t,s){var o,u=0,t=t.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||");o=t.split("|||"),$t(o,function(t){if(t!==""||o.length===1){var v={},m=D.createElementNS(Z,"tspan"),y;a.test(t)&&(y=t.match(a)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),l(m,"style",y)),f.test(t)&&!i&&(l(m,"onclick",'location.href="'+t.match(f)[1]+'"'),h(m,{cursor:"pointer"})),t=E(t.replace(/<(.|\n)*?>/g,"")||" ");if(t!==" "){m.appendChild(D.createTextNode(t)),u?v.dx=0:s&&c!==null&&(v.x=c),l(m,v),n.appendChild(m),!u&&s&&(!et&&i&&h(m,{display:"block"}),l(m,"dy",w(m)));if(d){for(var v=t.replace(/([^\^])-/g,"$1- ").split(" "),b=o.length>1||s||v.length>1&&p.whiteSpace!=="nowrap",S,x,T,N=[],C=w(m),k=1,L=e.rotation,A=t,O=A.length;(b||g)&&(v.length||N.length);)e.rotation=0,S=e.getBBox(!0),T=S.width,!et&&r.forExport&&(T=r.measureSpanWidth(m.firstChild.data,e.styles)),S=T>d,x===void 0&&(x=S),g&&x?(O/=2,A===""||!S&&O<.5?v=[]:(S&&(x=!0),A=t.substring(0,A.length+(S?-1:1)*F(O)),v=[A+(d>3?"…":"")],m.removeChild(m.firstChild))):!S||v.length===1?(v=N,N=[],v.length&&(k++,m=D.createElementNS(Z,"tspan"),l(m,{dy:C,x:c}),y&&l(m,"style",y),n.appendChild(m)),T>d&&(d=T)):(m.removeChild(m.firstChild),N.unshift(v.pop())),v.length&&m.appendChild(D.createTextNode(v.join(" ").replace(/- /g,"-")));x&&e.attr("title",e.textStr),e.rotation=L}u++}}})}),b&&b.removeChild(n),m&&e.applyTextShadow&&e.applyTextShadow(m))},getContrast:function(e){return e=an(e).rgba,e[0]+e[1]+e[2]>384?"#000000":"#FFFFFF"},button:function(t,n,r,i,s,o,u,a,f){var l=this.label(t,n,r,f,null,null,null,null,"button"),c=0,h,p,d,v,m,g,t={x1:0,y1:0,x2:0,y2:1},s=e({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:t,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},s);return d=s.style,delete s.style,o=e(s,{stroke:"#68A",fill:{linearGradient:t,stops:[[0,"#FFF"],[1,"#ACF"]]}},o),v=o.style,delete o.style,u=e(s,{stroke:"#68A",fill:{linearGradient:t,stops:[[0,"#9BD"],[1,"#CDF"]]}},u),m=u.style,delete u.style,a=e(s,{style:{color:"#CCC"}},a),g=a.style,delete a.style,Gt(l.element,J?"mouseover":"mouseenter",function(){c!==3&&l.attr(o).css(v)}),Gt(l.element,J?"mouseout":"mouseleave",function(){c!==3&&(h=[s,o,u][c],p=[d,v,m][c],l.attr(h).css(p))}),l.setState=function(e){(l.state=c=e)?e===2?l.attr(u).css(m):e===3&&l.attr(a).css(g):l.attr(s).css(d)},l.on("click",function(e){c!==3&&i.call(l,e)}).attr(s).css(It({cursor:"default"},d))},crispLine:function(e,t){return e[1]===e[4]&&(e[1]=e[4]=B(e[1])-t%2/2),e[2]===e[5]&&(e[2]=e[5]=B(e[2])+t%2/2),e},path:function(e){var t={fill:mt};return i(e)?t.d=e:r(e)&&It(t,e),this.createElement("path").attr(t)},circle:function(e,t,n){return e=r(e)?e:{x:e,y:t,r:n},t=this.createElement("circle"),t.xSetter=function(e){this.element.setAttribute("cx",e)},t.ySetter=function(e){this.element.setAttribute("cy",e)},t.attr(e)},arc:function(e,t,n,i,s,o){return r(e)&&(t=e.y,n=e.r,i=e.innerR,s=e.start,o=e.end,e=e.x),e=this.symbol("arc",e||0,t||0,n||0,n||0,{innerR:i||0,start:s||0,end:o||0}),e.r=n,e},rect:function(e,t,n,i,s,o){var s=r(e)?e.r:s,u=this.createElement("rect"),e=r(e)?e:e===_?{}:{x:e,y:t,width:I(n,0),height:I(i,0)};return o!==_&&(e.strokeWidth=o,e=u.crisp(e)),s&&(e.r=s),u.rSetter=function(e){l(this.element,{rx:e,ry:e})},u.attr(e)},setSize:function(e,t,n){var r=this.alignedObjects,i=r.length;this.width=e,this.height=t;for(this.boxWrapper[qt(n,!0)?"animate":"attr"]({width:e,height:t});i--;)r[i].align()},g:function(e){var t=this.createElement("g");return f(e)?t.attr({"class":"highcharts-"+e}):t},image:function(e,t,n,r,i){var s={preserveAspectRatio:mt};return arguments.length>1&&It(s,{x:t,y:n,width:r,height:i}),s=this.createElement("image").attr(s),s.element.setAttributeNS?s.element.setAttributeNS("http://www.w3.org/1999/xlink","href",e):s.element.setAttribute("hc-svg-href",e),s},symbol:function(e,t,n,r,i,s){var o,u=this.symbols[e],u=u&&u(B(t),B(n),r,i,s),a=/^url\((.*?)\)$/,f,l;return u?(o=this.path(u),It(o,{symbolName:e,x:t,y:n,width:r,height:i}),s&&It(o,s)):a.test(e)&&(l=function(e,t){e.element&&(e.attr({width:t[0],height:t[1]}),e.alignByTranslate||e.translate(B((r-t[0])/2),B((i-t[1])/2)))},f=e.match(a)[1],e=st[f]||s&&s.width&&s.height&&[s.width,s.height],o=this.image(f).attr({x:t,y:n}),o.isImg=!0,e?l(o,e):(o.attr({width:0,height:0}),p("img",{onload:function(){l(o,st[f]=[this.width,this.height])},src:f}))),o},symbols:{circle:function(e,t,n,r){var i=.166*n;return["M",e+n/2,t,"C",e+n+i,t,e+n+i,t+r,e+n/2,t+r,"C",e-i,t+r,e-i,t,e+n/2,t,"Z"]},square:function(e,t,n,r){return["M",e,t,"L",e+n,t,e+n,t+r,e,t+r,"Z"]},triangle:function(e,t,n,r){return["M",e+n/2,t,"L",e+n,t+r,e,t+r,"Z"]},"triangle-down":function(e,t,n,r){return["M",e,t,"L",e+n,t,e+n/2,t+r,"Z"]},diamond:function(e,t,n,r){return["M",e+n/2,t,"L",e+n,t+r/2,e+n/2,t+r,e,t+r/2,"Z"]},arc:function(e,t,n,r,i){var s=i.start,n=i.r||n||r,o=i.end-.001,r=i.innerR,u=i.open,a=U(s),f=z(s),l=U(o),o=z(o),i=i.end-s<W?0:1;return["M",e+n*a,t+n*f,"A",n,n,0,i,1,e+n*l,t+n*o,u?"M":"L",e+r*l,t+r*o,"A",r,r,0,i,0,e+r*a,t+r*f,u?"":"Z"]},callout:function(e,t,n,r,i){var s=q(i&&i.r||0,n,r),o=s+6,u=i&&i.anchorX,i=i&&i.anchorY,a;return a=["M",e+s,t,"L",e+n-s,t,"C",e+n,t,e+n,t,e+n,t+s,"L",e+n,t+r-s,"C",e+n,t+r,e+n,t+r,e+n-s,t+r,"L",e+s,t+r,"C",e,t+r,e,t+r,e,t+r-s,"L",e,t+s,"C",e,t,e,t,e+s,t],u&&u>n&&i>t+o&&i<t+r-o?a.splice(13,3,"L",e+n,i-6,e+n+6,i,e+n,i+6,e+n,t+r-s):u&&u<0&&i>t+o&&i<t+r-o?a.splice(33,3,"L",e,i+6,e-6,i,e,i-6,e,t+s):i&&i>r&&u>e+o&&u<e+n-o?a.splice(23,3,"L",u+6,t+r,u,t+r+6,u-6,t+r,e+s,t+r):i&&i<0&&u>e+o&&u<e+n-o&&a.splice(3,3,"L",u-6,t,u,t-6,u+6,t,n-s,t),a}},clipRect:function(e,t,n,r){var i="highcharts-"+ot++,s=this.createElement("clipPath").attr({id:i}).add(this.defs),e=this.rect(e,t,n,r,0).add(s);return e.id=i,e.clipPath=s,e.count=0,e},text:function(e,t,n,r){var i=nt||!et&&this.forExport,s={};if(r&&!this.forExport)return this.html(e,t,n);s.x=Math.round(t||0),n&&(s.y=Math.round(n));if(e||e===0)s.text=e;return e=this.createElement("text").attr(s),i&&e.css({position:"absolute"}),r||(e.xSetter=function(e,t,n){var r=n.getElementsByTagName("tspan"),i,s=n.getAttribute(t),o;for(o=0;o<r.length;o++)i=r[o],i.getAttribute(t)===s&&i.setAttribute(t,e);n.setAttribute(t,e)}),e},fontMetrics:function(e,n){var r,i,e=e||this.style.fontSize;return n&&P.getComputedStyle&&(n=n.element||n,e=(r=P.getComputedStyle(n,""))&&r.fontSize),e=/px/.test(e)?t(e):/em/.test(e)?parseFloat(e)*12:12,r=e<24?e+3:B(e*1.2),i=B(r*.8),{h:r,b:i,f:e}},rotCorr:function(e,t,n){var r=e;return t&&n&&(r=I(r*U(t*X),4)),{x:-e/3*z(t*X),y:r}},label:function(t,n,r,i,s,o,u,a,l){function c(){var e,t;e=m.element.style,y=(S===void 0||x===void 0||v.styles.textAlign)&&f(m.textStr)&&m.getBBox(),v.width=(S||y.width||0)+2*w+E,v.height=(x||y.height||0)+2*w,L=w+d.fontMetrics(e&&e.fontSize,m).b,O&&(g||(e=B(-b*w)+C,t=(a?-L:0)+C,v.box=g=i?d.symbol(i,e,t,v.width,v.height,k):d.rect(e,t,v.width,v.height,0,k[bt]),g.isImg||g.attr("fill",mt),g.add(v)),g.isImg||g.attr(It({width:B(v.width),height:B(v.height)},k)),k=null)}function h(){var e=v.styles,e=e&&e.textAlign,t=E+w*(1-b),n;n=a?0:L,f(S)&&y&&(e==="center"||e==="right")&&(t+={center:.5,right:1}[e]*(S-y.width));if(t!==m.x||n!==m.y)m.attr("x",t),n!==_&&m.attr("y",n);m.x=t,m.y=n}function p(e,t){g?g.attr(e,t):k[e]=t}var d=this,v=d.g(l),m=d.text("",0,0,u).attr({zIndex:1}),g,y,b=0,w=3,E=0,S,x,T,N,C=0,k={},L,O;v.onAdd=function(){m.add(v),v.attr({text:t||t===0?t:"",x:n,y:r}),g&&f(s)&&v.attr({anchorX:s,anchorY:o})},v.widthSetter=function(e){S=e},v.heightSetter=function(e){x=e},v.paddingSetter=function(e){f(e)&&e!==w&&(w=v.padding=e,h())},v.paddingLeftSetter=function(e){f(e)&&e!==E&&(E=e,h())},v.alignSetter=function(e){b={left:0,center:.5,right:1}[e]},v.textSetter=function(e){e!==_&&m.textSetter(e),c(),h()},v["stroke-widthSetter"]=function(e,t){e&&(O=!0),C=e%2/2,p(t,e)},v.strokeSetter=v.fillSetter=v.rSetter=function(e,t){t==="fill"&&e&&(O=!0),p(t,e)},v.anchorXSetter=function(e,t){s=e,p(t,B(e)-C-T)},v.anchorYSetter=function(e,t){o=e,p(t,e-N)},v.xSetter=function(e){v.x=e,b&&(e-=b*((S||y.width)+w)),T=B(e),v.attr("translateX",T)},v.ySetter=function(e){N=v.y=B(e),v.attr("translateY",N)};var M=v.css;return It(v,{css:function(t){if(t){var n={},t=e(t);$t(v.textProps,function(e){t[e]!==_&&(n[e]=t[e],delete t[e])}),m.css(n)}return M.call(v,t)},getBBox:function(){return{width:y.width+2*w,height:y.height+2*w,x:y.x-w,y:y.y-w}},shadow:function(e){return g&&g.shadow(e),v},destroy:function(){Yt(v.element,"mouseenter"),Yt(v.element,"mouseleave"),m&&(m=m.destroy()),g&&(g=g.destroy()),A.prototype.destroy.call(v),v=d=c=h=p=null}})}},rt=fn,It(A.prototype,{htmlCss:function(e){var t=this.element;if(t=e&&t.tagName==="SPAN"&&e.width)delete e.width,this.textWidth=t,this.updateTransform();return e&&e.textOverflow==="ellipsis"&&(e.whiteSpace="nowrap",e.overflow="hidden"),this.styles=It(this.styles,e),h(this.element,e),this},htmlGetBBox:function(){var e=this.element;return e.nodeName==="text"&&(e.style.position="absolute"),{x:e.offsetLeft,y:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}},htmlUpdateTransform:function(){if(this.added){var e=this.renderer,n=this.element,r=this.translateX||0,i=this.translateY||0,s=this.x||0,o=this.y||0,u=this.textAlign||"left",a={left:0,center:.5,right:1}[u],l=this.shadows,c=this.styles;h(n,{marginLeft:r,marginTop:i}),l&&$t(l,function(e){h(e,{marginLeft:r+1,marginTop:i+1})}),this.inverted&&$t(n.childNodes,function(t){e.invertChild(t,n)});if(n.tagName==="SPAN"){var p=this.rotation,d,v=t(this.textWidth),m=[p,u,n.innerHTML,this.textWidth,this.textAlign].join(",");m!==this.cTT&&(d=e.fontMetrics(n.style.fontSize).b,f(p)&&this.setSpanRotation(p,a,d),l=qt(this.elemWidth,n.offsetWidth),l>v&&/[ \-]/.test(n.textContent||n.innerText)&&(h(n,{width:v+"px",display:"block",whiteSpace:c&&c.whiteSpace||"normal"}),l=v),this.getSpanCorrection(l,d,a,p,u)),h(n,{left:s+(this.xCorr||0)+"px",top:o+(this.yCorr||0)+"px"}),Q&&(d=n.offsetHeight),this.cTT=m}}else this.alignOnAdd=!0},setSpanRotation:function(e,t,n){var r={},i=J?"-ms-transform":Q?"-webkit-transform":G?"MozTransform":$?"-o-transform":"";r[i]=r.transform="rotate("+e+"deg)",r[i+(G?"Origin":"-origin")]=r.transformOrigin=t*100+"% "+n+"px",h(this.element,r)},getSpanCorrection:function(e,t,n){this.xCorr=-e*n,this.yCorr=-t}}),It(fn.prototype,{html:function(e,t,n){var r=this.createElement("span"),i=r.element,s=r.renderer;return r.textSetter=function(e){e!==i.innerHTML&&delete this.bBox,i.innerHTML=this.textStr=e,r.htmlUpdateTransform()},r.xSetter=r.ySetter=r.alignSetter=r.rotationSetter=function(e,t){t==="align"&&(t="textAlign"),r[t]=e,r.htmlUpdateTransform()},r.attr({text:e,x:B(t),y:B(n)}).css({position:"absolute",fontFamily:this.style.fontFamily,fontSize:this.style.fontSize}),i.style.whiteSpace="nowrap",r.css=r.htmlCss,s.isSVG&&(r.add=function(e){var t,n=s.box.parentNode,o=[];if(this.parentGroup=e){if(t=e.div,!t){for(;e;)o.push(e),e=e.parentGroup;$t(o.reverse(),function(e){var r,i=l(e.element,"class");i&&(i={className:i}),t=e.div=e.div||p(vt,i,{position:"absolute",left:(e.translateX||0)+"px",top:(e.translateY||0)+"px"},t||n),r=t.style,It(e,{translateXSetter:function(t,n){r.left=t+"px",e[n]=t,e.doTransform=!0},translateYSetter:function(t,n){r.top=t+"px",e[n]=t,e.doTransform=!0}}),Rt(e,"visibilitySetter",function(e,t,n,i){e.call(this,t,n,i),r[n]=t})})}}else t=n;return t.appendChild(i),r.added=!0,r.alignOnAdd&&r.htmlUpdateTransform(),r}),r}});if(!et&&!nt){zt={init:function(e,t){var n=["<",t,' filled="f" stroked="f"'],r=["position: ","absolute",";"],i=t===vt;(t==="shape"||i)&&r.push("left:0;top:0;width:1px;height:1px;"),r.push("visibility: ",i?"hidden":"visible"),n.push(' style="',r.join(""),'"/>'),t&&(n=i||t==="span"||t==="img"?n.join(""):e.prepVML(n),this.element=p(n)),this.renderer=e},add:function(e){var t=this.renderer,n=this.element,r=t.box,r=e?e.element||e:r;return e&&e.inverted&&t.invertChild(n,r),r.appendChild(n),this.added=!0,this.alignOnAdd&&!this.deferUpdateTransform&&this.updateTransform(),this.onAdd&&this.onAdd(),this},updateTransform:A.prototype.htmlUpdateTransform,setSpanRotation:function(){var e=this.rotation,t=U(e*X),n=z(e*X);h(this.element,{filter:e?["progid:DXImageTransform.Microsoft.Matrix(M11=",t,", M12=",-n,", M21=",n,", M22=",t,", sizingMethod='auto expand')"].join(""):mt})},getSpanCorrection:function(e,t,n,r,i){var s=r?U(r*X):1,o=r?z(r*X):0,u=qt(this.elemHeight,this.element.offsetHeight),a;this.xCorr=s<0&&-e,this.yCorr=o<0&&-u,a=s*o<0,this.xCorr+=o*t*(a?1-n:n),this.yCorr-=s*t*(r?a?n:1-n:1),i&&i!=="left"&&(this.xCorr-=e*n*(s<0?-1:1),r&&(this.yCorr-=u*n*(o<0?-1:1)),h(this.element,{textAlign:i}))},pathToVML:function(e){for(var t=e.length,n=[];t--;)if(s(e[t]))n[t]=B(e[t]*10)-5;else if(e[t]==="Z")n[t]="x";else if(n[t]=e[t],e.isArc&&(e[t]==="wa"||e[t]==="at"))n[t+5]===n[t+7]&&(n[t+7]+=e[t+7]>e[t+5]?1:-1),n[t+6]===n[t+8]&&(n[t+8]+=e[t+8]>e[t+6]?1:-1);return n.join(" ")||"x"},clip:function(e){var t=this,n;return e?(n=e.members,a(n,t),n.push(t),t.destroyClip=function(){a(n,t)},e=e.getCSS(t)):(t.destroyClip&&t.destroyClip(),e={clip:K?"inherit":"rect(auto)"}),t.css(e)},css:A.prototype.htmlCss,safeRemoveChild:function(e){e.parentNode&&T(e)},destroy:function(){return this.destroyClip&&this.destroyClip(),A.prototype.destroy.apply(this)},on:function(e,t){return this.element["on"+e]=function(){var e=P.event;e.target=e.srcElement,t(e)},this},cutOffPath:function(e,n){var r,e=e.split(/[ ,]/);r=e.length;if(r===9||r===11)e[r-4]=e[r-2]=t(e[r-2])-10*n;return e.join(" ")},shadow:function(e,n,r){var i=[],s,o=this.element,u=this.renderer,a,f=o.style,l,c=o.path,h,d,v,m;c&&typeof c.value!="string"&&(c="x"),d=c;if(e){v=qt(e.width,3),m=(e.opacity||.15)/v;for(s=1;s<=3;s++)h=v*2+1-2*s,r&&(d=this.cutOffPath(c.value,h+.5)),l=['<shape isShadow="true" strokeweight="',h,'" filled="false" path="',d,'" coordsize="10 10" style="',o.style.cssText,'" />'],a=p(u.prepVML(l),null,{left:t(f.left)+qt(e.offsetX,1),top:t(f.top)+qt(e.offsetY,1)}),r&&(a.cutOff=h+1),l=['<stroke color="',e.color||"black",'" opacity="',m*s,'"/>'],p(u.prepVML(l),null,null,a),n?n.element.appendChild(a):o.parentNode.insertBefore(a,o),i.push(a);this.shadows=i}return this},updateShadows:ht,setAttr:function(e,t){K?this.element[e]=t:this.element.setAttribute(e,t)},classSetter:function(e){this.element.className=e},dashstyleSetter:function(e,t,n){(n.getElementsByTagName("stroke")[0]||p(this.renderer.prepVML(["<stroke/>"]),null,null,n))[t]=e||"solid",this[t]=e},dSetter:function(e,t,n){var r=this.shadows,e=e||[];this.d=e.join&&e.join(" "),n.path=e=this.pathToVML(e);if(r)for(n=r.length;n--;)r[n].path=r[n].cutOff?this.cutOffPath(e,r[n].cutOff):e;this.setAttr(t,e)},fillSetter:function(e,t,n){var r=n.nodeName;r==="SPAN"?n.style.color=e:r!=="IMG"&&(n.filled=e!==mt,this.setAttr("fillcolor",this.renderer.color(e,n,t,this)))},opacitySetter:ht,rotationSetter:function(e,t,n){n=n.style,this[t]=n[t]=e,n.left=-B(z(e*X)+1)+"px",n.top=B(U(e*X))+"px"},strokeSetter:function(e,t,n){this.setAttr("strokecolor",this.renderer.color(e,n,t))},"stroke-widthSetter":function(e,t,n){n.stroked=!!e,this[t]=e,s(e)&&(e+="px"),this.setAttr("strokeweight",e)},titleSetter:function(e,t){this.setAttr(t,e)},visibilitySetter:function(e,t,n){e==="inherit"&&(e="visible"),this.shadows&&$t(this.shadows,function(n){n.style[t]=e}),n.nodeName==="DIV"&&(e=e==="hidden"?"-999em":0,K||(n.style[t]=e?"visible":"hidden"),t="top"),n.style[t]=e},xSetter:function(e,t,n){this[t]=e,t==="x"?t="left":t==="y"&&(t="top"),this.updateClipping?(this[t]=e,this.updateClipping()):n.style[t]=e},zIndexSetter:function(e,t,n){n.style[t]=e}},Ft.VMLElement=zt=d(A,zt),zt.prototype.ySetter=zt.prototype.widthSetter=zt.prototype.heightSetter=zt.prototype.xSetter;var ln={Element:zt,isIE8:V.indexOf("MSIE 8.0")>-1,init:function(e,t,n,r){var i;this.alignedObjects=[],r=this.createElement(vt).css(It(this.getStyle(r),{position:"relative"})),i=r.element,e.appendChild(r.element),this.isVML=!0,this.box=i,this.boxWrapper=r,this.cache={},this.setSize(t,n,!1);if(!D.namespaces.hcv){D.namespaces.add("hcv","urn:schemas-microsoft-com:vml");try{D.createStyleSheet().cssText="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}catch(s){D.styleSheets[0].cssText+="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}}},isHidden:function(){return!this.box.offsetWidth},clipRect:function(e,t,n,i){var s=this.createElement(),o=r(e);return It(s,{members:[],count:0,left:(o?e.x:e)+1,top:(o?e.y:t)+1,width:(o?e.width:n)-1,height:(o?e.height:i)-1,getCSS:function(e){var t=e.element,n=t.nodeName,e=e.inverted,r=this.top-(n==="shape"?t.offsetTop:0),i=this.left,t=i+this.width,s=r+this.height,r={clip:"rect("+B(e?i:r)+"px,"+B(e?s:t)+"px,"+B(e?t:s)+"px,"+B(e?r:i)+"px)"};return!e&&K&&n==="DIV"&&It(r,{width:t+"px",height:s+"px"}),r},updateClipping:function(){$t(s.members,function(e){e.element&&e.css(s.getCSS(e))})}})},color:function(e,t,n,r){var i=this,s,o=/^rgba/,u,a,f=mt;e&&e.linearGradient?a="gradient":e&&e.radialGradient&&(a="pattern");if(a){var l,c,h=e.linearGradient||e.radialGradient,d,v,m,g,y,b="",e=e.stops,w,E=[],S=function(){u=['<fill colors="'+E.join(",")+'" opacity="',m,'" o:opacity2="',v,'" type="',a,'" ',b,'focus="100%" method="any" />'],p(i.prepVML(u),null,null,t)};d=e[0],w=e[e.length-1],d[0]>0&&e.unshift([0,d[1]]),w[0]<1&&e.push([1,w[1]]),$t(e,function(e,t){o.test(e[1])?(s=an(e[1]),l=s.get("rgb"),c=s.get("a")):(l=e[1],c=1),E.push(e[0]*100+"% "+l),t?(m=c,g=l):(v=c,y=l)});if(n==="fill")if(a==="gradient")n=h.x1||h[0]||0,e=h.y1||h[1]||0,d=h.x2||h[2]||0,h=h.y2||h[3]||0,b='angle="'+(90-H.atan((h-e)/(d-n))*180/W)+'"',S();else{var f=h.r,x=f*2,T=f*2,N=h.cx,C=h.cy,k=t.radialReference,L,f=function(){k&&(L=r.getBBox(),N+=(k[0]-L.x)/L.width-.5,C+=(k[1]-L.y)/L.height-.5,x*=k[2]/L.width,T*=k[2]/L.height),b='src="'+at.global.VMLRadialGradientURL+'" size="'+x+","+T+'" origin="0.5,0.5" position="'+N+","+C+'" color2="'+y+'" ',S()};r.added?f():r.onAdd=f,f=g}else f=l}else o.test(e)&&t.tagName!=="IMG"?(s=an(e),u=["<",n,' opacity="',s.get("a"),'"/>'],p(this.prepVML(u),null,null,t),f=s.get("rgb")):(f=t.getElementsByTagName(n),f.length&&(f[0].opacity=1,f[0].type="solid"),f=e);return f},prepVML:function(e){var t=this.isIE8,e=e.join("");return t?(e=e.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),e=e.indexOf('style="')===-1?e.replace("/>",' style="display:inline-block;behavior:url(#default#VML);" />'):e.replace('style="','style="display:inline-block;behavior:url(#default#VML);')):e=e.replace("<","<hcv:"),e},text:fn.prototype.html,path:function(e){var t={coordsize:"10 10"};return i(e)?t.d=e:r(e)&&It(t,e),this.createElement("shape").attr(t)},circle:function(e,t,n){var i=this.symbol("circle");return r(e)&&(n=e.r,t=e.y,e=e.x),i.isCircle=!0,i.r=n,i.attr({x:e,y:t})},g:function(e){var t;return e&&(t={className:"highcharts-"+e,"class":"highcharts-"+e}),this.createElement(vt).attr(t)},image:function(e,t,n,r,i){var s=this.createElement("img").attr({src:e});return arguments.length>1&&s.attr({x:t,y:n,width:r,height:i}),s},createElement:function(e){return e==="rect"?this.symbol(e):fn.prototype.createElement.call(this,e)},invertChild:function(e,n){var r=this,i=n.style,s=e.tagName==="IMG"&&e.style;h(e,{flip:"x",left:t(i.width)-(s?t(s.top):1),top:t(i.height)-(s?t(s.left):1),rotation:-90}),$t(e.childNodes,function(t){r.invertChild(t,e)})},symbols:{arc:function(e,t,n,r,i){var s=i.start,o=i.end,u=i.r||n||r,n=i.innerR,r=U(s),a=z(s),f=U(o),l=z(o);return o-s===0?["x"]:(s=["wa",e-u,t-u,e+u,t+u,e+u*r,t+u*a,e+u*f,t+u*l],i.open&&!n&&s.push("e","M",e,t),s.push("at",e-n,t-n,e+n,t+n,e+n*f,t+n*l,e+n*r,t+n*a,"x","e"),s.isArc=!0,s)},circle:function(e,t,n,r,i){return i&&(n=r=2*i.r),i&&i.isCircle&&(e-=n/2,t-=r/2),["wa",e,t,e+n,t+r,e+n,t+r/2,e+n,t+r/2,"e"]},rect:function(e,t,n,r,i){return fn.prototype.symbols[!f(i)||!i.r?"square":"callout"].call(0,e,t,n,r,i)}}};Ft.VMLRenderer=zt=function(){this.init.apply(this,arguments)},zt.prototype=e(fn.prototype,ln),rt=zt}fn.prototype.measureSpanWidth=function(e,t){var n=D.createElement("span"),r;return r=D.createTextNode(e),n.appendChild(r),h(n,t),this.box.appendChild(n),r=n.offsetWidth,T(n),r};var cn;nt&&(Ft.CanVGRenderer=zt=function(){Z="http://www.w3.org/1999/xhtml"},zt.prototype.symbols={},cn=function(){function e(){var e=t.length,n;for(n=0;n<e;n++)t[n]();t=[]}var t=[];return{push:function(n,r){t.length===0&&Xt(r,e),t.push(n)}}}(),rt=zt),O.prototype={addLabel:function(){var t=this.axis,n=t.options,r=t.chart,i=t.categories,s=t.names,o=this.pos,a=n.labels,l=t.tickPositions,c=o===l[0],h=o===l[l.length-1],s=i?qt(i[o],s[o],o):o,i=this.label,l=l.info,p;t.isDatetimeAxis&&l&&(p=n.dateTimeLabelFormats[l.higherRanks[o]||l.unitName]),this.isFirst=c,this.isLast=h,n=t.labelFormatter.call({axis:t,chart:r,isFirst:c,isLast:h,dateTimeLabelFormat:p,value:t.isLog?C(u(s)):s}),f(i)?i&&i.attr({text:n}):(this.labelLength=(this.label=i=f(n)&&a.enabled?r.renderer.text(n,0,0,a.useHTML).css(e(a.style)).add(t.labelGroup):null)&&i.getBBox().width,this.rotation=0)},getLabelSize:function(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0},handleOverflow:function(e){var t=this.axis,n=e.x,r=t.chart.chartWidth,i=t.chart.spacing,s=qt(t.labelLeft,q(t.pos,i[3])),i=qt(t.labelRight,I(t.pos+t.len,r-i[1])),o=this.label,u=this.rotation,a={left:0,center:.5,right:1}[t.labelAlign],f=o.getBBox().width,l=t.slotWidth,c=1,h,p={};if(u)u<0&&n-a*f<s?h=B(n/U(u*X)-s):u>0&&n+a*f>i&&(h=B((r-n)/U(u*X)));else if(r=n+(1-a)*f,n-a*f<s?l=e.x+l*(1-a)-s:r>i&&(l=i-e.x+l*a,c=-1),l=q(t.slotWidth,l),l<t.slotWidth&&t.labelAlign==="center"&&(e.x+=c*(t.slotWidth-l-a*(t.slotWidth-q(f,l)))),f>l||t.autoRotation&&o.styles.width)h=l;h&&(p.width=h,t.options.labels.style.textOverflow||(p.textOverflow="ellipsis"),o.css(p))},getPosition:function(e,t,n,r){var i=this.axis,s=i.chart,o=r&&s.oldChartHeight||s.chartHeight;return{x:e?i.translate(t+n,null,null,r)+i.transB:i.left+i.offset+(i.opposite?(r&&s.oldChartWidth||s.chartWidth)-i.right-i.left:0),y:e?o-i.bottom+i.offset-(i.opposite?i.height:0):o-i.translate(t+n,null,null,r)-i.transB}},getLabelPosition:function(e,t,n,r,i,s,o,u){var a=this.axis,f=a.transA,l=a.reversed,c=a.staggerLines,h=a.tickRotCorr||{x:0,y:0},n=qt(i.y,h.y+(a.side===2?8:-(n.getBBox().height/2))),e=e+i.x+h.x-(s&&r?s*f*(l?-1:1):0),t=t+n-(s&&!r?s*f*(l?1:-1):0);return c&&(t+=o/(u||1)%c*(a.labelOffset/c)),{x:e,y:B(t)}},getMarkPath:function(e,t,n,r,i,s){return s.crispLine(["M",e,t,"L",e+(i?0:-n),t+(i?n:0)],r)},render:function(e,t,n){var r=this.axis,i=r.options,s=r.chart.renderer,o=r.horiz,u=this.type,a=this.label,f=this.pos,l=i.labels,c=this.gridLine,h=u?u+"Grid":"grid",p=u?u+"Tick":"tick",d=i[h+"LineWidth"],v=i[h+"LineColor"],m=i[h+"LineDashStyle"],g=i[p+"Length"],h=qt(i[p+"Width"],!u&&r.isXAxis?1:0),y=i[p+"Color"],b=i[p+"Position"],p=this.mark,w=l.step,E=!0,S=r.tickmarkOffset,x=this.getPosition(o,f,S,t),T=x.x,x=x.y,N=o&&T===r.pos+r.len||!o&&x===r.pos?-1:1,n=qt(n,1);this.isActive=!0,d&&(f=r.getPlotLinePath(f+S,d*N,t,!0),c===_&&(c={stroke:v,"stroke-width":d},m&&(c.dashstyle=m),u||(c.zIndex=1),t&&(c.opacity=0),this.gridLine=c=d?s.path(f).attr(c).add(r.gridGroup):null),!t&&c&&f&&c[this.isNew?"attr":"animate"]({d:f,opacity:n})),h&&g&&(b==="inside"&&(g=-g),r.opposite&&(g=-g),u=this.getMarkPath(T,x,g,h*N,o,s),p?p.animate({d:u,opacity:n}):this.mark=s.path(u).attr({stroke:y,"stroke-width":h,opacity:n}).add(r.axisGroup)),a&&!isNaN(T)&&(a.xy=x=this.getLabelPosition(T,x,a,o,l,S,e,w),this.isFirst&&!this.isLast&&!qt(i.showFirstLabel,1)||this.isLast&&!this.isFirst&&!qt(i.showLastLabel,1)?E=!1:o&&!r.isRadial&&!l.step&&!l.rotation&&!t&&n!==0&&this.handleOverflow(x),w&&e%w&&(E=!1),E&&!isNaN(x.y)?(x.opacity=n,a[this.isNew?"attr":"animate"](x),this.isNew=!1):a.attr("y",-9999))},destroy:function(){x(this,this.axis)}},Ft.PlotLineOrBand=function(e,t){this.axis=e,t&&(this.options=t,this.id=t.id)},Ft.PlotLineOrBand.prototype={render:function(){var t=this,n=t.axis,r=n.horiz,i=t.options,s=i.label,u=t.label,a=i.width,l=i.to,c=i.from,h=f(c)&&f(l),p=i.value,d=i.dashStyle,v=t.svgElem,m=[],g,y=i.color,b=i.zIndex,w=i.events,x={},T=n.chart.renderer;n.isLog&&(c=o(c),l=o(l),p=o(p));if(a){if(m=n.getPlotLinePath(p,a),x={stroke:y,"stroke-width":a},d)x.dashstyle=d}else{if(!h)return;m=n.getPlotBandPath(c,l,i),y&&(x.fill=y),i.borderWidth&&(x.stroke=i.borderColor,x["stroke-width"]=i.borderWidth)}f(b)&&(x.zIndex=b);if(v){if(m)v.animate({d:m},null,v.onGetPath);else if(v.hide(),v.onGetPath=function(){v.show()},u)t.label=u=u.destroy()}else if(m&&m.length&&(t.svgElem=v=T.path(m).attr(x).add(),w))for(g in i=function(e){v.on(e,function(n){w[e].apply(t,[n])})},w)i(g);return s&&f(s.text)&&m&&m.length&&n.width>0&&n.height>0?(s=e({align:r&&h&&"center",x:r?!h&&4:10,verticalAlign:!r&&h&&"middle",y:r?h?16:10:h?6:-4,rotation:r&&!h&&90},s),u||(x={align:s.textAlign||s.align,rotation:s.rotation},f(b)&&(x.zIndex=b),t.label=u=T.text(s.text,0,0,s.useHTML).attr(x).css(s.style).add()),n=[m[1],m[4],h?m[6]:m[1]],h=[m[2],m[5],h?m[7]:m[2]],m=E(n),r=E(h),u.align(s,!1,{x:m,y:r,width:S(n)-m,height:S(h)-r}),u.show()):u&&u.hide(),t},destroy:function(){a(this.axis.plotLinesAndBands,this),delete this.axis,x(this)}};var hn=Ft.Axis=function(){this.init.apply(this,arguments)};hn.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#D8D8D8",labels:{enabled:!0,style:{color:"#606060",cursor:"default",fontSize:"11px"},x:0,y:15},lineColor:"#C0D0E0",lineWidth:1,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:10,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",title:{align:"middle",style:{color:"#707070"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8,y:3},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return Ft.numberFormat(this.total,-1)},style:e(rn.line.dataLabels.style,{color:"#000000"})}},defaultLeftAxisOptions:{labels:{x:-15,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:15,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{autoRotation:[-45],x:0,y:null},title:{rotation:0}},defaultTopAxisOptions:{labels:{autoRotation:[-45],x:0,y:-15},title:{rotation:0}},init:function(e,t){var n=t.isX;this.chart=e,this.horiz=e.inverted?!n:n,this.coll=(this.isXAxis=n)?"xAxis":"yAxis",this.opposite=t.opposite,this.side=t.side||(this.horiz?this.opposite?0:2:this.opposite?1:3),this.setOptions(t);var r=this.options,i=r.type;this.labelFormatter=r.labels.formatter||this.defaultLabelFormatter,this.userOptions=t,this.minPixelPadding=0,this.reversed=r.reversed,this.zoomEnabled=r.zoomEnabled!==!1,this.categories=r.categories||i==="category",this.names=this.names||[],this.isLog=i==="logarithmic",this.isDatetimeAxis=i==="datetime",this.isLinked=f(r.linkedTo),this.ticks={},this.labelEdge=[],this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},this.len=0,this.minRange=this.userMinRange=r.minRange||r.maxZoom,this.range=r.range,this.offset=r.offset||0,this.stacks={},this.oldStacks={},this.stacksTouched=0,this.min=this.max=null,this.crosshair=qt(r.crosshair,c(e.options.tooltip.crosshairs)[n?0:1],!1);var s,r=this.options.events;Vt(this,e.axes)===-1&&(n&&!this.isColorAxis?e.axes.splice(e.xAxis.length,0,this):e.axes.push(this),e[this.coll].push(this)),this.series=this.series||[],e.inverted&&n&&this.reversed===_&&(this.reversed=!0),this.removePlotLine=this.removePlotBand=this.removePlotBandOrLine;for(s in r)Gt(this,s,r[s]);this.isLog&&(this.val2lin=o,this.lin2val=u)},setOptions:function(t){this.options=e(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],e(at[this.coll],t))},defaultLabelFormatter:function(){var e=this.axis,t=this.value,n=e.categories,r=this.dateTimeLabelFormat,i=at.lang.numericSymbols,s=i&&i.length,o,u=e.options.labels.format,e=e.isLog?t:e.tickInterval;if(u)o=g(u,this);else if(n)o=t;else if(r)o=ft(r,t);else if(s&&e>=1e3)for(;s--&&o===_;)n=Math.pow(1e3,s+1),e>=n&&t*10%n===0&&i[s]!==null&&(o=Ft.numberFormat(t/n,-1)+i[s]);return o===_&&(o=R(t)>=1e4?Ft.numberFormat(t,-1):Ft.numberFormat(t,-1,_,"")),o},getSeriesExtremes:function(){var e=this,t=e.chart;e.hasVisibleSeries=!1,e.dataMin=e.dataMax=e.ignoreMinPadding=e.ignoreMaxPadding=null,e.buildStacks&&e.buildStacks(),$t(e.series,function(n){if(n.visible||!t.options.chart.ignoreHiddenSeries){var r;r=n.options.threshold;var i;e.hasVisibleSeries=!0,e.isLog&&r<=0&&(r=null);if(e.isXAxis){if(r=n.xData,r.length)e.dataMin=q(qt(e.dataMin,r[0]),E(r)),e.dataMax=I(qt(e.dataMax,r[0]),S(r))}else n.getExtremes(),i=n.dataMax,n=n.dataMin,f(n)&&f(i)&&(e.dataMin=q(qt(e.dataMin,n),n),e.dataMax=I(qt(e.dataMax,i),i)),f(r)&&(e.dataMin>=r?(e.dataMin=r,e.ignoreMinPadding=!0):e.dataMax<r&&(e.dataMax=r,e.ignoreMaxPadding=!0))}})},translate:function(e,t,n,r,i,o){var u=this.linkedParent||this,a=1,f=0,l=r?u.oldTransA:u.transA,r=r?u.oldMin:u.min,c=u.minPixelPadding,i=(u.doPostTranslate||u.isLog&&i)&&u.lin2val;return l||(l=u.transA),n&&(a*=-1,f=u.len),u.reversed&&(a*=-1,f-=a*(u.sector||u.len)),t?(e=e*a+f,e-=c,e=e/l+r,i&&(e=u.lin2val(e))):(i&&(e=u.val2lin(e)),o==="between"&&(o=.5),e=a*(e-r)*l+f+a*c+(s(o)?l*o*u.pointRange:0)),e},toPixels:function(e,t){return this.translate(e,!1,!this.horiz,null,!0)+(t?0:this.pos)},toValue:function(e,t){return this.translate(e-(t?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(e,t,n,r,i){var s=this.chart,o=this.left,u=this.top,a,f,l=n&&s.oldChartHeight||s.chartHeight,c=n&&s.oldChartWidth||s.chartWidth,h;a=this.transB;var p=function(e,t,n){if(e<t||e>n)r?e=q(I(t,e),n):h=!0;return e},i=qt(i,this.translate(e,null,null,n)),e=n=B(i+a);return a=f=B(l-i-a),isNaN(
i)?h=!0:this.horiz?(a=u,f=l-this.bottom,e=n=p(e,o,o+this.width)):(e=o,n=c-this.right,a=f=p(a,u,u+this.height)),h&&!r?null:s.renderer.crispLine(["M",e,a,"L",n,f],t||1)},getLinearTickPositions:function(e,t,n){var r,i=C(j(t/e)*e),o=C(F(n/e)*e),u=[];if(t===n&&s(t))return[t];for(t=i;t<=o;){u.push(t),t=C(t+e);if(t===r)break;r=t}return u},getMinorTickPositions:function(){var e=this.options,t=this.tickPositions,n=this.minorTickInterval,r=[],i,s=this.pointRangePadding||0;i=this.min-s;var s=this.max+s,o=s-i;if(o&&o/n<this.len/3)if(this.isLog){s=t.length;for(i=1;i<s;i++)r=r.concat(this.getLogTickPositions(n,t[i-1],t[i],!0))}else if(this.isDatetimeAxis&&e.minorTickInterval==="auto")r=r.concat(this.getTimeTicks(this.normalizeTimeTickInterval(n),i,s,e.startOfWeek));else for(t=i+(t[0]-i)%n;t<=s;t+=n)r.push(t);return r.length!==0&&this.trimTicks(r,e.startOnTick,e.endOnTick),r},adjustForMinRange:function(){var e=this.options,t=this.min,n=this.max,r,i=this.dataMax-this.dataMin>=this.minRange,s,o,u,a,l;this.isXAxis&&this.minRange===_&&!this.isLog&&(f(e.min)||f(e.max)?this.minRange=null:($t(this.series,function(e){a=e.xData;for(o=l=e.xIncrement?1:a.length-1;o>0;o--)if(u=a[o]-a[o-1],s===_||u<s)s=u}),this.minRange=q(s*5,this.dataMax-this.dataMin)));if(n-t<this.minRange){var c=this.minRange;r=(c-n+t)/2,r=[t-r,qt(e.min,t-r)],i&&(r[2]=this.dataMin),t=S(r),n=[t+c,qt(e.max,t+c)],i&&(n[2]=this.dataMax),n=E(n),n-t<c&&(r[0]=n-c,r[1]=qt(e.min,n-c),t=S(r))}this.min=t,this.max=n},setAxisTranslation:function(e){var t=this,r=t.max-t.min,i=t.axisPointRange||0,s,o=0,u=0,a=t.linkedParent,l=!!t.categories,c=t.transA,h=t.isXAxis;if(h||l||i)if(a?(o=a.minPointOffset,u=a.pointRangePadding):$t(t.series,function(e){var a=l?1:h?e.pointRange:t.axisPointRange||0,c=e.options.pointPlacement,p=e.closestPointRange;a>r&&(a=0),i=I(i,a),t.single||(o=I(o,n(c)?0:a/2),u=I(u,c==="on"?0:a)),!e.noSharedTooltip&&f(p)&&(s=f(s)?q(s,p):p)}),a=t.ordinalSlope&&s?t.ordinalSlope/s:1,t.minPointOffset=o*=a,t.pointRangePadding=u*=a,t.pointRange=q(i,r),h)t.closestPointRange=s;e&&(t.oldTransA=c),t.translationSlope=t.transA=c=t.len/(r+u||1),t.transB=t.horiz?t.left:t.bottom,t.minPixelPadding=c*o},minFromRange:function(){return this.max-this.range},setTickInterval:function(e){var t=this,n=t.chart,r=t.options,i=t.isLog,u=t.isDatetimeAxis,a=t.isXAxis,l=t.isLinked,c=r.maxPadding,h=r.minPadding,p=r.tickInterval,d=r.tickPixelInterval,v=t.categories;!u&&!v&&!l&&this.getTickAmount(),l?(t.linkedParent=n[t.coll][r.linkedTo],n=t.linkedParent.getExtremes(),t.min=qt(n.min,n.dataMin),t.max=qt(n.max,n.dataMax),r.type!==t.linkedParent.options.type&&N(11,1)):(t.min=qt(t.userMin,r.min,t.dataMin),t.max=qt(t.userMax,r.max,t.dataMax)),i&&(!e&&q(t.min,qt(t.dataMin,t.min))<=0&&N(10,1),t.min=C(o(t.min),15),t.max=C(o(t.max),15)),t.range&&f(t.max)&&(t.userMin=t.min=I(t.min,t.minFromRange()),t.userMax=t.max,t.range=null),t.beforePadding&&t.beforePadding(),t.adjustForMinRange(),!v&&!t.axisPointRange&&!t.usePercentage&&!l&&f(t.min)&&f(t.max)&&(n=t.max-t.min)&&(!f(r.min)&&!f(t.userMin)&&h&&(t.dataMin<0||!t.ignoreMinPadding)&&(t.min-=n*h),!f(r.max)&&!f(t.userMax)&&c&&(t.dataMax>0||!t.ignoreMaxPadding)&&(t.max+=n*c)),s(r.floor)&&(t.min=I(t.min,r.floor)),s(r.ceiling)&&(t.max=q(t.max,r.ceiling)),t.tickInterval=t.min===t.max||t.min===void 0||t.max===void 0?1:l&&!p&&d===t.linkedParent.options.tickPixelInterval?p=t.linkedParent.tickInterval:qt(p,this.tickAmount?(t.max-t.min)/I(this.tickAmount-1,1):void 0,v?1:(t.max-t.min)*d/I(t.len,d)),a&&!e&&$t(t.series,function(e){e.processData(t.min!==t.oldMin||t.max!==t.oldMax)}),t.setAxisTranslation(!0),t.beforeSetTickPositions&&t.beforeSetTickPositions(),t.postProcessTickInterval&&(t.tickInterval=t.postProcessTickInterval(t.tickInterval)),t.pointRange&&(t.tickInterval=I(t.pointRange,t.tickInterval)),e=qt(r.minTickInterval,t.isDatetimeAxis&&t.closestPointRange),!p&&t.tickInterval<e&&(t.tickInterval=e),!u&&!i&&!p&&(t.tickInterval=b(t.tickInterval,null,y(t.tickInterval),qt(r.allowDecimals,!(t.tickInterval>.5&&t.tickInterval<5&&t.max>1e3&&t.max<9999)),!!this.tickAmount)),!this.tickAmount&&this.len&&(t.tickInterval=t.unsquish()),this.setTickPositions()},setTickPositions:function(){var e=this.options,t,n=e.tickPositions,r=e.tickPositioner,i=e.startOnTick,s=e.endOnTick,o;this.tickmarkOffset=this.categories&&e.tickmarkPlacement==="between"&&this.tickInterval===1?.5:0,this.minorTickInterval=e.minorTickInterval==="auto"&&this.tickInterval?this.tickInterval/5:e.minorTickInterval,this.tickPositions=t=n&&n.slice(),!t&&(t=this.isDatetimeAxis?this.getTimeTicks(this.normalizeTimeTickInterval(this.tickInterval,e.units),this.min,this.max,e.startOfWeek,this.ordinalPositions,this.closestPointRange,!0):this.isLog?this.getLogTickPositions(this.tickInterval,this.min,this.max):this.getLinearTickPositions(this.tickInterval,this.min,this.max),t.length>this.len&&(t=[t[0],t.pop()]),this.tickPositions=t,r&&(r=r.apply(this,[this.min,this.max])))&&(this.tickPositions=t=r),this.isLinked||(this.trimTicks(t,i,s),this.min===this.max&&f(this.min)&&!this.tickAmount&&(o=!0,this.min-=.5,this.max+=.5),this.single=o,!n&&!r&&this.adjustTickAmount())},trimTicks:function(e,t,n){var r=e[0],i=e[e.length-1],s=this.minPointOffset||0;t?this.min=r:this.min-s>r&&e.shift(),n?this.max=i:this.max+s<i&&e.pop(),e.length===0&&f(r)&&e.push((i+r)/2)},getTickAmount:function(){var e={},t,n=this.options,r=n.tickAmount,i=n.tickPixelInterval;!f(n.tickInterval)&&this.len<i&&!this.isRadial&&!this.isLog&&n.startOnTick&&n.endOnTick&&(r=2),!r&&this.chart.options.chart.alignTicks!==!1&&n.alignTicks!==!1&&($t(this.chart[this.coll],function(n){var r=n.options,i=n.horiz,r=[i?r.left:r.top,i?r.width:r.height,r.pane].join(",");e[r]?n.series.length&&(t=!0):e[r]=1}),t&&(r=F(this.len/i)+1)),r<4&&(this.finalTickAmt=r,r=5),this.tickAmount=r},adjustTickAmount:function(){var e=this.tickInterval,t=this.tickPositions,n=this.tickAmount,r=this.finalTickAmt,i=t&&t.length;if(i<n){for(;t.length<n;)t.push(C(t[t.length-1]+e));this.transA*=(i-1)/(n-1),this.max=t[t.length-1]}else i>n&&(this.tickInterval*=2,this.setTickPositions());if(f(r)){for(e=n=t.length;e--;)(r===3&&e%2===1||r<=2&&e>0&&e<n-1)&&t.splice(e,1);this.finalTickAmt=_}},setScale:function(){var e,t;this.oldMin=this.min,this.oldMax=this.max,this.oldAxisLength=this.len,this.setAxisSize(),t=this.len!==this.oldAxisLength,$t(this.series,function(t){if(t.isDirtyData||t.isDirty||t.xAxis.isDirty)e=!0});if(t||e||this.isLinked||this.forceRedraw||this.userMin!==this.oldUserMin||this.userMax!==this.oldUserMax){if(this.resetStacks&&this.resetStacks(),this.forceRedraw=!1,this.getSeriesExtremes(),this.setTickInterval(),this.oldUserMin=this.userMin,this.oldUserMax=this.userMax,!this.isDirty)this.isDirty=t||this.min!==this.oldMin||this.max!==this.oldMax}else this.cleanStacks&&this.cleanStacks()},setExtremes:function(e,t,n,r,i){var s=this,o=s.chart,n=qt(n,!0);$t(s.series,function(e){delete e.kdTree}),i=It(i,{min:e,max:t}),Zt(s,"setExtremes",i,function(){s.userMin=e,s.userMax=t,s.eventArgs=i,n&&o.redraw(r)})},zoom:function(e,t){var n=this.dataMin,r=this.dataMax,i=this.options,s=q(n,qt(i.min,n)),i=I(r,qt(i.max,r));return this.allowZoomOutside||(f(n)&&e<=s&&(e=s),f(r)&&t>=i&&(t=i)),this.displayBtn=e!==_||t!==_,this.setExtremes(e,t,!1,_,{trigger:"zoom"}),!0},setAxisSize:function(){var e=this.chart,t=this.options,n=t.offsetLeft||0,r=this.horiz,i=qt(t.width,e.plotWidth-n+(t.offsetRight||0)),s=qt(t.height,e.plotHeight),o=qt(t.top,e.plotTop),t=qt(t.left,e.plotLeft+n),n=/%$/;n.test(s)&&(s=parseFloat(s)/100*e.plotHeight),n.test(o)&&(o=parseFloat(o)/100*e.plotHeight+e.plotTop),this.left=t,this.top=o,this.width=i,this.height=s,this.bottom=e.chartHeight-s-o,this.right=e.chartWidth-i-t,this.len=I(r?i:s,0),this.pos=r?t:o},getExtremes:function(){var e=this.isLog;return{min:e?C(u(this.min)):this.min,max:e?C(u(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}},getThreshold:function(e){var t=this.isLog,n=t?u(this.min):this.min,t=t?u(this.max):this.max;return e===null?e=t<0?t:n:n>e?e=n:t<e&&(e=t),this.translate(e,0,1,0,1)},autoLabelAlign:function(e){return e=(qt(e,0)-this.side*90+720)%360,e>15&&e<165?"right":e>195&&e<345?"left":"center"},unsquish:function(){var e=this.ticks,t=this.options.labels,n=this.horiz,r=this.tickInterval,i=r,s=this.len/(((this.categories?1:0)+this.max-this.min)/r),o,u=t.rotation,a=this.chart.renderer.fontMetrics(t.style.fontSize,e[0]&&e[0].label),l,c=Number.MAX_VALUE,h,p=function(e){return e/=s||1,e=e>1?F(e):1,e*r};return n?(h=f(u)?[u]:s<qt(t.autoRotationLimit,80)&&!t.staggerLines&&!t.step&&t.autoRotation)&&$t(h,function(e){var t;if(e===u||e&&e>=-90&&e<=90)l=p(R(a.h/z(X*e))),t=l+R(e/360),t<c&&(c=t,o=e,i=l)}):t.step||(i=p(a.h)),this.autoRotation=h,this.labelRotation=o,i},renderUnsquish:function(){var t=this.chart,r=t.renderer,i=this.tickPositions,s=this.ticks,o=this.options.labels,u=this.horiz,a=t.margin,f=this.categories?i.length:i.length-1,l=this.slotWidth=u&&!o.step&&!o.rotation&&(this.staggerLines||1)*t.plotWidth/f||!u&&(a[3]&&a[3]-t.spacing[3]||t.chartWidth*.33),c=I(1,B(l-2*(o.padding||5))),h={},a=r.fontMetrics(o.style.fontSize,s[0]&&s[0].label),f=o.style.textOverflow,p,d=0;n(o.rotation)||(h.rotation=o.rotation||0);if(this.autoRotation)$t(i,function(e){(e=s[e])&&e.labelLength>d&&(d=e.labelLength)}),d>c&&d>a.h?h.rotation=this.labelRotation:this.labelRotation=0;else if(l&&(p={width:c+"px"},!f)){p.textOverflow="clip";for(l=i.length;!u&&l--;)if(c=i[l],c=s[c].label)if(c.styles.textOverflow==="ellipsis"&&c.css({textOverflow:"clip"}),c.getBBox().height>this.len/i.length-(a.h-a.f))c.specCss={textOverflow:"ellipsis"}}h.rotation&&(p={width:(d>t.chartHeight*.5?t.chartHeight*.33:t.chartHeight)+"px"},!f)&&(p.textOverflow="ellipsis"),this.labelAlign=h.align=o.align||this.autoLabelAlign(this.labelRotation),$t(i,function(t){var n=(t=s[t])&&t.label;n&&(p&&n.css(e(p,n.specCss)),delete n.specCss,n.attr(h),t.rotation=h.rotation)}),this.tickRotCorr=r.rotCorr(a.b,this.labelRotation||0,this.side===2)},hasData:function(){return this.hasVisibleSeries||f(this.min)&&f(this.max)&&!!this.tickPositions},getOffset:function(){var e=this,t=e.chart,n=t.renderer,r=e.options,i=e.tickPositions,s=e.ticks,o=e.horiz,u=e.side,a=t.inverted?[1,0,3,2][u]:u,l,c,h=0,p,d=0,v=r.title,m=r.labels,g=0,y=t.axisOffset,t=t.clipOffset,b=[-1,1,1,-1][u],w;l=e.hasData(),e.showAxis=c=l||qt(r.showEmpty,!0),e.staggerLines=e.horiz&&m.staggerLines,e.axisGroup||(e.gridGroup=n.g("grid").attr({zIndex:r.gridZIndex||1}).add(),e.axisGroup=n.g("axis").attr({zIndex:r.zIndex||2}).add(),e.labelGroup=n.g("axis-labels").attr({zIndex:m.zIndex||7}).addClass("highcharts-"+e.coll.toLowerCase()+"-labels").add());if(l||e.isLinked){if($t(i,function(t){s[t]?s[t].addLabel():s[t]=new O(e,t)}),e.renderUnsquish(),$t(i,function(t){if(u===0||u===2||{1:"left",3:"right"}[u]===e.labelAlign)g=I(s[t].getLabelSize(),g)}),e.staggerLines)g*=e.staggerLines,e.labelOffset=g}else for(w in s)s[w].destroy(),delete s[w];v&&v.text&&v.enabled!==!1&&(e.axisTitle||(e.axisTitle=n.text(v.text,0,0,v.useHTML).attr({zIndex:7,rotation:v.rotation||0,align:v.textAlign||{low:"left",middle:"center",high:"right"}[v.align]}).addClass("highcharts-"+this.coll.toLowerCase()+"-title").css(v.style).add(e.axisGroup),e.axisTitle.isNew=!0),c&&(h=e.axisTitle.getBBox()[o?"height":"width"],p=v.offset,d=f(p)?0:qt(v.margin,o?5:10)),e.axisTitle[c?"show":"hide"]()),e.offset=b*qt(r.offset,y[u]),e.tickRotCorr=e.tickRotCorr||{x:0,y:0},n=u===2?e.tickRotCorr.y:0,o=g+d+(g&&b*(o?qt(m.y,e.tickRotCorr.y+8):m.x)-n),e.axisTitleMargin=qt(p,o),y[u]=I(y[u],e.axisTitleMargin+h+b*e.offset,o),r=r.offset?0:j(r.lineWidth/2)*2,t[a]=I(t[a],r)},getLinePath:function(e){var t=this.chart,n=this.opposite,r=this.offset,i=this.horiz,s=this.left+(n?this.width:0)+r,r=t.chartHeight-this.bottom-(n?this.height:0)+r;return n&&(e*=-1),t.renderer.crispLine(["M",i?this.left:s,i?r:this.top,"L",i?t.chartWidth-this.right:s,i?r:t.chartHeight-this.bottom],e)},getTitlePosition:function(){var e=this.horiz,n=this.left,r=this.top,i=this.len,s=this.options.title,o=e?n:r,u=this.opposite,a=this.offset,f=s.x||0,l=s.y||0,c=t(s.style.fontSize||12),i={low:o+(e?0:i),middle:o+i/2,high:o+(e?i:0)}[s.align],n=(e?r+this.height:n)+(e?1:-1)*(u?-1:1)*this.axisTitleMargin+(this.side===2?c:0);return{x:e?i+f:n+(u?this.width:0)+a+f,y:e?n+l-(u?this.height:0)+a:i+l}},render:function(){var e=this,t=e.chart,n=t.renderer,r=e.options,i=e.isLog,s=e.isLinked,o=e.tickPositions,a=e.axisTitle,l=e.ticks,c=e.minorTicks,h=e.alternateBands,p=r.stackLabels,d=r.alternateGridColor,v=e.tickmarkOffset,m=r.lineWidth,g,y=t.hasRendered&&f(e.oldMin)&&!isNaN(e.oldMin),b=e.showAxis,w=n.globalAnimation,E,S;e.labelEdge.length=0,e.overlap=!1,$t([l,c,h],function(e){for(var t in e)e[t].isActive=!1});if(e.hasData()||s)e.minorTickInterval&&!e.categories&&$t(e.getMinorTickPositions(),function(t){c[t]||(c[t]=new O(e,t,"minor")),y&&c[t].isNew&&c[t].render(null,!0),c[t].render(null,!1,1)}),o.length&&($t(o,function(t,n){if(!s||t>=e.min&&t<=e.max)l[t]||(l[t]=new O(e,t)),y&&l[t].isNew&&l[t].render(n,!0,.1),l[t].render(n)}),v&&(e.min===0||e.single))&&(l[-1]||(l[-1]=new O(e,-1,null,!0)),l[-1].render(-1)),d&&$t(o,function(t,n){n%2===0&&t<e.max&&(h[t]||(h[t]=new Ft.PlotLineOrBand(e)),E=t+v,S=o[n+1]!==_?o[n+1]+v:e.max,h[t].options={from:i?u(E):E,to:i?u(S):S,color:d},h[t].render(),h[t].isActive=!0)}),e._addedPlotLB||($t((r.plotLines||[]).concat(r.plotBands||[]),function(t){e.addPlotBandOrLine(t)}),e._addedPlotLB=!0);$t([l,c,h],function(e){var n,r,i=[],s=w?w.duration||500:0,o=function(){for(r=i.length;r--;)e[i[r]]&&!e[i[r]].isActive&&(e[i[r]].destroy(),delete e[i[r]])};for(n in e)e[n].isActive||(e[n].render(n,!1,0),e[n].isActive=!1,i.push(n));e===h||!t.hasRendered||!s?o():s&&setTimeout(o,s)}),m&&(g=e.getLinePath(m),e.axisLine?e.axisLine.animate({d:g}):e.axisLine=n.path(g).attr({stroke:r.lineColor,"stroke-width":m,zIndex:7}).add(e.axisGroup),e.axisLine[b?"show":"hide"]()),a&&b&&(a[a.isNew?"attr":"animate"](e.getTitlePosition()),a.isNew=!1),p&&p.enabled&&e.renderStackTotals(),e.isDirty=!1},redraw:function(){this.render(),$t(this.plotLinesAndBands,function(e){e.render()}),$t(this.series,function(e){e.isDirty=!0})},destroy:function(e){var t=this,n=t.stacks,r,i=t.plotLinesAndBands;e||Yt(t);for(r in n)x(n[r]),n[r]=null;$t([t.ticks,t.minorTicks,t.alternateBands],function(e){x(e)});for(e=i.length;e--;)i[e].destroy();$t("stackTotalGroup,axisLine,axisTitle,axisGroup,cross,gridGroup,labelGroup".split(","),function(e){t[e]&&(t[e]=t[e].destroy())}),this.cross&&this.cross.destroy()},drawCrosshair:function(e,t){var n,r=this.crosshair,i=r.animation;!this.crosshair||(f(t)||!qt(this.crosshair.snap,!0))===!1||t&&t.series&&t.series[this.coll]!==this?this.hideCrosshair():(qt(r.snap,!0)?f(t)&&(n=this.isXAxis?t.plotX:this.len-t.plotY):n=this.horiz?e.chartX-this.pos:this.len-e.chartY+this.pos,n=this.isRadial?this.getPlotLinePath(this.isXAxis?t.x:qt(t.stackY,t.y))||null:this.getPlotLinePath(null,null,null,null,n)||null,n===null)?this.hideCrosshair():this.cross?this.cross.attr({visibility:"visible"})[i?"animate":"attr"]({d:n},i):(i=this.categories&&!this.isRadial,i={"stroke-width":r.width||(i?this.transA:1),stroke:r.color||(i?"rgba(155,200,255,0.2)":"#C0C0C0"),zIndex:r.zIndex||2},r.dashStyle&&(i.dashstyle=r.dashStyle),this.cross=this.chart.renderer.path(n).attr(i).add())},hideCrosshair:function(){this.cross&&this.cross.hide()}},It(hn.prototype,{getPlotBandPath:function(e,t){var n=this.getPlotLinePath(t,null,null,!0),r=this.getPlotLinePath(e,null,null,!0);return r&&n&&r.toString()!==n.toString()?r.push(n[4],n[5],n[1],n[2]):r=null,r},addPlotBand:function(e){return this.addPlotBandOrLine(e,"plotBands")},addPlotLine:function(e){return this.addPlotBandOrLine(e,"plotLines")},addPlotBandOrLine:function(e,t){var n=(new Ft.PlotLineOrBand(this,e)).render(),r=this.userOptions;return n&&(t&&(r[t]=r[t]||[],r[t].push(e)),this.plotLinesAndBands.push(n)),n},removePlotBandOrLine:function(e){for(var t=this.plotLinesAndBands,n=this.options,r=this.userOptions,i=t.length;i--;)t[i].id===e&&t[i].destroy();$t([n.plotLines||[],r.plotLines||[],n.plotBands||[],r.plotBands||[]],function(t){for(i=t.length;i--;)t[i].id===e&&a(t,t[i])})}}),hn.prototype.getTimeTicks=function(e,t,n,r){var i=[],s={},o=at.global.useUTC,u,a=new wt(t-m(t)),l=e.unitRange,c=e.count;if(f(t)){a[Ot](l>=ct.second?0:c*j(a.getMilliseconds()/c)),l>=ct.second&&a[Mt](l>=ct.minute?0:c*j(a.getSeconds()/c)),l>=ct.minute&&a[_t](l>=ct.hour?0:c*j(a[Tt]()/c)),l>=ct.hour&&a[Dt](l>=ct.day?0:c*j(a[Nt]()/c)),l>=ct.day&&a[Pt](l>=ct.month?1:c*j(a[kt]()/c)),l>=ct.month&&(a[Ht](l>=ct.year?0:c*j(a[Lt]()/c)),u=a[At]()),l>=ct.year&&(u-=u%c,a[Bt](u)),l===ct.week&&a[Pt](a[kt]()-a[Ct]()+qt(r,1)),t=1;if(St||xt)a=a.getTime(),a=new wt(a+m(a));u=a[At]();for(var r=a.getTime(),h=a[Lt](),p=a[kt](),d=(ct.day+(o?m(a):a.getTimezoneOffset()*6e4))%ct.day;r<n;)i.push(r),l===ct.year?r=Et(u+t*c,0):l===ct.month?r=Et(u,h+t*c):!!o||l!==ct.day&&l!==ct.week?r+=l*c:r=Et(u,h,p+t*c*(l===ct.day?1:7)),t++;i.push(r),$t(Jt(i,function(e){return l<=ct.hour&&e%ct.day===d}),function(e){s[e]="day"})}return i.info=It(e,{higherRanks:s,totalRange:l*c}),i},hn.prototype.normalizeTimeTickInterval=function(e,t){var n=t||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],r=n[n.length-1],i=ct[r[0]],s=r[1],o;for(o=0;o<n.length;o++)if(r=n[o],i=ct[r[0]],s=r[1],n[o+1]&&e<=(i*s[s.length-1]+ct[n[o+1][0]])/2)break;return i===ct.year&&e<5*i&&(s=[1,2,5]),n=b(e/i,s,r[0]==="year"?I(y(e/i),1):1),{unitRange:i,count:n,unitName:r[0]}},hn.prototype.getLogTickPositions=function(e,t,n,r){var i=this.options,s=this.len,a=[];r||(this._minorAutoInterval=null);if(e>=.5)e=B(e),a=this.getLinearTickPositions(e,t,n);else if(e>=.08)for(var s=j(t),f,l,c,h,p,i=e>.3?[1,2,4]:e>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];s<n+1&&!p;s++){l=i.length;for(f=0;f<l&&!p;f++)c=o(u(s)*i[f]),c>t&&(!r||h<=n)&&h!==_&&a.push(h),h>n&&(p=!0),h=c}else if(t=u(t),n=u(n),e=i[r?"minorTickInterval":"tickInterval"],e=qt(e==="auto"?null:e,this._minorAutoInterval,(n-t)*(i.tickPixelInterval/(r?5:1))/((r?s/this.tickPositions.length:s)||1)),e=b(e,null,y(e)),a=Qt(this.getLinearTickPositions(e,t,n),o),!r)this._minorAutoInterval=e/5;return r||(this.tickInterval=e),a};var pn=Ft.Tooltip=function(){this.init.apply(this,arguments)};pn.prototype={init:function(e,n){var r=n.borderWidth,i=n.style,s=t(i.padding);this.chart=e,this.options=n,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.label=e.renderer.label("",0,0,n.shape||"callout",null,null,n.useHTML,null,"tooltip").attr({padding:s,fill:n.backgroundColor,"stroke-width":r,r:n.borderRadius,zIndex:8}).css(i).css({padding:0}).add().attr({y:-9999}),nt||this.label.shadow(n.shadow),this.shared=n.shared},destroy:function(){this.label&&(this.label=this.label.destroy()),clearTimeout(this.hideTimer),clearTimeout(this.tooltipTimeout)},move:function(e,t,n,r){var i=this,s=i.now,o=i.options.animation!==!1&&!i.isHidden&&(R(e-s.x)>1||R(t-s.y)>1),u=i.followPointer||i.len>1;It(s,{x:o?(2*s.x+e)/3:e,y:o?(s.y+t)/2:t,anchorX:u?_:o?(2*s.anchorX+n)/3:n,anchorY:u?_:o?(s.anchorY+r)/2:r}),i.label.attr(s),o&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){i&&i.move(e,t,n,r)},32))},hide:function(e){var t=this;clearTimeout(this.hideTimer),this.isHidden||(this.hideTimer=setTimeout(function(){t.label.fadeOut(),t.isHidden=!0},qt(e,this.options.hideDelay,500)))},getAnchor:function(e,t){var n,r=this.chart,i=r.inverted,s=r.plotTop,o=r.plotLeft,u=0,a=0,f,l,e=c(e);return n=e[0].tooltipPos,this.followPointer&&t&&(t.chartX===_&&(t=r.pointer.normalize(t)),n=[t.chartX-r.plotLeft,t.chartY-s]),n||($t(e,function(e){f=e.series.yAxis,l=e.series.xAxis,u+=e.plotX+(!i&&l?l.left-o:0),a+=(e.plotLow?(e.plotLow+e.plotHigh)/2:e.plotY)+(!i&&f?f.top-s:0)}),u/=e.length,a/=e.length,n=[i?r.plotWidth-a:u,this.shared&&!i&&e.length>1&&t?t.chartY-s:i?r.plotHeight-u:a]),Qt(n,B)},getPosition:function(e,t,n){var r=this.chart,i=this.distance,s={},o=n.h||0,u,a=["y",r.chartHeight,t,n.plotY+r.plotTop,r.plotTop,r.plotTop+r.plotHeight],f=["x",r.chartWidth,e,n.plotX+r.plotLeft,r.plotLeft,r.plotLeft+r.plotWidth],l=qt(n.ttBelow,r.inverted&&!n.negative||!r.inverted&&n.negative),c=function(e,t,n,r,u,a){var f=n<r-i,c=r+i+n<t,h=r-i-n;r+=i;if(l&&c)s[e]=r;else if(!l&&f)s[e]=h;else if(f)s[e]=q(a-n,h-o<0?h:h-o);else{if(!c)return!1;s[e]=I(u,r+o+n>t?r:r+o)}},h=function(e,t,n,r){if(r<i||r>t-i)return!1;s[e]=r<n/2?1:r>t-n/2?t-n-2:r-n/2},p=function(e){var t=a;a=f,f=t,u=e},d=function(){c.apply(0,a)!==!1?h.apply(0,f)===!1&&!u&&(p(!0),d()):u?s.x=s.y=0:(p(!0),d())};return(r.inverted||this.len>1)&&p(),d(),s},defaultFormatter:function(e){var t=this.points||c(this),n;return n=[e.tooltipFooterHeaderFormatter(t[0])],n=n.concat(e.bodyFormatter(t)),n.push(e.tooltipFooterHeaderFormatter(t[0],!0)),n.join("")},refresh:function(e,t){var n=this.chart,r=this.label,i=this.options,s,o,u,a={},f,l=[];f=i.formatter||this.defaultFormatter;var a=n.hoverPoints,h,p=this.shared;clearTimeout(this.hideTimer),this.followPointer=c(e)[0].series.tooltipOptions.followPointer,u=this.getAnchor(e,t),s=u[0],o=u[1],p&&(!e.series||!e.series.noSharedTooltip)?(n.hoverPoints=e,a&&$t(a,function(e){e.setState()}),$t(e,function(e){e.setState("hover"),l.push(e.getLabelConfig())}),a={x:e[0].category,y:e[0].y},a.points=l,this.len=l.length,e=e[0]):a=e.getLabelConfig(),f=f.call(a,this),a=e.series,this.distance=qt(a.tooltipOptions.distance,16),f===!1?this.hide():(this.isHidden&&(nn(r),r.attr("opacity",1).show()),r.attr({text:f}),h=i.borderColor||e.color||a.color||"#606060",r.attr({stroke:h}),this.updatePosition({plotX:s,plotY:o,negative:e.negative,ttBelow:e.ttBelow,h:u[2]||0}),this.isHidden=!1),Zt(n,"tooltipRefresh",{text:f,x:s+n.plotLeft,y:o+n.plotTop,borderColor:h})},updatePosition:function(e){var t=this.chart,n=this.label,n=(this.options.positioner||this.getPosition).call(this,n.width,n.height,e);this.move(B(n.x),B(n.y||0),e.plotX+t.plotLeft,e.plotY+t.plotTop)},getXDateFormat:function(e,t,n){var r,t=t.dateTimeLabelFormats,i=n&&n.closestPointRange,s,o={millisecond:15,second:12,minute:9,hour:6,day:3},u,a="millisecond";if(i){u=ft("%m-%d %H:%M:%S.%L",e.x);for(s in ct){if(i===ct.week&&+ft("%w",e.x)===n.options.startOfWeek&&u.substr(6)==="00:00:00.000"){s="week";break}if(ct[s]>i){s=a;break}if(o[s]&&u.substr(o[s])!=="01-01 00:00:00.000".substr(o[s]))break;s!=="week"&&(a=s)}s&&(r=t[s])}else r=t.day;return r||t.year},tooltipFooterHeaderFormatter:function(e,t){var n=t?"footer":"header",r=e.series,i=r.tooltipOptions,o=i.xDateFormat,u=r.xAxis,a=u&&u.options.type==="datetime"&&s(e.key),n=i[n+"Format"];return a&&!o&&(o=this.getXDateFormat(e,i,u)),a&&o&&(n=n.replace("{point.key}","{point.key:"+o+"}")),g(n,{point:e,series:r})},bodyFormatter:function(e){return Qt(e,function(e){var t=e.series.tooltipOptions;return(t.pointFormatter||e.point.tooltipFormatter).call(e.point,t.pointFormat)})}};var dn;it=D.documentElement.ontouchstart!==_;var vn=Ft.Pointer=function(e,t){this.init(e,t)};vn.prototype={init:function(e,t){var n=t.chart,r=n.events,i=nt?"":n.zoomType,n=e.inverted,s;this.options=t,this.chart=e,this.zoomX=s=/x/.test(i),this.zoomY=i=/y/.test(i),this.zoomHor=s&&!n||i&&n,this.zoomVert=i&&!n||s&&n,this.hasZoom=s||i,this.runChartClick=r&&!!r.click,this.pinchDown=[],this.lastValidTouch={},Ft.Tooltip&&t.tooltip.enabled&&(e.tooltip=new pn(e,t.tooltip),this.followTouchMove=qt(t.tooltip.followTouchMove,!0)),this.setDOMEvents()},normalize:function(e,t){var n,r,e=e||window.event,e=en(e);return e.target||(e.target=e.srcElement),r=e.touches?e.touches.length?e.touches.item(0):e.changedTouches[0]:e,t||(this.chartPosition=t=Kt(this.chart.container)),r.pageX===_?(n=I(e.x,e.clientX-t.left),r=e.y):(n=r.pageX-t.left,r=r.pageY-t.top),It(e,{chartX:B(n),chartY:B(r)})},getCoordinates:function(e){var t={xAxis:[],yAxis:[]};return $t(this.chart.axes,function(n){t[n.isXAxis?"xAxis":"yAxis"].push({axis:n,value:n.toValue(e[n.horiz?"chartX":"chartY"])})}),t},runPointActions:function(e){var t=this.chart,n=t.series,r=t.tooltip,i=r?r.shared:!1,s=t.hoverPoint,o=t.hoverSeries,u,a=t.chartWidth,f,l,c=[],h,p;if(!i&&!o)for(u=0;u<n.length;u++)if(n[u].directTouch||!n[u].options.stickyTracking)n=[];!i&&o&&o.directTouch&&s?h=s:($t(n,function(t){f=t.noSharedTooltip&&i,l=!i&&t.directTouch,t.visible&&!f&&!l&&qt(t.options.enableMouseTracking,!0)&&(p=t.searchPoint(e,!f&&t.kdDimensions===1))&&c.push(p)}),$t(c,function(e){e&&typeof e.dist=="number"&&e.dist<a&&(a=e.dist,h=e)}));if(h&&(h!==this.prevKDPoint||r&&r.isHidden)){if(i&&!h.series.noSharedTooltip){for(u=c.length;u--;)(c[u].clientX!==h.clientX||c[u].series.noSharedTooltip)&&c.splice(u,1);c.length&&r&&r.refresh(c,e),$t(c,function(t){t.onMouseOver(e,t!==(o&&o.directTouch&&s||h))})}else(r&&r.refresh(h,e),!o||!o.directTouch)&&h.onMouseOver(e);this.prevKDPoint=h}else n=o&&o.tooltipOptions.followPointer,r&&n&&!r.isHidden&&(n=r.getAnchor([{}],e),r.updatePosition({plotX:n[0],plotY:n[1]}));r&&!this._onDocumentMouseMove&&(this._onDocumentMouseMove=function(e){pt[dn]&&pt[dn].pointer.onDocumentMouseMove(e)},Gt(D,"mousemove",this._onDocumentMouseMove)),$t(t.axes,function(t){t.drawCrosshair(e,qt(h,s))})},reset:function(e,t){var n=this.chart,r=n.hoverSeries,i=n.hoverPoint,s=n.hoverPoints,o=n.tooltip,u=o&&o.shared?s:i;(e=e&&o&&u)&&c(u)[0].plotX===_&&(e=!1),e?(o.refresh(u),i&&(i.setState(i.state,!0),$t(n.axes,function(e){qt(e.options.crosshair&&e.options.crosshair.snap,!0)?e.drawCrosshair(null,i):e.hideCrosshair()}))):(i&&i.onMouseOut(),s&&$t(s,function(e){e.setState()}),r&&r.onMouseOut(),o&&o.hide(t),this._onDocumentMouseMove&&(Yt(D,"mousemove",this._onDocumentMouseMove),this._onDocumentMouseMove=null),$t(n.axes,function(e){e.hideCrosshair()}),this.hoverX=n.hoverPoints=n.hoverPoint=null)},scaleGroups:function(e,t){var n=this.chart,r;$t(n.series,function(i){r=e||i.getPlotBox(),i.xAxis&&i.xAxis.zoomEnabled&&(i.group.attr(r),i.markerGroup&&(i.markerGroup.attr(r),i.markerGroup.clip(t?n.clipRect:null)),i.dataLabelsGroup&&i.dataLabelsGroup.attr(r))}),n.clipRect.attr(t||n.clipBox)},dragStart:function(e){var t=this.chart;t.mouseIsDown=e.type,t.cancelClick=!1,t.mouseDownX=this.mouseDownX=e.chartX,t.mouseDownY=this.mouseDownY=e.chartY},drag:function(e){var t=this.chart,n=t.options.chart,r=e.chartX,i=e.chartY,s=this.zoomHor,o=this.zoomVert,u=t.plotLeft,a=t.plotTop,f=t.plotWidth,l=t.plotHeight,c,h=this.selectionMarker,p=this.mouseDownX,d=this.mouseDownY,v=n.panKey&&e[n.panKey+"Key"];if(!h||!h.touch)if(r<u?r=u:r>u+f&&(r=u+f),i<a?i=a:i>a+l&&(i=a+l),this.hasDragged=Math.sqrt(Math.pow(p-r,2)+Math.pow(d-i,2)),this.hasDragged>10)c=t.isInsidePlot(p-u,d-a),t.hasCartesianSeries&&(this.zoomX||this.zoomY)&&c&&!v&&!h&&(this.selectionMarker=h=t.renderer.rect(u,a,s?1:f,o?1:l,0).attr({fill:n.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add()),h&&s&&(r-=p,h.attr({width:R(r),x:(r>0?0:r)+p})),h&&o&&(r=i-d,h.attr({height:R(r),y:(r>0?0:r)+d})),c&&!h&&n.panning&&t.pan(e,n.panning)},drop:function(e){var t=this,n=this.chart,r=this.hasPinched;if(this.selectionMarker){var i={xAxis:[],yAxis:[],originalEvent:e.originalEvent||e},s=this.selectionMarker,o=s.attr?s.attr("x"):s.x,u=s.attr?s.attr("y"):s.y,a=s.attr?s.attr("width"):s.width,l=s.attr?s.attr("height"):s.height,c;if(this.hasDragged||r)$t(n.axes,function(n){if(n.zoomEnabled&&f(n.min)&&(r||t[{xAxis:"zoomX",yAxis:"zoomY"}[n.coll]])){var s=n.horiz,h=e.type==="touchend"?n.minPixelPadding:0,p=n.toValue((s?o:u)+h),s=n.toValue((s?o+a:u+l)-h);i[n.coll].push({axis:n,min:q(p,s),max:I(p,s)}),c=!0}}),c&&Zt(n,"selection",i,function(e){n.zoom(It(e,r?{animation:!1}:null))});this.selectionMarker=this.selectionMarker.destroy(),r&&this.scaleGroups()}n&&(h(n.container,{cursor:n._cursor}),n.cancelClick=this.hasDragged>10,n.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(e){e=this.normalize(e),e.preventDefault&&e.preventDefault(),this.dragStart(e)},onDocumentMouseUp:function(e){pt[dn]&&pt[dn].pointer.drop(e)},onDocumentMouseMove:function(e){var t=this.chart,n=this.chartPosition,e=this.normalize(e,n);n&&!this.inClass(e.target,"highcharts-tracker")&&!t.isInsidePlot(e.chartX-t.plotLeft,e.chartY-t.plotTop)&&this.reset()},onContainerMouseLeave:function(){var e=pt[dn];e&&(e.pointer.reset(),e.pointer.chartPosition=null)},onContainerMouseMove:function(e){var t=this.chart;dn=t.index,e=this.normalize(e),e.returnValue=!1,t.mouseIsDown==="mousedown"&&this.drag(e),(this.inClass(e.target,"highcharts-tracker")||t.isInsidePlot(e.chartX-t.plotLeft,e.chartY-t.plotTop))&&!t.openMenu&&this.runPointActions(e)},inClass:function(e,t){for(var n;e;){if(n=l(e,"class")){if(n.indexOf(t)!==-1)return!0;if(n.indexOf("highcharts-container")!==-1)return!1}e=e.parentNode}},onTrackerMouseOut:function(e){var t=this.chart.hoverSeries,n=(e=e.relatedTarget||e.toElement)&&e.point&&e.point.series;t&&!t.options.stickyTracking&&!this.inClass(e,"highcharts-tooltip")&&n!==t&&t.onMouseOut()},onContainerClick:function(e){var t=this.chart,n=t.hoverPoint,r=t.plotLeft,i=t.plotTop,e=this.normalize(e);e.originalEvent=e,t.cancelClick||(n&&this.inClass(e.target,"highcharts-tracker")?(Zt(n.series,"click",It(e,{point:n})),t.hoverPoint&&n.firePointEvent("click",e)):(It(e,this.getCoordinates(e)),t.isInsidePlot(e.chartX-r,e.chartY-i)&&Zt(t,"click",e)))},setDOMEvents:function(){var e=this,t=e.chart.container;t.onmousedown=function(t){e.onContainerMouseDown(t)},t.onmousemove=function(t){e.onContainerMouseMove(t)},t.onclick=function(t){e.onContainerClick(t)},Gt(t,"mouseleave",e.onContainerMouseLeave),dt===1&&Gt(D,"mouseup",e.onDocumentMouseUp),it&&(t.ontouchstart=function(t){e.onContainerTouchStart(t)},t.ontouchmove=function(t){e.onContainerTouchMove(t)},dt===1&&Gt(D,"touchend",e.onDocumentTouchEnd))},destroy:function(){var e;Yt(this.chart.container,"mouseleave",this.onContainerMouseLeave),dt||(Yt(D,"mouseup",this.onDocumentMouseUp),Yt(D,"touchend",this.onDocumentTouchEnd)),clearInterval(this.tooltipTimeout);for(e in this)this[e]=null}},It(Ft.Pointer.prototype,{pinchTranslate:function(e,t,n,r,i,s){(this.zoomHor||this.pinchHor)&&this.pinchTranslateDirection(!0,e,t,n,r,i,s),(this.zoomVert||this.pinchVert)&&this.pinchTranslateDirection(!1,e,t,n,r,i,s)},pinchTranslateDirection:function(e,t,n,r,i,s,o,u){var a=this.chart,f=e?"x":"y",l=e?"X":"Y",c="chart"+l,h=e?"width":"height",p=a["plot"+(e?"Left":"Top")],d,v,m=u||1,g=a.inverted,y=a.bounds[e?"h":"v"],b=t.length===1,w=t[0][c],E=n[0][c],S=!b&&t[1][c],x=!b&&n[1][c],T,n=function(){!b&&R(w-S)>20&&(m=u||R(E-x)/R(w-S)),v=(p-E)/m+w,d=a["plot"+(e?"Width":"Height")]/m};n(),t=v,t<y.min?(t=y.min,T=!0):t+d>y.max&&(t=y.max-d,T=!0),T?(E-=.8*(E-o[f][0]),b||(x-=.8*(x-o[f][1])),n()):o[f]=[E,x],g||(s[f]=v-p,s[h]=d),s=g?1/m:m,i[h]=d,i[f]=t,r[g?e?"scaleY":"scaleX":"scale"+l]=m,r["translate"+l]=s*p+(E-s*w)},pinch:function(e){var t=this,n=t.chart,r=t.pinchDown,i=e.touches,s=i.length,o=t.lastValidTouch,u=t.hasZoom,a=t.selectionMarker,f={},l=s===1&&(t.inClass(e.target,"highcharts-tracker")&&n.runTrackerClick||t.runChartClick),c={};s>1&&(t.initiated=!0),u&&t.initiated&&!l&&e.preventDefault(),Qt(i,function(e){return t.normalize(e)}),e.type==="touchstart"?($t(i,function(e,t){r[t]={chartX:e.chartX,chartY:e.chartY}}),o.x=[r[0].chartX,r[1]&&r[1].chartX],o.y=[r[0].chartY,r[1]&&r[1].chartY],$t(n.axes,function(e){if(e.zoomEnabled){var t=n.bounds[e.horiz?"h":"v"],r=e.minPixelPadding,i=e.toPixels(qt(e.options.min,e.dataMin)),s=e.toPixels(qt(e.options.max,e.dataMax)),o=q(i,s),i=I(i,s);t.min=q(e.pos,o-r),t.max=I(e.pos+e.len,i+r)}}),t.res=!0):r.length&&(a||(t.selectionMarker=a=It({destroy:ht,touch:!0},n.plotBox)),t.pinchTranslate(r,i,f,a,c,o),t.hasPinched=u,t.scaleGroups(f,c),!u&&t.followTouchMove&&s===1?this.runPointActions(t.normalize(e)):t.res&&(t.res=!1,this.reset(!1,0)))},touch:function(e,t){var n=this.chart;dn=n.index,e.touches.length===1?(e=this.normalize(e),n.isInsidePlot(e.chartX-n.plotLeft,e.chartY-n.plotTop)&&!n.openMenu?(t&&this.runPointActions(e),this.pinch(e)):t&&this.reset()):e.touches.length===2&&this.pinch(e)},onContainerTouchStart:function(e){this.touch(e,!0)},onContainerTouchMove:function(e){this.touch(e)},onDocumentTouchEnd:function(e){pt[dn]&&pt[dn].pointer.drop(e)}});if(P.PointerEvent||P.MSPointerEvent){var mn={},gn=!!P.PointerEvent,yn=function(){var e,t=[];t.item=function(e){return this[e]};for(e in mn)mn.hasOwnProperty(e)&&t.push({pageX:mn[e].pageX,pageY:mn[e].pageY,target:mn[e].target});return t},bn=function(e,t,n,r){e=e.originalEvent||e,(e.pointerType==="touch"||e.pointerType===e.MSPOINTER_TYPE_TOUCH)&&pt[dn]&&(r(e),r=pt[dn].pointer,r[t]({type:n,target:e.currentTarget,preventDefault:ht,touches:yn()}))};It(vn.prototype,{onContainerPointerDown:function(e){bn(e,"onContainerTouchStart"
,"touchstart",function(e){mn[e.pointerId]={pageX:e.pageX,pageY:e.pageY,target:e.currentTarget}})},onContainerPointerMove:function(e){bn(e,"onContainerTouchMove","touchmove",function(e){mn[e.pointerId]={pageX:e.pageX,pageY:e.pageY},mn[e.pointerId].target||(mn[e.pointerId].target=e.currentTarget)})},onDocumentPointerUp:function(e){bn(e,"onDocumentTouchEnd","touchend",function(e){delete mn[e.pointerId]})},batchMSEvents:function(e){e(this.chart.container,gn?"pointerdown":"MSPointerDown",this.onContainerPointerDown),e(this.chart.container,gn?"pointermove":"MSPointerMove",this.onContainerPointerMove),e(D,gn?"pointerup":"MSPointerUp",this.onDocumentPointerUp)}}),Rt(vn.prototype,"init",function(e,t,n){e.call(this,t,n),this.hasZoom&&h(t.container,{"-ms-touch-action":mt,"touch-action":mt})}),Rt(vn.prototype,"setDOMEvents",function(e){e.apply(this),(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(Gt)}),Rt(vn.prototype,"destroy",function(e){this.batchMSEvents(Yt),e.call(this)})}var wn=Ft.Legend=function(e,t){this.init(e,t)};wn.prototype={init:function(t,n){var r=this,i=n.itemStyle,s=n.itemMarginTop||0;this.options=n,n.enabled&&(r.itemStyle=i,r.itemHiddenStyle=e(i,n.itemHiddenStyle),r.itemMarginTop=s,r.padding=i=qt(n.padding,8),r.initialItemX=i,r.initialItemY=i-5,r.maxItemWidth=0,r.chart=t,r.itemHeight=0,r.symbolWidth=qt(n.symbolWidth,16),r.pages=[],r.render(),Gt(r.chart,"endResize",function(){r.positionCheckboxes()}))},colorizeItem:function(e,t){var n=this.options,r=e.legendItem,i=e.legendLine,s=e.legendSymbol,o=this.itemHiddenStyle.color,n=t?n.itemStyle.color:o,u=t?e.legendColor||e.color||"#CCC":o,o=e.options&&e.options.marker,a={fill:u},f;r&&r.css({fill:n,color:n}),i&&i.attr({stroke:u});if(s){if(o&&s.isMarker)for(f in a.stroke=u,o=e.convertAttribs(o),o)r=o[f],r!==_&&(a[f]=r);s.attr(a)}},positionItem:function(e){var t=this.options,n=t.symbolPadding,t=!t.rtl,r=e._legendItemPos,i=r[0],r=r[1],s=e.checkbox;(e=e.legendGroup)&&e.element&&e.translate(t?i:this.legendWidth-i-2*n-4,r),s&&(s.x=i,s.y=r)},destroyItem:function(e){var t=e.checkbox;$t(["legendItem","legendLine","legendSymbol","legendGroup"],function(t){e[t]&&(e[t]=e[t].destroy())}),t&&T(e.checkbox)},destroy:function(){var e=this.group,t=this.box;t&&(this.box=t.destroy()),e&&(this.group=e.destroy())},positionCheckboxes:function(e){var t=this.group.alignAttr,n,r=this.clipHeight||this.legendHeight;t&&(n=t.translateY,$t(this.allItems,function(i){var s=i.checkbox,o;s&&(o=n+s.y+(e||0)+3,h(s,{left:t.translateX+i.checkboxOffset+s.x-20+"px",top:o+"px",display:o>n-6&&o<n+r-6?"":mt}))}))},renderTitle:function(){var e=this.padding,t=this.options.title,n=0;t.text&&(this.title||(this.title=this.chart.renderer.label(t.text,e-3,e-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(t.style).add(this.group)),e=this.title.getBBox(),n=e.height,this.offsetWidth=e.width,this.contentGroup.attr({translateY:n})),this.titleHeight=n},setText:function(e){var t=this.options;e.legendItem.attr({text:t.labelFormat?g(t.labelFormat,e):t.labelFormatter.call(e)})},renderItem:function(t){var n=this.chart,r=n.renderer,i=this.options,s=i.layout==="horizontal",o=this.symbolWidth,u=i.symbolPadding,a=this.itemStyle,f=this.itemHiddenStyle,l=this.padding,c=s?qt(i.itemDistance,20):0,h=!i.rtl,p=i.width,d=i.itemMarginBottom||0,v=this.itemMarginTop,m=this.initialItemX,g=t.legendItem,y=t.series&&t.series.drawLegendSymbol?t.series:t,b=y.options,b=this.createCheckboxForItem&&b&&b.showCheckbox,w=i.useHTML;g||(t.legendGroup=r.g("legend-item").attr({zIndex:1}).add(this.scrollGroup),t.legendItem=g=r.text("",h?o+u:-u,this.baseline||0,w).css(e(t.visible?a:f)).attr({align:h?"left":"right",zIndex:2}).add(t.legendGroup),this.baseline||(this.fontMetrics=r.fontMetrics(a.fontSize,g),this.baseline=this.fontMetrics.f+3+v,g.attr("y",this.baseline)),y.drawLegendSymbol(this,t),this.setItemEvents&&this.setItemEvents(t,g,w,a,f),this.colorizeItem(t,t.visible),b&&this.createCheckboxForItem(t)),this.setText(t),r=g.getBBox(),o=t.checkboxOffset=i.itemWidth||t.legendItemWidth||o+u+r.width+c+(b?20:0),this.itemHeight=u=B(t.legendItemHeight||r.height),s&&this.itemX-m+o>(p||n.chartWidth-2*l-m-i.x)&&(this.itemX=m,this.itemY+=v+this.lastLineHeight+d,this.lastLineHeight=0),this.maxItemWidth=I(this.maxItemWidth,o),this.lastItemY=v+this.itemY+d,this.lastLineHeight=I(u,this.lastLineHeight),t._legendItemPos=[this.itemX,this.itemY],s?this.itemX+=o:(this.itemY+=v+u+d,this.lastLineHeight=u),this.offsetWidth=p||I((s?this.itemX-m-c:o)+l,this.offsetWidth)},getAllItems:function(){var e=[];return $t(this.chart.series,function(t){var n=t.options;qt(n.showInLegend,f(n.linkedTo)?!1:_,!0)&&(e=e.concat(t.legendItems||(n.legendType==="point"?t.data:t)))}),e},adjustMargins:function(e,t){var n=this.chart,r=this.options,i=r.align.charAt(0)+r.verticalAlign.charAt(0)+r.layout.charAt(0);this.display&&!r.floating&&$t([/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/],function(s,o){s.test(i)&&!f(e[o])&&(n[yt[o]]=I(n[yt[o]],n.legend[(o+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][o]*r[o%2?"x":"y"]+qt(r.margin,12)+t[o]))})},render:function(){var e=this,t=e.chart,n=t.renderer,r=e.group,i,s,o,u,a=e.box,f=e.options,l=e.padding,c=f.borderWidth,h=f.backgroundColor;e.itemX=e.initialItemX,e.itemY=e.initialItemY,e.offsetWidth=0,e.lastItemY=0,r||(e.group=r=n.g("legend").attr({zIndex:7}).add(),e.contentGroup=n.g().attr({zIndex:1}).add(r),e.scrollGroup=n.g().add(e.contentGroup)),e.renderTitle(),i=e.getAllItems(),w(i,function(e,t){return(e.options&&e.options.legendIndex||0)-(t.options&&t.options.legendIndex||0)}),f.reversed&&i.reverse(),e.allItems=i,e.display=s=!!i.length,e.lastLineHeight=0,$t(i,function(t){e.renderItem(t)}),o=(f.width||e.offsetWidth)+l,u=e.lastItemY+e.lastLineHeight+e.titleHeight,u=e.handleOverflow(u),u+=l;if(c||h)a?o>0&&u>0&&(a[a.isNew?"attr":"animate"](a.crisp({width:o,height:u})),a.isNew=!1):(e.box=a=n.rect(0,0,o,u,f.borderRadius,c||0).attr({stroke:f.borderColor,"stroke-width":c||0,fill:h||mt}).add(r).shadow(f.shadow),a.isNew=!0),a[s?"show":"hide"]();e.legendWidth=o,e.legendHeight=u,$t(i,function(t){e.positionItem(t)}),s&&r.align(It({width:o,height:u},f),!0,"spacingBox"),t.isResizing||this.positionCheckboxes()},handleOverflow:function(e){var t=this,n=this.chart,r=n.renderer,i=this.options,s=i.y,s=n.spacingBox.height+(i.verticalAlign==="top"?-s:s)-this.padding,o=i.maxHeight,u,a=this.clipRect,f=i.navigation,l=qt(f.animation,!0),c=f.arrowSize||12,h=this.nav,p=this.pages,d=this.padding,v,m=this.allItems,g=function(e){a.attr({height:e}),t.contentGroup.div&&(t.contentGroup.div.style.clip="rect("+d+"px,9999px,"+(d+e)+"px,0)")};return i.layout==="horizontal"&&(s/=2),o&&(s=q(s,o)),p.length=0,e>s?(this.clipHeight=u=I(s-20-this.titleHeight-d,0),this.currentPage=qt(this.currentPage,1),this.fullHeight=e,$t(m,function(e,t){var n=e._legendItemPos[1],r=B(e.legendItem.getBBox().height),i=p.length;if(!i||n-p[i-1]>u&&(v||n)!==p[i-1])p.push(v||n),i++;t===m.length-1&&n+r-p[i-1]>u&&p.push(n),n!==v&&(v=n)}),a||(a=t.clipRect=r.clipRect(0,d,9999,0),t.contentGroup.clip(a)),g(u),h||(this.nav=h=r.g().attr({zIndex:1}).add(this.group),this.up=r.symbol("triangle",0,0,c,c).on("click",function(){t.scroll(-1,l)}).add(h),this.pager=r.text("",15,10).css(f.style).add(h),this.down=r.symbol("triangle-down",0,0,c,c).on("click",function(){t.scroll(1,l)}).add(h)),t.scroll(0),e=s):h&&(g(n.chartHeight),h.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),e},scroll:function(e,t){var n=this.pages,r=n.length,i=this.currentPage+e,s=this.clipHeight,o=this.options.navigation,u=o.activeColor,o=o.inactiveColor,a=this.pager,f=this.padding;i>r&&(i=r),i>0&&(t!==_&&k(t,this.chart),this.nav.attr({translateX:f,translateY:s+this.padding+7+this.titleHeight,visibility:"visible"}),this.up.attr({fill:i===1?o:u}).css({cursor:i===1?"default":"pointer"}),a.attr({text:i+"/"+r}),this.down.attr({x:18+this.pager.getBBox().width,fill:i===r?o:u}).css({cursor:i===r?"default":"pointer"}),n=-n[i-1]+this.initialItemY,this.scrollGroup.animate({translateY:n}),this.currentPage=i,this.positionCheckboxes(n))}},ln=Ft.LegendSymbolMixin={drawRectangle:function(e,t){var n=e.options.symbolHeight||e.fontMetrics.f;t.legendSymbol=this.chart.renderer.rect(0,e.baseline-n+1,e.symbolWidth,n,e.options.symbolRadius||0).attr({zIndex:3}).add(t.legendGroup)},drawLineMarker:function(e){var t=this.options,n=t.marker,r;r=e.symbolWidth;var i=this.chart.renderer,s=this.legendGroup,e=e.baseline-B(e.fontMetrics.b*.3),o;t.lineWidth&&(o={"stroke-width":t.lineWidth},t.dashStyle&&(o.dashstyle=t.dashStyle),this.legendLine=i.path(["M",0,e,"L",r,e]).attr(o).add(s)),n&&n.enabled!==!1&&(t=n.radius,this.legendSymbol=r=i.symbol(this.symbol,r/2-t,e-t,2*t,2*t).add(s),r.isMarker=!0)}},(/Trident\/7\.0/.test(V)||G)&&Rt(wn.prototype,"positionItem",function(e,t){var n=this,r=function(){t._legendItemPos&&e.call(n,t)};r(),setTimeout(r)}),zt=Ft.Chart=function(){this.init.apply(this,arguments)},zt.prototype={callbacks:[],init:function(t,n){var r,i=t.series;t.series=null,r=e(at,t),r.series=t.series=i,this.userOptions=t,i=r.chart,this.margin=this.splashArray("margin",i),this.spacing=this.splashArray("spacing",i);var s=i.events;this.bounds={h:{},v:{}},this.callback=n,this.isResizing=0,this.options=r,this.axes=[],this.series=[],this.hasCartesianSeries=i.showAxes;var o=this,u;o.index=pt.length,pt.push(o),dt++,i.reflow!==!1&&Gt(o,"load",function(){o.initReflow()});if(s)for(u in s)Gt(o,u,s[u]);o.xAxis=[],o.yAxis=[],o.animation=nt?!1:qt(i.animation,!0),o.pointCount=o.colorCounter=o.symbolCounter=0,o.firstRender()},initSeries:function(e){var t=this.options.chart;return(t=jt[e.type||t.type||t.defaultSeriesType])||N(17,!0),t=new t,t.init(this,e),t},isInsidePlot:function(e,t,n){var r=n?t:e,e=n?e:t;return r>=0&&r<=this.plotWidth&&e>=0&&e<=this.plotHeight},redraw:function(e){var t=this.axes,n=this.series,r=this.pointer,i=this.legend,s=this.isDirtyLegend,o,u,a=this.hasCartesianSeries,f=this.isDirtyBox,l=n.length,c=l,h=this.renderer,p=h.isHidden(),d=[];k(e,this),p&&this.cloneRenderTo();for(this.layOutTitles();c--;)if(e=n[c],e.options.stacking&&(o=!0,e.isDirty)){u=!0;break}if(u)for(c=l;c--;)if(e=n[c],e.options.stacking)e.isDirty=!0;$t(n,function(e){e.isDirty&&e.options.legendType==="point"&&(e.updateTotals&&e.updateTotals(),s=!0)}),s&&i.options.enabled&&(i.render(),this.isDirtyLegend=!1),o&&this.getStacks(),a&&!this.isResizing&&(this.maxTicks=null,$t(t,function(e){e.setScale()})),this.getMargins(),a&&($t(t,function(e){e.isDirty&&(f=!0)}),$t(t,function(e){var t=e.min+","+e.max;e.extKey!==t&&(e.extKey=t,d.push(function(){Zt(e,"afterSetExtremes",It(e.eventArgs,e.getExtremes())),delete e.eventArgs})),(f||o)&&e.redraw()})),f&&this.drawChartBox(),$t(n,function(e){e.isDirty&&e.visible&&(!e.isCartesian||e.xAxis)&&e.redraw()}),r&&r.reset(!0),h.draw(),Zt(this,"redraw"),p&&this.cloneRenderTo(!0),$t(d,function(e){e.call()})},get:function(e){var t=this.axes,n=this.series,r,i;for(r=0;r<t.length;r++)if(t[r].options.id===e)return t[r];for(r=0;r<n.length;r++)if(n[r].options.id===e)return n[r];for(r=0;r<n.length;r++){i=n[r].points||[];for(t=0;t<i.length;t++)if(i[t].id===e)return i[t]}return null},getAxes:function(){var e=this,t=this.options,n=t.xAxis=c(t.xAxis||{}),t=t.yAxis=c(t.yAxis||{});$t(n,function(e,t){e.index=t,e.isX=!0}),$t(t,function(e,t){e.index=t}),n=n.concat(t),$t(n,function(t){new hn(e,t)})},getSelectedPoints:function(){var e=[];return $t(this.series,function(t){e=e.concat(Jt(t.points||[],function(e){return e.selected}))}),e},getSelectedSeries:function(){return Jt(this.series,function(e){return e.selected})},setTitle:function(t,n,r){var i,s=this,o=s.options,u;u=o.title=e(o.title,t),i=o.subtitle=e(o.subtitle,n),o=i,$t([["title",t,u],["subtitle",n,o]],function(e){var t=e[0],n=s[t],r=e[1],e=e[2];n&&r&&(s[t]=n=n.destroy()),e&&e.text&&!n&&(s[t]=s.renderer.text(e.text,0,0,e.useHTML).attr({align:e.align,"class":"highcharts-"+t,zIndex:e.zIndex||4}).css(e.style).add())}),s.layOutTitles(r)},layOutTitles:function(e){var t=0,n=this.title,r=this.subtitle,i=this.options,s=i.title,i=i.subtitle,o=this.renderer,u=this.spacingBox.width-44;n&&(n.css({width:(s.width||u)+"px"}).align(It({y:o.fontMetrics(s.style.fontSize,n).b-3},s),!1,"spacingBox"),!s.floating&&!s.verticalAlign)&&(t=n.getBBox().height),r&&(r.css({width:(i.width||u)+"px"}).align(It({y:t+(s.margin-13)+o.fontMetrics(s.style.fontSize,r).b},i),!1,"spacingBox"),!i.floating&&!i.verticalAlign&&(t=F(t+r.getBBox().height))),n=this.titleOffset!==t,this.titleOffset=t,!this.isDirtyBox&&n&&(this.isDirtyBox=n,this.hasRendered&&qt(e,!0)&&this.isDirtyBox&&this.redraw())},getChartSize:function(){var e=this.options.chart,t=e.width,e=e.height,n=this.renderToClone||this.renderTo;f(t)||(this.containerWidth=Wt(n,"width")),f(e)||(this.containerHeight=Wt(n,"height")),this.chartWidth=I(0,t||this.containerWidth||600),this.chartHeight=I(0,qt(e,this.containerHeight>19?this.containerHeight:400))},cloneRenderTo:function(e){var t=this.renderToClone,n=this.container;e?t&&(this.renderTo.appendChild(n),T(t),delete this.renderToClone):(n&&n.parentNode===this.renderTo&&this.renderTo.removeChild(n),this.renderToClone=t=this.renderTo.cloneNode(0),h(t,{position:"absolute",top:"-9999px",display:"block"}),t.style.setProperty&&t.style.setProperty("display","block","important"),D.body.appendChild(t),n&&t.appendChild(n))},getContainer:function(){var e,r=this.options.chart,i,s,o;this.renderTo=e=r.renderTo,o="highcharts-"+ot++,n(e)&&(this.renderTo=e=D.getElementById(e)),e||N(13,!0),i=t(l(e,"data-highcharts-chart")),!isNaN(i)&&pt[i]&&pt[i].hasRendered&&pt[i].destroy(),l(e,"data-highcharts-chart",this.index),e.innerHTML="",!r.skipClone&&!e.offsetWidth&&this.cloneRenderTo(),this.getChartSize(),i=this.chartWidth,s=this.chartHeight,this.container=e=p(vt,{className:"highcharts-container"+(r.className?" "+r.className:""),id:o},It({position:"relative",overflow:"hidden",width:i+"px",height:s+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},r.style),this.renderToClone||e),this._cursor=e.style.cursor,this.renderer=r.forExport?new fn(e,i,s,r.style,!0):new rt(e,i,s,r.style),nt&&this.renderer.create(this,e,i,s),this.renderer.chartIndex=this.index},getMargins:function(e){var t=this.spacing,n=this.margin,r=this.titleOffset;this.resetMargins(),r&&!f(n[0])&&(this.plotTop=I(this.plotTop,r+this.options.title.margin+t[0])),this.legend.adjustMargins(n,t),this.extraBottomMargin&&(this.marginBottom+=this.extraBottomMargin),this.extraTopMargin&&(this.plotTop+=this.extraTopMargin),e||this.getAxisMargins()},getAxisMargins:function(){var e=this,t=e.axisOffset=[0,0,0,0],n=e.margin;e.hasCartesianSeries&&$t(e.axes,function(e){e.getOffset()}),$t(yt,function(r,i){f(n[i])||(e[r]+=t[i])}),e.setChartSize()},reflow:function(e){var t=this,n=t.options.chart,r=t.renderTo,i=n.width||Wt(r,"width"),s=n.height||Wt(r,"height"),n=e?e.target:P,r=function(){t.container&&(t.setSize(i,s,!1),t.hasUserSize=null)};if(!t.hasUserSize&&!t.isPrinting&&i&&s&&(n===P||n===D)){if(i!==t.containerWidth||s!==t.containerHeight)clearTimeout(t.reflowTimeout),e?t.reflowTimeout=setTimeout(r,100):r();t.containerWidth=i,t.containerHeight=s}},initReflow:function(){var e=this,t=function(t){e.reflow(t)};Gt(P,"resize",t),Gt(e,"destroy",function(){Yt(P,"resize",t)})},setSize:function(e,t,n){var r=this,i,s,o,u=r.renderer,a=u.globalAnimation;r.isResizing+=1,o=function(){r&&Zt(r,"endResize",null,function(){r.isResizing-=1})},k(n,r),r.oldChartHeight=r.chartHeight,r.oldChartWidth=r.chartWidth,f(e)&&(r.chartWidth=i=I(0,B(e)),r.hasUserSize=!!i),f(t)&&(r.chartHeight=s=I(0,B(t))),(a?tn:h)(r.container,{width:i+"px",height:s+"px"},a),r.setChartSize(!0),u.setSize(i,s,n),r.maxTicks=null,$t(r.axes,function(e){e.isDirty=!0,e.setScale()}),$t(r.series,function(e){e.isDirty=!0}),r.isDirtyLegend=!0,r.isDirtyBox=!0,r.layOutTitles(),r.getMargins(),r.redraw(n),r.oldChartHeight=null,Zt(r,"resize"),a===!1?o():setTimeout(o,a&&a.duration||500)},setChartSize:function(e){var t=this.inverted,n=this.renderer,r=this.chartWidth,i=this.chartHeight,s=this.options.chart,o=this.spacing,u=this.clipOffset,a,f,l,c;this.plotLeft=a=B(this.plotLeft),this.plotTop=f=B(this.plotTop),this.plotWidth=l=I(0,B(r-a-this.marginRight)),this.plotHeight=c=I(0,B(i-f-this.marginBottom)),this.plotSizeX=t?c:l,this.plotSizeY=t?l:c,this.plotBorderWidth=s.plotBorderWidth||0,this.spacingBox=n.spacingBox={x:o[3],y:o[0],width:r-o[3]-o[1],height:i-o[0]-o[2]},this.plotBox=n.plotBox={x:a,y:f,width:l,height:c},r=2*j(this.plotBorderWidth/2),t=F(I(r,u[3])/2),n=F(I(r,u[0])/2),this.clipBox={x:t,y:n,width:j(this.plotSizeX-I(r,u[1])/2-t),height:I(0,j(this.plotSizeY-I(r,u[2])/2-n))},e||$t(this.axes,function(e){e.setAxisSize(),e.setAxisTranslation()})},resetMargins:function(){var e=this;$t(yt,function(t,n){e[t]=qt(e.margin[n],e.spacing[n])}),e.axisOffset=[0,0,0,0],e.clipOffset=[0,0,0,0]},drawChartBox:function(){var e=this.options.chart,t=this.renderer,n=this.chartWidth,r=this.chartHeight,i=this.chartBackground,s=this.plotBackground,o=this.plotBorder,u=this.plotBGImage,a=e.borderWidth||0,f=e.backgroundColor,l=e.plotBackgroundColor,c=e.plotBackgroundImage,h=e.plotBorderWidth||0,p,d=this.plotLeft,v=this.plotTop,m=this.plotWidth,g=this.plotHeight,y=this.plotBox,b=this.clipRect,w=this.clipBox;p=a+(e.shadow?8:0);if(a||f)i?i.animate(i.crisp({width:n-p,height:r-p})):(i={fill:f||mt},a&&(i.stroke=e.borderColor,i["stroke-width"]=a),this.chartBackground=t.rect(p/2,p/2,n-p,r-p,e.borderRadius,a).attr(i).addClass("highcharts-background").add().shadow(e.shadow));l&&(s?s.animate(y):this.plotBackground=t.rect(d,v,m,g,0).attr({fill:l}).add().shadow(e.plotShadow)),c&&(u?u.animate(y):this.plotBGImage=t.image(c,d,v,m,g).add()),b?b.animate({width:w.width,height:w.height}):this.clipRect=t.clipRect(w),h&&(o?o.animate(o.crisp({x:d,y:v,width:m,height:g,strokeWidth:-h})):this.plotBorder=t.rect(d,v,m,g,0,-h).attr({stroke:e.plotBorderColor,"stroke-width":h,fill:mt,zIndex:1}).add()),this.isDirtyBox=!1},propFromSeries:function(){var e=this,t=e.options.chart,n,r=e.options.series,i,s;$t(["inverted","angular","polar"],function(o){n=jt[t.type||t.defaultSeriesType],s=e[o]||t[o]||n&&n.prototype[o];for(i=r&&r.length;!s&&i--;)(n=jt[r[i].type])&&n.prototype[o]&&(s=!0);e[o]=s})},linkSeries:function(){var e=this,t=e.series;$t(t,function(e){e.linkedSeries.length=0}),$t(t,function(t){var r=t.options.linkedTo;n(r)&&(r=r===":previous"?e.series[t.index-1]:e.get(r))&&(r.linkedSeries.push(t),t.linkedParent=r,t.visible=qt(t.options.visible,r.options.visible,t.visible))})},renderSeries:function(){$t(this.series,function(e){e.translate(),e.render()})},renderLabels:function(){var e=this,n=e.options.labels;n.items&&$t(n.items,function(r){var i=It(n.style,r.style),s=t(i.left)+e.plotLeft,o=t(i.top)+e.plotTop+12;delete i.left,delete i.top,e.renderer.text(r.html,s,o).attr({zIndex:2}).css(i).add()})},render:function(){var e=this.axes,t=this.renderer,n=this.options,r,i,s,o;this.setTitle(),this.legend=new wn(this,n.legend),this.getStacks&&this.getStacks(),this.getMargins(!0),this.setChartSize(),r=this.plotWidth,i=this.plotHeight-=13,$t(e,function(e){e.setScale()}),this.getAxisMargins(),s=r/this.plotWidth>1.1,o=i/this.plotHeight>1.1;if(s||o)this.maxTicks=null,$t(e,function(e){(e.horiz&&s||!e.horiz&&o)&&e.setTickInterval(!0)}),this.getMargins();this.drawChartBox(),this.hasCartesianSeries&&$t(e,function(e){e.render()}),this.seriesGroup||(this.seriesGroup=t.g("series-group").attr({zIndex:3}).add()),this.renderSeries(),this.renderLabels(),this.showCredits(n.credits),this.hasRendered=!0},showCredits:function(e){e.enabled&&!this.credits&&(this.credits=this.renderer.text(e.text,0,0).on("click",function(){e.href&&(location.href=e.href)}).attr({align:e.position.align,zIndex:8}).css(e.style).add().align(e.position))},destroy:function(){var e=this,t=e.axes,n=e.series,r=e.container,i,s=r&&r.parentNode;Zt(e,"destroy"),pt[e.index]=_,dt--,e.renderTo.removeAttribute("data-highcharts-chart"),Yt(e);for(i=t.length;i--;)t[i]=t[i].destroy();for(i=n.length;i--;)n[i]=n[i].destroy();$t("title,subtitle,chartBackground,plotBackground,plotBGImage,plotBorder,seriesGroup,clipRect,credits,pointer,scroller,rangeSelector,legend,resetZoomButton,tooltip,renderer".split(","),function(t){var n=e[t];n&&n.destroy&&(e[t]=n.destroy())}),r&&(r.innerHTML="",Yt(r),s&&T(r));for(i in e)delete e[i]},isReadyToRender:function(){var e=this;return!et&&P==P.top&&D.readyState!=="complete"||nt&&!P.canvg?(nt?cn.push(function(){e.firstRender()},e.options.global.canvasToolsURL):D.attachEvent("onreadystatechange",function(){D.detachEvent("onreadystatechange",e.firstRender),D.readyState==="complete"&&e.firstRender()}),!1):!0},firstRender:function(){var e=this,t=e.options,n=e.callback;e.isReadyToRender()&&(e.getContainer(),Zt(e,"init"),e.resetMargins(),e.setChartSize(),e.propFromSeries(),e.getAxes(),$t(t.series||[],function(t){e.initSeries(t)}),e.linkSeries(),Zt(e,"beforeRender"),Ft.Pointer&&(e.pointer=new vn(e,t)),e.render(),e.renderer.draw(),n&&n.apply(e,[e]),$t(e.callbacks,function(t){e.index!==_&&t.apply(e,[e])}),Zt(e,"load"),e.cloneRenderTo(!0))},splashArray:function(e,t){var n=t[e],n=r(n)?n:[n,n,n,n];return[qt(t[e+"Top"],n[0]),qt(t[e+"Right"],n[1]),qt(t[e+"Bottom"],n[2]),qt(t[e+"Left"],n[3])]}};var En=Ft.CenteredSeriesMixin={getCenter:function(){var e=this.options,t=this.chart,n=2*(e.slicedOffset||0),r=t.plotWidth-2*n,t=t.plotHeight-2*n,i=e.center,i=[qt(i[0],"50%"),qt(i[1],"50%"),e.size||"100%",e.innerSize||0],s=q(r,t),o,u;for(o=0;o<4;++o)u=i[o],e=o<2||o===2&&/%$/.test(u),i[o]=(/%$/.test(u)?[r,t,s,i[2]][o]*parseFloat(u)/100:parseFloat(u))+(e?n:0);return i}},Sn=function(){};Sn.prototype={init:function(e,t,n){return this.series=e,this.color=e.color,this.applyOptions(t,n),this.pointAttr={},e.options.colorByPoint&&(t=e.options.colors||e.chart.options.colors,this.color=this.color||t[e.colorCounter++],e.colorCounter===t.length)&&(e.colorCounter=0),e.chart.pointCount++,this},applyOptions:function(e,t){var n=this.series,r=n.options.pointValKey||n.pointValKey,e=Sn.prototype.optionsToObject.call(this,e);return It(this,e),this.options=this.options?It(this.options,e):e,r&&(this.y=this[r]),this.x===_&&n&&(this.x=t===_?n.autoIncrement():t),this},optionsToObject:function(e){var t={},n=this.series,r=n.options.keys,s=r||n.pointArrayMap||["y"],o=s.length,u=0,a=0;if(typeof e=="number"||e===null)t[s[0]]=e;else if(i(e)){!r&&e.length>o&&(n=typeof e[0],n==="string"?t.name=e[0]:n==="number"&&(t.x=e[0]),u++);for(;a<o;)t[s[a++]]=e[u++]}else typeof e=="object"&&(t=e,e.dataLabels&&(n._hasPointLabels=!0),e.marker&&(n._hasPointMarkers=!0));return t},destroy:function(){var e=this.series.chart,t=e.hoverPoints,n;e.pointCount--,t&&(this.setState(),a(t,this),!t.length)&&(e.hoverPoints=null),this===e.hoverPoint&&this.onMouseOut();if(this.graphic||this.dataLabel)Yt(this),this.destroyElements();this.legendItem&&e.legend.destroyItem(this);for(n in this)this[n]=null},destroyElements:function(){for(var e="graphic,dataLabel,dataLabelUpper,group,connector,shadowGroup".split(","),t,n=6;n--;)t=e[n],this[t]&&(this[t]=this[t].destroy())},getLabelConfig:function(){return{x:this.category,y:this.y,color:this.color,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},tooltipFormatter:function(e){var t=this.series,n=t.tooltipOptions,r=qt(n.valueDecimals,""),i=n.valuePrefix||"",s=n.valueSuffix||"";return $t(t.pointArrayMap||["y"],function(t){t="{point."+t;if(i||s)e=e.replace(t+"}",i+t+"}"+s);e=e.replace(t+"}",t+":,."+r+"f}")}),g(e,{point:this,series:this.series})},firePointEvent:function(e,t,n){var r=this,i=this.series.options;(i.point.events[e]||r.options&&r.options.events&&r.options.events[e])&&this.importEvents(),e==="click"&&i.allowPointSelect&&(n=function(e){r.select&&r.select(null,e.ctrlKey||e.metaKey||e.shiftKey)}),Zt(this,e,t,n)}};var xn=Ft.Series=function(){};xn.prototype={isCartesian:!0,type:"line",pointClass:Sn,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},axisTypes:["xAxis","yAxis"],colorCounter:0,parallelArrays:["x","y"],init:function(e,t){var n=this,r,i,s=e.series,o=function(e,t){return qt(e.options.index,e._i)-qt(t.options.index,t._i)};n.chart=e,n.options=t=n.setOptions(t),n.linkedSeries=[],n.bindAxes(),It(n,{name:t.name,state:"",pointAttr:{},visible:t.visible!==!1,selected:t.selected===!0}),nt&&(t.animation=!1),i=t.events;for(r in i)Gt(n,r,i[r]);if(i&&i.click||t.point&&t.point.events&&t.point.events.click||t.allowPointSelect)e.runTrackerClick=!0;n.getColor(),n.getSymbol(),$t(n.parallelArrays,function(e){n[e+"Data"]=[]}),n.setData(t.data,!1),n.isCartesian&&(e.hasCartesianSeries=!0),s.push(n),n._i=s.length-1,w(s,o),this.yAxis&&w(this.yAxis.series,o),$t(s,function(e,t){e.index=t,e.name=e.name||"Series "+(t+1)})},bindAxes:function(){var e=this,t=e.options,n=e.chart,r;$t(e.axisTypes||[],function(i){$t(n[i],function(n){r=n.options;if(t[i]===r.index||t[i]!==_&&t[i]===r.id||t[i]===_&&r.index===0)n.series.push(e),e[i]=n,n.isDirty=!0}),!e[i]&&e.optionalAxis!==i&&N(18,!0)})},updateParallelArrays:function(e,t){var n=e.series,r=arguments;$t(n.parallelArrays,typeof t=="number"?function(r){var i=r==="y"&&n.toYData?n.toYData(e):e[r];n[r+"Data"][t]=i}:function(e){Array.prototype[t].apply(n[e+"Data"],Array.prototype.slice.call(r,2))})},autoIncrement:function(){var e=this.options,t=this.xIncrement,n,r=e.pointIntervalUnit,t=qt(t,e.pointStart,0);this.pointInterval=n=qt(this.pointInterval,e.pointInterval,1);if(r==="month"||r==="year")e=new wt(t),e=r==="month"?+e[Ht](e[Lt]()+n):+e[Bt](e[At]()+n),n=e-t;return this.xIncrement=t+n,t},getSegments:function(){var e=-1,t=[],n,r=this.points,i=r.length;if(i)if(this.options.connectNulls){for(n=i;n--;)r[n].y===null&&r.splice(n,1);r.length&&(t=[r])}else $t(r,function(n,s){n.y===null?(s>e+1&&t.push(r.slice(e+1,s)),e=s):s===i-1&&t.push(r.slice(e+1,s+1))});this.segments=t},setOptions:function(t){var n=this.chart,r=n.options.plotOptions,n=n.userOptions||{},i=n.plotOptions||{},s=r[this.type];return this.userOptions=t,r=e(s,r.series,t),this.tooltipOptions=e(at.tooltip,at.plotOptions[this.type].tooltip,n.tooltip,i.series&&i.series.tooltip,i[this.type]&&i[this.type].tooltip,t.tooltip),s.marker===null&&delete r.marker,this.zoneAxis=r.zoneAxis,t=this.zones=(r.zones||[]).slice(),(r.negativeColor||r.negativeFillColor)&&!r.zones&&t.push({value:r[this.zoneAxis+"Threshold"]||r.threshold||0,color:r.negativeColor,fillColor:r.negativeFillColor}),t.length&&f(t[t.length-1].value)&&t.push({color:this.color,fillColor:this.fillColor}),r},getCyclic:function(e,t,n){var r=this.userOptions,i="_"+e+"Index",s=e+"Counter";t||(f(r[i])?t=r[i]:(r[i]=t=this.chart[s]%n.length,this.chart[s]+=1),t=n[t]),this[e]=t},getColor:function(){this.options.colorByPoint?this.options.color=null:this.getCyclic("color",this.options.color||rn[this.type].color,this.chart.options.colors)},getSymbol:function(){var e=this.options.marker;this.getCyclic("symbol",e.symbol,this.chart.options.symbols),/^url/.test(this.symbol)&&(e.radius=0)},drawLegendSymbol:ln.drawLineMarker,setData:function(e,t,r,o){var u=this,a=u.points,l=a&&a.length||0,c,h=u.options,p=u.chart,d=null,v=u.xAxis,m=v&&!!v.categories,g=h.turboThreshold,y=this.xData,b=this.yData,w=(c=u.pointArrayMap)&&c.length,e=e||[];c=e.length,t=qt(t,!0);if(o!==!1&&c&&l===c&&!u.cropped&&!u.hasGroupedData&&u.visible)$t(e,function(e,t){a[t].update&&a[t].update(e,!1,null,!1)});else{u.xIncrement=null,u.pointRange=m?1:h.pointRange,u.colorCounter=0,$t(this.parallelArrays,function(e){u[e+"Data"].length=0});if(g&&c>g){for(r=0;d===null&&r<c;)d=e[r],r++;if(s(d)){m=qt(h.pointStart,0),h=qt(h.pointInterval,1);for(r=0;r<c;r++)y[r]=m,b[r]=e[r],m+=h;u.xIncrement=m}else if(i(d))if(w)for(r=0;r<c;r++)h=e[r],y[r]=h[0],b[r]=h.slice(1,w+1);else for(r=0;r<c;r++)h=e[r],y[r]=h[0],b[r]=h[1];else N(12)}else for(r=0;r<c;r++)e[r]!==_&&(h={series:u},u.pointClass.prototype.applyOptions.apply(h,[e[r]]),u.updateParallelArrays(h,r),m&&f(h.name))&&(v.names[h.x]=h.name);n(b[0])&&N(14,!0),u.data=[],u.options.data=e;for(r=l;r--;)a[r]&&a[r].destroy&&a[r].destroy();v&&(v.minRange=v.userMinRange),u.isDirty=u.isDirtyData=p.isDirtyBox=!0,r=!1}t&&p.redraw(r)},processData:function(e){var t=this.xData,n=this.yData,r=t.length,i;i=0;var s,o,u=this.xAxis,a,f=this.options;a=f.cropThreshold;var l=this.isCartesian,c,h;if(l&&!this.isDirty&&!u.isDirty&&!this.yAxis.isDirty&&!e)return!1;u&&(e=u.getExtremes(),c=e.min,h=e.max);if(l&&this.sorted&&(!a||r>a||this.forceCrop))if(t[r-1]<c||t[0]>h)t=[],n=[];else if(t[0]<c||t[r-1]>h)i=this.cropData(this.xData,this.yData,c,h),t=i.xData,n=i.yData,i=i.start,s=!0;for(a=t.length-1;a>=0;a--)r=t[a]-t[a-1],r>0&&(o===_||r<o)?o=r:r<0&&this.requireSorting&&N(15);this.cropped=s,this.cropStart=i,this.processedXData=t,this.processedYData=n,f.pointRange===null&&(this.pointRange=o||1),this.closestPointRange=o},cropData:function(e,t,n,r){var i=e.length,s=0,o=i,u=qt(this.cropShoulder,1),a;for(a=0;a<i;a++)if(e[a]>=n){s=I(0,a-u);break}for(;a<i;a++)if(e[a]>r){o=a+u;break}return{xData:e.slice(s,o),yData:t.slice(s,o),start:s,end:o}},generatePoints:function(){var e=this.options.data,t=this.data,n,r=this.processedXData,i=this.processedYData,s=this.pointClass,o=r.length,u=this.cropStart||0,a,f=this.hasGroupedData,l,h=[],p;!t&&!f&&(t=[],t.length=e.length,t=this.data=t);for(p=0;p<o;p++)a=u+p,f?h[p]=(new s).init(this,[r[p]].concat(c(i[p]))):(t[a]?l=t[a]:e[a]!==_&&(t[a]=l=(new s).init(this,e[a],r[p])),h[p]=l),h[p].index=a;if(t&&(o!==(n=t.length)||f))for(p=0;p<n;p++)if(p===u&&!f&&(p+=o),t[p])t[p].destroyElements(),t[p].plotX=_;this.data=t,this.points=h},getExtremes:function(e){var t=this.yAxis,n=this.processedXData,r,i=[],s=0;r=this.xAxis.getExtremes();var o=r.min,u=r.max,a,f,l,c,e=e||this.stackedYData||this.processedYData;r=e.length;for(c=0;c<r;c++)if(f=n[c],l=e[c],a=l!==null&&l!==_&&(!t.isLog||l.length||l>0),f=this.getExtremesFromAll||this.options.getExtremesFromAll||this.cropped||(n[c+1]||f)>=o&&(n[c-1]||f)<=u,a&&f)if(a=l.length)for(;a--;)l[a]!==null&&(i[s++]=l[a]);else i[s++]=l;this.dataMin=E(i),this.dataMax=S(i)},translate:function(){this.processedXData||this.processData(),this.generatePoints();for(var e=this.options,t=e.stacking,n=this.xAxis,r=n.categories,i=this.yAxis,o=this.points,u=o.length,a=!!this.modifyValue,l=e.pointPlacement,c=l==="between"||s(l),h=e.threshold,p=e.startFromThreshold?h:0,d,v,m,g=Number.MAX_VALUE,e=0;e<u;e++){var y=o[e],b=y.x,w=y.y;v=y.low;var E=t&&i.stacks[(this.negStacks&&w<(p?0:h)?"-":"")+this.stackKey];i.isLog&&w!==null&&w<=0&&(y.y=w=null,N(10)),y.plotX=d=q(I(-1e5,n.translate(b,0,0,0,1,l,this.type==="flags")),1e5),t&&this.visible&&E&&E[b]&&(E=E[b],w=E.points[this.index+","+e],v=w[0],w=w[1],v===p&&(v=qt(h,i.min)),i.isLog&&v<=0&&(v=null),y.total=y.stackTotal=E.total,y.percentage=E.total&&y.y/E.total*100,y.stackY=w,E.setOffset(this.pointXOffset||0,this.barW||0)),y.yBottom=f(v)?i.translate(v,0,1,0,1):null,a&&(w=this.modifyValue(w,y)),y.plotY=v=typeof w=="number"&&w!==Infinity?q(I(-1e5,i.translate(w,0,1,0,1)),1e5):_,y.isInside=v!==_&&v>=0&&v<=i.len&&d>=0&&d<=n.len,y.clientX=c?n.translate(b,0,0,0,1):d,y.negative=y.y<(h||0),y.category=r&&r[y.x]!==_?r[y.x]:y.x,e&&(g=q(g,R(d-m))),m=d}this.closestPointRangePx=g,this.getSegments()},setClip:function(e){var t=this.chart,n=t.renderer,r=t.inverted,i=this.clipBox,s=i||t.clipBox,o=this.sharedClipKey||["_sharedClip",e&&e.duration,e&&e.easing,s.height].join(","),u=t[o],a=t[o+"m"];u||(e&&(s.width=0,t[o+"m"]=a=n.clipRect(-99,r?-t.plotLeft:-t.plotTop,99,r?t.chartWidth:t.chartHeight)),t[o]=u=n.clipRect(s)),e&&(u.count+=1),this.options.clip!==!1&&(this.group.clip(e||i?u:t.clipRect),this.markerGroup.clip(a),this.sharedClipKey=o),e||(u.count-=1,u.count<=0&&o&&t[o]&&(i||(t[o]=t[o].destroy()),t[o+"m"]&&(t[o+"m"]=t[o+"m"].destroy())))},animate:function(e){var t=this.chart,n=this.options.animation,i;n&&!r(n)&&(n=rn[this.type].animation),e?this.setClip(n):(i=this.sharedClipKey,(e=t[i])&&e.animate({width:t.plotSizeX},n),t[i+"m"]&&t[i+"m"].animate({width:t.plotSizeX+99},n),this.animate=null)},afterAnimate:function(){this.setClip(),Zt(this,"afterAnimate")},drawPoints:function(){var e,t=this.points,n=this.chart,r,i,s,o,u,a,f,l,c=this.options.marker,h=this.pointAttr[""],p,d,v,m=this.markerGroup,g=qt(c.enabled,this.xAxis.isRadial,this.closestPointRangePx>2*c.radius);if(c.enabled!==!1||this._hasPointMarkers)for(s=t.length;s--;)(o=t[s],r=j(o.plotX),i=o.plotY,l=o.graphic,p=o.marker||{},d=!!o.marker,e=g&&p.enabled===_||p.enabled,v=o.isInside,e&&i!==_&&!isNaN(i)&&o.y!==null)?(e=o.pointAttr[o.selected?"select":""]||h,u=e.r,a=qt(p.symbol,this.symbol),f=a.indexOf("url")===0,l)?l[v?"show":"hide"](!0).animate(It({x:r-u,y:i-u},l.symbolName?{width:2*u,height:2*u}:{})):v&&(u>0||f)&&(o.graphic=n.renderer.symbol
(a,r-u,i-u,2*u,2*u,d?p:c).attr(e).add(m)):l&&(o.graphic=l.destroy())},convertAttribs:function(e,t,n,r){var i=this.pointAttrToOptions,s,o,u={},e=e||{},t=t||{},n=n||{},r=r||{};for(s in i)o=i[s],u[s]=qt(e[o],t[s],n[s],r[s]);return u},getAttribs:function(){var e=this,t=e.options,n=rn[e.type].marker?t.marker:t,r=n.states,i=r.hover,s,o=e.color,u=e.options.negativeColor;s={stroke:o,fill:o};var a=e.points||[],l,c,h=[],p=e.pointAttrToOptions;l=e.hasPointSpecificOptions;var d=n.lineColor,v=n.fillColor;c=t.turboThreshold;var m=e.zones,g=e.zoneAxis||"y",y;t.marker?(i.radius=i.radius||n.radius+i.radiusPlus,i.lineWidth=i.lineWidth||n.lineWidth+i.lineWidthPlus):(i.color=i.color||an(i.color||o).brighten(i.brightness).get(),i.negativeColor=i.negativeColor||an(i.negativeColor||u).brighten(i.brightness).get()),h[""]=e.convertAttribs(n,s),$t(["hover","select"],function(t){h[t]=e.convertAttribs(r[t],h[""])}),e.pointAttr=h,o=a.length;if(!c||o<c||l)for(;o--;){c=a[o],(n=c.options&&c.options.marker||c.options)&&n.enabled===!1&&(n.radius=0);if(m.length){l=0;for(s=m[l];c[g]>=s.value;)s=m[++l];s.color&&(c.color=c.fillColor=s.color)}l=t.colorByPoint||c.color;if(c.options)for(y in p)f(n[p[y]])&&(l=!0);l?(n=n||{},l=[],r=n.states||{},s=r.hover=r.hover||{},t.marker||(s.color=s.color||!c.options.color&&i[c.negative&&u?"negativeColor":"color"]||an(c.color).brighten(s.brightness||i.brightness).get()),s={color:c.color},v||(s.fillColor=c.color),d||(s.lineColor=c.color),n.hasOwnProperty("color")&&!n.color&&delete n.color,l[""]=e.convertAttribs(It(s,n),h[""]),l.hover=e.convertAttribs(r.hover,h.hover,l[""]),l.select=e.convertAttribs(r.select,h.select,l[""])):l=h,c.pointAttr=l}},destroy:function(){var e=this,t=e.chart,n=/AppleWebKit\/533/.test(V),r,i=e.data||[],s,o,u;Zt(e,"destroy"),Yt(e),$t(e.axisTypes||[],function(t){if(u=e[t])a(u.series,e),u.isDirty=u.forceRedraw=!0}),e.legendItem&&e.chart.legend.destroyItem(e);for(r=i.length;r--;)(s=i[r])&&s.destroy&&s.destroy();e.points=null,clearTimeout(e.animationTimeout);for(o in e)e[o]instanceof A&&!e[o].survive&&(r=n&&o==="group"?"hide":"destroy",e[o][r]());t.hoverSeries===e&&(t.hoverSeries=null),a(t.series,e);for(o in e)delete e[o]},getSegmentPath:function(e){var t=this,n=[],r=t.options.step;return $t(e,function(i,s){var o=i.plotX,u=i.plotY,a;t.getPointSpline?n.push.apply(n,t.getPointSpline(e,i,s)):(n.push(s?"L":"M"),r&&s&&(a=e[s-1],r==="right"?n.push(a.plotX,u):r==="center"?n.push((a.plotX+o)/2,a.plotY,(a.plotX+o)/2,u):n.push(o,a.plotY)),n.push(i.plotX,i.plotY))}),n},getGraphPath:function(){var e=this,t=[],n,r=[];return $t(e.segments,function(i){n=e.getSegmentPath(i),i.length>1?t=t.concat(n):r.push(i[0])}),e.singlePoints=r,e.graphPath=t},drawGraph:function(){var e=this,t=this.options,n=[["graph",t.lineColor||this.color,t.dashStyle]],r=t.lineWidth,i=t.linecap!=="square",s=this.getGraphPath(),o=this.fillGraph&&this.color||mt;$t(this.zones,function(r,i){n.push(["zoneGraph"+i,r.color||e.color,r.dashStyle||t.dashStyle])}),$t(n,function(n,u){var a=n[0],f=e[a];f?f.animate({d:s}):(r||o)&&s.length&&(f={stroke:n[1],"stroke-width":r,fill:o,zIndex:1},n[2]?f.dashstyle=n[2]:i&&(f["stroke-linecap"]=f["stroke-linejoin"]="round"),e[a]=e.chart.renderer.path(s).attr(f).add(e.group).shadow(u<2&&t.shadow))})},applyZones:function(){var e=this,t=this.chart,n=t.renderer,r=this.zones,i,s,o=this.clips||[],u,a=this.graph,f=this.area,l=I(t.chartWidth,t.chartHeight),c=this[(this.zoneAxis||"y")+"Axis"],h,p=c.reversed,d=t.inverted,v=c.horiz,m,g,y,b=!1;r.length&&(a||f)&&c.min!==_&&(a&&a.hide(),f&&f.hide(),h=c.getExtremes(),$t(r,function(r,w){i=p?v?t.plotWidth:0:v?0:c.toPixels(h.min),i=q(I(qt(s,i),0),l),s=q(I(B(c.toPixels(qt(r.value,h.max),!0)),0),l),b&&(i=s=c.toPixels(h.max)),m=Math.abs(i-s),g=q(i,s),y=I(i,s);if(c.isXAxis){if(u={x:d?y:g,y:0,width:m,height:l},!v)u.x=t.plotHeight-u.x}else if(u={x:0,y:d?y:g,width:l,height:m},v)u.y=t.plotWidth-u.y;t.inverted&&n.isVML&&(u=c.isXAxis?{x:0,y:p?g:y,height:u.width,width:t.chartWidth}:{x:u.y-t.plotLeft-t.spacingBox.x,y:0,width:u.height,height:t.chartHeight}),o[w]?o[w].animate(u):(o[w]=n.clipRect(u),a&&e["zoneGraph"+w].clip(o[w]),f&&e["zoneArea"+w].clip(o[w])),b=r.value>h.max}),this.clips=o)},invertGroups:function(){function e(){var e={width:t.yAxis.len,height:t.xAxis.len};$t(["group","markerGroup"],function(n){t[n]&&t[n].attr(e).invert()})}var t=this,n=t.chart;t.xAxis&&(Gt(n,"resize",e),Gt(t,"destroy",function(){Yt(n,"resize",e)}),e(),t.invertGroups=e)},plotGroup:function(e,t,n,r,i){var s=this[e],o=!s;return o&&(this[e]=s=this.chart.renderer.g(t).attr({visibility:n,zIndex:r||.1}).add(i)),s[o?"attr":"animate"](this.getPlotBox()),s},getPlotBox:function(){var e=this.chart,t=this.xAxis,n=this.yAxis;return e.inverted&&(t=n,n=this.xAxis),{translateX:t?t.left:e.plotLeft,translateY:n?n.top:e.plotTop,scaleX:1,scaleY:1}},render:function(){var e=this,t=e.chart,n,r=e.options,i=(n=r.animation)&&!!e.animate&&t.renderer.isSVG&&qt(n.duration,500)||0,s=e.visible?"visible":"hidden",o=r.zIndex,u=e.hasRendered,a=t.seriesGroup;n=e.plotGroup("group","series",s,o,a),e.markerGroup=e.plotGroup("markerGroup","markers",s,o,a),i&&e.animate(!0),e.getAttribs(),n.inverted=e.isCartesian?t.inverted:!1,e.drawGraph&&(e.drawGraph(),e.applyZones()),$t(e.points,function(e){e.redraw&&e.redraw()}),e.drawDataLabels&&e.drawDataLabels(),e.visible&&e.drawPoints(),e.drawTracker&&e.options.enableMouseTracking!==!1&&e.drawTracker(),t.inverted&&e.invertGroups(),r.clip!==!1&&!e.sharedClipKey&&!u&&n.clip(t.clipRect),i&&e.animate(),u||(i?e.animationTimeout=setTimeout(function(){e.afterAnimate()},i):e.afterAnimate()),e.isDirty=e.isDirtyData=!1,e.hasRendered=!0},redraw:function(){var e=this.chart,t=this.isDirtyData,n=this.isDirty,r=this.group,i=this.xAxis,s=this.yAxis;r&&(e.inverted&&r.attr({width:e.plotWidth,height:e.plotHeight}),r.animate({translateX:qt(i&&i.left,e.plotLeft),translateY:qt(s&&s.top,e.plotTop)})),this.translate(),this.render(),t&&Zt(this,"updatedData"),(n||t)&&delete this.kdTree},kdDimensions:1,kdAxisArray:["clientX","plotY"],searchPoint:function(e,t){var n=this.xAxis,r=this.yAxis,i=this.chart.inverted;return this.searchKDTree({clientX:i?n.len-e.chartY+n.pos:e.chartX-n.pos,plotY:i?r.len-e.chartX+r.pos:e.chartY-r.pos},t)},buildKDTree:function(){function e(t,r,i){var s,o;if(o=t&&t.length)return s=n.kdAxisArray[r%i],t.sort(function(e,t){return e[s]-t[s]}),o=Math.floor(o/2),{point:t[o],left:e(t.slice(0,o),r+1,i),right:e(t.slice(o+1),r+1,i)}}function t(){var t=Jt(n.points||[],function(e){return e.y!==null});n.kdTree=e(t,r,r)}var n=this,r=n.kdDimensions;delete n.kdTree,n.options.kdSync?t():setTimeout(t)},searchKDTree:function(e,t){function n(e,t,u,a){var l=t.point,c=r.kdAxisArray[u%a],h,p,d=l;return p=f(e[i])&&f(l[i])?Math.pow(e[i]-l[i],2):null,h=f(e[s])&&f(l[s])?Math.pow(e[s]-l[s],2):null,h=(p||0)+(h||0),l.dist=f(h)?Math.sqrt(h):Number.MAX_VALUE,l.distX=f(p)?Math.sqrt(p):Number.MAX_VALUE,c=e[c]-l[c],h=c<0?"left":"right",p=c<0?"right":"left",t[h]&&(h=n(e,t[h],u+1,a),d=h[o]<d[o]?h:l),t[p]&&Math.sqrt(c*c)<d[o]&&(e=n(e,t[p],u+1,a),d=e[o]<d[o]?e:d),d}var r=this,i=this.kdAxisArray[0],s=this.kdAxisArray[1],o=t?"distX":"dist";this.kdTree||this.buildKDTree();if(this.kdTree)return n(e,this.kdTree,this.kdDimensions,this.kdDimensions)}},M.prototype={destroy:function(){x(this,this.axis)},render:function(e){var t=this.options,n=t.format,n=n?g(n,this):t.formatter.call(this);this.label?this.label.attr({text:n,visibility:"hidden"}):this.label=this.axis.chart.renderer.text(n,null,null,t.useHTML).css(t.style).attr({align:this.textAlign,rotation:t.rotation,visibility:"hidden"}).add(e)},setOffset:function(e,t){var n=this.axis,r=n.chart,i=r.inverted,s=n.reversed,s=this.isNegative&&!s||!this.isNegative&&s,o=n.translate(n.usePercentage?100:this.total,0,0,0,1),n=n.translate(0),n=R(o-n),u=r.xAxis[0].translate(this.x)+e,a=r.plotHeight,s={x:i?s?o:o-n:u,y:i?a-u-t:s?a-o-n:a-o,width:i?n:t,height:i?t:n};if(i=this.label)i.align(this.alignOptions,null,s),s=i.alignAttr,i[this.options.crop===!1||r.isInsidePlot(s.x,s.y)?"show":"hide"](!0)}},zt.prototype.getStacks=function(){var e=this;$t(e.yAxis,function(e){e.stacks&&e.hasVisibleSeries&&(e.oldStacks=e.stacks)}),$t(e.series,function(t){t.options.stacking&&(t.visible===!0||e.options.chart.ignoreHiddenSeries===!1)&&(t.stackKey=t.type+qt(t.options.stack,""))})},hn.prototype.buildStacks=function(){var e=this.series,t=qt(this.options.reversedStacks,!0),n=e.length;if(!this.isXAxis){for(this.usePercentage=!1;n--;)e[t?n:e.length-n-1].setStackedPoints();if(this.usePercentage)for(n=0;n<e.length;n++)e[n].setPercentStacks()}},hn.prototype.renderStackTotals=function(){var e=this.chart,t=e.renderer,n=this.stacks,r,i,s=this.stackTotalGroup;s||(this.stackTotalGroup=s=t.g("stack-labels").attr({visibility:"visible",zIndex:6}).add()),s.translate(e.plotLeft,e.plotTop);for(r in n)for(i in e=n[r],e)e[i].render(s)},hn.prototype.resetStacks=function(){var e=this.stacks,t,n;if(!this.isXAxis)for(t in e)for(n in e[t])e[t][n].touched<this.stacksTouched?(e[t][n].destroy(),delete e[t][n]):(e[t][n].total=null,e[t][n].cum=0)},hn.prototype.cleanStacks=function(){var e,t,n;if(!this.isXAxis){this.oldStacks&&(e=this.stacks=this.oldStacks);for(t in e)for(n in e[t])e[t][n].cum=e[t][n].total}},xn.prototype.setStackedPoints=function(){if(this.options.stacking&&(this.visible===!0||this.chart.options.chart.ignoreHiddenSeries===!1)){var e=this.processedXData,t=this.processedYData,n=[],r=t.length,i=this.options,s=i.threshold,o=i.startFromThreshold?s:0,u=i.stack,i=i.stacking,a=this.stackKey,f="-"+a,l=this.negStacks,c=this.yAxis,h=c.stacks,p=c.oldStacks,d,v,m,g,y,b;c.stacksTouched+=1;for(g=0;g<r;g++)y=e[g],b=t[g],m=this.index+","+g,v=(d=l&&b<(o?0:s))?f:a,h[v]||(h[v]={}),h[v][y]||(p[v]&&p[v][y]?(h[v][y]=p[v][y],h[v][y].total=null):h[v][y]=new M(c,c.options.stackLabels,d,y,u)),v=h[v][y],v.points[m]=[qt(v.cum,o)],v.touched=c.stacksTouched,i==="percent"?(d=d?a:f,l&&h[d]&&h[d][y]?(d=h[d][y],v.total=d.total=I(d.total,v.total)+R(b)||0):v.total=C(v.total+(R(b)||0))):v.total=C(v.total+(b||0)),v.cum=qt(v.cum,o)+(b||0),v.points[m].push(v.cum),n[g]=v.cum;i==="percent"&&(c.usePercentage=!0),this.stackedYData=n,c.oldStacks={}}},xn.prototype.setPercentStacks=function(){var e=this,t=e.stackKey,n=e.yAxis.stacks,r=e.processedXData;$t([t,"-"+t],function(t){var i;for(var s=r.length,o,u;s--;)if(o=r[s],i=(u=n[t]&&n[t][o])&&u.points[e.index+","+s],o=i)u=u.total?100/u.total:0,o[0]=C(o[0]*u),o[1]=C(o[1]*u),e.stackedYData[s]=o[1]})},It(zt.prototype,{addSeries:function(e,t,n){var r,i=this;return e&&(t=qt(t,!0),Zt(i,"addSeries",{options:e},function(){r=i.initSeries(e),i.isDirtyLegend=!0,i.linkSeries(),t&&i.redraw(n)})),r},addAxis:function(t,n,r,i){var s=n?"xAxis":"yAxis",o=this.options;new hn(this,e(t,{index:this[s].length,isX:n})),o[s]=c(o[s]||{}),o[s].push(t),qt(r,!0)&&this.redraw(i)},showLoading:function(e){var t=this,n=t.options,r=t.loadingDiv,i=n.loading,s=function(){r&&h(r,{left:t.plotLeft+"px",top:t.plotTop+"px",width:t.plotWidth+"px",height:t.plotHeight+"px"})};r||(t.loadingDiv=r=p(vt,{className:"highcharts-loading"},It(i.style,{zIndex:10,display:mt}),t.container),t.loadingSpan=p("span",null,i.labelStyle,r),Gt(t,"redraw",s)),t.loadingSpan.innerHTML=e||n.lang.loading,t.loadingShown||(h(r,{opacity:0,display:""}),tn(r,{opacity:i.style.opacity},{duration:i.showDuration||0}),t.loadingShown=!0),s()},hideLoading:function(){var e=this.options,t=this.loadingDiv;t&&tn(t,{opacity:0},{duration:e.loading.hideDuration||100,complete:function(){h(t,{display:mt})}}),this.loadingShown=!1}}),It(Sn.prototype,{update:function(e,t,n,s){function o(){u.applyOptions(e),u.y===null&&f&&(u.graphic=f.destroy()),r(e)&&!i(e)&&(u.redraw=function(){f&&f.element&&e&&e.marker&&e.marker.symbol&&(u.graphic=f.destroy()),e&&e.dataLabels&&u.dataLabel&&(u.dataLabel=u.dataLabel.destroy()),u.redraw=null}),l=u.index,a.updateParallelArrays(u,l),p&&u.name&&(p[u.x]=u.name),h.data[l]=u.options,a.isDirty=a.isDirtyData=!0,!a.fixedBox&&a.hasCartesianSeries&&(c.isDirtyBox=!0),h.legendType==="point"&&(c.isDirtyLegend=!0),t&&c.redraw(n)}var u=this,a=u.series,f=u.graphic,l,c=a.chart,h=a.options,p=a.xAxis&&a.xAxis.names,t=qt(t,!0);s===!1?o():u.firePointEvent("update",{options:e},o)},remove:function(e,t){this.series.removePoint(Vt(this,this.series.data),e,t)}}),It(xn.prototype,{addPoint:function(e,t,n,r){var i=this,s=i.options,o=i.data,u=i.graph,a=i.area,f=i.chart,l=i.xAxis&&i.xAxis.names,c=u&&u.shift||0,h=["graph","area"],u=s.data,p,d=i.xData;k(r,f);if(n){for(r=i.zones.length;r--;)h.push("zoneGraph"+r,"zoneArea"+r);$t(h,function(e){i[e]&&(i[e].shift=c+1)})}a&&(a.isArea=!0),t=qt(t,!0),a={series:i},i.pointClass.prototype.applyOptions.apply(a,[e]),h=a.x,r=d.length;if(i.requireSorting&&h<d[r-1])for(p=!0;r&&d[r-1]>h;)r--;i.updateParallelArrays(a,"splice",r,0,0),i.updateParallelArrays(a,r),l&&a.name&&(l[h]=a.name),u.splice(r,0,e),p&&(i.data.splice(r,0,null),i.processData()),s.legendType==="point"&&i.generatePoints(),n&&(o[0]&&o[0].remove?o[0].remove(!1):(o.shift(),i.updateParallelArrays(a,"shift"),u.shift())),i.isDirty=!0,i.isDirtyData=!0,t&&(i.getAttribs(),f.redraw())},removePoint:function(e,t,n){var r=this,i=r.data,s=i[e],o=r.points,u=r.chart,a=function(){i.length===o.length&&o.splice(e,1),i.splice(e,1),r.options.data.splice(e,1),r.updateParallelArrays(s||{series:r},"splice",e,1),s&&s.destroy(),r.isDirty=!0,r.isDirtyData=!0,t&&u.redraw()};k(n,u),t=qt(t,!0),s?s.firePointEvent("remove",null,a):a()},remove:function(e,t){var n=this,r=n.chart,e=qt(e,!0);n.isRemoving||(n.isRemoving=!0,Zt(n,"remove",null,function(){n.destroy(),r.isDirtyLegend=r.isDirtyBox=!0,r.linkSeries(),e&&r.redraw(t)})),n.isRemoving=!1},update:function(t,n){var r=this,i=this.chart,s=this.userOptions,o=this.type,u=jt[o].prototype,a=["group","markerGroup","dataLabelsGroup"],f;if(t.type&&t.type!==o||t.zIndex!==void 0)a.length=0;$t(a,function(e){a[e]=r[e],delete r[e]}),t=e(s,{animation:!1,index:this.index,pointStart:this.xData[0]},{data:this.options.data},t),this.remove(!1);for(f in u)this[f]=_;It(this,jt[t.type||o].prototype),$t(a,function(e){r[e]=a[e]}),this.init(i,t),i.linkSeries(),qt(n,!0)&&i.redraw(!1)}}),It(hn.prototype,{update:function(t,n){var r=this.chart,t=r.options[this.coll][this.options.index]=e(this.userOptions,t);this.destroy(!0),this._addedPlotLB=this.chart._labelPanes=_,this.init(r,It(t,{events:_})),r.isDirtyBox=!0,qt(n,!0)&&r.redraw()},remove:function(e){for(var t=this.chart,n=this.coll,r=this.series,i=r.length;i--;)r[i]&&r[i].remove(!1);a(t.axes,this),a(t[n],this),t.options[n].splice(this.options.index,1),$t(t[n],function(e,t){e.options.index=t}),this.destroy(),t.isDirtyBox=!0,qt(e,!0)&&t.redraw()},setTitle:function(e,t){this.update({title:e},t)},setCategories:function(e,t){this.update({categories:e},t)}});var Tn=d(xn);jt.line=Tn,rn.area=e(Ut,{threshold:0});var Nn=d(xn,{type:"area",getSegments:function(){var e=this,t=[],n=[],r=[],i=this.xAxis,s=this.yAxis,o=s.stacks[this.stackKey],u={},a,f,l=this.points,c=this.options.connectNulls,h,p;if(this.options.stacking&&!this.cropped){for(h=0;h<l.length;h++)u[l[h].x]=l[h];for(p in o)o[p].total!==null&&r.push(+p);r.sort(function(e,t){return e-t}),$t(r,function(t){var r=0,l;if(!c||u[t]&&u[t].y!==null)if(u[t])n.push(u[t]);else{for(h=e.index;h<=s.series.length;h++)if(l=o[t].points[h+","+t]){r=l[1];break}a=i.translate(t),f=s.toPixels(r,!0),n.push({y:null,plotX:a,clientX:a,plotY:f,yBottom:f,onMouseOver:ht})}}),n.length&&t.push(n)}else xn.prototype.getSegments.call(this),t=this.segments;this.segments=t},getSegmentPath:function(e){var t=xn.prototype.getSegmentPath.call(this,e),n=[].concat(t),r,i=this.options;r=t.length;var s=this.yAxis.getThreshold(i.threshold),o;r===3&&n.push("L",t[1],t[2]);if(i.stacking&&!this.closedStacks)for(r=e.length-1;r>=0;r--)o=qt(e[r].yBottom,s),r<e.length-1&&i.step&&n.push(e[r+1].plotX,o),n.push(e[r].plotX,o);else this.closeSegment(n,e,s);return this.areaPath=this.areaPath.concat(n),t},closeSegment:function(e,t,n){e.push("L",t[t.length-1].plotX,n,"L",t[0].plotX,n)},drawGraph:function(){this.areaPath=[],xn.prototype.drawGraph.apply(this);var e=this,t=this.areaPath,n=this.options,r=[["area",this.color,n.fillColor]];$t(this.zones,function(t,i){r.push(["zoneArea"+i,t.color||e.color,t.fillColor||n.fillColor])}),$t(r,function(r){var i=r[0],s=e[i];s?s.animate({d:t}):e[i]=e.chart.renderer.path(t).attr({fill:qt(r[2],an(r[1]).setOpacity(qt(n.fillOpacity,.75)).get()),zIndex:0}).add(e.group)})},drawLegendSymbol:ln.drawRectangle});jt.area=Nn,rn.spline=e(Ut),Tn=d(xn,{type:"spline",getPointSpline:function(e,t,n){var r=t.plotX,i=t.plotY,s=e[n-1],o=e[n+1],u,a,f,l;if(s&&o){e=s.plotY,f=o.plotX;var o=o.plotY,c;u=(1.5*r+s.plotX)/2.5,a=(1.5*i+e)/2.5,f=(1.5*r+f)/2.5,l=(1.5*i+o)/2.5,c=(l-a)*(f-r)/(f-u)+i-l,a+=c,l+=c,a>e&&a>i?(a=I(e,i),l=2*i-a):a<e&&a<i&&(a=q(e,i),l=2*i-a),l>o&&l>i?(l=I(o,i),a=2*i-l):l<o&&l<i&&(l=q(o,i),a=2*i-l),t.rightContX=f,t.rightContY=l}return n?(t=["C",s.rightContX||s.plotX,s.rightContY||s.plotY,u||r,a||i,r,i],s.rightContX=s.rightContY=null):t=["M",r,i],t}}),jt.spline=Tn,rn.areaspline=e(rn.area),Nn=Nn.prototype,Tn=d(Tn,{type:"areaspline",closedStacks:!0,getSegmentPath:Nn.getSegmentPath,closeSegment:Nn.closeSegment,drawGraph:Nn.drawGraph,drawLegendSymbol:ln.drawRectangle}),jt.areaspline=Tn,rn.column=e(Ut,{borderColor:"#FFFFFF",borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:.1,shadow:!1,halo:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0}),Tn=d(xn,{type:"column",pointAttrToOptions:{stroke:"borderColor",fill:"color",r:"borderRadius"},cropShoulder:0,directTouch:!0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){xn.prototype.init.apply(this,arguments);var e=this,t=e.chart;t.hasRendered&&$t(t.series,function(t){t.type===e.type&&(t.isDirty=!0)})},getColumnMetrics:function(){var e=this,t=e.options,n=e.xAxis,r=e.yAxis,i=n.reversed,s,o={},u,a=0;t.grouping===!1?a=1:$t(e.chart.series,function(t){var n=t.options,i=t.yAxis;t.type===e.type&&t.visible&&r.len===i.len&&r.pos===i.pos&&(n.stacking?(s=t.stackKey,o[s]===_&&(o[s]=a++),u=o[s]):n.grouping!==!1&&(u=a++),t.columnIndex=u)});var f=q(R(n.transA)*(n.ordinalSlope||t.pointRange||n.closestPointRange||n.tickInterval||1),n.len),l=f*t.groupPadding,c=(f-2*l)/a,t=q(t.maxPointWidth||n.len,qt(t.pointWidth,c*(1-2*t.pointPadding)));return e.columnMetrics={width:t,offset:(c-t)/2+(l+((i?a-(e.columnIndex||0):e.columnIndex)||0)*c-f/2)*(i?-1:1)}},translate:function(){var e=this,t=e.chart,n=e.options,r=e.borderWidth=qt(n.borderWidth,e.closestPointRange*e.xAxis.transA<2?0:1),i=e.yAxis,s=e.translatedThreshold=i.getThreshold(n.threshold),o=qt(n.minPointLength,5),u=e.getColumnMetrics(),a=u.width,f=e.barW=I(a,1+2*r),l=e.pointXOffset=u.offset,c=-(r%2?.5:0),h=r%2?.5:1;t.inverted&&(s-=.5,t.renderer.isVML&&(h+=1)),n.pointPadding&&(f=F(f)),xn.prototype.translate.apply(e),$t(e.points,function(n){var r=qt(n.yBottom,s),u=999+R(r),u=q(I(-u,n.plotY),i.len+u),p=n.plotX+l,d=f,v=q(u,r),m,g;m=I(u,r)-v,R(m)<o&&o&&(m=o,g=!i.reversed&&!n.negative||i.reversed&&n.negative,v=B(R(v-s)>o?r-o:s-(g?o:0))),n.barX=p,n.pointWidth=a,d=B(p+d)+c,p=B(p)+c,d-=p,r=R(v)<.5,m=q(B(v+m)+h,9e4),v=B(v)+h,m-=v,r&&(v-=1,m+=1),n.tooltipPos=t.inverted?[i.len+i.pos-t.plotLeft-u,e.xAxis.len-p-d/2,m]:[p+d/2,u+i.pos-t.plotTop,m],n.shapeType="rect",n.shapeArgs={x:p,y:v,width:d,height:m}})},getSymbol:ht,drawLegendSymbol:ln.drawRectangle,drawGraph:ht,drawPoints:function(){var t=this,n=this.chart,r=t.options,i=n.renderer,s=r.animationLimit||250,o,u;$t(t.points,function(a){var l=a.plotY,c=a.graphic;l!==_&&!isNaN(l)&&a.y!==null?(o=a.shapeArgs,l=f(t.borderWidth)?{"stroke-width":t.borderWidth}:{},u=a.pointAttr[a.selected?"select":""]||t.pointAttr[""],c?(nn(c),c.attr(l)[n.pointCount<s?"animate":"attr"](e(o))):a.graphic=i[a.shapeType](o).attr(l).attr(u).add(t.group).shadow(r.shadow,null,r.stacking&&!r.borderRadius)):c&&(a.graphic=c.destroy())})},animate:function(e){var t=this.yAxis,n=this.options,r=this.chart.inverted,i={};et&&(e?(i.scaleY=.001,e=q(t.pos+t.len,I(t.pos,t.toPixels(n.threshold))),r?i.translateX=e-t.len:i.translateY=e,this.group.attr(i)):(i.scaleY=1,i[r?"translateX":"translateY"]=t.pos,this.group.animate(i,this.options.animation),this.animate=null))},remove:function(){var e=this,t=e.chart;t.hasRendered&&$t(t.series,function(t){t.type===e.type&&(t.isDirty=!0)}),xn.prototype.remove.apply(e,arguments)}}),jt.column=Tn,rn.bar=e(rn.column),Nn=d(Tn,{type:"bar",inverted:!0}),jt.bar=Nn,rn.scatter=e(Ut,{lineWidth:0,marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}">●</span> <span style="font-size: 10px;"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}}),Nn=d(xn,{type:"scatter",sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1,kdDimensions:2,drawGraph:function(){this.options.lineWidth&&xn.prototype.drawGraph.call(this)}}),jt.scatter=Nn,rn.pie=e(Ut,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.y===null?void 0:this.point.name},x:0},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}},stickyTracking:!1,tooltip:{followPointer:!0}}),Ut={type:"pie",isCartesian:!1,pointClass:d(Sn,{init:function(){Sn.prototype.init.apply(this,arguments);var e=this,t;return It(e,{visible:e.visible!==!1,name:qt(e.name,"Slice")}),t=function(t){e.slice(t.type==="select")},Gt(e,"select",t),Gt(e,"unselect",t),e},setVisible:function(e,t){var n=this,r=n.series,i=r.chart,s=r.options.ignoreHiddenPoint,t=qt(t,s);e!==n.visible&&(n.visible=n.options.visible=e=e===_?!n.visible:e,r.options.data[Vt(n,r.data)]=n.options,$t(["graphic","dataLabel","connector","shadowGroup"],function(t){n[t]&&n[t][e?"show":"hide"](!0)}),n.legendItem&&i.legend.colorizeItem(n,e),!e&&n.state==="hover"&&n.setState(""),s&&(r.isDirty=!0),t&&i.redraw())},slice:function(e,t,n){var r=this.series;k(n,r.chart),qt(t,!0),this.sliced=this.options.sliced=e=f(e)?e:!this.sliced,r.options.data[Vt(this,r.data)]=this.options,e=e?this.slicedTranslation:{translateX:0,translateY:0},this.graphic.animate(e),this.shadowGroup&&this.shadowGroup.animate(e)},haloPath:function(e){var t=this.shapeArgs,n=this.series.chart;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(n.plotLeft+t.x,n.plotTop+t.y,t.r+e,t.r+e,{innerR:this.shapeArgs.r,start:t.start,end:t.end})}}),requireSorting:!1,directTouch:!0,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},animate:function(e){var t=this,n=t.points,r=t.startAngleRad;e||($t(n,function(e){var n=e.graphic,i=e.shapeArgs;n&&(n.attr({r:e.startR||t.center[3]/2,start:r,end:r}),n.animate({r:i.r,start:i.start,end:i.end},t.options.animation))}),t.animate=null)},setData:function(e,t,n,r){xn.prototype.setData.call(this,e,!1,n,r),this.processData(),this.generatePoints(),qt(t,!0)&&this.chart.redraw(n)},updateTotals:function(){var e,t=0,n=this.points,r=n.length,i,s=this.options.ignoreHiddenPoint;for(e=0;e<r;e++)i=n[e],t+=s&&!i.visible?0:i.y;this.total=t;for(e=0;e<r;e++)i=n[e],i.percentage=t>0&&(i.visible||!s)?i.y/t*100:0,i.total=t},generatePoints:function(){xn.prototype.generatePoints.call(this),this.updateTotals()},translate:function(e){this.generatePoints();var t=0,n=this.options,r=n.slicedOffset,i=r+n.borderWidth,s,o,u,a=n.startAngle||0,f=this.startAngleRad=W/180*(a-90),a=(this.endAngleRad=W/180*(qt(n.endAngle,a+360)-90))-f,l=this.points,c=n.dataLabels.distance,n=n.ignoreHiddenPoint,h,p=l.length,d;e||(this.center=e=this.getCenter()),this.getX=function(t,n){return u=H.asin(q((t-e[1])/(e[2]/2+c),1)),e[0]+(n?-1:1)*U(u)*(e[2]/2+c)};for(h=0;h<p;h++){d=l[h],s=f+t*a;if(!n||d.visible)t+=d.percentage/100;o=f+t*a,d.shapeType="arc",d.shapeArgs={x:e[0],y:e[1],r:e[2]/2,innerR:e[3]/2,start:B(s*1e3)/1e3,end:B(o*1e3)/1e3},u=(o+s)/2,u>1.5*W?u-=2*W:u<-W/2&&(u+=2*W),d.slicedTranslation={translateX:B(U(u)*r),translateY:B(z(u)*r)},s=U(u)*e[2]/2,o=z(u)*e[2]/2,d.tooltipPos=[e[0]+s*.7,e[1]+o*.7],d.half=u<-W/2||u>W/2?1:0,d.angle=u,i=q(i,c/2),d.labelPos=[e[0]+s+U(u)*c,e[1]+o+z(u)*c,e[0]+s+U(u)*i,e[1]+o+z(u)*i,e[0]+s,e[1]+o,c<0?"center":d.half?"right":"left",u]}},drawGraph:null,drawPoints:function(){var e=this,t=e.chart.renderer,n,r,i=e.options.shadow,s,o,u;i&&!e.shadowGroup&&(e.shadowGroup=t.g("shadow").add(e.group)),$t(e.points,function(a){a.y!==null&&(r=a.graphic,o=a.shapeArgs,s=a.shadowGroup,i&&!s&&(s=a.shadowGroup=t.g("shadow").add(e.shadowGroup)),n=a.sliced?a.slicedTranslation:{translateX:0,translateY:0},s&&s.attr(n),r?r.animate(It(o,n)):(u={"stroke-linejoin":"round"},a.visible||(u.visibility="hidden"),a.graphic=r=t[a.shapeType](o).setRadialReference(e.center).attr(a.pointAttr[a.selected?"select":""]).attr(u).attr(n).add(e.group).shadow(i,s)))})},searchPoint:ht,sortByAngle:function(e,t){e.sort(function(e,n){return e.angle!==void 0&&(n.angle-e.angle)*t})},drawLegendSymbol:ln.drawRectangle,getCenter:En.getCenter,getSymbol:ht},Ut=d(xn,Ut),jt.pie=Ut,xn.prototype.drawDataLabels=function(){var t=this,n=t.options,r=n.cursor,i=n.dataLabels,s=t.points,o,u,a=t.hasRendered||0,l,c,h=t.chart.renderer;if(i.enabled||t._hasPointLabels)t.dlProcessOptions&&t.dlProcessOptions(i),c=t.plotGroup("dataLabelsGroup","data-labels",i.defer?"hidden":"visible",i.zIndex||6),qt(i.defer,!0)&&(c.attr({opacity:+a}),a||Gt(t,"afterAnimate",function(){t.visible&&c.show(),c[n.animation?"animate":"attr"]({opacity:1},{duration:200})})),u=i,$t(s,function(s){var a,p=s.dataLabel,d,v,m=s.connector,y=!0,b,w={};o=s.dlOptions||s.options&&s.options.dataLabels,a=qt(o&&o.enabled,u.enabled);if(p&&!a)s.dataLabel=p.destroy();else if(a){i=e(u,o),b=i.style,a=i.rotation,d=s.getLabelConfig(),l=i.format?g(i.format,d):i.formatter.call(d,i),b.color=qt(i.color,b.color,t.color,"black");if(p){if(f(l))p.attr({text:l}),y=!1;else if(s.dataLabel=p=p.destroy(),m)s.connector=m.destroy()}else if(f(l)){p={fill:i.backgroundColor,stroke:i.borderColor,"stroke-width":i.borderWidth,r:i.borderRadius||0,rotation:a,padding:i.padding,zIndex:1},b.color==="contrast"&&(w.color=i.inside||i.distance<0||n.stacking?h.getContrast(s.color||t.color):"#000000"),r&&(w.cursor=r);for(v in p)p[v]===_&&delete p[v];p=s.dataLabel=h[a?"text":"label"](l,0,-999,i.shape,null,null,i.useHTML).attr(p).css(It(b,w)).add(c).shadow(i.shadow)}p&&t.alignDataLabel(s,p,i,null,y)}})},xn.prototype.alignDataLabel=function(e,t,n,r,i){var s=this.chart,o=s.inverted,u=qt(e.plotX,-999),a=qt(e.plotY,-999),f=t.getBBox(),l=s.renderer.fontMetrics(n.style.fontSize).b,c=this.visible&&(e.series.forceDL||s.isInsidePlot(u,B(a),o)||r&&s.isInsidePlot(u,o?r.x+1:r.y+r.height-1,o));c&&(r=It({x:o?s.plotWidth-a:u,y:B(o?s.plotHeight-u:a),width:0,height:0},r),It(n,{width:f.width,height:f.height}),n.rotation?(e=s.renderer.rotCorr(l,n.rotation),t[i?"attr":"animate"]({x:r.x+n.x+r.width/2+e.x,y:r.y+n.y+r.height/2}).attr({align:n.align})):(t.align(n,null,r),o=t.alignAttr,qt(n.overflow,"justify")==="justify"?this.justifyDataLabel(t,n,o,f,r,i):qt(n.crop,!0)&&(c=s.isInsidePlot(o.x,o.y)&&s.isInsidePlot(o.x+f.width,o.y+f.height)),n.shape&&t.attr({anchorX:e.plotX,anchorY:e.plotY}))),c||(t.attr({y:-999}),t.placed=!1)},xn.prototype.justifyDataLabel=function(e,t,n,r,i,s){var o=this.chart,u=t.align,a=t.verticalAlign,f,l,c=e.box?0:e.padding||0;f=n.x+c,f<0&&(u==="right"?t.align="left":t.x=-f,l=!0),f=n.x+r.width-c,f>o.plotWidth&&(u==="left"?t.align="right":t.x=o.plotWidth-f,l=!0),f=n.y+c,f<0&&(a==="bottom"?t.verticalAlign="top":t.y=-f,l=!0),f=n.y+r.height-c,f>o.plotHeight&&(a==="top"?t.verticalAlign="bottom":t.y=o.plotHeight-f,l=!0),l&&(e.placed=!s,e.align(t,null,i))},jt.pie&&(jt.pie.prototype.drawDataLabels=function(){var e=this,t=e.data,n,r=e.chart,i=e.options.dataLabels,s=qt(i.connectorPadding,10),o=qt(i.connectorWidth,1),u=r.plotWidth,a=r.plotHeight,f,l,c=qt(i.softConnector,!0),h=i.distance,p=e.center,d=p[2]/2,v=p[1],m=h>0,g,y,b,w=[[],[]],E,x,T,N,C,k=[0,0,0,0],L=function(e,t){return t.y-e.y};if(e.visible&&(i.enabled||e._hasPointLabels)){xn.prototype.drawDataLabels.apply(e),$t(t,function(e){e.dataLabel&&e.visible&&w[e.half].push(e)});for(N=2;N--;){var A=[],O=[],M=w[N],_=M.length,D;if(_){e.sortByAngle(M,N-.5);for(C=t=0;!t&&M[C];)t=M[C]&&M[C].dataLabel&&(M[C].dataLabel.getBBox().height||21),C++;if(h>0){y=q(v+d+h,r.plotHeight);for(C=I(0,v-d-h);C<=y;C+=t)A.push(C);y=A.length;if(_>y){n=[].concat(M),n.sort(L);for(C=_;C--;)n[C].rank=C;for(C=_;C--;)M[C].rank>=y&&M.splice(C,1);_=M.length}for(C=0;C<_;C++){n=M[C],b=n.labelPos,n=9999;var P,H;for(H=0;H<y;H++)P=R(A[H]-b[1]),P<n&&(n=P,D=H);if(D<C&&A[C]!==null)D=C;else for(y<_-C+D&&A[C]!==null&&(D=y-_+C);A[D]===null;)D++;O.push({i:D,y:A[D]}),A[D]=null}O.sort(L)}for(C=0;C<_;C++){n=M[C],b=n.labelPos,g=n.dataLabel,T=n.visible===!1?"hidden":"inherit",n=b[1];if(h>0){if(y=O.pop(),D=y.i,x=y.y,n>x&&A[D+1]!==null||n<x&&A[D-1]!==null)x=q(I(0,n),r.plotHeight)}else x=n;E=i.justify?p[0]+(N?-1:1)*(d+h):e.getX(x===v-d-h||x===v+d+h?n:x,N),g._attr={visibility:T,align:b[6]},g._pos={x:E+i.x+({left:s,right:-s}[b[6]]||0),y:x+i.y-10},g.connX=E,g.connY=x,this.options.size===null&&(y=g.width,E-y<s?k[3]=I(B(y-E+s),k[3]):E+y>u-s&&(k[1]=I(B(E+y-u+s),k[1])),x-t/2<0?k[0]=I(B(-x+t/2),k[0]):x+t/2>a&&(k[2]=I(B(x+t/2-a),k[2])))}}}if(S(k)===0||this.verifyDataLabelOverflow(k))this.placeDataLabels(),m&&o&&$t(this.points,function(t){f=t.connector,b=t.labelPos,(g=t.dataLabel)&&g._pos&&t.visible?(T=g._attr.visibility,E=g.connX,x=g.connY,l=c?["M",E+(b[6]==="left"?5:-5),x,"C",E,x,2*b[2]-b[4],2*b[3]-b[5],b[2],b[3],"L",b[4],b[5]]:["M",E+(b[6]==="left"?5:-5),x,"L",b[2],b[3],"L",b[4],b[5]],f?(f.animate({d:l}),f.attr("visibility",T)):t.connector=f=e.chart.renderer.path(l).attr({"stroke-width":o,stroke:i.connectorColor||t.color||"#606060",visibility:T}).add(e.dataLabelsGroup)):f&&(t.connector=f.destroy())})}},jt.pie.prototype.placeDataLabels=function(){$t(this.points,function(e){var t=e.dataLabel;t&&e.visible&&((e=t._pos)?(t.attr(t._attr),t[t.moved?"animate":"attr"](e),t.moved=!0):t&&t.attr({y:-999}))})},jt.pie.prototype.alignDataLabel=ht,jt.pie.prototype.verifyDataLabelOverflow=function(e){var t=this.center,n=this.options,r=n.center,i=n.minSize||80,s=i,o;return r[0]!==null?s=I(t[2]-I(e[1],e[3]),i):(s=I(t[2]-e[1]-e[3],i),t[0]+=(e[3]-e[1])/2),r[1]!==null?s=I(q(s,t[2]-I(e[0],e[2])),i):(s=I(q(s,t[2]-e[0]-e[2]),i),t[1]+=(e[0]-e[2])/2),s<t[2]?(t[2]=s,t[3]=/%$/.test(n.innerSize||0)?s*parseFloat(n.innerSize||0)/100:parseFloat(n.innerSize||0),this.translate(t),$t(this.points,function(e){e.dataLabel&&(e.dataLabel._pos=null)}),this.drawDataLabels&&this.drawDataLabels()):o=!0,o}),jt.column&&(jt.column.prototype.alignDataLabel=function(t,n,r,i,s){var o=this.chart.inverted,u=t.series,a=t.dlBox||t.shapeArgs,f=qt(t.below,t.plotY>qt(this.translatedThreshold,u.yAxis.len)),l=qt(r.inside,!!this.options.stacking);a&&(i=e(a),o&&(i={x:u.yAxis.len-i.y-i.height,y:u.xAxis.len-i.x-i.width,width:i.height,height:i.width}),!l)&&(o?(i.x+=f?0:i.width,i.width=0):(i.y+=f?i.height:0,i.height=0)),r.align=qt(r.align,!o||l?"center":f?"right":"left"),r.verticalAlign=qt(r.verticalAlign,o||l?"middle":f?"top":"bottom"),xn.prototype.alignDataLabel.call(this,t,n,r,i,s)}),function(e){var t=e.Chart,n=e.each,r=e.pick,i=HighchartsAdapter.addEvent;t.prototype.callbacks.push(function(e){function t(){var t=[];n(e.series,function(e){var i=e.options.dataLabels,s=e.dataLabelCollections||["dataLabel"];(i.enabled||e._hasPointLabels)&&!i.allowOverlap&&e.visible&&n(s,function(i){n(e.points,function(e){e[i]&&(e[i].labelrank=r(e.labelrank,e.shapeArgs&&e.shapeArgs.height),t.push(e[i]))})})}),e.hideOverlappingLabels(t)}t(),i(e,"redraw",t)}),t.prototype.hideOverlappingLabels=function(e){var t=e.length,r,i,s,o,u,a,f;for(i=0;i<t;i++)if(r=e[i])r.oldOpacity=r.opacity,r.newOpacity=1;e.sort(function(e,t){return(t.labelrank||0)-(e.labelrank||0)});for(i=0;i<t;i++){s=e[i];for(r=i+1;r<t;++r)if(o=e[r],s&&o&&s.placed&&o.placed&&s.newOpacity!==0&&o.newOpacity!==0&&(u=s.alignAttr,a=o.alignAttr,f=2*(s.box?0:s.padding),u=!(a.x>u.x+(s.width-f)||a.x+(o.width-f)<u.x||a.y>u.y+(s.height-f)||a.y+(o.height-f)<u.y)))(s.labelrank<o.labelrank?s:o).newOpacity=0}n(e,function(e){var t,n;e&&(n=e.newOpacity,e.oldOpacity!==n&&e.placed&&(n?e.show(!0):t=function(){e.hide()},e.alignAttr.opacity=n,e[e.isOld?"animate":"attr"](e.alignAttr,null,t)),e.isOld=!0)})}}(Ft),Ut=Ft.TrackerMixin={drawTrackerPoint:function(){var e=this,t=e.chart,n=t.pointer,r=e.options.cursor,i=r&&{cursor:r},s=function(e){for(var n=e.target,r;n&&!r;)r=n
.point,n=n.parentNode;r!==_&&r!==t.hoverPoint&&r.onMouseOver(e)};$t(e.points,function(e){e.graphic&&(e.graphic.element.point=e),e.dataLabel&&(e.dataLabel.element.point=e)}),e._hasTracking||($t(e.trackerGroups,function(t){e[t]&&(e[t].addClass("highcharts-tracker").on("mouseover",s).on("mouseout",function(e){n.onTrackerMouseOut(e)}).css(i),it)&&e[t].on("touchstart",s)}),e._hasTracking=!0)},drawTrackerGraph:function(){var e=this,t=e.options,n=t.trackByArea,r=[].concat(n?e.areaPath:e.graphPath),i=r.length,s=e.chart,o=s.pointer,u=s.renderer,a=s.options.tooltip.snap,f=e.tracker,l=t.cursor,c=l&&{cursor:l},l=e.singlePoints,h,p=function(){s.hoverSeries!==e&&e.onMouseOver()},d="rgba(192,192,192,"+(et?1e-4:.002)+")";if(i&&!n)for(h=i+1;h--;)r[h]==="M"&&r.splice(h+1,0,r[h+1]-a,r[h+2],"L"),(h&&r[h]==="M"||h===i)&&r.splice(h,0,"L",r[h-2]+a,r[h-1]);for(h=0;h<l.length;h++)i=l[h],r.push("M",i.plotX-a,i.plotY,"L",i.plotX+a,i.plotY);f?f.attr({d:r}):(e.tracker=u.path(r).attr({"stroke-linejoin":"round",visibility:e.visible?"visible":"hidden",stroke:d,fill:n?d:mt,"stroke-width":t.lineWidth+(n?0:2*a),zIndex:2}).add(e.group),$t([e.tracker,e.markerGroup],function(e){e.addClass("highcharts-tracker").on("mouseover",p).on("mouseout",function(e){o.onTrackerMouseOut(e)}).css(c),it&&e.on("touchstart",p)}))}},jt.column&&(Tn.prototype.drawTracker=Ut.drawTrackerPoint),jt.pie&&(jt.pie.prototype.drawTracker=Ut.drawTrackerPoint),jt.scatter&&(Nn.prototype.drawTracker=Ut.drawTrackerPoint),It(wn.prototype,{setItemEvents:function(e,t,n,r,i){var s=this;(n?t:e.legendGroup).on("mouseover",function(){e.setState("hover"),t.css(s.options.itemHoverStyle)}).on("mouseout",function(){t.css(e.visible?r:i),e.setState()}).on("click",function(t){var n=function(){e.setVisible()},t={browserEvent:t};e.firePointEvent?e.firePointEvent("legendItemClick",t,n):Zt(e,"legendItemClick",t,n)})},createCheckboxForItem:function(e){e.checkbox=p("input",{type:"checkbox",checked:e.selected,defaultChecked:e.selected},this.options.itemCheckboxStyle,this.chart.container),Gt(e.checkbox,"click",function(t){Zt(e.series||e,"checkboxClick",{checked:t.target.checked,item:e},function(){e.select()})})}}),at.legend.itemStyle.cursor="pointer",It(zt.prototype,{showResetZoom:function(){var e=this,t=at.lang,n=e.options.chart.resetZoomButton,r=n.theme,i=r.states,s=n.relativeTo==="chart"?null:"plotBox";this.resetZoomButton=e.renderer.button(t.resetZoom,null,null,function(){e.zoomOut()},r,i&&i.hover).attr({align:n.position.align,title:t.resetZoomTitle}).add().align(n.position,!1,s)},zoomOut:function(){var e=this;Zt(e,"selection",{resetSelection:!0},function(){e.zoom()})},zoom:function(e){var t,n=this.pointer,i=!1,s;!e||e.resetSelection?$t(this.axes,function(e){t=e.zoom()}):$t(e.xAxis.concat(e.yAxis),function(e){var r=e.axis,s=r.isXAxis;if(n[s?"zoomX":"zoomY"]||n[s?"pinchX":"pinchY"])t=r.zoom(e.min,e.max),r.displayBtn&&(i=!0)}),s=this.resetZoomButton,i&&!s?this.showResetZoom():!i&&r(s)&&(this.resetZoomButton=s.destroy()),t&&this.redraw(qt(this.options.chart.animation,e&&e.animation,this.pointCount<100))},pan:function(e,t){var n=this,r=n.hoverPoints,i;r&&$t(r,function(e){e.setState()}),$t(t==="xy"?[1,0]:[1],function(t){var r=e[t?"chartX":"chartY"],s=n[t?"xAxis":"yAxis"][0],o=n[t?"mouseDownX":"mouseDownY"],u=(s.pointRange||0)/2,a=s.getExtremes(),f=s.toValue(o-r,!0)+u,u=s.toValue(o+n[t?"plotWidth":"plotHeight"]-r,!0)-u,o=o>r;s.series.length&&(o||f>q(a.dataMin,a.min))&&(!o||u<I(a.dataMax,a.max))&&(s.setExtremes(f,u,!1,!1,{trigger:"pan"}),i=!0),n[t?"mouseDownX":"mouseDownY"]=r}),i&&n.redraw(!1),h(n.container,{cursor:"move"})}}),It(Sn.prototype,{select:function(e,t){var n=this,r=n.series,i=r.chart,e=qt(e,!n.selected);n.firePointEvent(e?"select":"unselect",{accumulate:t},function(){n.selected=n.options.selected=e,r.options.data[Vt(n,r.data)]=n.options,n.setState(e&&"select"),t||$t(i.getSelectedPoints(),function(e){e.selected&&e!==n&&(e.selected=e.options.selected=!1,r.options.data[Vt(e,r.data)]=e.options,e.setState(""),e.firePointEvent("unselect"))})})},onMouseOver:function(e,t){var n=this.series,r=n.chart,i=r.tooltip,s=r.hoverPoint;r.hoverSeries!==n&&n.onMouseOver(),s&&s!==this&&s.onMouseOut(),this.series&&(this.firePointEvent("mouseOver"),i&&(!i.shared||n.noSharedTooltip)&&i.refresh(this,e),this.setState("hover"),!t)&&(r.hoverPoint=this)},onMouseOut:function(){var e=this.series.chart,t=e.hoverPoints;this.firePointEvent("mouseOut");if(!t||Vt(this,t)===-1)this.setState(),e.hoverPoint=null},importEvents:function(){if(!this.hasImportedEvents){var t=e(this.series.options.point,this.options).events,n;this.events=t;for(n in t)Gt(this,n,t[n]);this.hasImportedEvents=!0}},setState:function(t,n){var r=this.plotX,i=this.plotY,s=this.series,o=s.options.states,u=rn[s.type].marker&&s.options.marker,a=u&&!u.enabled,f=u&&u.states[t],l=f&&f.enabled===!1,c=s.stateMarkerGraphic,h=this.marker||{},p=s.chart,d=s.halo,v,t=t||"";v=this.pointAttr[t]||s.pointAttr[t],t===this.state&&!n||this.selected&&t!=="select"||o[t]&&o[t].enabled===!1||t&&(l||a&&f.enabled===!1)||t&&h.states&&h.states[t]&&h.states[t].enabled===!1||(this.graphic?(u=u&&this.graphic.symbolName&&v.r,this.graphic.attr(e(v,u?{x:r-u,y:i-u,width:2*u,height:2*u}:{})),c&&c.hide()):(t&&f&&((u=f.radius,h=h.symbol||s.symbol,c&&c.currentSymbol!==h&&(c=c.destroy()),c)?c[n?"animate":"attr"]({x:r-u,y:i-u}):h&&(s.stateMarkerGraphic=c=p.renderer.symbol(h,r-u,i-u,2*u,2*u).attr(v).add(s.markerGroup),c.currentSymbol=h)),c&&(c[t&&p.isInsidePlot(r,i,p.inverted)?"show":"hide"](),c.element.point=this)),(r=o[t]&&o[t].halo)&&r.size?(d||(s.halo=d=p.renderer.path().add(p.seriesGroup)),d.attr(It({fill:an(this.color||s.color).setOpacity(r.opacity).get()},r.attributes))[n?"animate":"attr"]({d:this.haloPath(r.size)})):d&&d.attr({d:[]}),this.state=t)},haloPath:function(e){var t=this.series,n=t.chart,r=t.getPlotBox(),i=n.inverted;return n.renderer.symbols.circle(r.translateX+(i?t.yAxis.len-this.plotY:this.plotX)-e,r.translateY+(i?t.xAxis.len-this.plotX:this.plotY)-e,e*2,e*2)}}),It(xn.prototype,{onMouseOver:function(){var e=this.chart,t=e.hoverSeries;t&&t!==this&&t.onMouseOut(),this.options.events.mouseOver&&Zt(this,"mouseOver"),this.setState("hover"),e.hoverSeries=this},onMouseOut:function(){var e=this.options,t=this.chart,n=t.tooltip,r=t.hoverPoint;t.hoverSeries=null,r&&r.onMouseOut(),this&&e.events.mouseOut&&Zt(this,"mouseOut"),n&&!e.stickyTracking&&(!n.shared||this.noSharedTooltip)&&n.hide(),this.setState()},setState:function(e){var t=this.options,n=this.graph,r=t.states,i=t.lineWidth,t=0,e=e||"";if(this.state!==e&&(this.state=e,(!r[e]||r[e].enabled!==!1)&&(e&&(i=r[e].lineWidth||i+(r[e].lineWidthPlus||0)),n&&!n.dashstyle))){e={"stroke-width":i};for(n.attr(e);this["zoneGraph"+t];)this["zoneGraph"+t].attr(e),t+=1}},setVisible:function(e,t){var n=this,r=n.chart,i=n.legendItem,s,o=r.options.chart.ignoreHiddenSeries,u=n.visible;s=(n.visible=e=n.userOptions.visible=e===_?!u:e)?"show":"hide",$t(["group","dataLabelsGroup","markerGroup","tracker"],function(e){n[e]&&n[e][s]()}),(r.hoverSeries===n||(r.hoverPoint&&r.hoverPoint.series)===n)&&n.onMouseOut(),i&&r.legend.colorizeItem(n,e),n.isDirty=!0,n.options.stacking&&$t(r.series,function(e){e.options.stacking&&e.visible&&(e.isDirty=!0)}),$t(n.linkedSeries,function(t){t.setVisible(e,!1)}),o&&(r.isDirtyBox=!0),t!==!1&&r.redraw(),Zt(n,s)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(e){this.selected=e=e===_?!this.selected:e,this.checkbox&&(this.checkbox.checked=e),Zt(this,e?"select":"unselect")},drawTracker:Ut.drawTrackerGraph}),It(Ft,{Color:an,Point:Sn,Tick:O,Renderer:rt,SVGElement:A,SVGRenderer:fn,arrayMin:E,arrayMax:S,charts:pt,dateFormat:ft,error:N,format:g,pathAnim:lt,getOptions:function(){return at},hasBidiBug:tt,isTouchDevice:Y,setOptions:function(t){return at=e(!0,at,t),L(),at},addEvent:Gt,removeEvent:Yt,createElement:p,discardElement:T,css:h,each:$t,map:Qt,merge:e,splat:c,extendClass:d,pInt:t,svg:et,canvas:nt,vml:!et&&!nt,product:"Highcharts",version:"4.1.8"})}(),function(e,t){function n(e,t,n){this.init.call(this,e,t,n)}var r=e.arrayMin,i=e.arrayMax,s=e.each,o=e.extend,u=e.merge,a=e.map,f=e.pick,l=e.pInt,c=e.getOptions().plotOptions,h=e.seriesTypes,p=e.extendClass,d=e.splat,v=e.wrap,m=e.Axis,g=e.Tick,y=e.Point,b=e.Pointer,w=e.CenteredSeriesMixin,E=e.TrackerMixin,S=e.Series,x=Math,T=x.round,N=x.floor,C=x.max,k=e.Color,L=function(){};o(n.prototype,{init:function(e,t,n){var r=this,i=r.defaultOptions;r.chart=t,r.options=e=u(i,t.angular?{background:{}}:void 0,e),(e=e.background)&&s([].concat(d(e)).reverse(),function(e){var t=e.backgroundColor,i=n.userOptions,e=u(r.defaultBackgroundOptions,e);t&&(e.backgroundColor=t),e.color=e.backgroundColor,n.options.plotBands.unshift(e),i.plotBands=i.plotBands||[],i.plotBands.unshift(e)})},defaultOptions:{center:["50%","50%"],size:"85%",startAngle:0},defaultBackgroundOptions:{shape:"circle",borderWidth:1,borderColor:"silver",backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#FFF"],[1,"#DDD"]]},from:-Number.MAX_VALUE,innerRadius:0,to:Number.MAX_VALUE,outerRadius:"105%"}});var A=m.prototype,g=g.prototype,O={getOffset:L,redraw:function(){this.isDirty=!1},render:function(){this.isDirty=!1},setScale:L,setCategories:L,setTitle:L},M={isRadial:!0,defaultRadialGaugeOptions:{labels:{align:"center",x:0,y:null},minorGridLineWidth:0,minorTickInterval:"auto",minorTickLength:10,minorTickPosition:"inside",minorTickWidth:1,tickLength:10,tickPosition:"inside",tickWidth:2,title:{rotation:0},zIndex:2},defaultRadialXOptions:{gridLineWidth:1,labels:{align:null,distance:15,x:0,y:null},maxPadding:0,minPadding:0,showLastLabel:!1,tickLength:0},defaultRadialYOptions:{gridLineInterpolation:"circle",labels:{align:"right",x:-3,y:-2},showLastLabel:!1,title:{x:4,text:null,rotation:90}},setOptions:function(e){e=this.options=u(this.defaultOptions,this.defaultRadialOptions,e),e.plotBands||(e.plotBands=[])},getOffset:function(){A.getOffset.call(this),this.chart.axisOffset[this.side]=0,this.center=this.pane.center=w.getCenter.call(this.pane)},getLinePath:function(e,t){var n=this.center,t=f(t,n[2]/2-this.offset);return this.chart.renderer.symbols.arc(this.left+n[0],this.top+n[1],t,t,{start:this.startAngleRad,end:this.endAngleRad,open:!0,innerR:0})},setAxisTranslation:function(){A.setAxisTranslation.call(this),this.center&&(this.transA=this.isCircular?(this.endAngleRad-this.startAngleRad)/(this.max-this.min||1):this.center[2]/2/(this.max-this.min||1),this.minPixelPadding=this.isXAxis?this.transA*this.minPointOffset:0)},beforeSetTickPositions:function(){this.autoConnect&&(this.max+=this.categories&&1||this.pointRange||this.closestPointRange||0)},setAxisSize:function(){A.setAxisSize.call(this),this.isRadial&&(this.center=this.pane.center=e.CenteredSeriesMixin.getCenter.call(this.pane),this.isCircular&&(this.sector=this.endAngleRad-this.startAngleRad),this.len=this.width=this.height=this.center[2]*f(this.sector,1)/2)},getPosition:function(e,t){return this.postTranslate(this.isCircular?this.translate(e):0,f(this.isCircular?t:this.translate(e),this.center[2]/2)-this.offset)},postTranslate:function(e,t){var n=this.chart,r=this.center,e=this.startAngleRad+e;return{x:n.plotLeft+r[0]+Math.cos(e)*t,y:n.plotTop+r[1]+Math.sin(e)*t}},getPlotBandPath:function(e,t,n){var r=this.center,i=this.startAngleRad,s=r[2]/2,o=[f(n.outerRadius,"100%"),n.innerRadius,f(n.thickness,10)],u=/%$/,c,h=this.isCircular;return this.options.gridLineInterpolation==="polygon"?r=this.getPlotLinePath(e).concat(this.getPlotLinePath(t,!0)):(e=Math.max(e,this.min),t=Math.min(t,this.max),h||(o[0]=this.translate(e),o[1]=this.translate(t)),o=a(o,function(e){return u.test(e)&&(e=l(e,10)*s/100),e}),n.shape==="circle"||!h?(e=-Math.PI/2,t=Math.PI*1.5,c=!0):(e=i+this.translate(e),t=i+this.translate(t)),r=this.chart.renderer.symbols.arc(this.left+r[0],this.top+r[1],o[0],o[0],{start:Math.min(e,t),end:Math.max(e,t),innerR:f(o[1],o[0]-o[2]),open:c})),r},getPlotLinePath:function(e,t){var n=this,r=n.center,i=n.chart,o=n.getPosition(e),u,a,f;return n.isCircular?f=["M",r[0]+i.plotLeft,r[1]+i.plotTop,"L",o.x,o.y]:n.options.gridLineInterpolation==="circle"?(e=n.translate(e))&&(f=n.getLinePath(0,e)):(s(i.xAxis,function(e){e.pane===n.pane&&(u=e)}),f=[],e=n.translate(e),r=u.tickPositions,u.autoConnect&&(r=r.concat([r[0]])),t&&(r=[].concat(r).reverse()),s(r,function(t,n){a=u.getPosition(t,e),f.push(n?"L":"M",a.x,a.y)})),f},getTitlePosition:function(){var e=this.center,t=this.chart,n=this.options.title;return{x:t.plotLeft+e[0]+(n.x||0),y:t.plotTop+e[1]-{high:.5,middle:.25,low:0}[n.align]*e[2]+(n.y||0)}}};v(A,"init",function(e,r,i){var s,a=r.angular,l=r.polar,c=i.isX,h=a&&c,p,v;v=r.options;var m=i.pane||0;if(a){if(o(this,h?O:M),p=!c)this.defaultRadialOptions=this.defaultRadialGaugeOptions}else l&&(o(this,M),this.defaultRadialOptions=(p=c)?this.defaultRadialXOptions:u(this.defaultYAxisOptions,this.defaultRadialYOptions));e.call(this,r,i),!h&&(a||l)&&(e=this.options,r.panes||(r.panes=[]),this.pane=(s=r.panes[m]=r.panes[m]||new n(d(v.pane)[m],r,this),m=s),m=m.options,r.inverted=!1,v.chart.zoomType=null,this.startAngleRad=r=(m.startAngle-90)*Math.PI/180,this.endAngleRad=v=(f(m.endAngle,m.startAngle+360)-90)*Math.PI/180,this.offset=e.offset||0,(this.isCircular=p)&&i.max===t&&v-r===2*Math.PI&&(this.autoConnect=!0))}),v(g,"getPosition",function(e,t,n,r,i){var s=this.axis;return s.getPosition?s.getPosition(n):e.call(this,t,n,r,i)}),v(g,"getLabelPosition",function(e,t,n,r,i,s,o,u,a){var l=this.axis,c=s.y,h=20,p=s.align,d=(l.translate(this.pos)+l.startAngleRad+Math.PI/2)/Math.PI*180%360;return l.isRadial?(e=l.getPosition(this.pos,l.center[2]/2+f(s.distance,-25)),s.rotation==="auto"?r.attr({rotation:d}):c===null&&(c=l.chart.renderer.fontMetrics(r.styles.fontSize).b-r.getBBox().height/2),p===null&&(l.isCircular?(this.label.getBBox().width>l.len*l.tickInterval/(l.max-l.min)&&(h=0),p=d>h&&d<180-h?"left":d>180+h&&d<360-h?"right":"center"):p="center",r.attr({align:p})),e.x+=s.x,e.y+=c):e=e.call(this,t,n,r,i,s,o,u,a),e}),v(g,"getMarkPath",function(e,t,n,r,i,s,o){var u=this.axis;return u.isRadial?(e=u.getPosition(this.pos,u.center[2]/2+r),t=["M",t,n,"L",e.x,e.y]):t=e.call(this,t,n,r,i,s,o),t}),c.arearange=u(c.area,{lineWidth:1,marker:null,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">●</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0,dataLabels:{align:null,verticalAlign:null,xLow:0,xHigh:0,yLow:0,yHigh:0},states:{hover:{halo:!1}}}),h.arearange=p(h.area,{type:"arearange",pointArrayMap:["low","high"],dataLabelCollections:["dataLabel","dataLabelUpper"],toYData:function(e){return[e.low,e.high]},pointValKey:"low",deferTranslatePolar:!0,highToXY:function(e){var t=this.chart,n=this.xAxis.postTranslate(e.rectPlotX,this.yAxis.len-e.plotHigh);e.plotHighX=n.x-t.plotLeft,e.plotHigh=n.y-t.plotTop},getSegments:function(){var e=this;s(e.points,function(t){!!e.options.connectNulls||t.low!==null&&t.high!==null?t.low===null&&t.high!==null&&(t.y=t.high):t.y=null}),S.prototype.getSegments.call(this)},translate:function(){var e=this,t=e.yAxis;h.area.prototype.translate.apply(e),s(e.points,function(e){var n=e.low,r=e.high,i=e.plotY;r===null&&n===null?e.y=null:n===null?(e.plotLow=e.plotY=null,e.plotHigh=t.translate(r,0,1,0,1)):r===null?(e.plotLow=i,e.plotHigh=null):(e.plotLow=i,e.plotHigh=t.translate(r,0,1,0,1))}),this.chart.polar&&s(this.points,function(t){e.highToXY(t)})},getSegmentPath:function(e){var t,n=[],r=e.length,i=S.prototype.getSegmentPath,s,o;o=this.options;var u=o.step;for(t=HighchartsAdapter.grep(e,function(e){return e.plotLow!==null});r--;)s=e[r],s.plotHigh!==null&&n.push({plotX:s.plotHighX||s.plotX,plotY:s.plotHigh});return e=i.call(this,t),u&&(u===!0&&(u="left"),o.step={left:"right",center:"center",right:"left"}[u]),n=i.call(this,n),o.step=u,o=[].concat(e,n),this.chart.polar||(n[0]="L"),this.areaPath=this.areaPath.concat(e,n),o},drawDataLabels:function(){var e=this.data,t=e.length,n,r=[],i=S.prototype,s=this.options.dataLabels,o=s.align,u,a,f=this.chart.inverted;if(s.enabled||this._hasPointLabels){for(n=t;n--;)if(u=e[n])(a=u.plotHigh>u.plotLow,u.y=u.high,u._plotY=u.plotY,u.plotY=u.plotHigh,r[n]=u.dataLabel,u.dataLabel=u.dataLabelUpper,u.below=a,f)?(o||(s.align=a?"right":"left"),s.x=s.xHigh):s.y=s.yHigh;i.drawDataLabels&&i.drawDataLabels.apply(this,arguments);for(n=t;n--;)if(u=e[n])(a=u.plotHigh>u.plotLow,u.dataLabelUpper=u.dataLabel,u.dataLabel=r[n],u.y=u.low,u.plotY=u._plotY,u.below=!a,f)?(o||(s.align=a?"left":"right"),s.x=s.xLow):s.y=s.yLow;i.drawDataLabels&&i.drawDataLabels.apply(this,arguments)}s.align=o},alignDataLabel:function(){h.column.prototype.alignDataLabel.apply(this,arguments)},setStackedPoints:L,getSymbol:L,drawPoints:L}),c.areasplinerange=u(c.arearange),h.areasplinerange=p(h.arearange,{type:"areasplinerange",getPointSpline:h.spline.prototype.getPointSpline}),function(){var e=h.column.prototype;c.columnrange=u(c.column,c.arearange,{lineWidth:1,pointRange:null}),h.columnrange=p(h.arearange,{type:"columnrange",translate:function(){var t=this,n=t.yAxis,r;e.translate.apply(t),s(t.points,function(e){var i=e.shapeArgs,s=t.options.minPointLength,o;e.tooltipPos=null,e.plotHigh=r=n.translate(e.high,0,1,0,1),e.plotLow=e.plotY,o=r,e=e.plotY-r,Math.abs(e)<s?(s-=e,e+=s,o-=s/2):e<0&&(e*=-1,o-=e),i.height=e,i.y=o})},directTouch:!0,trackerGroups:["group","dataLabelsGroup"],drawGraph:L,pointAttrToOptions:e.pointAttrToOptions,drawPoints:e.drawPoints,drawTracker:e.drawTracker,animate:e.animate,getColumnMetrics:e.getColumnMetrics})}(),c.gauge=u(c.line,{dataLabels:{enabled:!0,defer:!1,y:15,borderWidth:1,borderColor:"silver",borderRadius:3,crop:!1,verticalAlign:"top",zIndex:2},dial:{},pivot:{},tooltip:{headerFormat:""},showInLegend:!1}),E={type:"gauge",pointClass:p(y,{setState:function(e){this.state=e}}),angular:!0,drawGraph:L,fixedBox:!0,forceDL:!0,trackerGroups:["group","dataLabelsGroup"],translate:function(){var e=this.yAxis,t=this.options,n=e.center;this.generatePoints(),s(this.points,function(r){var i=u(t.dial,r.dial),s=l(f(i.radius,80))*n[2]/200,o=l(f(i.baseLength,70))*s/100,a=l(f(i.rearLength,10))*s/100,c=i.baseWidth||3,h=i.topWidth||1,p=t.overshoot,d=e.startAngleRad+e.translate(r.y,null,null,null,!0);p&&typeof p=="number"?(p=p/180*Math.PI,d=Math.max(e.startAngleRad-p,Math.min(e.endAngleRad+p,d))):t.wrap===!1&&(d=Math.max(e.startAngleRad,Math.min(e.endAngleRad,d))),d=d*180/Math.PI,r.shapeType="path",r.shapeArgs={d:i.path||["M",-a,-c/2,"L",o,-c/2,s,-h/2,s,h/2,o,c/2,-a,c/2,"z"],translateX:n[0],translateY:n[1],rotation:d},r.plotX=n[0],r.plotY=n[1]})},drawPoints:function(){var e=this,t=e.yAxis.center,n=e.pivot,r=e.options,i=r.pivot,o=e.chart.renderer;s(e.points,function(t){var n=t.graphic,i=t.shapeArgs,s=i.d,a=u(r.dial,t.dial);n?(n.animate(i),i.d=s):t.graphic=o[t.shapeType](i).attr({stroke:a.borderColor||"none","stroke-width":a.borderWidth||0,fill:a.backgroundColor||"black",rotation:i.rotation}).add(e.group)}),n?n.animate({translateX:t[0],translateY:t[1]}):e.pivot=o.circle(0,0,f(i.radius,5)).attr({"stroke-width":i.borderWidth||0,stroke:i.borderColor||"silver",fill:i.backgroundColor||"black"}).translate(t[0],t[1]).add(e.group)},animate:function(e){var t=this;e||(s(t.points,function(e){var n=e.graphic;n&&(n.attr({rotation:t.yAxis.startAngleRad*180/Math.PI}),n.animate({rotation:e.shapeArgs.rotation},t.options.animation))}),t.animate=null)},render:function(){this.group=this.plotGroup("group","series",this.visible?"visible":"hidden",this.options.zIndex,this.chart.seriesGroup),S.prototype.render.call(this),this.group.clip(this.chart.clipRect)},setData:function(e,t){S.prototype.setData.call(this,e,!1),this.processData(),this.generatePoints(),f(t,!0)&&this.chart.redraw()},drawTracker:E&&E.drawTrackerPoint},h.gauge=p(h.line,E),c.boxplot=u(c.column,{fillColor:"#FFFFFF",lineWidth:1,medianWidth:2,states:{hover:{brightness:-0.3}},threshold:null,tooltip:{pointFormat:'<span style="color:{point.color}">●</span> <b> {series.name}</b><br/>Maximum: {point.high}<br/>Upper quartile: {point.q3}<br/>Median: {point.median}<br/>Lower quartile: {point.q1}<br/>Minimum: {point.low}<br/>'},whiskerLength:"50%",whiskerWidth:2}),h.boxplot=p(h.column,{type:"boxplot",pointArrayMap:["low","q1","median","q3","high"],toYData:function(e){return[e.low,e.q1,e.median,e.q3,e.high]},pointValKey:"high",pointAttrToOptions:{fill:"fillColor",stroke:"color","stroke-width":"lineWidth"},drawDataLabels:L,translate:function(){var e=this.yAxis,t=this.pointArrayMap;h.column.prototype.translate.apply(this),s(this.points,function(n){s(t,function(t){n[t]!==null&&(n[t+"Plot"]=e.translate(n[t],0,1,0,1))})})},drawPoints:function(){var e=this,n=e.points,r=e.options,i=e.chart.renderer,o,u,a,l,c,h,p,d,v,m,g,y,b,w,E,S,x,C,k,L,A,O,M=e.doQuartiles!==!1,_=parseInt(e.options.whiskerLength,10)/100;s(n,function(n){v=n.graphic,A=n.shapeArgs,g={},w={},S={},O=n.color||e.color,n.plotY!==t&&((o=n.pointAttr[n.selected?"selected":""],x=A.width,C=N(A.x),k=C+x,L=T(x/2),u=N(M?n.q1Plot:n.lowPlot),a=N(M?n.q3Plot:n.lowPlot),l=N(n.highPlot),c=N(n.lowPlot),g.stroke=n.stemColor||r.stemColor||O,g["stroke-width"]=f(n.stemWidth,r.stemWidth,r.lineWidth),g.dashstyle=n.stemDashStyle||r.stemDashStyle,w.stroke=n.whiskerColor||r.whiskerColor||O,w["stroke-width"]=f(n.whiskerWidth,r.whiskerWidth,r.lineWidth),S.stroke=n.medianColor||r.medianColor||O,S["stroke-width"]=f(n.medianWidth,r.medianWidth,r.lineWidth),p=g["stroke-width"]%2/2,d=C+L+p,m=["M",d,a,"L",d,l,"M",d,u,"L",d,c],M&&(p=o["stroke-width"]%2/2,d=N(d)+p,u=N(u)+p,a=N(a)+p,C+=p,k+=p,y=["M",C,a,"L",C,u,"L",k,u,"L",k,a,"L",C,a,"z"]),_&&(p=w["stroke-width"]%2/2,l+=p,c+=p,b=["M",d-L*_,l,"L",d+L*_,l,"M",d-L*_,c,"L",d+L*_,c]),p=S["stroke-width"]%2/2,h=T(n.medianPlot)+p,E=["M",C,h,"L",k,h],v)?(n.stem.animate({d:m}),_&&n.whiskers.animate({d:b}),M&&n.box.animate({d:y}),n.medianShape.animate({d:E})):(n.graphic=v=i.g().add(e.group),n.stem=i.path(m).attr(g).add(v),_&&(n.whiskers=i.path(b).attr(w).add(v)),M&&(n.box=i.path(y).attr(o).add(v)),n.medianShape=i.path(E).attr(S).add(v)))})},setStackedPoints:L}),c.errorbar=u(c.boxplot,{color:"#000000",grouping:!1,linkedTo:":previous",tooltip:{pointFormat:'<span style="color:{point.color}">●</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},whiskerWidth:null}),h.errorbar=p(h.boxplot,{type:"errorbar",pointArrayMap:["low","high"],toYData:function(e){return[e.low,e.high]},pointValKey:"high",doQuartiles:!1,drawDataLabels:h.arearange?h.arearange.prototype.drawDataLabels:L,getColumnMetrics:function(){return this.linkedParent&&this.linkedParent.columnMetrics||h.column.prototype.getColumnMetrics.call(this)}}),c.waterfall=u(c.column,{lineWidth:1,lineColor:"#333",dashStyle:"dot",borderColor:"#333",dataLabels:{inside:!0},states:{hover:{lineWidthPlus:0}}}),h.waterfall=p(h.column,{type:"waterfall",upColorProp:"fill",pointValKey:"y",translate:function(){var e=this.options,t=this.yAxis,n,r,i,s,o,u,a,f,l,c=e.threshold,p=e.stacking;h.column.prototype.translate.apply(this),a=f=c,r=this.points;for(n=0,e=r.length;n<e;n++)i=r[n],u=this.processedYData[n],s=i.shapeArgs,l=(o=p&&t.stacks[(this.negStacks&&u<c?"-":"")+this.stackKey])?o[i.x].points[this.index+","+n]:[0,u],i.isSum?i.y=u:i.isIntermediateSum&&(i.y=u-f),o=C(a,a+i.y)+l[0],s.y=t.translate(o,0,1),i.isSum?(s.y=t.translate(l[1],0,1),s.height=Math.min(t.translate(l[0],0,1),t.len)-s.y):i.isIntermediateSum?(s.y=t.translate(l[1],0,1),s.height=Math.min(t.translate(f,0,1),t.len)-s.y,f=l[1]):(a!==0&&(s.height=u>0?t.translate(a,0,1)-s.y:t.translate(a,0,1)-t.translate(a-u,0,1)),a+=u),s.height<0&&(s.y+=s.height,s.height*=-1),i.plotY=s.y=T(s.y)-this.borderWidth%2/2,s.height=C(T(s.height),.001),i.yBottom=s.y+s.height,s=i.plotY+(i.negative?s.height:0),this.chart.inverted?i.tooltipPos[0]=t.len-s:i.tooltipPos[1]=s},processData:function(e){var t=this.yData,n=this.options.data,r,i=t.length,s,o,u,a,f,l;o=s=u=a=this.options.threshold||0;for(l=0;l<i;l++)f=t[l],r=n&&n[l]?n[l]:{},f==="sum"||r.isSum?t[l]=o:f==="intermediateSum"||r.isIntermediateSum?t[l]=s:(o+=f,s+=f),u=Math.min(o,u),a=Math.max(o,a);S.prototype.processData.call(this,e),this.dataMin=u,this.dataMax=a},toYData:function(e){return e.isSum?e.x===0?null:"sum":e.isIntermediateSum?e.x===0?null:"intermediateSum":e.y},getAttribs:function(){h.column.prototype.getAttribs.apply(this,arguments);var t=this,n=t.options,r=n.states,i=n.upColor||t.color,n=e.Color(i).brighten(.1).get(),o=u(t.pointAttr),a=t.upColorProp;o[""][a]=i,o.hover[a]=r.hover.upColor||n,o.select[a]=r.select.upColor||i,s(t.points,function(e){e.options.color||(e.y>0?(e.pointAttr=o,e.color=i):e.pointAttr=t.pointAttr)})},getGraphPath:function(){var e=this.data,t=e.length,n=T(this.options.lineWidth+this.borderWidth)%2/2,r=[],i,s,o;for(o=1;o<t;o++)s=e[o].shapeArgs,i=e[o-1].shapeArgs,s=["M",i.x+i.width,i.y+n,"L",s.x,i.y+n],e[o-1].y<0&&(s[2]+=i.height,s[5]+=i.height),r=r.concat(s);return r},getExtremes:L,drawGraph:S.prototype.drawGraph}),c.polygon=u(c.scatter,{marker:{enabled:!1}}),h.polygon=p(h.scatter,{type:"polygon",fillGraph:!0,getSegmentPath:function(e){return S.prototype.getSegmentPath.call(this,e).concat("z")},drawGraph:S.prototype.drawGraph,drawLegendSymbol:e.LegendSymbolMixin.drawRectangle}),c.bubble=u(c.scatter,{dataLabels:{formatter:function(){return this.point.z},inside:!0,verticalAlign:"middle"},marker:{lineColor:null,lineWidth:1},minSize:8,maxSize:"20%",states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,zoneAxis:"z"}),E=p(y,{haloPath:function(){return y.prototype.haloPath.call(this,this.shapeArgs.r+this.series.options.states.hover.halo.size)},ttBelow:!1}),h.bubble=p(h.scatter,{type:"bubble",pointClass:E,pointArrayMap:["y","z"],parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],bubblePadding:!0,zoneAxis:"z",pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor"},applyOpacity:function(e){var t=this.options.marker,n=f(t.fillOpacity,.5),e=e||t.fillColor||this.color;return n!==1&&(e=k(e).setOpacity(n).get("rgba")),e},convertAttribs:function(){var e=S.prototype.convertAttribs.apply(this,arguments);return e.fill=this.applyOpacity(e.fill),e},getRadii:function(e,t,n,r){var i,s,o=this.zData,u=[],a=this.options.sizeBy!=="width",f=t-e;for(i=0,t=o.length;i<t;i++)o[i]<e?u.push(n/2-1):(s=f>0?(o[i]-e)/f:.5,a&&s>=0&&(s=Math.sqrt(s)),u.push(x.ceil(n+s*(r-n))/2));this.radii=u},animate:function(e){var t=this.options.animation;e||(s(this.points,function(e){var n=e.graphic,e=e.shapeArgs;n&&e&&(n.attr("r",1),n.animate({r:e.r},t))}),this.animate=null)},translate:function(){var e,n=this.data,r,i,s=this.radii;h.scatter.prototype.translate.call(this);for(e=n.length;e--;)r=n[e],i=s?s[e]:0,i>=this.minPxSize/2?(r.shapeType="circle",r.shapeArgs={x:r.plotX,y:r.plotY,r:i},r.dlBox={x:r.plotX-i,y:r.plotY-i,width:2*i,height:2*i}):r.shapeArgs=r.plotY=r.dlBox=t},drawLegendSymbol:function(e,t){var n=l(e.itemStyle.fontSize)/2;t.legendSymbol=this.chart.renderer.circle(n,e.baseline-n,n).attr({zIndex:3}).add(t.legendGroup),t.legendSymbol.isMarker=!0},drawPoints:h.column.prototype.drawPoints,alignDataLabel:h.column.prototype.alignDataLabel,buildKDTree:L,applyZones:L}),m.prototype.beforePadding=function(){var e=this,n=this.len,o=this.chart,u=0,a=n,c=this.isXAxis,h=c?"xData":"yData",p=this.min,d={},v=x.min(o.plotWidth,o.plotHeight),m=Number.MAX_VALUE,g=-Number.MAX_VALUE,y=this.max-p,b=n/y,w=[];s(this.series,function(t){var n=t.options;t.bubblePadding&&(t.visible||!o.options.chart.ignoreHiddenSeries)&&(e.allowZoomOutside=!0,w.push(t),c)&&(s(["minSize","maxSize"],function(e){var t=n[e],r=/%$/.test(t),t=l(t);d[e]=r?v*t/100:t}),t.minPxSize=d.minSize,t.maxPxSize=d.maxSize,t=t.zData,t.length&&(m=f(n.zMin,x.min(m,x.max(r(t),n.displayNegative===!1?n.zThreshold:-Number.MAX_VALUE))),g=f(n.zMax,x.max(g,i(t)))))}),s(w,function(e){var t=e[h],n=t.length,r;c&&e.getRadii(m,g,e.minPxSize,e.maxPxSize);if(y>0)for(;n--;)typeof t[n]=="number"&&(r=e.radii[n],u=Math.min((t[n]-p)*b-r,u),a=Math.max((t[n]-p)*b+r,a))}),w.length&&y>0&&!this.isLog&&(a-=n,b*=(n+u-a)/n,s([["min","userMin",u],["max","userMax",a]],function(n){f(e.options[n[0]],e[n[1]])===t&&(e[n[0]]+=n[2]/b)}))},function(){function e(e,t,n){e.call(this,t,n),this.chart.polar&&(this.closeSegment=function(e){var t=this.xAxis.center;e.push("L",t[0],t[1])},this.closedStacks=!0)}function t(e,t){var n=this.chart,r=this.options.animation,i=this.group,s=this.markerGroup,o=this.xAxis.center,u=n.plotLeft,a=n.plotTop;n.polar?n.renderer.isSVG&&(r===!0&&(r={}),t?(n={translateX:o[0]+u,translateY:o[1]+a,scaleX:.001,scaleY:.001},i.attr(n),s&&s.attr(n)):(n={translateX:u,translateY:a,scaleX:1,scaleY:1},i.animate(n,r),s&&s.animate(n,r),this.animate=null)):e.call(this,t)}var n=S.prototype,r=b.prototype,i;n.searchPointByAngle=function(e){var t=this.chart,n=this.xAxis.pane.center;return this.searchKDTree({clientX:180+Math.atan2(e.chartX-n[0]-t.plotLeft,e.chartY-n[1]-t.plotTop)*(-180/Math.PI)})},v(n,"buildKDTree",function(e){this.chart.polar&&(this.kdByAngle?this.searchPoint=this.searchPointByAngle:this.kdDimensions=2),e.apply(this)}),n.toXY=function(e){var t,n=this.chart,r=e.plotX;t=e.plotY,e.rectPlotX=r,e.rectPlotY=t,t=this.xAxis.postTranslate(e.plotX,this.yAxis.len-t),e.plotX=e.polarPlotX=t.x-n.plotLeft,e.plotY=e.polarPlotY=t.y-n.plotTop,this.kdByAngle?(n=(r/Math.PI*180+this.xAxis.pane.options.startAngle)%360,n<0&&(n+=360),e.clientX=n):e.clientX=e.plotX},h.area&&v(h.area.prototype,"init",e),h.areaspline&&v(h.areaspline.prototype,"init",e),h.spline&&v(h.spline.prototype,"getPointSpline",function(e,t,n,r){var i,s,o,u,a,f,l;return this.chart.polar?(i=n.plotX,s=n.plotY,e=t[r-1],o=t[r+1],this.connectEnds&&(e||(e=t[t.length-2]),o||(o=t[1])),e&&o&&(u=e.plotX,a=e.plotY,t=o.plotX,f=o.plotY,u=(1.5*i+u)/2.5,a=(1.5*s+a)/2.5,o=(1.5*i+t)/2.5,l=(1.5*s+f)/2.5,t=Math.sqrt(Math.pow(u-i,2)+Math.pow(a-s,2)),f=Math.sqrt(Math.pow(o-i,2)+Math.pow(l-s,2)),u=Math.atan2(a-s,u-i),a=Math.atan2(l-s,o-i),l=Math.PI/2+(u+a)/2,Math.abs(u-l)>Math.PI/2&&(l-=Math.PI),u=i+Math.cos(l)*t,a=s+Math.sin(l)*t,o=i+Math.cos(Math.PI+l)*f,l=s+Math.sin(Math.PI+l)*f,n.rightContX=o,n.rightContY=l),r?(n=["C",e.rightContX||e.plotX,e.rightContY||e.plotY,u||i,a||s,i,s],e.rightContX=e.rightContY=null):n=["M",i,s]):n=e.call(this,t,n,r),n}),v(n,"translate",function(e){var t=this.chart;e.call(this);if(t.polar&&(this.kdByAngle=t.tooltip&&t.tooltip.shared,!this.preventPostTranslate)){e=this.points;for(t=e.length;t--;)this.toXY(e[t])}}),v(n,"getSegmentPath",function(e,t){var n=this.points;return this.chart.polar&&this.options.connectEnds!==!1&&t[t.length-1]===n[n.length-1]&&n[0].y!==null&&(this.connectEnds=!0,t=[].concat(t,[n[0]])),e.call(this,t)}),v(n,"animate",t),h.column&&(i=h.column.prototype,v(i,"animate",t),v(i,"translate",function(e){var t=this.xAxis,n=this.yAxis.len,r=t.center,i=t.startAngleRad,s=this.chart.renderer,o,u;this.preventPostTranslate=!0,e.call(this);if(t.isRadial){t=this.points;for(u=t.length;u--;)o=t[u],e=o.barX+i,o.shapeType="path",o.shapeArgs={d:s.symbols.arc(r[0],r[1],n-o.plotY,null,{start:e,end:e+o.pointWidth,innerR:n-f(o.yBottom,n)})},this.toXY(o),o.tooltipPos=[o.plotX,o.plotY],o.ttBelow=o.plotY>r[1]}}),v(i,"alignDataLabel",function(e,t,r,i,s,o){this.chart.polar?(e=t.rectPlotX/Math.PI*180,i.align===null&&(i.align=e>20&&e<160?"left":e>200&&e<340?"right":"center"),i.verticalAlign===null&&(i.verticalAlign=e<45||e>315?"bottom":e>135&&e<225?"top":"middle"),n.alignDataLabel.call(this,t,r,i,s,o)):e.call(this,t,r,i,s,o)})),v(r,"getCoordinates",function(e,t){var n=this.chart,r={xAxis:[],yAxis:[]};return n.polar?s(n.axes,function(e){var i=e.isXAxis,s=e.center,o=t.chartX-s[0]-n.plotLeft,s=t.chartY-s[1]-n.plotTop;r[i?"xAxis":"yAxis"].push({axis:e,value:e.translate(i?Math.PI-Math.atan2(o,s):Math.sqrt(Math.pow(o,2)+Math.pow(s,2)),!0)})}):r=e.call(this,t),r})}()}(Highcharts),function(e){var t=e.Chart,n=e.addEvent,r=e.removeEvent,i=HighchartsAdapter.fireEvent,s=e.createElement,o=e.discardElement,u=e.css,a=e.merge,f=e.each,l=e.extend,c=e.splat,h=Math.max,p=document,d=window,v=e.isTouchDevice,m=e.Renderer.prototype.symbols,g=e.getOptions(),y;l(g.lang,{printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"}),g.navigation={menuStyle:{border:"1px solid #A0A0A0",background:"#FFFFFF",padding:"5px 0"},menuItemStyle:{padding:"0 10px",background:"none",color:"#303030",fontSize:v?"14px":"11px"},menuItemHoverStyle:{background:"#4572A5",color:"#FFFFFF"},buttonOptions:{symbolFill:"#E0E0E0",symbolSize:14,symbolStroke:"#666",symbolStrokeWidth:3,symbolX:12.5,symbolY:10.5,align:"right",buttonSpacing:3,height:22,theme:{fill:"white",stroke:"none"},
verticalAlign:"top",width:24}},g.exporting={type:"image/png",url:"http://export.highcharts.com/",buttons:{contextButton:{menuClassName:"highcharts-contextmenu",symbol:"menu",_titleKey:"contextButtonTitle",menuItems:[{textKey:"printChart",onclick:function(){this.print()}},{separator:!0},{textKey:"downloadPNG",onclick:function(){this.exportChart()}},{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}]}}},e.post=function(e,t,n){var r,e=s("form",a({method:"post",action:e,enctype:"multipart/form-data"},n),{display:"none"},p.body);for(r in t)s("input",{type:"hidden",name:r,value:t[r]},null,e);e.submit(),o(e)},l(t.prototype,{sanitizeSVG:function(e){return e.replace(/zIndex="[^"]+"/g,"").replace(/isShadow="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ (NS[0-9]+\:)?href=/g," xlink:href=").replace(/\n/," ").replace(/<\/svg>.*?$/,"</svg>").replace(/(fill|stroke)="rgba\(([ 0-9]+,[ 0-9]+,[ 0-9]+),([ 0-9\.]+)\)"/g,'$1="rgb($2)" $1-opacity="$3"').replace(/&nbsp;/g," ").replace(/&shy;/g,"­").replace(/<IMG /g,"<image ").replace(/<(\/?)TITLE>/g,"<$1title>").replace(/height=([^" ]+)/g,'height="$1"').replace(/width=([^" ]+)/g,'width="$1"').replace(/hc-svg-href="([^"]+)">/g,'xlink:href="$1"/>').replace(/ id=([^" >]+)/g,' id="$1"').replace(/class=([^" >]+)/g,'class="$1"').replace(/ transform /g," ").replace(/:(path|rect)/g,"$1").replace(/style="([^"]+)"/g,function(e){return e.toLowerCase()})},getChartHTML:function(){return this.container.innerHTML},getSVG:function(t){var n=this,r,i,u,h,d,v=a(n.options,t),m=v.exporting.allowHTML;return p.createElementNS||(p.createElementNS=function(e,t){return p.createElement(t)}),i=s("div",null,{position:"absolute",top:"-9999em",width:n.chartWidth+"px",height:n.chartHeight+"px"},p.body),u=n.renderTo.style.width,d=n.renderTo.style.height,u=v.exporting.sourceWidth||v.chart.width||/px$/.test(u)&&parseInt(u,10)||600,d=v.exporting.sourceHeight||v.chart.height||/px$/.test(d)&&parseInt(d,10)||400,l(v.chart,{animation:!1,renderTo:i,forExport:!m,width:u,height:d}),v.exporting.enabled=!1,delete v.data,v.series=[],f(n.series,function(e){h=a(e.options,{animation:!1,enableMouseTracking:!1,showCheckbox:!1,visible:e.visible}),h.isInternal||v.series.push(h)}),t&&f(["xAxis","yAxis"],function(e){f(c(t[e]),function(t,n){v[e][n]=a(v[e][n],t)})}),r=new e.Chart(v,n.callback),f(["xAxis","yAxis"],function(e){f(n[e],function(t,n){var i=r[e][n],s=t.getExtremes(),o=s.userMin,s=s.userMax;i&&(o!==void 0||s!==void 0)&&i.setExtremes(o,s,!0,!1)})}),u=r.getChartHTML(),v=null,r.destroy(),o(i),m&&(i=u.match(/<\/svg>(.*?$)/))&&(i='<foreignObject x="0" y="0 width="200" height="200"><body xmlns="http://www.w3.org/1999/xhtml">'+i[1]+"</body></foreignObject>",u=u.replace("</svg>",i+"</svg>")),u=this.sanitizeSVG(u),u=u.replace(/(url\(#highcharts-[0-9]+)&quot;/g,"$1").replace(/&quot;/g,"'")},getSVGForExport:function(e,t){var n=this.options.exporting;return this.getSVG(a({chart:{borderRadius:0}},n.chartOptions,t,{exporting:{sourceWidth:e&&e.sourceWidth||n.sourceWidth,sourceHeight:e&&e.sourceHeight||n.sourceHeight}}))},exportChart:function(t,n){var r=this.getSVGForExport(t,n),t=a(this.options.exporting,t);e.post(t.url,{filename:t.filename||"chart",type:t.type,width:t.width||0,scale:t.scale||2,svg:r},t.formAttributes)},print:function(){var e=this,t=e.container,n=[],r=t.parentNode,s=p.body,o=s.childNodes;e.isPrinting||(e.isPrinting=!0,i(e,"beforePrint"),f(o,function(e,t){e.nodeType===1&&(n[t]=e.style.display,e.style.display="none")}),s.appendChild(t),d.focus(),d.print(),setTimeout(function(){r.appendChild(t),f(o,function(e,t){e.nodeType===1&&(e.style.display=n[t])}),e.isPrinting=!1,i(e,"afterPrint")},1e3))},contextMenu:function(e,t,i,o,a,c,p){var d=this,v=d.options.navigation,m=v.menuItemStyle,g=d.chartWidth,y=d.chartHeight,b="cache-"+e,w=d[b],E=h(a,c),S,x,T,N=function(t){d.pointer.inClass(t.target,e)||x()};w||(d[b]=w=s("div",{className:e},{position:"absolute",zIndex:1e3,padding:E+"px"},d.container),S=s("div",null,l({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},v.menuStyle),w),x=function(){u(w,{display:"none"}),p&&p.setState(0),d.openMenu=!1},n(w,"mouseleave",function(){T=setTimeout(x,500)}),n(w,"mouseenter",function(){clearTimeout(T)}),n(document,"mouseup",N),n(d,"destroy",function(){r(document,"mouseup",N)}),f(t,function(e){if(e){var t=e.separator?s("hr",null,null,S):s("div",{onmouseover:function(){u(this,v.menuItemHoverStyle)},onmouseout:function(){u(this,m)},onclick:function(t){t.stopPropagation(),x(),e.onclick&&e.onclick.apply(d,arguments)},innerHTML:e.text||d.options.lang[e.textKey]},l({cursor:"pointer"},m),S);d.exportDivElements.push(t)}}),d.exportDivElements.push(S,w),d.exportMenuWidth=w.offsetWidth,d.exportMenuHeight=w.offsetHeight),t={display:"block"},i+d.exportMenuWidth>g?t.right=g-i-a-E+"px":t.left=i-E+"px",o+c+d.exportMenuHeight>y&&p.alignOptions.verticalAlign!=="top"?t.bottom=y-o-E+"px":t.top=o+c-E+"px",u(w,t),d.openMenu=!0},addButton:function(t){var n=this,r=n.renderer,i=a(n.options.navigation.buttonOptions,t),s=i.onclick,o=i.menuItems,u,f,c={stroke:i.symbolStroke,fill:i.symbolFill},h=i.symbolSize||12;n.btnCount||(n.btnCount=0),n.exportDivElements||(n.exportDivElements=[],n.exportSVGElements=[]);if(i.enabled!==!1){var p=i.theme,d=p.states,v=d&&d.hover,d=d&&d.select,m;delete p.states,s?m=function(e){e.stopPropagation(),s.call(n,e)}:o&&(m=function(){n.contextMenu(f.menuClassName,o,f.translateX,f.translateY,f.width,f.height,f),f.setState(2)}),i.text&&i.symbol?p.paddingLeft=e.pick(p.paddingLeft,25):i.text||l(p,{width:i.width,height:i.height,padding:0}),f=r.button(i.text,0,0,m,p,v,d).attr({title:n.options.lang[i._titleKey],"stroke-linecap":"round"}),f.menuClassName=t.menuClassName||"highcharts-menu-"+n.btnCount++,i.symbol&&(u=r.symbol(i.symbol,i.symbolX-h/2,i.symbolY-h/2,h,h).attr(l(c,{"stroke-width":i.symbolStrokeWidth||1,zIndex:1})).add(f)),f.add().align(l(i,{width:f.width,x:e.pick(i.x,y)}),!0,"spacingBox"),y+=(f.width+i.buttonSpacing)*(i.align==="right"?-1:1),n.exportSVGElements.push(f,u)}},destroyExport:function(e){var e=e.target,t,n;for(t=0;t<e.exportSVGElements.length;t++)if(n=e.exportSVGElements[t])n.onclick=n.ontouchstart=null,e.exportSVGElements[t]=n.destroy();for(t=0;t<e.exportDivElements.length;t++)n=e.exportDivElements[t],r(n,"mouseleave"),e.exportDivElements[t]=n.onmouseout=n.onmouseover=n.ontouchstart=n.onclick=null,o(n)}}),m.menu=function(e,t,n,r){return["M",e,t+2.5,"L",e+n,t+2.5,"M",e,t+r/2+.5,"L",e+n,t+r/2+.5,"M",e,t+r-1.5,"L",e+n,t+r-1.5]},t.prototype.callbacks.push(function(e){var t,r=e.options.exporting,i=r.buttons;y=0;if(r.enabled!==!1){for(t in i)e.addButton(i[t]);n(e,"destroy",e.destroyExport)}})}(Highcharts),function(){$(document).on("page:load ready",function(){var e,t,n,r;if($(".form-reports").length===0)return;return GD.charts={},$(".form-reports").on("click",".chart-download",function(){var e,t;e=GD.charts[$(this).data("target")],t=encodeURI($(this).data("chart-name")+"_chart");if(e)return e.exportChart({filename:t})}),e=function(){function e(e,t,n,r){var i,s,o,u,a,f,l,c,h,p,d;r==null&&(r=null),this.options=this.defaultOptions(),this.options.chart.renderTo=n,this.options.chart.type=t,s=$("#"+n).width(),a=$("#"+n).next().height(),this.options.chart.height=Math.min(s,a),l={showInLegend:!1,name:"数量",data:[]},d=0,i=[],p=e.choices;for(f=0,h=p.length;f<h;f++)o=p[f],c=o[0],u=o[1],l.data.push({name:c,y:u}),i.push(c),d+=u;e.sum!=null&&(d=e.sum),this.options.series.push(l),this.options.plotOptions.series.dataLabels.formatter=function(){var e;return e=Highcharts.numberFormat(this.y*100/d,1),e+" %"},this.options.xAxis.categories=i,r&&r(this.options)}return e.prototype.defaultOptions=function(){return{chart:{marginTop:36,backgroundColor:GD.isMobile?"transparent":"#FFFFFF"},colors:["#54C7FC","#FFB54D","#FF7466","#44DB5E","#4D9FFF","#FFD300"],credits:{enabled:!1},title:{text:null},xAxis:{labels:{style:{fontFamily:"verdana"},useHTML:!0,formatter:function(){return"<span>"+this.value+"</span>"}}},yAxis:{min:0,labels:{enabled:!1,style:{fontFamily:"verdana"}},title:{text:null},gridLineWidth:0},exporting:{enabled:!1,scale:1.6},tooltip:{borderRadius:0,borderColor:"#4D9FFF",shadow:!1,useHTML:!0},plotOptions:{bar:{shadow:!1},pie:{dataLabels:{distance:15,style:{fontFamily:"verdana"}}},series:{pointWidth:12,pointPadding:0,groupPadding:0,borderWidth:0,colorByPoint:!0,dataLabels:{enabled:!0}}},series:[]}},e.prototype.render=function(){return GD.charts[this.options.chart.renderTo]=new Highcharts.Chart(this.options)},e}(),t=function(){function t(t,n){this.chart=(new e(t,"bar",n,function(e){return e.chart.height=$("#"+n).next().height()})).render()}return t}(),n=function(){function t(t,n){this.chart=(new e(t,"column",n,function(e){e.xAxis.labels={align:"right",rotation:-45,useHTML:!1,style:{fontFamily:"verdana"},formatter:function(){return this.value.length>5?this.value.slice(0,5)+"...":this.value}},e.chart.height=$("#"+n).height();if($("#"+n).hasClass("compact"))return e.chart.marginTop=10})).render()}return t}(),r=function(){function t(t,n){this.chart=(new e(t,"pie",n,function(e){return e.plotOptions.series.dataLabels.formatter=function(){var e;return e=this.point.name.length>15?this.point.name.slice(0,15)+"...":this.point.name,e+" "+Highcharts.numberFormat(this.percentage,1)+" %"}})).render()}return t}(),GD.ReportChart=function(){function e(e){var i,s,o,u,a;u=e.attr("id"),i=_.clone(e.data("report")),i.choices=_.pairs(i.choices),o=e.data("sort"),!o||(s=_.sortBy(i.choices,function(e){return o==="desc"?-e[1]:e[1]}),i.choices=s),a=e.data("chart-type");switch(a){case"column":new n(i,u);break;case"pie":new r(i,u);break;default:new t(i,u)}}return e}(),GD.ReportLineChart=function(){function e(e){this.options={chart:{renderTo:e.div_id,type:"line"},colors:["#73a8c7","#da6d4e","#edb055","#b1c95b","#c3aad0"],credits:{enabled:!1},title:{text:e.title},legend:{borderRadius:0},xAxis:{type:"datetime",dateTimeLabelFormats:{day:"%m-%d"}},yAxis:{title:{text:e.y_label},min:0,allowDecimals:!1},tooltip:{xDateFormat:"%Y-%m-%d",borderRadius:0,borderColor:"#333",shadow:!1,style:{lineHeight:"150%",padding:"8px"}},series:[{name:e.y_label,data:e.data,pointStart:e.start_date,pointInterval:864e5}]}}return e.prototype.render=function(){return Highcharts.setOptions({global:{useUTC:!1}}),new Highcharts.Chart(this.options)},e}()})}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;window.GD||(window.GD={}),$(function(){var t,n,r;return t=function(){function e(e){this.$container=e,this.mobile=$("body").hasClass("mobile"),this.initialMap()}return e.prototype._noOverrideError=function(e){throw"can't find "+e+" in subclass"},e.prototype._initMap=function(){return this._noOverrideError("_initMap")},e.prototype.initialMap=function(){return this.geoMapDom=this.$container.find(".map-container")[0],this.coordsList=$(this.geoMapDom).data("coordinates"),this.coordsList.length===0?$(this.geoMapDom).closest(".geo-map-container").html("<div class='no-geo-data'>"+l("%no_geo_data")+"</div>"):(this.fieldApiCode=$(this.geoMapDom).data("api-code"),this.urlPrefix=$(this.geoMapDom).data("url-prefix"),this._initMap(),this.initialExistedPositions())},e.prototype._initIcons=function(){return this._noOverrideError("_initIcons")},e.prototype._addMarker=function(e,t,n,r,i){return this._noOverrideError("_addMarker")},e.prototype._onMarkersAdded=function(){return this._noOverrideError("_onMarkersAdded")},e.prototype.initialExistedPositions=function(){return this._initIcons(),_.each(this.coordsList,function(e){return function(t,n){var r,i;return r=t.latitude,i=t.longitude,e._addMarker(parseFloat(r),parseFloat(i),t.address,t.entry_id,n)}}(this)),this._onMarkersAdded()},e.prototype._updateMarker=function(e){return this._noOverrideError("_updateMarker")},e.prototype.selectMarker=function(e,t){var n;this._updateMarker(e);if(!this.mobile)return n=this.urlPrefix+"/"+t+"/entry_for_geo_report",$.get(n,{id:t,field_api_code:this.fieldApiCode},function(e){return function(t){return e.$container.find(".geo-entry-container dl.details").html(t),e.$container.find(".selected-geo-entry").scrollTop(0)}}(this))},e}(),n=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype._initMap=function(){return this.mapObj=new AMap.Map(this.geoMapDom),this.mapObj.plugin(["AMap.ToolBar"],function(e){return function(){var t;return t=new AMap.ToolBar({direction:!1,offset:e.mobile?new AMap.Pixel(2,65):new AMap.Pixel(-10,5)}),e.mapObj.addControl(t)}}(this))},n.prototype._initIcons=function(){var e;return e=new AMap.Size(22,22),this.defaultIcon=new AMap.Icon({size:e,imageSize:e,image:GD.mapMarkerDefault}),this.selectedIcon=new AMap.Icon({size:e,imageSize:e,image:GD.mapMarkerSelected})},n.prototype._addMarker=function(e,t,n,r,i){var s,o;o=new AMap.LngLat(t,e),s=new AMap.Marker({icon:this.defaultIcon,position:o,title:n,animation:"AMAP_ANIMATION_DROP"}),s.setMap(this.mapObj);if(this.fieldApiCode!=null&&this.urlPrefix!=null){AMap.event.addListener(s,"click",function(e){return function(){return e.selectMarker(s,r)}}(this));if(i===0)return this.selectMarker(s,r)}},n.prototype._updateMarker=function(e){return!this.selectedMarker||this.selectedMarker.setIcon(this.defaultIcon),e.setIcon(this.selectedIcon),e.setzIndex(101),this.selectedMarker&&this.selectedMarker.setzIndex(100),this.selectedMarker=e,this.$container.find(".selected-geo-address").text(this.selectedMarker.getTitle())},n.prototype._onMarkersAdded=function(){return this.mapObj.setFitView()},n}(t),r=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype._initMap=function(){var e;return e={zoom:4,mapTypeId:google.maps.MapTypeId.ROADMAP,streetViewControl:!1,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_TOP}},this.mapObj=new google.maps.Map(this.geoMapDom,e)},n.prototype._initIcons=function(){return this.defaultIcon=new google.maps.MarkerImage(GD.mapMarkerDefault,null,null,null,new google.maps.Size(22,22)),this.selectedIcon=new google.maps.MarkerImage(GD.mapMarkerSelected,null,null,null,new google.maps.Size(22,22)),this.bounds=new google.maps.LatLngBounds},n.prototype._addMarker=function(e,t,n,r,i){var s,o;o=new google.maps.LatLng(e,t),s=new google.maps.Marker({position:o,map:this.mapObj,animation:google.maps.Animation.Drop,title:n,icon:this.defaultIcon}),this.bounds.extend(o);if(this.fieldApiCode!=null&&this.urlPrefix!=null){google.maps.event.addListener(s,"click",function(e){return function(){return e.selectMarker(s,r)}}(this));if(i===0)return this.selectMarker(s,r)}},n.prototype._updateMarker=function(e){return!this.selectedMarker||this.selectedMarker.setIcon(this.defaultIcon),e.setIcon(this.selectedIcon),e.setZIndex(google.maps.Marker.MAX_ZINDEX+1),this.selectedMarker&&this.selectedMarker.setZIndex(google.maps.Marker.MAX_ZINDEX),this.selectedMarker=e,this.$container.find(".selected-geo-address").text(this.selectedMarker.getTitle())},n.prototype._onMarkersAdded=function(){return this.mapObj.fitBounds(this.bounds)},n}(t),GD.initGeoReportView=function(e){var t,i;return e==null&&(e=!1),t=function(){var t,i,s,o,u;o=$(".geo-reports .geo-map-container"),u=[];for(i=0,s=o.length;i<s;i++)t=o[i],u.push(new(e?r:n)($(t)));return u},i=$(".results_content .title .results_nav"),$("body").hasClass("mobile")&&(i=$('.mobile [data-role="navbar"] .results_nav')),i.length>0&&!i.hasClass("active")?i.find("a").click(function(){return setTimeout(t,10)}):t()}})}.call(this),function(){$(document).on("page:load ready",function(){var e;if($(".form-reports").length===0)return;return $(".form-reports").on("click",".chart-type-toggle .chart-type-switcher",function(){var e;return e=$(this).parents(".field-content").find(".field-chart"),e.data("chart-type",$(this).data("chart-type")),new GD.ReportChart(e)}),e=function(e,t){var n;return n=e.clone().sort(function(e,n){var r,i;return r=parseInt($(e).find(".c-value").html()),i=parseInt($(n).find(".c-value").html()),t===void 0&&(r=parseInt($(e).find(".c-value").data("index")),i=parseInt($(n).find(".c-value").data("index"))),t?i-r:r-i}),n},$(".form-reports").on("click",".data-count",function(){var t,n,r,i;r=$(this),n=$(r.closest("table").children("tbody")),t=$(r.closest(".field-data").siblings(".field-chart")),i=n.children("tr");if(r.hasClass("sortable"))return r.removeClass("sortable").addClass("sort-desc"),n.html(e(i,!0)),t.data("sort","desc"),new GD.ReportChart(t);if(r.hasClass("sort-desc"))return r.removeClass("sort-desc").addClass("sort-asc"),n.html(e(i,!1)),t.data("sort","asc"),new GD.ReportChart(t);if(r.hasClass("sort-asc"))return r.removeClass("sort-asc").addClass("sortable"),n.html(e(i)),t.removeData("sort"),new GD.ReportChart(t)}),GD.showReport=function(){if($("#reports_container:visible").length>0&&!$("#reports_container").data("charts-shown"))return $.each($(".field-chart[data-report]"),function(e,t){return new GD.ReportChart($(t))}),$("#reports_container").data("charts-shown",!0)},setTimeout(GD.showReport,10),$(".form-reports").on("ajax:complete",".reports_page .filter-content",function(){return setTimeout(GD.showReport,10)}),$(".form-reports").on("shown click",".results_nav, [data-role=navbar] a",function(){return setTimeout(GD.showReport,10)})})}.call(this),function(){}.call(this),function(){$(function(){return $(document).on("page:load ready",function(){if($("#form_publish").length===0)return;return $("#form_publish .get-qrcode").gdHoverTooltip({content:$("#form_qrcode_container")}),$("#form_publish .get-qrcode-with-extension").gdHoverTooltip({functionBefore:function(e,t){var n,r;return r=$("#published_form_extended_link").val(),r.indexOf("x_field_1")!==-1?($("#form_qrcode_container_with_extension .qrcode-container").empty().qrcode({render:"div",size:128,text:r}),n=$("#form_qrcode_container_with_extension .download_links a"),_.each(n,function(e){return $(e).attr("href",$(e).data("url")+("?x_field_1="+$(".extended-attribute").val()))}),e.tooltipster("content",$("#form_qrcode_container_with_extension"))):e.tooltipster("content",$("#form_qrcode_container")),t()}}),$("#form_publish").on("keyup",".extended-attribute",function(){var e,t;return t=$(this).val(),t=t.replace(/\s+/g,""),t?e=$(".extended_url").val().replace("attribute_placeholder",encodeURIComponent(t)):e=$("#published_form_link_2").val(),$("#published_form_extended_link").val(e),$(".open-extended-url").attr("href",e)})})})}.call(this),function(){var e,t,n,r,i,s,o;e={manager:3,data_maintainer:2,data_viewer:1},i=function(e,t,n){var r;return n==null&&(n=null),r=$("#form_id").val(),$.ajax({url:"/forms/"+r+"/share",type:e,data:t,complete:function(e,t){if(e.status===200||e.status===400)$(".roles").html(e.responseText),GD.showFlashNotification($("#message").data("message").notice);e.status===302&&Turbolinks.visit(e.responseText),e.status===12150&&Turbolinks.visit("/");if(n)return n(e,t)}})},s=function(e){var t;return t=$("#form_id").val(),$.ajax({url:"/forms/"+t+"/selectable_cooperators",type:"get",complete:function(t,n){if(t.status===200||t.status===400)return e.find(".selectable-cooperators").html(t.responseText),GD.updateModalHeight(e)}})},n=function(t){var n,r;return r=t.val(),n=t.attr("original_option"),t.data("current-user")&&e[r]<e[n]},o=function(e){var t,n;return n=e.parents("tr"),t={id:n.find("input[name='cooperator_id']").val(),role:e.val()},i("patch",n.hasClass("inviter")?{inviter:t}:{authority:t})},r=function(e){return e.val(e.attr("original_selected")),!1},t=function(e){var t,n,r;return r=GD.ROLE_LABLES[e.val()],n=GD.ROLE_LABLES[e.attr("original_option")],t="您确定要将自己从"+n+"降为"+r+"吗?"},$(document).on("page:load ready",function(){if($("#tab_cooperate")===0)return;return $("#tab_cooperate").on("change",".roles-table tr select.role",function(){var e;return e=$(this),!n(e)||n(e)&&confirm(t(e))?o(e):r(e)}),$("#tab_cooperate").on("click",".roles-table tr .delete",function(){var e,t;if($(this).attr("data-delete-self")==="false"||confirm("您确定要解除对该表单的所有权限吗？"))return t=$(this).parents("tr"),e={id:t.find("input[name='cooperator_id']").val()},i("delete",t.hasClass("inviter")?{inviter:e}:{authority:e})}),$("#add_role_modal").livequery(function(){return $(this).on("hide.bs.modal",function(){return $(this).find(".message").empty(),$(this).find("[name='authority[emails]']").val(""),$(this).find(".selectable-cooperators").html(""),GD.enableBtn($(this).find(".modal-footer .add-role-button"))}),$(this).on("show.bs.modal",function(){return s($(this))})}),$("#tab_cooperate").on("click","#add_role_modal .modal-footer .add-role-button",function(){var e,t,n,r;return n=$("#add_role_modal"),t=n.find("[name='authority[emails]']"),r=new Array,$(n.find("[name='authority[selected_emails]']:checked")).each(function(){return r.push($(this).val())}),e={emails:$.trim(t.val()),selected_emails:r.join(","),role:$(".add-roles-container #cooperator_role").val()},e.emails===""&&e.selected_emails===""&&(n.modal("hide"),GD.enableBtn(this)),i("post",{authority:e},function(e,r){var i;GD.enableBtn($("#add_role_modal .modal-footer .add-role-button")),i=$("#message").data("message"),$("#message").removeData("message"),e.status===200&&(n.modal("hide"),GD.showFlashNotification(i.notice));if(e.status===400)return t.val($(".roles #invalid_emails").text()),GD.showErrorMessageBesides($("#add_role_modal .modal-footer"),i.alert||i.notice)})})})}.call(this),function(){$(function(){var e;return e=function(e){var t;return e.find("img").length>0&&($(".weixin-timeline .selected-thumbnail").attr("src",e.find("img").attr("src")),$(".thumbnail-icons li").removeClass("active"),e.addClass("active"),t=e.closest(".thumbnail-icons"),t.hasClass("predefined-thumbnail")?($("#predefined_thumbnail_name").val(e.data("thumbnail-name")),$("#weixin_customized_thumbnail_selected").val(!1)):($("#predefined_thumbnail_name").val(""),$("#weixin_customized_thumbnail_selected").val(!0))),$("#weixin_thumbnail_form").submit()},$(document).on("page:load ready",function(){return $("#form_publish").on("ajax:complete","#weixin_thumbnail_form",function(e,t){if(t.status===200)return $("#tab_social").html(t.responseText),GD.showFlashNotification("保存成功")}),$("#form_publish").on("click",".weixin-thumbnail-section .thumbnail-icons li",function(){if(!$(this).is(".active, .no-thumbnail, [data-need-upgrade=true]"))return e($(this))}),$("#form_publish").on("click",".weixin-thumbnail-section .customize-thumbnail-partial .delete-thumbnail",function(){var e;return $("#weixin_customized_thumbnail_id").val(""),$("#change_thumbnail_form").hide(),$(".delete-thumbnail").hide(),$(".custom-thumbnail img").remove(),$(".custom-thumbnail .add-thumbnail").show(),e=$(".custom-thumbnail li"),e.addClass("no-thumbnail"),$(".weixin-thumbnail-section .thumbnail-icons.predefined-thumbnail li:first").click()}),$(".custom-thumbnail-form-container").livequery(function(){var t;return t=$(".custom-thumbnail li"),$(this).fileupload({dataType:"json",dropZone:null,add:function(e){return function(t,n){return $.each(n.files,function(t,r){var i;return i=GD.validateFile(r,5e6,/.*\.(jpg|jpeg|png|gif)$/gi),i.length===0?n.submit():$(e).siblings(".upload-notice").html(i.join("<br>"))})}}(this),start:function(e){return function(){return t.addClass("uploading"),t.append("<div class='progress-bar'><div class='progress-inner'></div></div>"),$(".weixin-thumbnail-section input:submit").attr("disabled","disabled")}}(this),progress:function(e,n){var r;return r=parseInt(n.loaded/n.total*95,10),$(t.find(".progress-inner")).css("width",r+"%")},always:function(n){return function(r,i){return t.removeClass("uploading"),t.find(".progress-bar").remove(),i.result.errors?$(n).siblings(".upload-notice").html(i.result.errors.join("<br>")):($("#weixin_customized_thumbnail_id").val(i.result.attachment_id),$("#weixin_customized_thumbnail_selected").val(!0),$("#change_thumbnail_form").show(),$(".delete-thumbnail").show(),t.find("img").remove(),t.prepend($("<img src='"+i.result.image_url+"' >")),t.removeClass("no-thumbnail"),$("#add_thumbnail_form .add-thumbnail").hide(),e(t),$(n).siblings(".upload-notice").empty()),$(".weixin-thumbnail-section input:submit").removeAttr("disabled")}}(this)})})})})}.call(this),function(){window.GD||(window.GD={}),GD.initWeixinLogin=function(e){if(e.length>0&&typeof WxLogin!="undefined"&&WxLogin!==null&&e.data("redirect-uri"))return new WxLogin({id:"weixin_login",appid:e.data("appid"),scope:"snsapi_login,snsapi_userinfo",redirect_uri:e.data("redirect-uri"),state:e.data("state"),href:e.data("css-href")})}}.call(this),function(){$(document).on("page:load ready",function(){if($("#weixin").length===0)return;return $("#weixin").on("change","#form_setting_weixin_account_id",function(){if(!$(this).val())return;return $(this).closest("form").submit(),GD.turbolinksReloadWithCurrentPosition()}),$("#weixin").on("change","#form_setting_weixin_collect_way",function(){var e;$("#weixin_collect_way .weixin-collect-way p.description").hide(),$("#weixin_collect_way .weixin-account-actions").hide();if($(this).val()==="goldendata"){if(!$(".can-select-goldendata").data("value")){e="因为该表单设置有你自己的微信支付账号，或者该表单设置的Ping++ 支付中启用了微信支付。</br></br>你只能选择使用自己的微信公众账号进行微信用户数据收集，请重新选择。",GD.showConfirmBox("不能使用金数据账号收集微信信息",e,null);return}$("#weixin_collect_way .weixin-collect-way p.collect-by-goldendata").show()}else $(this).val()==="own"&&($("#weixin_collect_way .weixin-collect-way p.collect-by-own").show(),$("#weixin_collect_way .weixin-account-actions").show());if($(this).val()!=="own"||!!$(".weixin-account .account-info").data("name"))return $(this).closest("form").submit(),setTimeout(function(){return GD.turbolinksReloadWithCurrentPosition()},500)}),$(".weixin-gd-image-tooltip").gdHoverTooltip({content:$(".collect-info-by-gd-img"),position:"top"}),$(".weixin-own-image-tooltip").gdHoverTooltip({content:$(".collect-info-by-own-img"),position:"top"}),$("#weixin").on("click",".weixin-account-actions .actions .reselect-weixin-account",function(e){return $(".weixin-account-actions .weixin-account").remove(),$(".set-weixin-account").show(),e.stopPropagation(),e.preventDefault()})})}.call(this),function(){$(function(){return $(document).on("page:load ready",function(){if($("#tab_pay").length===0)return;return $("#tab_pay").on("click",".payment-account .add-account-container",function(){return Turbolinks.visit($("#tab_pay .title").data("url"))}),$("#tab_pay").on("change","#form_setting_wxpay_account_id, #form_setting_alipay_account_id, #form_setting_pingpp_account_id",function(){if(!!$(this).val())return $(this).closest("form").submit()}),$("#tab_pay").on("ajax:complete","form:not(#payment_redirect_rules_form)",function(e,t,n){if(t.status===200)return GD.showFlashNotification("保存设置成功"),Turbolinks.enableTransitionCache(!0),Turbolinks.visit($("#form_nav .active").attr("href")+"?active_tab=tab_pay"),Turbolinks.enableTransitionCache(!1)}),$("#tab_pay").on("click","#payment_form_setting_form .actions .remove-payment-account",function(){return $("#remove_payment_setting_modal").modal("show"),$("#payment_form_setting_modal_form").remove(".payment-account-id").append($(this).prev("input[type=hidden]")),$("#payment_form_setting_modal_form").find(".payment-account-id").val("")})})})}.call(this),function(){GD.getMobileVerifyCode=function(e){var t,n,r;return t=$(e),r=$("#set_mobile_no_form .mobile-no-error"),r.hide(),n={mobile_no:$("#set_mobile_no_form input#mobile_no").val()},$.post(t.data("url"),n,function(e){return GD.countDown(t,60)}).fail(function(e){GD.enableBtn(t);if(e.status===400)return r.show().text(e.responseJSON.error.mobile)})}}.call(this),function(){$(function(){var e,t;return t=function(e,t,n){return n==null&&(n=null),$.get(e,function(e){return function(e,r){if(r==="success"&&!!e.weixin_account_verified)return t();GD.showFlashNotification("微信公众账号验证失败，请重试","danger"),$(".modal-footer .check-oauth").is(":visible")?GD.enableBtn($(".modal-footer .check-oauth")):GD.enableBtn($(".modal-footer .add-wxpay"));if(!!n)return n()}}(this))},e=function(e){var t;return t='<span class="config-wxpay-container pull-right"><input type="checkbox" class="config-wxpay" id="config_wxpay">&nbsp;&nbsp;<label for="config_wxpay">同时开启微信支付配置</label></span>',e.append(t)},$(document).on("page:load ready",function(){if($("#third_parties").length===0)return;return $("#third_parties").on("click",".weixin-accounts-container .actions .destroy-weixin-account",function(){return $("#destroy_weixin_account").attr("action",$(this).data("url"))}),$("#third_parties").on("click",".pingpp-accounts-container .actions .destroy-pingpp-account",function(){return $("#destroy_pingpp_account").attr("action",$(this).data("url"))}),$("#third_parties").on("click",".alipay-accounts-container .actions .destroy-alipay-account",function(){return $("#destroy_alipay_account").attr("action",$(this).data("url"))}),$("#third_parties").on("click",".smtp-accounts-container .actions .destroy-smtp-account",function(){return $("#destroy_smtp_account").attr("action",$(this).data("url"))}),$("#third_parties").on("shown.bs.modal",".destroy-account",function(){return $(this).find(".modal-body input[type=text]").val(""),$(this).find(".modal-footer .delete").addClass("disabled").prop("disabled",!0)}),$("#third_parties").on("click","#pingpp_account_modal form .channel",function(){return $(this).toggleClass("selected")}),$("#third_parties").on("click",".weixin-accounts-container .add-weixin-account",function(){return $("#add_weixin_account_modal .weixin-info input[type=text]").val("")}),$("#third_parties").on("ajax:complete","form.weixin-info",function(t,n,r){var i,s,o,u,a,f;return s=$(this).closest(".modal"),n.status===200?(s.find(".modal-body").html(n.responseText),$("#third_parties .oauth-info-config").show(),$("#third_parties .weixin-info-config").hide(),i=s.find(".modal-footer"),i.find(".check-oauth").removeClass("hide"),i.find(".submit").addClass("hide"),e(s.find(".modal-footer")),o=s.find(".modal-footer .check-oauth"),((a=o.data("url"))!=null?a.indexOf("?weixin_account_id"):void 0)===-1&&(u=o.data("url")+("?weixin_account_id="+$(".oauth-config-container").data("id")),o.data("url",u)),GD.removeErrorMessageBesides(s.find(".modal-footer")),GD.updateModalHeight(s)):(f=$.parseJSON(n.responseText),GD.removeErrorMessageBesides(s.find(".modal-footer")),GD.showErrorMessageBesides(s.find(".modal-footer"),""+f.message,!0),$("#third_parties .oauth-info-config .oauth-verify").attr("disabled",!0),GD.enableBtn(s.find(".submit")),t.stopPropagation())}),$("#third_parties").on("blur","form.weixin-info input[type=text]:not(.optional)",function(){return $.trim($(this).val())===""?($(this).closest(".form-group").addClass("error"),GD.showErrorMessageBesides($(this).parent(),"该项不能为空",!0)):($(this).closest(".form-group").removeClass("error"),GD.removeErrorMessageBesides($(this).parent()))}),$(".oauth-info-config .copy .copy-link").livequery(function(){return GD.initClipboard($(this)[0])}),$("#third_parties").on("click",".weixin-info .edit-weixin-info",function(){var e;return e=$(this).closest(".modal"),$("#third_parties .weixin-info-config").show(),$("#third_parties .oauth-info-config").hide(),e.find(".modal-footer .submit").removeClass("hide"),e.find(".modal-footer .check-oauth").addClass("hide"),e.find(".modal-footer .add-wxpay").addClass("hide"),e.find(".modal-footer .config-wxpay-container").addClass("hide"),GD.enableBtn(e.find(".submit"))}),$("#third_parties").on("click","#add_weixin_account_modal .modal-footer .check-oauth, #edit_weixin_account_modal .modal-footer .check-oauth",function(){return t($(this).data("url"),function(e){return function(){return $(e).closest(".modal").modal("hide"),Turbolinks.visit(window.location.href)}}(this))}),$("#add_weixin_account_modal, #edit_weixin_account_modal").on("click",".modal-footer .config-wxpay",function(){var e,t;return t=$(this).is(":checked"),e=$(this).closest(".modal"),e.find(".modal-footer .check-oauth").toggleClass("hide",t),e.find(".modal-footer .add-wxpay").toggleClass("hide",!t)}),$("#third_parties").on("click",".modal-footer .add-wxpay",function(){return t($(this).closest(".modal-footer").find(".check-oauth").data("url"),function(e){return function(){return $(e).closest(".modal").modal("hide"),$("#wxpay_account_modal").modal("show").find(".modal-content").load($(e).data("url"))}}(this),function(){return $("#wxpay_account_modal").modal("hide")})}),$("#wxpay_account_modal"
).on("hidden.bs.modal",function(){return GD.enableBtn($(".modal-footer .add-wxpay"))}),$("#smtp_account_modal").on("keyup change",'input[name="smtp_account[name]"]',function(){return $(this).closest("form").find(".sender-name").text($(this).val())}),$("#smtp_account_modal").on("change",'input[name="smtp_account[email]"]',function(){var e;e=$(this).closest("form").find('input[name="smtp_account[user_name]"]');if(!e.val())return e.val($(this).val())}),$("#smtp_account_modal").on("keyup change",'input[name="smtp_account[email]"]',function(){return $(this).closest("form").find(".sender-email").text($(this).val())}),$("#paid_feature_custom_smtp_modal").on("change",".need-switch",function(){var e,t;return e=$(this).closest(".modal-body"),t=$(this).is(":checked"),e.find(".sender-with-custom-smtp.on-open").fadeTo(t?1e3:0,t?1:0),e.find(".sender-with-custom-smtp.on-close").fadeTo(t?0:1e3,t?0:1),e.find(".on-open-text").toggle(t),e.find(".on-close-text").toggle(!t)})}),$(document).on("ajax:complete",".modal.destroy-account",function(e,t,n){return t.status===200?(GD.showFlashNotification("删除设置成功"),GD.turbolinksReloadWithCurrentPosition()):GD.showFlashNotification("删除设置失败","danger")}),$(document).on("keyup","input.delete-confirm",function(){var e;return e=$(this).val()!=="DELETE",$(this).closest(".destroy-account").find(".modal-footer .delete").toggleClass("disabled",e).prop("disabled",e)})})}.call(this),function(){$(document).on("page:load ready",function(){var e;if($("#profile_history").length===0)return;return $("#profile_history").on("change","#form_operation_history .query-type",function(){var e;return e="",!$(this).val()||(e="?query_type="+$(this).val()),Turbolinks.visit($("#form_operation_history .form-list").data("request-url")+e)}),$("#profile_history").on("change","#form_operation_history #selected_form",function(){var e,t;e=$("#form_operation_history .query-type"),t="";if(!!$(this).val()||$(e).val()==="deleted_forms")t="?query_type="+($(e).val()||"all_forms")+"&form_token="+$(this).val();return Turbolinks.visit($("#form_operation_history .form-list").data("request-url")+t)}),$("#profile_history").on("click","#sms_notification tbody tr",function(){var e;return e=$(this).data("content"),$("#sms_notification_modal .recipient").text(e.recipient),$("#sms_notification_modal .form-name").text(e.form_name),$("#sms_notification_modal .content").text(e.content),$("#sms_notification_modal").modal("show")}),$("#profile_history").on("click","#email_notification tbody tr",function(){var e;return e=$(this).data("content"),$("#email_notification_modal .recipient").text(e.recipient),$("#email_notification_modal .subject").text(e.subject),$("#email_notification_modal .form-name").text(e.form_name),$("#email_notification_modal .content").html(e.content),$("#email_notification_modal").modal("show")}),$("#profile_history").on("click","#sms_email_history .search",function(e){var t,n,r,i;return e.stopPropagation(),e.preventDefault(),r=$(this).closest(".search-area").find(".search-type option:selected").val(),n=encodeURIComponent($(this).parent().find(".search-content").val()),t="&search_type="+r+"&search_content="+n+"&first_active_tab=sms_email_history",i=$(this).closest(".search-area").data("base-url")+t,Turbolinks.visit(i)}),$("#profile_history").on("keypress","#sms_email_history .search-content",function(e){if(e.keyCode===13)return $(this).blur(),$(this).closest(".search-area").find(".search").click()}),$("#profile_history").on("change","#sms_email_history .search-type",function(){$(this).closest(".tab-pane").find(".search-input").addClass("gd-hide"),$(this).closest(".tab-pane").find("[data-type="+$(this).val()+"]").removeClass("gd-hide");if($(this).val()==="form_name"&&$(this).closest(".search-area").find(".form-names option").length===0)return $.ajax({type:"get",dataType:"json",url:$(this).data("names-url"),data:{verb:$(this).closest(".tab-pane").attr("id")}}).done(function(e){return function(t){return $(e).closest(".tab-pane").find(".form-names").empty().append("<option>------全部表单------</option>"),_.each(t.names,function(t,n,r){return $(e).closest(".tab-pane").find(".form-names").append("<option>"+GD.htmlSafe(t)+"</option>")})}}(this))}),$("#profile_history").on("change","#sms_email_history .form-names",function(){var e,t,n;return t=$(this).closest(".search-area").find(".search-type option:selected").val(),e=encodeURIComponent($(this).closest(".search-area").find(".search-content[data-type="+t+"]").val()),n=$(this).closest(".search-area").data("base-url")+("&search_type="+t+"&search_content="+e+"&first_active_tab=sms_email_history"),Turbolinks.visit(n)}),e=function(e){var t;return $(this).hasClass("disabled")?!1:(t={},t.search_type="sent_at",t.start=e.find(".start-date").data("date"),t.end=e.find(".end-date").data("date"),t.first_active_tab="sms_email_history",Turbolinks.visit($(".search-area:visible").data("base-url")+"&"+$.param(t)))},GD.initQueryByDateRange(e,$(".date-range-display"))})}.call(this),function(){$(document).on("page:load ready",function(){if($("#notification_setting").length===0)return;return $(".by-tag-dropdown .dropdown-menu li:first-child a").trigger("click"),$("#notification_setting").on("change","input.form_email_setting",function(){var e,t;return t=$(this).data("form-id"),e=$("input.form_email_setting[data-form-id='"+t+"']"),e.prop("checked",$(this).is(":checked"))}),$("#user_setting_email_daily_summary").on("change",function(){return $(this).closest("form").submit()})})}.call(this),function(){$(document).on("ready page:load",function(){var e,t,n,r,i,s,o,u,a;if($("#account_overview, #org_dashboard").length===0)return;return new GD.PurchaseVasView({el:"#purchase_sms_modal",purpose:"account_charge"}),new GD.PurchaseVasView({el:"#purchase_active_mail_modal",purpose:"account_charge"}),new GD.PurchaseVasView({el:"#account_charge_modal",purpose:"account_charge"}),i="item-active",n=$("#hide_logo_modal"),e=$("#custom_domain_modal"),r=n.find(".submit"),t=e.find(".submit"),o=function(n,r){var i,s;return s=n.data("unit-price"),n.is(":checked")?GD.showConfirmBox("关闭自定义域名","如果关闭自定义域名，之前使用该域名的表单将无法正常访问。<br>确认关闭么？",function(e){return function(){return n.trigger("click"),$("#account_overview .cname-edit").hide()}}(this)):s===0?n.data("is-set-cname")?$("#account_overview .cname-edit").show():(i=$("#config_cname_modal"),i.modal("show"),GD.showLoading("#config_cname_modal .modal-body","cname"),i.find(".modal-body").load(i.data("url"))):(e.modal("show"),e.find(".group-item").first().trigger("click"),e.find(".price").text(s),t.off("click").on("click",function(e){var t;t=$(this).closest(".modal").find(".item-active").data("type");if(t==="byDay")return e.preventDefault(),n.data("is-set-cname")?(n.trigger("click"),$(this).closest(".modal").modal("hide"),$("#account_overview .cname-edit").show()):($(this).closest(".modal").modal("hide"),i=$("#config_cname_modal"),i.modal("show"),GD.showLoading("#config_cname_modal .modal-body","cname"),i.find(".modal-body").load(i.data("url")))}))},u=function(e){var t;if(!e.is(":checked")){t=e.data("unit-price");if(t>0)return n.modal("show"),n.find(".group-item").first().trigger("click"),n.find(".price").text(t),r.off("click").on("click",function(t){var n;n=$(this).closest(".modal").find(".item-active").data("type");if(n==="byDay")return e.trigger("click"),$(this).closest(".modal").modal("hide"),t.preventDefault()})}},a=function(e){return $(this).siblings().removeClass(i),$(this).addClass(i),$(this).closest(".modal").find(".submit").text(e==="byMonth"?"升级套餐":"立即开启")},n.add(e).on("click",".group-item",function(){return a.call(this,$(this).data("type"))}),$("#account_overview").on("mousedown",".switchery",function(e){var t;e.stopPropagation(),t=$(this).prev();if(t.data("need-upgrade")&&t.data("toggle")==="modal")return $(t.data("target")).modal("show");t.hasClass("custom-domain-switch")&&o(t,event);if(t.hasClass("no-branding-switch"))return u(t)}),$(document).on("ajax:complete","form.cname-new-form",function(e,t,n){var r,i;return r=$("#account_overview .cname-edit"),t.status===200?r.show():($(this).find("input[name=_method]").val()!=="patch"&&r.hide(),i=$(this).closest(".modal-dialog"),i.find(".modal-body").html(t.responseText),i.find(".description").hide(),i.find(".steps").show(),e.stopPropagation())}),$("#config_cname_modal").on("hidden.bs.modal",function(){var e;return e=$(this).find(".modal-footer"),e.find(".start").show(),e.find(".submit").hide()}),$("#config_cname_modal").on("ajax:complete",function(){return GD.enableBtn("#config_cname_modal .submit")}),$("#config_cname_modal").on("click",".modal-footer .start",function(){var e;return $(this).hide(),e=$(this).closest(".modal"),e.find(".description").hide(),e.find(".steps").show(),e.find(".submit").removeClass("hide").show()}),$('a[data-target="#config_cname_modal"]').on("click",function(){var e;return e=$("#config_cname_modal .modal-footer"),e.find(".start").hide(),e.find(".submit").removeClass("hide").show()}),$("#account_overview").on("change",".need-switch",function(e){if($(this).data("url")===void 0)return;return $.ajax({url:$(this).data("url"),data:{enabled:$(this).is(":checked")},type:"PATCH"})}),s=function(){return $("#debit_balance_amount").removeClass("counting")},$("#account_overview").on("click",".check-usage-details-link",function(){return $(this).blur(),$(".plan-balance .account-item .details").slideDown(),$(".vas-purchase-tip").slideDown(),$(this).html("隐藏详细使用量<i class='gd-icon-angle-double-up'></i>"),$(this).removeClass("check-usage-details-link").addClass("hide-usage-details-link")}),$("#account_overview").on("click",".hide-usage-details-link",function(){return $(this).blur(),$(".plan-balance .account-item .details").slideUp(),$(".vas-purchase-tip").slideUp(),$(this).html("查看详细使用量<i class='gd-field-icon-cascadedropdown'></i>"),$(this).removeClass("hide-usage-details-link").addClass("check-usage-details-link")}),$("#paid_feature_no_branding_modal").on("change",".no-branding-intro-switch",function(){var e,t;return t=$(".no-branding-intro").find(".flag-text"),e=$("#paid_feature_no_branding_modal").find(".branding"),$(this).is(":checked")?(e.fadeOut(1e3),t.text("已开启隐藏Logo")):(e.fadeIn(1e3),t.text("已关闭隐藏Logo"))}),$("#paid_feature_custom_domain_modal input").keyup(function(){return $(this).parent().find(".domain").text($(this).val())})})}.call(this),function(){$(document).on("ready page:load",function(){if($("#account_settings").length===0)return;return $("#set_phone_no_modal").on("show.bs.modal",function(){return $(this).find(".modal-content").load($(this).data("url"))}),$("#update_phone_no_modal").on("loaded.bs.modal",function(){return $(".update-mobile-no-step-one").show(),$("#update_phone_no_modal .modal-footer").hide(),$(".update-mobile-no-step-two").hide()}),$(".social-login #wechat").livequery(function(){return $(this).data("from")==="non-weixin-bind-domain"?$(this).gdClickTooltip({content:$(this).data("tooltip-content"),theme:"gd-tooltip-mini"}):$(this).gdClickTooltip({content:"<div id='weixin_login'></div>",functionReady:function(e){return function(t,n){return GD.initWeixinLogin($(e)),t.tooltipster("reposition")}}(this)})})}),$(document).on("click","#set_phone_no_modal .modal-body form a.send-verification-code",function(){return GD.getMobileVerifyCode(this)}),$(document).on("ajax:complete","#set_phone_no_modal .modal-body form",function(e,t,n){$("form#set_mobile_no_form p.mobile-no-error").empty().hide();if(t.status===200)return Turbolinks.visit(t.responseText);!t.responseJSON.error.mobile||$("form#set_mobile_no_form p.mobile-no-error").show().text(t.responseJSON.error.mobile);if(!!t.responseJSON.error.token)return $("form#set_mobile_no_form p.veri-code-error").show().text(t.responseJSON.error.token)}),$(document).on("click","#update_phone_no_modal a.send-verification-code, #update_phone_no_modal .resend-verification-code",function(){var e,t,n;return $("#update_phone_no_modal p.error-message").hide(),e=$(this),t={mobile_no:e.data("mobile-no"),reset_mobile_no:!0},n=$.post(e.data("url"),t,function(e){return GD.countDown($("#update_phone_no_modal .update-mobile-no-step-two .resend-verification-code"),60),$(".update-mobile-no-step-one").hide(),$("#update_phone_no_modal .modal-footer").show(),$(".update-mobile-no-step-two").show()}).fail(function(t){return GD.enableBtn(e),$("#update_phone_no_modal .update-mobile-no-step-one p.error-message").show().text(t.responseJSON.error.mobile)})}),$(document).on("ajax:complete","#update_phone_no_modal .modal-body form",function(e,t,n){var r;return t.status===200?($("#update_phone_no_modal").modal("hide"),$("#set_phone_no_modal").find(".modal-content").load($("#set_phone_no_modal").data("url")),$("#set_phone_no_modal").modal("show")):t.status===400?(r=$("#update_phone_no_modal .update-mobile-no-step-two p.error-message"),r.show().text(t.responseJSON.error.token)):$("#update_phone_no_modal .update-mobile-no-step-two p.error-message").show().text("网络出错，请稍后再试")}),$(document).on("ajax:complete","#change_password_modal, #change_nickname_modal",function(e,t,n){return t.status===200?($(this).modal("hide"),Turbolinks.visit(t.responseText)):$(this).find(".modal-content").html(t.responseText)}),$(document).on("ajax:complete","#account_settings .email .verify-email",function(e,t,n){var r;return t.status===200?(r=JSON.parse(t.responseText),GD.showFlashNotification(r.msg,r.status)):GD.showFlashNotification("发送验证邮件失败，请稍后重试","error")})}.call(this),function(){$(document).on("page:load ready",function(){if($("#bill_center").length===0)return;return $("#bill").on("click","table.usage tbody tr",function(e){return window.open($(this).data("url"))}),$("#save_invoice").attr("disabled",!0),$("#apply_invoice_modal").on("loaded.bs.modal",function(){return $("#save_invoice").attr("disabled",!$(this).find(".invoice-confirm").is(":checked")),GD.initAddressSelector($(this).find("form"))}),$("#bill_center").on("change","#apply_invoice_modal .invoice-confirm",function(){return $("#save_invoice").attr("disabled",!$(this).is(":checked"))}),$("#bill_center").on("ajax:complete","#activate_coupon_form",function(e,t,n){return t.status===200?Turbolinks.visit(JSON.parse(t.responseText).url):$("#activate_coupon_form").html(t.responseText)})})}.call(this),function(){var e,t,n=function(e,t){return function(){return e.apply(t,arguments)}};t=function(){return $(".jcrop-active").css("left","50%"),$(".jcrop-active").css("margin-left",""- +$("#avatar_img").width()/2+"px"),$(".jcrop-active").css("top","50%"),$(".jcrop-active").css("margin-top",""- +$("#avatar_img").height()/2+"px")},e=function(){function e(){this.updatePreview=n(this.updatePreview,this),this.update=n(this.update,this),$("#avatar_img").Jcrop({aspectRatio:1,setSelect:[0,0,100,100],onSelect:this.update,onChange:this.update})}return e.prototype.update=function(e){return t(),$("#crop_x").val(e.x),$("#crop_y").val(e.y),$("#crop_w").val(e.w),$("#crop_h").val(e.h),this.updatePreview(e)},e.prototype.updatePreview=function(e){return $("#large_avatar_preview").css(this.adjustAvatarPreview(100,e)),$("#normal_avatar_preview").css(this.adjustAvatarPreview(50,e)),$("#small_avatar_preview").css(this.adjustAvatarPreview(20,e))},e.prototype.adjustAvatarPreview=function(e,t){return{width:Math.round(e/t.w*$("#avatar_img").width())+"px",height:Math.round(e/t.h*$("#avatar_img").height())+"px",marginLeft:"-"+Math.round(e/t.w*t.x)+"px",marginTop:"-"+Math.round(e/t.h*t.y)+"px"}},e}(),$(function(){return $("#avatar_form").livequery(function(){return $(this).fileupload({dataType:"json",dropZone:null,add:function(e,t){return $.each(t.files,function(e,n){var r,i;return i=GD.validateFile(n,5e6,/.*\.(jpg|jpeg|png|gif)$/gi),i.length===0?t.submit():(r=$("#avatar_form").prev(".alert"),r.show(),r.children("span").text(i))})},start:function(){return $("#avatar_form .btn").attr("disabled",!0),$("#avatar_form .btn span").text("正在上传..."),$("#avatar_form .btn").on("click",function(){return!1})},always:function(t,n){return n.result.error?$.ajax({url:n.result.redirect_url,type:"get",complete:function(e,t){var r;return $("#change_avatar_modal .modal-content").html(e.responseText),r=$("#avatar_form").prev(".alert"),r.show(),r.children("span").text(n.result.messages)}}):$.ajax({url:n.result.redirect_url,type:"get",data:{avatar_path:n.result.avatar_path,page_refresh_url:n.result.page_refresh_url,attachment_id:n.result.attachment_id},complete:function(t,n){return $("#change_avatar_modal .modal-content").html(t.responseText),new e,$("#change_avatar").attr("disabled",!1)}})}}),$("#avatar_form a.change-photo").on("click",function(){return $.ajax({url:"avatar/upload",complete:function(e,t){return $("#change_avatar_modal .modal-content").html(e.responseText),$("#change_avatar_modal .modal-content input[type='file']").trigger("click")}})})})}),$(document).on("click","#change_avatar",function(){return $("#change_avatar").text("正在保存..."),$("#change_avatar").attr("disabled",!0),$(this).parents(".modal").find("form").submit()})}.call(this),function(){$(document).on("ready page:load",function(){var e,t;t=function(){if(!$.cookie("user_refer_viewed"))return $(".top-panel a.user-recommend").addClass("gd-animated gd-animation-tada")},e=function(e){var t;return t='<div class="qrcode-container share-invite-friends-qrcode">\n  <div class="qrcode"></div>\n  <p class="sweep-text"><i class="gd-icon-wechat"></i>打开微信扫一扫</p>\n</div>',e.find(".share-weixin").gdClickTooltip({content:t,functionReady:function(t,n){var r,i;return r=n.find(".qrcode"),i=e.find("#share_invite_link").val(),GD.renderQrcode(r,i,128),t.tooltipster("reposition")}}),autosize(e.find("textarea")),e.find("form[data-role=invite_by_emails]").on("ajax:complete",function(e,t,n){var r,i;return GD.clearErrorMessageBelow($(this).find(".message")),n==="success"?(i=JSON.parse(t.responseText),$(this).find("textarea").val(i.invalid.join(", ")),autosize.update($(this).find("textarea")),i.invited.length>0?(r=[],r.push("已为你向"+i.invited.length+"个邮箱发送了邀请函"),i.invalid.length>0&&r.push("以上邮箱的格式有误，请修正后再次发送"),GD.showFlashNotification(r.join("; "),"success")):GD.showErrorMessageBelow($(this).find(".message"),"没有发出任何邀请函。请确认邮箱格式正确、邮箱没有被注册、且今天你没有向这些邮箱发过邀请","error")):GD.showErrorMessageBelow($(this).find(".message"),"发送失败，请稍后再试","error")})};if($("#invite_friends").length>0)return e($("#invite_friends .invite-user"))})}.call(this),function(){GD.Org.BaseCollection=Backbone.Collection.extend({sync:function(){var e;return e=arguments[2],e.headers={Authorization:GD_ORG_CONFIG_AUTH_TOKEN},Backbone.Collection.prototype.sync.apply(this,arguments)}})}.call(this),function(){GD.Org.BaseView=Backbone.View.extend({renderTemplate:function(e){var t;return t=_.template($("#"+this.template).html()),this.$el.html(t(e))},render:function(){return this.renderTemplate({model:this.model}),this},updateAttributes:function(){var e;return e=this.$el.find('form input:not([type="checkbox"]), form select, form textarea, form radio, form hidden').not('[name*="."]').serializeObject(),this.$el.find('form input[type="checkbox"]').not('[name*="."]').each(function(){return e[this.name]=this.checked}),this.model.set(e)},updateChildAttributes:function(){var e,t;return e=this.$el.find('form input[name*="."]:not([type="checkbox"]):not([type="radio"]), form select[name*="."], form textarea[name*="."], form radio[name*="."], form hidden[name*="."]').add("").serializeObject(),_.each(e,this._updateChildAttribute,this),t=this,this.$el.find('form input[name*="."][type="radio"]:checked').each(function(){return t._updateChildAttribute($(this).val(),this.name)})},_updateChildAttribute:function(e,t){var n,r,i;return i=t.split("."),r=i[0],n=i[1],this.model.get(r).set(n,e)},save:function(e){return e.stopPropagation(),this.updateAttributes(),this.updateChildAttributes(),this.model.save(null,{success:this.saved.bind(this),error:this.saveFailed.bind(this)})},saveFailed:function(e,t){var n;if(this.$el.find(".errors").length>0)return n=this.$el.find(".errors").empty(),_.each(t.responseJSON,function(e){return n.append($("<li></li>").text(e))});return}})}.call(this),function(){GD.Org.Profile.MemberShowView=GD.Org.BaseView.extend({el:".org-member-setting-container",template:"org_profile_member_show_template",events:function(){return{"click .edit-org-member-link":"showEditView"}},initialize:function(){return this.listenTo(this.model,"sync",this.render)},showEditView:function(){var e;return e=new GD.Org.Profile.MemberEditView({model:this.model}),e.render()}})}.call(this),function(){GD.Org.Profile.MemberEditView=GD.Org.BaseView.extend({events:{"click .submit":"save"},template:"org_profile_member_edit_template",render:function(){return this.renderTemplate({model:this.model}),$("#edit-member-modal").html(this.el).modal(),this},saved:function(){return this.remove(),$("#edit-member-modal").empty().modal("hide")}})}.call(this),function(){GD.ProfileMemberApp=function(){function e(e){this.subdomain=e.subdomain,this.userId=e.user_id}return e.prototype.start=function(){var e;return e=new GD.Org.Member({subdomain:this.subdomain,id:this.userId}),$.when(e.fetch()).then(function(){return(new GD.Org.Profile.MemberShowView({model:e})).render()})},e}()}.call(this),function(){$(document).on("ready page:load",function(){var e;if($("#org-member-setting").length===0)return;return e=new GD.ProfileMemberApp({subdomain:GD.currentOrganization,user_id:GD.currentUserId}),e.start()})}.call(this),function(){}.call(this),function(){GD.CouponSelector=Backbone.View.extend({events:{"click .dropdown-menu > li > a":"selectCoupon","click .dropdown-menu > li > a[data-code]":"keepDrowdownOpen","click .activate-coupon-form a":"activateCoupon","keydown #coupon_code":"preventSubmit"},initialize:function(){return this.selectedCoupons={},this._select(this._noSelectionItem())},totalDiscountValue:function(){return _.reduce(_.values(this.selectedCoupons),function(e,t){return e+t},0)},selectCoupon:function(e){var t;t=$(e.target);if(!t.hasClass("activate-coupon"))return this._select(t),this._resetActivateCouponForm();this._showActivateCouponForm();if(_.isEmpty(this.selectedCoupons))return this._updateDropdownText(t.html())},_showActivateCouponForm:function(){var e;return e=this.$(".activate-coupon-form"),e.removeClass("hidden"),e.find("input:text").focus()},_resetActivateCouponForm:function(){var e,t;return e=this.$(".activate-coupon-form"),e.addClass("hidden"),e.find("input[name=coupon_code]").val("").removeClass(".error"),t=e.find("a"),t.nextAll(".error").remove(),GD.enableBtn(t)},_noSelectionItem:function(){return this.$(".dropdown-menu > li > a:first")},_select:function(e){var t,n,r,i;return t=e.data("code"),t?_.has(this.selectedCoupons,t)?(delete this.selectedCoupons[t],e.removeClass("selected")):(this.selectedCoupons[e.data("code")]=parseFloat(e.data("discount-value")),e.addClass("selected"),this._noSelectionItem().removeClass("selected")):(this.selectedCoupons={},this.$(".dropdown-menu > li > a.selected").removeClass("selected"),e.addClass("selected")),e.blur(),r=_.keys(this.selectedCoupons),i=this.totalDiscountValue(),this._updateSelectedCouponCodes(r,i),n=function(){switch(r.length){case 0:return this._noSelectionItem().html();case 1:return this.$(".dropdown-menu > li > a[data-code="+r[0]+"]").html();default:return"<span class='highlight'>&yen;"+i.toFixed(2)+"</span> （"+r.length+"张优惠券）"}}.call(this),this._updateDropdownText(n)},_updateSelectedCouponCodes:function(e,t){return this.$("[name=coupon_codes]").data("discount-value",t).val(e).trigger("change")},_updateDropdownText:function(e){return this.$(".dropdown-toggle .selected-coupon").html(e)},keepDrowdownOpen:function(e){return e.stopPropagation()},activateCoupon:function(e){var t;return t=this.$(".activate-coupon-form input[name=coupon_code]").val(),t?$.ajax($(e.target).data("url"),{type:"POST",data:{coupon_code:t,from:"coupon_selector"},success:function(e){return function(n,r,i){var s,o,u,a,f;e.$el.html(n),f=_.keys(e.selectedCoupons),s=$.cookie("activated_coupon"),$.removeCookie("activated_coupon"),s&&f.push(s),e.selectedCoupons={},a=[];for(o=0,u=f.length;o<u;o++)t=f[o],a.push(e._select(e.$(".dropdown-menu > li > a[data-code="+t+"]")));return a}}(this),error:function(e){return function(t,n){var r;return r=n==="error"?t.responseText:"兑换码激活失败，请稍后再试",e._showActivationError(r)}}(this)}):(this._showActivationError("请输入优惠券兑换码"),e.stopPropagation(),e.preventDefault())},_showActivationError:function(e){var t;return t=this.$(".activate-coupon-form a"),GD.enableBtn(t),this.$(".activate-coupon-form input[name=coupon_code]").addClass("error").focus(),t.nextAll(".error").remove(),t.after("<span class='help-inline error'>"+e+"</span>")},preventSubmit:function(e){if(e.which===13)return e.preventDefault()}})}.call(this),function(){window.GD||(window.GD={}),GD.initWxjs=function(e){return wx.config({debug:!1,appId:e.appid,timestamp:e.timestamp,nonceStr:e.noncestr,signature:e.signature,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","chooseWXPay"]}),wx.ready(function(){var e,t,n,r,i;return $(".wxpay-loading-container").remove(),t=$("#form_share_info"),e=null,$("#form_thumbnail_selected").length>0&&(e=$("#form_thumbnail_selected img")),e||$("img").each(function(){var t;t=$(this);if(!e&&(t.width()>=300&&t.height()>=300||t.parents("#form_thumbnail_default").length>0))return e=t}),n=e?e[0].src:"",i=t.data("form-name"),r=t.data("form-url"),wx.onMenuShareTimeline({title:i,link:r,imgUrl:n}),wx.onMenuShareAppMessage({title:i,desc:$.trim(t.text()).substring(0,100),link:r,imgUrl:n})})}}.call(this),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.pingpp=e()}}(function(){return function e(t,n,r){function i(o,u){if(!n[o]){if(!t[o]){var f="function"==typeof require&&require;if(!u&&f)return f(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(e){var n=t[o][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){t.exports={userCallback:void 0,innerCallback:function(e,t){"function"==typeof this.userCallback&&("undefined"==typeof t&&(t=this.error()),this.userCallback(e,t),this.userCallback=void 0)},error:function(e,t){return e="undefined"==typeof e?"":e,t="undefined"==typeof t?"":t,{msg:e,extra:t}}}},{}],2:[function(e,t,n){var r=e("../utils"),i={}.hasOwnProperty;t.exports={ALIPAY_PC_DIRECT_URL:"https://mapi.alipay.com/gateway.do",handleCharge:function(e){var t=e.channel,n=e.credential[t],s=this.ALIPAY_PC_DIRECT_URL;i.call(n,"channel_url")&&(s=n.channel_url),i.call(n,"_input_charset")||(n._input_charset="utf-8");var o=r.stringifyData(n,t,!0);r.redirectTo(s+"?"+o)}}},{"../utils":22}],3:[function(e,t,n){var r=e("../utils"),i=e("../mods"),s={}.hasOwnProperty;t.exports={ALIPAY_WAP_URL_OLD:"https://wappaygw.alipay.com/service/rest.htm",ALIPAY_WAP_URL:"https://mapi.alipay.com/gateway.do",handleCharge:function(e){var t=e.channel,n=e.credential[t],o=this.ALIPAY_WAP_URL;s.call(n,"req_data")?o=this.ALIPAY_WAP_URL_OLD:s.call(n,"channel_url")&&(o=n.channel_url),s.call(n,"_input_charset")||(n._input_charset="utf-8");var u=r.stringifyData(n,t,!0),f=o+"?"+u,l=i.getExtraModule("ap");r.inWeixin()&&"undefined"!=typeof l?l.pay(f):r.redirectTo(f)}}},{"../mods":19,"../utils":22}],4:[function(e,t,n){var r=e("../utils"),i=e("../callbacks"),s={}.hasOwnProperty;t.exports={handleCharge:function(e){var t=e.channel,n=e.credential[t];return s.call(n,"url")?void r.redirectTo(n.url+"?"+r.stringifyData(n,t)):void i.innerCallback("fail",i.error("invalid_credential","missing_field:url"))}}},{"../callbacks":1,"../utils":22}],5:[function(e,t,n){var r=e("../../utils"),i=e("../../callbacks"),s={}.hasOwnProperty;t.exports={handleCharge:function(e){var t,n=e.credential[e.channel];if("string"==typeof n)t=n;else{if(!s.call(n,"url"))return void i.innerCallback("fail",i.error("invalid_credential","credential format is incorrect"));t=n.url}r.redirectTo(t)}}},{"../../callbacks":1,"../../utils":22}],6:[function(e,t,n){var r=e("../utils");t.exports={CP_B2B_URL:"https://payment.chinapay.com/CTITS/service/rest/page/nref/000000000017/0/0/0/0/0",handleCharge:function(e){var t=e.credential[e.channel];r.formSubmit(this.CP_B2B_URL,"post",t)}}},{"../utils":22}],7:[function(e,t,n){var r=e("../../stash"),i={}.hasOwnProperty;!function(){var e={},n={};n.PADCHAR="=",n.ALPHA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n.makeDOMException=function(){try{return new DOMException(DOMException.INVALID_CHARACTER_ERR)}catch(e){var t=new Error("DOM Exception 5");return t.code=t.number=5,t.name=t.description="INVALID_CHARACTER_ERR",t.toString=function(){return"Error: "+t.name+": "+t.message},t}},n.getbyte64=function(e,t){var r=n.ALPHA.indexOf(e.charAt(t));if(-1===r)throw n.makeDOMException();return r},n.decode=function(e){e=""+e;var t,r,i,s=n.getbyte64,o=e.length;if(0===o)return e;if(o%4!==0)throw n.makeDOMException();t=0,e.charAt(o-1)===n.PADCHAR&&(t=1,e.charAt(o-2)===n.PADCHAR&&(t=2),o-=4);var u=[];for(r=0;o>r;r+=4)i=s(e,r)<<18|s(e,r+1)<<12|s(e,r+2)<<6|s(e,r+3),u.push(String.fromCharCode(i>>16,i>>8&255,255&i));switch(t){case 1:i=s(e,r)<<18|s(e,r+1)<<12|s(e,r+2)<<6,u.push(String.fromCharCode(i>>16,i>>8&255));break;case 2:i=s(e,r)<<18|s(e,r+1)<<12,u.push(String.fromCharCode(i>>16))}return u.join("")},n.getbyte=function(e,t){var r=e.charCodeAt(t);if(r>255)throw n.makeDOMException();return r},n.encode=function(e){if(1!==arguments.length)throw new SyntaxError("Not enough arguments");var t,r,i=n.PADCHAR,s=n.ALPHA,o=n.getbyte,u=[];e=""+e;var a=e.length-e.length%3;if(0===e.length)return e;for(t=0;a>t;t+=3)r=o(e,t)<<16|o(e,t+1)<<8|o(e,t+2),u.push(s.charAt(r>>18)),u.push(s.charAt(r>>12&63)),u.push(s.charAt(r>>6&63)),u.push(s.charAt(63&r));switch(e.length-a){case 1:r=o(e,t)<<16,u.push(s.charAt(r>>18)+s.charAt(r>>12&63)+i+i);break;case 2:r=o(e,t)<<16|o(e,t+1)<<8,u.push(s.charAt(r>>18)+s.charAt(r>>12&63)+s.charAt(r>>6&63)+i)}return u.join("")},e.url="pay.htm",e.pay=function(t){var s=encodeURIComponent(n.encode(t));i.call(r,"APURL")&&(e.url=r.APURL),location.href=e.url+"?goto="+s},e.decode=function(e){return n.decode(decodeURIComponent(e))},t.exports=e}()},{"../../stash":20}],8:[function(e,t,n){var r=e("./commons/redirect_base");t.exports={handleCharge:function(e){r.handleCharge(e)}}},{"./commons/redirect_base":5}],9:[function(e,t,n){arguments[4][8][0].apply(n,arguments)},{"./commons/redirect_base":5,dup:8}],10:[function(e,t,n){var r=e("../utils");t.exports={JDPAY_WAP_URL:"https://m.jdpay.com/wepay/web/pay",handleCharge:function(e){var t=e.credential[e.channel];r.formSubmit(this.JDPAY_WAP_URL,"post",t)}}},{"../utils":22}],11:[function(e,t,n){var r=e("../utils");t.exports={UPACP_PC_URL:"https://gateway.95516.com/gateway/api/frontTransReq.do",handleCharge:function(e){var t=e.credential[e.channel];r.formSubmit(this.UPACP_PC_URL,"post",t)}}},{"../utils":22}],12:[function(e,t,n){var r=e("../utils");t.exports={UPACP_WAP_URL:"https://gateway.95516.com/gateway/api/frontTransReq.do",handleCharge:function(e){var t=e.credential[e.channel];r.formSubmit(this.UPACP_WAP_URL,"post",t)}}},{"../utils":22}],13:[function(e,t,n){var r=e("../callbacks"),i=e("../utils"),s=e("../stash"),o=e("../mods"),u={}.hasOwnProperty;t.exports={PINGPP_NOTIFY_URL_BASE:"https://api.pingxx.com/notify/charges/",handleCharge:function(e){for(var t=e.credential[e.channel],n=["appId","timeStamp","nonceStr","package","signType","paySign"],i=0;i<n.length;i++)if(!u.call(t,n[i]))return void r.innerCallback("fail",r.error("invalid_credential","missing_field_"+n[i]));s.jsApiParameters=t,this.callpay()},callpay:function(){var e=this,t=o.getExtraModule("wx_jssdk");if("undefined"!=typeof t&&t.jssdkEnabled())t.callpay();else if("undefined"==typeof WeixinJSBridge){var n=function(){e.jsApiCall()};document.addEventListener?document.addEventListener("WeixinJSBridgeReady",n,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",n),document.attachEvent("onWeixinJSBridgeReady",n))}else this.jsApiCall()},jsApiCall:function(){u.call(s,"jsApiParameters")&&WeixinJSBridge.invoke("getBrandWCPayRequest",s.jsApiParameters,function(e){delete s.jsApiParameters,"get_brand_wcpay_request:ok"==e.err_msg?r.innerCallback("success"):"get_brand_wcpay_request:cancel"==e.err_msg?r.innerCallback("cancel"):r.innerCallback("fail",r.error("wx_result_fail",e.err_msg))})},runTestMode:function(e){var t=confirm("模拟付款？");t&&i.request(this.PINGPP_NOTIFY_URL_BASE+e.id+"?livemode=false","GET",null,function(e,t){if(t>=200&&400>t&&"success"==e)r.innerCallback("success");else{var n="http_code:"+
t+";response:"+e;r.innerCallback("fail",r.error("testmode_notify_fail",n))}},function(){r.innerCallback("fail",r.error("network_err"))})}}},{"../callbacks":1,"../mods":19,"../stash":20,"../utils":22}],14:[function(e,t,n){var r=e("../utils"),i=e("../callbacks"),s={}.hasOwnProperty;t.exports={YEEPAY_WAP_URL:"https://ok.yeepay.com/paymobile/api/pay/request",YEEPAY_WAP_TEST_URL:"http://mobiletest.yeepay.com/paymobile/api/pay/request",handleCharge:function(e){for(var t=e.channel,n=e.credential[t],o=["merchantaccount","encryptkey","data"],u=0;u<o.length;u++)if(!s.call(n,o[u]))return void i.innerCallback("fail",i.error("invalid_credential","missing_field_"+o[u]));var f;f=s.call(n,"mode")&&"test"==n.mode?this.YEEPAY_WAP_TEST_URL:this.YEEPAY_WAP_URL,r.redirectTo(f+"?"+r.stringifyData(n,t,!0))}}},{"../callbacks":1,"../utils":22}],15:[function(e,t,n){var r=e("./utils"),i=e("./stash"),s=e("./libs/md5"),o={seperator:"###",limit:1,report_url:"https://statistics.pingxx.com/one_stats",timeout:100},u=function(e,t){var n=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),r=e.substr(0).match(n);return null!==r?unescape(r[2]):null},a=function(){return navigator.userAgent},f=function(){return window.location.host};o.store=function(e){if("undefined"!=typeof localStorage){var t=this,n={};n.app_id=e.app_id||i.app_id||"app_not_defined",n.ch_id=e.ch_id||"",n.channel=e.channel||"",n.type=e.type||"",n.user_agent=a(),n.host=f(),n.time=(new Date).getTime(),n.puid=i.puid;var r="app_id="+n.app_id+"&channel="+n.channel+"&ch_id="+n.ch_id+"&host="+n.host+"&time="+n.time+"&type="+n.type+"&user_agent="+n.user_agent+"&puid="+n.puid;"undefined"==typeof localStorage.PPP_ONE_STATS||0===localStorage.PPP_ONE_STATS.length?localStorage.PPP_ONE_STATS=r:localStorage.PPP_ONE_STATS=localStorage.PPP_ONE_STATS+t.seperator+r}},o.send=function(){if("undefined"!=typeof localStorage){var e=this;if(!("undefined"==typeof localStorage.PPP_ONE_STATS||localStorage.PPP_ONE_STATS.split(e.seperator).length<e.limit))try{for(var t=[],n=localStorage.PPP_ONE_STATS.split(e.seperator),i=s(n.join("&")),o=0;o<n.length;o++)t.push({app_id:u(n[o],"app_id"),channel:u(n[o],"channel"),ch_id:u(n[o],"ch_id"),host:u(n[o],"host"),time:u(n[o],"time"),type:u(n[o],"type"),user_agent:u(n[o],"user_agent"),puid:u(n[o],"puid")});r.request(e.report_url,"POST",t,function(e,t){200==t&&localStorage.removeItem("PPP_ONE_STATS")},void 0,{"X-Pingpp-Report-Token":i})}catch(a){}}},o.report=function(e){var t=this;t.store(e),setTimeout(function(){t.send()},t.timeout)},t.exports=o},{"./libs/md5":17,"./stash":20,"./utils":22}],16:[function(e,t,n){var r=e("./stash"),i=e("./utils"),s=e("./collection");t.exports={SRC_URL:"https://cookie.pingxx.com",init:function(){var e=this;i.documentReady(function(){e.initPuid()})},initPuid:function(){if("undefined"!=typeof window&&"undefined"!=typeof localStorage){var e;if("undefined"==typeof localStorage.pingpp_uid?(e=i.randomString(),localStorage.pingpp_uid=e):e=localStorage.pingpp_uid,r.puid=e,!document.getElementById("p_analyse_iframe")){var t=document.createElement("iframe");t.id="p_analyse_iframe",t.src=this.SRC_URL+"/?puid="+e,t.style.display="none",document.body.appendChild(t)}setTimeout(function(){s.send()},0)}}}},{"./collection":15,"./stash":20,"./utils":22}],17:[function(e,t,n){!function(){function e(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}function n(e,t){return e<<t|e>>>32-t}function r(t,r,i,s,o,u){return e(n(e(e(r,t),e(s,u)),o),i)}function i(e,t,n,i,s,o,u){return r(t&n|~t&i,e,t,s,o,u)}function s(e,t,n,i,s,o,u){return r(t&i|n&~i,e,t,s,o,u)}function o(e,t,n,i,s,o,u){return r(t^n^i,e,t,s,o,u)}function u(e,t,n,i,s,o,u){return r(n^(t|~i),e,t,s,o,u)}function a(t,n){t[n>>5]|=128<<n%32,t[(n+64>>>9<<4)+14]=n;var r,a,f,l,c,h=1732584193,p=-271733879,d=-1732584194,v=271733878;for(r=0;r<t.length;r+=16)a=h,f=p,l=d,c=v,h=i(h,p,d,v,t[r],7,-680876936),v=i(v,h,p,d,t[r+1],12,-389564586),d=i(d,v,h,p,t[r+2],17,606105819),p=i(p,d,v,h,t[r+3],22,-1044525330),h=i(h,p,d,v,t[r+4],7,-176418897),v=i(v,h,p,d,t[r+5],12,1200080426),d=i(d,v,h,p,t[r+6],17,-1473231341),p=i(p,d,v,h,t[r+7],22,-45705983),h=i(h,p,d,v,t[r+8],7,1770035416),v=i(v,h,p,d,t[r+9],12,-1958414417),d=i(d,v,h,p,t[r+10],17,-42063),p=i(p,d,v,h,t[r+11],22,-1990404162),h=i(h,p,d,v,t[r+12],7,1804603682),v=i(v,h,p,d,t[r+13],12,-40341101),d=i(d,v,h,p,t[r+14],17,-1502002290),p=i(p,d,v,h,t[r+15],22,1236535329),h=s(h,p,d,v,t[r+1],5,-165796510),v=s(v,h,p,d,t[r+6],9,-1069501632),d=s(d,v,h,p,t[r+11],14,643717713),p=s(p,d,v,h,t[r],20,-373897302),h=s(h,p,d,v,t[r+5],5,-701558691),v=s(v,h,p,d,t[r+10],9,38016083),d=s(d,v,h,p,t[r+15],14,-660478335),p=s(p,d,v,h,t[r+4],20,-405537848),h=s(h,p,d,v,t[r+9],5,568446438),v=s(v,h,p,d,t[r+14],9,-1019803690),d=s(d,v,h,p,t[r+3],14,-187363961),p=s(p,d,v,h,t[r+8],20,1163531501),h=s(h,p,d,v,t[r+13],5,-1444681467),v=s(v,h,p,d,t[r+2],9,-51403784),d=s(d,v,h,p,t[r+7],14,1735328473),p=s(p,d,v,h,t[r+12],20,-1926607734),h=o(h,p,d,v,t[r+5],4,-378558),v=o(v,h,p,d,t[r+8],11,-2022574463),d=o(d,v,h,p,t[r+11],16,1839030562),p=o(p,d,v,h,t[r+14],23,-35309556),h=o(h,p,d,v,t[r+1],4,-1530992060),v=o(v,h,p,d,t[r+4],11,1272893353),d=o(d,v,h,p,t[r+7],16,-155497632),p=o(p,d,v,h,t[r+10],23,-1094730640),h=o(h,p,d,v,t[r+13],4,681279174),v=o(v,h,p,d,t[r],11,-358537222),d=o(d,v,h,p,t[r+3],16,-722521979),p=o(p,d,v,h,t[r+6],23,76029189),h=o(h,p,d,v,t[r+9],4,-640364487),v=o(v,h,p,d,t[r+12],11,-421815835),d=o(d,v,h,p,t[r+15],16,530742520),p=o(p,d,v,h,t[r+2],23,-995338651),h=u(h,p,d,v,t[r],6,-198630844),v=u(v,h,p,d,t[r+7],10,1126891415),d=u(d,v,h,p,t[r+14],15,-1416354905),p=u(p,d,v,h,t[r+5],21,-57434055),h=u(h,p,d,v,t[r+12],6,1700485571),v=u(v,h,p,d,t[r+3],10,-1894986606),d=u(d,v,h,p,t[r+10],15,-1051523),p=u(p,d,v,h,t[r+1],21,-2054922799),h=u(h,p,d,v,t[r+8],6,1873313359),v=u(v,h,p,d,t[r+15],10,-30611744),d=u(d,v,h,p,t[r+6],15,-1560198380),p=u(p,d,v,h,t[r+13],21,1309151649),h=u(h,p,d,v,t[r+4],6,-145523070),v=u(v,h,p,d,t[r+11],10,-1120210379),d=u(d,v,h,p,t[r+2],15,718787259),p=u(p,d,v,h,t[r+9],21,-343485551),h=e(h,a),p=e(p,f),d=e(d,l),v=e(v,c);return[h,p,d,v]}function f(e){var t,n="";for(t=0;t<32*e.length;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function l(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;for(t=0;t<8*e.length;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function c(e){return f(a(l(e),8*e.length))}function h(e,t){var n,r,i=l(e),s=[],o=[];for(s[15]=o[15]=void 0,i.length>16&&(i=a(i,8*e.length)),n=0;16>n;n+=1)s[n]=909522486^i[n],o[n]=1549556828^i[n];return r=a(s.concat(l(t)),512+8*t.length),f(a(o.concat(r),640))}function p(e){var t,n,r="0123456789abcdef",i="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),i+=r.charAt(t>>>4&15)+r.charAt(15&t);return i}function d(e){return unescape(encodeURIComponent(e))}function v(e){return c(d(e))}function m(e){return p(v(e))}function g(e,t){return h(d(e),d(t))}function y(e,t){return p(g(e,t))}function b(e,t,n){return t?n?g(t,e):y(t,e):n?v(e):m(e)}t.exports=b}()},{}],18:[function(e,t,n){var r=e("./version").v,i=e("./testmode"),s=e("./callbacks"),o=e("./mods"),u=e("./stash"),a=e("./collection"),f={}.hasOwnProperty,l=function(){e("./init").init()};l.prototype={version:r,createPayment:function(e,t,n,r){"function"==typeof t&&(s.userCallback=t);var l;if("string"==typeof e)try{l=JSON.parse(e)}catch(h){return void s.innerCallback("fail",s.error("json_decode_fail",h))}else l=e;if("undefined"==typeof l)return void s.innerCallback("fail",s.error("json_decode_fail"));if(!f.call(l,"id"))return void s.innerCallback("fail",s.error("invalid_charge","no_charge_id"));if(!f.call(l,"channel"))return void s.innerCallback("fail",s.error("invalid_charge","no_channel"));f.call(l,"app")&&("string"==typeof l.app?u.app_id=l.app:"object"==typeof l.app&&"string"==typeof l.app.id&&(u.app_id=l.app.id)),a.report({type:"pure_sdk_click",channel:l.channel,ch_id:l.id});var p=l.channel;if(!f.call(l,"credential"))return void s.innerCallback("fail",s.error("invalid_charge","no_credential"));if(!l.credential)return void s.innerCallback("fail",s.error("invalid_credential","credential_is_undefined"));if(!f.call(l.credential,p))return void s.innerCallback("fail",s.error("invalid_credential","credential_is_incorrect"));if(!f.call(l,"livemode"))return void s.innerCallback("fail",s.error("invalid_charge","no_livemode_field"));var d=o.getChannelModule(p);return"undefined"==typeof d?(console.error('channel module "'+p+'" is undefined'),void s.innerCallback("fail",s.error("invalid_channel",'channel module "'+p+'" is undefined'))):l.livemode===!1?void (f.call(d,"runTestMode")?d.runTestMode(l):i.runTestMode(l)):("undefined"!=typeof n&&(u.signature=n),"boolean"==typeof r&&(u.debug=r),void d.handleCharge(l))},setAPURL:function(e){u.APURL=e}},t.exports=new l},{"./callbacks":1,"./collection":15,"./init":16,"./mods":19,"./stash":20,"./testmode":21,"./version":23}],19:[function(e,t,n){var r={}.hasOwnProperty,i={};t.exports=i,i.channels={alipay_pc_direct:e("./channels/alipay_pc_direct"),alipay_wap:e("./channels/alipay_wap"),bfb_wap:e("./channels/bfb_wap"),cp_b2b:e("./channels/cp_b2b"),fqlpay_qr:e("./channels/fqlpay_qr"),fqlpay_wap:e("./channels/fqlpay_wap"),jdpay_wap:e("./channels/jdpay_wap"),upacp_pc:e("./channels/upacp_pc"),upacp_wap:e("./channels/upacp_wap"),wx_pub:e("./channels/wx_pub"),yeepay_wap:e("./channels/yeepay_wap")},i.extras={ap:e("./channels/extras/ap")},i.getChannelModule=function(e){return r.call(i.channels,e)?i.channels[e]:void 0},i.getExtraModule=function(e){return r.call(i.extras,e)?i.extras[e]:void 0}},{"./channels/alipay_pc_direct":2,"./channels/alipay_wap":3,"./channels/bfb_wap":4,"./channels/cp_b2b":6,"./channels/extras/ap":7,"./channels/fqlpay_qr":8,"./channels/fqlpay_wap":9,"./channels/jdpay_wap":10,"./channels/upacp_pc":11,"./channels/upacp_wap":12,"./channels/wx_pub":13,"./channels/yeepay_wap":14}],20:[function(e,t,n){t.exports={}},{}],21:[function(e,t,n){var r=e("./utils"),i={}.hasOwnProperty;t.exports={PINGPP_MOCK_URL:"http://sissi.pingxx.com/mock.php",runTestMode:function(e){var t={ch_id:e.id,scheme:"http",channel:e.channel};i.call(e,"order_no")?t.order_no=e.order_no:i.call(e,"orderNo")&&(t.order_no=e.orderNo),i.call(e,"time_expire")?t.time_expire=e.time_expire:i.call(e,"timeExpire")&&(t.time_expire=e.timeExpire),i.call(e,"extra")&&(t.extra=encodeURIComponent(JSON.stringify(e.extra))),r.redirectTo(this.PINGPP_MOCK_URL+"?"+r.stringifyData(t))}}},{"./utils":22}],22:[function(e,t,n){var r={}.hasOwnProperty,i=t.exports={stringifyData:function(e,t,n){"undefined"==typeof n&&(n=!1);var i=[];for(var s in e)r.call(e,s)&&"function"!=typeof e[s]&&("bfb_wap"==t&&"url"==s||"yeepay_wap"==t&&"mode"==s||"channel_url"!=s&&i.push(s+"="+(n?encodeURIComponent(e[s]):e[s])));return i.join("&")},request:function(e,t,n,s,o,u){if("function"!=typeof XMLHttpRequest)return void console.log("Function XMLHttpRequest is undefined.");var f=new XMLHttpRequest;if("undefined"!=typeof f.timeout&&(f.timeout=6e3),t=t.toUpperCase(),"GET"===t&&"object"==typeof n&&n&&(e+="?"+i.stringifyData(n,"",!0)),f.open(t,e,!0),"undefined"!=typeof u)for(var l in u)r.call(u,l)&&f.setRequestHeader(l,u[l]);"POST"===t?(f.setRequestHeader("Content-type","application/json; charset=utf-8"),f.send(JSON.stringify(n))):f.send(),"undefined"==typeof s&&(s=function(){}),"undefined"==typeof o&&(o=function(){}),f.onreadystatechange=function(){4==f.readyState&&s(f.responseText,f.status,f)},f.onerror=function(e){o(f,0,e)}},formSubmit:function(e,t,n){if("undefined"==typeof window)return void console.log("Not a browser, form submit url: "+e);var i=document.createElement("form");i.setAttribute("method",t),i.setAttribute("action",e);for(var s in n)if(r.call(n,s)){var o=document.createElement("input");o.setAttribute("type","hidden"),o.setAttribute("name",s),o.setAttribute("value",n[s]),i.appendChild(o)}document.body.appendChild(i),i.submit()},randomString:function(e){"undefined"==typeof e&&(e=32);for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=t.length,r="",i=0;e>i;i++)r+=t.charAt(Math.floor(Math.random()*n));return r},redirectTo:function(e){return"undefined"==typeof window?void console.log("Not a browser, redirect url: "+e):void (window.location.href=e)},inWeixin:function(){if("undefined"==typeof navigator)return!1;var e=navigator.userAgent.toLowerCase();return-1!==e.indexOf("micromessenger")},documentReady:function(e){return"undefined"==typeof document?void e():void ("loading"!=document.readyState?e():document.addEventListener("DOMContentLoaded",e))}}},{}],23:[function(e,t,n){t.exports={v:"2.1.1"}},{}]},{},[18])(18)}),function(){GD.WxpayView=Backbone.View.extend({events:{"click .reload-qrcode":"fetchWxpayQrcdoe","hidden.bs.modal":"clearTimeouts"},initialize:function(){return this.timeoutIds=[]},clearTimeouts:function(){var e,t,n,r;n=this.timeoutIds;for(e=0,t=n.length;e<t;e++)r=n[e],clearTimeout(r);return this.timeoutIds=[]},fetchWxpayQrcdoe:function(e){var t,n,r,i;if(this.orderId)return n=$(e.target),t=n.data("base-url"),r=n.data("purpose"),i=""+t+this.orderId+"&purpose="+r,$.get(i,function(e){return function(t){var n;return n=e.$(".modal-body"),n.html($("#wxpay_qrcode_basic_template").html()),t.qrcode_url&&e._renderWxpayQrcodeContainer(t.qrcode_url,t.total_price),e.timeoutIds.push(e._showQrcodeErrorWhenTimeout())}}(this))},submitWxpay:function(e){var t;return t=$(e.target),$(e.target).is("i")&&(t=$(e.target).parent()),$.ajax({url:t.data("create-wxpay-path"),data:$(e.target).closest("form").serialize(),dataType:"json",method:"POST"}).done(function(e){return function(n){var r;return e.$el.addClass("wxpay"),e.orderId=n.order_id,r=t.data("success-base-url"),e.successUrl=""+r+e.orderId,GD.isOpenInWeiXin()?e._fetchWeixinPrepayId(e.orderId,t):(e.timeoutIds.push(e._showQrcodeErrorWhenTimeout()),e.$(".modal-body").html($("#wxpay_qrcode_basic_template").html()),GD.channel.bind("system_wxpay_qrcode_fetching_done",function(t){if(t.message.qrcode_url)return e._renderWxpayQrcodeContainer(t.message.qrcode_url,t.message.total_price)}),GD.channel.bind("system_wxpay_done",function(n){return r=t.data("base-url"),Turbolinks.visit(e.successUrl)}))}}(this)).fail(function(e){return function(t){var n;return e.$el.addClass("wxpay"),e.clearTimeouts(),n=JSON.parse(t.responseText),e.$(".modal-body").html("<p>"+n.message+"</p>")}}(this))},_showQrcodeErrorWhenTimeout:function(){return setTimeout(function(e){return function(){if(!e.$el.hasClass("qrcode-successful"))return e.$(".modal-body").html(_.template($("#wxpay_qrcode_failed_template").html())({purpose:e.purpose}))}}(this),6e3)},_renderWxpayQrcodeContainer:function(e,t){return this.$(".modal-body").html($("#wxpay_qrcode_basic_template").html()),this.$(".qrcode-image-container").append("<p class='message total-price'>&yen;"+t+"</p><p class='message'>使用微信二维码扫描完成付款</p>"),this.$(".qrcode").empty(),this.$el.addClass("qrcode-successful"),GD.renderQrcode($(".qrcode"),e,280),this.clearTimeouts()},_fetchWeixinPrepayId:function(e,t){var n,r,i;return GD.disableBtn(t),n=$(".wxpay-order-urls").data("prepay-id-request-path"),i=n+"?order_id="+e,r=!1,GD.pollingDataFromServer(1022,10,i,function(e){return function(n,i){if(n.errmsg)return clearInterval(i),alert("微信支付调起失败："+n.errmsg);if(n["package"]&&!r)return r=!0,clearInterval(i),e._initWxpayJsapi(e,n),GD.enableBtn(t)}}(this),function(){return alert("微信支付调起失败，请刷新页面"),GD.enableBtn(t)})},_initWxpayJsapi:function(e,t){return wx.chooseWXPay({timestamp:t.timeStamp,nonceStr:t.nonceStr,"package":t["package"],signType:t.signType,paySign:t.paySign,success:function(t){return Turbolinks.visit(e.successUrl)},fail:function(e){return alert("支付失败: "+JSON.stringify(e))}})}}),GD.PurchaseVasView=Backbone.View.extend({events:{"change .pay-choice [name=pay_type]":"selectAmount","change [name=coupon_codes]":"updatePriceSummary","click .wxpay.gd-btn":"submitWxpay","loaded.gd":"reset","click .pingpp.gd-btn, .pingpp.gd-btn i":"submitPingpp"},initialize:function(e){return this.wxpayView=new GD.WxpayView({el:this.el}),this.wxpayView.purpose=e.purpose},submitWxpay:function(e){return this.wxpayView.submitWxpay(e)},submitPingpp:function(e){var t,n;return t=$(e.target),$(e.target).is("i")&&(t=$(e.target).parent()),n=t.data("channel"),$.ajax({type:"POST",url:t.closest(".pingpp-payment").data("payment-service-url"),data:t.closest("form").serialize()+("&channel="+n),dataType:"json",beforeSend:function(e){return e.setRequestHeader("Authorization",t.closest(".pingpp-payment").data("token"))}}).done(function(e){return function(n){var r,i,s,o;s=t.closest(".pingpp-payment").data("success-url")+n.order_no;if(GD.isPhone)return pingpp.createPayment(n,function(e,n){if(e==="success")return window.location.href=s;GD.enableBtn(t);if(e!=="cancel")return alert(e+" "+n.msg+" "+n.extra)});e.$el.addClass("pingpp"),r=t.closest(".pingpp-payment").data("payment-service-check-url")+("/"+n.order_no),o=_.template($("#pingpp_qrcode_template").html()),i=o({totalPrice:n.amount/100}),e.$(".modal-body").html(i);if(n.credential.alipay_qr)return e.$(".qrcode-image-container").append("<p class='message'><i class='gd-icon-alipay alipay'></i>使用支付宝扫描二维码完成付款</p>"),GD.renderQrcode($(".qrcode"),n.credential.alipay_qr,280),e._fetchPaymentStatus(r,s);if(n.credential.wx_pub_qr)return e.$(".qrcode-image-container").append("<p class='message'><i class='gd-icon-wechat wxpay'></i>使用微信扫描二维码完成付款</p>"),GD.renderQrcode($(".qrcode"),n.credential.wx_pub_qr,280),e._fetchPaymentStatus(r,s)}}(this)).fail(function(e){return console.log(e),GD.enableBtn(t),e.status===401?alert("页面过期，请刷新重新尝试"):alert("创建支付失败 "+JSON.parse(e.responseText).errmsg)})},reset:function(){return this._initCouponSelector(),this.updatePriceSummary(),this.updateWeixinOpenid(),this.$el.removeClass("wxpay qrcode-successful")},selectAmount:function(e){var t;return t=$(e.target),t.closest(".pay-choice-container").find(".pay-choice").removeClass("selected"),t.closest(".pay-choice").addClass("selected"),this.updateDeprecitionText(),this.updatePriceSummary()},updateWeixinOpenid:function(){var e;e=$("section.plans-container").data("weixin_openid");if(e!=null)return $(".purchase-modal form").append("<input type='hidden' name='weixin_openid' value='"+e+"'>")},updateDeprecitionText:function(){var e,t,n,r,i;return t=this.$(".plan-deprecition-text"),e=t.data("deprecition-price"),r=this.$(".pay-choice.selected").data("price"),n=this.$(".pay-choice.selected").data("original-price"),i=e-n,r>0?(t.html("需要支付相应差价完成升级。"),this.$(":submit").val("确认支付")):(t.html("则原套餐抵扣后，还剩余<span class='highlight'>￥"+i.toFixed(2)+"</span>，将以余额的形式，退回到你的账户中。"),this.$(":submit").val("确认升级"))},updatePriceSummary:function(){var e,t,n,r;return n=this.$(".pay-choice.selected").data("price"),r=this.$(".additional-info"),n===0?r.hide():r.show(),e=this.$("[name=coupon_codes]").data("discount-value")||0,t=this.$("form").data("balance")||0,this._setOriginalAmount(n),this._setVasType(),n<e?(this._setCouponAmount(n),this._setBalanceAmount(0),this._setActualAmount(0)):(this._setCouponAmount(e),n-e>t?(this._setBalanceAmount(t),this._setActualAmount(n-e-t)):(this._setBalanceAmount(n-e),this._setActualAmount(0)))},_initCouponSelector:function(){var e,t,n,r,i;r=this.$("[data-role=coupon-selector]"),i=[];for(t=0,n=r.length;t<n;t++)e=r[t],i.push(new GD.CouponSelector({el:$(e)}));return i},_setVasType:function(){return this.$(".price-summary .package-type").html(this.$(".pay-choice.selected").data("vas-type"))},_setOriginalAmount:function(e){return this.$(".price-summary .original-amount").html("&yen;"+GD.numberToCurrencyFloat(e))},_setCouponAmount:function(e){return this.$(".price-summary .coupon-amount").html("-&yen;"+GD.numberToCurrencyFloat(e))},_setBalanceAmount:function(e){return this.$(".price-summary .balance-amount").html("-&yen;"+GD.numberToCurrencyFloat(e))},_setActualAmount:function(e){return this.$(".price-summary .actual-amount").html("&yen;"+GD.numberToCurrencyFloat(e)),this.$(".need-pay, .btn-payment").toggleClass("hide",e===0),this.$(".direct-pay").toggleClass("hide",e!==0)},_fetchPaymentStatus:function(e,t){return GD.pollingDataFromServer(3e3,60,e,function(e,n){if(e.paid)return clearInterval(n),Turbolinks.visit(t)})}}),GD.BalanceWarningView=Backbone.View.extend({el:"#account_charge_warning_modal",events:{"ajax:complete .charge":"renderCharge"},renderCharge:function(e,t,n){return this.$el.addClass("charge"),this.$(".modal-body").html(t.responseText),this.$(".modal-title").html("账户充值"),new GD.PurchaseVasView({el:this.el,purpose:"account_charge"})}}),GD.fetchWeixinOpenid=function(e){var t,n;return t=$("section.plans-container"),n=t.data("weixin-oauth-url")+"?code="+e,GD.pollingDataFromServer(1011,10,n,function(e,n){if(e.errmsg)return clearInterval(n),alert("微信信息获取失败，请刷新页面："+e.errmsg);if(e.openid)return clearInterval(n),t.data("weixin_openid",e.openid)},function(){return alert("微信信息获取失败，请刷新页面")})},$(document).on("ready",function(){var e;return GD.channel||(GD.channel=(e=GD.pusher)!=null?e.subscribe("presence_user_"+GD.currentUserId):void 0),$(document).on("click",".bankpay",function(){return $("#bankpay-detail").removeClass("hidden"),$(".bankpay").removeClass("gd-btn-primary").addClass("gd-btn-selected"),$(".bankpay").closest(".modal").animate({scrollTop:$(".bankpay").offset().top},500)})})}.call(this),function(){$(document).on("ready page:load",function(){var e,t,n,r,i,s;if($(".contact").length===0)return;new GD.ContactSendSMSView({el:$("#send_sms_to_contacts_modal")}),new GD.ContactSendEmailView({el:$("#send_email_to_contacts_modal")}),e=$("#delete_confirm_modal"),i=[".contact .entries",".contact .activities"];for(n=0,r=i.length;n<r;n++)s=i[n],$(s).load($(s).data("url")),$(s).on("click",".pagination a",function(e){return e.preventDefault(),$(this).closest(".entries, .activities").load($(this).attr("href"))});return e.on("ajax:complete",".submit",function(t,n){var r;return n.responseJSON.count>0?n.status===200?Turbolinks.visit($(".section-header .back").attr("href")):(e.modal("hide"),r=$(this).closest(".modal-dialog").find(".submit"),GD.showFlashNotification(n.responseJSON.message,"danger"),GD.enableBtn(r)):Turbolinks.visit("/home")}),t=Backbone.View.extend({events:{"click .submit":"submit","click .edit":"show","click .cancel-edit":"hide"},initialize:function(){var e,t;return t=this,this.$("form").validate({submitHandler:function(e){if(!t.verify())return;return e.submit(),GD.disableBtn($(".modify-box").find(".submit"))},errorElement:"span",errorClass:"error-tip",ignore:".ignore",rules:{"contact[name]":"required"},showErrors:function(e,t){return t.forEach(function(e){return $(e.element).closest(".form-group").addClass("error")}),this.defaultShowErrors()},success:function(e){return $(e).closest(".form-group").removeClass("error")}}),e=function(e){return{placeHolder:"添加多个请用分号或回车隔开",addingCallback:function(t,n){if(!GD.REGEXP[e].test(n))return t.addClass("error"),t.closest(".gd-input-prepend").addClass("error")},afterSyncCallback:function(e){if(!e.find(".error").length)return e.closest(".gd-input-prepend").removeClass("error")},errorCallback:function(){return GD.showFlashNotification("重复添加","danger")}}},this.$("#contact_emails").gdtokeninput(e("email")),this.$("#contact_phones").gdtokeninput(e("mobile"))},submit:function(e){return this._checkAnyTokenAdderHasValue()&&this.$(".token-input .token-new").each(function(){if($(this).val()!=="")return $(this).trigger(jQuery.Event("keypress",{which:13}))}),this.$("form").submit()},_checkAnyTokenAdderHasValue:function(){var e;return e=this.$(".token-input .token-new").map(function(){return $(this).val()}).get().join(""),e.length>0},show:function(){return this.$el.addClass("editing")},hide:function(){return this.$el.removeClass("editing")},verify:function(){return!this.$("form").find(".error").length}}),new t({el:$(".contact-info")})})}.call(this),function(){var e,t;e=function(){function e(e,t,n,r){this.id=e,this.name=t,this.hasEmail=!!n,this.hasMobile=!!r}return e}(),GD.selectedContacts=function(){var t,n,r,i;return t=$(".contacts-list"),t.find(".select-all-pages").prop("checked")?(i=parseInt(t.find(".total-entries span").text()),{query:(r=url("?"))!=null?r:{},count:i}):(n=_.reduce(t.find(".select-check:checked"),function(t,n){var r,i;return t||(t=[]),r=$(n).closest("tr"),i=new e($(n).val(),r.find(".contact-name").text(),r.find(".contact-email").text(),r.find(".contact-mobile").text()),t.push(i),t},[]),{contacts:n,count:n.length})},t=function(e,t){var n,r;return e.query?e.count:(r=t==="email"?"hasEmail":"hasMobile",n=_.select(e.contacts,function(e){return e[r]}),n.length)},GD.ContactListView=Backbone.View.extend({el:".contacts-list",events:{"mouseenter .contacts-content tr:odd":"hoverInItem","mouseleave .contacts-content tr:odd":"hoverOutItem","change .select-all:checkbox":"toggleAllOnPage","change .select-check:checkbox":"toggleOne","click .actions [data-role=add_tag] + .dropdown-menu a":"addTagToContacts","click a[data-role=toggle_all_pages]":"toggleAllPages"},initialize:function(){return this.totalCount=this.$(".total-entries span").text()},_targetRow:function(e){return $(e.target).closest("tr")},_selectAllPagesMessage:function(e){var t;return t=url("?")?"全选本次筛选结果中":"选择全部","已选择此页面上<strong>"+e+"</strong>位联系人。\n<a href='javascript:void(0)' data-role='toggle_all_pages' class='gd-link-with-underline-inverse'>"+t+"<strong>"+this.totalCount+"</strong>位联系人</a>"},_allPagesSelectedMessage:function(){var e;return e=url("?")?"已选择本次筛选结果中":"已选择全部",e+"<strong>"+this.totalCount+"</strong>位联系人。<a href='javascript:void(0)' data-role='toggle_all_pages' class='gd-link-with-underline-inverse'>清除所选内容</a>"},_updateMessage:function(e){var t,n;return t=this.$(".contacts-message"),e.query?t.show().find("td").html(this._allPagesSelectedMessage()):(n=e.count,this.$(".select-check:not(:checked)").length===0&&n<this.totalCount?t.show().find("td").html(this._selectAllPagesMessage(n)):t.hide())},_quotaNotEnough:function(e,t){return e>t},_quotaMightBeInsufficient:function(e,t){return e*1.5>t&&e<=t},_bindTooltipster:function(e,n){return e.removeAttr("data-toggle"),e.is(".tooltipstered")?e.tooltipster("content",$(n).html()):e.gdClickTooltip({backdrop:!0,content:$(n).html(),theme:"gd-tooltip-max-width",functionReady:function(e,n){var r,i;return r=e.data("role")==="send_sms"?"mobile":"email",i=t(GD.selectedContacts(),r),n.find(".selected-contacts-count").text(i),n.on("click","[data-toggle=modal]",function(t){return t.preventDefault(),e.tooltipster("hide"),$($(this).attr("href")).modal({backdrop:"static",keyboard:!1,show:!0})})}})},_destroyTooltipster:function(e){if(e.is(".tooltipstered"))return e.tooltipster("destroy")},_updateActionBtn:function(e,n,r){var i,s,o;if(!n.data("can-send"))return;if(r==="delete")return n.prop("disabled",e.count===0);i=r==="sms"?"mobile":"email",o=t(e,i),n.prop("disabled",o===0);if(n.data("skip-quota-check"))return;return s=n.data("quota"),this._quotaNotEnough(o,s)?this._bindTooltipster(n,"#"+r+"_vas_not_enough_tooltipster"):this._quotaMightBeInsufficient(o,s)?this._bindTooltipster(n,"#"+r+"_vas_might_insufficient_tooltipster"):(this._destroyTooltipster(n),n.attr({"data-toggle":"modal"}))},_updateActions:function(e){return this.$(".actions [data-role=add_tag]").toggleClass("disabled",e.count===0),this._updateActionBtn(e,this.$(".actions [data-role=send_sms]"),"sms"),this._updateActionBtn(e,this.$(".actions [data-role=send_email]"),"active_mail"),this._updateActionBtn(e,this.$(".actions [data-role=delete]"),"delete")},updateActionsAndMessage:function(){var e;e=GD.selectedContacts(),this._updateActions(e);if(this.$(".select-all-pages").length>0)return this._updateMessage(e)},hoverInItem:function(e){return this._targetRow(e).prev("tr").addClass("hover")},hoverOutItem:function(e){return this._targetRow(e).prev("tr").removeClass("hover")},toggleAllOnPage:function(e){var t;return t=$(e.target).is(":checked"),this.$(".select-check").prop("checked",t),this.$("tr").toggleClass("selected",t),t||this.$(".select-all-pages").prop("checked",!1),this.updateActionsAndMessage()},toggleOne:function(e){var t;return t=$(e.target).is(":checked"),this._targetRow(e).next("tr").andSelf().toggleClass("selected",t),t||this.$(".select-all-pages").prop("checked",!1),this.updateActionsAndMessage()},addTagToContacts:function(e){var t,n;n=GD.selectedContacts();if(n.count===0)return;return t=n.query?{contacts_query:n.query}:{contact_ids:_.pluck(n.contacts,"id")},$.ajax($(e.target).data("url"),{type:"PATCH",data:t,success:function(){return GD.turbolinksReloadWithCurrentPosition()}})},toggleAllPages:function(){var e;return e=this.$(".select-all-pages").prop("checked"),this.$(".select-all, .select-all-pages").prop("checked",!e).trigger("change")}})}.call(this),function(){var e,t,n;e=Backbone.Model.extend({idAttribute:"_id",urlRoot:"/contact_tags",defaults:{name:"",contacts_count:0},validate:function(e){var t;t=$.trim(e.name);if(!t)return"标签名称不能为空";if(GD.getStringLength(t)>40)return"标签名称不能超过20个字"}}),GD.ContactTagList=Backbone.Collection.extend({model:e}),n=Backbone.View.extend({tagName:"li",events:{"click [data-role=edit]":"_editTag","click [data-role=delete]":"_deleteTag"},initialize:function(){return this.listenTo(this.model,"destroy",this._reloadCurrentPage)},_editTag:function(e){return e.preventDefault(),e.stopPropagation(),this.$el.after((new t({model:this.model})).render().el),this.$el.remove()},_deleteTag:function(e){var t;return e.preventDefault(),e.stopPropagation(),this.model.get("contacts_count")>0?(t=$("#delete_contact_tag_confirm_modal"),t.find(".contact-tag-name").text(this.model.get("name")),t.modal("show"),t.find(".submit").off("click").one("click",function(e){return function(){return e.model.destroy()}}(this))):this.model.destroy()},_reloadCurrentPage:function(){return this.$el.hasClass("active")?Turbolinks.visit(url("path")):GD.turbolinksReloadWithCurrentPosition()},render:function(){var e;return e=_.template($("#show_contact_tag_template").html()),this.$el.html(e(this.model.attributes)),this}}),t=Backbone.View.extend({tagName:"li",events:{"blur input[name='contact_tag[name]']":"_onBlur","keypress input[name='contact_tag[name]']":"_save"},initialize:function(){return this.listenTo(this.model,"destroy",this.remove)},render:function(){var e;return $(".contacts a[data-role=new_tag]").addClass("disabled"),e=_.template($("#edit_contact_tag_template").html()),this.$el.html(e(this.model.attributes)),setTimeout(function(){return this.$('input[name="contact_tag[name]"]').select().focus()},10),this},_onBlur:function(e){if(this.model.isNew()){if(!$(e.target).val())return this.model.destroy(),this._enableAddBtn()}else if($.trim($(e.target).val())===this.model.get("name"))return this.$el.after((new n({model:this.model})).render().el),this.$el.remove(),this._enableAddBtn()},_save:function(e){var t,n;if(e.keyCode&&e.keyCode!==13)return;t=$.trim($(e.target).val()),n=this.model.save({name:t},{success:this._onSaveSuccess,error:function(e){return function(t,n,r){return e._onSaveError(n.responseJSON.errors)}}(this)});if(!n)return this._onSaveError([this.model.validationError])},_enableAddBtn:function(){return $(".contacts a[data-role=new_tag].disabled").removeClass("disabled")},_onSaveSuccess:function(){return GD.turbolinksReloadWithCurrentPosition()},_onSaveError:function(e){return GD.clearErrorMessageBelow(this.$(".input-with-enter-container")),GD.showErrorMessageBelow(this.$(".input-with-enter-container"),e.join("<br>")),this.$('input[name="contact_tag[name]"]').select().focus()}}),GD.ContactTagsManagementView=Backbone.View.extend({events:{"click a[data-role=new_tag]:not(.disabled)":"_addNewTag"},render:function(e){var t;return t=this.$(".contact-tags .no-tag"),this.collection.each(function(r){var i;return i=e&&r.get("_id")===e?"active":null,t.before((new n({model:r,className:i})).render().el)})},_addNewTag:function(){return this.$(".contact-tags").prepend((new t({model:new e})).render().el)}})}.call(this),function(){var e,t;e=Backbone.View.extend({events:{"shown.bs.modal":"onShown","submit form":"disableSubmitBtn","ajax:complete form":"onSendComplete"},_clearErrors:function(){var e,t,n,r;r=["signature","subject"];for(e=0,n=r.length;e<n;e++)t=r[e],GD.clearErrorMessageBelow(this.$("[name="+t+"]"));return GD.clearErrorMessageBelow(this._contentElement()),GD.clearErrorMessageBelow(this.$('[data-role="recipients"]'))},_showErrors:function(e){var t,n,r,i;i=["signature","subject"];for(t=0,r=i.length;t<r;t++)n=i[t],e[n]&&GD.showErrorMessageBelow(this.$("[name="+n+"]"),e[n].join("，"));e.content&&GD.showErrorMessageBelow(this._contentElement(),e.content.join("，"));if(e.contact_ids)return GD.showErrorMessageBelow(this.$('[data-role="recipients"]'),e.contact_ids.join("，"))},_contentElement:function(){var e;return e=this.$(".cke_editor_content_rich_editor"),e.length>0?e:this.$("[name=content]")},_selectedContacts:function(){var e,t;return t=GD.selectedContacts
(),t.query?t:(e=_.where(t.contacts,this.selectCondition),{contacts:e,count:e.length})},_recipientsSummary:function(e){var t,n;return n=3,e.query?"<span class='text-muted'>本次筛选结果中"+e.count+"位联系人</span>":(t=_.pluck(_.first(e.contacts,n),"name"),t.join("；")+"；<span class='text-muted'>"+(e.count>n?"等":"")+e.count+"位联系人</span>")},_appendSelectedContactsToForm:function(e){var t,n,r,i,s,o,u,a,f,l;t=this.$("form"),t.find("[name='contact_ids[]'], [name^=contacts_query]").remove();if(e.query){o=e.query,a=[];for(i in o)l=o[i],a.push(t.append("<input type='hidden' name='contacts_query["+i+"]' value='"+l+"'>"));return a}u=e.contacts,f=[];for(r=0,s=u.length;r<s;r++)n=u[r],f.push(t.append("<input type='hidden' name='contact_ids[]' value='"+n.id+"'>"));return f},_updateRecipients:function(){var e;return e=this._selectedContacts(),this.$("[data-role=recipients]").html(this._recipientsSummary(e)),this._appendSelectedContactsToForm(e)},_onShown:function(){},onShown:function(){return this._updateRecipients(),this._onShown()},disableSubmitBtn:function(){return GD.disableBtn(this.$(".submit"))},onSendComplete:function(e,t,n){return t.status===200?Turbolinks.visit(t.responseJSON.url):(GD.enableBtn(this.$(".submit")),this._clearErrors(),this._showErrors(JSON.parse(t.responseText).errors))}}),GD.ContactSMSTaskView=e.extend({initialize:function(){return this.selectCondition={hasMobile:!0}}}),GD.ContactEmailTaskView=e.extend({events:function(){return _.extend({},e.prototype.events,{"change [data-role=smtp_account_selector] .dropdown-menu input:radio":"updateView"})},initialize:function(){return this.selectCondition={hasEmail:!0},GD.initCKEditor(this.$("[name=content]")),this._initFieldPlaceHolder()},_initFieldPlaceHolder:function(){var e,t,n,r,i,s;i=this.$(".field-placeholder"),s=[];for(n=0,r=i.length;n<r;n++)t=i[n],GD.insertFieldsBaseTooltip(t),e=$(t).closest(".form-group"),e.data("field-placeholder-initialized")?s.push(void 0):s.push(new FieldPlaceholderInsertion({el:e}));return s},_hasVariables:function(){var e,t,n;return n=/\$\(姓名|手机|邮箱\)/,t=n.test(this.$("input[name=subject]").val()),e=n.test(this.$("textarea[name=content]").val()),t||e},_onShown:function(){return this.updateView()},updateView:function(){var e,t;e=this.$("[data-role=smtp_account_selector]"),GD.clearErrorMessageBelow(e),t=!!e.find(".dropdown-menu input:radio:checked").val(),this.$(".field-placeholder").toggleClass("gd-hide",t),this.$(".submit").removeClass("disabled");if(!t)return this._updateWhenQuotaNotEnough(e);if(this._hasVariables())return GD.showErrorMessageBelow(e,"通过自有SMTP服务器发送邮件，邮件主题和邮件内容不支持插入数据，请修正。")},_updateWhenQuotaNotEnough:function(e){var t,n;t=$('.contacts [data-role="send_email"]').data("quota"),n=this._selectedContacts().count;if(this._quotaNotEnough(n,t))return GD.showErrorMessageBelow(e,"你当前的邮件余量为"+t+"封，如需发送给所选"+n+"位联系人，请先<a href='/profile?modal_trigger_id=purchase_active_mail_modal_trigger'>购买邮件包</a>。"),this.$(".submit").addClass("disabled");if(this._quotaMightBeInsufficient(n,t))return GD.showErrorMessageBelow(e,"你当前的邮件余量为"+t+"封，若要继续发送给所选"+n+"位联系人，可能会造成账户欠费无法正常使用，我们建议你先<a href='/profile?modal_trigger_id=purchase_active_mail_modal_trigger'>购买邮件包</a>，购买成功后再次发送。")},_quotaNotEnough:function(e,t){return e>t},_quotaMightBeInsufficient:function(e,t){return e*1.5>t&&e<=t}}),GD.ContactDeleteTaskView=e.extend({_updateDialog:function(e){return this.$(".selected-count").text(e.count)},onShown:function(){var e;return e=this._selectedContacts(),this._updateDialog(e),this._appendSelectedContactsToForm(e)},onSendComplete:function(e,t,n){if(!(t.responseJSON.count>0))return Turbolinks.visit("/home");Turbolinks.visit(window.location.href);if(t.status!==200)return this.$el.modal("hide"),GD.showFlashNotification("联系人不存在","danger")}}),t={getContact:function(){var e;return e=[{hasEmail:!!$("#email_link").text(),hasMobile:!!$("#sms_link").text(),id:$(".contact-info").data("contact-id"),name:$(".contact-info").find(".name").text()}],{contacts:e,count:e.length}},_selectedContacts:function(){var e,t;return t=this.getContact(),e=_.where(t.contacts,this.selectCondition),{contacts:e,count:e.length}}},GD.ContactSendSMSView=GD.ContactSMSTaskView.extend(_.extend({},t)),GD.ContactSendEmailView=GD.ContactEmailTaskView.extend(_.extend({},t))}.call(this),function(){var e;e=function(e){var t,n,r,i,s,o,u,a,f;a=url(2).split("_")[0],u=url(3),s="contact_"+a+"_task_"+u+"_progress",n=e.find(".task-progress"),t=n.find(".progress-bar"),i=function(){return GD.showFlashNotification("发送完成，即将显示发送结果详情"),setTimeout(function(){return Turbolinks.visit(window.location.href)},2e3)},o=function(e,n,r){var i;i=Math.min(e+10,n,100),t.css({width:i+"%"});if(i<n)return setTimeout(function(){return o(i,n,r)},500);if(i===100&&r)return setTimeout(r,500)},r=function(e,t){return e*100/t},f=function(e,s){return s||(s=parseInt(t.data("total"))),n.find(".gd-progress-text").text(e+" / "+s),o(r(t.data("processed"),s),r(e,s),i),t.data("processed",e)},GD.channel.unbind(s).bind(s,function(e){var t;return e.message==="status_changed"?Turbolinks.visit(window.location.href):(t=parseInt(e.message),f(t))});if(t.length>0){t.data("processed")===t.data("total")&&i();if(t.data("processed")===0)return $.getJSON(url("path")+"/progress",function(e){return t.data("total",e.total_activities),f(e.public_activities_count,e.total_activities)})}},$(document).on("ready page:load",function(){var t,n,r,i,s,o,u;$(".contact-tasks, .contact-task").on("click",".pagination-container .pagination a",function(e){return e.preventDefault(),GD.loadWithLoading($(this).attr("href"),$(this).closest("[data-role=ajax_replaceable]"),"contact_task")}),$(".contact-tasks, .contact-task").on("change","select[name=per_page], select[name=status]",function(){var e,t,n,r;return e=$(this).data("base-url"),r=$(this).val(),r?(t=e.indexOf("?")<0?"?":"&",n=""+e+t+$(this).attr("name")+"="+r):n=e,GD.loadWithLoading(n,$(this).closest("[data-role=ajax_replaceable]"),"contact_task")}),n=$(".contact-tasks");if(n.length>0){o=n.find(".tab-pane[data-url]");for(i=0,s=o.length;i<s;i++)u=o[i],$(u).load($(u).data("url"));n.on("click",".contact-task-list tr[data-url]",function(){return Turbolinks.visit($(this).data("url"))})}t=$(".contact-task");if(t.length>0)return GD.isTextOverflow($(".task-content"))&&$(".expand-content").show(),r=t.find(".task-activities"),r.length===0&&e(t),t.on("click",".expand-content",function(){return $(this).hide(),$(".collapse-content").show(),$(".task-content").removeClass("content-collapsed")}),t.on("click",".collapse-content",function(){return $(this).hide(),$(".expand-content").show(),$(".task-content").addClass("content-collapsed")})})}.call(this),function(){$(document).on("ready page:load",function(){if($(".contacts").length===0)return;return new GD.ContactListView,new GD.ContactSMSTaskView({el:$("#send_sms_to_contacts_modal")}),new GD.ContactEmailTaskView({el:$("#send_email_to_contacts_modal")}),new GD.ContactDeleteTaskView({el:$("#delete_contact_confirm_modal")})})}.call(this),function(){$(document).on("ready page:load",function(){var e;e=$(".entry-transaction-histories");if(e.length>0)return $("#entry_transaction_trends").highcharts({chart:{type:"area"},title:{text:null},height:"390px",credits:{enabled:!1},xAxis:{categories:$("#entry_transaction_trends").data("date-range")},yAxis:{allowDecimals:!1,min:0,minRange:.1,title:{text:"交易量"}},plotOptions:{line:{dataLabels:{enabled:!0},enableMouseTracking:!1}},exporting:{enabled:!1},series:[{name:"下单量",data:$("#entry_transaction_trends").data("ordered-stats"),color:"#24D1DC",fillColor:"#E7FBFC"},{name:"成交量",data:$("#entry_transaction_trends").data("paid-stats"),color:"#F9B72C",fillColor:"#EAF3E2"}]}),e.on("click",".entry-detail-link",function(e){var t,n,r,i,s,o;t=$("#entries_show_modal"),t.modal("show"),n=$(e.target).data("entry"),r="";for(o in n)i=n[o],s=i.value?i.value:"",r+="<dt>"+i.label+"</dt><dd>"+s+"</dd>";return t.find(".details").html(r)}),e.on("click",".shortcut-links a",function(e){var t,n,r,i;return i=$(this).data("ordered-at-start"),t=$(this).parents(".date-with-shortcut-links"),r=t.find("#q_ordered_at_start"),n=t.find("#q_ordered_at_end"),r.datepicker("update",i),n.datepicker("update",new Date),$(this).siblings("a").removeClass("current"),$(this).addClass("current")});return})}.call(this),function(){var e,t,n;e=function(){return $(".mobile-device").length>0},t=function(){var e;return typeof (e=$(".template textarea[data-counter-rel]")).charLimiter=="function"?e.charLimiter():void 0},n=function(){if($("#template_container").is(":not(.site-template)"))return $(".template .entry-container").height(function(){var e;return e=$(window).height()-$(this).offset().top,e>$(this).find(".half-transparent-cover").height()?e:"auto"})},$(document).on("page:load ready",function(){var r,i,s,o,u,a;if($("#template_container").length===0)return;return $.removeCookie("action_type"),$(".template .search .search-content").on("keypress",function(e){if(e.keyCode===13)return $(this).blur(),$(".template .search i").click()}),r=$(".template .form-preview-with-theme"),a=r.children("form"),i=$(window).height()-((s=(o=a.offset())!=null?o.top:void 0)!=null?s:0),a.height()>i&&!e()&&(a.css({maxHeight:i-50}),u=$("<a class='expand' href='javascript:void(0)'><hr>展开显示全部 <i class='fa fa-arrow-down'></i></a>"),a.after(u),r.after("<div class='zigzag'></div>")),typeof GD.bindKeyNav=="function"&&GD.bindKeyNav(".template-actions"),t(),n(),$("#template_container").on("resize",function(){return n()}),$("#template_container").on("click",".actions .title",function(){return $(this).parent().find("ul").toggleClass("gd-hide"),$(this).find(".add-on i").toggleClass("fa-angle-down").toggleClass("fa-angle-up")}),$("#template_container").on("click","#select_form_modal .disabled a",function(e){return e.preventDefault()}),$("#template_container").on("click","#select_form_modal .form:not(.disabled) a",function(e){return $("#select_form_modal").modal("hide"),$("#template_container").append('<div class="cover"></div>'),$(".loading").show()}),$("#template_container").on("click",".search i",function(){var e;return e=$(this).data("url")+("?key_word="+encodeURIComponent($(this).siblings(".search-content").val())),Turbolinks.visit(e)}),$("#template_container").on("page:load ready",function(){}),$("#template_container").on("ajax:complete",".hot-templates",function(e,t,n){var r;$(this).html(t.responseText),r=$(this).find(".notification").data("message");if(r)return GD.showFlashNotification(r)}),$("#template_container").on("ajax:complete",".social-actions",function(e,t,n){var r;$(".template .social-actions").html(t.responseText),r=$(this).find(".notification").data("message");if(r)return GD.showFlashNotification(r)}),$("#template_container").on("ajax:complete",".comments",function(e,n,r){return $(this).html(n.responseText),$(".template .social-actions .comments-count").text($(this).find("[data-comments-count]").data("comments-count")),t()}),$("#template_container").on("click",".social-actions a[href=#comment_content]",function(){return $("#comment_content").focus()}),$("#template_container").on("mouseenter",".has-sub-menu",function(){if(!e())return $(this).data("hover",!0).find(".sub-menu").show()}),$("#template_container").on("mouseleave",".has-sub-menu",function(){if(!e())return $(this).removeData("hover"),setTimeout(function(e){return function(){if(!$(e).data("hover"))return $(e).find(".sub-menu").hide()}}(this),100)}),$(".template.mobile-device").on("click",".has-sub-menu",function(){return $(this).siblings(".focus").removeClass("focus"),$(this).siblings().find(".sub-menu").hide(),$(this).toggleClass("focus"),$(this).find(".sub-menu").toggle()}),$("#template_container").on("click",".form-preview-with-theme form + .expand",function(){return $(this).tooltip("destroy"),$(this).prev("form").css({maxHeight:"none"}),$(this).closest(".form-preview-with-theme").next(".zigzag").remove(),$(this).remove()}),$("#template_container").on("mouseenter",".template-sidebar .top-templates li",function(){var e;if(!$(this).is(".active"))return e=$(this).parent().find("li.active"),e.find(".on-hover-info").stop().slideUp("fast"),e.removeClass("active"),$(this).addClass("active"),$(this).find(".on-hover-info").stop().slideDown("fast")}),$("#select_form_modal").on("shown.bs.modal",function(){if(!$(this).data("loaded"))return $.getJSON("/forms",function(e){return function(t,n,r){var i,s,o,u;i=$("<ul>");for(o=0,u=t.length;o<u;o++)s=t[o],i.append("<li><a href='javascript:void(0)' data-form-token='"+s.token+"'>"+GD.htmlSafe(s.name)+"</a></li>");return $(e).find(".modal-body").html(i),$(e).data("loaded",!0)}}(this))}),$("#select_form_modal").on("click","a[data-form-token]",function(){return $.post("/templates",{form_token:$(this).data("form-token")},function(e){return Turbolinks.visit("/templates/"+e.token+"/edit_info")})}),$("#template_container").on("change",".edit-info .industries input:checkbox",function(e){if($(this).is(":checked")&&$(this).closest(".industries").find("input:checked").length>3)return $(this).attr("checked",!1),alert("最多可以选择3个行业")})})}.call(this),function(){$(document).on("ready page:load",function(){var e,t,n;if($(".plans-container").length===0)return;return e=function(e,t){var n;return t==null&&(t=10),n=$(".plan").filter("."+e),$("html, body").animate({scrollTop:n.offset().top-t+"px"},400)},n=function(){return $("[data-user-plan-code]").data("user-plan-code")},t=function(e,t){if(t==="true"&&(e==="pro2"||e==="ent2"))return $("#upgrade_renew_plan_"+e+"_modal").modal("show")},t(url("?lowest_plan_code"),url("?auto_opener_upgrade_modal")),GD.isMobile&&n()&&e(n()),new GD.PurchaseVasView({el:"#upgrade_renew_plan_pro2_modal",purpose:"upgrade_renew"}),new GD.PurchaseVasView({el:"#upgrade_renew_plan_ent2_modal",purpose:"upgrade_renew"}),new GD.PurchaseVasView({el:"#upgrade_renew_plan_org_modal",purpose:"upgrade_renew"}),new GD.PurchaseVasView({el:"#upgrade_renew_plan_org_premium_modal",purpose:"upgrade_renew"}),new GD.PurchaseVasView({el:"#upgrade_renew_plan_org_ultimate_modal",purpose:"upgrade_renew"}),$(".plans-container").on("click",".pay-type [data-type]",function(){var e,t;e=$(this);if(e.is(".selected"))return;return e.siblings("[data-type]").removeClass("selected"),e.addClass("selected"),t=e.data("type"),$(".plan-versions [data-type]").hide(),$(".plan-versions [data-type="+t+"]").show()}),$("#upgrade_renew_plan_pro2_modal, #upgrade_renew_plan_ent2_modal").on("loaded.gd",function(){var e;return e=$(".pay-type [data-type].selected").data("type"),$(this).find(".pay-choice[data-type="+e+"]").click()})}),$(document).on("click","#send_verification_code",function(){return GD.getMobileVerifyCode(this)}),$(document).on("ajax:complete","#set_mobile_no_form",function(e,t,n){var r,i;e.stopPropagation(),$("form#set_mobile_no_form p.mobile-no-error").empty().hide();if(t.status===200)return i=$(this).closest(".modal").data("url"),r=$.get(i),r.success(function(e){return function(t){var n,r,i,s,o,u;s=$(e).closest(".modal").data("pay-modal-title"),$(e).closest(".modal-content").find(".modal-title").text(s),$(e).closest(".modal-body > div").replaceWith(t),o=$("[data-role=coupon-selector]"),u=[];for(r=0,i=o.length;r<i;r++)n=o[r],u.push(new GD.CouponSelector({el:$(n)}));return u}}(this)),r.error(function(e){return function(e){return alert("网络出错，请刷新重试")}}(this));!t.responseJSON.error.mobile||$("form#set_mobile_no_form p.mobile-no-error").show().text(t.responseJSON.error.mobile);if(!!t.responseJSON.error.token)return $("form#set_mobile_no_form p.veri-code-error").show().text(t.responseJSON.error.token)})}.call(this),function(){$(document).on("ready page:load",function(){if($("#template_container").length)return $(".hot-templates").on("click",".show-more-links",function(e){return $(e.target).siblings().removeClass("gd-hide"),$(e.target).addClass("gd-hide")})})}.call(this),function(){var e,t;t=function(){return $(document).on("click","#site_meau_toggle",function(){return $(".gd-overlay").css("display")==="none"?($(".gd-overlay").show(),$(".menu-nav").show().addClass("collapse-menu").animate({right:"0px"})):($(".menu-nav").animate({right:"-200px"}).hide(),$(".gd-overlay").hide())})},e=function(){return $(document).on("click",".gd-overlay",function(){return $(".navbar-toggle").trigger("click")})},$(document).on("ready page:load",function(){return $("body > *").on("click",function(){})}),t(),e(),$(document).on("show.bs.dropdown",function(e){return $(".dropdown-backdrop").off().remove()})}.call(this),function(){$(function(){return $("[data-role=smtp_account_selector]").livequery(function(){return $(this).on("change",".dropdown-menu input:radio",function(e){return function(){var t,n,r;return t=$(e).find(".dropdown-menu"),t.find("li.active").removeClass("active"),n=t.find("input:radio:checked"),n.closest("li").addClass("active"),$(e).find(".selected-account").text(n.closest("label").text()),r=!!n.val(),$(e).find(".help-default").toggleClass("hide",r),$(e).find(".help-custom-smtp").toggleClass("hide",!r)}}(this))})})}.call(this),function(){$(function(){var e,t,n,r;return e=function(e,t,n){if(t)return ga("send","event",e,t,n)},r=function(t,n,r,i){return $(t).livequery(function(){return $(this).one("click",function(){return e(n,r,i)})})},n=function(t,n,r,i,s){return $(document).on(t,n,function(){var t,n;return n=i,typeof i=="function"&&(n=i($(this))),t=s,typeof s=="function"&&(t=s($(this))),e(r,n,t)})},t=function(e,t,r,i){return n("click",e,t,r,i)},t(".site .header-banner .menu-nav .track-event, .template .header-banner .menu-nav .track-event","网站导航",function(e){return"点击"+e.text()},function(e){return"首页点击"+e.text()}),t(".site .design-section .track-event","首页",function(e){return"点击"+e.text()},function(e){return"Row1点击"+e.text()}),t(".site .story-section .track-event","首页",function(e){return"点击"+e.text()},function(e){return"Row2点击"+e.text()}),t(".site .explore-section .track-event","首页",function(e){return"点击"+e.text()},function(e){return"Row3点击"+e.text()}),t(".header-banner .track-event.brand-event:not(.prod)","导航","点解导航栏金数据Logo"),t(".header-banner .user-nav .track-event.login-event","注册登录","导航登录"),t(".header-banner .user-nav .track-event.signup-event","注册登录","导航注册"),t(".site .site-container .track-event.hero-image-event","注册登录","Hero_Img按钮"),t(".site .site-container .track-event.hero-image-pro-event","点击升级套餐","Hero_Img按钮"),t(".site .site-container .track-event.low-wall-signup-event","注册登录","Low_Wall注册按钮"),t(".site .site-container .track-event.low-wall-plan-event","点击Low_Wall套餐","Low_Wall升级按钮"),t(".template .track-event.template-login-event","注册登录","模板中心登录"),t(".template .track-event.template-signup-event","注册登录","模板中心注册"),t(".template .top-navbar .sub-menu .track-event","模板中心",function(e){return e.text()},function(e){return"分类导航_"+e.text()}),t(".prod .header-banner .track-event.forms-event","应用导航","点击表单","点击金数据表单"),t(".prod .header-banner .track-event.contacts-event","应用导航","点击人","点击金数据人"),t(".prod .header-banner .track-event.transactions-event","应用导航","点击交易","点击金数据交易"),t(".prod .header-banner .track-event .gd-icon-logo","应用导航","点击金数据LOGO","进入Home页面"),t(".prod .header-banner .track-event .brand-name","应用导航","点击金数据","进入Home页面"),t(".prod .header-banner .header-nav .upgrade-plan-event","应用导航","套餐升级","免费用户点击升级"),t(".prod .header-banner .header-nav .renew-plan-event","应用导航","套餐续费","专业版用户点击升级"),t(".prod .header-banner .track-event .gd-icon-help-circle-o","应用导航","帮助","进入帮助中心"),t(".prod .header-banner .track-event .gd-icon-bell","应用导航","通知","进入通知提醒"),r(".prod .header-banner .header-nav .notifications-content .view-all-notifications-event","应用导航","通知","查看全部通知消息"),r(".prod .tooltipster-base .track-event.result-item-event","应用导航","搜索","用户点击了搜索出来的结果"),r(".prod .tooltipster-base .track-event.profile-event","应用导航","个人中心","点击个人中心默认进入账户概览"),r(".prod .tooltipster-base .track-event.template-event","应用导航","模板中心"),r(".prod .tooltipster-base .track-event.logout-event","应用导航","退出","点击退出"),t(".profile .nav .track-event","个人中心",function(e){return e.text()}),t("#account_overview .track-event.renew-plan-event","账户概览","点击套餐续费","付费用户点击续费"),t("#account_overview .track-event.upgrade-plan-event","账户概览","点击升级套餐","免费用户点击升级"),t("#account_overview .track-event.low-wall-upgrade-plan-event","账户概览","点击Low_Wall套餐","免费用户点击升级"),t("#account_overview .track-event.charge-event","账户概览","点击充值","点击充值"),n("change","#account_overview .track-event.no-branding-event","账户概览","开关隐藏Logo"),n("change","#account_overview .track-event.custom-domain-event","账户概览","开关自定义域名"),t("#account_overview .track-event.sms-history-event","账户概览","查看短信记录"),t("#account_overview .track-event.email-history-event","账户概览","查看邮件记录"),t("#account_overview .track-event.payment-history-event","账户概览","查看消费历史"),t("#account_overview .track-event.bill-event","账户概览","查看账单"),t("#account_settings .track-event.bind-mobile-no-event","账户概览","绑定手机号","点击绑定手机号"),t("#invite_friends .track-event.coupon-history-event","邀请好友","查看金额明细"),t("#invite_friends .track-event.copy-invite-link-event","邀请好友","复制链接"),t("#bill_center #daily_usage .track-event.bill-item-event","费用中心","查看日账单条目"),t("#bill_center #monthly_usage .track-event.bill-item-event","费用中心","查看月账单条目"),t("#bill_center #bill .track-event.daily-usage-event","费用中心","按日查看账单"),t("#bill_center #bill .track-event.monthly-usage-event","费用中心","按月查看账单"),t("#bill_center .track-event.activate-coupon-event","费用中心","点击激活优惠券"),t("#bill_center .track-event.apply-invoice-event","费用中心","点击申请发票"),t("#weixin .track-event.add-weixin-account-event","微信与支付","点击添加微信公众账号"),t("#weixin .track-event.add-alipay-account-event","微信与支付","点击添加支付宝收款方式"),t("#weixin .track-event.add-pingpp-account-event","微信与支付","点击添加Ping++收款方式"),r(".prod .tooltipster-base .track-event.blank-form-create-event","应用桌面","创建空白表单"),r(".prod .tooltipster-base .track-event.excel-form-create-event","应用桌面","Excel创建表单"),r(".prod .tooltipster-base .track-event.template-form-create-event","应用桌面","模板创建表单"),r(".prod .tooltipster-base .track-event.form-folder-create-event","应用桌面","创建文件夹"),t(".dashboard .user-tags li[data-tag-id!=SHARED_FORMS_TAG_ID] .track-event.tag-click-event","应用桌面","标签点击","点击任何一个标签"),t(".dashboard .user-tags li[data-tag-id=SHARED_FORMS_TAG_ID] .track-event.tag-click-event","应用桌面","共享表单"),t(".dashboard .track-event.participated-forms-event","应用桌面","为别人填写的表单"),t("#form_nav .track-event","表单导航",function(e){return e.text()}),t(".form-nav .track-event.open-form-link-event","表单导航","点击直接打开"),t(".form-nav .track-event.copy-form-link-event","表单导航","点击复制链接"),t(".form-settings .nav .track-event","表单设置",function(e){return $.trim(e.text())}),n("change",".form-settings #weixin .track-event.weixin-limited-event","表单设置","开关只在微信打开"),n("change",".form-settings #weixin .track-event.weixin-notification-toggle-event","表单设置","开关微信推送"),t(".form-entry .track-event.export-event","数据查看","导出到Excel"),t(".form-entry .track-event.add-entry-event","数据查看","点击添加"),t(".form-entry .track-event.delete-entry-event","数据查看","点击删除"),t(".form-entry .track-event.bulk-edit-entry-event","数据查看","点击批量编辑"),t(".form-entry .track-event.reload-entry-event","数据查看","点击刷新"),t(".form-entry .track-event.append-excel-event","数据查看","点击从Excel追加"),r(".prod .tooltipster-base .track-event.view-all-notifications-event","消息","进入消息中心"),t(".prod .track-event.notification-center-event","消息","点击消息中心提醒"),r(".tooltipster-base #dashboard_create_new_options .gd-icon-create-blank-form","创建表单","创建空白表单"),r(".tooltipster-base #dashboard_create_new_options .gd-icon-create-form","创建表单","从模板创建新表单"),r(".tooltipster-base #dashboard_create_new_options .gd-icon-excel","创建表单","从Excel创建新表单"),r(".tooltipster-base #dashboard_create_new_options .gd-icon-create-folder","创建表单","创建新文件夹"),r(".tooltipster-base .tooltipster-content .gd-icon-copy","设置表单","复制表单"),r(".tooltipster-base .tooltipster-content .gd-icon-pin","设置表单","置顶表单"),r(".tooltipster-base .tooltipster-content .gd-icon-tag","设置表单","为表单设置标签"),t("#user_tags_container .user-tags .editable .tag-click-event .pull-left","标签","进入标签"),t("#cover_list .folder-link","文件夹","进入文件夹"),t(".form-overview .gd-row .gd-grid-block .number","表单概述","数据概述"),t(".form-overview .setting-info .left-setting .setting-value .privilege-setting","表单概述","填写者权限"),t(".form-overview .setting-info .left-setting .setting-value .form-on-off-setting","表单概述","表单开启设置"),n(".form-overview .setting-info .left-setting .setting-value .switch-container","表单概述","表单开启关闭开关"),t(".form-overview .setting-info .right-setting .setting-value .gd-icon-edit","表单概述","编辑标签"),t(".form-overview .setting-info .right-setting .setting-value .email-notification-setting-trigger","表单概述","邮件推送提醒"),t(".form-overview .setting-info .right-setting .setting-value .sms-notification-setting-trigger","表单概述","短信推送提醒"),t(".form-overview .setting-info .right-setting .setting-value .avatar","表单概述","点击概述中的头像"),t("#notification .notification-setting .section-email-auto .bind-weixin-account","微信通知绑定","绑定微信号","在表单中点击后跳转到个人中心页面绑定微信通知"),t("#user_form_setting_weixin_notification:not(:checked)","微信通知绑定","选中新数据微信自动提醒"),t("#bind_gd_weixin_modal","微信通知绑定","个人中心微信绑定","在个人中心进行微信绑定"),t(".prod .track-event.contact-send-sms-event","联系人","发短信","在联系人页面发送短信"),t(".prod .track-event.contact-send-email-event","联系人","发邮件","在联系人页面发送邮件"),t(".prod .track-event.contact-add-tag-event","联系人","添加到","给联系人添加标签"),t(".prod .track-event.contact-select-all-event","联系人","全选","在联系人列表选择全部"),t(".prod .track-event.contact-filter-by-form-event","联系人","按表单过滤","在联系人列表按表单过滤")})}.call(this),function(){$(document).on("page:load ready",function(){return $(".apps [data-remote-content], .app [data-remote-content]").each(function(){return $(this).load($(this).data("remote-content"))})})}.call(this),function(){$(document).on("page:load ready",function(){if(!$("#login_selection"))return;return GD.logoutLink($("#login_selection .logout-link"))})}.call(this),function(){GD.Org.ParentChildView=GD.Org.BaseView.extend({template:"department_template",renderChildren:function(e){var t;if(!this.model.hasChild())return;return t=$("<"+this.childWrapTag+">").append(this.buildChildElements(e)),this.$el.append(t)},buildChildElements:function(e){return _.map(this.model.get("children"),function(t){return function(n){var r;if(n.get("deleted"))return;return r=e.call(t,n),$("<"+t.childTag+">").append(r.render().el)}}(this))}})}.call(this),function(){GD.Org.LayoutView=Backbone.View.extend({render:function(){var e,t;return t=this.subviews.call(this),e=_.map(t,function(e){return e.render().el}),this.$el.html(e),this}})}.call(this),function(){GD.Org.Activity=GD.Org.BaseModel.extend({url:function(){return"/organization/activities"}})}.call(this),function(){GD.Org.Setup.OrganizationPreview=GD.Org.BaseModel.extend({defaults:{navBgColor:"#222222",navColor:"#FAFAFA",navDisplay:"logo_text",name:"",logo:""},showLogo:function(){return this.get("navDisplay")==="logo_text"||this.get("navDisplay")==="logo"},showText:function(){return this.get("navDisplay")==="logo_text"||this.get("navDisplay")==="text"},hasLogo:function(){var e;return((e=this.get("logo"))!=null?e.length:void 0)>0}}),GD.Org.Setup.OrganizationPreview.from=function(e){return new GD.Org.Setup.OrganizationPreview({navBgColor:e.get("setting").get("nav_bg_color"),navColor:e.get("setting").get("nav_color"),navDisplay:e.get("setting").get("nav_display"),name:e.get("short_name"),logo:e.get("setting").get("logo")})},GD.Org.Setup.PreviewView=GD.Org.BaseView.extend({template:"setup_preview_template",initialize:function(){return this.listenTo(this.model,"change",this.render)}}),$(document).on("ready page:load",function(){if($(".organization-setup-container").length>0)return $("input[name=subdomain]").on("focus",function(e){return $(e.target.closest("form")).find(".errors").hide()})})}.call(this),function(){GD.Org.Profile.Organization=GD.Org.BaseModel.extend({idAttribute:"subdomain",urlRoot:function(){return GD_ORG_CONFIG_API_HOST+"/organizations"},industryDisplayName:function(){var e;return e=_.find(GD_ORG_CONFIG_INDUSTRIES,{english_name:this.get("industry_name")}),e!=null?e.name:void 0},toJSON:function(){var e;return e=Backbone.Model.prototype.toJSON.call(this),e.setting_attributes=this.get("setting").toJSON(),e},isCompleted:function(){return this.get("status")==="complete"},poweredByLabel:function(){var e;return e=this.get("setting"),e.get("custom_footer_enabled")&&e.get("custom_footer")?e.get("custom_footer"):"金数据"}})}.call(this),function(){GD.Org.Profile.OrganizationSetting=GD.Org.BaseModel.extend({idAttribute:"organizationSubdomain",initialize:function(e){return this.organizationSubdomain=e.organizationSubdomain},url:function(){return GD_ORG_CONFIG_API_HOST+"/organizations/"+this.get("organizationSubdomain")+"/setting"}})}.call(this),function(){GD.Org.Profile.OrganizationBasicInfoView=GD.Org.BaseView.extend({className:"content-section",template:"org-profile-template",initialize:function(){return this.listenTo(this.model,"sync",this.render)},events:{"click .organization-edit":"showEditView"},showEditView:function(){var e;return e=new GD.Org.Profile.OrganizationBasicInfoEditView({model:this.model}),e.render()},render:function(){return this.renderTemplate({model:this.model}),this.renderPreview(),this},renderPreview:function(){var e;return e=GD.Org.Setup.OrganizationPreview.from(this.model),(new GD.Org.Setup.PreviewView({model:e,el:this.$el.find(".preview")})).render()}})}.call(this),function(){GD.Org.Profile.OrganizationCustomFooterView=GD.Org.BaseView.extend({className:"content-section",template:"org_footer_template",events:{"change input[name=custom_footer_enabled]":"toggleCustomFooter","change input[name=custom_footer]":"updateCustomFooter","click .submit":"save"},render:function(){return this.renderTemplate({model:this.model}),this.renderSwitchery(),this.renderTooltip(),this},toggleCustomFooter:function(){return this.$el.find(".custom-footer-group").toggleClass("gd-hide"),this.$el.find(".organization-custom-footer-demo p").toggleClass("gd-hide")},updateCustomFooter:function(e){var t;return t=$(e.target).val(),this.model.set("custom_footer",t),this.$el.find(".custom-footer").text(t)},renderSwitchery:function(){var e,t;return t=this.$el.find(".need-switch"),e={color:GD.switcheryMainColor},e.size=t.data("switchery-size"),new Switchery(t[0],e)},renderTooltip:function(){return this.$el.find(".custom-footer-tooltip").gdHoverTooltip({content:function(e){return function(){return e.$el.find(".organization-custom-footer-demo").clone()}}(this),position:"right"})},saved:function(){return GD.showFlashNotification("保存设置成功")}})}.call(this),function(){GD.Org.Profile.OrganizationBasicInfoEditView=GD.Org.BaseView.extend({events:{"click .submit":"save","change input[data-for-preview]":"liveRenderPreview","click .file-uploader-button":"clickUploader"},template:"org_edit_template",render:function(){return this.previewModel=GD.Org.Setup.OrganizationPreview.from(this.model),this.renderTemplate({model:this.model,industries:GD_ORG_CONFIG_INDUSTRIES}),this.renderColorPicker(),this.renderImageUploader(),this.renderCustomeFooterView(),$("#org-edit-modal").html(this.el).modal(),this},renderColorPicker:function(){return this.$el.find("[data-role=color-picker]").spectrum({showInput:!0,showButtons:!1,replacerClassName:"inline-spectrum-replacer",containerClassName:"gd-spectrum-container",move:function(e){return $(this).nextAll("span").text(e.toHexString())}})},renderPreview:function(){return(new GD.Org.Setup.PreviewView({model:this.previewModel,el:this.$el.find(".preview")})).render()},renderCustomeFooterView:function(){return(new GD.Org.Profile.OrganizationCustomFooterView({model:this.model.get("setting"),el:this.$el.find(".customer-footer-container")})).render()},liveRenderPreview:function(e){var t,n,r;return t=$(e.target),n=t.data("for-preview"),r=t.val(),this.previewModel.set(n,r)},renderImageUploader:function(){return this.$el.find("#logo_file_uploader").fileupload({paramName:"file",dataType:"json",dropZone:null,add:function(e){return function(t,n){var r;return r=n.files[0],$.post(e.$el.find("#logo_file_uploader").closest("form").data("token-url"),{},function(e){return n.filename=r.name,n.formData={accept:"text/plain; charset=utf-8",token:e.token},n.submit()},"json").fail(function(e){var t;return t=JSON.parse(e.responseText)})}}(this),progress:function(e,t){var n;return n=parseInt(t.loaded/t.total*95,10)},always:function(e){return function(t,n){var r,i,s;return n.textStatus==="error"?s=$.parseJSON(n.jqXHR.responseText):(r=e.$el.find("#logo_file_uploader").closest("form").data("image-host"),i=r+"/"+n.result.key,e.$el.find('input[name="setting.logo"]').val(i).trigger("change"),e.$el.find(".upload-logo img").attr("src",i).removeClass("gd-hide"))}}(this)})},clickUploader:function(e){return e.preventDefault(),this.$el.find("#logo_file_uploader").click()},saved:function(){var e,t;return t=this.model.get("short_name"),e=this.model.get("setting").custom_footer,t&&!e&&this.$el.find("input[name=custom_footer]"
).val(t),this.model.set("setting",new GD.Org.Profile.OrganizationSetting(this.model.get("setting"))),GD.showFlashNotification("保存设置成功")}})}.call(this),function(){GD.Org.Profile.OrganizationBasicInfoPreviewView=GD.Org.BaseView.extend({template:"org_preview_template",render:function(){return this.previewModel=GD.Org.Setup.OrganizationPreview.from(this.model),this.renderTemplate({model:this.model}),this.renderPreview(),$("#org-preview-modal").html(this.el).modal(),this},renderPreview:function(){return(new GD.Org.Setup.PreviewView({model:this.previewModel,el:this.$el.find(".preview")})).render()}})}.call(this),function(){GD.Org.Profile.OrganizationProfileView=GD.Org.LayoutView.extend({el:".organization-main-container",initialize:function(e){return this.canUseCustomFooter=e.canUseCustomFooter},subviews:function(){return this.canUseCustomFooter?[new GD.Org.Profile.OrganizationBasicInfoView({model:this.model}),new GD.Org.Profile.OrganizationCustomFooterView({model:this.model.get("setting")})]:[new GD.Org.Profile.OrganizationBasicInfoView({model:this.model})]}})}.call(this),function(){GD.Org.Profile.App=function(){function e(e){this.subdomain=e.subdomain}return e.prototype.start=function(){var e,t,n;return t=new GD.Org.Profile.Organization({subdomain:this.subdomain}),n=new GD.Org.Profile.OrganizationSetting({organizationSubdomain:this.subdomain}),e=this.canUseCustomFooter(),$.when(t.fetch(),n.fetch()).then(function(){return t.set("setting",n),(new GD.Org.Profile.OrganizationProfileView({model:t,canUseCustomFooter:e})).render()})},e.prototype.canUseCustomFooter=function(){return $("input#can_use_custom_footer").val()==="true"},e}()}.call(this),function(){GD.Org.AddressBook.Department=GD.Org.BaseModel.extend({defaults:{children:[]},initialize:function(e,t){return this.subdomain=t.subdomain,this.parent=t.parent},url:function(){return GD_ORG_CONFIG_API_HOST+"/organizations/"+this.subdomain+"/departments"},hasChild:function(){return _.any(this.get("children"),function(e){return!e.get("deleted")})},get:function(e){var t;return t=GD.Org.BaseModel.prototype.get.call(this,e),e==="children"?this.childrenModels?this.childrenModels:(this.childrenModels=t.map(function(e){return function(t){return new GD.Org.AddressBook.Department(t,{subdomain:e.subdomain,parent:e})}}(this)),this.childrenModels):t},restoreFrom:function(e){return this.set(e),delete this.childrenModels},createChildDepartment:function(){return this.get("children").push(new GD.Org.AddressBook.Department({},{subdomain:this.subdomain,parent:this})),this.trigger("add:children")}})}.call(this),function(){GD.Org.AddressBook.DepartmentSidebar=GD.Org.BaseModel.extend({initialize:function(e){return this.subdomain=e.subdomain},fetchDepartments:function(){return this.rootDepartment=new GD.Org.AddressBook.Department({},{subdomain:this.subdomain}),this.rootDepartment.fetch()}})}.call(this),function(){GD.Org.AddressBook.DepartmentView=GD.Org.ParentChildView.extend({className:"department",template:"department_template",childTag:"li",childWrapTag:"ul",events:{"click .collapse-toggle":"toggleCollapse","click .edit-name":"enterEditNameMode","click .delete-node:not(.disabled)":"deleteDepartment","click .add-child":"addDepartment","keypress input[name=department-name]":"enterDepartmentName","blur input[name=department-name]":"updateDepartmentName"},initialize:function(){return this.listenTo(this.model,"delete:children",this.render),this.listenTo(this.model,"add:children",this.render)},render:function(){return this.renderTemplate({model:this.model}),this.renderChildren(function(e){return new GD.Org.AddressBook.DepartmentView({model:e})}),this.model.get("name")||this._enterEditNameMode(),this},toggleCollapse:function(e){return e.stopPropagation(),this.$el.toggleClass("collapsed"),this.$el.find("i").toggleClass("gd-icon-minus-circle-o"),this.$el.find("i").toggleClass("gd-icon-plus-circle-o")},enterEditNameMode:function(e){return e.stopPropagation(),this._enterEditNameMode()},_enterEditNameMode:function(){return this.$el.find("> .department-name").addClass("edit-name-mode"),this.$el.find("> .department-name input[name=department-name]").select().focus()},updateDepartmentName:function(e){var t;return e.stopPropagation(),t=$(e.target).val(),this.model.set({name:t}),this.render()},enterDepartmentName:function(e){if(e.keyCode===13)return e.preventDefault(),$(e.target).blur()},deleteDepartment:function(e){return e.preventDefault(),this.model.set("deleted",!0),this.model.parent.trigger("delete:children")},addDepartment:function(e){return e.preventDefault(),this.model.createChildDepartment()}})}.call(this),function(){GD.Org.AddressBook.DepartmentSidebarView=GD.Org.BaseView.extend({template:"department_sidebar_template",events:{"click .edit-department":"enterEditMode","click .cancel-edit":"cancelEditMode","click .save-edit":"save"},render:function(){return this.renderTemplate({model:this.model}),this.resetClass(),this.renderDepartments(),this},renderDepartments:function(){var e;return e=new GD.Org.AddressBook.DepartmentView({model:this.model.rootDepartment}),this.$el.find("#departments").html(e.render().el)},enterEditMode:function(){return this.originalDepartmentsData=this.model.rootDepartment.toJSON(),this.$el.addClass("edit-mode")},resetClass:function(){return this.$el.removeClass("edit-mode")},cancelEditMode:function(){return this.model.rootDepartment.restoreFrom(this.originalDepartmentsData),this.render()},save:function(){}})}.call(this),function(){GD.Org.AddressBook.App=function(){function e(e){this.subdomain=e.subdomain}return e.prototype.start=function(){var e;return e=new GD.Org.AddressBook.DepartmentSidebar({subdomain:this.subdomain}),$.when(e.fetchDepartments()).then(function(){return(new GD.Org.AddressBook.DepartmentSidebarView({model:e,el:$("#department_sidebar")})).render()})},e}()}.call(this),function(){var e;e=Backbone.Model.extend({defaults:{email:null,name:null},initialize:function(){return this.index=null},validate:function(e,t){if(!$.trim(e.email))return"邮件地址不能为空";if(!GD.REGEXP.email.test(e.email))return"邮件地址格式不正确"}}),GD.Org.MemberInviteList=GD.Org.BaseCollection.extend({model:e,initialize:function(e,t){return this.subdomain=t.subdomain},url:function(){return"/organization/invite"},valid:function(){return this.filter(function(e){return e.isValid()})},invalid:function(){return this.filter(function(e){return!e.isValid()})},toJSON:function(){var e;return e=this.map(function(e){return e.toJSON()}),{invites:e}},save:function(e){var t;return t=new GD.Org.MemberInviteList(this.valid(),{subdomain:this.subdomain}),this.sync("create",t,{success:e.success,error:e.error})}})}.call(this),function(){GD.Org.Member.AccountUsageView=GD.Org.BaseView.extend({className:"content-section",template:"account_usage_template"})}.call(this),function(){var e;e=GD.Org.BaseView.extend({template:"invite_inputs_template",tagName:"div",className:"row",events:{"change [data-field-key]":"updateModel"},updateModel:function(e){var t,n;return t=$(e.target),this.model.set((n={},n[""+t.data("field-key")]=t.val(),n))}}),GD.Org.Member.InviteMembersView=GD.Org.BaseView.extend({el:"#invite_members_modal .modal-content",template:"invite_members_template",events:{"click [data-role=new_invite]":"addNewInvite","click .modal-footer a":"invite"},initialize:function(e){return this.members=e.members,this.collection=new GD.Org.MemberInviteList([],{subdomain:this.model.id}),this.listenTo(this.collection,"add",this.appendNewMemberView)},render:function(){return this.renderTemplate({model:this.model,members:this.members,maxMemberCount:this.maxMemberCount()}),this.limit=this.$(".invite").data("limit"),this.members.activeCount()<this.maxMemberCount()&&(this.collection.reset([{}]),this.collection.each(function(t){return function(n,r){return n.index=r+1,t.$(".invite").append((new e({model:n})).render().el)}}(this))),this},inviteBtn:function(){return this.$(".modal-footer a.submit")},maxMemberCount:function(){return parseInt($("#invite_members_template").data("max-member-count"),10)},addNewInvite:function(e){this.collection.length<this.limit&&this.collection.add({});if(this.collection.length===this.limit)return $(e.target).remove()},appendNewMemberView:function(t){return t.index=this.collection.indexOf(t)+1,this.$(".invite").append((new e({model:t})).render().el)},invite:function(e){var t;return GD.disableBtn(e.target),this.collection.valid().length>0?this.collection.save({success:this.onSuccess.bind(this),error:this.onFailed.bind(this)}):(t=_.uniq(_.map(this.collection.invalid(),function(e){return e.validationError})),GD.showErrorMessageBesides(this.$(".modal-footer"),GD.toSentence(t),!1,!0),GD.enableBtn(e.target))},onSuccess:function(e,t,n){var r;return $("#invite_members_modal").modal("hide"),GD.enableBtn(this.inviteBtn()),r=GD.toSentence(_.pluck(e,"email")),GD.showFlashNotification("已发送邮件邀请至"+r)},onFailed:function(e,t){var n;return GD.enableBtn(this.inviteBtn()),n=GD.toSentence(e.responseJSON),GD.showErrorMessageBesides(this.$(".modal-footer"),n,!1,!0)}})}.call(this),function(){GD.Org.Member.MemberCollectionView=GD.Org.BaseView.extend({className:"content-section",template:"member_collection_template",events:function(){return{"show.bs.modal #invite_members_modal":"renderInviteModal"}},initialize:function(){return this.listenTo(this.model,"change",this.render),this.listenTo(this.collection,"change:status",this.updateInviteButtonStatus),GD.PUBSUB.on("statusChange roleChange",this.render,this)},render:function(){return this.renderTemplate(),this.renderMemberItem(),this},renderMemberItem:function(){var e;return e=this.$el.find("tbody"),this.collection.each(function(t){return function(n){var r;if(n.isActived())return n.set({subdomain:t.model.get("subdomain")}),r=new GD.Org.Member.MemberItemView({model:n,organization:t.model}),e.append(r.render().el)}}(this))},renderInviteModal:function(){return this.inviteMembersView||(this.inviteMembersView=new GD.Org.Member.InviteMembersView({model:this.model,members:this.collection})),this.inviteMembersView.render()},updateInviteButtonStatus:function(){var e;return e=this.collection.activeCount()<this.maxMemberCount(),this.$el.find(".waiting-audits-link-container").toggle(e)},maxMemberCount:function(){return parseInt($("#member_collection_template").data("max-member-count"),10)}})}.call(this),function(){GD.Org.Member.MemberItemView=GD.Org.BaseView.extend({tagName:"tr",template:"member_item_template",events:function(){return{"click .role-edit-link":"updateRole","click .change-status-link:not(.disabled)":"updateStatus"}},initialize:function(e){return this.organization=e.organization,this.listenTo(this.model,"change",this.render)},render:function(){return this.renderTemplate({model:this.model}),this.$el.toggleClass("forbidden",this.model.isForbidden()),this},updateRole:function(e){return this.model.set({role:$(e.target).data("role")}),this.model.save(null,{patch:!0}),GD.PUBSUB.trigger("roleChange")},updateStatus:function(e){var t,n;n=$(e.target).data("status"),t=n==="forbidden"?"确定要禁用该成员?":"确定要启用该成员";if(confirm(t))return this.model.set({status:n}),this.model.save(null,{patch:!0,success:function(e){return function(){return GD.showFlashNotification("状态保存成功"),e.createActivity(n)}}(this),error:function(){return GD.showFlashNotification("状态保存失败","danger")}})},createActivity:function(e){var t;if(e==="forbidden")return t=new GD.Org.Activity({user:this.model.get("user_id"),verb:"org_disable_member",content:this.organization.get("name"),out_of_organization:!0}),t.save()}})}.call(this),function(){GD.Org.Member.ProfileView=GD.Org.LayoutView.extend({el:".member-setting-main-container",subviews:function(){return[new GD.Org.Member.MemberCollectionView({model:this.model,collection:this.collection})]}})}.call(this),function(){GD.Org.Member.App=function(){function e(e){this.subdomain=e.subdomain}return e.prototype.start=function(){var e,t;return t=new GD.Org.Profile.Organization({subdomain:this.subdomain}),e=new GD.Org.MemberCollection({subdomain:this.subdomain}),$.when(t.fetch(),e.fetch()).then(function(){return this.profileView=(new GD.Org.Member.ProfileView({model:t,collection:e})).render()})},e.prototype.restart=function(){var e;return(e=this.profileView)!=null&&e.remove(),this.start()},e}()}.call(this),function(){$(document).on("ready page:load",function(){var e;if($(".organization-main-container, .organization-address-book-container, .member-setting-main-container, .dashboard-org-container").length>0)return $(".organization-main-container").length>0?(e=new GD.Org.Profile.App({subdomain:GD.currentOrganization}),e.start()):$(".organization-address-book-container").length>0?(e=new GD.Org.AddressBook.App({subdomain:GD.currentOrganization}),e.start()):$(".member-setting-main-container").length>0&&(e=new GD.Org.Member.App({subdomain:GD.currentOrganization}),e.start()),$(".org-dialog-link").on("click",function(e){var t,n;return t=new GD.Org.Profile.Organization({subdomain:GD.currentOrganization}),n=new GD.Org.Profile.OrganizationSetting({organizationSubdomain:GD.currentOrganization}),$.when(t.fetch(),n.fetch()).then(function(){var r;return t.set("setting",n),r=$(e.target).data("action-type"),r==="preview"?(new GD.Org.Profile.OrganizationBasicInfoPreviewView({model:t})).render():(new GD.Org.Profile.OrganizationBasicInfoEditView({model:t})).render()})});return})}.call(this),function(){}.call(this);